<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: v8::internal::compiler::JumpThreading Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classv8_1_1internal_1_1compiler_1_1JumpThreading.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classv8_1_1internal_1_1compiler_1_1JumpThreading-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">v8::internal::compiler::JumpThreading Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="jump-threading_8h_source.html">jump-threading.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for v8::internal::compiler::JumpThreading:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1compiler_1_1JumpThreading__coll__graph.svg" width="190" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3bae3f96294b5a12e5cbd6c853bb9255"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1compiler.html#a28d08f40d5dc488600051ba2ef537284">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1compiler_1_1JumpThreading.html#a3bae3f96294b5a12e5cbd6c853bb9255">ComputeForwarding</a> (<a class="el" href="classv8_1_1internal_1_1Zone.html">Zone</a> *local_zone, <a class="el" href="classv8_1_1internal_1_1ZoneVector.html">ZoneVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html">RpoNumber</a> &gt; *result, <a class="el" href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html">InstructionSequence</a> *<a class="el" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>, <a class="el" href="namespacev8_1_1internal_1_1compiler.html#a28d08f40d5dc488600051ba2ef537284">bool</a> frame_at_start)</td></tr>
<tr class="separator:a3bae3f96294b5a12e5cbd6c853bb9255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a1f4a562dd0ee71a188c70b8212d3e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1compiler_1_1JumpThreading.html#ab4a1f4a562dd0ee71a188c70b8212d3e">ApplyForwarding</a> (<a class="el" href="classv8_1_1internal_1_1Zone.html">Zone</a> *local_zone, <a class="el" href="classv8_1_1internal_1_1ZoneVector.html">ZoneVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html">RpoNumber</a> &gt; const &amp;forwarding, <a class="el" href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html">InstructionSequence</a> *<a class="el" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>)</td></tr>
<tr class="separator:ab4a1f4a562dd0ee71a188c70b8212d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="jump-threading_8h_source.html#l00016">16</a> of file <a class="el" href="jump-threading_8h_source.html">jump-threading.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ab4a1f4a562dd0ee71a188c70b8212d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a1f4a562dd0ee71a188c70b8212d3e">&#9670;&nbsp;</a></span>ApplyForwarding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::compiler::JumpThreading::ApplyForwarding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Zone.html">Zone</a> *&#160;</td>
          <td class="paramname"><em>local_zone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1ZoneVector.html">ZoneVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html">RpoNumber</a> &gt; const &amp;&#160;</td>
          <td class="paramname"><em>forwarding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html">InstructionSequence</a> *&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jump-threading_8cc_source.html#l00255">255</a> of file <a class="el" href="jump-threading_8cc_source.html">jump-threading.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                                               {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.turbo_jt) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// Skip empty blocks except for the first block.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">int</span> ao = 0;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> block : <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;ao_blocks()) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    RpoNumber block_rpo = block-&gt;rpo_number();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">int</span> block_num = block_rpo.ToInt();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    RpoNumber result_rpo = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>[block_num];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">bool</span> skip = block_rpo != <a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#abb38c79e5fbf770062dfb5dc116b4495">RpoNumber::FromInt</a>(0) &amp;&amp; result_rpo != block_rpo;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (result_rpo != block_rpo) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// We need the handler and switch target information to be propagated, so</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">// that branch targets are annotated as necessary for control flow</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">// integrity checks (when enabled).</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(block_rpo)-&gt;IsHandler()) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(result_rpo)-&gt;MarkHandler();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(block_rpo)-&gt;IsTableSwitchTarget()) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(result_rpo)-&gt;set_table_switch_target(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (skip) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> instr_idx = block-&gt;code_start(); instr_idx &lt; block-&gt;code_end();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;           ++instr_idx) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        Instruction* instr = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionAt(instr_idx);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">FlagsModeField::decode</a>(instr-&gt;opcode()), <a class="code" href="namespacev8_1_1internal_1_1compiler.html#adc1767c7266218e2b2be41205983547aa99fe92d848ea37e005a6bfb156b8aaab">kFlags_branch</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (instr-&gt;arch_opcode() == kArchJmp ||</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            instr-&gt;arch_opcode() == kArchRet) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <span class="comment">// Overwrite a redundant jump with a nop.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;jt-fw nop @%d\n&quot;</span>, instr_idx);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          instr-&gt;OverwriteWithNop();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          <span class="comment">// Eliminate all the ParallelMoves.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53aa9021cbe7ad6b8f9c056ab8bc75237c58">Instruction::FIRST_GAP_POSITION</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;               <a class="code" href="namespacev8_1_1internal.html">i</a> &lt;= <a class="code" href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53aa11e45069c25ab5b77d5c250d7bae847a">Instruction::LAST_GAP_POSITION</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53a">Instruction::GapPosition</a> pos =</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keyword">static_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53a">Instruction::GapPosition</a><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            ParallelMove* instr_move = instr-&gt;GetParallelMove(pos);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">if</span> (instr_move != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;              instr_move-&gt;Eliminate();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          <span class="comment">// If this block was marked as a handler or a switch target, it can be</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <span class="comment">// unmarked now.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(block_rpo)-&gt;UnmarkHandler();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(block_rpo)-&gt;set_table_switch_target(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(block_rpo)-&gt;set_omitted_by_jump_threading();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// Renumber the blocks so that IsNextInAssemblyOrder() will return true,</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// even if there are skipped blocks in-between.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    block-&gt;set_ao_number(<a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#abb38c79e5fbf770062dfb5dc116b4495">RpoNumber::FromInt</a>(ao));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (!skip) ao++;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// Patch RPO immediates.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html#a3723db11ab113e0aa37e25fd23d58661">InstructionSequence::RpoImmediates</a>&amp; rpo_immediates = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;rpo_immediates();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; rpo_immediates.size(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    RpoNumber rpo = rpo_immediates[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (rpo.IsValid()) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      RpoNumber fw = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>[rpo.ToInt()];</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (fw != rpo) rpo_immediates[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] = fw;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html_a554df4b9ae5f0dc36b4d092bfc2e004b"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">v8::base::BitField::decode</a></div><div class="ttdeci">static constexpr T decode(U value)</div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00066">bit-field.h:66</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1InstructionSequence_html_a3723db11ab113e0aa37e25fd23d58661"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html#a3723db11ab113e0aa37e25fd23d58661">v8::internal::compiler::InstructionSequence::RpoImmediates</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; RpoImmediates</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01942">instruction.h:1942</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1Instruction_html_ac16ebb6b4b65e5787eebc6ddeb3ed53a"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53a">v8::internal::compiler::Instruction::GapPosition</a></div><div class="ttdeci">GapPosition</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01103">instruction.h:1103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1Instruction_html_ac16ebb6b4b65e5787eebc6ddeb3ed53aa11e45069c25ab5b77d5c250d7bae847a"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53aa11e45069c25ab5b77d5c250d7bae847a">v8::internal::compiler::Instruction::LAST_GAP_POSITION</a></div><div class="ttdeci">@ LAST_GAP_POSITION</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01108">instruction.h:1107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1Instruction_html_ac16ebb6b4b65e5787eebc6ddeb3ed53aa9021cbe7ad6b8f9c056ab8bc75237c58"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1Instruction.html#ac16ebb6b4b65e5787eebc6ddeb3ed53aa9021cbe7ad6b8f9c056ab8bc75237c58">v8::internal::compiler::Instruction::FIRST_GAP_POSITION</a></div><div class="ttdeci">@ FIRST_GAP_POSITION</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01106">instruction.h:1106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1RpoNumber_html_abb38c79e5fbf770062dfb5dc116b4495"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#abb38c79e5fbf770062dfb5dc116b4495">v8::internal::compiler::RpoNumber::FromInt</a></div><div class="ttdeci">static RpoNumber FromInt(int index)</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01184">instruction.h:1184</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_adc1767c7266218e2b2be41205983547aa99fe92d848ea37e005a6bfb156b8aaab"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#adc1767c7266218e2b2be41205983547aa99fe92d848ea37e005a6bfb156b8aaab">v8::internal::compiler::kFlags_branch</a></div><div class="ttdeci">@ kFlags_branch</div><div class="ttdef"><b>Definition:</b> <a href="instruction-codes_8h_source.html#l00224">instruction-codes.h:224</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3762add7a183a4d1750c04e5fa1a6d17"><div class="ttname"><a href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">v8::internal::TRACE</a></div><div class="ttdeci">TRACE(&quot;UNIMPLEMENTED code_generator_riscv64: %s at line %d\n&quot;, __FUNCTION__, __LINE__)</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="instruction_8h_source.html#l00956">v8::internal::compiler::Instruction::arch_opcode()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="bit-field_8h_source.html#l00066">v8::base::BitField&lt; T, shift, size, U &gt;::decode()</a>, <a class="el" href="instruction_8cc_source.html#l00368">v8::internal::compiler::ParallelMove::Eliminate()</a>, <a class="el" href="instruction_8h_source.html#l01106">v8::internal::compiler::Instruction::FIRST_GAP_POSITION</a>, <a class="el" href="instruction_8h_source.html#l01184">v8::internal::compiler::RpoNumber::FromInt()</a>, <a class="el" href="instruction_8h_source.html#l01117">v8::internal::compiler::Instruction::GetParallelMove()</a>, <a class="el" href="json-stringifier_8cc_source.html#l00548">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a>, <a class="el" href="instruction_8h_source.html#l01183">v8::internal::compiler::RpoNumber::IsValid()</a>, <a class="el" href="instruction-codes_8h_source.html#l00224">v8::internal::compiler::kFlags_branch</a>, <a class="el" href="instruction_8h_source.html#l01107">v8::internal::compiler::Instruction::LAST_GAP_POSITION</a>, <a class="el" href="instruction_8h_source.html#l00955">v8::internal::compiler::Instruction::opcode()</a>, <a class="el" href="instruction_8h_source.html#l01016">v8::internal::compiler::Instruction::OverwriteWithNop()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="zone-containers_8h_source.html#l00238">v8::internal::ZoneVector&lt; T &gt;::size()</a>, <a class="el" href="instruction_8h_source.html#l01175">v8::internal::compiler::RpoNumber::ToInt()</a>, <a class="el" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">v8::internal::TRACE()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="register-allocation-phase_8h_source.html#l00185">v8::internal::compiler::turboshaft::JumpThreadingPhase::Run()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1compiler_1_1JumpThreading_ab4a1f4a562dd0ee71a188c70b8212d3e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1compiler_1_1JumpThreading_ab4a1f4a562dd0ee71a188c70b8212d3e_icgraph.svg" width="579" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3bae3f96294b5a12e5cbd6c853bb9255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bae3f96294b5a12e5cbd6c853bb9255">&#9670;&nbsp;</a></span>ComputeForwarding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1compiler.html#a28d08f40d5dc488600051ba2ef537284">bool</a> v8::internal::compiler::JumpThreading::ComputeForwarding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Zone.html">Zone</a> *&#160;</td>
          <td class="paramname"><em>local_zone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1ZoneVector.html">ZoneVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html">RpoNumber</a> &gt; *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1compiler_1_1InstructionSequence.html">InstructionSequence</a> *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1compiler.html#a28d08f40d5dc488600051ba2ef537284">bool</a>&#160;</td>
          <td class="paramname"><em>frame_at_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jump-threading_8cc_source.html#l00126">126</a> of file <a class="el" href="jump-threading_8cc_source.html">jump-threading.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                           {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  ZoneStack&lt;RpoNumber&gt; <a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a>(local_zone);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  JumpThreadingState state = {<span class="keyword">false</span>, *<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>, <a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a>};</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  state.Clear(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockCount());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  RpoNumber empty_deconstruct_frame_return_block = <a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#a743434cf5bbb839ad8944ac91274ada1">RpoNumber::Invalid</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> empty_deconstruct_frame_return_size;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  RpoNumber empty_no_deconstruct_frame_return_block = <a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#a743434cf5bbb839ad8944ac91274ada1">RpoNumber::Invalid</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> empty_no_deconstruct_frame_return_size;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  GapJumpRecord record(local_zone);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// Iterate over the blocks forward, pushing the blocks onto the stack.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> instruction_block : <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;instruction_blocks()) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    RpoNumber current = instruction_block-&gt;rpo_number();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    state.PushIfUnvisited(current);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Process the stack, which implements DFS through empty blocks.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">while</span> (!state.stack.empty()) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      InstructionBlock* block = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionBlockAt(state.stack.top());</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="comment">// Process the instructions in a block up to a non-empty instruction.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;jt [%d] B%d\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a>.size()),</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            block-&gt;rpo_number().ToInt());</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      RpoNumber fw = block-&gt;rpo_number();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = block-&gt;code_start(); i &lt; block-&gt;code_end(); ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        Instruction* instr = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InstructionAt(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (!instr-&gt;AreMovesRedundant()) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  parallel move&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          <span class="comment">// can&#39;t skip instructions with non redundant moves, except when we</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="comment">// can forward to a block with identical gap-moves.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          <span class="keywordflow">if</span> (instr-&gt;arch_opcode() == kArchJmp) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot; jmp&quot;</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            RpoNumber forward_to;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">if</span> ((frame_at_start || !(block-&gt;must_deconstruct_frame() ||</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                     block-&gt;must_construct_frame())) &amp;&amp;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                record.CanForwardGapJump(instr, block-&gt;rpo_number(),</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                         <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InputRpo(instr, 0),</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                         &amp;forward_to)) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;              <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(forward_to.IsValid());</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;              fw = forward_to;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;              <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;\n  merge B%d into B%d&quot;</span>, block-&gt;rpo_number().ToInt(),</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    forward_to.ToInt());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">FlagsModeField::decode</a>(instr-&gt;opcode()) != <a class="code" href="namespacev8_1_1internal_1_1compiler.html#adc1767c7266218e2b2be41205983547aa5f89d38c41ee58a484a39c31a2f9edcf">kFlags_none</a>) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <span class="comment">// can&#39;t skip instructions with flags continuations.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  flags\n&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instr-&gt;IsNop()) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="comment">// skip nops.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  nop\n&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instr-&gt;arch_opcode() == kArchJmp) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="comment">// try to forward the jump instruction.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  jmp\n&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="comment">// if this block deconstructs the frame, we can&#39;t forward it.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          <span class="comment">// TODO(mtrofin): we can still forward if we end up building</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          <span class="comment">// the frame at start. So we should move the decision of whether</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="comment">// to build a frame or not in the register allocator, and trickle it</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          <span class="comment">// here and to the code generator.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="keywordflow">if</span> (frame_at_start || !(block-&gt;must_deconstruct_frame() ||</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                  block-&gt;must_construct_frame())) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            fw = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;InputRpo(instr, 0);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instr-&gt;IsRet()) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  ret\n&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(block-&gt;must_construct_frame(),</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        block-&gt;must_deconstruct_frame());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <span class="comment">// Only handle returns with immediate/constant operands, since</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="comment">// they must always be the same for all returns in a function.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;          <span class="comment">// Dynamic return values might use different registers at</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;          <span class="comment">// different return sites and therefore cannot be shared.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="keywordflow">if</span> (instr-&gt;InputAt(0)-&gt;IsImmediate()) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> return_size =</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                ImmediateOperand::cast(instr-&gt;InputAt(0))-&gt;inline_int32_value();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="comment">// Instructions can be shared only for blocks that share</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="comment">// the same |must_deconstruct_frame| attribute.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (block-&gt;must_deconstruct_frame()) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              <span class="keywordflow">if</span> (empty_deconstruct_frame_return_block ==</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#a743434cf5bbb839ad8944ac91274ada1">RpoNumber::Invalid</a>()) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                empty_deconstruct_frame_return_block = block-&gt;rpo_number();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                empty_deconstruct_frame_return_size = return_size;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (empty_deconstruct_frame_return_size == return_size) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                fw = empty_deconstruct_frame_return_block;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                block-&gt;clear_must_deconstruct_frame();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;              }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;              <span class="keywordflow">if</span> (empty_no_deconstruct_frame_return_block ==</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#a743434cf5bbb839ad8944ac91274ada1">RpoNumber::Invalid</a>()) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                empty_no_deconstruct_frame_return_block = block-&gt;rpo_number();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                empty_no_deconstruct_frame_return_size = return_size;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (empty_no_deconstruct_frame_return_size ==</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                         return_size) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                fw = empty_no_deconstruct_frame_return_block;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;              }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="comment">// can&#39;t skip other instructions.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;  other\n&quot;</span>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      state.Forward(fw);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">for</span> (RpoNumber num : *<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(num.IsValid());</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_turbo_jt) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; i &lt; static_cast&lt;int&gt;(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;size()); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;B%d &quot;</span>, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordtype">int</span> to = (*result)[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].ToInt();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html">i</a> != to) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;-&gt; B%d\n&quot;</span>, to);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">TRACE</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> state.forwarded;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1RpoNumber_html_a743434cf5bbb839ad8944ac91274ada1"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1RpoNumber.html#a743434cf5bbb839ad8944ac91274ada1">v8::internal::compiler::RpoNumber::Invalid</a></div><div class="ttdeci">static RpoNumber Invalid()</div><div class="ttdef"><b>Definition:</b> <a href="instruction_8h_source.html#l01185">instruction.h:1185</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_ab0275d47f9778d486eafe88b18c5851d"><div class="ttname"><a href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00042">unicode.cc:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_adc1767c7266218e2b2be41205983547aa5f89d38c41ee58a484a39c31a2f9edcf"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#adc1767c7266218e2b2be41205983547aa5f89d38c41ee58a484a39c31a2f9edcf">v8::internal::compiler::kFlags_none</a></div><div class="ttdeci">@ kFlags_none</div><div class="ttdef"><b>Definition:</b> <a href="instruction-codes_8h_source.html#l00223">instruction-codes.h:223</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2e748ee13f84c923e077d341045b1212"><div class="ttname"><a href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">v8::internal::stack</a></div><div class="ttdeci">stack</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00824">wasm-objects-inl.h:824</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="instruction_8h_source.html#l00956">v8::internal::compiler::Instruction::arch_opcode()</a>, <a class="el" href="instruction_8cc_source.html#l00415">v8::internal::compiler::Instruction::AreMovesRedundant()</a>, <a class="el" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>, <a class="el" href="instruction_8h_source.html#l01786">v8::internal::compiler::InstructionBlock::clear_must_deconstruct_frame()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="instruction_8h_source.html#l01724">v8::internal::compiler::InstructionBlock::code_start()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="bit-field_8h_source.html#l00066">v8::base::BitField&lt; T, shift, size, U &gt;::decode()</a>, <a class="el" href="json-stringifier_8cc_source.html#l00548">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a>, <a class="el" href="instruction_8h_source.html#l00936">v8::internal::compiler::Instruction::InputAt()</a>, <a class="el" href="instruction_8h_source.html#l01185">v8::internal::compiler::RpoNumber::Invalid()</a>, <a class="el" href="instruction_8h_source.html#l01022">v8::internal::compiler::Instruction::IsNop()</a>, <a class="el" href="instruction_8h_source.html#l01034">v8::internal::compiler::Instruction::IsRet()</a>, <a class="el" href="instruction_8h_source.html#l01183">v8::internal::compiler::RpoNumber::IsValid()</a>, <a class="el" href="instruction-codes_8h_source.html#l00223">v8::internal::compiler::kFlags_none</a>, <a class="el" href="instruction_8h_source.html#l01781">v8::internal::compiler::InstructionBlock::must_construct_frame()</a>, <a class="el" href="instruction_8h_source.html#l01784">v8::internal::compiler::InstructionBlock::must_deconstruct_frame()</a>, <a class="el" href="instruction_8h_source.html#l00955">v8::internal::compiler::Instruction::opcode()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="instruction_8h_source.html#l01736">v8::internal::compiler::InstructionBlock::rpo_number()</a>, <a class="el" href="wasm-objects-inl_8h_source.html#l00824">v8::internal::stack</a>, <a class="el" href="instruction_8h_source.html#l01175">v8::internal::compiler::RpoNumber::ToInt()</a>, <a class="el" href="namespacev8_1_1internal.html#a3762add7a183a4d1750c04e5fa1a6d17">v8::internal::TRACE()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="register-allocation-phase_8h_source.html#l00185">v8::internal::compiler::turboshaft::JumpThreadingPhase::Run()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1compiler_1_1JumpThreading_a3bae3f96294b5a12e5cbd6c853bb9255_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1compiler_1_1JumpThreading_a3bae3f96294b5a12e5cbd6c853bb9255_icgraph.svg" width="600" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/V8SourceCode/src/compiler/backend/<a class="el" href="jump-threading_8h_source.html">jump-threading.h</a></li>
<li>/mnt/V8SourceCode/src/compiler/backend/<a class="el" href="jump-threading_8cc_source.html">jump-threading.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacev8.html">v8</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal_1_1compiler.html">compiler</a></li><li class="navelem"><a class="el" href="classv8_1_1internal_1_1compiler_1_1JumpThreading.html">JumpThreading</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:07:04 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
