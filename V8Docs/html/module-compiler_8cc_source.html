<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/wasm/module-compiler.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('module-compiler_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">module-compiler.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="module-compiler_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2017 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module-compiler_8h.html">src/wasm/module-compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="api-inl_8h.html">src/api/api-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enum-set_8h.html">src/base/enum-set.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fpu_8h.html">src/base/fpu.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutex_8h.html">src/base/platform/mutex.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="semaphore_8h.html">src/base/platform/semaphore.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">src/base/platform/time.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compiler_8h.html">src/codegen/compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-compiler_8h.html">src/compiler/wasm-compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">src/debug/debug.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="global-handles-inl_8h.html">src/handles/global-handles-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="counters-scopes_8h.html">src/logging/counters-scopes.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="metrics_8h.html">src/logging/metrics.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tracing_2trace-event_8h.html">src/tracing/trace-event.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="code-space-access_8h.html">src/wasm/code-space-access.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compilation-environment-inl_8h.html">src/wasm/compilation-environment-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="jump-table-assembler_8h.html">src/wasm/jump-table-assembler.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module-decoder_8h.html">src/wasm/module-decoder.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pgo_8h.html">src/wasm/pgo.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="std-object-sizes_8h.html">src/wasm/std-object-sizes.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="streaming-decoder_8h.html">src/wasm/streaming-decoder.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-code-manager_8h.html">src/wasm/wasm-code-manager.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-code-pointer-table-inl_8h.html">src/wasm/wasm-code-pointer-table-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-engine_8h.html">src/wasm/wasm-engine.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-feature-flags_8h.html">src/wasm/wasm-feature-flags.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-import-wrapper-cache_8h.html">src/wasm/wasm-import-wrapper-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-js_8h.html">src/wasm/wasm-js.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-limits_8h.html">src/wasm/wasm-limits.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-objects-inl_8h.html">src/wasm/wasm-objects-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-result_8h.html">src/wasm/wasm-result.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-serialization_8h.html">src/wasm/wasm-serialization.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">   43</a></span>&#160;<span class="preprocessor">#define TRACE_COMPILE(...)                                 \</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">  do {                                                     \</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">    if (v8_flags.trace_wasm_compiler) PrintF(__VA_ARGS__); \</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">  } while (false)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">   48</a></span>&#160;<span class="preprocessor">#define TRACE_STREAMING(...)                                \</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">  do {                                                      \</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">    if (v8_flags.trace_wasm_streaming) PrintF(__VA_ARGS__); \</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">  } while (false)</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="module-compiler_8cc.html#ad2bae691c0e698bc9c20b394f89ffb3c">   53</a></span>&#160;<span class="preprocessor">#define TRACE_LAZY(...)                                            \</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">  do {                                                             \</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">    if (v8_flags.trace_wasm_lazy_compilation) PrintF(__VA_ARGS__); \</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">  } while (false)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal_1_1wasm.html">v8::internal::wasm</a> {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html">   60</a></span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">   62</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">CompileStrategy</a> : uint8_t {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// Compiles functions on first use. In this case, execution will block until</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// the function&#39;s baseline is reached and top tier compilation starts in</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// background (if applicable).</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// Lazy compilation can help to reduce startup time and code size at the risk</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// of blocking execution.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ac8a910d8da4f0e471c17479f76af3625ae3c54a7917f0c719b11db86b1dd59b0f">kLazy</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// Compiles baseline ahead of execution and starts top tier compilation in</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// background (if applicable).</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ac8a910d8da4f0e471c17479f76af3625a1f85c8fbccc9bb4fcda482bf840bc3e2">kEager</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// Triggers baseline compilation on first use (just like {kLazy}) with the</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// difference that top tier compilation is started eagerly.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// This strategy can help to reduce startup time at the risk of blocking</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// execution, but only in its early phase (until top tier compilation</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// finishes).</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94a1fede85ba930eef5832cf35bc93cb2cb">kLazyBaselineEagerTopTier</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// Marker for default strategy.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  kDefault = <a class="code" href="namespacev8_1_1internal.html#ac8a910d8da4f0e471c17479f76af3625a1f85c8fbccc9bb4fcda482bf840bc3e2">kEager</a>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;};</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">class </span>CompilationStateImpl;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">class </span>CompilationUnitBuilder;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">   85</a></span>&#160;<span class="keyword">class </span><a class="code" href="v8config_8h.html#ae5350bf5d731891583a34f9c8c52b532">V8_NODISCARD</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">BackgroundCompileScope</a> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aeab6208ee3cb8d5d04f8be1ea90233fc">   87</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aeab6208ee3cb8d5d04f8be1ea90233fc">BackgroundCompileScope</a>(std::weak_ptr&lt;NativeModule&gt; native_module)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      : native_module_(native_module.lock()) {}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">   90</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(native_module_);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> native_module_.get();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">inline</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* compilation_state() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">bool</span> cancelled() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// Keep the native module alive while in this scope.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aa97a96e9e4753af9ec817898594ca51e">  100</a></span>&#160;  std::shared_ptr&lt;NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aa97a96e9e4753af9ec817898594ca51e">native_module_</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;};</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">  103</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> { <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f">kBaseline</a> = 0, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">kTopTier</a> = 1, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">kNumTiers</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">kTopTier</a> + 1 };</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// A set of work-stealing queues (vectors of units). Each background compile</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// task owns one of the queues and steals from all others once its own queue</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// runs empty.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html">  108</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html">CompilationUnitQueues</a> {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Public API for QueueImpl.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">  111</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">Queue</a> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">bool</span> ShouldPublish(<span class="keywordtype">int</span> num_processed_units) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  };</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a72c16e7a9412689bbc092e6cec45199f">  115</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a72c16e7a9412689bbc092e6cec45199f">CompilationUnitQueues</a>(<span class="keywordtype">int</span> num_imported_functions,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                 <span class="keywordtype">int</span> num_declared_functions)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      : num_imported_functions_(num_imported_functions),</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        num_declared_functions_(num_declared_functions) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Add one first queue, to add units to.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    queues_.emplace_back(std::make_unique&lt;QueueImpl&gt;(0));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#if !defined(__cpp_lib_atomic_value_initialization) || \</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">    __cpp_lib_atomic_value_initialization &lt; 201911L</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; atomic_counter : num_units_) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      std::atomic_init(&amp;atomic_counter, <span class="keywordtype">size_t</span>{0});</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    top_tier_compiled_ =</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        std::make_unique&lt;std::atomic&lt;bool&gt;[]&gt;(num_declared_functions);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#if !defined(__cpp_lib_atomic_value_initialization) || \</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">    __cpp_lib_atomic_value_initialization &lt; 201911L</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_declared_functions; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      std::atomic_init(&amp;top_tier_compiled_.get()[<a class="code" href="namespacev8_1_1internal.html">i</a>], <span class="keyword">false</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aef9c5e4fddae1550ab5ca318583d4c6d">  140</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">Queue</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aef9c5e4fddae1550ab5ca318583d4c6d">GetQueueForTask</a>(<span class="keywordtype">int</span> task_id) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">int</span> required_queues = task_id + 1;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> queues_guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(queues_.size()) &gt;= required_queues)) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> queues_[task_id].get();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Otherwise increase the number of queues.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> queues_guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">int</span> num_queues = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(queues_.size());</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">while</span> (num_queues &lt; required_queues) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordtype">int</span> steal_from = num_queues + 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      queues_.emplace_back(std::make_unique&lt;QueueImpl&gt;(steal_from));</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      ++num_queues;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// Update the {publish_limit}s of all queues.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// We want background threads to publish regularly (to avoid contention when</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// they are all publishing at the end). On the other side, each publishing</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// has some overhead (part of it for synchronizing between threads), so it</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// should not happen *too* often. Thus aim for 4-8 publishes per thread, but</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// distribute it such that publishing is likely to happen at different</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// times.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">int</span> units_per_thread = num_declared_functions_ / num_queues;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">int</span> min = std::max(10, units_per_thread / 8);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">int</span> queue_id = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; queue : queues_) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="comment">// Set a limit between {min} and {2*min}, but not smaller than {10}.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordtype">int</span> limit = min + (min * queue_id / num_queues);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      queue-&gt;publish_limit.store(limit, std::memory_order_relaxed);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      ++queue_id;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> queues_[task_id].get();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a3e5e5349a621aac9f3111fe61b580c43">  179</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a3e5e5349a621aac9f3111fe61b580c43">GetNextUnit</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">Queue</a>* queue,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                                 <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> unit = GetNextUnitOfTier(queue, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      [[maybe_unused]] <span class="keywordtype">size_t</span> old_units_count =</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          num_units_[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].fetch_sub(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(1, old_units_count);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31357ad240d5b25fb61558f17ae39c94">  191</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31357ad240d5b25fb61558f17ae39c94">AddUnits</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> baseline_units,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> top_tier_units,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, baseline_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() + top_tier_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Add to the individual queues in a round-robin fashion. No special care is</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// taken to balance them; they will be balanced by work stealing.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>* queue;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordtype">int</span> queue_to_add = next_queue_to_add.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> queues_guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">while</span> (!next_queue_to_add.compare_exchange_weak(</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          queue_to_add, next_task_id(queue_to_add, queues_.size()),</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          std::memory_order_relaxed)) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// Retry with updated {queue_to_add}.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      queue = queues_[queue_to_add].get();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    std::optional&lt;base::MutexGuard&gt; big_units_guard;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> pair :</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;         {std::make_pair(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f">CompilationTier::kBaseline</a>, baseline_units),</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          std::make_pair(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>, top_tier_units)}) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a> = pair.first;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> units = pair.second;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">if</span> (units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      num_units_[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].fetch_add(units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(), std::memory_order_relaxed);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit : units) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordtype">size_t</span> func_size = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[unit.func_index()].code.length();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> (func_size &lt;= kBigUnitsLimit) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">units</a>[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].push_back(unit);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          <span class="keywordflow">if</span> (!big_units_guard) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            big_units_guard.emplace(&amp;big_units_queue_.mutex);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          big_units_queue_.has_units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].store(<span class="keyword">true</span>,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                                 std::memory_order_relaxed);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          big_units_queue_.units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].emplace(func_size, unit);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a91aaa8c461c03f44c2d900f81526d1d4">  234</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a91aaa8c461c03f44c2d900f81526d1d4">AddTopTierPriorityUnit</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit, <span class="keywordtype">size_t</span> priority) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> queues_guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// Add to the individual queues in a round-robin fashion. No special care is</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// taken to balance them; they will be balanced by work stealing.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// Priorities should only be seen as a hint here; without balancing, we</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// might pop a unit with lower priority from one queue while other queues</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// still hold higher-priority units.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Since updating priorities in a std::priority_queue is difficult, we just</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// add new units with higher priorities, and use the</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// {CompilationUnitQueues::top_tier_compiled_} array to discard units for</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// functions which are already being compiled.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> queue_to_add = next_queue_to_add.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">while</span> (!next_queue_to_add.compare_exchange_weak(</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        queue_to_add, next_task_id(queue_to_add, queues_.size()),</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        std::memory_order_relaxed)) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// Retry with updated {queue_to_add}.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keyword">auto</span>* queue = queues_[queue_to_add].get();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;queue-&gt;mutex);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      queue-&gt;top_tier_priority_units.emplace(priority, unit);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      num_priority_units_.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      num_units_[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>].fetch_add(</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// Get the current number of units in the queue for |tier|. This is only a</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// momentary snapshot, it&#39;s not guaranteed that {GetNextUnit} returns a unit</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// if this method returns non-zero.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd58ed5c7aa92fd01ef858dd4a885a68">  265</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd58ed5c7aa92fd01ef858dd4a885a68">GetSizeForTier</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> num_units_[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ac5cf3ece9a08ba65c92468996df796f6">  270</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ac5cf3ece9a08ba65c92468996df796f6">AllowAnotherTopTierJob</a>(uint32_t func_index) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    top_tier_compiled_[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(func_index)].store(</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keyword">false</span>, std::memory_order_relaxed);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">size_t</span> EstimateCurrentMemoryConsumption() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// Functions bigger than {kBigUnitsLimit} will be compiled first, in ascending</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// order of their function body size.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aaa71680e1fa9e16dc8456969e7c4ef19">  280</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> kBigUnitsLimit = 4096;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">  282</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">BigUnit</a> {</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#ad3d6ef413ef573355d5a51bfabe3662f">  283</a></span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#ad3d6ef413ef573355d5a51bfabe3662f">BigUnit</a>(<span class="keywordtype">size_t</span> func_size, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        : func_size{func_size}, unit(unit) {}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a46bc98c912a3ba9794957ad768d23212">  286</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a46bc98c912a3ba9794957ad768d23212">func_size</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a4f03b490da824084738a353f560b9c54">  287</a></span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a4f03b490da824084738a353f560b9c54">unit</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a7e3905b73fe8f46f9139f725c2c7d76f">  289</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a7e3905b73fe8f46f9139f725c2c7d76f">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">BigUnit</a>&amp; other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> func_size &lt; other.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a46bc98c912a3ba9794957ad768d23212">func_size</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  };</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html">  294</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html">TopTierPriorityUnit</a> {</div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a5fdbe990390dd6dea7905fb41139fe18">  295</a></span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a5fdbe990390dd6dea7905fb41139fe18">TopTierPriorityUnit</a>(<span class="keywordtype">int</span> priority, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        : priority(priority), unit(unit) {}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#aac1416f53db5786da3308c91206d22d7">  298</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#aac1416f53db5786da3308c91206d22d7">priority</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#ac3c067d608e384553e0a0baa1e0f9bc9">  299</a></span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#ac3c067d608e384553e0a0baa1e0f9bc9">unit</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a978ddb2d87390e5486fc508ffa480935">  301</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a978ddb2d87390e5486fc508ffa480935">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html">TopTierPriorityUnit</a>&amp; other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> priority &lt; other.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#aac1416f53db5786da3308c91206d22d7">priority</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  };</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html">  306</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html">BigUnitsQueue</a> {</div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#a181b05512139df247ab64b6ceb7078a3">  307</a></span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#a181b05512139df247ab64b6ceb7078a3">BigUnitsQueue</a>() {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#if !defined(__cpp_lib_atomic_value_initialization) || \</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">    __cpp_lib_atomic_value_initialization &lt; 201911L</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; atomic : has_units) std::atomic_init(&amp;atomic, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#acb7941e826d5a0c58c9e008ed08135ae">  314</a></span>&#160;    <span class="keyword">mutable</span> <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#acb7941e826d5a0c58c9e008ed08135ae">mutex</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// Can be read concurrently to check whether any elements are in the queue.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#ab9e68aeeb2416eb5875e31cd2a54370a">  317</a></span>&#160;    std::atomic&lt;bool&gt; has_units[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>];</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// Protected by {mutex}:</span></div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#a013b110c7926e2893ca1b791d6857526">  320</a></span>&#160;    std::priority_queue&lt;BigUnit&gt; units[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>];</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  };</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">  323</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a> : <span class="keyword">public</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">Queue</a> {</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ab98233b7ecfb319dcf1a1ad3e4a0d6c3">  324</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ab98233b7ecfb319dcf1a1ad3e4a0d6c3">QueueImpl</a>(<span class="keywordtype">int</span> next_steal_task_id)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        : next_steal_task_id(next_steal_task_id) {}</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Number of units after which the task processing this queue should publish</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// compilation results. Updated (reduced, using relaxed ordering) when new</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// queues are allocated. If there is only one thread running, we can delay</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// publishing arbitrarily.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#aaa30304fd50a97ea4479bc6830f102ba">  331</a></span>&#160;    std::atomic&lt;int&gt; publish_limit{<a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>};</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">  333</a></span>&#160;    <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// All fields below are protected by {mutex}.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">  336</a></span>&#160;    std::vector&lt;WasmCompilationUnit&gt; units[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>];</div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">  337</a></span>&#160;    std::priority_queue&lt;TopTierPriorityUnit&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">top_tier_priority_units</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">  338</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">next_steal_task_id</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  };</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31d34448ce13cf296171c77f1d498b9f">  341</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31d34448ce13cf296171c77f1d498b9f">next_task_id</a>(<span class="keywordtype">int</span> task_id, <span class="keywordtype">size_t</span> num_queues)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">int</span> next = task_id + 1;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> next == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(num_queues) ? 0 : next;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aa477a5485afbdc372a13736797e2c0cf">  346</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aa477a5485afbdc372a13736797e2c0cf">GetNextUnitOfTier</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">Queue</a>* public_queue,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                                       <span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>* queue = <span class="keyword">static_cast&lt;</span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>*<span class="keyword">&gt;</span>(public_queue);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// First check whether there is a priority unit. Execute that first.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> unit = GetTopTierPriorityUnit(queue)) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// Then check whether there is a big unit of that tier.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> unit = GetBigUnitOfTier(<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)) <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Finally check whether our own queue has a unit of the wanted tier. If</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// so, return it, otherwise get the task id to steal from.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">int</span> steal_task_id;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">if</span> (!queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">units</a>[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].empty()) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keyword">auto</span> unit = queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">units</a>[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].back();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">units</a>[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].pop_back();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      steal_task_id = queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">next_steal_task_id</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Try to steal from all other queues. If this succeeds, return one of the</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// stolen units.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> steal_trials = 0; steal_trials &lt; queues_.size();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;           ++steal_trials, ++steal_task_id) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (steal_task_id &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(queues_.size())) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          steal_task_id = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> unit = StealUnitsAndGetFirst(queue, steal_task_id, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// If we reach here, we didn&#39;t find any unit of the requested tier.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd207574701d74f08e9dd7875aa71269">  392</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd207574701d74f08e9dd7875aa71269">GetBigUnitOfTier</a>(<span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Fast path without locking.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (!big_units_queue_.has_units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].load(std::memory_order_relaxed)) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;big_units_queue_.mutex);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (big_units_queue_.units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].empty()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit = big_units_queue_.units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].top().unit;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    big_units_queue_.units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].pop();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (big_units_queue_.units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].empty()) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      big_units_queue_.has_units[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>].store(<span class="keyword">false</span>, std::memory_order_relaxed);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a04f890a174602830b61b1a0423852c4c">  407</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a04f890a174602830b61b1a0423852c4c">GetTopTierPriorityUnit</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>* queue) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Fast path without locking.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (num_priority_units_.load(std::memory_order_relaxed) == 0) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">int</span> steal_task_id;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">while</span> (!queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">top_tier_priority_units</a>.empty()) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keyword">auto</span> unit = queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">top_tier_priority_units</a>.top().unit;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">top_tier_priority_units</a>.pop();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        num_priority_units_.fetch_sub(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span> (!top_tier_compiled_[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(unit.func_index())]</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                 .exchange(<span class="keyword">true</span>, std::memory_order_relaxed)) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        num_units_[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>].fetch_sub(</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      steal_task_id = queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">next_steal_task_id</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Try to steal from all other queues. If this succeeds, return one of the</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// stolen units.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard{&amp;queues_mutex_};</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> steal_trials = 0; steal_trials &lt; queues_.size();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;           ++steal_trials, ++steal_task_id) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">if</span> (steal_task_id &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(queues_.size())) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;          steal_task_id = 0;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> unit = StealTopTierPriorityUnit(queue, steal_task_id)) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <span class="keywordflow">return</span> unit;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Steal units of {wanted_tier} from {steal_from_task_id} to {queue}. Return</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// first stolen unit (rest put in queue of {task_id}), or {nullopt} if</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// {steal_from_task_id} had no units of {wanted_tier}.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Hold a shared lock on {queues_mutex_} when calling this method.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9e79ae6cf67a501ea13f057de7cbd852">  453</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9e79ae6cf67a501ea13f057de7cbd852">StealUnitsAndGetFirst</a>(</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>* queue, <span class="keywordtype">int</span> steal_from_task_id, <span class="keywordtype">int</span> wanted_tier) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keyword">auto</span>* steal_queue = queues_[steal_from_task_id].get();</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// Cannot steal from own queue.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (steal_queue == queue) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    std::vector&lt;WasmCompilationUnit&gt; stolen;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    std::optional&lt;WasmCompilationUnit&gt; returned_unit;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;steal_queue-&gt;mutex);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keyword">auto</span>* steal_from_vector = &amp;steal_queue-&gt;units[wanted_tier];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">if</span> (steal_from_vector-&gt;empty()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordtype">size_t</span> remaining = steal_from_vector-&gt;size() / 2;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keyword">auto</span> steal_begin = steal_from_vector-&gt;begin() + remaining;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      returned_unit = *steal_begin;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      stolen.assign(steal_begin + 1, steal_from_vector-&gt;end());</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      steal_from_vector-&gt;erase(steal_begin, steal_from_vector-&gt;end());</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">auto</span>* target_queue = &amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">units</a>[wanted_tier];</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    target_queue-&gt;insert(target_queue-&gt;end(), stolen.begin(), stolen.end());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">next_steal_task_id</a> = steal_from_task_id + 1;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">return</span> returned_unit;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Steal one priority unit from {steal_from_task_id} to {task_id}. Return</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// stolen unit, or {nullopt} if {steal_from_task_id} had no priority units.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// Hold a shared lock on {queues_mutex_} when calling this method.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aba1d01818282df3fa67d79db5f02a9f3">  480</a></span>&#160;  std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aba1d01818282df3fa67d79db5f02a9f3">StealTopTierPriorityUnit</a>(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>* queue, <span class="keywordtype">int</span> steal_from_task_id) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keyword">auto</span>* steal_queue = queues_[steal_from_task_id].get();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// Cannot steal from own queue.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (steal_queue == queue) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    std::optional&lt;WasmCompilationUnit&gt; returned_unit;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;steal_queue-&gt;mutex);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (steal_queue-&gt;top_tier_priority_units.empty()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keyword">auto</span> unit = steal_queue-&gt;top_tier_priority_units.top().unit;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        steal_queue-&gt;top_tier_priority_units.pop();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        num_priority_units_.fetch_sub(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> (!top_tier_compiled_[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(unit.func_index())]</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                 .exchange(<span class="keyword">true</span>, std::memory_order_relaxed)) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          returned_unit = unit;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        num_units_[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>].fetch_sub(</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">mutex</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">next_steal_task_id</a> = steal_from_task_id + 1;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">return</span> returned_unit;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9501c1c937476a50964a10f42632fc5c">  509</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9501c1c937476a50964a10f42632fc5c">declared_function_index</a>(<span class="keywordtype">int</span> func_index)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(num_imported_functions_, func_index);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(func_index, num_imported_functions_ + num_declared_functions_);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> func_index - num_imported_functions_;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// {queues_mutex_} protectes {queues_};</span></div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a807c3257bde86da495fc00d456573adc">  516</a></span>&#160;  <span class="keyword">mutable</span> <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a807c3257bde86da495fc00d456573adc">queues_mutex_</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a53ed0704366f808515d01af92d818889">  517</a></span>&#160;  std::vector&lt;std::unique_ptr&lt;QueueImpl&gt;&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a53ed0704366f808515d01af92d818889">queues_</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ae86f836350eec97e4895fa52b07307fd">  519</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ae86f836350eec97e4895fa52b07307fd">num_imported_functions_</a>;</div>
<div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a910e2a4d32ed0858ce4e69e2ff8b5c52">  520</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a910e2a4d32ed0858ce4e69e2ff8b5c52">num_declared_functions_</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a8989f95757602c9431351e25ac1cc181">  522</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html">BigUnitsQueue</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a8989f95757602c9431351e25ac1cc181">big_units_queue_</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ae2bac67185659a6b28f81f7369ebbea9">  524</a></span>&#160;  std::atomic&lt;size_t&gt; num_units_[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>];</div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a1a058b7cad0b977e75dacecdedd4374e">  525</a></span>&#160;  std::atomic&lt;size_t&gt; num_priority_units_{0};</div>
<div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a97b3d3e8de6b1cfcb7b063878d837de9">  526</a></span>&#160;  std::unique_ptr&lt;std::atomic&lt;bool&gt;[]&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a97b3d3e8de6b1cfcb7b063878d837de9">top_tier_compiled_</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ad9edee14a7152db86eea9b33e49847db">  527</a></span>&#160;  std::atomic&lt;int&gt; next_queue_to_add{0};</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;};</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a5b2dc02f4ff6da74814b0b2def2df264">  530</a></span>&#160;<span class="keywordtype">size_t</span> CompilationUnitQueues::EstimateCurrentMemoryConsumption()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html">CompilationUnitQueues</a>, 176);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>, 112);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html">BigUnitsQueue</a>, 88);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Not including sizeof(CompilationUnitQueues) because that&#39;s included in</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// sizeof(CompilationStateImpl).</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = 0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;queues_mutex_);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(queues_) + queues_.size() * <span class="keyword">sizeof</span>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; q : queues_) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;q-&gt;mutex);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(*q-&gt;units);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += q-&gt;top_tier_priority_units.size() * <span class="keyword">sizeof</span>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html">TopTierPriorityUnit</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;big_units_queue_.mutex);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += big_units_queue_.units[0].size() * <span class="keyword">sizeof</span>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">BigUnit</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += big_units_queue_.units[1].size() * <span class="keyword">sizeof</span>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">BigUnit</a>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// For {top_tier_compiled_}.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <span class="keyword">sizeof</span>(std::atomic&lt;bool&gt;) * num_declared_functions_;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html#a99d638f6df8f21a79c191c8eca28972d">  556</a></span>&#160;<span class="keywordtype">bool</span> CompilationUnitQueues::Queue::ShouldPublish(</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordtype">int</span> num_processed_units)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keyword">auto</span>* queue = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">QueueImpl</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">return</span> num_processed_units &gt;=</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         queue-&gt;publish_limit.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">// The {CompilationStateImpl} keeps track of the compilation state of the</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">// owning NativeModule, i.e. which functions are left to be compiled.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">// It contains a task manager to allow parallel and asynchronous background</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">// compilation of functions.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">// Its public interface {CompilationState} lives in compilation-environment.h.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">  568</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a> {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>(<span class="keyword">const</span> std::shared_ptr&lt;NativeModule&gt;&amp; native_module,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                       std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features);</div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab766f332e04fe1ee004315c298624fb7">  573</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab766f332e04fe1ee004315c298624fb7">~CompilationStateImpl</a>() {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (baseline_compile_job_-&gt;IsValid()) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      baseline_compile_job_-&gt;CancelAndDetach();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (top_tier_compile_job_-&gt;IsValid()) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      top_tier_compile_job_-&gt;CancelAndDetach();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// Call right after the constructor, after the {compilation_state_} field in</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// the {NativeModule} has been initialized.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordtype">void</span> InitCompileJob();</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// {kCancelUnconditionally}: Cancel all compilation.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// {kCancelInitialCompilation}: Cancel all compilation if initial (baseline)</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// compilation is not finished yet.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dc">  589</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dc">CancellationPolicy</a> { kCancelUnconditionally, kCancelInitialCompilation };</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordtype">void</span> CancelCompilation(CancellationPolicy);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordtype">bool</span> cancelled() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// Apply a compilation hint to the initial compilation progress, updating all</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// internal fields accordingly.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordtype">void</span> ApplyCompilationHintToInitialProgress(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html">WasmCompilationHint</a>&amp; hint,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                             <span class="keywordtype">size_t</span> hint_idx);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// Use PGO information to choose a better initial compilation progress</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// (tiering decisions).</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordtype">void</span> ApplyPgoInfoToInitialProgress(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// Apply PGO information to a fully initialized compilation state. Also</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// trigger compilation as needed.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordtype">void</span> ApplyPgoInfoLate(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Initialize compilation progress. Set compilation tiers to expect for</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// baseline and top tier compilation. Must be set before</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// {CommitCompilationUnits} is invoked which triggers background compilation.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordtype">void</span> InitializeCompilationProgress(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">void</span> InitializeCompilationProgressAfterDeserialization(</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> lazy_functions,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> eager_functions);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// Initializes compilation units based on the information encoded in the</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// {compilation_progress_}.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordtype">void</span> InitializeCompilationUnits(</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      std::unique_ptr&lt;CompilationUnitBuilder&gt; builder);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Adds compilation units for another function to the</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// {CompilationUnitBuilder}. This function is the streaming compilation</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// equivalent to {InitializeCompilationUnits}.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordtype">void</span> InitializeCompilationUnitForSingleFunction(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">CompilationUnitBuilder</a>* builder, <span class="keywordtype">int</span> func_index);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">// Add the callback to be called on compilation events. Needs to be</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// set before {CommitCompilationUnits} is run to ensure that it receives all</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// events. The callback object must support being deleted from any thread.</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordtype">void</span> AddCallback(std::unique_ptr&lt;CompilationEventCallback&gt; callback);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// Inserts new functions to compile and kicks off compilation.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordtype">void</span> CommitCompilationUnits(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> baseline_units,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                              <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> top_tier_units);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordtype">void</span> CommitTopTierCompilationUnit(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordtype">void</span> AddTopTierPriorityCompilationUnit(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a>, <span class="keywordtype">size_t</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">CompilationUnitQueues::Queue</a>* GetQueueForCompileTask(<span class="keywordtype">int</span> task_id);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  std::optional&lt;WasmCompilationUnit&gt; GetNextCompilationUnit(</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">CompilationUnitQueues::Queue</a>*, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordtype">void</span> OnFinishedUnits(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCode*&gt;</a>);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordtype">void</span> OnCompilationStopped(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordtype">void</span> SchedulePublishCompilationResults(</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      std::vector&lt;UnpublishedWasmCode&gt; unpublished_code, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a46f742b041803cde875c307e3021be18">  649</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a46f742b041803cde875c307e3021be18">detected_features</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">return</span> detected_features_.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// Update the set of detected features; returns all features that were not</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// detected before.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      UpdateDetectedFeatures(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">size_t</span> NumOutstandingCompilations(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">void</span> SetError();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordtype">void</span> WaitForCompilationEvent(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29">CompilationEvent</a> event);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordtype">void</span> TierUpAllFunctions();</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4d6c6ba4a5b1ef655d9a77edb45d44a3">  666</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4d6c6ba4a5b1ef655d9a77edb45d44a3">AllowAnotherTopTierJob</a>(uint32_t func_index) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    compilation_unit_queues_.AllowAnotherTopTierJob(func_index);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// Reset the stored priority; otherwise triggers might be ignored if the</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// priority is not bumped to the next power of two.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html">TypeFeedbackStorage</a>* feedback = &amp;native_module_-&gt;module()-&gt;type_feedback;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;feedback-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a978ef852d135cebd5dc2629bc8692090">mutex</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    feedback-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a430d975fff82d80bbbbdd0cf3b5eafd8">feedback_for_function</a>[func_index].tierup_priority = 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aa518d97e029098e65c98341c966ded5a">  675</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aa518d97e029098e65c98341c966ded5a">AllowAnotherTopTierJobForAllFunctions</a>() {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module_-&gt;module();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    uint32_t fn_start = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    uint32_t fn_end = fn_start + module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a978ef852d135cebd5dc2629bc8692090">mutex</a>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    std::unordered_map&lt;uint32_t, FunctionTypeFeedback&gt;&amp; feedback_map =</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a430d975fff82d80bbbbdd0cf3b5eafd8">feedback_for_function</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = fn_start; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; fn_end; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      compilation_unit_queues_.AllowAnotherTopTierJob(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="comment">// Reset the stored priority; otherwise triggers might be ignored if the</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="comment">// priority is not bumped to the next power of two.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> it = feedback_map.find(<a class="code" href="namespacev8_1_1internal.html">i</a>); it != feedback_map.end()) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        it-&gt;second.tierup_priority = 0;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8c6110baae5557a7b1bea2a035bf4cf2">  692</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8c6110baae5557a7b1bea2a035bf4cf2">failed</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> compile_failed_.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4471b1fe3aff990009d8c703160a9940">  696</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4471b1fe3aff990009d8c703160a9940">baseline_compilation_finished</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;callbacks_mutex_);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">return</span> outstanding_baseline_units_ == 0;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aeb68dfdbcf7afb114fbfe377cb9d16d7">  701</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aeb68dfdbcf7afb114fbfe377cb9d16d7">counters</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> async_counters_.get(); }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a68db7bbe283a6280631da539f03ff3be">  703</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a68db7bbe283a6280631da539f03ff3be">SetWireBytesStorage</a>(</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      std::shared_ptr&lt;WireBytesStorage&gt; wire_bytes_storage) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;mutex_);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    wire_bytes_storage_ = std::move(wire_bytes_storage);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a928d8dccea38ced17d01c739eadd64e7">  709</a></span>&#160;  std::shared_ptr&lt;WireBytesStorage&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a928d8dccea38ced17d01c739eadd64e7">GetWireBytesStorage</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;mutex_);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(wire_bytes_storage_);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> wire_bytes_storage_;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5691daef0ad1f616287b1bf605e6ed19">  715</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5691daef0ad1f616287b1bf605e6ed19">set_compilation_id</a>(<span class="keywordtype">int</span> compilation_id) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(compilation_id_, kInvalidCompilationID);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    compilation_id_ = compilation_id;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordtype">size_t</span> EstimateCurrentMemoryConsumption() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// Called from the delayed task to trigger caching if the timeout</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// (--wasm-caching-timeout-ms) has passed since the last top-tier compilation.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// This either triggers caching or re-schedules the task if more code has</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// been compiled to the top tier in the meantime.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordtype">void</span> TriggerCachingAfterTimeout();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  std::vector&lt;WasmCode*&gt; PublishCode(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;UnpublishedWasmCode&gt;</a> codes);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// Trigger callbacks according to the internal counters below</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// (outstanding_...).</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// Hold the {callbacks_mutex_} when calling this method.</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordtype">void</span> TriggerOutstandingCallbacks();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// Trigger an exact set of callbacks. Hold the {callbacks_mutex_} when calling</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// this method.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordtype">void</span> TriggerCallbacks(<a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordtype">void</span> PublishCompilationResults(</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      std::vector&lt;UnpublishedWasmCode&gt; unpublished_code);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">  742</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">  743</a></span>&#160;  std::weak_ptr&lt;NativeModule&gt; <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">native_module_weak_</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ad0de5a795e5ca3ea15b6dc64672f9fdb">  744</a></span>&#160;  <span class="keyword">const</span> std::shared_ptr&lt;Counters&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ad0de5a795e5ca3ea15b6dc64672f9fdb">async_counters_</a>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// Compilation error, atomically updated. This flag can be updated and read</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// using relaxed semantics.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a1c2df4934d4b851409d16a00d569d33e">  748</a></span>&#160;  std::atomic&lt;bool&gt; compile_failed_{<span class="keyword">false</span>};</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">// True if compilation was cancelled and worker threads should return. This</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// flag can be updated and read using relaxed semantics.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac7c4f6efcf3aafb8f51b8a77da48410b">  752</a></span>&#160;  std::atomic&lt;bool&gt; compile_cancelled_{<span class="keyword">false</span>};</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">  754</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html">CompilationUnitQueues</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// This mutex protects all information of this {CompilationStateImpl} which is</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// being accessed concurrently.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9b824ee2bd19df1806a89e4d74a697da">  758</a></span>&#160;  <span class="keyword">mutable</span> <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9b824ee2bd19df1806a89e4d74a697da">mutex_</a>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// The compile job handles, initialized right after construction of</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// {CompilationStateImpl}.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">  762</a></span>&#160;  std::unique_ptr&lt;JobHandle&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">baseline_compile_job_</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">  763</a></span>&#160;  std::unique_ptr&lt;JobHandle&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// The compilation id to identify trace events linked to this compilation.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a32bf0a519ec58a3c7c7444eeef340e5a">  766</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> kInvalidCompilationID = -1;</div>
<div class="line"><a name="l00767"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#abba3d6e3f1705511c75747b22d3f05ec">  767</a></span>&#160;  <span class="keywordtype">int</span> compilation_id_ = kInvalidCompilationID;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// Features detected to be used in this module. Features can be detected</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// as a module is being compiled.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9a3e39ad3a707e8d6dfc2feab40f034a">  771</a></span>&#160;  std::atomic&lt;WasmDetectedFeatures&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9a3e39ad3a707e8d6dfc2feab40f034a">detected_features_</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">  //////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"></span>  <span class="comment">// Protected by {mutex_}:</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Abstraction over the storage of the wire bytes. Held in a shared_ptr so</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// that background compilation jobs can keep the storage alive while</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// compiling.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a88bbd14f5345baf9dea935d9f1b6de94">  779</a></span>&#160;  std::shared_ptr&lt;WireBytesStorage&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a88bbd14f5345baf9dea935d9f1b6de94">wire_bytes_storage_</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// End of fields protected by {mutex_}.</span><span class="comment"></span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">  //////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// This mutex protects the callbacks vector, and the counters used to</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// determine which callbacks to call. The counters plus the callbacks</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// themselves need to be synchronized to ensure correct order of events.</span></div>
<div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">  787</a></span>&#160;  <span class="keyword">mutable</span> <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">  //////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"></span>  <span class="comment">// Protected by {callbacks_mutex_}:</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// Callbacks to be called on compilation events.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">  793</a></span>&#160;  std::vector&lt;std::unique_ptr&lt;CompilationEventCallback&gt;&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// Events that already happened.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">  796</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">  798</a></span>&#160;  <span class="keywordtype">int</span> outstanding_baseline_units_ = 0;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// The amount of generated top tier code since the last</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// {kFinishedCompilationChunk} event.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">  802</a></span>&#160;  <span class="keywordtype">size_t</span> bytes_since_last_chunk_ = 0;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// One byte per declared function, see bitfields defined below.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// This vector is initialized once to the right size, updates are *usually*</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// protected by the {callbacks_mutes_}, with exceptions during</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// initialization (see comment in</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// {CompilationStateImpl::InitializeCompilationUnitForSingleFunction}).</span></div>
<div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">  809</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;uint8_t&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// The timestamp of the last top-tier compilation.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// This field is updated on every publishing of top-tier code, and is reset</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// once caching is triggered. Hence it also informs whether a caching task is</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// currently being scheduled (whenever this is set).</span></div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">  815</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1TimeTicks.html">base::TimeTicks</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// End of fields protected by {callbacks_mutex_}.</span><span class="comment"></span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">  //////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html">  820</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html">PublishState</a> {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="comment">// {mutex_} protects {publish_queue_} and {publisher_running_}.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#abc98036b1574bf70e9fea478f34078ed">  822</a></span>&#160;    <a class="code" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#abc98036b1574bf70e9fea478f34078ed">mutex_</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">  823</a></span>&#160;    std::vector&lt;UnpublishedWasmCode&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>;</div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">  824</a></span>&#160;    <span class="keywordtype">bool</span> publisher_running_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  };</div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a022eb4137f9bae86d68fe9792fda8042">  826</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html">PublishState</a> publish_state_[<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">CompilationTier::kNumTiers</a>];</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="comment">// Encoding of fields in the {compilation_progress_} vector.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2cd4c74b5bc3faf8968fd7603eff52e7">  829</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classv8_1_1base_1_1BitField.html">RequiredBaselineTierField</a> = <a class="code" href="classv8_1_1base_1_1BitField.html">base::BitField8&lt;ExecutionTier, 0, 2&gt;</a>;</div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9dcfbabd7b07ae422d2f21abb40b548e">  830</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classv8_1_1base_1_1BitField.html">RequiredTopTierField</a> = <a class="code" href="classv8_1_1base_1_1BitField.html">base::BitField8&lt;ExecutionTier, 2, 2&gt;</a>;</div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a6829cec0a2c47895e3395b37985d7958">  831</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classv8_1_1base_1_1BitField.html">ReachedTierField</a> = <a class="code" href="classv8_1_1base_1_1BitField.html">base::BitField8&lt;ExecutionTier, 4, 2&gt;</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;};</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5e40db7d1803f45e703d7d44c554d6a9">  834</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html">CompilationState</a>* compilation_state) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>*<span class="keyword">&gt;</span>(compilation_state);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">  837</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html">CompilationState</a>* compilation_state) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>*<span class="keyword">&gt;</span>(compilation_state);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;}</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">  841</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* BackgroundCompileScope::compilation_state()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(native_module_);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module_-&gt;compilation_state());</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7ad6d8bbbac037e5f81f23aebaaf884b">  846</a></span>&#160;<span class="keywordtype">size_t</span> CompilationStateImpl::EstimateCurrentMemoryConsumption()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>, 456);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <span class="keyword">sizeof</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard{&amp;mutex_};</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += compilation_unit_queues_.EstimateCurrentMemoryConsumption();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// To read the size of {callbacks_} and {compilation_progress_}, we&#39;d</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// need to acquire the {callbacks_mutex_}, which can cause deadlocks</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// when that mutex is already held elsewhere and another thread calls</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// into this function. So we rely on heuristics and informed guesses</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// instead: {compilation_progress_} contains an entry for every declared</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// function in the module...</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <span class="keyword">sizeof</span>(uint8_t) * native_module_-&gt;module()-&gt;num_declared_functions;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// ...and there are typically no more than a handful of {callbacks_}.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  constexpr <span class="keywordtype">size_t</span> kAssumedNumberOfCallbacks = 4;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  constexpr <span class="keywordtype">size_t</span> size_of_vector =</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      kAssumedNumberOfCallbacks *</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keyword">sizeof</span>(std::unique_ptr&lt;CompilationEventCallback&gt;);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// Concrete subclasses of CompilationEventCallback will be bigger, but we</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// can&#39;t know that here.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  constexpr <span class="keywordtype">size_t</span> size_of_payload =</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      kAssumedNumberOfCallbacks * <span class="keyword">sizeof</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationEventCallback.html">CompilationEventCallback</a>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += size_of_vector + size_of_payload;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_offheap_memory) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;CompilationStateImpl: %zu\n&quot;</span>, <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a583e2f2b2299476e7f9c3e98f3386355">  879</a></span>&#160;<span class="keywordtype">bool</span> BackgroundCompileScope::cancelled()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">return</span> native_module_ == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module_-&gt;compilation_state())-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a6e8ed1af01ad199828413d1c9f4bacbb">cancelled</a>();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">//////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"></span><span class="comment">// PIMPL implementation of {CompilationState}.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a65d1dbc0c9fdd995fd0eb1fbbf8f1947">  889</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a65d1dbc0c9fdd995fd0eb1fbbf8f1947">CompilationState::~CompilationState</a>() { <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab766f332e04fe1ee004315c298624fb7">~CompilationStateImpl</a>(); }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ab81cbf88e8bd750d5d7e198464e923f3">  891</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ab81cbf88e8bd750d5d7e198464e923f3">CompilationState::InitCompileJob</a>() { <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a027613078d5bd38a4971700e68b6a20d">InitCompileJob</a>(); }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a94616121bb815ddab13b79d737542e29">  893</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a94616121bb815ddab13b79d737542e29">CompilationState::CancelCompilation</a>() {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8">CancelCompilation</a>(CompilationStateImpl::kCancelUnconditionally);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a0fccff8ad60688e7fbd9b4c853e90439">  897</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a0fccff8ad60688e7fbd9b4c853e90439">CompilationState::CancelInitialCompilation</a>() {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8">CancelCompilation</a>(</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      CompilationStateImpl::kCancelInitialCompilation);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa615c60c7e1fc45f22289c32bf136cc3">  902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa615c60c7e1fc45f22289c32bf136cc3">CompilationState::SetError</a>() { <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a28b47f0cb3321f0107f1a57b0b7edf0d">SetError</a>(); }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a82cff25a5e68e95bd42f7c5c45058171">  904</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a82cff25a5e68e95bd42f7c5c45058171">CompilationState::SetWireBytesStorage</a>(</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    std::shared_ptr&lt;WireBytesStorage&gt; wire_bytes_storage) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a68db7bbe283a6280631da539f03ff3be">SetWireBytesStorage</a>(std::move(wire_bytes_storage));</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac94f5604f1684b2f28391cef5a2dffb7">  909</a></span>&#160;std::shared_ptr&lt;WireBytesStorage&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac94f5604f1684b2f28391cef5a2dffb7">CompilationState::GetWireBytesStorage</a>()<span class="keyword"></span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="keyword">    const </span>{</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a928d8dccea38ced17d01c739eadd64e7">GetWireBytesStorage</a>();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a7ed524741d5660c9c342c654df2ac37e">  914</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a7ed524741d5660c9c342c654df2ac37e">CompilationState::AddCallback</a>(</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    std::unique_ptr&lt;CompilationEventCallback&gt; callback) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae69af533e833f888b6c141e97058a96d">AddCallback</a>(std::move(callback));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a80ea8bcbfde72f2c012a2002b8dacedf">  919</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a80ea8bcbfde72f2c012a2002b8dacedf">CompilationState::TierUpAllFunctions</a>() {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2321adabbd69bbd58643f3fcd00177bd">TierUpAllFunctions</a>();</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;}</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aceda8f4173dae2b1acfdff2cf0bd9128">  923</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aceda8f4173dae2b1acfdff2cf0bd9128">CompilationState::AllowAnotherTopTierJob</a>(uint32_t func_index) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4d6c6ba4a5b1ef655d9a77edb45d44a3">AllowAnotherTopTierJob</a>(func_index);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9c56f9d64da89e21922aaf94fab9c734">  927</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9c56f9d64da89e21922aaf94fab9c734">CompilationState::AllowAnotherTopTierJobForAllFunctions</a>() {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aa518d97e029098e65c98341c966ded5a">AllowAnotherTopTierJobForAllFunctions</a>();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9ebb11cd7d9fb9633666bdebbd038a5f">  931</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9ebb11cd7d9fb9633666bdebbd038a5f">CompilationState::InitializeAfterDeserialization</a>(</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> lazy_functions,</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> eager_functions) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afcd9da62d1edbb0e854d525370766659">InitializeCompilationProgressAfterDeserialization</a>(</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      lazy_functions, eager_functions);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a2badfff8eee4ca33ffd54ab30ae5b1bf">  938</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a2badfff8eee4ca33ffd54ab30ae5b1bf">CompilationState::failed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8c6110baae5557a7b1bea2a035bf4cf2">failed</a>(); }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a74e1f8aaf59a147b239151b5b913362f">  940</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a74e1f8aaf59a147b239151b5b913362f">CompilationState::baseline_compilation_finished</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4471b1fe3aff990009d8c703160a9940">baseline_compilation_finished</a>();</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aaae5bb20ea313ddf1ccf1393ca5ade67">  944</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aaae5bb20ea313ddf1ccf1393ca5ade67">CompilationState::set_compilation_id</a>(<span class="keywordtype">int</span> compilation_id) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5691daef0ad1f616287b1bf605e6ed19">set_compilation_id</a>(compilation_id);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac43a967338375f3962c4b31151e5d713">  948</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac43a967338375f3962c4b31151e5d713">CompilationState::EstimateCurrentMemoryConsumption</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7ad6d8bbbac037e5f81f23aebaaf884b">EstimateCurrentMemoryConsumption</a>();</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ad47276201a3451517914237634bef777">  952</a></span>&#160;std::vector&lt;WasmCode*&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ad47276201a3451517914237634bef777">CompilationState::PublishCode</a>(</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;UnpublishedWasmCode&gt;</a> unpublished_code) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afc9ff843b7f51b2e035c286168390f2e">PublishCode</a>(unpublished_code);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa483870e07defd3034a0d0a88e41ad8c">  958</a></span>&#160;std::unique_ptr&lt;CompilationState&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa483870e07defd3034a0d0a88e41ad8c">CompilationState::New</a>(</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keyword">const</span> std::shared_ptr&lt;NativeModule&gt;&amp; native_module,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">return</span> std::unique_ptr&lt;CompilationState&gt;(<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html">CompilationState</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keyword">new</span> CompilationStateImpl(std::move(native_module),</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                               std::move(async_counters), <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#afda3d9cadd9a4eb735ff81fb8b5d0ea4">detected_features</a>)));</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#afda3d9cadd9a4eb735ff81fb8b5d0ea4">  967</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#afda3d9cadd9a4eb735ff81fb8b5d0ea4">CompilationState::detected_features</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a46f742b041803cde875c307e3021be18">detected_features</a>();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a3763475c99a36d50427d6c2b3f4e1d07">  971</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a3763475c99a36d50427d6c2b3f4e1d07">CompilationState::UpdateDetectedFeatures</a>(</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<span class="keyword">this</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae307e43873e6a925477fefac9dcef545">UpdateDetectedFeatures</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#afda3d9cadd9a4eb735ff81fb8b5d0ea4">detected_features</a>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">// End of PIMPL implementation of {CompilationState}.</span><span class="comment"></span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">//////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">  981</a></span>&#160;<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">ApplyHintToExecutionTier</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282">WasmCompilationHintTier</a> hint,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                       <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> default_tier) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">switch</span> (hint) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a6867faeaa475fda467e48267db2bb8a8">WasmCompilationHintTier::kDefault</a>:</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">return</span> default_tier;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a65ffc7d8b4dceb3661bbcf4c6c12118d">WasmCompilationHintTier::kBaseline</a>:</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a51014a338329cb5629fd324cf7493bbc">WasmCompilationHintTier::kOptimized</a>:</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;}</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2a168ca8f855d74ddf2e46ee53233b20">  994</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html">WasmCompilationHint</a>* <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2a168ca8f855d74ddf2e46ee53233b20">GetCompilationHint</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                                              uint32_t func_index) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>, func_index);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  uint32_t hint_index = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keyword">const</span> std::vector&lt;WasmCompilationHint&gt;&amp; compilation_hints =</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a95d37263699ce0b3219d51eee06a3d99">compilation_hints</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (hint_index &lt; compilation_hints.size()) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">return</span> &amp;compilation_hints[hint_index];</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;}</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44"> 1006</a></span>&#160;<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">CompileStrategy</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">GetCompileStrategy</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                   <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                                   uint32_t func_index, <span class="keywordtype">bool</span> lazy_module) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">if</span> (lazy_module) <span class="keywordflow">return</span> CompileStrategy::kLazy;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">if</span> (!enabled_features.has_compilation_hints()) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">return</span> CompileStrategy::kDefault;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keyword">auto</span>* hint = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2a168ca8f855d74ddf2e46ee53233b20">GetCompilationHint</a>(module, func_index);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (hint == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> CompileStrategy::kDefault;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">switch</span> (hint-&gt;strategy) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1ae3c54a7917f0c719b11db86b1dd59b0f">WasmCompilationHintStrategy::kLazy</a>:</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">return</span> CompileStrategy::kLazy;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1f85c8fbccc9bb4fcda482bf840bc3e2">WasmCompilationHintStrategy::kEager</a>:</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">return</span> CompileStrategy::kEager;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1fede85ba930eef5832cf35bc93cb2cb">WasmCompilationHintStrategy::kLazyBaselineEagerTopTier</a>:</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">return</span> CompileStrategy::kLazyBaselineEagerTopTier;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a6867faeaa475fda467e48267db2bb8a8">WasmCompilationHintStrategy::kDefault</a>:</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keywordflow">return</span> CompileStrategy::kDefault;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html"> 1027</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> {</div>
<div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e"> 1028</a></span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027"> 1029</a></span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;};</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">// Pass the debug state as a separate parameter to avoid data races: the debug</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">// state may change between its use here and its use at the call site. To have</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">// a consistent view on the debug state, the caller reads the debug state once</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">// and then passes it to this function.</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0"> 1036</a></span>&#160;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0">GetDefaultTiersPerModule</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                                           <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">DebugState</a> is_in_debug_state,</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                                           <span class="keywordtype">bool</span> lazy_module) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">if</span> (lazy_module) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>};</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a70bbfcab50b20ba5da8696e0373a8af4">is_asmjs_module</a>(module)) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!is_in_debug_state);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>};</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">if</span> (is_in_debug_state) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>};</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> baseline_tier =</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.liftoff ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordtype">bool</span> eager_tier_up = !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_dynamic_tiering &amp;&amp; <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_tier_up;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> top_tier =</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      eager_tier_up ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a> : baseline_tier;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">return</span> {baseline_tier, top_tier};</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#afa5d6fcac84dbf1bc0b0d47a39f81eb3"> 1058</a></span>&#160;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#afa5d6fcac84dbf1bc0b0d47a39f81eb3">GetLazyCompilationTiers</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                                          uint32_t func_index,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                          <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">DebugState</a> is_in_debug_state) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// For lazy compilation, get the tiers we would use if lazy compilation is</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// disabled.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  constexpr <span class="keywordtype">bool</span> kNotLazy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> tiers =</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0">GetDefaultTiersPerModule</a>(native_module, is_in_debug_state, kNotLazy);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// If we are in debug mode, we ignore compilation hints.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (is_in_debug_state) <span class="keywordflow">return</span> tiers;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// Check if compilation hints override default tiering behaviour.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">if</span> (native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">enabled_features</a>().has_compilation_hints()) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* hint = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2a168ca8f855d74ddf2e46ee53233b20">GetCompilationHint</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>(), func_index)) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a> =</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">ApplyHintToExecutionTier</a>(hint-&gt;baseline_tier, tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">ApplyHintToExecutionTier</a>(hint-&gt;top_tier, tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_tier_up_filter &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                  func_index !=</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                      <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_tier_up_filter))) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a> = tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// Correct top tier if necessary.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &lt; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>,</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="stringliteral">&quot;Assume an order on execution tiers&quot;</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a> &gt; tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a>) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a> = tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">return</span> tiers;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">// The {CompilationUnitBuilder} builds compilation units and stores them in an</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">// internal buffer. The buffer is moved into the working queue of the</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">// {CompilationStateImpl} when {Commit} is called.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html"> 1096</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">CompilationUnitBuilder</a> {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01098"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a3fdbeebd6ebbbca6fd7eb3bd6c65a285"> 1098</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a3fdbeebd6ebbbca6fd7eb3bd6c65a285">CompilationUnitBuilder</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      : native_module_(native_module) {}</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaa13e84bbb2c58d607913feb63d4c40d"> 1101</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaa13e84bbb2c58d607913feb63d4c40d">AddBaselineUnit</a>(<span class="keywordtype">int</span> func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    baseline_units_.emplace_back(func_index, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8a125da97b4910923a225f9ee17e51da"> 1105</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8a125da97b4910923a225f9ee17e51da">AddTopTierUnit</a>(<span class="keywordtype">int</span> func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    tiering_units_.emplace_back(func_index, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a9a66b0a4ef936e689f1dd1bc1a3cf21c"> 1109</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a9a66b0a4ef936e689f1dd1bc1a3cf21c">Commit</a>() {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (baseline_units_.empty() &amp;&amp; tiering_units_.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    compilation_state()-&gt;CommitCompilationUnits(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(baseline_units_),</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                                <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(tiering_units_));</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    Clear();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#ac36114a39457411280c2bc2d349dba66"> 1116</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#ac36114a39457411280c2bc2d349dba66">Clear</a>() {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    baseline_units_.clear();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    tiering_units_.clear();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aece45aed45df07f0c9b5bd08ea04a106"> 1121</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aece45aed45df07f0c9b5bd08ea04a106">module</a>() { <span class="keywordflow">return</span> native_module_-&gt;module(); }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01124"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8bd578eb533dc40e4d9b794c803916bb"> 1124</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8bd578eb533dc40e4d9b794c803916bb">compilation_state</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module_-&gt;compilation_state());</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a1853b5bda121022c5448167d81c165f6"> 1128</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a1853b5bda121022c5448167d81c165f6">native_module_</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf53cbbee851510fc5b34382c752aa66"> 1129</a></span>&#160;  std::vector&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf53cbbee851510fc5b34382c752aa66">baseline_units_</a>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf7812a727fcb51ffb61e0d622ce4163"> 1130</a></span>&#160;  std::vector&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf7812a727fcb51ffb61e0d622ce4163">tiering_units_</a>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;};</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a6eeacc59bea21e7cec9649abc2c0d555"> 1133</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">DecodeResult</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a6eeacc59bea21e7cec9649abc2c0d555">ValidateSingleFunction</a>(<a class="code" href="classv8_1_1internal_1_1Zone.html">Zone</a>* zone, <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                                    <span class="keywordtype">int</span> func_index,</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                                    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>,</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>* detected_features) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// Sometimes functions get validated unpredictably in the background, for</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// debugging or when inlining one function into another. We check here if that</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// is the case, and exit early if so.</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">if</span> (module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ad1d21f975964f38d4f11b3db56a094bf">function_was_validated</a>(func_index)) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">WasmFunction</a>* func = &amp;module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[func_index];</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a> = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a89e37309b6619867746a4cf77adcaa2a">type</a>(func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a27c9b60862536d6bd685a1fb750bec1f">sig_index</a>).<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeDefinition.html#acc6533d7fffb2a411e20b62f7512038e">is_shared</a>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionBody.html">FunctionBody</a> body{func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#ab4f3d0ecf1a3e6eab1bb917b4568d547">sig</a>, func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#aec97739a140bf8da830c55636434adcf">code</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">offset</a>(), <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>.begin(), <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>.end(),</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    <a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a>};</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">DecodeResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab650db3bf6479d5dfe0cb087f6880f73">ValidateFunctionBody</a>(zone, enabled_features, module,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                             detected_features, body);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.ok()) module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a1ba1c8f2a48659fe0cdf2aee38ce0a43">set_function_validated</a>(func_index);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56"> 1152</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56">OnlyLazyFunctions</a> : <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a34502fb9b3ecabea840b4c0f1b19ee6b"> 1153</a></span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a34502fb9b3ecabea840b4c0f1b19ee6b">kAllFunctions</a> = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2"> 1154</a></span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2">kOnlyLazyFunctions</a> = <span class="keyword">true</span>,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;};</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40"> 1157</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation ||</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.asm_wasm_lazy_compilation &amp;&amp; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a70bbfcab50b20ba5da8696e0373a8af4">is_asmjs_module</a>(module));</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;}</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html"> 1162</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html">CompileLazyTimingScope</a> {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ac53d463063191b706dcc8e5f59c3df3f"> 1164</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ac53d463063191b706dcc8e5f59c3df3f">CompileLazyTimingScope</a>(<a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* counters, <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      : counters_(counters), native_module_(native_module) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    timer_.Start();</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ae5da0519209ffb6704f0f0c8fbf76d51"> 1169</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ae5da0519209ffb6704f0f0c8fbf76d51">~CompileLazyTimingScope</a>() {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="classv8_1_1base_1_1TimeDelta.html">base::TimeDelta</a> elapsed = timer_.Elapsed();</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    native_module_-&gt;AddLazyCompilationTimeSample(elapsed.<a class="code" href="classv8_1_1base_1_1TimeDelta.html#ad9006b332aa15e66f2ddb8e8ba910892">InMicroseconds</a>());</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    counters_-&gt;wasm_lazy_compile_time()-&gt;AddTimedSample(elapsed);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#adf8515421b30b6a8d696632da65968c9"> 1176</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#adf8515421b30b6a8d696632da65968c9">counters_</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a892aa4e737660936bc5451e988d4e5d3"> 1177</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a892aa4e737660936bc5451e988d4e5d3">native_module_</a>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a6dc7cc8b671708eb8266677a43ff52cf"> 1178</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1ElapsedTimer.html">base::ElapsedTimer</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a6dc7cc8b671708eb8266677a43ff52cf">timer_</a>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;};</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#afa7a500801a38cc98469c31192f78468"> 1183</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afa7a500801a38cc98469c31192f78468">CompileLazy</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                 <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                 <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module = trusted_instance_data-&gt;native_module();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* counters = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>();</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Put the timer scope around everything, including the {CodeSpaceWriteScope}</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// and its destruction, to measure complete overhead (apart from the runtime</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// function itself, which has constant overhead).</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  std::optional&lt;CompileLazyTimingScope&gt; lazy_compile_time_scope;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    lazy_compile_time_scope.emplace(counters, native_module);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9a49a036ab412a6c462feba4042ef5e8">lazy_compile_frozen</a>());</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad2bae691c0e698bc9c20b394f89ffb3c">TRACE_LAZY</a>(<span class="stringliteral">&quot;Compiling wasm-function#%d.\n&quot;</span>, func_index);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  CompilationStateImpl* compilation_state =</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>());</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">DebugState</a> is_in_debug_state = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a95dc87711f2fbd647080305bf39e447f">IsInDebugState</a>();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  ExecutionTierPair tiers =</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#afa5d6fcac84dbf1bc0b0d47a39f81eb3">GetLazyCompilationTiers</a>(native_module, func_index, is_in_debug_state);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af886dc3d493824b7a1ae1e1f5ae02e42">num_imported_functions</a>(), func_index);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(func_index, native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>());</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> baseline_unit{</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      func_index, tiers.baseline_tier,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      is_in_debug_state ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0">kForDebugging</a> : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>};</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html">CompilationEnv</a> env = <a class="code" href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html#a82326dba2957af291922c647638d924c">CompilationEnv::ForModule</a>(native_module);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">WasmCompilationResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = baseline_unit.ExecuteCompilation(</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      &amp;env, compilation_state-&gt;GetWireBytesStorage().get(), counters,</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      &amp;detected_features);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  compilation_state-&gt;OnCompilationStopped(detected_features);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// During lazy compilation, we can only get compilation errors when</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// {--wasm-lazy-validation} is enabled. Otherwise, the module was fully</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// verified before starting its execution.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed(), <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> =</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7">PublishCode</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">AddCompiledCode</a>(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>));</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(func_index, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index());</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7394f35597a2e806ed37a5131279919d">log_code</a>())) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a2b1c94eee0072e6f73f9262078571a4f">LogCode</a>(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(&amp;<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>, 1));</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// Log the code immediately in the current isolate.</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a80a2af861380fd22a236025164b81737">LogOutstandingCodesForIsolate</a>(isolate);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  counters-&gt;wasm_lazily_compiled_functions()-&gt;Increment();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> lazy_module = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(module);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">GetCompileStrategy</a>(module, native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">enabled_features</a>(), func_index,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                         lazy_module) == CompileStrategy::kLazy &amp;&amp;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      tiers.baseline_tier &lt; tiers.top_tier) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> tiering_unit{func_index, tiers.top_tier,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                                     <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>};</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    compilation_state-&gt;CommitTopTierCompilationUnit(tiering_unit);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;}</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a8f515217a2a720fd696212a68a5cd87a"> 1253</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a8f515217a2a720fd696212a68a5cd87a">ThrowLazyCompilationError</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                               <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  CompilationStateImpl* compilation_state =</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>());</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">WasmFunction</a>* func = &amp;module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[func_index];</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> =</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      compilation_state-&gt;GetWireBytesStorage()-&gt;GetCode(func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#aec97739a140bf8da830c55636434adcf">code</a>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keyword">auto</span> enabled_features = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">enabled_features</a>();</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// This path is unlikely, so the overhead for creating an extra Zone is</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// not important.</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Zone.html">Zone</a> validation_zone{<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a92bf3bf6d5ba9b15735d9ae1a3643817">allocator</a>(), <a class="code" href="zone_8h.html#a6b1fd0a126df3f1b788cee19d9cce66e">ZONE_NAME</a>};</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> unused_detected_features;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">DecodeResult</a> decode_result =</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a6eeacc59bea21e7cec9649abc2c0d555">ValidateSingleFunction</a>(&amp;validation_zone, module, func_index, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>,</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                             enabled_features, &amp;unused_detected_features);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(decode_result.<a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html#aff1e1589e6852f41ed5a060d5e4517f9">failed</a>());</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">wasm::ErrorThrower</a> thrower(isolate, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  thrower.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a2d32c2f4fadecb8c1434fa2998171e23">CompileFailed</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#afca7dc31d6cfc38c235556c27dec960b">GetWasmErrorWithName</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a957b590c391c9dc0949cdaff8c94cf05">wire_bytes</a>(),</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                             func_index, module,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                                             std::move(decode_result).error()));</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">// The main purpose of this class is to copy the feedback vectors that live in</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">// `FixedArray`s on the JavaScript heap to a C++ datastructure on the `module`</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">// that is accessible to the background compilation threads.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">// While we are at it, we also do some light processing here, e.g., mapping the</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">// feedback to functions, identified by their function index, and filtering out</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">// feedback for calls to imported functions (which we currently don&#39;t inline).</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html"> 1286</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html">TransitiveTypeFeedbackProcessor</a> {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01288"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a4947e196aa46dccc9b331ec8c6eae7bd"> 1288</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a4947e196aa46dccc9b331ec8c6eae7bd">Process</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                      <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html">TransitiveTypeFeedbackProcessor</a>{isolate, trusted_instance_data, func_index}</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        .ProcessQueue();</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a381518a62cb3d6130a6eb99d495c0bd5"> 1296</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a381518a62cb3d6130a6eb99d495c0bd5">TransitiveTypeFeedbackProcessor</a>(</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordtype">int</span> func_index)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">isolate_</a>(isolate),</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">instance_data_</a>(trusted_instance_data),</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>(trusted_instance_data-&gt;module()),</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#aeabb41a592879c293fbd438da7b09e9e">mutex_guard</a>(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>-&gt;type_feedback.mutex),</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>-&gt;type_feedback.feedback_for_function) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.insert(func_index);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ae8e82bee771b314c3d1a1c4034244776"> 1307</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ae8e82bee771b314c3d1a1c4034244776">~TransitiveTypeFeedbackProcessor</a>() { <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.empty()); }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a719d9a5ae78f1fa03211a6a7e4e240db"> 1309</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a719d9a5ae78f1fa03211a6a7e4e240db">ProcessQueue</a>() {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.empty()) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keyword">auto</span> next = <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.cbegin();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a6bef0d91ba2db74dbf60c794343fec99">ProcessFunction</a>(*next);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.erase(next);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a6bef0d91ba2db74dbf60c794343fec99">ProcessFunction</a>(<span class="keywordtype">int</span> func_index);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ecf3410e1fd0bc75f57f6f06b6beaf"> 1319</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ecf3410e1fd0bc75f57f6f06b6beaf">EnqueueCallees</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;CallSiteFeedback&gt;</a> feedback) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>&amp; csf : feedback) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; csf.num_cases(); j++) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordtype">int</span> func = csf.function_index(j);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="comment">// Don&#39;t spend time on calls that have never been executed.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">if</span> (csf.call_count(j) == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="comment">// Don&#39;t recompute feedback that has already been processed.</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="keyword">auto</span> existing = <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>.find(func);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">if</span> (existing != <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>.end() &amp;&amp;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            !existing-&gt;second.feedback_vector.empty()) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;          <span class="keywordflow">if</span> (!existing-&gt;second.needs_reprocessing_after_deopt) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;          }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_deopt);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;          existing-&gt;second.needs_reprocessing_after_deopt = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>.insert(func);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a3f876a92081673138a39d2fcb31a8065"> 1340</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a3f876a92081673138a39d2fcb31a8065">no_gc_scope_</a>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8"> 1341</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">isolate_</a>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245"> 1342</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">instance_data_</a>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c"> 1343</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// TODO(jkummerow): Check if it makes a difference to apply any updates</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// as a single batch at the end.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#aeabb41a592879c293fbd438da7b09e9e"> 1346</a></span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#aeabb41a592879c293fbd438da7b09e9e">mutex_guard</a>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b"> 1347</a></span>&#160;  std::unordered_map&lt;uint32_t, FunctionTypeFeedback&gt;&amp; <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1"> 1348</a></span>&#160;  std::set&lt;int&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">queue_</a>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;};</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#ad817bffa6a445b9979513a6933576055"> 1351</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad817bffa6a445b9979513a6933576055">IsCrossInstanceCall</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> obj, <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">return</span> obj == <a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>{isolate}.wasm_cross_instance_call_symbol();</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;}</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html"> 1355</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html">FeedbackMaker</a> {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5e77f5f48f3444fbf75a8a66ee8690f1"> 1357</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5e77f5f48f3444fbf75a8a66ee8690f1">FeedbackMaker</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate,</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                <span class="keywordtype">int</span> func_index, <span class="keywordtype">int</span> num_calls)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1">isolate_</a>(isolate),</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a">instance_data_</a>(trusted_instance_data),</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>(</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            base::OwnedVector&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>&gt;::NewForOverwrite(num_calls)),</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#af5d6075341ff19ff2ae481c9df75665a">num_imported_functions_</a>(static_cast&lt;<a class="code" href="classint.html">int</a>&gt;(</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            trusted_instance_data-&gt;module()-&gt;num_imported_functions)),</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">func_index_</a>(func_index) {}</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1228df35a1034986937d698a12ec48d5"> 1368</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1228df35a1034986937d698a12ec48d5">AddCallRefCandidate</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmFuncRef&gt;</a> funcref, <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmInternalFunction&gt;</a> internal_function =</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        Cast&lt;WasmFuncRef&gt;(funcref)-&gt;internal(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1">isolate_</a>);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">// Discard cross-instance calls, as we can only inline same-instance code.</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">if</span> (internal_function-&gt;implicit_arg() != <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a">instance_data_</a>) {</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">// Discard imports for now.</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> (internal_function-&gt;function_index() &lt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#af5d6075341ff19ff2ae481c9df75665a">num_imported_functions_</a>) {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">AddCall</a>(internal_function-&gt;function_index(), <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a21cb7646a6fd34c811c71f4651fcb9d2"> 1384</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a21cb7646a6fd34c811c71f4651fcb9d2">AddCallIndirectCandidate</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> target_truncated_obj,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// Discard cross-instance calls, as we can only inline same-instance code.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad817bffa6a445b9979513a6933576055">IsCrossInstanceCall</a>(target_truncated_obj, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1">isolate_</a>)) {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Smi_01_4.html">Tagged&lt;Smi&gt;</a> target_truncated_smi = Cast&lt;Smi&gt;(target_truncated_obj);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="comment">// We need to map a truncated call target back to a function index.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// Generally there may be multiple jump tables if code spaces are far apart</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="comment">// (to ensure that direct calls can always use a near call to the closest</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// jump table).</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">// However, here we are always handling call targets that are originally</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// from the `WasmDispatchTable`, whose entries are always targets pointing</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// into the main jump table, so we only need to check against that.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> <a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a> =</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a>{<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(target_truncated_smi.<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Smi_01_4.html#a73a3b31cde0a7836a41dd4c03964ba8d">value</a>())};</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="classuintptr__t.html">Address</a> entry = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">GetProcessWideWasmCodePointerTable</a>()</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                        -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65882a1f49bd2c6a667cd3054f3dc2e2">GetEntrypointWithoutSignatureCheck</a>(<a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">wasm::WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> =</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">wasm::GetWasmCodeManager</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a>(<span class="keyword">nullptr</span>, entry);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> || <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module() != <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a">instance_data_</a>-&gt;native_module() ||</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;IsAnonymous()) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="comment">// Was not in the main table (e.g., because it&#39;s an imported function).</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;kind(), <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ac87a38a165cbd7423796063beb48dfe2a0580084be6562b9c6ce678acf564177b">WasmCode::Kind::kWasmFunction</a>);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    uint32_t func_idx = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index();</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">AddCall</a>(func_idx, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73"> 1418</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">AddCall</a>(<span class="keywordtype">int</span> target, <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// If we add too many calls, treat it as megamorphic.</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>) == <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>.size() ||</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a>) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// Keep the cache sorted (using insertion-sort), highest count first.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordtype">int</span> insertion_index = 0;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">while</span> (insertion_index &lt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a> &amp;&amp;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;           <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[insertion_index] &gt;= <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      insertion_index++;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> shifted_index = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a> - 1; shifted_index &gt;= insertion_index;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;         shifted_index--) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>[shifted_index + 1] = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>[shifted_index];</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[shifted_index + 1] = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[shifted_index];</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>[insertion_index] = target;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[insertion_index] = <a class="code" href="structv8_1_1internal_1_1count.html">count</a>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>++;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a35024221f0a5d84611039a0670393b88"> 1441</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a35024221f0a5d84611039a0670393b88">HasTargetCached</a>(<span class="keywordtype">int</span> target) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>.begin() + <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>.end());</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">return</span> std::find(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>.begin(), <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>, target) != <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a"> 1447</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">AddResult</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a> feedback) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>.size());</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>[<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>] = feedback;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    ++<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a2213da6f4221efbea81330fd8638df66"> 1453</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a2213da6f4221efbea81330fd8638df66">FinalizeCall</a>() {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a>) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_inlining) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;[function %d: call #%d: megamorphic]\n&quot;</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">func_index_</a>,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;               <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">AddResult</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a581b4af07afd766cb8722d057fee809b">CallSiteFeedback::CreateMegamorphic</a>());</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a> == 0) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">AddResult</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>{});</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a> == 1) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_inlining) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;[function %d: call #%d inlineable (monomorphic)]\n&quot;</span>,</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;               <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">func_index_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">AddResult</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>{<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>[0], <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[0]});</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_inlining) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;[function %d: call #%d inlineable (polymorphic %d)]\n&quot;</span>,</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;               <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">func_index_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa7549c056d2ab9e5a9cf2558f1478051">kMaxPolymorphism</a>);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html">CallSiteFeedback::PolymorphicCase</a>* polymorphic =</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;          <span class="keyword">new</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html">CallSiteFeedback::PolymorphicCase</a>[<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>];</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        polymorphic[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].<a class="code" href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html#a1dbb576c2c349f34231cd2504d72d952">function_index</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        polymorphic[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].<a class="code" href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html#a335adc6abf34fc2ab937f4849c46006d">absolute_call_frequency</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">AddResult</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>{polymorphic, <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>});</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>[<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a> - 1].set_has_non_inlineable_targets(</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a>);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">// TODO(mliedtke): Have a better representation that merges these properties</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// into one object.</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a> = 0;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a421bfdaf8fe8b4f0e852affdc3da0352"> 1491</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a421bfdaf8fe8b4f0e852affdc3da0352">set_has_non_inlineable_targets</a>() { <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a66eb2e349511d93e32a382a683834e17"> 1492</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a66eb2e349511d93e32a382a683834e17">set_megamorphic</a>() { <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a> = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="comment">// {GetResult} can only be called on a r-value reference to make it more</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// obvious at call sites that {this} should not be used after this operation.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aefda39b4f72b34a82b4c94cb0de549ee"> 1496</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;CallSiteFeedback&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aefda39b4f72b34a82b4c94cb0de549ee">GetResult</a>() &amp;&amp; {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">return</span> std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1"> 1501</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1">isolate_</a>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a"> 1502</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a">instance_data_</a>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6"> 1503</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;CallSiteFeedback&gt;</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">result_</a>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028"> 1504</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">seen_calls_</a> = 0;</div>
<div class="line"><a name="l01505"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#af5d6075341ff19ff2ae481c9df75665a"> 1505</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#af5d6075341ff19ff2ae481c9df75665a">num_imported_functions_</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743"> 1506</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">func_index_</a>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064"> 1507</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">cache_usage_</a>{0};</div>
<div class="line"><a name="l01508"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a"> 1508</a></span>&#160;  std::array&lt;int, kMaxPolymorphism&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">targets_cache_</a>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7"> 1509</a></span>&#160;  std::array&lt;int, kMaxPolymorphism&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">counts_cache_</a>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a"> 1510</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">has_non_inlineable_targets_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// If we add more call targets than kMaxPolymorphism while processing the</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// feedback, treat it as megamorphic.</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc"> 1513</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">is_megamorphic_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;};</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a6bef0d91ba2db74dbf60c794343fec99"> 1516</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a6bef0d91ba2db74dbf60c794343fec99">TransitiveTypeFeedbackProcessor::ProcessFunction</a>(<span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keywordtype">int</span> which_vector = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>, func_index);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> maybe_feedback =</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">instance_data_</a>-&gt;feedback_vectors()-&gt;get(which_vector);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="keywordflow">if</span> (!IsFixedArray(maybe_feedback)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> feedback = Cast&lt;FixedArray&gt;(maybe_feedback);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint32_t&gt;</a> call_targets =</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">module_</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a430d975fff82d80bbbbdd0cf3b5eafd8">feedback_for_function</a>[func_index]</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;          .call_targets.as_vector();</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// For each entry in {call_targets}, there are two {Object} slots in the</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// {feedback} vector:</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">// +--------------------------+-----------------------------+----------------+</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// |        Call Type         |      Feedback: Entry 1      |    Entry 2     |</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// +-------------------------+------------------------------+----------------+</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// | direct                   | Smi(count)                  | Smi(0), unused |</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// +--------------------------+-----------------------------+----------------+</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// | ref, uninitialized       | Smi(0)                      | Smi(0)         |</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// | ref, monomorphic         | WasmFuncRef(target)         | Smi(count&gt;0)   |</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// | ref, polymorphic         | FixedArray                  | Undefined      |</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// | ref, megamorphic         | MegamorphicSymbol           | Undefined      |</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="comment">// +--------------------------+-----------------------------+----------------+</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="comment">// | indirect, uninitialized  | Smi(0)                      | Smi(0)         |</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="comment">// | indirect, monomorphic    | Smi(truncated_target)       | Smi(count&gt;0)   |</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="comment">// | indirect, wrong instance | WasmCrossInstanceCallSymbol | Smi(count&gt;0)   |</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="comment">// | indirect, polymorphic    | FixedArray                  | Undefined      |</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">// | indirect, megamorphic    | MegamorphicSymbol           | Undefined      |</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// +--------------------------+-----------------------------+----------------+</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// The FixedArray entries for the polymorphic cases look like the monomorphic</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// entries in the feedback vector itself, i.e., they can a (truncated) target,</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// or the wrong instance sentinel (for cross-instance call_indirect).</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// See {UpdateCallRefOrIndirectIC} in {wasm.tq} for how this is written.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// Since this is combining untrusted data ({feedback} vector on the JS heap)</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// with trusted data ({call_targets}), make sure to avoid an OOB access.</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordtype">int</span> checked_feedback_length = feedback-&gt;length();</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <a class="code" href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a>(checked_feedback_length, call_targets.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() * 2);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html">FeedbackMaker</a> fm(<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">instance_data_</a>, func_index,</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                   checked_feedback_length / 2);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; checked_feedback_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    uint32_t sentinel_or_target = call_targets[<a class="code" href="namespacev8_1_1internal.html">i</a> / 2];</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> first_slot = feedback-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> second_slot = feedback-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a> + 1);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (sentinel_or_target != <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ab023ba1d0947644b0bb1053726d15e12">FunctionTypeFeedback::kCallRef</a> &amp;&amp;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        sentinel_or_target != <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ad63f4199b4be307795d79157f5490c39">FunctionTypeFeedback::kCallIndirect</a>) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="comment">// Direct call counts.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(first_slot);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(second_slot), 0);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="comment">// TODO(dlehmann): Currently, TurboFan assumes that we add feedback even</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <span class="comment">// if the call count is zero. Once TurboFan is gone, revisit if we can</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="comment">// avoid this (similar to how we do for call_ref/call_indirect today).</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">AddCall</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(sentinel_or_target), <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(second_slot) &amp;&amp; <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(second_slot) == 0) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="comment">// Uninitialized call_ref or call_indirect.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(first_slot), 0);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_inlining) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;[function %d: call #%d: uninitialized]\n&quot;</span>, func_index, <a class="code" href="namespacev8_1_1internal.html">i</a> / 2);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsWasmFuncRef(first_slot)) {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="comment">// Monomorphic call_ref.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(sentinel_or_target, <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ab023ba1d0947644b0bb1053726d15e12">FunctionTypeFeedback::kCallRef</a>);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(second_slot);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1228df35a1034986937d698a12ec48d5">AddCallRefCandidate</a>(Cast&lt;WasmFuncRef&gt;(first_slot), <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(first_slot) || <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad817bffa6a445b9979513a6933576055">IsCrossInstanceCall</a>(first_slot, <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">isolate_</a>)) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="comment">// Monomorphic call_indirect.</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(sentinel_or_target, <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ad63f4199b4be307795d79157f5490c39">FunctionTypeFeedback::kCallIndirect</a>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(second_slot);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a21cb7646a6fd34c811c71f4651fcb9d2">AddCallIndirectCandidate</a>(first_slot, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsFixedArray(first_slot)) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="comment">// Polymorphic call_ref or call_indirect.</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> polymorphic = Cast&lt;FixedArray&gt;(first_slot);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsUndefined(second_slot));</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <span class="keywordtype">int</span> checked_polymorphic_length = polymorphic-&gt;length();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <a class="code" href="check_8h.html#a0331d7a4dc5d6372d25e946af1f96588">SBXCHECK_LE</a>(checked_polymorphic_length, 2 * <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa7549c056d2ab9e5a9cf2558f1478051">kMaxPolymorphism</a>);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keywordflow">if</span> (sentinel_or_target == <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ab023ba1d0947644b0bb1053726d15e12">FunctionTypeFeedback::kCallRef</a>) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; checked_polymorphic_length; j += 2) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;          <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmFuncRef&gt;</a> target = Cast&lt;WasmFuncRef&gt;(polymorphic-&gt;get(j));</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(polymorphic-&gt;get(j + 1));</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;          fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1228df35a1034986937d698a12ec48d5">AddCallRefCandidate</a>(target, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(sentinel_or_target, <a class="code" href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ad63f4199b4be307795d79157f5490c39">FunctionTypeFeedback::kCallIndirect</a>);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; checked_polymorphic_length; j += 2) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;          <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> target = polymorphic-&gt;get(j);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;          <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = <a class="code" href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">Smi::ToInt</a>(polymorphic-&gt;get(j + 1));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;          fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a21cb7646a6fd34c811c71f4651fcb9d2">AddCallIndirectCandidate</a>(target, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (first_slot == <a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>{<a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">isolate_</a>}.megamorphic_symbol()) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsUndefined(second_slot));</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a66eb2e349511d93e32a382a683834e17">set_megamorphic</a>();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_deopt &amp;&amp;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        first_slot != <a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>{isolate_}.megamorphic_symbol()) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="comment">// If we already had feedback for this call, also add the already existing</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="comment">// feedback to prevent deopt loops where two different instantiations</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="comment">// (which have their own on-heap feedback vector) to &quot;flip-flop&quot; between</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="comment">// their inlining decisions potentially causing deopt loops.</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="keyword">const</span> <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;CallSiteFeedback&gt;</a>&amp; existing =</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>[func_index].feedback_vector;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="keywordtype">size_t</span> feedback_index = <a class="code" href="namespacev8_1_1internal.html">i</a> / 2;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="keywordflow">if</span> (feedback_index &lt; existing.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a26c158458db822b4e91ca63ec1026131">size</a>()) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">CallSiteFeedback</a>&amp; old_feedback = existing[feedback_index];</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">if</span> (old_feedback.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a8c5e0d187ba12d271429ec0d6b1f93fe">has_non_inlineable_targets</a>()) {</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a421bfdaf8fe8b4f0e852affdc3da0352">set_has_non_inlineable_targets</a>();</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordflow">if</span> (old_feedback.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a6088a3693fde5bfe38d4c287cb3ef006">is_megamorphic</a>()) {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;          fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a66eb2e349511d93e32a382a683834e17">set_megamorphic</a>();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        }</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; old_feedback.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a6d80e8276ad897f0d1bb2157b33aaf0d">num_cases</a>(); ++j) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;          <span class="keywordtype">int</span> old_target_function_index = old_feedback.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#aa53156b01a8f7b14b7fb11da2e2c150c">function_index</a>(j);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;          <span class="comment">// If the new feedback already contains the target, we do not touch</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;          <span class="comment">// the call count.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;          <span class="keywordflow">if</span> (!fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a35024221f0a5d84611039a0670393b88">HasTargetCached</a>(old_target_function_index)) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">AddCall</a>(old_target_function_index, old_feedback.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a7a74f41aeae304037366748ed360538a">call_count</a>(j));</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            <span class="comment">// There shouldn&#39;t be any imported functions in there as they can&#39;t</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="comment">// be inlined. If this DCHECK is invalidated,</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;            <span class="comment">// has_non_inlineable_targets_ would need to be updated here to</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            <span class="comment">// reflect that.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(old_target_function_index),</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">instance_data_</a>-&gt;module()-&gt;num_imported_functions);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;          }</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    fm.<a class="code" href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a2213da6f4221efbea81330fd8638df66">FinalizeCall</a>();</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;CallSiteFeedback&gt;</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = std::move(fm).GetResult();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ecf3410e1fd0bc75f57f6f06b6beaf">EnqueueCallees</a>(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.as_vector());</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.size(),</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>[func_index].call_targets.size());</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">feedback_for_function_</a>[func_index].feedback_vector = std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;}</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a5d346308124847f8fc36bfd05b5079a3"> 1654</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a5d346308124847f8fc36bfd05b5079a3">TriggerTierUp</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                   <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                   <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module = trusted_instance_data-&gt;native_module();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  CompilationStateImpl* compilation_state =</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>());</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> tiering_unit{func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>,</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                                   <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>};</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordtype">int</span> priority;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> mutex_guard(&amp;module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a978ef852d135cebd5dc2629bc8692090">mutex</a>);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordtype">int</span> array_index = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">wasm::declared_function_index</a>(module, func_index);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    trusted_instance_data-&gt;tiering_budget_array()[array_index].store(</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_tiering_budget, std::memory_order_relaxed);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordtype">int</span>&amp; stored_priority =</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a430d975fff82d80bbbbdd0cf3b5eafd8">feedback_for_function</a>[func_index].tierup_priority;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (stored_priority &lt; <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>) ++stored_priority;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    priority = stored_priority;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// Only create a compilation unit if this is the first time we detect this</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// function as hot (priority == 1), or if the priority increased</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="comment">// significantly. The latter is assumed to be the case if the priority</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="comment">// increased at least to four, and is a power of two.</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">if</span> (priority == 2 || !<a class="code" href="namespacev8_1_1base_1_1bits.html#af9eb752b538fa8a66badab8f26e0e000">base::bits::IsPowerOfTwo</a>(priority)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// Before adding the tier-up unit or increasing priority, process type</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="comment">// feedback for best code generation.</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_inlining) {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// TODO(jkummerow): we could have collisions here if different instances</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// of the same module have collected different feedback. If that ever</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="comment">// becomes a problem, figure out a solution.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a4947e196aa46dccc9b331ec8c6eae7bd">TransitiveTypeFeedbackProcessor::Process</a>(isolate, trusted_instance_data,</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                                             func_index);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  }</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  compilation_state-&gt;AddTopTierPriorityCompilationUnit(tiering_unit, priority);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;}</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a19827f93e7ddd7bfc05feb71b9a55407"> 1694</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a19827f93e7ddd7bfc05feb71b9a55407">TierUpNowForTesting</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                         <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                         <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module = trusted_instance_data-&gt;native_module();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_inlining) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a4947e196aa46dccc9b331ec8c6eae7bd">TransitiveTypeFeedbackProcessor::Process</a>(isolate, trusted_instance_data,</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                                             func_index);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a91a8d27da954c0e30d403ffa8fcb7bf5">CompileFunction</a>(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>(), native_module,</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                                         func_index,</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                                         <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">wasm::ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a2badfff8eee4ca33ffd54ab30ae5b1bf">failed</a>());</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;}</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a5fb16976eb8924e08ec6616b1527f636"> 1708</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a5fb16976eb8924e08ec6616b1527f636">TierUpAllForTesting</a>(</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module = trusted_instance_data-&gt;native_module();</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* mod = native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  uint32_t start = mod-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  uint32_t <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = start + mod-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="keywordflow">for</span> (uint32_t func_index = start; func_index &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>; func_index++) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (!native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a74d82ac97a7bb02ac5781d209ffe2bc5">HasCodeWithTier</a>(func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>)) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a19827f93e7ddd7bfc05feb71b9a55407">TierUpNowForTesting</a>(isolate, trusted_instance_data, func_index);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;}</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160; </div>
<div class="line"><a name="l01723"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a60a035009507dcad49f342b8e4676bfc"> 1723</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a60a035009507dcad49f342b8e4676bfc">InitializeCompilationForTesting</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>())</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a06926c1b78473627fab3d1409a0916c6">InitializeCompilationProgress</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;}</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#ae7a6dc8061ff4f4860d0efa2cca75d9d"> 1728</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae7a6dc8061ff4f4860d0efa2cca75d9d">PublishDetectedFeatures</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features,</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                             <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keywordtype">bool</span> is_initial_compilation) {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keyword">using</span> Feature = <a class="code" href="classv8_1_1Isolate.html#aed6909379c3f2820cb3084710b73385d">v8::Isolate::UseCounterFeature</a>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keyword">static</span> constexpr std::pair&lt;WasmDetectedFeature, Feature&gt; kUseCounters[] = {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      {WasmDetectedFeature::shared_memory, Feature::kWasmSharedMemory},</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      {WasmDetectedFeature::reftypes, Feature::kWasmRefTypes},</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      {WasmDetectedFeature::simd, Feature::kWasmSimdOpcodes},</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      {WasmDetectedFeature::threads, Feature::kWasmThreadOpcodes},</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      {WasmDetectedFeature::legacy_eh, Feature::kWasmExceptionHandling},</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      {WasmDetectedFeature::memory64, Feature::kWasmMemory64},</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      {WasmDetectedFeature::multi_memory, Feature::kWasmMultiMemory},</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      {WasmDetectedFeature::gc, Feature::kWasmGC},</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      {WasmDetectedFeature::imported_strings, Feature::kWasmImportedStrings},</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      {WasmDetectedFeature::imported_strings_utf8,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;       Feature::kWasmImportedStringsUtf8},</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      {WasmDetectedFeature::return_call, Feature::kWasmReturnCall},</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      {WasmDetectedFeature::extended_const, Feature::kWasmExtendedConst},</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      {WasmDetectedFeature::relaxed_simd, Feature::kWasmRelaxedSimd},</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      {WasmDetectedFeature::type_reflection, Feature::kWasmTypeReflection},</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      {WasmDetectedFeature::exnref, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a9a79ec61e742ba6e76addd6390334f22">Feature::kWasmExnRef</a>},</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      {WasmDetectedFeature::typed_funcref, Feature::kWasmTypedFuncRef},</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      {WasmDetectedFeature::jspi, Feature::kWasmJavaScriptPromiseIntegration},</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      {WasmDetectedFeature::branch_hinting, Feature::kWasmBranchHinting},</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      {WasmDetectedFeature::multi_value, Feature::kWasmMultiValue},</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  };</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="comment">// Check that every staging or shipping feature has a use counter as that is</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="comment">// the main point of tracking used features.</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keyword">auto</span> check_use_counter = [](<a class="code" href="namespacev8_1_1internal_1_1wasm.html#adfc648b4e5d05b43110df728650e4e4e">WasmDetectedFeature</a> feat) constexpr -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="comment">// Some features intentionally do not have a use counter.</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    constexpr <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adfc648b4e5d05b43110df728650e4e4e">WasmDetectedFeature</a> kIntentionallyNoUseCounter[] = {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        WasmDetectedFeature::stringref,  <span class="comment">// Deprecated / unlikely to ship.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    };</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> no_use_counter_feature : kIntentionallyNoUseCounter) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">if</span> (feat == no_use_counter_feature) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [feature, use_counter] : kUseCounters) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordflow">if</span> (feat == feature) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  };</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="preprocessor">#define CHECK_USE_COUNTER(feat, ...) \</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="preprocessor">  static_assert(check_use_counter(WasmDetectedFeature::feat));</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <a class="code" href="wasm-feature-flags_8h.html#a7cdfb27e220029d969e05e0c5dafbe5e">FOREACH_WASM_STAGING_FEATURE_FLAG</a>(<a class="code" href="module-compiler_8cc.html#aff4abc3a4fa9f8a9d5100a8532691198">CHECK_USE_COUNTER</a>)</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <a class="code" href="wasm-feature-flags_8h.html#ade45dbfc8a894dfb754e489442d41c4a">FOREACH_WASM_SHIPPED_FEATURE_FLAG</a>(<a class="code" href="module-compiler_8cc.html#aff4abc3a4fa9f8a9d5100a8532691198">CHECK_USE_COUNTER</a>)</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <a class="code" href="wasm-features_8h.html#af51d8ba1d0c550a316bafe40d335ff01">FOREACH_WASM_NON_FLAG_FEATURE</a>(<a class="code" href="module-compiler_8cc.html#aff4abc3a4fa9f8a9d5100a8532691198">CHECK_USE_COUNTER</a>)</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="preprocessor">#undef CHECK_USE_COUNTER</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> kMaxFeatures = <a class="code" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(kUseCounters) + 1;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <a class="code" href="classv8_1_1base_1_1SmallVector.html">base::SmallVector&lt;Feature, kMaxFeatures&gt;</a> use_counter_features;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="keywordflow">if</span> (is_initial_compilation) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">// Always set the WasmModuleCompilation feature as a baseline for the other</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="comment">// features. Note that we also track instantiation, but the number of</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="comment">// compilations and instantiations are pretty unrelated.</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    use_counter_features.<a class="code" href="classv8_1_1base_1_1SmallVector.html#ad8177749a526ab128a35c4ec8b0cddf7">push_back</a>(Feature::kWasmModuleCompilation);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [wasm_feature, feature] : kUseCounters) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">if</span> (!detected_features.<a class="code" href="classv8_1_1base_1_1EnumSet.html#ae4b456a7bb23f2a76c4526748fcc911a">contains</a>(wasm_feature)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    use_counter_features.<a class="code" href="classv8_1_1base_1_1SmallVector.html#ad8177749a526ab128a35c4ec8b0cddf7">push_back</a>(feature);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="keywordflow">if</span> (use_counter_features.<a class="code" href="classv8_1_1base_1_1SmallVector.html#ac89f2f50c3d6d75b9d2a62c97cd79408">empty</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2fbd063d0fbd9a69e5e5adebceefddf1">CountUsage</a>(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(use_counter_features));</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">// Help differential fuzzers avoid detecting known/intentional platform-</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// specific differences.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.correctness_fuzzer_suppressions) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span> (detected_features.has_relaxed_simd()) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;Warning: This run cannot be compared across architectures.\n&quot;</span>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160; </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a96cb041804eb9ad1ff24e3dc61924efb"> 1804</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a96cb041804eb9ad1ff24e3dc61924efb">IsI16Array</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_object_reference() || !<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.has_index()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> reftype = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.ref_index();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="keywordflow">if</span> (!module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4d7f2eb3c584f9a7b9d79754dd29a315">has_array</a>(reftype)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">return</span> module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a203c3dead384ed9378fabac21ef51c52">canonical_type_id</a>(reftype) ==</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;         <a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a786ffe03cbb5612cc865dff1331a20eb">TypeCanonicalizer::kPredefinedArrayI16Index</a>;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;}</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875"> 1812</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875">IsI8Array</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;               <span class="keywordtype">bool</span> allow_nullable) {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_object_reference() || !<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.has_index()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">if</span> (!allow_nullable &amp;&amp; <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_nullable()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> reftype = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.ref_index();</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordflow">if</span> (!module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4d7f2eb3c584f9a7b9d79754dd29a315">has_array</a>(reftype)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordflow">return</span> module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a203c3dead384ed9378fabac21ef51c52">canonical_type_id</a>(reftype) ==</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         <a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#ad7596d2d5f3ea621ba8021e2b5c35ea0">TypeCanonicalizer::kPredefinedArrayI8Index</a>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment">// Returns the start offset of a given import, for use in error messages.</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">// The module_name payload is preceded by an i32v giving its length. That i32v</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">// is preceded by another i32v, which is either a type index (specifying the</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">// type of the previous import) or the imports count (in case of the first</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment">// import). So we scan backwards as long as we find non-last LEB bytes there.</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab844238ed02513478a0a17b5107670ec"> 1827</a></span>&#160;uint32_t <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab844238ed02513478a0a17b5107670ec">ImportStartOffset</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes,</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                           uint32_t module_name_start) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, module_name_start);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  uint32_t offset = module_name_start - 1;  <span class="comment">// Last byte of the string length.</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(wire_bytes[offset] &amp; 0x80, 0);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordflow">while</span> (offset &gt; 0 &amp;&amp; (wire_bytes[offset - 1] &amp; 0x80) != 0) {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    offset--;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  }</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="keywordflow">return</span> offset;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;}</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">// Validates the signatures of recognized compile-time imports, and stores</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">// them on the {module}&#39;s {well_known_imports} list.</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e"> 1842</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                       <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes,</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&amp; imports,</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                                       <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>* detected) {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">if</span> (imports.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a7bddfd43d06279d0cc613b668aa7e052">empty</a>()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kRefExtern = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a39f220d6cd8ec966c407b99a7de6f461">kWasmRefExtern</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kExternRef = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a75bfbc047d813d2932698521c1c1145f">kWasmExternRef</a>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a7b893808fadaa287f225d7209d2d36c6">kWasmI32</a>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="comment">// Shorthands: &quot;r&quot; = nullable &quot;externref&quot;, &quot;e&quot; = non-nullable &quot;ref extern&quot;.</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kReps_e_i[] = {kRefExtern, <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kReps_e_rr[] = {kRefExtern, kExternRef,</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                                             kExternRef};</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kReps_e_rii[] = {kRefExtern, kExternRef, <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>,</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                                              <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kReps_i_ri[] = {<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef, <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> kReps_i_rr[] = {<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef, kExternRef};</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_e_i(1, 1, kReps_e_i);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_e_r(1, 1, kReps_e_rr);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_e_rr(1, 2, kReps_e_rr);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_e_rii(1, 3, kReps_e_rii);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_i_r(1, 1, kReps_i_ri);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_i_ri(1, 2, kReps_i_ri);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keyword">static</span> constexpr <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a> kSig_i_rr(1, 2, kReps_i_rr);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  std::vector&lt;WellKnownImport&gt; statuses;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  statuses.reserve(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4f710e1d1dd945669cbebae2b51835e5">import_table</a>.size(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmImport.html">WasmImport</a>&amp; <span class="keyword">import</span> = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4f710e1d1dd945669cbebae2b51835e5">import_table</a>[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="comment">// When magic string imports are requested, check that imports with the</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="comment">// string constant module name are globals of the right type.</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span> (imports.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a3a42250749ca938e52a5116f2e5720eb">has_string_constants</a>(wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            <span class="keyword">import</span>.module_name.offset(), <span class="keyword">import</span>.module_name.end_offset()))) {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">import</span>.kind != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#acb10c8534fdb3edc15e3f45d7ee6d547a6f3a1cfcc3386739303f7d10b0075ac5">kExternalGlobal</a> ||</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;          !module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac6101242a2a805d0e982fff4ddcc4677">globals</a>[<span class="keyword">import</span>.index].type.is_reference_to(</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;              <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951">HeapType::kExtern</a>) ||</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;          module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac6101242a2a805d0e982fff4ddcc4677">globals</a>[<span class="keyword">import</span>.index].mutability != <span class="keyword">false</span>) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1TruncatedUserString.html">TruncatedUserString&lt;&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a>(</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#a7ae17f2372808420997b1aff6addcdd0">data</a>() + <span class="keyword">import</span>.field_name.offset(),</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <span class="keyword">import</span>.field_name.length());</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a>(</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab844238ed02513478a0a17b5107670ec">ImportStartOffset</a>(wire_bytes, <span class="keyword">import</span>.module_name.offset()),</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            <span class="stringliteral">&quot;String constant import #%zu \&quot;%.*s\&quot; must be an immutable global &quot;</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            <span class="stringliteral">&quot;subtyping externref&quot;</span>,</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <a class="code" href="namespacev8_1_1internal.html">i</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a>.length(), <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a>.start());</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="comment">// Check compile-time imported functions.</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">import</span>.kind != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#acb10c8534fdb3edc15e3f45d7ee6d547a841c234519f90eb88be0020af3622a4d">kExternalFunction</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> module_name = wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keyword">import</span>.module_name.offset(), <span class="keyword">import</span>.module_name.end_offset());</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    constexpr <span class="keywordtype">size_t</span> kMinInterestingLength = 10;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span> (module_name.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() &lt; kMinInterestingLength ||</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        module_name.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(0, 5) != <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;wasm:&quot;</span>)) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      statuses.push_back(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea4a2d15530df7ed8fe7a35b02d47fff24">WellKnownImport::kUninstantiated</a>);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    }</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> collection = module_name.<a class="code" href="classv8_1_1base_1_1Vector.html#a2a0cb4c18804d56414671e0c1d3fb7c4">SubVectorFrom</a>(5);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6e">WellKnownImport</a> <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea4a2d15530df7ed8fe7a35b02d47fff24">WellKnownImport::kUninstantiated</a>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">WasmFunction</a>&amp; func = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[<span class="keyword">import</span>.index];</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = func.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#ab4f3d0ecf1a3e6eab1bb917b4568d547">sig</a>;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">WireBytesRef</a> field_name = <span class="keyword">import</span>.field_name;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> =</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(field_name.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">offset</a>(), field_name.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a1853a6fc4a88a37d2bb8a91b58781daf">end_offset</a>());</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">if</span> (collection == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;js-string&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        imports.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#aa10cbaf2a25c618bfdda0ed3cf4b76da">contains</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420">CompileTimeImport::kJsString</a>)) {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="preprocessor">#define RETURN_ERROR(module_name_string, import_name)                     \</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="preprocessor">  uint32_t error_offset =                                                 \</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="preprocessor">      ImportStartOffset(wire_bytes, import.module_name.offset());         \</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="preprocessor">  return WasmError(error_offset,                                          \</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="preprocessor">                   &quot;Imported builtin function \&quot;wasm:&quot;</span> module_name_string \</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                   &quot;\&quot; \&quot;&quot; import_name &quot;\&quot; has incorrect signature&quot;)</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160; </div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="preprocessor">#define CHECK_SIG(import_name, kSigName, kEnumName)      \</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="preprocessor">  if (name == base::StaticOneByteVector(#import_name)) { \</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="preprocessor">    if (*sig != kSigName) {                              \</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">      RETURN_ERROR(&quot;js-string&quot;</span>, #import_name);           \</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    }                                                    \</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    status = WellKnownImport::kEnumName;                 \</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    detected-&gt;add_imported_strings();                    \</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  } else  <span class="comment">// NOLINT(readability/braces)</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(cast, kSig_e_r, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eada036082fdf62d64e75d6c2a78977904">kStringCast</a>)</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(test, kSig_i_r, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eab0a05b1529f7334a8bf654350c064fd1">kStringTest</a>)</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(fromCharCode, kSig_e_i, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea3da24690aec2adcb83a65afb07d2a81f">kStringFromCharCode</a>)</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(fromCodePoint, kSig_e_i, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea9e97c9e6af7667c3fe85b7834c4ae470">kStringFromCodePoint</a>)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(charCodeAt, kSig_i_ri, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaae69b44fefda9823ba38a5e442454d7e">kStringCharCodeAt</a>)</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(codePointAt, kSig_i_ri, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea880a1d9d17a0fea09c4f88e7e3a5b3c8">kStringCodePointAt</a>)</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(<a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>, kSig_i_r, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eac87da7065fd2c38b65c88900f0136159">kStringLength</a>)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(concat, kSig_e_rr, kStringConcat)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(substring, kSig_e_rii, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea025e1c9f27557f20869f4e447d8e2650">kStringSubstring</a>)</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(equals, kSig_i_rr, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea4458d686d446ba3cb74e46d8c85ba791">kStringEquals</a>)</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <a class="code" href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a>(compare, kSig_i_rr, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea974aaaa059c6fba0dfb3f7e60ca0edc8">kStringCompare</a>)</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;fromCharCodeArray&quot;</span>)) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count() != 3 || <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() != 1 ||</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a96cb041804eb9ad1ff24e3dc61924efb">IsI16Array</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(0), module) ||  <span class="comment">// --</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(1) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||               <span class="comment">// --</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(2) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||               <span class="comment">// --</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn() != kRefExtern) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;js-string&quot;</span>, <span class="stringliteral">&quot;fromCharCodeArray&quot;</span>);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        }</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        detected-&gt;add_imported_strings();</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea2131852b663891f0994db1e7a36f8867">WellKnownImport::kStringFromWtf16Array</a>;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;intoCharCodeArray&quot;</span>)) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count() != 3 || <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() != 1 ||</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(0) != kExternRef ||</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a96cb041804eb9ad1ff24e3dc61924efb">IsI16Array</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(1), module) ||  <span class="comment">// --</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(2) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||               <span class="comment">// --</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn() != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;js-string&quot;</span>, <span class="stringliteral">&quot;intoCharCodeArray&quot;</span>);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea9de3632f47e27959c200e62484330936">WellKnownImport::kStringToWtf16Array</a>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        detected-&gt;add_imported_strings();</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="preprocessor">#undef CHECK_SIG</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collection == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;text-encoder&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;               imports.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#aa10cbaf2a25c618bfdda0ed3cf4b76da">contains</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9">CompileTimeImport::kTextEncoder</a>)) {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;measureStringAsUTF8&quot;</span>)) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> != kSig_i_r) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;text-encoder&quot;</span>, <span class="stringliteral">&quot;measureStringAsUTF8&quot;</span>);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eafd9a4c0cd1d6ca6e15057c5a9b13eedc">WellKnownImport::kStringMeasureUtf8</a>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        detected-&gt;add_imported_strings_utf8();</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> ==</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                 <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;encodeStringIntoUTF8Array&quot;</span>)) {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count() != 3 || <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() != 1 ||</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(0) != kExternRef ||              <span class="comment">// --</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875">IsI8Array</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(1), module, <span class="keyword">true</span>) ||  <span class="comment">// --</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(2) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||                    <span class="comment">// --</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn() != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>) {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;text-encoder&quot;</span>, <span class="stringliteral">&quot;encodeStringIntoUTF8Array&quot;</span>);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea8e3f25105ad0cf92c606529debc35721">WellKnownImport::kStringIntoUtf8Array</a>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        detected-&gt;add_imported_strings_utf8();</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;encodeStringToUTF8Array&quot;</span>)) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count() != 1 || <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() != 1 ||</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(0) != kExternRef ||</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875">IsI8Array</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn(), module, <span class="keyword">false</span>)) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;text-encoder&quot;</span>, <span class="stringliteral">&quot;encodeStringToUTF8Array&quot;</span>);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaccfd587981c85c5c914d6ecd60e0f330">WellKnownImport::kStringToUtf8Array</a>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        detected-&gt;add_imported_strings_utf8();</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (collection == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;text-decoder&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;               imports.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#aa10cbaf2a25c618bfdda0ed3cf4b76da">contains</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04">CompileTimeImport::kTextDecoder</a>)) {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">name</a> == <a class="code" href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">base::StaticOneByteVector</a>(<span class="stringliteral">&quot;decodeStringFromUTF8Array&quot;</span>)) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count() != 3 || <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() != 1 ||</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875">IsI8Array</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(0), module, <span class="keyword">true</span>) ||  <span class="comment">// --</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(1) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||                    <span class="comment">// --</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(2) != <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> ||                    <span class="comment">// --</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn() != kRefExtern) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;          <a class="code" href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a>(<span class="stringliteral">&quot;text-decoder&quot;</span>, <span class="stringliteral">&quot;decodeStringFromUTF8Array&quot;</span>);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaee4e1698859a4c1b87e559835724e0e5">WellKnownImport::kStringFromUtf8Array</a>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        detected-&gt;add_imported_strings_utf8();</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      }</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="preprocessor">#undef RETURN_ERROR</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    statuses.push_back(<a class="code" href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">status</a>);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  }</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// We&#39;re operating on a fresh WasmModule instance here, so we don&#39;t need to</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="comment">// check for incompatibilities with previously seen imports.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>, statuses.size());</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">// The &quot;Initialize&quot; call is currently only safe when the decoder has allocated</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="comment">// storage, which it allocates when there is an imports section.</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="keywordflow">if</span> (module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a> != 0) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">type_feedback</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a2f59640a40aae70550d8eda5f0f89c5f">well_known_imports</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#aeaafe5f17892d90ba434f1f143620c42">Initialize</a>(</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(statuses));</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;}</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160; </div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41"> 2022</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41">CompilationExecutionResult</a> : int8_t { <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9">kNoMoreUnits</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82">kYield</a> };</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab499118d31e8a33d00e9c72dc66824ff"> 2024</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab499118d31e8a33d00e9c72dc66824ff">GetCompilationEventName</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a>&amp; unit,</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html">CompilationEnv</a>&amp; env) {</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a> = unit.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#a612577dea57ec12822ce26597949be5e">tier</a>();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm.BaselineCompilation&quot;</span>;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  }</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm.TopTierCompilation&quot;</span>;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="keywordflow">if</span> (unit.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#a5c56eda18110c9dfcce2ea66840fd4cd">func_index</a>() &lt;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(env.<a class="code" href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html#aaa94c1bc8d30640716c3e0b5f32097cd">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>)) {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm.WasmToJSWrapperCompilation&quot;</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm.OtherCompilation&quot;</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;}</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557"> 2040</a></span>&#160;constexpr uint8_t <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557">kMainTaskId</a> = 0;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">// Run by the {BackgroundCompileJob} (on any thread).</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a168d82deb0d259820bfa9d1edff28451"> 2043</a></span>&#160;<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41">CompilationExecutionResult</a> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a168d82deb0d259820bfa9d1edff28451">ExecuteCompilationUnits</a>(</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    std::weak_ptr&lt;NativeModule&gt; native_module, <a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* counters,</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <a class="code" href="classv8_1_1JobDelegate.html">JobDelegate</a>* delegate, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.ExecuteCompilationUnits&quot;</span>);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// Compilation must be disabled in jitless mode.</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// These fields are initialized in a {BackgroundCompileScope} before</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// starting compilation.</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  std::optional&lt;CompilationEnv&gt; env;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  std::optional&lt;base::FlushDenormalsScope&gt; disable_denormals;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  std::shared_ptr&lt;WireBytesStorage&gt; wire_bytes;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  std::shared_ptr&lt;const WasmModule&gt; module;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">// Task 0 is any main thread (there might be multiple from multiple isolates),</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// worker threads start at 1 (thus the &quot;+ 1&quot;).</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557">kMainTaskId</a> == 0);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="keywordtype">int</span> task_id = delegate ? (<span class="keywordtype">int</span>{delegate-&gt;<a class="code" href="classv8_1_1JobDelegate.html#aeaea259d5f4fec4aaca6f9fc35126fda">GetTaskId</a>()} + 1) : <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557">kMainTaskId</a>;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(0, task_id);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">CompilationUnitQueues::Queue</a>* queue;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  std::optional&lt;WasmCompilationUnit&gt; unit;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> global_detected_features;</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="comment">// Preparation (synchronized): Initialize the fields above and get the first</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// compilation unit.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">BackgroundCompileScope</a> compile_scope(native_module);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">if</span> (compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a583e2f2b2299476e7f9c3e98f3386355">cancelled</a>()) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82">kYield</a>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    env.emplace(<a class="code" href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html#a82326dba2957af291922c647638d924c">CompilationEnv::ForModule</a>(compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()));</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="comment">// We only really need this for optimized compilation, but for simplicity</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="comment">// set it just once for everything.</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    disable_denormals.emplace(</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9dc26792c1058956f82dd7114444a607">compile_imports</a>().<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#aa10cbaf2a25c618bfdda0ed3cf4b76da">contains</a>(</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7aa6ff721a10304376cade807b9264cd98">CompileTimeImport::kDisableDenormalFloats</a>));</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    wire_bytes = compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a928d8dccea38ced17d01c739eadd64e7">GetWireBytesStorage</a>();</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    module = compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac1c67fdd89ee3efcc205ed3885a12b36">shared_module</a>();</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    queue = compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7bd4a3ad05fde241ad2e33e12ca1275d">GetQueueForCompileTask</a>(task_id);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    unit =</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4691d2bab412c73443a96c25fa8bc94b">GetNextCompilationUnit</a>(queue, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">if</span> (!unit) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9">kNoMoreUnits</a>;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;ExecuteCompilationUnits (task id %d)\n&quot;</span>, task_id);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160; </div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  std::vector&lt;WasmCompilationResult&gt; results_to_publish;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> current_tier = unit-&gt;tier();</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* event_name = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab499118d31e8a33d00e9c72dc66824ff">GetCompilationEventName</a>(unit.value(), env.value());</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, event_name);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">while</span> (unit-&gt;tier() == current_tier) {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="comment">// Track detected features on a per-function basis before collecting them</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="comment">// into {global_detected_features}.</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> per_function_detected_features;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="comment">// (asynchronous): Execute the compilation.</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">WasmCompilationResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;          unit-&gt;ExecuteCompilation(&amp;env.value(), wire_bytes.get(), counters,</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                                   &amp;per_function_detected_features);</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      global_detected_features.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(per_function_detected_features);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="keywordtype">bool</span> compilation_succeeded = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.succeeded();</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> result_tier = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.result_tier;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="comment">// We don&#39;t eagerly compile import wrappers any more.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(unit-&gt;func_index(), env-&gt;module-&gt;num_imported_functions);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      results_to_publish.emplace_back(std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>));</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="keywordtype">bool</span> yield = delegate &amp;&amp; delegate-&gt;<a class="code" href="classv8_1_1JobDelegate.html#a7180a73d20fc8a240c742163001d8b3a">ShouldYield</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160; </div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="comment">// (synchronized): Publish the compilation result and get the next unit.</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">BackgroundCompileScope</a> compile_scope(native_module);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="keywordflow">if</span> (compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a583e2f2b2299476e7f9c3e98f3386355">cancelled</a>()) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82">kYield</a>;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keywordflow">if</span> (!compilation_succeeded) {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a28b47f0cb3321f0107f1a57b0b7edf0d">SetError</a>();</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9">kNoMoreUnits</a>;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordflow">if</span> (!unit-&gt;for_debugging() &amp;&amp; result_tier != current_tier) {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a88fe8f1d6e45f64edf0add83a8befd42">AddLiftoffBailout</a>();</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <span class="comment">// Yield or get next unit.</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">if</span> (yield ||</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;          !(unit = compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4691d2bab412c73443a96c25fa8bc94b">GetNextCompilationUnit</a>(</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                queue, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>))) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        std::vector&lt;UnpublishedWasmCode&gt; unpublished_code =</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">AddCompiledCode</a>(</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(results_to_publish));</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        results_to_publish.clear();</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a31071aac7bfc7dfb7923f3376d78376b">SchedulePublishCompilationResults</a>(</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            std::move(unpublished_code), <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#adf989d360ca6f9f18f40ba6ed28c76b0">OnCompilationStopped</a>(</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            global_detected_features);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">return</span> yield ? <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82">kYield</a> : <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9">kNoMoreUnits</a>;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="comment">// Publish after finishing a certain amount of units, to avoid</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      <span class="comment">// contention when all threads publish at the end.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordtype">bool</span> batch_full =</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;          queue-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html#a99d638f6df8f21a79c191c8eca28972d">ShouldPublish</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(results_to_publish.size()));</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">// Also publish each time the compilation tier changes from Liftoff to</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="comment">// TurboFan, such that we immediately publish the baseline compilation</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <span class="comment">// results to start execution, and do not wait for a batch to fill up.</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="keywordtype">bool</span> liftoff_finished = unit-&gt;tier() != current_tier &amp;&amp;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                              unit-&gt;tier() == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">if</span> (batch_full || liftoff_finished) {</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        std::vector&lt;UnpublishedWasmCode&gt; unpublished_code =</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">native_module</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">AddCompiledCode</a>(</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(results_to_publish));</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        results_to_publish.clear();</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a31071aac7bfc7dfb7923f3376d78376b">SchedulePublishCompilationResults</a>(</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;            std::move(unpublished_code), <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;}</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160; </div>
<div class="line"><a name="l02159"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd"> 2159</a></span>&#160;std::unique_ptr&lt;CompilationUnitBuilder&gt; <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd">InitializeCompilation</a>(</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module,</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">CompilationStateImpl</a>* compilation_state =</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>());</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keyword">auto</span> builder = std::make_unique&lt;CompilationUnitBuilder&gt;(native_module);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  compilation_state-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a06926c1b78473627fab3d1409a0916c6">InitializeCompilationProgress</a>(pgo_info);</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">return</span> builder;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a3476387793c3e12b4a0f03900cad2c59"> 2169</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a3476387793c3e12b4a0f03900cad2c59">MayCompriseLazyFunctions</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                              <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features) {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(module)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">if</span> (enabled_features.has_compilation_hints()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="preprocessor">#ifdef ENABLE_SLOW_DCHECKS</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="keywordtype">int</span> start = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = start + module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index = start; func_index &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>; func_index++) {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="checks_8h.html#a8c8b326bb3d6944234eb74fbd0952061">SLOW_DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">GetCompileStrategy</a>(module, enabled_features, func_index,</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                                   <span class="keyword">false</span>) != CompileStrategy::kLazy);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;}</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html"> 2184</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html">CompilationTimeCallback</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationEventCallback.html">CompilationEventCallback</a> {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02186"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a7d80589fddf98d66aae180e9801840db"> 2186</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a7d80589fddf98d66aae180e9801840db">CompileMode</a> { <a class="code" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">kSynchronous</a>, <a class="code" href="namespacev8_1_1internal.html#a87c83cc0cb9799c767aaa72c71567680a9f2b960005d2a3a5f35ac32809d84db7">kAsync</a>, kStreaming };</div>
<div class="line"><a name="l02187"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aa13025a25432cc5ea96207517f8cd010"> 2187</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aa13025a25432cc5ea96207517f8cd010">CompilationTimeCallback</a>(</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      std::shared_ptr&lt;metrics::Recorder&gt; metrics_recorder,</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id,</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      std::weak_ptr&lt;NativeModule&gt; native_module, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a7d80589fddf98d66aae180e9801840db">CompileMode</a> compile_mode)</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      : start_time_(base::TimeTicks::Now()),</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        async_counters_(std::move(async_counters)),</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        metrics_recorder_(std::move(metrics_recorder)),</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        context_id_(context_id),</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        native_module_(std::move(native_module)),</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        compile_mode_(compile_mode) {}</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a49d0c01363fce57f1caf4a1b783fd2e4"> 2199</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a49d0c01363fce57f1caf4a1b783fd2e4">call</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29">CompilationEvent</a> compilation_event)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>());</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    std::shared_ptr&lt;NativeModule&gt; native_module = native_module_.lock();</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">if</span> (!native_module) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keyword">auto</span> now = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>();</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a> = now - start_time_;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keywordflow">if</span> (compilation_event == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>) {</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <span class="comment">// Reset {start_time_} to measure tier-up time.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      start_time_ = now;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="keywordflow">if</span> (compile_mode_ != <a class="code" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">kSynchronous</a>) {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        <a class="code" href="classv8_1_1internal_1_1TimedHistogram.html">TimedHistogram</a>* histogram =</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            compile_mode_ == <a class="code" href="namespacev8_1_1internal.html#a87c83cc0cb9799c767aaa72c71567680a9f2b960005d2a3a5f35ac32809d84db7">kAsync</a></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                ? async_counters_-&gt;wasm_async_compile_wasm_module_time()</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                : async_counters_-&gt;wasm_streaming_compile_wasm_module_time();</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        histogram-&gt;<a class="code" href="classv8_1_1internal_1_1Histogram.html#a1fa018dc2756acdc3a1bb4fdbe97ae86">AddSample</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds()));</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <a class="code" href="structv8_1_1metrics_1_1WasmModuleCompiled.html">v8::metrics::WasmModuleCompiled</a> <span class="keyword">event</span>{</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;          (compile_mode_ != <a class="code" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">kSynchronous</a>),         <span class="comment">// async</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;          (compile_mode_ == kStreaming),           <span class="comment">// streamed</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;          <span class="keyword">false</span>,                                   <span class="comment">// cached</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;          <span class="keyword">false</span>,                                   <span class="comment">// deserialized</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation,          <span class="comment">// lazy</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;          <span class="keyword">true</span>,                                    <span class="comment">// success</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;          native_module-&gt;liftoff_code_size(),      <span class="comment">// code_size_in_bytes</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;          native_module-&gt;liftoff_bailout_count(),  <span class="comment">// liftoff_bailout_count</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds()};              <span class="comment">// wall_clock_duration_in_us</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      metrics_recorder_-&gt;DelayMainThreadEvent(event, context_id_);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    }</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keywordflow">if</span> (compilation_event == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <a class="code" href="structv8_1_1metrics_1_1WasmModuleCompiled.html">v8::metrics::WasmModuleCompiled</a> <span class="keyword">event</span>{</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;          (compile_mode_ != <a class="code" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">kSynchronous</a>),         <span class="comment">// async</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;          (compile_mode_ == kStreaming),           <span class="comment">// streamed</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;          <span class="keyword">false</span>,                                   <span class="comment">// cached</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;          <span class="keyword">false</span>,                                   <span class="comment">// deserialized</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation,          <span class="comment">// lazy</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;          <span class="keyword">false</span>,                                   <span class="comment">// success</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;          native_module-&gt;liftoff_code_size(),      <span class="comment">// code_size_in_bytes</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;          native_module-&gt;liftoff_bailout_count(),  <span class="comment">// liftoff_bailout_count</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds()};              <span class="comment">// wall_clock_duration_in_us</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      metrics_recorder_-&gt;DelayMainThreadEvent(event, context_id_);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a35065633b2ee4e90df6849aa0af6ac56"> 2244</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1TimeTicks.html">base::TimeTicks</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a35065633b2ee4e90df6849aa0af6ac56">start_time_</a>;</div>
<div class="line"><a name="l02245"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ab0883f6665aae17c866c43ef0174452b"> 2245</a></span>&#160;  <span class="keyword">const</span> std::shared_ptr&lt;Counters&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ab0883f6665aae17c866c43ef0174452b">async_counters_</a>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aed48e04cfa05645b262cc3de7f46a1ca"> 2246</a></span>&#160;  std::shared_ptr&lt;metrics::Recorder&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aed48e04cfa05645b262cc3de7f46a1ca">metrics_recorder_</a>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a4b3c154dc5faec2d8c94b7d308e9fcf0"> 2247</a></span>&#160;  <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a4b3c154dc5faec2d8c94b7d308e9fcf0">context_id_</a>;</div>
<div class="line"><a name="l02248"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ae7a569046bdf76e1192e4eb9e6fdd049"> 2248</a></span>&#160;  std::weak_ptr&lt;NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ae7a569046bdf76e1192e4eb9e6fdd049">native_module_</a>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a65172f6971d9386fc1d608281bad330e"> 2249</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a7d80589fddf98d66aae180e9801840db">CompileMode</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a65172f6971d9386fc1d608281bad330e">compile_mode_</a>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;};</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa473ed0f84f04526df4a597b823e88d4"> 2252</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                            <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes,</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                            <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                            <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56">OnlyLazyFunctions</a> only_lazy_functions,</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                            <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>* detected_features) {</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>);</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="keywordflow">if</span> (only_lazy_functions &amp;&amp;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      !<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a3476387793c3e12b4a0f03900cad2c59">MayCompriseLazyFunctions</a>(module, enabled_features)) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160; </div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  std::function&lt;<a class="code" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>(<span class="keywordtype">int</span>)&gt; filter;  <span class="comment">// Initially empty for &quot;all functions&quot;.</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="keywordflow">if</span> (only_lazy_functions) {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_lazy_module = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(module);</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    filter = [module, enabled_features, is_lazy_module](<span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">CompileStrategy</a> strategy = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">GetCompileStrategy</a>(module, enabled_features,</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                                                    func_index, is_lazy_module);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <span class="keywordflow">return</span> strategy == CompileStrategy::kLazy ||</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;             strategy == CompileStrategy::kLazyBaselineEagerTopTier;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    };</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  }</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="comment">// Call {ValidateFunctions} in the module decoder.</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(module, enabled_features, wire_bytes, filter,</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                           detected_features);</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;}</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#abf3c0f77160227e1516427b01f7ee33f"> 2278</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>&amp; native_module,</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                            <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56">OnlyLazyFunctions</a> only_lazy_functions) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(native_module.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>(), native_module.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a957b590c391c9dc0949cdaff8c94cf05">wire_bytes</a>(),</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                        native_module.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">enabled_features</a>(), only_lazy_functions,</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                        &amp;detected_features);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.has_error()) {</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="comment">// This function is called before the NativeModule is finished; all detected</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="comment">// features will be published afterwards anyway, so ignore the return value</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="comment">// here.</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(native_module.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">compilation_state</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a3763475c99a36d50427d6c2b3f4e1d07">UpdateDetectedFeatures</a>(</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        detected_features));</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;}</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2f5e685f626460ac296f11ac3601234e"> 2295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2f5e685f626460ac296f11ac3601234e">CompileNativeModule</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                         <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id,</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                         <a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a>* thrower,</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                         std::shared_ptr&lt;NativeModule&gt; native_module,</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                         <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.jitless || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;module();</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="comment">// The callback captures a shared ptr to the semaphore.</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keyword">auto</span>* compilation_state = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(native_module-&gt;compilation_state());</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    compilation_state-&gt;AddCallback(std::make_unique&lt;CompilationTimeCallback&gt;(</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a0df8dc9e4eb119d45ed068d53277c709">async_counters</a>(), isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">metrics_recorder</a>(), context_id,</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        native_module, CompilationTimeCallback::kSynchronous));</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// Initialize the compilation units and kick off background compile tasks.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  std::unique_ptr&lt;CompilationUnitBuilder&gt; builder =</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd">InitializeCompilation</a>(isolate, native_module.get(), pgo_info);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  compilation_state-&gt;InitializeCompilationUnits(std::move(builder));</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="comment">// Validate wasm modules for lazy compilation if requested. Never validate</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="comment">// asm.js modules as these are valid by construction (additionally a CHECK</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="comment">// will catch this during lazy compilation).</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation &amp;&amp; module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!thrower-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a603a53d1ac3dddd81154744ff36db838">error</a>());</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> validation_error =</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(*native_module, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2">kOnlyLazyFunctions</a>)) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      thrower-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a2d32c2f4fadecb8c1434fa2998171e23">CompileFailed</a>(std::move(validation_error));</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keywordflow">if</span> (!compilation_state-&gt;failed()) {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    compilation_state-&gt;WaitForCompilationEvent(</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  }</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="keywordflow">if</span> (compilation_state-&gt;failed()) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(module), !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> validation_error =</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(*native_module, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a34502fb9b3ecabea840b4c0f1b19ee6b">kAllFunctions</a>);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(validation_error.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a814cbe82c25f67faffa1de4801d10574">has_error</a>());</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    thrower-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a2d32c2f4fadecb8c1434fa2998171e23">CompileFailed</a>(std::move(validation_error));</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;}</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html"> 2342</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html">BackgroundCompileJob</a> final : <span class="keyword">public</span> <a class="code" href="classv8_1_1JobTask.html">JobTask</a> {</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02344"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a42b4c8645b78dd64059a39acdac14c84"> 2344</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a42b4c8645b78dd64059a39acdac14c84">BackgroundCompileJob</a>(std::weak_ptr&lt;NativeModule&gt; native_module,</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                                std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                                <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      : native_module_(std::move(native_module)),</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        engine_barrier_(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;GetBarrierForBackgroundCompile()),</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        async_counters_(std::move(async_counters)),</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        tier_(<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {}</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a645ec0872363deee2a6c484e016f1956"> 2352</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a645ec0872363deee2a6c484e016f1956">Run</a>(<a class="code" href="classv8_1_1JobDelegate.html">JobDelegate</a>* delegate)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keyword">auto</span> engine_scope = engine_barrier_-&gt;TryLock();</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span> (!engine_scope) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a168d82deb0d259820bfa9d1edff28451">ExecuteCompilationUnits</a>(native_module_, async_counters_.get(), delegate,</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                            tier_);</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  }</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#aee498329e8088312de8e436970979446"> 2359</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#aee498329e8088312de8e436970979446">GetMaxConcurrency</a>(<span class="keywordtype">size_t</span> worker_count)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">BackgroundCompileScope</a> compile_scope(native_module_);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">if</span> (compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a583e2f2b2299476e7f9c3e98f3386355">cancelled</a>()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordtype">size_t</span> flag_limit = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        std::max(1, <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_num_compilation_tasks.value()));</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="comment">// NumOutstandingCompilations() does not reflect the units that running</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">// workers are processing, thus add the current worker count to that number.</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">return</span> std::min(flag_limit,</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                    worker_count + compile_scope.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">compilation_state</a>()</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                                       -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#acbf680841025a81ae543c133173e87a2">NumOutstandingCompilations</a>(tier_));</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02372"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a3c1c31f0ac239247c46ca8dc3fad14d7"> 2372</a></span>&#160;  std::weak_ptr&lt;NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a3c1c31f0ac239247c46ca8dc3fad14d7">native_module_</a>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a71e8a577baee57287702011e32eec6f4"> 2373</a></span>&#160;  std::shared_ptr&lt;OperationsBarrier&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a71e8a577baee57287702011e32eec6f4">engine_barrier_</a>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a78a9b9e95cb12abe581382bcef9a8ff3"> 2374</a></span>&#160;  <span class="keyword">const</span> std::shared_ptr&lt;Counters&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a78a9b9e95cb12abe581382bcef9a8ff3">async_counters_</a>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a75aa84849d5214c12c878bd006d44729"> 2375</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a75aa84849d5214c12c878bd006d44729">tier_</a>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;};</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a8da49e53852594df7dc1de3853ee4aed"> 2378</a></span>&#160;std::shared_ptr&lt;NativeModule&gt; <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a8da49e53852594df7dc1de3853ee4aed">GetOrCompileNewNativeModule</a>(</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features, <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports,</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a>* thrower, std::shared_ptr&lt;const WasmModule&gt; module,</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> wire_bytes, <span class="keywordtype">int</span> compilation_id,</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id, <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module =</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a26391b903e117ed93787d080f0bc2fe4">MaybeGetNativeModule</a>(</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;          module-&gt;origin, wire_bytes.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a92493de71e39144915ee01fb717e1891">as_vector</a>(), compile_imports, isolate);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <span class="keywordflow">if</span> (native_module) <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="comment">// Otherwise compile a new NativeModule.</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  std::optional&lt;TimedHistogramScope&gt; wasm_compile_module_time_scope;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    wasm_compile_module_time_scope.emplace(<a class="code" href="wasm-module_8h.html#a97da966b01775707b360f5ace2370c0e">SELECT_WASM_COUNTER</a>(</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>(), module-&gt;origin, wasm_compile, module_time));</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordtype">size_t</span> code_size_estimate =</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a>(module.get());</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  native_module = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac7a8ec2f950e76dfa9e2ec483c15a372">NewNativeModule</a>(</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      isolate, enabled_features, detected_features, std::move(compile_imports),</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      module, code_size_estimate);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  native_module-&gt;SetWireBytes(std::move(wire_bytes));</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  native_module-&gt;compilation_state()-&gt;set_compilation_id(compilation_id);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160; </div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="comment">// Compile / validate the new module.</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2f5e685f626460ac296f11ac3601234e">CompileNativeModule</a>(isolate, context_id, thrower, native_module, pgo_info);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  }</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="keywordflow">if</span> (thrower-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a603a53d1ac3dddd81154744ff36db838">error</a>()) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a>(<span class="keyword">true</span>, std::move(native_module),</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                                             isolate);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="comment">// Finally, put the new module in the cache; this can return the passed</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="comment">// NativeModule pointer, or another one (for a previously cached module).</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a>(<span class="keyword">false</span>, native_module,</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                                                  isolate);</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;}</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160; </div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46"> 2423</a></span>&#160;std::shared_ptr&lt;NativeModule&gt; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46">CompileToNativeModule</a>(</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features, <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports,</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a>* thrower, std::shared_ptr&lt;const WasmModule&gt; module,</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> wire_bytes, <span class="keywordtype">int</span> compilation_id,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id, <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a8da49e53852594df7dc1de3853ee4aed">GetOrCompileNewNativeModule</a>(</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      isolate, enabled_features, detected_features, std::move(compile_imports),</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      thrower, module, std::move(wire_bytes), compilation_id, context_id,</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      pgo_info);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="keywordflow">if</span> (!native_module) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="comment">// Ensure that the code objects are logged before returning.</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a80a2af861380fd22a236025164b81737">LogOutstandingCodesForIsolate</a>(isolate);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160; </div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <span class="comment">// Now publish all detected features of this module in the current isolate.</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae7a6dc8061ff4f4860d0efa2cca75d9d">PublishDetectedFeatures</a>(</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      native_module-&gt;compilation_state()-&gt;detected_features(), isolate, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;}</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3404727e5cda0afe92bc8c4d08fa0454"> 2445</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3404727e5cda0afe92bc8c4d08fa0454">AsyncCompileJob::AsyncCompileJob</a>(</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> bytes,</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Context&gt;</a> context,</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;NativeContext&gt;</a> incumbent_context, <span class="keyword">const</span> <span class="keywordtype">char</span>* api_method_name,</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    std::shared_ptr&lt;CompilationResultResolver&gt; resolver, <span class="keywordtype">int</span> compilation_id)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    : isolate_(isolate),</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      api_method_name_(api_method_name),</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;      enabled_features_(enabled_features),</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      compile_imports_(std::move(compile_imports)),</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      start_time_(base::TimeTicks::Now()),</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      bytes_copy_(std::move(bytes)),</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      wire_bytes_(bytes_copy_.as_vector()),</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      resolver_(std::move(resolver)),</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      compilation_id_(compilation_id) {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;               <span class="stringliteral">&quot;wasm.AsyncCompileJob&quot;</span>);</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_async_compilation);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.jitless || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <a class="code" href="classv8_1_1Isolate.html">v8::Isolate</a>* v8_isolate = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1Isolate.html">v8::Isolate</a>*<span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <a class="code" href="classv8_1_1Platform.html">v8::Platform</a>* platform = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>();</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a60c83d8ce32a32ad052ad7a308c64d6c">foreground_task_runner_</a> = platform-&gt;<a class="code" href="classv8_1_1Platform.html#a098c125aa524aa3f3cde02dd158a143e">GetForegroundTaskRunner</a>(v8_isolate);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a> =</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">Create</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64c8723a0d7cccf91835c2b97b5b3809">context</a>-&gt;native_context());</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4dff42fd647b975ce6708820a34fffe2">incumbent_context_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">Create</a>(*incumbent_context);</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsNativeContext(*<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>));</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5d62877a0c3d97edb19bcefa2e452c57">context_id_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a567b8009b9aee748292ab4b1dffdc176">GetOrRegisterRecorderContextId</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a1ab324a8f990e43dc13988c126633619">async</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;}</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0a4a22d3cbec712dad3fe9a6c3846106"> 2475</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0a4a22d3cbec712dad3fe9a6c3846106">AsyncCompileJob::Start</a>() {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  DoAsync&lt;DecodeModule&gt;(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>(),</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">metrics_recorder</a>());  <span class="comment">// --</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;}</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160; </div>
<div class="line"><a name="l02480"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1969624508b5f667f28f0bb9ff9dfb1a"> 2480</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1969624508b5f667f28f0bb9ff9dfb1a">AsyncCompileJob::Abort</a>() {</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="comment">// Removing this job will trigger the destructor, which will cancel all</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="comment">// compilation.</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8378f5ecdd236147a0b3c590c12899b8">RemoveCompileJob</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;}</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="comment">// {ValidateFunctionsStreamingJobData} holds information that is shared between</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="comment">// the {AsyncStreamingProcessor} and the {ValidateFunctionsStreamingJob}. It</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="comment">// lives in the {AsyncStreamingProcessor} and is updated from both classes.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html"> 2489</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html">ValidateFunctionsStreamingJobData</a> {</div>
<div class="line"><a name="l02490"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html"> 2490</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a> {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="comment">// {func_index == -1} represents an &quot;invalid&quot; unit.</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#aee8a6605ef805e75bf5ee61c0f638e7d"> 2492</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#aee8a6605ef805e75bf5ee61c0f638e7d">func_index</a> = -1;</div>
<div class="line"><a name="l02493"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#a1aa9923e94571d28a762b1a20f6c753b"> 2493</a></span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#a1aa9923e94571d28a762b1a20f6c753b">code</a>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160; </div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="comment">// Check whether the unit is valid.</span></div>
<div class="line"><a name="l02496"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#a77e3afe5124de9bc592adbf75febd316"> 2496</a></span>&#160;    <span class="keyword">operator</span> <a class="code" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(-1, <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#aee8a6605ef805e75bf5ee61c0f638e7d">func_index</a>);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#aee8a6605ef805e75bf5ee61c0f638e7d">func_index</a> &gt;= 0;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    }</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  };</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a30537e9b0e0f4d0160b17f97f2ceed43"> 2502</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a30537e9b0e0f4d0160b17f97f2ceed43">Initialize</a>(<span class="keywordtype">int</span> num_declared_functions) {</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a> = <a class="code" href="classv8_1_1base_1_1OwnedVector.html#af4f3e4cad212e5321ef9d3cb31009fe8">base::OwnedVector&lt;Unit&gt;::NewForOverwrite</a>(num_declared_functions);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="comment">// Initially {next == end}.</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>.store(<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>.begin(), std::memory_order_relaxed);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>.store(<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>.begin(), std::memory_order_relaxed);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  }</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aea4d7941a772b26e34a901b0e3dad6c9"> 2510</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aea4d7941a772b26e34a901b0e3dad6c9">AddUnit</a>(<span class="keywordtype">int</span> declared_func_index, <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>,</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;               <a class="code" href="classv8_1_1JobHandle.html">JobHandle</a>* job_handle) {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="comment">// Write new unit to {*end}, then increment {end}. There is only one thread</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="comment">// adding new units, so no further synchronization needed.</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a>* ptr = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="comment">// Check invariant: {next &lt;= end}.</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>.load(std::memory_order_relaxed), ptr);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    *ptr++ = {declared_func_index, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>};</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <span class="comment">// Use release semantics, so whoever loads this pointer (using acquire</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="comment">// semantics) sees all our previous stores.</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>.store(ptr, std::memory_order_release);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <span class="keywordtype">size_t</span> total_units_added = ptr - <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>.begin();</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <span class="comment">// Periodically notify concurrency increase. This has overhead, so avoid</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="comment">// calling it too often. As long as threads are still running they will</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="comment">// continue processing new units anyway, and if background threads validate</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">// faster than we can add units, then only notifying after increasingly long</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="comment">// delays is the right thing to do to avoid too many small validation tasks.</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="comment">// We notify on each power of two after 16 units, and every 16k units (just</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="comment">// to have *some* upper limit and avoiding to pile up too many units).</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="comment">// Additionally, notify after receiving the last unit of the module.</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keywordflow">if</span> ((total_units_added &gt;= 16 &amp;&amp;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;         <a class="code" href="namespacev8_1_1base_1_1bits.html#af9eb752b538fa8a66badab8f26e0e000">base::bits::IsPowerOfTwo</a>(total_units_added)) ||</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        (total_units_added % (16 * 1024)) == 0 || ptr == <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>.end()) {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      job_handle-&gt;<a class="code" href="classv8_1_1JobHandle.html#a3c6d3e309521026696e24f36438520a5">NotifyConcurrencyIncrease</a>();</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    }</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  }</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160; </div>
<div class="line"><a name="l02538"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a82498d65506cdd9a96e15cbc43061da0"> 2538</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a82498d65506cdd9a96e15cbc43061da0">NumOutstandingUnits</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a>* next = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a>* <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(next, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> - next;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="comment">// Retrieve one unit to validate; returns an &quot;invalid&quot; unit if nothing is in</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="comment">// the queue.</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aa3640734bcf13379124fb8a689e3865f"> 2547</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aa3640734bcf13379124fb8a689e3865f">GetUnit</a>() {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="comment">// Use an acquire load to synchronize with the store in {AddUnit}. All units</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="comment">// before this {end} are fully initialized and ready to execute.</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a>* <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>.load(std::memory_order_acquire);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">Unit</a>* next = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">while</span> (next &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>) {</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>.compare_exchange_weak(</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;              next, next + 1, std::memory_order_relaxed)) {</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">return</span> *next;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <span class="comment">// Otherwise retry with updated {next} pointer.</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  }</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160; </div>
<div class="line"><a name="l02562"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a5552012797ffa8222c56b7b65fcc4c45"> 2562</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a5552012797ffa8222c56b7b65fcc4c45">UpdateDetectedFeatures</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> new_detected_features) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> old_features =</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985">detected_features</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985">detected_features</a>.compare_exchange_weak(</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        old_features, old_features | new_detected_features,</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        std::memory_order_relaxed)) {</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <span class="comment">// Retry with updated {old_features}.</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160; </div>
<div class="line"><a name="l02572"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92"> 2572</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;Unit&gt;</a> <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">units</a>;</div>
<div class="line"><a name="l02573"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705"> 2573</a></span>&#160;  std::atomic&lt;Unit*&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">next_available_unit</a>;</div>
<div class="line"><a name="l02574"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc"> 2574</a></span>&#160;  std::atomic&lt;Unit*&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">end_of_available_units</a>;</div>
<div class="line"><a name="l02575"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a9cfdfc887c8e71d8e6f5e70352b372c2"> 2575</a></span>&#160;  std::atomic&lt;bool&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a9cfdfc887c8e71d8e6f5e70352b372c2">found_error</a>{<span class="keyword">false</span>};</div>
<div class="line"><a name="l02576"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985"> 2576</a></span>&#160;  std::atomic&lt;WasmDetectedFeatures&gt; <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985">detected_features</a>;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;};</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html"> 2579</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html">ValidateFunctionsStreamingJob</a> final : <span class="keyword">public</span> <a class="code" href="classv8_1_1JobTask.html">JobTask</a> {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02581"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aaa06eba946895bf88516bb729e8c732f"> 2581</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aaa06eba946895bf88516bb729e8c732f">ValidateFunctionsStreamingJob</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                                <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html">ValidateFunctionsStreamingJobData</a>* data)</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac6923ee5bb39b2a4b6475d72e8db7183">module_</a>(module), <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a595f738885e4ddc54dfbee0facb094d6">enabled_features_</a>(enabled_features), <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>(data) {}</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160; </div>
<div class="line"><a name="l02586"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a5d40c7e666a805a418e6d6d3d7c8d8ee"> 2586</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a5d40c7e666a805a418e6d6d3d7c8d8ee">Run</a>(<a class="code" href="classv8_1_1JobDelegate.html">JobDelegate</a>* delegate)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.ValidateFunctionsStreaming&quot;</span>);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02js-duration-format_8cc_03.html#a92a126cff80447cdefea20ae7d212120">Unit</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02js-duration-format_8cc_03.html#a92a126cff80447cdefea20ae7d212120">ValidateFunctionsStreamingJobData::Unit</a>;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Zone.html">Zone</a> validation_zone{<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a92bf3bf6d5ba9b15735d9ae1a3643817">allocator</a>(), <a class="code" href="zone_8h.html#a6b1fd0a126df3f1b788cee19d9cce66e">ZONE_NAME</a>};</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02js-duration-format_8cc_03.html#a92a126cff80447cdefea20ae7d212120">Unit</a> unit = <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aa3640734bcf13379124fb8a689e3865f">GetUnit</a>()) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      validation_zone.Reset();</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">DecodeResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a6eeacc59bea21e7cec9649abc2c0d555">ValidateSingleFunction</a>(</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;          &amp;validation_zone, <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac6923ee5bb39b2a4b6475d72e8db7183">module_</a>, unit.func_index, unit.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#abee9ee3ec87853b99da8df1432ce7f4d">code</a>,</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a595f738885e4ddc54dfbee0facb094d6">enabled_features_</a>, &amp;detected_features);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160; </div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a9cfdfc887c8e71d8e6f5e70352b372c2">found_error</a>.store(<span class="keyword">true</span>, std::memory_order_relaxed);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      }</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="comment">// After validating one function, check if we should yield.</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      <span class="keywordflow">if</span> (delegate-&gt;<a class="code" href="classv8_1_1JobDelegate.html#a7180a73d20fc8a240c742163001d8b3a">ShouldYield</a>()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a5552012797ffa8222c56b7b65fcc4c45">UpdateDetectedFeatures</a>(detected_features);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac9bebc6c772148aee5f452ca0aea569a"> 2608</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac9bebc6c772148aee5f452ca0aea569a">GetMaxConcurrency</a>(<span class="keywordtype">size_t</span> worker_count)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="keywordflow">return</span> worker_count + <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a82498d65506cdd9a96e15cbc43061da0">NumOutstandingUnits</a>();</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160; </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02613"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac6923ee5bb39b2a4b6475d72e8db7183"> 2613</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac6923ee5bb39b2a4b6475d72e8db7183">module_</a>;</div>
<div class="line"><a name="l02614"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a595f738885e4ddc54dfbee0facb094d6"> 2614</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a595f738885e4ddc54dfbee0facb094d6">enabled_features_</a>;</div>
<div class="line"><a name="l02615"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310"> 2615</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html">ValidateFunctionsStreamingJobData</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">data_</a>;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;};</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html"> 2618</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html">AsyncStreamingProcessor</a> final : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1StreamingProcessor.html">StreamingProcessor</a> {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a9da068ebd21214867da972e51689bee5">AsyncStreamingProcessor</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aee9a0b6fb579488ab89cc95ea9e6caef">ProcessModuleHeader</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160; </div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aac7514bd78200ea2d33761023d266de4">ProcessSection</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693b">SectionCode</a> section_code,</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                      <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes,</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                      uint32_t offset) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a707cf5b73e892c3ddd7b74cef826c429">ProcessCodeSectionHeader</a>(<span class="keywordtype">int</span> num_functions,</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                                uint32_t functions_mismatch_error_offset,</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                                std::shared_ptr&lt;WireBytesStorage&gt;,</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                                <span class="keywordtype">int</span> code_section_start,</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                                <span class="keywordtype">int</span> code_section_length) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160; </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aa26940dbb1434275daab70cdf12e8326">ProcessFunctionBody</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes,</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                           uint32_t offset) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a19842d57ed6e47f88fc3ccb57cd43619">OnFinishedChunk</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160; </div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a1299b61f757fe2cfa5ec698e755650e0">OnFinishedStream</a>(<a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> bytes,</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                        <span class="keywordtype">bool</span> after_error) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160; </div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a807224ecf5ba4eaf8434dea9b99a78a8">OnAbort</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac33024dbe8bff894aec911642a350dc6">Deserialize</a>(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes,</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                   <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> module_bytes) <span class="keyword">override</span>;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065">CommitCompilationUnits</a>();</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529"> 2650</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html">ModuleDecoder</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>;</div>
<div class="line"><a name="l02651"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240"> 2651</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>;</div>
<div class="line"><a name="l02652"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3"> 2652</a></span>&#160;  std::unique_ptr&lt;CompilationUnitBuilder&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3"> 2653</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a> = 0;</div>
<div class="line"><a name="l02654"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617"> 2654</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617">prefix_cache_hit_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02655"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a41aab3efc6dfb1d49db122d8d43176f6"> 2655</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a41aab3efc6dfb1d49db122d8d43176f6">before_code_section_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02656"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1"> 2656</a></span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html">ValidateFunctionsStreamingJobData</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>;</div>
<div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908"> 2657</a></span>&#160;  std::unique_ptr&lt;JobHandle&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160; </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <span class="comment">// {prefix_hasher_} computes a running hash of the wire bytes up to code</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="comment">// section size, but excludes the code section itself. Used by the</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <span class="comment">// {NativeModuleCache} to detect potential duplicate modules.</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f"> 2662</a></span>&#160;  <a class="code" href="classv8_1_1base_1_1Hasher.html">base::Hasher</a> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;};</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160; </div>
<div class="line"><a name="l02665"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5323277e186f3ae7566581ed5e08e518"> 2665</a></span>&#160;std::shared_ptr&lt;StreamingDecoder&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5323277e186f3ae7566581ed5e08e518">AsyncCompileJob::CreateStreamingDecoder</a>() {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>);</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html#a64bbde97cda65ad78a00333670c8fb05">StreamingDecoder::CreateAsyncStreamingDecoder</a>(</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      std::make_unique&lt;AsyncStreamingProcessor&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;}</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160; </div>
<div class="line"><a name="l02672"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a9b511b12a269d1a9e7e8b50cfdce26a9"> 2672</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a9b511b12a269d1a9e7e8b50cfdce26a9">AsyncCompileJob::~AsyncCompileJob</a>() {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="comment">// Note: This destructor always runs on the foreground thread of the isolate.</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a32567b0fa26ffcea6e894c54e5bbbc94">background_task_manager_</a>.<a class="code" href="classv8_1_1internal_1_1CancelableTaskManager.html#a3c90c3d841ccd5255387b37fcfbc03c0">CancelAndWait</a>();</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  <span class="comment">// If initial compilation did not finish yet we can abort it.</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>) {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state())</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8">CancelCompilation</a>(CompilationStateImpl::kCancelInitialCompilation);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  <span class="comment">// Tell the streaming decoder that the AsyncCompileJob is not available</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  <span class="comment">// anymore.</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>) <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>-&gt;NotifyCompilationDiscarded();</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#aa84200caacc713311e166e63a9b3759f">CancelPendingForegroundTask</a>();</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a1a31391c097b88af06b7e0cf673bcf00">Destroy</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>.location());</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a1a31391c097b88af06b7e0cf673bcf00">Destroy</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4dff42fd647b975ce6708820a34fffe2">incumbent_context_</a>.location());</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>.is_null()) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a1a31391c097b88af06b7e0cf673bcf00">Destroy</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>.location());</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  }</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;}</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160; </div>
<div class="line"><a name="l02691"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adef95f093ae1dc1da035c1ec5d338c23"> 2691</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adef95f093ae1dc1da035c1ec5d338c23">AsyncCompileJob::CreateNativeModule</a>(</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    std::shared_ptr&lt;const WasmModule&gt; module, <span class="keywordtype">size_t</span> code_size_estimate) {</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="comment">// Embedder usage count for declared shared memories.</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> has_shared_memory =</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a0e542246e39cb25a93193a080e0e1148">std::any_of</a>(module-&gt;memories.begin(), module-&gt;memories.end(),</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                  [](<span class="keyword">auto</span>&amp; memory) { return memory.is_shared; });</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="keywordflow">if</span> (has_shared_memory) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2fbd063d0fbd9a69e5e5adebceefddf1">CountUsage</a>(v8::Isolate::UseCounterFeature::kWasmSharedMemory);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  <span class="comment">// Create the module object and populate with compiled functions and</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  <span class="comment">// information needed at instantiation time.</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac7a8ec2f950e76dfa9e2ec483c15a372">NewNativeModule</a>(</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>,</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;      std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>), std::move(module), code_size_estimate);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;SetWireBytes(std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9267b6a79f50110f5e4a79b38d0678d">bytes_copy_</a>));</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state()-&gt;set_compilation_id(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ac48b6808fbb2e4a304b8bfb011ba8988">compilation_id_</a>);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;}</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160; </div>
<div class="line"><a name="l02711"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad155f15fbc01d3537cbaf00b74c2f382"> 2711</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad155f15fbc01d3537cbaf00b74c2f382">AsyncCompileJob::GetOrCreateNativeModule</a>(</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    std::shared_ptr&lt;const WasmModule&gt; module, <span class="keywordtype">size_t</span> code_size_estimate) {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a26391b903e117ed93787d080f0bc2fe4">MaybeGetNativeModule</a>(</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      module-&gt;origin, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adef95f093ae1dc1da035c1ec5d338c23">CreateNativeModule</a>(std::move(module), code_size_estimate);</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  }</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;}</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160; </div>
<div class="line"><a name="l02722"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9af46f338ef59099371aabe35332e84"> 2722</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9af46f338ef59099371aabe35332e84">AsyncCompileJob::PrepareRuntimeObjects</a>() {</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <span class="comment">// Create heap objects for script and module bytes to be stored in the</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <span class="comment">// module object. Asm.js is not compiled asynchronously.</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>.is_null());</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="keyword">auto</span> source_url =</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a> ? <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>-&gt;url()) : <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const char&gt;</a>();</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a> =</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">GetOrCreateScript</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>, source_url);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object =</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">WasmModuleObject::New</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>, <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160; </div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">Create</a>(*module_object);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;}</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160; </div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment">// This function assumes that it is executed in a HandleScope, and that a</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment">// context is set on the isolate.</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1"> 2738</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">AsyncCompileJob::FinishCompile</a>(<span class="keywordtype">bool</span> is_after_cache_hit) {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;               <span class="stringliteral">&quot;wasm.FinishAsyncCompile&quot;</span>);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>) {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>-&gt;NotifyNativeModuleCreated(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>);</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;module();</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="keyword">auto</span> compilation_state = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state());</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160; </div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="comment">// Update the compilation state with feature detected during module decoding</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  <span class="comment">// and (potentially) validation. We will publish all features below, in the</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <span class="comment">// current isolate, so ignore the return value here.</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(compilation_state-&gt;UpdateDetectedFeatures(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>));</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <span class="comment">// If experimental PGO via files is enabled, load profile information now that</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <span class="comment">// we have all wire bytes and know that the module is valid.</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_pgo_from_file)) {</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    std::unique_ptr&lt;ProfileInformation&gt; pgo_info =</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca357743e710fa56c5fabec8b006584e">LoadProfileFromFile</a>(module, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;wire_bytes());</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="keywordflow">if</span> (pgo_info) {</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      compilation_state-&gt;ApplyPgoInfoLate(pgo_info.get());</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    }</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160; </div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="keywordtype">bool</span> is_after_deserialization = !<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>.is_null();</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <span class="keywordflow">if</span> (!is_after_deserialization) {</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9af46f338ef59099371aabe35332e84">PrepareRuntimeObjects</a>();</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  }</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <span class="comment">// Measure duration of baseline compilation or deserialization from cache.</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <a class="code" href="classv8_1_1base_1_1TimeDelta.html">base::TimeDelta</a> <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a> = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>() - <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab632923d90b8ad7e8d6b3bbb8e985a7f">start_time_</a>;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordtype">int</span> duration_usecs = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds());</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>()-&gt;wasm_streaming_finish_wasm_module_time()-&gt;AddSample(</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        duration_usecs);</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="keywordflow">if</span> (is_after_cache_hit || is_after_deserialization) {</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <a class="code" href="structv8_1_1metrics_1_1WasmModuleCompiled.html">v8::metrics::WasmModuleCompiled</a> <span class="keyword">event</span>{</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;          <span class="keyword">true</span>,                                     <span class="comment">// async</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;          <span class="keyword">true</span>,                                     <span class="comment">// streamed</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;          is_after_cache_hit,                       <span class="comment">// cached</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;          is_after_deserialization,                 <span class="comment">// deserialized</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation,           <span class="comment">// lazy</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;          !compilation_state-&gt;failed(),             <span class="comment">// success</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;turbofan_code_size(),     <span class="comment">// code_size_in_bytes</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;liftoff_bailout_count(),  <span class="comment">// liftoff_bailout_count</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds()};               <span class="comment">// wall_clock_duration_in_us</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">metrics_recorder</a>()-&gt;DelayMainThreadEvent(event, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5d62877a0c3d97edb19bcefa2e452c57">context_id_</a>);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  }</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a4a9708684698eb5d1032bedb9fd49d21">context</a>().is_null());</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="comment">// Finish the wasm script now and make it public to the debugger.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Script&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>-&gt;script(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <span class="keyword">auto</span> sourcemap_symbol =</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a29343a7352161e7534f33ef4620338b3">debug_symbols</a>[WasmDebugSymbols::Type::SourceMap];</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>-&gt;type() == Script::Type::kWasm &amp;&amp;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;      sourcemap_symbol.type != <a class="code" href="namespacev8.html#a05f25f935e108a1ea2d150e274602b87a7ab4d58719c33b3ea2dfaefa29b111df">WasmDebugSymbols::Type::None</a> &amp;&amp;</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;      !sourcemap_symbol.external_url.is_empty()) {</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">ModuleWireBytes</a> wire_bytes(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;wire_bytes());</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;String&gt;</a> src_map_str =</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a770976a9ab8638f5c4a009dc3701a7e1">NewStringFromUtf8</a>(</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            wire_bytes.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">GetNameOrNull</a>(sourcemap_symbol.external_url),</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>-&gt;set_source_mapping_url(*src_map_str.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#af9f9ca9032aa4f380d7bab01754f5903">ToHandleChecked</a>());</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                 <span class="stringliteral">&quot;wasm.Debug.OnAfterCompile&quot;</span>);</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#add58aa2cf5e62000c95ea11411ce9ae6">debug</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Debug.html#ab727677cfc3df584b90bfdcd5328c727">OnAfterCompile</a>(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  }</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160; </div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="comment">// Publish the detected features in this isolate, once initial compilation</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">// is done. Validate should have detected all features, unless lazy validation</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="comment">// is enabled.</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae7a6dc8061ff4f4860d0efa2cca75d9d">PublishDetectedFeatures</a>(compilation_state-&gt;detected_features(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>,</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                          <span class="keyword">true</span>);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160; </div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="comment">// We might need debug code for the module, if the debugger was enabled while</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="comment">// streaming compilation was running. Since handling this while compiling via</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <span class="comment">// streaming is tricky, we just remove all code which may have been generated,</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="comment">// and compile debug code lazily.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;IsInDebugState()) {</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> ref_scope;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">NativeModule::RemoveFilter::kRemoveNonDebugCode</a>);</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  }</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160; </div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="comment">// Finally, log all generated code (it does not matter if this happens</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="comment">// repeatedly in case the script is shared).</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;LogWasmCodes(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>-&gt;script());</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160; </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a80e0dfd6274908a644fcc877c72607a9">FinishSuccessfully</a>();</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;}</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160; </div>
<div class="line"><a name="l02833"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48"> 2833</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">AsyncCompileJob::Failed</a>() {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <span class="comment">// {job} keeps the {this} pointer alive.</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  std::unique_ptr&lt;AsyncCompileJob&gt; job =</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8378f5ecdd236147a0b3c590c12899b8">RemoveCompileJob</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// Revalidate the whole module to produce a deterministic error message.</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  constexpr <span class="keywordtype">bool</span> kValidate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> unused_detected_features;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">ModuleResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), kValidate,</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                       <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>, &amp;unused_detected_features);</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> thrower(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a04c750e47b50446d0e7b808014cd1adc">api_method_name_</a>);</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    thrower.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a2d32c2f4fadecb8c1434fa2998171e23">CompileFailed</a>(std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>).error());</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="comment">// The only possible reason why {result} might be okay is if the failure</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="comment">// was due to compile-time imports checking.</span></div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!job-&gt;compile_imports_.empty());</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.value().get(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), job-&gt;compile_imports_,</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        &amp;unused_detected_features);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(error.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a814cbe82c25f67faffa1de4801d10574">has_error</a>());</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    thrower.CompileError(<span class="stringliteral">&quot;%s&quot;</span>, error.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a6ab171a87cb8a37f65415bbf06555362">message</a>().c_str());</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4025ea6ad5b7cac05d76451054ae6829">resolver_</a>-&gt;OnCompilationFailed(thrower.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a4c6a67e2810545c4207da98f29137b62">Reify</a>());</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;}</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html"> 2860</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html">AsyncCompileJob::CompilationStateCallback</a></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CompilationEventCallback.html">CompilationEventCallback</a> {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02863"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78a39f3673bf5ded7f231a9201b16fa0"> 2863</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78a39f3673bf5ded7f231a9201b16fa0">CompilationStateCallback</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job) : <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>(job) {}</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#af03a6f2a5c03d334ec0a8337e73b1da3"> 2865</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#af03a6f2a5c03d334ec0a8337e73b1da3">call</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29">CompilationEvent</a> event)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="comment">// This callback is only being called from a foreground task.</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordflow">switch</span> (event) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>:</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!last_event_.has_value());</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0f21c0af12e028ae3c120b03fbe2c835">DecrementAndCheckFinisherCount</a>()) {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;          <span class="comment">// Install the native module in the cache, or reuse a conflicting one.</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;          <span class="comment">// If we get a conflicting module, wait until we are back in the</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;          <span class="comment">// main thread to update {job_-&gt;native_module_} to avoid a data race.</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;          std::shared_ptr&lt;NativeModule&gt; cached_native_module =</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;              <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a>(</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                  <span class="keyword">false</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;          <span class="keywordflow">if</span> (cached_native_module == <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>) {</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;            <span class="comment">// There was no cached module.</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            cached_native_module = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;          }</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">DoSync</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html">FinishCompilation</a>&gt;(std::move(cached_native_module));</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        }</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a>:</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a> == last_event_ ||</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;               <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a> == last_event_);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>:</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!last_event_.has_value());</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0f21c0af12e028ae3c120b03fbe2c835">DecrementAndCheckFinisherCount</a>()) {</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;          <span class="comment">// Don&#39;t update {job_-&gt;native_module_} to avoid data races with other</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;          <span class="comment">// compilation threads. Use a copy of the shared pointer instead.</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a>(<span class="keyword">true</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>,</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                                                   <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">DoSync</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html">Fail</a>&gt;();</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        }</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    }</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    last_event_ = event;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  }</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160; </div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02905"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749"> 2905</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">job_</a>;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <span class="comment">// This will be modified by different threads, but they externally</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="comment">// synchronize, so no explicit synchronization (currently) needed here.</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  std::optional&lt;CompilationEvent&gt; last_event_;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;};</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160; </div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment">// A closure to run a compilation step (either as foreground or background</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment">// task) and schedule the next step(s), if any.</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html"> 2915</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">AsyncCompileJob::CompileStep</a> {</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02917"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a0069e90545f2e9dfecaf6c3bb149e172"> 2917</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a0069e90545f2e9dfecaf6c3bb149e172">~CompileStep</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160; </div>
<div class="line"><a name="l02919"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#abfcaead40f2f15dbf84cee35a2f02623"> 2919</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#abfcaead40f2f15dbf84cee35a2f02623">Run</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job, <span class="keywordtype">bool</span> on_foreground) {</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> (on_foreground) {</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <a class="code" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> scope(job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <a class="code" href="classv8_1_1internal_1_1SaveAndSwitchContext.html">SaveAndSwitchContext</a> saved_context(job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, *job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>);</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#ad5029dd7594af476720c9304999a85bf">RunInForeground</a>(job);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a97ba94766f9dd48e4c3f3685904eff16">RunInBackground</a>(job);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    }</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#ad5029dd7594af476720c9304999a85bf"> 2929</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#ad5029dd7594af476720c9304999a85bf">RunInForeground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>*) { <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>(); }</div>
<div class="line"><a name="l02930"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a97ba94766f9dd48e4c3f3685904eff16"> 2930</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a97ba94766f9dd48e4c3f3685904eff16">RunInBackground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>*) { <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>(); }</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;};</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160; </div>
<div class="line"><a name="l02933"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html"> 2933</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html">AsyncCompileJob::CompileTask</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1CancelableTask.html">CancelableTask</a> {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l02935"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ab9b5e4559ae086d12357cb0349cc18b4"> 2935</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ab9b5e4559ae086d12357cb0349cc18b4">CompileTask</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job, <span class="keywordtype">bool</span> on_foreground)</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      <span class="comment">// We only manage the background tasks with the {CancelableTaskManager} of</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="comment">// the {AsyncCompileJob}. Foreground tasks are managed by the system&#39;s</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      <span class="comment">// {CancelableTaskManager}. Background tasks cannot spawn tasks managed by</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      <span class="comment">// their own task manager.</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1CancelableTask.html">CancelableTask</a>(on_foreground ? job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;cancelable_task_manager()</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                                     : &amp;job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a32567b0fa26ffcea6e894c54e5bbbc94">background_task_manager_</a>),</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>(job),</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">on_foreground_</a>(on_foreground) {}</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160; </div>
<div class="line"><a name="l02945"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a3a8517f046dbb29af2bc0f0ec24762e8"> 2945</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a3a8517f046dbb29af2bc0f0ec24762e8">~CompileTask</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">on_foreground_</a>) <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a7d63a654af3c6d05fdfb94d9d98152c7">ResetPendingForegroundTask</a>();</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  }</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ada0c2b9f7ae434853a08d3a84a017d06"> 2949</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ada0c2b9f7ae434853a08d3a84a017d06">RunInternal</a>() final {</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">on_foreground_</a>) <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a7d63a654af3c6d05fdfb94d9d98152c7">ResetPendingForegroundTask</a>();</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af3c71b1c92469d246d929fe3f6ea1061">step_</a>-&gt;Run(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">on_foreground_</a>);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="comment">// After execution, reset {job_} such that we don&#39;t try to reset the pending</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="comment">// foreground task when the task is deleted.</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  }</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160; </div>
<div class="line"><a name="l02958"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a204415cbd9628d948c738372bcc6139a"> 2958</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a204415cbd9628d948c738372bcc6139a">Cancel</a>() {</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>);</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  }</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160; </div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <span class="comment">// {job_} will be cleared to cancel a pending task.</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7"> 2965</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>;</div>
<div class="line"><a name="l02966"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff"> 2966</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">on_foreground_</a>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a7d63a654af3c6d05fdfb94d9d98152c7"> 2968</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a7d63a654af3c6d05fdfb94d9d98152c7">ResetPendingForegroundTask</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a>);</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;};</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160; </div>
<div class="line"><a name="l02974"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab4666e785e9acaa99d4290e9e21f8a9e"> 2974</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab4666e785e9acaa99d4290e9e21f8a9e">AsyncCompileJob::StartForegroundTask</a>() {</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a>);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160; </div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <span class="keyword">auto</span> new_task = std::make_unique&lt;CompileTask&gt;(<span class="keyword">this</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a> = new_task.get();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a60c83d8ce32a32ad052ad7a308c64d6c">foreground_task_runner_</a>-&gt;PostTask(std::move(new_task));</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;}</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160; </div>
<div class="line"><a name="l02982"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad958c48b5e4f28453ed24da4dc46602f"> 2982</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad958c48b5e4f28453ed24da4dc46602f">AsyncCompileJob::ExecuteForegroundTaskImmediately</a>() {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a>);</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160; </div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="keyword">auto</span> new_task = std::make_unique&lt;CompileTask&gt;(<span class="keyword">this</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a> = new_task.get();</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  new_task-&gt;<a class="code" href="classv8_1_1internal_1_1CancelableTask.html#ae1851dd66f2539be51f60f2ad041af0d">Run</a>();</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;}</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160; </div>
<div class="line"><a name="l02990"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#aa84200caacc713311e166e63a9b3759f"> 2990</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#aa84200caacc713311e166e63a9b3759f">AsyncCompileJob::CancelPendingForegroundTask</a>() {</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a204415cbd9628d948c738372bcc6139a">Cancel</a>();</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;}</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab2345a7e23a4b90636bf3986bb22f54e"> 2996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab2345a7e23a4b90636bf3986bb22f54e">AsyncCompileJob::StartBackgroundTask</a>() {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keyword">auto</span> task = std::make_unique&lt;CompileTask&gt;(<span class="keyword">this</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;  <span class="comment">// If --wasm-num-compilation-tasks=0 is passed, do only spawn foreground</span></div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <span class="comment">// tasks. This is used to make timing deterministic.</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_num_compilation_tasks &gt; 0) {</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a061c7d8b981dab5da6a04a8f6f8419b6">PostTaskOnWorkerThread</a>(</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>, std::move(task));</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a60c83d8ce32a32ad052ad7a308c64d6c">foreground_task_runner_</a>-&gt;PostTask(std::move(task));</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  }</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;}</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160; </div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Step,</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af8542ed1d50257c03ea1bd612150af14">AsyncCompileJob::UseExistingForegroundTask</a> use_existing_fg_task,</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;          <span class="keyword">typename</span>... Args&gt;</div>
<div class="line"><a name="l03012"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84"> 3012</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">AsyncCompileJob::DoSync</a>(Args&amp;&amp;... <a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>) {</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  NextStep&lt;Step&gt;(std::forward&lt;Args&gt;(<a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>)...);</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="keywordflow">if</span> (use_existing_fg_task &amp;&amp; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">pending_foreground_task_</a> != <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab4666e785e9acaa99d4290e9e21f8a9e">StartForegroundTask</a>();</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;}</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160; </div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Step, <span class="keyword">typename</span>... Args&gt;</div>
<div class="line"><a name="l03019"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#abb47c3e3846b0ae191c5c1c9c2ef0b84"> 3019</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#abb47c3e3846b0ae191c5c1c9c2ef0b84">AsyncCompileJob::DoImmediately</a>(Args&amp;&amp;... <a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>) {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  NextStep&lt;Step&gt;(std::forward&lt;Args&gt;(<a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>)...);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad958c48b5e4f28453ed24da4dc46602f">ExecuteForegroundTaskImmediately</a>();</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;}</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Step, <span class="keyword">typename</span>... Args&gt;</div>
<div class="line"><a name="l03025"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#add267630191de419bf4467180a938b3b"> 3025</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#add267630191de419bf4467180a938b3b">AsyncCompileJob::DoAsync</a>(Args&amp;&amp;... <a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>) {</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  NextStep&lt;Step&gt;(std::forward&lt;Args&gt;(<a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>)...);</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab2345a7e23a4b90636bf3986bb22f54e">StartBackgroundTask</a>();</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;}</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Step, <span class="keyword">typename</span>... Args&gt;</div>
<div class="line"><a name="l03031"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a139187b697c7eb6b4a94d3473d7d555b"> 3031</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a139187b697c7eb6b4a94d3473d7d555b">AsyncCompileJob::NextStep</a>(Args&amp;&amp;... <a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>) {</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af3c71b1c92469d246d929fe3f6ea1061">step_</a>.reset(<span class="keyword">new</span> Step(std::forward&lt;Args&gt;(<a class="code" href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">args</a>)...));</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;}</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160; </div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;<span class="comment">// Step 1: (async) Decode the module.</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html"> 3038</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html">AsyncCompileJob::DecodeModule</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">AsyncCompileJob::CompileStep</a> {</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l03040"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a441dd7c72c35e06dfb95c4efc6f19d5f"> 3040</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a441dd7c72c35e06dfb95c4efc6f19d5f">DecodeModule</a>(<a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* counters,</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;                        std::shared_ptr&lt;metrics::Recorder&gt; metrics_recorder)</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#af5503437c181b102ff658c10bc329816">counters_</a>(counters), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a9ed32c7c7b2617e667833307d0e0163d">metrics_recorder_</a>(std::move(metrics_recorder)) {}</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160; </div>
<div class="line"><a name="l03044"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a2bce50c3ea578bc818214bba82cbb656"> 3044</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a2bce50c3ea578bc818214bba82cbb656">RunInBackground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">ModuleResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    {</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowHandleAllocation</a> no_handle;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;      <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      <span class="comment">// Decode the module bytes.</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;(1) Decoding module...\n&quot;</span>);</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;                   <span class="stringliteral">&quot;wasm.DecodeModule&quot;</span>);</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <span class="keyword">auto</span> enabled_features = job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;          enabled_features, job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), <span class="keyword">false</span>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>,</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#af5503437c181b102ff658c10bc329816">counters_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a9ed32c7c7b2617e667833307d0e0163d">metrics_recorder_</a>, job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a88a441ca477b50b987fc34ae1c949c35">context_id</a>(),</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3a9f2b960005d2a3a5f35ac32809d84db7">DecodingMethod::kAsync</a>, &amp;job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>);</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160; </div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      <span class="comment">// Validate lazy functions here if requested.</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.ok() &amp;&amp; !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation) {</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.value().get();</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> validation_error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;                module, job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>,</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;                <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2">kOnlyLazyFunctions</a>, &amp;job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>)) {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;          <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">ModuleResult</a>{std::move(validation_error)};</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;        }</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      }</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.ok()) {</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;        <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.value().get();</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;                module, job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(), job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>,</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;                &amp;job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>)) {</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;          <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">ModuleResult</a>{std::move(error)};</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        }</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      }</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    }</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <span class="comment">// Decoding failure; reject the promise and clean up.</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;      job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">DoSync</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html">Fail</a>&gt;();</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      <span class="comment">// Decode passed.</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      std::shared_ptr&lt;WasmModule&gt; module = std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>).value();</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      <span class="keywordtype">size_t</span> code_size_estimate =</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a>(module.get());</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">DoSync</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html">PrepareAndStartCompile</a>&gt;(</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;          std::move(module), <span class="keyword">true</span> <span class="comment">/* start_compilation */</span>,</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;          <span class="keyword">true</span> <span class="comment">/* lazy_functions_are_validated */</span>, code_size_estimate);</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    }</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  }</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160; </div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l03092"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#af5503437c181b102ff658c10bc329816"> 3092</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Counters.html">Counters</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#af5503437c181b102ff658c10bc329816">counters_</a>;</div>
<div class="line"><a name="l03093"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a9ed32c7c7b2617e667833307d0e0163d"> 3093</a></span>&#160;  std::shared_ptr&lt;metrics::Recorder&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a9ed32c7c7b2617e667833307d0e0163d">metrics_recorder_</a>;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;};</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160; </div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">// Step 2 (sync): Create heap-allocated data and start compilation.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html"> 3099</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html">AsyncCompileJob::PrepareAndStartCompile</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">CompileStep</a> {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l03101"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ac5dccdcb6738c90ba8c230cf7450e8b2"> 3101</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ac5dccdcb6738c90ba8c230cf7450e8b2">PrepareAndStartCompile</a>(std::shared_ptr&lt;const WasmModule&gt; module,</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;                         <span class="keywordtype">bool</span> start_compilation,</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                         <span class="keywordtype">bool</span> lazy_functions_are_validated,</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;                         <span class="keywordtype">size_t</span> code_size_estimate)</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8">module_</a>(std::move(module)),</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79">start_compilation_</a>(start_compilation),</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aea65721b6185ebe2e1d51762fbb14079">lazy_functions_are_validated_</a>(lazy_functions_are_validated),</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b">code_size_estimate_</a>(code_size_estimate) {}</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160; </div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l03111"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aab1de8b23d4aa589a08ae97f6feb3220"> 3111</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aab1de8b23d4aa589a08ae97f6feb3220">RunInForeground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;(2) Prepare and start compile...\n&quot;</span>);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> streaming = job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#a31e859ce9fbc3561f23d5411edd92c4b">length</a>() == 0;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (streaming) {</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      <span class="comment">// Streaming compilation already checked for cache hits.</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adef95f093ae1dc1da035c1ec5d338c23">CreateNativeModule</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8">module_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b">code_size_estimate_</a>);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad155f15fbc01d3537cbaf00b74c2f382">GetOrCreateNativeModule</a>(std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8">module_</a>),</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                                            <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b">code_size_estimate_</a>)) {</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">FinishCompile</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aea65721b6185ebe2e1d51762fbb14079">lazy_functions_are_validated_</a>) {</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <span class="comment">// If we are not streaming and did not get a cache hit, we might have hit</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="comment">// the path where the streaming decoder got a prefix cache hit, but the</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="comment">// module then turned out to be invalid, and we are running it through</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      <span class="comment">// non-streaming decoding again. In this case, function bodies have not</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      <span class="comment">// been validated yet (would have happened in the {DecodeModule} phase</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <span class="comment">// if we would not come via the non-streaming path). Thus do this now.</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      <span class="comment">// Note that we only need to validate lazily compiled functions, others</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <span class="comment">// will be validated during eager compilation.</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79">start_compilation_</a>);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation &amp;&amp;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">ValidateFunctions</a>(*job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2">kOnlyLazyFunctions</a>)</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;              .<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a814cbe82c25f67faffa1de4801d10574">has_error</a>()) {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">Failed</a>();</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      }</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    }</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160; </div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="comment">// Make sure all compilation tasks stopped running. Decoding (async step)</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <span class="comment">// is done.</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a32567b0fa26ffcea6e894c54e5bbbc94">background_task_manager_</a>.<a class="code" href="classv8_1_1internal_1_1CancelableTaskManager.html#a3c90c3d841ccd5255387b37fcfbc03c0">CancelAndWait</a>();</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    CompilationStateImpl* compilation_state =</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state());</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    compilation_state-&gt;AddCallback(</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        std::make_unique&lt;CompilationStateCallback&gt;(job));</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      <span class="keyword">auto</span> compile_mode = job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a> == <span class="keyword">nullptr</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                              ? CompilationTimeCallback::kAsync</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                              : CompilationTimeCallback::kStreaming;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;      compilation_state-&gt;AddCallback(std::make_unique&lt;CompilationTimeCallback&gt;(</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;          job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a0df8dc9e4eb119d45ed068d53277c709">async_counters</a>(), job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">metrics_recorder</a>(),</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;          job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5d62877a0c3d97edb19bcefa2e452c57">context_id_</a>, job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>, compile_mode));</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    }</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160; </div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79">start_compilation_</a>) {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="comment">// TODO(13209): Use PGO for async compilation, if available.</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* kNoProfileInformation = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      std::unique_ptr&lt;CompilationUnitBuilder&gt; builder = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd">InitializeCompilation</a>(</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;          job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>(), job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>.get(), kNoProfileInformation);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      compilation_state-&gt;InitializeCompilationUnits(std::move(builder));</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      <span class="comment">// In single-threaded mode there are no worker tasks that will do the</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <span class="comment">// compilation. We call {WaitForCompilationEvent} here so that the main</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      <span class="comment">// thread participates and finishes the compilation.</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_num_compilation_tasks == 0 || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;        compilation_state-&gt;WaitForCompilationEvent(</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      }</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    }</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  }</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8"> 3173</a></span>&#160;  <span class="keyword">const</span> std::shared_ptr&lt;const WasmModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8">module_</a>;</div>
<div class="line"><a name="l03174"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79"> 3174</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79">start_compilation_</a>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aea65721b6185ebe2e1d51762fbb14079"> 3175</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aea65721b6185ebe2e1d51762fbb14079">lazy_functions_are_validated_</a>;</div>
<div class="line"><a name="l03176"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b"> 3176</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b">code_size_estimate_</a>;</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;};</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment">// Step 3 (sync): Compilation finished.</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html"> 3182</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html">AsyncCompileJob::FinishCompilation</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">CompileStep</a> {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l03184"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#a6f953f4a930cf5da320864312c15586c"> 3184</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#a6f953f4a930cf5da320864312c15586c">FinishCompilation</a>(std::shared_ptr&lt;NativeModule&gt; cached_native_module)</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">cached_native_module_</a>(std::move(cached_native_module)) {}</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160; </div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l03188"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ae0e81a512dd4e7cbc11da9d17e828a75"> 3188</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ae0e81a512dd4e7cbc11da9d17e828a75">RunInForeground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;(3) Compilation finished\n&quot;</span>);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">cached_native_module_</a>) {</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">cached_native_module_</a>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    }</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="comment">// Then finalize and publish the generated module.</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">FinishCompile</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">cached_native_module_</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160; </div>
<div class="line"><a name="l03197"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447"> 3197</a></span>&#160;  std::shared_ptr&lt;NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">cached_native_module_</a>;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;};</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160; </div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="comment">// Step 4 (sync): Decoding or compilation failed.</span></div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="comment">//==========================================================================</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html"> 3203</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html">AsyncCompileJob::Fail</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">CompileStep</a> {</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l03205"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html#ac25f2c0a02c26e155b40b1d81740688b"> 3205</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html#ac25f2c0a02c26e155b40b1d81740688b">RunInForeground</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;(4) Async compilation failed.\n&quot;</span>);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="comment">// {job_} is deleted in {Failed}, therefore the {return}.</span></div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <span class="keywordflow">return</span> job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">Failed</a>();</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  }</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;};</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160; </div>
<div class="line"><a name="l03212"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a80e0dfd6274908a644fcc877c72607a9"> 3212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a80e0dfd6274908a644fcc877c72607a9">AsyncCompileJob::FinishSuccessfully</a>() {</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <a class="code" href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a>(<span class="stringliteral">&quot;(4) Finish module...\n&quot;</span>);</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                 <span class="stringliteral">&quot;wasm.OnCompilationSucceeded&quot;</span>);</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <span class="comment">// We have to make sure that an &quot;incumbent context&quot; is available in case</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="comment">// the module&#39;s start function calls out to Blink.</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    <a class="code" href="classv8_1_1Local.html">Local&lt;v8::Context&gt;</a> backup_incumbent_context =</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        Utils::ToLocal(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4dff42fd647b975ce6708820a34fffe2">incumbent_context_</a>);</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <a class="code" href="classv8_1_1Context_1_1BackupIncumbentScope.html">v8::Context::BackupIncumbentScope</a> incumbent(backup_incumbent_context);</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4025ea6ad5b7cac05d76451054ae6829">resolver_</a>-&gt;OnCompilationSucceeded(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>);</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  }</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8378f5ecdd236147a0b3c590c12899b8">RemoveCompileJob</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;}</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160; </div>
<div class="line"><a name="l03227"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a9da068ebd21214867da972e51689bee5"> 3227</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a9da068ebd21214867da972e51689bee5">AsyncStreamingProcessor::AsyncStreamingProcessor</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>* job)</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    : decoder_(job-&gt;enabled_features_, &amp;job-&gt;detected_features_),</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      job_(job),</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      compilation_unit_builder_(<a class="code" href="flag-definitions_8h.html#aca14fbede0905858c819226fce3678cc">nullptr</a>) {}</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160; </div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment">// Process the module header.</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aee9a0b6fb579488ab89cc95ea9e6caef"> 3233</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aee9a0b6fb579488ab89cc95ea9e6caef">AsyncStreamingProcessor::ProcessModuleHeader</a>(</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Process module header...\n&quot;</span>);</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#adf6bbeca3b9ea708958affa0b8901d9c">DecodeModuleHeader</a>(bytes);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a6261e2904d468325a0ce31fc10e95b65">ok</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;  <span class="comment">// Note: We do not include the magic bytes in the hash; they are constant</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  <span class="comment">// anyways.</span></div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;}</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160; </div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;<span class="comment">// Process all sections except for the code section.</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aac7514bd78200ea2d33761023d266de4"> 3244</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aac7514bd78200ea2d33761023d266de4">AsyncStreamingProcessor::ProcessSection</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693b">SectionCode</a> section_code,</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                                             <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes,</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                                             uint32_t offset) {</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Process section %d ...\n&quot;</span>, section_code);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>) {</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <span class="comment">// We reached a section after the code section, we do not need the</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="comment">// compilation_unit_builder_ anymore.</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065">CommitCompilationUnits</a>();</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>.reset();</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;  }</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a41aab3efc6dfb1d49db122d8d43176f6">before_code_section_</a>) {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="comment">// Combine section hashes until code section.</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#a20c5918a245c896fcfb7595d98401969">AddRange</a>(bytes);</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  }</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  <span class="keywordflow">if</span> (section_code == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693ba8cfdeb9213a3d517aed3c0ca252a5e6f">SectionCode::kUnknownSectionCode</a>) {</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <span class="keywordtype">size_t</span> bytes_consumed = <a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#ae4fc5f48b45481886c6146a470de6498">ModuleDecoder::IdentifyUnknownSection</a>(</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        &amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>, bytes, offset, &amp;section_code);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a6261e2904d468325a0ce31fc10e95b65">ok</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="keywordflow">if</span> (section_code == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693ba8cfdeb9213a3d517aed3c0ca252a5e6f">SectionCode::kUnknownSectionCode</a>) {</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <span class="comment">// Skip unknown sections that we do not know how to handle.</span></div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    }</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="comment">// Remove the unknown section tag from the payload bytes.</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    offset += bytes_consumed;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    bytes = bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(bytes_consumed, bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a158d159abc6eff4987e7b574305f6efd">DecodeSection</a>(section_code, bytes, offset);</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a6261e2904d468325a0ce31fc10e95b65">ok</a>();</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;}</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160; </div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">// Start the code section.</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a707cf5b73e892c3ddd7b74cef826c429"> 3275</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a707cf5b73e892c3ddd7b74cef826c429">AsyncStreamingProcessor::ProcessCodeSectionHeader</a>(</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordtype">int</span> num_functions, uint32_t functions_mismatch_error_offset,</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    std::shared_ptr&lt;WireBytesStorage&gt; wire_bytes_storage,</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordtype">int</span> code_section_start, <span class="keywordtype">int</span> code_section_length) {</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(0, code_section_length);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a41aab3efc6dfb1d49db122d8d43176f6">before_code_section_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Start the code section with %d functions...\n&quot;</span>,</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;                  num_functions);</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#aedf5304c50c581a24ce9a763147ae355">Add</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(code_section_length));</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#af1e71390300a70d4322bbff2ec9c641e">CheckFunctionsCount</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(num_functions),</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;                                    functions_mismatch_error_offset)) {</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;  }</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160; </div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a80a8197a6d39d2a6cf242bdcf6b01425">StartCodeSection</a>({<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(code_section_start),</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;                             <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(code_section_length)});</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160; </div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3d8b862532f9f18b75db0b33dfa2b4dd">GetStreamingCompilationOwnership</a>(</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#a70be1a634ad5c9c0d93ac9ead95ff163">hash</a>(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>)) {</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="comment">// Known prefix, wait until the end of the stream and check the cache.</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617">prefix_cache_hit_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  }</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160; </div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  <span class="comment">// Execute the PrepareAndStartCompile step immediately and not in a separate</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="comment">// task.</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8b70e09648e0eff724498aace4f9b98d">module</a>()-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a>);</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;  <span class="keywordtype">size_t</span> code_size_estimate =</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a>(num_functions,</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;                                                          code_section_length);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#abb47c3e3846b0ae191c5c1c9c2ef0b84">DoImmediately</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html">AsyncCompileJob::PrepareAndStartCompile</a>&gt;(</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8acb438d35687ddde33f2711f57fc43e">shared_module</a>(),</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;      <span class="comment">// start_compilation: false; triggered when we receive the bodies.</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      <span class="keyword">false</span>,</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <span class="comment">// lazy_functions_are_validated: false (bodies not received yet).</span></div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      <span class="keyword">false</span>, code_size_estimate);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160; </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <span class="keyword">auto</span>* compilation_state = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state());</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  compilation_state-&gt;SetWireBytesStorage(std::move(wire_bytes_storage));</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;module()-&gt;origin, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  <span class="comment">// Set outstanding_finishers_ to 2, because both the AsyncCompileJob and the</span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="comment">// AsyncStreamingProcessor have to finish.</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ac2da5dad6fdcf531d99f2ddf886d3898">outstanding_finishers_</a>.store(2);</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;  <span class="comment">// TODO(13209): Use PGO for streaming compilation, if available.</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  constexpr <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* kNoProfileInformation = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd">InitializeCompilation</a>(</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>.get(), kNoProfileInformation);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;}</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment">// Process a function body.</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aa26940dbb1434275daab70cdf12e8326"> 3327</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aa26940dbb1434275daab70cdf12e8326">AsyncStreamingProcessor::ProcessFunctionBody</a>(</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> bytes, uint32_t offset) {</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Process function body %d ...\n&quot;</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a>);</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  uint32_t func_index =</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8b70e09648e0eff724498aace4f9b98d">module</a>()-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a> + <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a>;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;  ++<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  <span class="comment">// In case of {prefix_cache_hit} we still need the function body to be</span></div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;  <span class="comment">// decoded. Otherwise a later cache miss cannot be handled.</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#aefc7fd0a74afba7f3300dde744b3c09d">DecodeFunctionBody</a>(func_index, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>()),</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                              offset);</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160; </div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617">prefix_cache_hit_</a>) {</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="comment">// Don&#39;t compile yet if we might have a cache hit.</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  }</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8b70e09648e0eff724498aace4f9b98d">module</a>();</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <span class="keyword">auto</span> enabled_features = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>;</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> lazy_module = <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">CompileStrategy</a> strategy =</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">GetCompileStrategy</a>(module, enabled_features, func_index, lazy_module);</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless, !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <span class="keywordtype">bool</span> validate_lazily_compiled_function =</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless ||</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;      (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation &amp;&amp;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;       (strategy == CompileStrategy::kLazy ||</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;        strategy == CompileStrategy::kLazyBaselineEagerTopTier));</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <span class="keywordflow">if</span> (validate_lazily_compiled_function) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <span class="comment">// {bytes} is part of a section buffer owned by the streaming decoder. The</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="comment">// streaming decoder is held alive by the {AsyncCompileJob}, so we can just</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    <span class="comment">// use the {bytes} vector as long as the {AsyncCompileJob} is still running.</span></div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>) {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a30537e9b0e0f4d0160b17f97f2ceed43">Initialize</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a> = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;          <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">TaskPriority::kUserVisible</a>,</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;          std::make_unique&lt;ValidateFunctionsStreamingJob&gt;(</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;              module, enabled_features, &amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>));</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    }</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aea4d7941a772b26e34a901b0e3dad6c9">AddUnit</a>(func_index, bytes,</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                                         <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>.get());</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;  }</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;  <span class="keyword">auto</span>* compilation_state = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">Impl</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state());</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;  compilation_state-&gt;InitializeCompilationUnitForSingleFunction(</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>.get(), func_index);</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;}</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160; </div>
<div class="line"><a name="l03376"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065"> 3376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065">AsyncStreamingProcessor::CommitCompilationUnits</a>() {</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>-&gt;Commit();</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;}</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160; </div>
<div class="line"><a name="l03381"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a19842d57ed6e47f88fc3ccb57cd43619"> 3381</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a19842d57ed6e47f88fc3ccb57cd43619">AsyncStreamingProcessor::OnFinishedChunk</a>() {</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;FinishChunk...\n&quot;</span>);</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">compilation_unit_builder_</a>) <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065">CommitCompilationUnits</a>();</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;}</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160; </div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="comment">// Finish the processing of the stream.</span></div>
<div class="line"><a name="l03387"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a1299b61f757fe2cfa5ec698e755650e0"> 3387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a1299b61f757fe2cfa5ec698e755650e0">AsyncStreamingProcessor::OnFinishedStream</a>(</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <a class="code" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> bytes, <span class="keywordtype">bool</span> after_error) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Finish stream...\n&quot;</span>);</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html">ModuleResult</a> module_result = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">decoder_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#ab269c7b3c86924c81fcad654b3e3a446">FinishDecoding</a>();</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;  <span class="keywordflow">if</span> (module_result.<a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html#aff1e1589e6852f41ed5a060d5e4517f9">failed</a>()) after_error = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160; </div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>) {</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <span class="comment">// Wait for background validation to finish, then check if a validation</span></div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    <span class="comment">// error was found.</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <span class="comment">// TODO(13447): Do not block here; register validation as another finisher</span></div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <span class="comment">// instead.</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>-&gt;Join();</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>.reset();</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a9cfdfc887c8e71d8e6f5e70352b372c2">found_error</a>) after_error = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a> |=</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">validate_functions_job_data_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985">detected_features</a>.load(</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;            std::memory_order_relaxed);</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  }</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160; </div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a> = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">ModuleWireBytes</a>(bytes.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a92493de71e39144915ee01fb717e1891">as_vector</a>());</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9267b6a79f50110f5e4a79b38d0678d">bytes_copy_</a> = std::move(bytes);</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  <span class="keywordflow">if</span> (!after_error) {</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_imports_features;</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmError.html">WasmError</a> error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            module_result.<a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html#a307af8b5af132a63ed8c43de7f7f9f3b">value</a>().get(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>(),</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>, &amp;detected_imports_features)) {</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;      after_error = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a> |= detected_imports_features;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    }</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;  }</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160; </div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  <span class="comment">// Record event metrics.</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a> = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>() - <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab632923d90b8ad7e8d6b3bbb8e985a7f">start_time_</a>;</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a4cee86a201704ae118af2b1ca9ace654">success</a> = !after_error;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a74b4fc4ae92e15fb9f6c73dbff7d9a16">streamed</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a0c885c3b1441ebec57f9287097d22c8a">module_size_in_bytes</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#a31e859ce9fbc3561f23d5411edd92c4b">length</a>();</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a3a12992a55d6b19a482b62b19ca4897f">function_count</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a>;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>.<a class="code" href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a6411b52c7ce98217b836614f6c3169e9">wall_clock_duration_in_us</a> = <a class="code" href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">duration</a>.InMicroseconds();</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">metrics_recorder</a>()-&gt;DelayMainThreadEvent(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">metrics_event_</a>,</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;                                                           <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5d62877a0c3d97edb19bcefa2e452c57">context_id_</a>);</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160; </div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;  <span class="keywordflow">if</span> (after_error) {</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> &amp;&amp; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;wire_bytes().empty()) {</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;      <span class="comment">// Clean up the temporary cache entry.</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9df42171758a2a5af30388a2b7e97de8">StreamingCompilationFailed</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#a70be1a634ad5c9c0d93ac9ead95ff163">hash</a>(),</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                                                  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>);</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    }</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    <span class="comment">// Calling {Failed} will invalidate the {AsyncCompileJob} and delete {this}.</span></div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">Failed</a>();</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  }</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  std::shared_ptr&lt;WasmModule&gt; module = std::move(module_result).value();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160; </div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  <span class="comment">// At this point we identified the module as valid (except maybe for function</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;  <span class="comment">// bodies, if lazy validation is enabled).</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  <span class="comment">// This DCHECK could be considered slow, but it only happens once per async</span></div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  <span class="comment">// module compilation, and we only re-decode the module structure, without</span></div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  <span class="comment">// validating function bodies. Overall this does not add a lot of overhead.</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_module_features;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">enabled_features_</a>,</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;                          <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9267b6a79f50110f5e4a79b38d0678d">bytes_copy_</a>.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a92493de71e39144915ee01fb717e1891">as_vector</a>(),</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;                          <span class="comment">/* validate functions */</span> <span class="keyword">false</span>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>,</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;                          &amp;detected_module_features)</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;             .<a class="code" href="classv8_1_1internal_1_1wasm_1_1Result.html#a084b2eb633d37457622cd4dc1cd2e506">ok</a>());</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <span class="comment">// Module decoding should not detect any new features.</span></div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">detected_features_</a>.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a66b0696fe38f3541c9df3c5dc0e300f1">contains_all</a>(detected_module_features));</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160; </div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#ac7e973c109cc4129f87b3cc3c775f10b">NativeModuleCache::PrefixHash</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>()),</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;            <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#a70be1a634ad5c9c0d93ac9ead95ff163">hash</a>());</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617">prefix_cache_hit_</a>) {</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    <span class="comment">// Restart as an asynchronous, non-streaming compilation. Most likely</span></div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <span class="comment">// {PrepareAndStartCompile} will get the native module from the cache.</span></div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <span class="keywordtype">size_t</span> code_size_estimate =</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a>(module.get());</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">DoSync</a>&lt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html">AsyncCompileJob::PrepareAndStartCompile</a>&gt;(</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        std::move(module), <span class="keyword">true</span> <span class="comment">/* start_compilation */</span>,</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        <span class="keyword">false</span> <span class="comment">/* lazy_functions_are_validated_ */</span>, code_size_estimate);</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  }</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160; </div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  <span class="comment">// We have to open a HandleScope and prepare the Context for</span></div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <span class="comment">// CreateNativeModule, PrepareRuntimeObjects and FinishCompile as this is a</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="comment">// callback from the embedder.</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <a class="code" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> scope(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <a class="code" href="classv8_1_1internal_1_1SaveAndSwitchContext.html">SaveAndSwitchContext</a> saved_context(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, *<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>);</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160; </div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  <span class="comment">// Record the size of the wire bytes and the number of functions. In</span></div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="comment">// synchronous and asynchronous (non-streaming) compilation, this happens in</span></div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="comment">// {DecodeWasmModule}.</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;  <span class="keyword">auto</span>* module_size_histogram =</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>()-&gt;wasm_wasm_module_size_bytes();</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;  module_size_histogram-&gt;AddSample(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a>.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">module_bytes</a>().<a class="code" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>());</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <span class="keyword">auto</span>* num_functions_histogram =</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>()-&gt;wasm_functions_per_wasm_module();</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  num_functions_histogram-&gt;AddSample(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">num_functions_</a>));</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160; </div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> has_code_section = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <span class="keywordtype">bool</span> cache_hit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <span class="keywordflow">if</span> (!has_code_section) {</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="comment">// We are processing a WebAssembly module without code section. Create the</span></div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="comment">// native module now (would otherwise happen in {PrepareAndStartCompile} or</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="comment">// {ProcessCodeSectionHeader}).</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    constexpr <span class="keywordtype">size_t</span> kCodeSizeEstimate = 0;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    cache_hit =</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad155f15fbc01d3537cbaf00b74c2f382">GetOrCreateNativeModule</a>(std::move(module), kCodeSizeEstimate);</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;SetWireBytes(std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9267b6a79f50110f5e4a79b38d0678d">bytes_copy_</a>));</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  }</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_finish = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0f21c0af12e028ae3c120b03fbe2c835">DecrementAndCheckFinisherCount</a>();</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!has_code_section, needs_finish);</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <span class="keywordflow">if</span> (needs_finish) {</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> failed = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;compilation_state()-&gt;failed();</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <span class="keywordflow">if</span> (!cache_hit) {</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      <span class="keyword">auto</span>* prev_native_module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>.get();</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a>(</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;          failed, std::move(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>), <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      cache_hit = prev_native_module != <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>.get();</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    }</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">// We finally call {Failed} or {FinishCompile}, which will invalidate the</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="comment">// {AsyncCompileJob} and delete {this}.</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    <span class="keywordflow">if</span> (failed) {</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">Failed</a>();</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">FinishCompile</a>(cache_hit);</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  }</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;}</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160; </div>
<div class="line"><a name="l03520"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a807224ecf5ba4eaf8434dea9b99a78a8"> 3520</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a807224ecf5ba4eaf8434dea9b99a78a8">AsyncStreamingProcessor::OnAbort</a>() {</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <a class="code" href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a>(<span class="stringliteral">&quot;Abort stream...\n&quot;</span>);</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>) {</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>-&gt;Cancel();</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">validate_functions_job_handle_</a>.reset();</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  }</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> &amp;&amp; <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;wire_bytes().empty()) {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="comment">// Clean up the temporary cache entry.</span></div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9df42171758a2a5af30388a2b7e97de8">StreamingCompilationFailed</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">prefix_hasher_</a>.<a class="code" href="classv8_1_1base_1_1Hasher.html#a70be1a634ad5c9c0d93ac9ead95ff163">hash</a>(),</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                                                <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  }</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;  <span class="comment">// {Abort} invalidates the {AsyncCompileJob}, which in turn deletes {this}.</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1969624508b5f667f28f0bb9ff9dfb1a">Abort</a>();</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;}</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160; </div>
<div class="line"><a name="l03535"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac33024dbe8bff894aec911642a350dc6"> 3535</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac33024dbe8bff894aec911642a350dc6">AsyncStreamingProcessor::Deserialize</a>(</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> module_bytes,</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes) {</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.Deserialize&quot;</span>);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;  std::optional&lt;TimedHistogramScope&gt; time_scope;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    time_scope.emplace(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">counters</a>()-&gt;wasm_deserialization_time(),</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">isolate</a>());</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  }</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="comment">// DeserializeNativeModule and FinishCompile assume that they are executed in</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <span class="comment">// a HandleScope, and that a context is set on the isolate.</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <a class="code" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> scope(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <a class="code" href="classv8_1_1internal_1_1SaveAndSwitchContext.html">SaveAndSwitchContext</a> saved_context(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, *<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">native_context_</a>);</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160; </div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmModuleObject&gt;</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a9185844f778e363e0f879498161aab47">DeserializeNativeModule</a>(</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>, module_bytes, wire_bytes, <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">compile_imports_</a>,</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">stream_</a>-&gt;url()));</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160; </div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.is_null()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160; </div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a> =</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">isolate_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">Create</a>(*<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.ToHandleChecked());</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">module_object_</a>-&gt;shared_native_module();</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">wire_bytes_</a> = <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">ModuleWireBytes</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">native_module_</a>-&gt;wire_bytes());</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <span class="comment">// Calling {FinishCompile} deletes the {AsyncCompileJob} and {this}.</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">job_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">FinishCompile</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;}</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160; </div>
<div class="line"><a name="l03564"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ec958a8992fd6f73195af7749c695ea"> 3564</a></span>&#160;CompilationStateImpl::CompilationStateImpl(</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <span class="keyword">const</span> std::shared_ptr&lt;NativeModule&gt;&amp; native_module,</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features)</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    : native_module_(native_module.get()),</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;      native_module_weak_(std::move(native_module)),</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      async_counters_(std::move(async_counters)),</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;      compilation_unit_queues_(native_module-&gt;num_imported_functions(),</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;                               native_module-&gt;num_declared_functions()),</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;      detected_features_(detected_features) {}</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a027613078d5bd38a4971700e68b6a20d"> 3575</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a027613078d5bd38a4971700e68b6a20d">CompilationStateImpl::InitCompileJob</a>() {</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">baseline_compile_job_</a>);</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <span class="comment">// Create the job, but don&#39;t spawn workers yet. This will happen on</span></div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <span class="comment">// {NotifyConcurrencyIncrease}.</span></div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">baseline_compile_job_</a> = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;      <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">TaskPriority::kUserVisible</a>,</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      std::make_unique&lt;BackgroundCompileJob&gt;(</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">native_module_weak_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ad0de5a795e5ca3ea15b6dc64672f9fdb">async_counters_</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f">CompilationTier::kBaseline</a>));</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a> = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;      <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">TaskPriority::kUserVisible</a>,</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      std::make_unique&lt;BackgroundCompileJob&gt;(</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">native_module_weak_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ad0de5a795e5ca3ea15b6dc64672f9fdb">async_counters_</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>));</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;}</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8"> 3590</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8">CompilationStateImpl::CancelCompilation</a>(</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dc">CompilationStateImpl::CancellationPolicy</a> cancellation_policy) {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> callbacks_guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;  <span class="keywordflow">if</span> (cancellation_policy == <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dca56d6183964d232e8e20d243ae101bae3">kCancelInitialCompilation</a> &amp;&amp;</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>.<a class="code" href="classv8_1_1base_1_1EnumSet.html#ae4b456a7bb23f2a76c4526748fcc911a">contains</a>(</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>)) {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="comment">// Initial compilation already finished; cannot be cancelled.</span></div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  }</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160; </div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  <span class="comment">// std::memory_order_relaxed is sufficient because no other state is</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;  <span class="comment">// synchronized with |compile_cancelled_|.</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac7c4f6efcf3aafb8f51b8a77da48410b">compile_cancelled_</a>.store(<span class="keyword">true</span>, std::memory_order_relaxed);</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160; </div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;  <span class="comment">// No more callbacks after abort.</span></div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.clear();</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;}</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160; </div>
<div class="line"><a name="l03609"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a6e8ed1af01ad199828413d1c9f4bacbb"> 3609</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a6e8ed1af01ad199828413d1c9f4bacbb">CompilationStateImpl::cancelled</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac7c4f6efcf3aafb8f51b8a77da48410b">compile_cancelled_</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;}</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160; </div>
<div class="line"><a name="l03613"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a85ad2d14130ce9699d36bd8d9fe02333"> 3613</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a85ad2d14130ce9699d36bd8d9fe02333">CompilationStateImpl::ApplyCompilationHintToInitialProgress</a>(</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html">WasmCompilationHint</a>&amp; hint, <span class="keywordtype">size_t</span> hint_idx) {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  <span class="comment">// Get old information.</span></div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;  uint8_t&amp; progress = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[hint_idx];</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_baseline_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(progress);</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_top_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredTopTierField::decode</a>(progress);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160; </div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  <span class="comment">// Compute new information.</span></div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> new_baseline_tier =</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">ApplyHintToExecutionTier</a>(hint.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a40f8cffca7ea986394a11d33c9f6ec60">baseline_tier</a>, old_baseline_tier);</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> new_top_tier =</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">ApplyHintToExecutionTier</a>(hint.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a0e925f80d2cb467976424c2e1d09782d">top_tier</a>, old_top_tier);</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <span class="keywordflow">switch</span> (hint.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a0fec5831fdab722f5cf38aeed571cc9f">strategy</a>) {</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a6867faeaa475fda467e48267db2bb8a8">WasmCompilationHintStrategy::kDefault</a>:</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      <span class="comment">// Be careful not to switch from lazy to non-lazy.</span></div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      <span class="keywordflow">if</span> (old_baseline_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) {</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        new_baseline_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>;</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      }</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <span class="keywordflow">if</span> (old_top_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) {</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        new_top_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>;</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      }</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1ae3c54a7917f0c719b11db86b1dd59b0f">WasmCompilationHintStrategy::kLazy</a>:</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      new_baseline_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>;</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      new_top_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>;</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1f85c8fbccc9bb4fcda482bf840bc3e2">WasmCompilationHintStrategy::kEager</a>:</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <span class="comment">// Nothing to do, use the encoded (new) tiers.</span></div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1fede85ba930eef5832cf35bc93cb2cb">WasmCompilationHintStrategy::kLazyBaselineEagerTopTier</a>:</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      new_baseline_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;  }</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160; </div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <span class="keywordflow">if</span> (new_top_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &amp;&amp;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;      new_baseline_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) {</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;    <span class="comment">// The top tier shouldn&#39;t be lower than the baseline tier (or it should be</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    <span class="comment">// ::None).</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    new_top_tier = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>;</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  }</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160; </div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  progress = <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredBaselineTierField::update</a>(progress, new_baseline_tier);</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  progress = <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredTopTierField::update</a>(progress, new_top_tier);</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160; </div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  <span class="comment">// Update counter for outstanding baseline units.</span></div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a> += (new_baseline_tier != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) -</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                                 (old_baseline_tier != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>);</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;}</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160; </div>
<div class="line"><a name="l03662"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aabe8418b13e7c57d1415541cb0574eb6"> 3662</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aabe8418b13e7c57d1415541cb0574eb6">CompilationStateImpl::ApplyPgoInfoToInitialProgress</a>(</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  <span class="comment">// Functions that were executed in the profiling run are eagerly compiled to</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="comment">// Liftoff.</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index : pgo_info-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#ad65daa29e05ac5cd3a2102976642d0dd">executed_functions</a>()) {</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    uint8_t&amp; progress =</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)];</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_baseline_tier =</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(progress);</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="comment">// If the function is already marked for eager compilation, we are good.</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;    <span class="keywordflow">if</span> (old_baseline_tier != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160; </div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    <span class="comment">// Set the baseline tier to Liftoff, so we eagerly compile to Liftoff.</span></div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="comment">// TODO(13288): Compile Liftoff code in the background, if lazy compilation</span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="comment">// is enabled.</span></div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    progress =</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredBaselineTierField::update</a>(progress, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    ++<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  }</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160; </div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <span class="comment">// Functions that were tiered up during PGO generation are eagerly compiled to</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <span class="comment">// TurboFan (in the background, not blocking instantiation).</span></div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index : pgo_info-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#a5bacce338f1db16d9d674d8f457087d5">tiered_up_functions</a>()) {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    uint8_t&amp; progress =</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)];</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_baseline_tier =</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(progress);</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_top_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredTopTierField::decode</a>(progress);</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="comment">// If the function is already marked for eager or background compilation to</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="comment">// TurboFan, we are good.</span></div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;    <span class="keywordflow">if</span> (old_baseline_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    <span class="keywordflow">if</span> (old_top_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160; </div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="comment">// Set top tier to TurboFan, so we eagerly trigger compilation in the</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="comment">// background.</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    progress = <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredTopTierField::update</a>(progress, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  }</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;}</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160; </div>
<div class="line"><a name="l03702"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aec07f03c5728ff18989f7f7714b30ea7"> 3702</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aec07f03c5728ff18989f7f7714b30ea7">CompilationStateImpl::ApplyPgoInfoLate</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.ApplyPgoInfo&quot;</span>);</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">CompilationUnitBuilder</a> builder{<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>};</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160; </div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="comment">// Functions that were executed in the profiling run are eagerly compiled to</span></div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  <span class="comment">// Liftoff (in the background).</span></div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index : pgo_info-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#ad65daa29e05ac5cd3a2102976642d0dd">executed_functions</a>()) {</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    uint8_t&amp; progress =</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)];</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_baseline_tier =</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(progress);</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">// If the function is already marked for eager compilation, we are good.</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="keywordflow">if</span> (old_baseline_tier != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160; </div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <span class="comment">// If we already compiled Liftoff or TurboFan code, we are also good.</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> reached_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">ReachedTierField::decode</a>(progress);</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="keywordflow">if</span> (reached_tier &gt;= <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160; </div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;    <span class="comment">// Set the baseline tier to Liftoff and schedule a compilation unit.</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    progress =</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredBaselineTierField::update</a>(progress, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <span class="comment">// Add this as a &quot;top tier unit&quot; since it does not contribute to initial</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="comment">// compilation (&quot;baseline finished&quot; might already be triggered).</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="comment">// TODO(clemensb): Rename &quot;baseline finished&quot; to &quot;initial compile finished&quot;.</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    <span class="comment">// TODO(clemensb): Avoid scheduling both a Liftoff and a TurboFan unit, or</span></div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="comment">// prioritize Liftoff when executing the units.</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    builder.AddTopTierUnit(func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;  }</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160; </div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <span class="comment">// Functions that were tiered up during PGO generation are eagerly compiled to</span></div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <span class="comment">// TurboFan in the background.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index : pgo_info-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#a5bacce338f1db16d9d674d8f457087d5">tiered_up_functions</a>()) {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    uint8_t&amp; progress =</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)];</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_baseline_tier =</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(progress);</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> old_top_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredTopTierField::decode</a>(progress);</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <span class="comment">// If the function is already marked for eager or background compilation to</span></div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <span class="comment">// TurboFan, we are good.</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;    <span class="keywordflow">if</span> (old_baseline_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="keywordflow">if</span> (old_top_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <span class="comment">// If we already compiled TurboFan code, we are also good.</span></div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> reached_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">ReachedTierField::decode</a>(progress);</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="keywordflow">if</span> (reached_tier == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160; </div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <span class="comment">// Set top tier to TurboFan and schedule a compilation unit.</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    progress = <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">RequiredTopTierField::update</a>(progress, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    builder.AddTopTierUnit(func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  }</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  builder.Commit();</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;}</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160; </div>
<div class="line"><a name="l03757"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a06926c1b78473627fab3d1409a0916c6"> 3757</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a06926c1b78473627fab3d1409a0916c6">CompilationStateImpl::InitializeCompilationProgress</a>(</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">ProfileInformation</a>* pgo_info) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8c6110baae5557a7b1bea2a035bf4cf2">failed</a>());</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160; </div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <span class="keyword">auto</span>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160; </div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>);</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160; </div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    <span class="comment">// Compute the default compilation progress for all functions, and set it.</span></div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> default_tiers = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0">GetDefaultTiersPerModule</a>(</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a95dc87711f2fbd647080305bf39e447f">IsInDebugState</a>(), <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">IsLazyModule</a>(module));</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="keyword">const</span> uint8_t default_progress =</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredBaselineTierField::encode</a>(default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>) |</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredTopTierField::encode</a>(default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a>) |</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">ReachedTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>);</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>);</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a> = <a class="code" href="classv8_1_1base_1_1OwnedVector.html#a2661cfcee856d5f551befac70c31a730">base::OwnedVector&lt;uint8_t&gt;::New</a>(</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;        module-&gt;num_declared_functions, default_progress);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="keywordflow">if</span> (default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a> != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a> += module-&gt;num_declared_functions;</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    }</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160; </div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="comment">// Apply compilation hints, if enabled.</span></div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">enabled_features</a>().has_compilation_hints()) {</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;      <span class="keywordtype">size_t</span> num_hints = std::min(module-&gt;compilation_hints.size(),</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                                  <span class="keywordtype">size_t</span>{module-&gt;num_declared_functions});</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> hint_idx = 0; hint_idx &lt; num_hints; ++hint_idx) {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; hint = module-&gt;compilation_hints[hint_idx];</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a85ad2d14130ce9699d36bd8d9fe02333">ApplyCompilationHintToInitialProgress</a>(hint, hint_idx);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      }</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    }</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160; </div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <span class="comment">// Transform --wasm-eager-tier-up-function, if given, into a fake</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="comment">// compilation hint.</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_eager_tier_up_function &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;            <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_eager_tier_up_function) &gt;=</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;                module-&gt;num_imported_functions &amp;&amp;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;            <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_eager_tier_up_function) &lt;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;                module-&gt;functions.size())) {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      uint32_t func_idx =</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_eager_tier_up_function - module-&gt;num_imported_functions;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html">WasmCompilationHint</a> hint{<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1f85c8fbccc9bb4fcda482bf840bc3e2">WasmCompilationHintStrategy::kEager</a>,</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                               <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a51014a338329cb5629fd324cf7493bbc">WasmCompilationHintTier::kOptimized</a>,</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                               <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a51014a338329cb5629fd324cf7493bbc">WasmCompilationHintTier::kOptimized</a>};</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a85ad2d14130ce9699d36bd8d9fe02333">ApplyCompilationHintToInitialProgress</a>(hint, func_idx);</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    }</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  }</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="comment">// Apply PGO information, if available.</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="keywordflow">if</span> (pgo_info) <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aabe8418b13e7c57d1415541cb0574eb6">ApplyPgoInfoToInitialProgress</a>(pgo_info);</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160; </div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;  <span class="comment">// Trigger callbacks if module needs no baseline or top tier compilation. This</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">// can be the case for an empty or fully lazy module.</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a875b97140d7a45a4148a0fb1a248e42b">TriggerOutstandingCallbacks</a>();</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;}</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160; </div>
<div class="line"><a name="l03817"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab0af1dcf85378fb072a892b87ed4ac15"> 3817</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab0af1dcf85378fb072a892b87ed4ac15">CompilationStateImpl::InitializeCompilationUnitForSingleFunction</a>(</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">CompilationUnitBuilder</a>* builder, <span class="keywordtype">int</span> function_index) {</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160; </div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="comment">// Only during streaming compilation, we reach here without holding</span></div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="comment">// `callbacks_mutex_`.</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">// This avoids the observed overhead of taking the lock once per function.</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="comment">// This is correct (data-race free), because the only mutation of</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="comment">// `compilation_progress_` before reading it here without holding the lock is</span></div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="comment">// when initializing the compilation during parsing of the code section</span></div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">// header (see `InitializeCompilationProgress` and</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="comment">// `AsyncStreamingProcessor::ProcessCodeSectionHeader`), which must happen</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <span class="comment">// before processing functions.</span></div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <span class="comment">// Also, this read here happens exactly once per function, only for the</span></div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="comment">// initial compilation, and all accesses to `compilation_progress_` thereafter</span></div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <span class="comment">// are synchronized via `callbacks_mutex_`.</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  uint8_t function_progress = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>(), function_index)];</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> required_baseline_tier =</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;      <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">CompilationStateImpl::RequiredBaselineTierField::decode</a>(</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;          function_progress);</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> required_top_tier =</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">CompilationStateImpl::RequiredTopTierField::decode</a>(function_progress);</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> reached_tier =</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;      <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">CompilationStateImpl::ReachedTierField::decode</a>(function_progress);</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160; </div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="keywordflow">if</span> (reached_tier &lt; required_baseline_tier) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    builder-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaa13e84bbb2c58d607913feb63d4c40d">AddBaselineUnit</a>(function_index, required_baseline_tier);</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  }</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordflow">if</span> (reached_tier &lt; required_top_tier &amp;&amp;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      required_baseline_tier != required_top_tier) {</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    builder-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8a125da97b4910923a225f9ee17e51da">AddTopTierUnit</a>(function_index, required_top_tier);</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  }</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;}</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160; </div>
<div class="line"><a name="l03852"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac57fa6c76918532a01b6d1028b948fb1"> 3852</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac57fa6c76918532a01b6d1028b948fb1">CompilationStateImpl::InitializeCompilationUnits</a>(</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    std::unique_ptr&lt;CompilationUnitBuilder&gt; builder) {</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160; </div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  {</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a26c158458db822b4e91ca63ec1026131">size</a>());</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    <span class="keywordtype">int</span> start = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>;</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = start + module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> func_index = start; func_index &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>; ++func_index) {</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab0af1dcf85378fb072a892b87ed4ac15">InitializeCompilationUnitForSingleFunction</a>(builder.get(), func_index);</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    }</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  }</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  builder-&gt;Commit();</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;}</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160; </div>
<div class="line"><a name="l03869"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afcd9da62d1edbb0e854d525370766659"> 3869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afcd9da62d1edbb0e854d525370766659">CompilationStateImpl::InitializeCompilationProgressAfterDeserialization</a>(</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> lazy_functions,</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const int&gt;</a> eager_functions) {</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a58927f99d797f77024561f336303380c">TRACE_EVENT2</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.CompilationAfterDeserialization&quot;</span>,</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;               <span class="stringliteral">&quot;num_lazy_functions&quot;</span>, lazy_functions.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(),</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;               <span class="stringliteral">&quot;num_eager_functions&quot;</span>, eager_functions.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  std::optional&lt;TimedHistogramScope&gt; lazy_compile_time_scope;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">base::TimeTicks::IsHighResolution</a>()) {</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    lazy_compile_time_scope.emplace(</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aeb68dfdbcf7afb114fbfe377cb9d16d7">counters</a>()-&gt;wasm_compile_after_deserialize());</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  }</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160; </div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="keyword">auto</span>* module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  {</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>);</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160; </div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    <span class="comment">// Initialize the compilation progress as if everything was</span></div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <span class="comment">// TurboFan-compiled.</span></div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    constexpr uint8_t kProgressAfterTurbofanDeserialization =</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredBaselineTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>) |</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredTopTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) |</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">ReachedTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a> = <a class="code" href="classv8_1_1base_1_1OwnedVector.html#a2661cfcee856d5f551befac70c31a730">base::OwnedVector&lt;uint8_t&gt;::New</a>(</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;        module-&gt;num_declared_functions, kProgressAfterTurbofanDeserialization);</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160; </div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="comment">// Update compilation state for lazy functions.</span></div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    constexpr uint8_t kProgressForLazyFunctions =</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredBaselineTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) |</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredTopTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>) |</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">ReachedTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>);</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> func_index : lazy_functions) {</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)] =</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;          kProgressForLazyFunctions;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;    }</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160; </div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;    <span class="comment">// Update compilation state for eagerly compiled functions.</span></div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    constexpr <span class="keywordtype">bool</span> kNotLazy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">ExecutionTierPair</a> default_tiers = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0">GetDefaultTiersPerModule</a>(</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a95dc87711f2fbd647080305bf39e447f">IsInDebugState</a>(), kNotLazy);</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    uint8_t progress_for_eager_functions =</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredBaselineTierField::encode</a>(default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>) |</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">RequiredTopTierField::encode</a>(default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">top_tier</a>) |</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">ReachedTierField::encode</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>);</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> func_index : eager_functions) {</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <span class="comment">// Check that {func_index} is not contained in {lazy_functions}.</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)],</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;          kProgressAfterTurbofanDeserialization);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module, func_index)] =</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;          progress_for_eager_functions;</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;    }</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>, default_tiers.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">baseline_tier</a>);</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a> += eager_functions.size();</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160; </div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <span class="comment">// Baseline compilation is done if we do not have any Liftoff functions to</span></div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <span class="comment">// compile.</span></div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <span class="keywordflow">if</span> (eager_functions.empty() || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation) {</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>);</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    }</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  <span class="keyword">auto</span> builder = std::make_unique&lt;CompilationUnitBuilder&gt;(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>);</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac57fa6c76918532a01b6d1028b948fb1">InitializeCompilationUnits</a>(std::move(builder));</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation) {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aaf65fb2f96cb75ae477b7b62b8aecb90">WaitForCompilationEvent</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>);</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  }</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160; </div>
<div class="line"><a name="l03937"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae69af533e833f888b6c141e97058a96d"> 3937</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae69af533e833f888b6c141e97058a96d">CompilationStateImpl::AddCallback</a>(</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    std::unique_ptr&lt;CompilationEventCallback&gt; callback) {</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> callbacks_guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <span class="comment">// Immediately trigger events that already happened.</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> event : {<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>,</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                     <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>}) {</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>.<a class="code" href="classv8_1_1base_1_1EnumSet.html#ae4b456a7bb23f2a76c4526748fcc911a">contains</a>(event)) {</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      callback-&gt;call(event);</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    }</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;  }</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;  constexpr <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a> kFinalEvents{</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>};</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>.<a class="code" href="classv8_1_1base_1_1EnumSet.html#acdcea1dcfc64156b624c2f674654fc93">contains_any</a>(kFinalEvents)) {</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.emplace_back(std::move(callback));</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  }</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;}</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160; </div>
<div class="line"><a name="l03954"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#af474d59648037e58456a4564d5345fe5"> 3954</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#af474d59648037e58456a4564d5345fe5">CompilationStateImpl::CommitCompilationUnits</a>(</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> baseline_units,</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationUnit&gt;</a> top_tier_units) {</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard{&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9b824ee2bd19df1806a89e4d74a697da">mutex_</a>};</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;  <span class="keywordflow">if</span> (!baseline_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>() || !top_tier_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>()) {</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31357ad240d5b25fb61558f17ae39c94">AddUnits</a>(baseline_units, top_tier_units,</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                                      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>());</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;  }</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;  <span class="keywordflow">if</span> (!baseline_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>()) {</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">baseline_compile_job_</a>-&gt;IsValid());</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">baseline_compile_job_</a>-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  }</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  <span class="keywordflow">if</span> (!top_tier_units.<a class="code" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>()) {</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a>-&gt;IsValid());</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a>-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  }</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;}</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160; </div>
<div class="line"><a name="l03972"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5c78c0ef4fe93265afd37c1c6efe5792"> 3972</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5c78c0ef4fe93265afd37c1c6efe5792">CompilationStateImpl::CommitTopTierCompilationUnit</a>(</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit) {</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#af474d59648037e58456a4564d5345fe5">CommitCompilationUnits</a>({}, {&amp;unit, 1});</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;}</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160; </div>
<div class="line"><a name="l03977"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a50f1bd3b41156eaf80d7e833a95f5bce"> 3977</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a50f1bd3b41156eaf80d7e833a95f5bce">CompilationStateImpl::AddTopTierPriorityCompilationUnit</a>(</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">WasmCompilationUnit</a> unit, <span class="keywordtype">size_t</span> priority) {</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a91aaa8c461c03f44c2d900f81526d1d4">AddTopTierPriorityUnit</a>(unit, priority);</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;  <span class="comment">// We should not have a {CodeSpaceWriteScope} open at this point, as</span></div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="comment">// {NotifyConcurrencyIncrease} can spawn new threads which could inherit PKU</span></div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <span class="comment">// permissions (which would be a security issue).</span></div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">top_tier_compile_job_</a>-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;}</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160; </div>
<div class="line"><a name="l03986"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7bd4a3ad05fde241ad2e33e12ca1275d"> 3986</a></span>&#160;<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">CompilationUnitQueues::Queue</a>* <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7bd4a3ad05fde241ad2e33e12ca1275d">CompilationStateImpl::GetQueueForCompileTask</a>(</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;    <span class="keywordtype">int</span> task_id) {</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aef9c5e4fddae1550ab5ca318583d4c6d">GetQueueForTask</a>(task_id);</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;}</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4691d2bab412c73443a96c25fa8bc94b"> 3991</a></span>&#160;std::optional&lt;WasmCompilationUnit&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4691d2bab412c73443a96c25fa8bc94b">CompilationStateImpl::GetNextCompilationUnit</a>(</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">CompilationUnitQueues::Queue</a>* queue, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a3e5e5349a621aac9f3111fe61b580c43">GetNextUnit</a>(queue, <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;}</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160; </div>
<div class="line"><a name="l03996"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0a03590d60fc6923649c15307fc00dfd"> 3996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0a03590d60fc6923649c15307fc00dfd">CompilationStateImpl::OnFinishedUnits</a>(</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCode*&gt;</a> code_vector) {</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;               <span class="stringliteral">&quot;wasm.OnFinishedUnits&quot;</span>, <span class="stringliteral">&quot;units&quot;</span>, code_vector.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160; </div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>);</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160; </div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;  <span class="comment">// Assume an order of execution tiers that represents the quality of their</span></div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  <span class="comment">// generated code.</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a> &lt; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &amp;&amp;</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;                    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &lt; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>,</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;                <span class="stringliteral">&quot;Assume an order on execution tiers&quot;</span>);</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160; </div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>.<a class="code" href="classv8_1_1base_1_1OwnedVector.html#a26c158458db822b4e91ca63ec1026131">size</a>(),</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;              <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>()-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>);</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  }</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160; </div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  <span class="keywordtype">bool</span> has_top_tier_code = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160; </div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; code_vector.<a class="code" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = code_vector[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>());</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160; </div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    has_top_tier_code |= <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier() == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>;</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160; </div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index() &lt;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af886dc3d493824b7a1ae1e1f5ae02e42">num_imported_functions</a>())) {</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;      <span class="comment">// Import wrapper.</span></div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier(), <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>--;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;      <span class="comment">// Function.</span></div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier(), <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>);</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160; </div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      <span class="comment">// Read function&#39;s compilation progress.</span></div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;      <span class="comment">// This view on the compilation progress may differ from the actually</span></div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      <span class="comment">// compiled code. Any lazily compiled function does not contribute to the</span></div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;      <span class="comment">// compilation progress but may publish code to the code manager.</span></div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;      uint8_t&amp; function_progress =</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">compilation_progress_</a>[<a class="code" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;              <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>(), <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index())];</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> required_baseline_tier =</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;          <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">RequiredBaselineTierField::decode</a>(function_progress);</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> reached_tier = <a class="code" href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">ReachedTierField::decode</a>(function_progress);</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160; </div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <span class="comment">// Check whether required baseline or top tier are reached.</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      <span class="keywordflow">if</span> (reached_tier &lt; required_baseline_tier &amp;&amp;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;          required_baseline_tier &lt;= code-&gt;<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>()) {</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>, 0);</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>--;</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      }</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier() == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) {</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a> += <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;instructions().size();</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;      }</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160; </div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;      <span class="comment">// Update function&#39;s compilation progress.</span></div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier() &gt; reached_tier) {</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        function_progress =</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;            <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">ReachedTierField::update</a>(function_progress, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier());</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      }</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;      <span class="comment">// Allow another top tier compilation if deopts are enabled and the</span></div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;      <span class="comment">// currently installed code object is a liftoff object.</span></div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;      <span class="comment">// Ideally, this would be done only if the code-&gt;tier() ==</span></div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;      <span class="comment">// ExecutionTier::Liftoff as the code object for which we run this</span></div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;      <span class="comment">// function should be the same as the one installed on the native_module.</span></div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;      <span class="comment">// This is unfortunately not the case as installing a code object on the</span></div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;      <span class="comment">// native module and updating the compilation_progress_ and the</span></div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;      <span class="comment">// CompilationUnitQueues::top_tier_compiled_ are not synchronized.</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      <span class="comment">// Note: GetCode() acquires the NativeModule::allocation_mutex_, so this</span></div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      <span class="comment">// could cause deadlocks if any other place acquires</span></div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;      <span class="comment">// NativeModule::allocation_mutex_ first and then</span></div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;      <span class="comment">// CompilationStateImpl::callbacks_mutex_!</span></div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_liftoff = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;tier() == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>;</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;      <span class="keyword">auto</span> published_code_is_liftoff = [<span class="keyword">this</span>](<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">native_module_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a37a8384fb8317a24c3d58cf66ff64123">GetCode</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;is_liftoff();</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;      };</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_deopt &amp;&amp;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;          (is_liftoff || published_code_is_liftoff(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index()))) {</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        <span class="comment">// Setting the reached tier below the baseline tier would create an</span></div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;        <span class="comment">// inconsistent state and has actually led to crashes before (see</span></div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;        <span class="comment">// https://crbug.com/379086474).</span></div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(required_baseline_tier, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;        function_progress = <a class="code" href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">ReachedTierField::update</a>(function_progress,</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;                                                     <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">compilation_unit_queues_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ac5cf3ece9a08ba65c92468996df796f6">AllowAnotherTopTierJob</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index());</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      }</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(0, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a>);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;    }</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  }</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160; </div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  <span class="comment">// Update the {last_top_tier_compilation_timestamp_} if it is set (i.e. a</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;  <span class="comment">// delayed task has already been spawned).</span></div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  <span class="keywordflow">if</span> (has_top_tier_code &amp;&amp; !<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a>.<a class="code" href="classv8_1_1base_1_1time__internal_1_1TimeBase.html#acf50e8599f7e76ab3cc07a32f8df30a9">IsNull</a>()) {</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a> = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>();</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;  }</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160; </div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a875b97140d7a45a4148a0fb1a248e42b">TriggerOutstandingCallbacks</a>();</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;}</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160; </div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l04100"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html"> 4100</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html">TriggerCodeCachingAfterTimeoutTask</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1Task.html">v8::Task</a> {</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l04102"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a9561da26cdafb247c1a66e5b369f4e65"> 4102</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a9561da26cdafb247c1a66e5b369f4e65">TriggerCodeCachingAfterTimeoutTask</a>(</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;      std::weak_ptr&lt;NativeModule&gt; native_module)</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a183ea8197dff0ff0db39eb462ab72c54">native_module_</a>(std::move(native_module)) {}</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160; </div>
<div class="line"><a name="l04106"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a535d1785c032574549845ffaea5cc657"> 4106</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a535d1785c032574549845ffaea5cc657">Run</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    <span class="keywordflow">if</span> (std::shared_ptr&lt;NativeModule&gt; native_module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a183ea8197dff0ff0db39eb462ab72c54">native_module_</a>.lock()) {</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5e40db7d1803f45e703d7d44c554d6a9">Impl</a>(native_module-&gt;compilation_state())-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2c5396b3ed7bfce2157b37923b77ffee">TriggerCachingAfterTimeout</a>();</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    }</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  }</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160; </div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l04113"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a183ea8197dff0ff0db39eb462ab72c54"> 4113</a></span>&#160;  <span class="keyword">const</span> std::weak_ptr&lt;NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a183ea8197dff0ff0db39eb462ab72c54">native_module_</a>;</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;};</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160; </div>
<div class="line"><a name="l04117"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a875b97140d7a45a4148a0fb1a248e42b"> 4117</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a875b97140d7a45a4148a0fb1a248e42b">CompilationStateImpl::TriggerOutstandingCallbacks</a>() {</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160; </div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;  <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a> triggered_events;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a> == 0) {</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    triggered_events.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>);</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;  }</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160; </div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="comment">// For dynamic tiering, trigger &quot;compilation chunk finished&quot; after a new chunk</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;  <span class="comment">// of size {v8_flags.wasm_caching_threshold}.</span></div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_dynamic_tiering &amp;&amp;</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_caching_threshold) &lt;=</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a>) {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <span class="comment">// Trigger caching immediately if</span></div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    <span class="comment">// - there is no timeout,</span></div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    <span class="comment">// - the hard threshold was reached, or</span></div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    <span class="comment">// - we are running single-threaded.</span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.single_threaded || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_caching_timeout_ms &lt;= 0 ||</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_caching_hard_threshold) &lt;=</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;            <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a>) {</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      triggered_events.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a>);</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a> = 0;</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a>.<a class="code" href="classv8_1_1base_1_1time__internal_1_1TimeBase.html#acf50e8599f7e76ab3cc07a32f8df30a9">IsNull</a>()) {</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      <span class="comment">// Trigger a task after the given timeout; that task will only trigger</span></div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;      <span class="comment">// caching if no new code was added until then. Otherwise, it will</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;      <span class="comment">// re-schedule itself.</span></div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a2049d7024e1e9613360968867f0f70bd">PostDelayedTaskOnWorkerThread</a>(</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;          <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">TaskPriority::kUserVisible</a>,</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;          std::make_unique&lt;TriggerCodeCachingAfterTimeoutTask&gt;(</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;              <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">native_module_weak_</a>),</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;          1e-3 * <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_caching_timeout_ms);</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160; </div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;      <span class="comment">// Set the timestamp (will be updated by {OnFinishedUnits} if more</span></div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;      <span class="comment">// top-tier compilation finished before the delayed task is being run).</span></div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a> = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>();</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;    }</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;  }</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160; </div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a1c2df4934d4b851409d16a00d569d33e">compile_failed_</a>.load(std::memory_order_relaxed)) {</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;    <span class="comment">// *Only* trigger the &quot;failed&quot; event.</span></div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    triggered_events =</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a>({<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>});</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  }</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160; </div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9c6ad44bd5a7aaefd4190c42ff0f3ea0">TriggerCallbacks</a>(triggered_events);</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;}</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160; </div>
<div class="line"><a name="l04164"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9c6ad44bd5a7aaefd4190c42ff0f3ea0"> 4164</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9c6ad44bd5a7aaefd4190c42ff0f3ea0">CompilationStateImpl::TriggerCallbacks</a>(</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a> events) {</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  <span class="keywordflow">if</span> (events.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a862a3eec9114561540c5dee511a03b9c">empty</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160; </div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  <span class="comment">// Don&#39;t trigger past events again.</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  events -= <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a>;</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;  <span class="comment">// There can be multiple compilation chunks, thus do not store this.</span></div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">finished_events_</a> |= events - <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a>;</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160; </div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> event :</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;       {std::make_pair(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>,</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                       <span class="stringliteral">&quot;wasm.CompilationFailed&quot;</span>),</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;        std::make_pair(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>,</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                       <span class="stringliteral">&quot;wasm.BaselineFinished&quot;</span>),</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        std::make_pair(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a>,</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                       <span class="stringliteral">&quot;wasm.CompilationChunkFinished&quot;</span>)}) {</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    <span class="keywordflow">if</span> (!events.<a class="code" href="classv8_1_1base_1_1EnumSet.html#ae4b456a7bb23f2a76c4526748fcc911a">contains</a>(event.first)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#abba3d6e3f1705511c75747b22d3f05ec">compilation_id_</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a32bf0a519ec58a3c7c7444eeef340e5a">kInvalidCompilationID</a>);</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, event.second, <span class="stringliteral">&quot;id&quot;</span>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#abba3d6e3f1705511c75747b22d3f05ec">compilation_id_</a>);</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; callback : <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>) {</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      callback-&gt;call(event.first);</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  }</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160; </div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">outstanding_baseline_units_</a> == 0) {</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    <span class="keyword">auto</span> new_end = std::remove_if(</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.begin(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.end(), [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; callback) {</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;          return callback-&gt;release_after_final_event();</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        });</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.erase(new_end, <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">callbacks_</a>.end());</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;}</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160; </div>
<div class="line"><a name="l04197"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2c5396b3ed7bfce2157b37923b77ffee"> 4197</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2c5396b3ed7bfce2157b37923b77ffee">CompilationStateImpl::TriggerCachingAfterTimeout</a>() {</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard{&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">callbacks_mutex_</a>};</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160; </div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="comment">// It can happen that we reached the hard threshold while waiting for the</span></div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="comment">// timeout to expire. In that case, {bytes_since_last_chunk_} might be zero</span></div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <span class="comment">// and there is nothing new to cache.</span></div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a> == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160; </div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a>.<a class="code" href="classv8_1_1base_1_1time__internal_1_1TimeBase.html#acf50e8599f7e76ab3cc07a32f8df30a9">IsNull</a>());</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  <a class="code" href="classv8_1_1base_1_1TimeTicks.html">base::TimeTicks</a> caching_time =</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a> +</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      <a class="code" href="classv8_1_1base_1_1TimeDelta.html#aedb23f3b7d15531e09b71883aaa96b6d">base::TimeDelta::FromMilliseconds</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_caching_timeout_ms);</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;  <a class="code" href="classv8_1_1base_1_1TimeDelta.html">base::TimeDelta</a> time_until_caching = caching_time - <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">base::TimeTicks::Now</a>();</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  <span class="comment">// If we are still half a millisecond or more away from the timeout,</span></div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <span class="comment">// reschedule the task. Otherwise, call the caching callback.</span></div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  <span class="keywordflow">if</span> (time_until_caching &gt;= <a class="code" href="classv8_1_1base_1_1TimeDelta.html#a1df269c42efa26b4b6defb9d83f850da">base::TimeDelta::FromMicroseconds</a>(500)) {</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;    <span class="keywordtype">int</span> ms_remaining =</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(time_until_caching.<a class="code" href="classv8_1_1base_1_1TimeDelta.html#a1c1dda4c68538b3639d1aba67a7a8de2">InMillisecondsRoundedUp</a>());</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(1, ms_remaining);</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a2049d7024e1e9613360968867f0f70bd">PostDelayedTaskOnWorkerThread</a>(</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;        <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">TaskPriority::kUserVisible</a>,</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;        std::make_unique&lt;TriggerCodeCachingAfterTimeoutTask&gt;(</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;            <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">native_module_weak_</a>),</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;        ms_remaining);</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;  }</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160; </div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9c6ad44bd5a7aaefd4190c42ff0f3ea0">TriggerCallbacks</a>({<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">CompilationEvent::kFinishedCompilationChunk</a>});</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">last_top_tier_compilation_timestamp_</a> = {};</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">bytes_since_last_chunk_</a> = 0;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;}</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160; </div>
<div class="line"><a name="l04229"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#adf989d360ca6f9f18f40ba6ed28c76b0"> 4229</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#adf989d360ca6f9f18f40ba6ed28c76b0">CompilationStateImpl::OnCompilationStopped</a>(</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features) {</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> new_detected_features =</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae307e43873e6a925477fefac9dcef545">UpdateDetectedFeatures</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a46f742b041803cde875c307e3021be18">detected_features</a>);</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  <span class="keywordflow">if</span> (new_detected_features.<a class="code" href="classv8_1_1base_1_1EnumSet.html#a862a3eec9114561540c5dee511a03b9c">empty</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160; </div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;  <span class="comment">// New detected features can only happen during eager compilation or if lazy</span></div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  <span class="comment">// validation is enabled.</span></div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="comment">// The exceptions are currently stringref and imported strings, which are only</span></div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <span class="comment">// detected on top-tier compilation.</span></div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_validation ||</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;         (new_detected_features -</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>{{WasmDetectedFeature::stringref,</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;                                WasmDetectedFeature::imported_strings_utf8,</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;                                WasmDetectedFeature::imported_strings}})</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;             .empty());</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  <span class="comment">// TODO(clemensb): Fix reporting of late detected features (relevant for lazy</span></div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <span class="comment">// validation and for stringref).</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;}</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160; </div>
<div class="line"><a name="l04249"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae307e43873e6a925477fefac9dcef545"> 4249</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> CompilationStateImpl::UpdateDetectedFeatures(</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features) {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> old_features =</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      detected_features_.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;  <span class="keywordflow">while</span> (!detected_features_.compare_exchange_weak(</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;      old_features, old_features | detected_features,</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      std::memory_order_relaxed)) {</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="comment">// Retry with updated {old_features}.</span></div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  }</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;  <span class="keywordflow">return</span> detected_features - old_features;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;}</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160; </div>
<div class="line"><a name="l04261"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a811a5626f8ecd18c98ed09241c442de5"> 4261</a></span>&#160;<span class="keywordtype">void</span> CompilationStateImpl::PublishCompilationResults(</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    std::vector&lt;UnpublishedWasmCode&gt; unpublished_code) {</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="keywordflow">if</span> (unpublished_code.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160; </div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;  <span class="comment">// We don&#39;t compile import wrappers eagerly.</span></div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>, assumptions] : unpublished_code) {</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    <span class="keywordtype">int</span> func_index = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;index();</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(native_module_-&gt;num_imported_functions(), func_index);</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(func_index, native_module_-&gt;num_functions());</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;  }</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;  PublishCode(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(unpublished_code));</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;}</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160; </div>
<div class="line"><a name="l04276"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afc9ff843b7f51b2e035c286168390f2e"> 4276</a></span>&#160;std::vector&lt;WasmCode*&gt; CompilationStateImpl::PublishCode(</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;    <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;UnpublishedWasmCode&gt;</a> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>) {</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;  std::vector&lt;WasmCode*&gt; published_code =</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      native_module_-&gt;PublishCode(std::move(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>));</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;  <span class="comment">// Defer logging code in case wire bytes were not fully received yet.</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;  <span class="keywordflow">if</span> (native_module_-&gt;log_code() &amp;&amp; native_module_-&gt;HasWireBytes()) {</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a2b1c94eee0072e6f73f9262078571a4f">LogCode</a>(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(published_code));</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;  }</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160; </div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;  OnFinishedUnits(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(published_code));</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;  <span class="keywordflow">return</span> published_code;</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;}</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160; </div>
<div class="line"><a name="l04290"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a31071aac7bfc7dfb7923f3376d78376b"> 4290</a></span>&#160;<span class="keywordtype">void</span> CompilationStateImpl::SchedulePublishCompilationResults(</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;    std::vector&lt;UnpublishedWasmCode&gt; unpublished_code, <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>) {</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html">PublishState</a>&amp; state = publish_state_[<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>];</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;  {</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#abc98036b1574bf70e9fea478f34078ed">mutex_</a>);</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="keywordflow">if</span> (state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">publisher_running_</a>) {</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      <span class="comment">// Add new code to the queue and return.</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;      state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>.reserve(state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>.size() +</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;                                   unpublished_code.size());</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : unpublished_code) {</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;        state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>.emplace_back(std::move(c));</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;      }</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;    }</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">publisher_running_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;  }</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;    PublishCompilationResults(std::move(unpublished_code));</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    unpublished_code.clear();</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    <span class="comment">// Keep publishing new code that came in.</span></div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#abc98036b1574bf70e9fea478f34078ed">mutex_</a>);</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">publisher_running_</a>);</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;    <span class="keywordflow">if</span> (state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>.empty()) {</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;      state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">publisher_running_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    }</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;    unpublished_code.swap(state.<a class="code" href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">publish_queue_</a>);</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;  }</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;}</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160; </div>
<div class="line"><a name="l04321"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#acbf680841025a81ae543c133173e87a2"> 4321</a></span>&#160;<span class="keywordtype">size_t</span> CompilationStateImpl::NumOutstandingCompilations(</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">CompilationTier</a> <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;  <span class="keywordflow">return</span> compilation_unit_queues_.GetSizeForTier(<a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;}</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160; </div>
<div class="line"><a name="l04326"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a28b47f0cb3321f0107f1a57b0b7edf0d"> 4326</a></span>&#160;<span class="keywordtype">void</span> CompilationStateImpl::SetError() {</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;  compile_cancelled_.store(<span class="keyword">true</span>, std::memory_order_relaxed);</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;  <span class="keywordflow">if</span> (compile_failed_.exchange(<span class="keyword">true</span>, std::memory_order_relaxed)) {</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// Already failed before.</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;  }</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160; </div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> callbacks_guard(&amp;callbacks_mutex_);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;  TriggerOutstandingCallbacks();</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;  callbacks_.clear();</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;}</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160; </div>
<div class="line"><a name="l04337"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aaf65fb2f96cb75ae477b7b62b8aecb90"> 4337</a></span>&#160;<span class="keywordtype">void</span> CompilationStateImpl::WaitForCompilationEvent(</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29">CompilationEvent</a> expect_event) {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;  <span class="keywordflow">switch</span> (expect_event) {</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">CompilationEvent::kFinishedBaselineCompilation</a>:</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      <span class="keywordflow">if</span> (baseline_compile_job_-&gt;IsValid()) baseline_compile_job_-&gt;Join();</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="comment">// Waiting on other CompilationEvent doesn&#39;t make sense.</span></div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;  }</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;  <a class="code" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CompilationEvent&gt;</a> events{expect_event,</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;                                         <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">CompilationEvent::kFailedCompilation</a>};</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;callbacks_mutex_);</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(finished_events_.contains_any(events));</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;}</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160; </div>
<div class="line"><a name="l04355"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2321adabbd69bbd58643f3fcd00177bd"> 4355</a></span>&#160;<span class="keywordtype">void</span> CompilationStateImpl::TierUpAllFunctions() {</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module_-&gt;module();</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;  uint32_t num_wasm_functions = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a>;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">CompilationUnitBuilder</a> builder(native_module_);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_wasm_functions; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    <span class="keywordtype">int</span> func_index = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a> + <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>;</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = native_module_-&gt;GetCode(func_index);</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> || !<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;is_turbofan()) {</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;      builder.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8a125da97b4910923a225f9ee17e51da">AddTopTierUnit</a>(func_index, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;    }</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;  }</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;  builder.<a class="code" href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a9a66b0a4ef936e689f1dd1bc1a3cf21c">Commit</a>();</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160; </div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;  <span class="comment">// Join the compilation, until no compilation units are left anymore.</span></div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;  <span class="keyword">class </span>DummyDelegate final : <span class="keyword">public</span> <a class="code" href="classv8_1_1JobDelegate.html">JobDelegate</a> {</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;    <span class="keywordtype">bool</span> ShouldYield()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <span class="keywordtype">bool</span> IsJoiningThread()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;    <span class="keywordtype">void</span> NotifyConcurrencyIncrease()<span class="keyword"> override </span>{ <a class="code" href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">UNIMPLEMENTED</a>(); }</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    uint8_t GetTaskId()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557">kMainTaskId</a>; }</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;  };</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160; </div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;  DummyDelegate delegate;</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a168d82deb0d259820bfa9d1edff28451">ExecuteCompilationUnits</a>(native_module_weak_, async_counters_.get(), &amp;delegate,</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;                          <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">CompilationTier::kTopTier</a>);</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160; </div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;  <span class="comment">// We cannot wait for other compilation threads to finish, so we explicitly</span></div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;  <span class="comment">// compile all functions which are not yet available as TurboFan code.</span></div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_wasm_functions; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    uint32_t func_index = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a> + <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>;</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = native_module_-&gt;GetCode(func_index);</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> || !<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;is_turbofan()) {</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a91a8d27da954c0e30d403ffa8fcb7bf5">CompileFunction</a>(async_counters_.get(),</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;                                             native_module_, func_index,</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;                                             <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">wasm::ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;    }</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;  }</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;}</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160; </div>
<div class="line"><a name="l04394"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a4db122bc2036fcc7c5f94924836554e5"> 4394</a></span>&#160;std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a4db122bc2036fcc7c5f94924836554e5">CompileImportWrapperForTest</a>(</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63a">ImportCallKind</a> kind, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">CanonicalTypeIndex</a> type_index, <span class="keywordtype">int</span> expected_arity, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">Suspend</a> suspend) {</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;  }</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160; </div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a83ced6511f55c6c4dca7707e21eb1d2d">GetCompiled</a>(isolate, kind, type_index,</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;                                                  expected_arity, suspend, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>);</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;}</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160; </div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;}  <span class="comment">// namespace v8::internal::wasm</span></div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160; </div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;<span class="preprocessor">#undef TRACE_COMPILE</span></div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;<span class="preprocessor">#undef TRACE_STREAMING</span></div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;<span class="preprocessor">#undef TRACE_LAZY</span></div>
<div class="ttc" id="aapi-inl_8h_html"><div class="ttname"><a href="api-inl_8h.html">api-inl.h</a></div></div>
<div class="ttc" id="acheck_8h_html_a0331d7a4dc5d6372d25e946af1f96588"><div class="ttname"><a href="check_8h.html#a0331d7a4dc5d6372d25e946af1f96588">SBXCHECK_LE</a></div><div class="ttdeci">#define SBXCHECK_LE(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00060">check.h:60</a></div></div>
<div class="ttc" id="acheck_8h_html_a6e67d209c0a0c9c55b7b563275f63bdd"><div class="ttname"><a href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a></div><div class="ttdeci">#define SBXCHECK_EQ(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00055">check.h:55</a></div></div>
<div class="ttc" id="achecks_8h_html_a8c8b326bb3d6944234eb74fbd0952061"><div class="ttname"><a href="checks_8h.html#a8c8b326bb3d6944234eb74fbd0952061">SLOW_DCHECK</a></div><div class="ttdeci">#define SLOW_DCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="checks_8h_source.html#l00021">checks.h:21</a></div></div>
<div class="ttc" id="aclassint_html"><div class="ttname"><a href="classint.html">int</a></div></div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassv8_1_1Context_1_1BackupIncumbentScope_html"><div class="ttname"><a href="classv8_1_1Context_1_1BackupIncumbentScope.html">v8::Context::BackupIncumbentScope</a></div><div class="ttdoc">Stack-allocated class to support the backup incumbent settings object stack.</div><div class="ttdef"><b>Definition:</b> <a href="v8-context_8h_source.html#l00402">v8-context.h:402</a></div></div>
<div class="ttc" id="aclassv8_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1Isolate.html">v8::Isolate</a></div><div class="ttdoc">Isolate represents an isolated instance of the V8 engine.</div><div class="ttdef"><b>Definition:</b> <a href="v8-isolate_8h_source.html#l00285">v8-isolate.h:285</a></div></div>
<div class="ttc" id="aclassv8_1_1Isolate_html_aed6909379c3f2820cb3084710b73385d"><div class="ttname"><a href="classv8_1_1Isolate.html#aed6909379c3f2820cb3084710b73385d">v8::Isolate::UseCounterFeature</a></div><div class="ttdeci">UseCounterFeature</div><div class="ttdoc">Features reported via the SetUseCounterCallback callback.</div><div class="ttdef"><b>Definition:</b> <a href="v8-isolate_8h_source.html#l00479">v8-isolate.h:479</a></div></div>
<div class="ttc" id="aclassv8_1_1JobDelegate_html"><div class="ttname"><a href="classv8_1_1JobDelegate.html">v8::JobDelegate</a></div><div class="ttdoc">Delegate that's passed to Job's worker task, providing an entry point to communicate with the schedul...</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00206">v8-platform.h:206</a></div></div>
<div class="ttc" id="aclassv8_1_1JobDelegate_html_a7180a73d20fc8a240c742163001d8b3a"><div class="ttname"><a href="classv8_1_1JobDelegate.html#a7180a73d20fc8a240c742163001d8b3a">v8::JobDelegate::ShouldYield</a></div><div class="ttdeci">virtual bool ShouldYield()=0</div><div class="ttdoc">Returns true if this thread must return from the worker task on the current thread ASAP.</div></div>
<div class="ttc" id="aclassv8_1_1JobDelegate_html_aeaea259d5f4fec4aaca6f9fc35126fda"><div class="ttname"><a href="classv8_1_1JobDelegate.html#aeaea259d5f4fec4aaca6f9fc35126fda">v8::JobDelegate::GetTaskId</a></div><div class="ttdeci">virtual uint8_t GetTaskId()=0</div><div class="ttdoc">Returns a task_id unique among threads currently running this job, such that GetTaskId() &lt; worker cou...</div></div>
<div class="ttc" id="aclassv8_1_1JobHandle_html"><div class="ttname"><a href="classv8_1_1JobHandle.html">v8::JobHandle</a></div><div class="ttdoc">Handle returned when posting a Job.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00241">v8-platform.h:241</a></div></div>
<div class="ttc" id="aclassv8_1_1JobHandle_html_a3c6d3e309521026696e24f36438520a5"><div class="ttname"><a href="classv8_1_1JobHandle.html#a3c6d3e309521026696e24f36438520a5">v8::JobHandle::NotifyConcurrencyIncrease</a></div><div class="ttdeci">virtual void NotifyConcurrencyIncrease()=0</div><div class="ttdoc">Notifies the scheduler that max concurrency was increased, and the number of worker should be adjuste...</div></div>
<div class="ttc" id="aclassv8_1_1JobTask_html"><div class="ttname"><a href="classv8_1_1JobTask.html">v8::JobTask</a></div><div class="ttdoc">A JobTask represents work to run in parallel from Platform::PostJob().</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00300">v8-platform.h:300</a></div></div>
<div class="ttc" id="aclassv8_1_1Local_html"><div class="ttname"><a href="classv8_1_1Local.html">v8::Local&lt; v8::Context &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1Platform_html"><div class="ttname"><a href="classv8_1_1Platform.html">v8::Platform</a></div><div class="ttdoc">V8 Platform abstraction layer.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01097">v8-platform.h:1097</a></div></div>
<div class="ttc" id="aclassv8_1_1Platform_html_a061c7d8b981dab5da6a04a8f6f8419b6"><div class="ttname"><a href="classv8_1_1Platform.html#a061c7d8b981dab5da6a04a8f6f8419b6">v8::Platform::PostTaskOnWorkerThread</a></div><div class="ttdeci">void PostTaskOnWorkerThread(TaskPriority priority, std::unique_ptr&lt; Task &gt; task, const SourceLocation &amp;location=SourceLocation::Current())</div><div class="ttdoc">Schedules a task to be invoked on a worker thread.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01217">v8-platform.h:1217</a></div></div>
<div class="ttc" id="aclassv8_1_1Platform_html_a098c125aa524aa3f3cde02dd158a143e"><div class="ttname"><a href="classv8_1_1Platform.html#a098c125aa524aa3f3cde02dd158a143e">v8::Platform::GetForegroundTaskRunner</a></div><div class="ttdeci">std::shared_ptr&lt; v8::TaskRunner &gt; GetForegroundTaskRunner(Isolate *isolate)</div><div class="ttdoc">Returns a TaskRunner which can be used to post a task on the foreground.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01141">v8-platform.h:1141</a></div></div>
<div class="ttc" id="aclassv8_1_1Platform_html_a2049d7024e1e9613360968867f0f70bd"><div class="ttname"><a href="classv8_1_1Platform.html#a2049d7024e1e9613360968867f0f70bd">v8::Platform::PostDelayedTaskOnWorkerThread</a></div><div class="ttdeci">void PostDelayedTaskOnWorkerThread(TaskPriority priority, std::unique_ptr&lt; Task &gt; task, double delay_in_seconds, const SourceLocation &amp;location=SourceLocation::Current())</div><div class="ttdoc">Schedules a task to be invoked on a worker thread after |delay_in_seconds| expires.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01229">v8-platform.h:1229</a></div></div>
<div class="ttc" id="aclassv8_1_1Platform_html_a5a62780772e38f1f00317fce609ec0d4"><div class="ttname"><a href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">v8::Platform::CreateJob</a></div><div class="ttdeci">std::unique_ptr&lt; JobHandle &gt; CreateJob(TaskPriority priority, std::unique_ptr&lt; JobTask &gt; job_task, const SourceLocation &amp;location=SourceLocation::Current())</div><div class="ttdoc">Creates and returns a JobHandle associated with a Job.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01310">v8-platform.h:1310</a></div></div>
<div class="ttc" id="aclassv8_1_1Task_html"><div class="ttname"><a href="classv8_1_1Task.html">v8::Task</a></div><div class="ttdoc">A Task represents a unit of work.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00049">v8-platform.h:49</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html">v8::base::BitField</a></div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00025">bit-field.h:25</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html_a554df4b9ae5f0dc36b4d092bfc2e004b"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html#a554df4b9ae5f0dc36b4d092bfc2e004b">v8::base::BitField::decode</a></div><div class="ttdeci">static constexpr T decode(U value)</div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00066">bit-field.h:66</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html_a70718344d8a4df6c20b3cf9c9b14d0d4"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">v8::base::BitField::encode</a></div><div class="ttdeci">static constexpr U encode(T value)</div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00055">bit-field.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html_aa8d61fe165b5c0b2c869be69be02b7af"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html#aa8d61fe165b5c0b2c869be69be02b7af">v8::base::BitField::update</a></div><div class="ttdeci">static constexpr U update(U previous, T value)</div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00061">bit-field.h:61</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1ElapsedTimer_html"><div class="ttname"><a href="classv8_1_1base_1_1ElapsedTimer.html">v8::base::ElapsedTimer</a></div><div class="ttdef"><b>Definition:</b> <a href="elapsed-timer_8h_source.html#l00014">elapsed-timer.h:14</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html">v8::base::EnumSet&lt; CompilationEvent &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_a284a9564cbcce06b154271c335244102"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">v8::base::EnumSet::Add</a></div><div class="ttdeci">constexpr void Add(E element)</div><div class="ttdef"><b>Definition:</b> <a href="enum-set_8h_source.html#l00050">enum-set.h:50</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_a66b0696fe38f3541c9df3c5dc0e300f1"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#a66b0696fe38f3541c9df3c5dc0e300f1">v8::base::EnumSet::contains_all</a></div><div class="ttdeci">constexpr bool contains_all(EnumSet set) const</div><div class="ttdef"><b>Definition:</b> <a href="enum-set_8h_source.html#l00038">enum-set.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_a862a3eec9114561540c5dee511a03b9c"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#a862a3eec9114561540c5dee511a03b9c">v8::base::EnumSet::empty</a></div><div class="ttdeci">constexpr bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="enum-set_8h_source.html#l00034">enum-set.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_acdcea1dcfc64156b624c2f674654fc93"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#acdcea1dcfc64156b624c2f674654fc93">v8::base::EnumSet::contains_any</a></div><div class="ttdeci">constexpr bool contains_any(EnumSet set) const</div><div class="ttdef"><b>Definition:</b> <a href="enum-set_8h_source.html#l00041">enum-set.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_ae4b456a7bb23f2a76c4526748fcc911a"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#ae4b456a7bb23f2a76c4526748fcc911a">v8::base::EnumSet::contains</a></div><div class="ttdeci">constexpr bool contains(E element) const</div><div class="ttdef"><b>Definition:</b> <a href="enum-set_8h_source.html#l00035">enum-set.h:35</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Hasher_html"><div class="ttname"><a href="classv8_1_1base_1_1Hasher.html">v8::base::Hasher</a></div><div class="ttdef"><b>Definition:</b> <a href="hashing_8h_source.html#l00105">hashing.h:105</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Hasher_html_a20c5918a245c896fcfb7595d98401969"><div class="ttname"><a href="classv8_1_1base_1_1Hasher.html#a20c5918a245c896fcfb7595d98401969">v8::base::Hasher::AddRange</a></div><div class="ttdeci">Hasher &amp; AddRange(Iterator first, Iterator last)</div><div class="ttdef"><b>Definition:</b> <a href="hashing_8h_source.html#l00127">hashing.h:127</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Hasher_html_a70be1a634ad5c9c0d93ac9ead95ff163"><div class="ttname"><a href="classv8_1_1base_1_1Hasher.html#a70be1a634ad5c9c0d93ac9ead95ff163">v8::base::Hasher::hash</a></div><div class="ttdeci">constexpr size_t hash() const</div><div class="ttdef"><b>Definition:</b> <a href="hashing_8h_source.html#l00111">hashing.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Hasher_html_aedf5304c50c581a24ce9a763147ae355"><div class="ttname"><a href="classv8_1_1base_1_1Hasher.html#aedf5304c50c581a24ce9a763147ae355">v8::base::Hasher::Add</a></div><div class="ttdeci">Hasher &amp; Add(const T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="hashing_8h_source.html#l00121">hashing.h:121</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Mutex_html"><div class="ttname"><a href="classv8_1_1base_1_1Mutex.html">v8::base::Mutex</a></div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00036">mutex.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Mutex_html_a281097589e7088f5af211349cac0ef9d"><div class="ttname"><a href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">v8::base::Mutex::AssertHeld</a></div><div class="ttdeci">void AssertHeld() const</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00058">mutex.h:58</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html">v8::base::OwnedVector&lt; uint8_t &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_a2661cfcee856d5f551befac70c31a730"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#a2661cfcee856d5f551befac70c31a730">v8::base::OwnedVector::New</a></div><div class="ttdeci">static OwnedVector&lt; T &gt; New(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00277">vector.h:277</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_a26c158458db822b4e91ca63ec1026131"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#a26c158458db822b4e91ca63ec1026131">v8::base::OwnedVector::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00236">vector.h:236</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_a92493de71e39144915ee01fb717e1891"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#a92493de71e39144915ee01fb717e1891">v8::base::OwnedVector::as_vector</a></div><div class="ttdeci">Vector&lt; T &gt; as_vector() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00266">vector.h:266</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_af4f3e4cad212e5321ef9d3cb31009fe8"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#af4f3e4cad212e5321ef9d3cb31009fe8">v8::base::OwnedVector::NewForOverwrite</a></div><div class="ttdeci">static OwnedVector&lt; T &gt; NewForOverwrite(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00294">vector.h:294</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html">v8::base::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="small-vector_8h_source.html#l00022">small-vector.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html_ac89f2f50c3d6d75b9d2a62c97cd79408"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html#ac89f2f50c3d6d75b9d2a62c97cd79408">v8::base::SmallVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="small-vector_8h_source.html#l00145">small-vector.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html_ad8177749a526ab128a35c4ec8b0cddf7"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html#ad8177749a526ab128a35c4ec8b0cddf7">v8::base::SmallVector::push_back</a></div><div class="ttdeci">void push_back(T x)</div><div class="ttdef"><b>Definition:</b> <a href="small-vector_8h_source.html#l00191">small-vector.h:191</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html">v8::base::TimeDelta</a></div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00070">time.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_a1c1dda4c68538b3639d1aba67a7a8de2"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#a1c1dda4c68538b3639d1aba67a7a8de2">v8::base::TimeDelta::InMillisecondsRoundedUp</a></div><div class="ttdeci">int64_t InMillisecondsRoundedUp() const</div><div class="ttdef"><b>Definition:</b> <a href="time_8cc_source.html#l00242">time.cc:242</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_a1df269c42efa26b4b6defb9d83f850da"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#a1df269c42efa26b4b6defb9d83f850da">v8::base::TimeDelta::FromMicroseconds</a></div><div class="ttdeci">static constexpr TimeDelta FromMicroseconds(int64_t microseconds)</div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00090">time.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_ad9006b332aa15e66f2ddb8e8ba910892"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#ad9006b332aa15e66f2ddb8e8ba910892">v8::base::TimeDelta::InMicroseconds</a></div><div class="ttdeci">int64_t InMicroseconds() const</div><div class="ttdef"><b>Definition:</b> <a href="time_8cc_source.html#l00251">time.cc:251</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_aedb23f3b7d15531e09b71883aaa96b6d"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#aedb23f3b7d15531e09b71883aaa96b6d">v8::base::TimeDelta::FromMilliseconds</a></div><div class="ttdeci">static constexpr TimeDelta FromMilliseconds(int64_t milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00087">time.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeTicks_html"><div class="ttname"><a href="classv8_1_1base_1_1TimeTicks.html">v8::base::TimeTicks</a></div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00392">time.h:393</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeTicks_html_ab0886bf0e84f1e1fcdc101021c2c0775"><div class="ttname"><a href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a></div><div class="ttdeci">static TimeTicks Now()</div><div class="ttdef"><b>Definition:</b> <a href="time_8cc_source.html#l00736">time.cc:736</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeTicks_html_acdd9f8482c321164c58f46bc65372c9b"><div class="ttname"><a href="classv8_1_1base_1_1TimeTicks.html#acdd9f8482c321164c58f46bc65372c9b">v8::base::TimeTicks::IsHighResolution</a></div><div class="ttdeci">static bool IsHighResolution()</div><div class="ttdef"><b>Definition:</b> <a href="time_8cc_source.html#l00763">time.cc:763</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html">v8::base::Vector</a></div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00023">vector.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a1eb4ed5d322a219428bdb9f9a2cb6708"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">v8::base::Vector::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00064">vector.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a2a0cb4c18804d56414671e0c1d3fb7c4"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a2a0cb4c18804d56414671e0c1d3fb7c4">v8::base::Vector::SubVectorFrom</a></div><div class="ttdeci">Vector&lt; T &gt; SubVectorFrom(size_t from) const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00046">vector.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a7ae17f2372808420997b1aff6addcdd0"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a7ae17f2372808420997b1aff6addcdd0">v8::base::Vector::data</a></div><div class="ttdeci">constexpr T * data() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00100">vector.h:100</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8073322d2a3a5ad755e74dbda482b18c"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">v8::base::Vector::empty</a></div><div class="ttdeci">constexpr bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00073">vector.h:73</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8f91dff816409fb9bceaa94c6caeec32"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">v8::base::Vector::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00070">vector.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_ae3db4c14cac8e648389541fdb745c6b0"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">v8::base::Vector::SubVector</a></div><div class="ttdeci">Vector&lt; T &gt; SubVector(size_t from, size_t to) const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00041">vector.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1time__internal_1_1TimeBase_html_acf50e8599f7e76ab3cc07a32f8df30a9"><div class="ttname"><a href="classv8_1_1base_1_1time__internal_1_1TimeBase.html#acf50e8599f7e76ab3cc07a32f8df30a9">v8::base::time_internal::TimeBase::IsNull</a></div><div class="ttdeci">constexpr bool IsNull() const</div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00250">time.h:250</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CancelableTaskManager_html_a3c90c3d841ccd5255387b37fcfbc03c0"><div class="ttname"><a href="classv8_1_1internal_1_1CancelableTaskManager.html#a3c90c3d841ccd5255387b37fcfbc03c0">v8::internal::CancelableTaskManager::CancelAndWait</a></div><div class="ttdeci">void CancelAndWait()</div><div class="ttdef"><b>Definition:</b> <a href="cancelable-task_8cc_source.html#l00076">cancelable-task.cc:76</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CancelableTask_html"><div class="ttname"><a href="classv8_1_1internal_1_1CancelableTask.html">v8::internal::CancelableTask</a></div><div class="ttdef"><b>Definition:</b> <a href="cancelable-task_8h_source.html#l00144">cancelable-task.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CancelableTask_html_ae1851dd66f2539be51f60f2ad041af0d"><div class="ttname"><a href="classv8_1_1internal_1_1CancelableTask.html#ae1851dd66f2539be51f60f2ad041af0d">v8::internal::CancelableTask::Run</a></div><div class="ttdeci">void Run() final</div><div class="ttdef"><b>Definition:</b> <a href="cancelable-task_8h_source.html#l00153">cancelable-task.h:153</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Counters_html"><div class="ttname"><a href="classv8_1_1internal_1_1Counters.html">v8::internal::Counters</a></div><div class="ttdef"><b>Definition:</b> <a href="counters_8h_source.html#l00504">counters.h:504</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Debug_html_ab727677cfc3df584b90bfdcd5328c727"><div class="ttname"><a href="classv8_1_1internal_1_1Debug.html#ab727677cfc3df584b90bfdcd5328c727">v8::internal::Debug::OnAfterCompile</a></div><div class="ttdeci">void OnAfterCompile(DirectHandle&lt; Script &gt; script)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8cc_source.html#l02761">debug.cc:2761</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00654">handles.h:660</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a770976a9ab8638f5c4a009dc3701a7e1"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a770976a9ab8638f5c4a009dc3701a7e1">v8::internal::Factory::NewStringFromUtf8</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT MaybeHandle&lt; String &gt; NewStringFromUtf8(base::Vector&lt; const char &gt; str, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l00759">factory.cc:759</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandles_html_a1a31391c097b88af06b7e0cf673bcf00"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandles.html#a1a31391c097b88af06b7e0cf673bcf00">v8::internal::GlobalHandles::Destroy</a></div><div class="ttdeci">static void Destroy(Address *location)</div><div class="ttdef"><b>Definition:</b> <a href="global-handles_8cc_source.html#l00661">global-handles.cc:661</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandles_html_a486c475da54faf1fe78e4752ed20e23c"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">v8::internal::GlobalHandles::Create</a></div><div class="ttdeci">IndirectHandle&lt; Object &gt; Create(Tagged&lt; Object &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="global-handles_8cc_source.html#l00624">global-handles.cc:624</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00263">handles.h:263</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Histogram_html_a1fa018dc2756acdc3a1bb4fdbe97ae86"><div class="ttname"><a href="classv8_1_1internal_1_1Histogram.html#a1fa018dc2756acdc3a1bb4fdbe97ae86">v8::internal::Histogram::AddSample</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void AddSample(int sample)</div><div class="ttdef"><b>Definition:</b> <a href="counters_8cc_source.html#l00050">counters.cc:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l00595">isolate.h:595</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a0df8dc9e4eb119d45ed068d53277c709"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a0df8dc9e4eb119d45ed068d53277c709">v8::internal::Isolate::async_counters</a></div><div class="ttdeci">const std::shared_ptr&lt; Counters &gt; &amp; async_counters()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01197">isolate.h:1197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a1c72d1ac998da605895f5d4e29f3d43f"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a1c72d1ac998da605895f5d4e29f3d43f">v8::internal::Isolate::metrics_recorder</a></div><div class="ttdeci">const std::shared_ptr&lt; metrics::Recorder &gt; &amp; metrics_recorder()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01202">isolate.h:1202</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a2714e74bceacf9555c6a02745a0319e2"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">v8::internal::Isolate::global_handles</a></div><div class="ttdeci">GlobalHandles * global_handles() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01431">isolate.h:1431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a2fbd063d0fbd9a69e5e5adebceefddf1"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a2fbd063d0fbd9a69e5e5adebceefddf1">v8::internal::Isolate::CountUsage</a></div><div class="ttdeci">void CountUsage(v8::Isolate::UseCounterFeature feature)</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l07153">isolate.cc:7153</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a4a9708684698eb5d1032bedb9fd49d21"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a4a9708684698eb5d1032bedb9fd49d21">v8::internal::Isolate::context</a></div><div class="ttdeci">Tagged&lt; Context &gt; context() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l00815">isolate.h:815</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a567b8009b9aee748292ab4b1dffdc176"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a567b8009b9aee748292ab4b1dffdc176">v8::internal::Isolate::GetOrRegisterRecorderContextId</a></div><div class="ttdeci">v8::metrics::Recorder::ContextId GetOrRegisterRecorderContextId(DirectHandle&lt; NativeContext &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l07553">isolate.cc:7553</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a7e2962359009581ba84e6a361f574f61"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">v8::internal::Isolate::factory</a></div><div class="ttdeci">v8::internal::Factory * factory()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01553">isolate.h:1553</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a9690b82e4f9b4c8a9160630396cde0b3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a9690b82e4f9b4c8a9160630396cde0b3">v8::internal::Isolate::counters</a></div><div class="ttdeci">Counters * counters()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01195">isolate.h:1195</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_add58aa2cf5e62000c95ea11411ce9ae6"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#add58aa2cf5e62000c95ea11411ce9ae6">v8::internal::Isolate::debug</a></div><div class="ttdeci">Debug * debug() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01500">isolate.h:1500</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html">v8::internal::MaybeDirectHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles_8h_source.html#l00241">maybe-handles.h:241</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html_af9f9ca9032aa4f380d7bab01754f5903"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html#af9f9ca9032aa4f380d7bab01754f5903">v8::internal::MaybeDirectHandle::ToHandleChecked</a></div><div class="ttdeci">DirectHandle&lt; T &gt; ToHandleChecked() const</div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles_8h_source.html#l00273">maybe-handles.h:273</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ReadOnlyRoots_html"><div class="ttname"><a href="classv8_1_1internal_1_1ReadOnlyRoots.html">v8::internal::ReadOnlyRoots</a></div><div class="ttdef"><b>Definition:</b> <a href="roots_8h_source.html#l00724">roots.h:724</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SaveAndSwitchContext_html"><div class="ttname"><a href="classv8_1_1internal_1_1SaveAndSwitchContext.html">v8::internal::SaveAndSwitchContext</a></div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l03018">isolate.h:3018</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html">v8::internal::Signature&lt; ValueType &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_a2e32de9e93a2cdfae189371f22782dad"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#a2e32de9e93a2cdfae189371f22782dad">v8::internal::Smi::ToInt</a></div><div class="ttdeci">static constexpr int ToInt(const Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="smi_8h_source.html#l00033">smi.h:33</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01Object_01_4_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00387">tagged.h:387</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01Smi_01_4_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01Smi_01_4.html">v8::internal::Tagged&lt; Smi &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00417">tagged.h:417</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01Smi_01_4_html_a73a3b31cde0a7836a41dd4c03964ba8d"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01Smi_01_4.html#a73a3b31cde0a7836a41dd4c03964ba8d">v8::internal::Tagged&lt; Smi &gt;::value</a></div><div class="ttdeci">constexpr int32_t value() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00427">tagged.h:427</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00707">tagged.h:707</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TimedHistogram_html"><div class="ttname"><a href="classv8_1_1internal_1_1TimedHistogram.html">v8::internal::TimedHistogram</a></div><div class="ttdef"><b>Definition:</b> <a href="counters_8h_source.html#l00233">counters.h:233</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a5eb1d47c492fa1e85e7d7c31dd5cf2bb"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">v8::internal::V8::GetCurrentPlatform</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE v8::Platform * GetCurrentPlatform()</div><div class="ttdef"><b>Definition:</b> <a href="v8_8cc_source.html#l00282">v8.cc:282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCodePointer_html"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCodePointer.html">v8::internal::WasmCodePointer</a></div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02891">globals.h:2891</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a420d36fa31fab80f7dd6cf6bce2438c8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">v8::internal::WasmModuleObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmModuleObject &gt; New(Isolate *isolate, std::shared_ptr&lt; wasm::NativeModule &gt; native_module, DirectHandle&lt; Script &gt; script)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00113">wasm-objects.cc:113</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Zone_html"><div class="ttname"><a href="classv8_1_1internal_1_1Zone.html">v8::internal::Zone</a></div><div class="ttdef"><b>Definition:</b> <a href="zone_8h_source.html#l00043">zone.h:43</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html">v8::internal::wasm::AsyncCompileJob::CompilationStateCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02860">module-compiler.cc:2861</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback_html_a78a39f3673bf5ded7f231a9201b16fa0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78a39f3673bf5ded7f231a9201b16fa0">v8::internal::wasm::AsyncCompileJob::CompilationStateCallback::CompilationStateCallback</a></div><div class="ttdeci">CompilationStateCallback(AsyncCompileJob *job)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02863">module-compiler.cc:2863</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback_html_a78e60c61e792a9b4a003ec26ba892749"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#a78e60c61e792a9b4a003ec26ba892749">v8::internal::wasm::AsyncCompileJob::CompilationStateCallback::job_</a></div><div class="ttdeci">AsyncCompileJob * job_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02905">module-compiler.cc:2905</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback_html_af03a6f2a5c03d334ec0a8337e73b1da3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompilationStateCallback.html#af03a6f2a5c03d334ec0a8337e73b1da3">v8::internal::wasm::AsyncCompileJob::CompilationStateCallback::call</a></div><div class="ttdeci">void call(CompilationEvent event) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02865">module-compiler.cc:2865</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html">v8::internal::wasm::AsyncCompileJob::CompileStep</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02915">module-compiler.cc:2915</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep_html_a0069e90545f2e9dfecaf6c3bb149e172"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a0069e90545f2e9dfecaf6c3bb149e172">v8::internal::wasm::AsyncCompileJob::CompileStep::~CompileStep</a></div><div class="ttdeci">virtual ~CompileStep()=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep_html_a97ba94766f9dd48e4c3f3685904eff16"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#a97ba94766f9dd48e4c3f3685904eff16">v8::internal::wasm::AsyncCompileJob::CompileStep::RunInBackground</a></div><div class="ttdeci">virtual void RunInBackground(AsyncCompileJob *)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02930">module-compiler.cc:2930</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep_html_abfcaead40f2f15dbf84cee35a2f02623"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#abfcaead40f2f15dbf84cee35a2f02623">v8::internal::wasm::AsyncCompileJob::CompileStep::Run</a></div><div class="ttdeci">void Run(AsyncCompileJob *job, bool on_foreground)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02919">module-compiler.cc:2919</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep_html_ad5029dd7594af476720c9304999a85bf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileStep.html#ad5029dd7594af476720c9304999a85bf">v8::internal::wasm::AsyncCompileJob::CompileStep::RunInForeground</a></div><div class="ttdeci">virtual void RunInForeground(AsyncCompileJob *)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02929">module-compiler.cc:2929</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html">v8::internal::wasm::AsyncCompileJob::CompileTask</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02933">module-compiler.cc:2933</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_a204415cbd9628d948c738372bcc6139a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a204415cbd9628d948c738372bcc6139a">v8::internal::wasm::AsyncCompileJob::CompileTask::Cancel</a></div><div class="ttdeci">void Cancel()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02958">module-compiler.cc:2958</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_a3a8517f046dbb29af2bc0f0ec24762e8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a3a8517f046dbb29af2bc0f0ec24762e8">v8::internal::wasm::AsyncCompileJob::CompileTask::~CompileTask</a></div><div class="ttdeci">~CompileTask() override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02945">module-compiler.cc:2945</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_a55184f48bc8c3f2d1d4f5e5f190592f7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a55184f48bc8c3f2d1d4f5e5f190592f7">v8::internal::wasm::AsyncCompileJob::CompileTask::job_</a></div><div class="ttdeci">AsyncCompileJob * job_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02965">module-compiler.cc:2965</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_a7d63a654af3c6d05fdfb94d9d98152c7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#a7d63a654af3c6d05fdfb94d9d98152c7">v8::internal::wasm::AsyncCompileJob::CompileTask::ResetPendingForegroundTask</a></div><div class="ttdeci">void ResetPendingForegroundTask() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02968">module-compiler.cc:2968</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_ab9b5e4559ae086d12357cb0349cc18b4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ab9b5e4559ae086d12357cb0349cc18b4">v8::internal::wasm::AsyncCompileJob::CompileTask::CompileTask</a></div><div class="ttdeci">CompileTask(AsyncCompileJob *job, bool on_foreground)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02935">module-compiler.cc:2935</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_ada0c2b9f7ae434853a08d3a84a017d06"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#ada0c2b9f7ae434853a08d3a84a017d06">v8::internal::wasm::AsyncCompileJob::CompileTask::RunInternal</a></div><div class="ttdeci">void RunInternal() final</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02949">module-compiler.cc:2949</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask_html_afdc778fbae0b29aed1de49316ff646ff"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1CompileTask.html#afdc778fbae0b29aed1de49316ff646ff">v8::internal::wasm::AsyncCompileJob::CompileTask::on_foreground_</a></div><div class="ttdeci">bool on_foreground_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02966">module-compiler.cc:2966</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html">v8::internal::wasm::AsyncCompileJob::DecodeModule</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03038">module-compiler.cc:3038</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule_html_a2bce50c3ea578bc818214bba82cbb656"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a2bce50c3ea578bc818214bba82cbb656">v8::internal::wasm::AsyncCompileJob::DecodeModule::RunInBackground</a></div><div class="ttdeci">void RunInBackground(AsyncCompileJob *job) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03044">module-compiler.cc:3044</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule_html_a441dd7c72c35e06dfb95c4efc6f19d5f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a441dd7c72c35e06dfb95c4efc6f19d5f">v8::internal::wasm::AsyncCompileJob::DecodeModule::DecodeModule</a></div><div class="ttdeci">DecodeModule(Counters *counters, std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03040">module-compiler.cc:3040</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule_html_a9ed32c7c7b2617e667833307d0e0163d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#a9ed32c7c7b2617e667833307d0e0163d">v8::internal::wasm::AsyncCompileJob::DecodeModule::metrics_recorder_</a></div><div class="ttdeci">std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03093">module-compiler.cc:3093</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule_html_af5503437c181b102ff658c10bc329816"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1DecodeModule.html#af5503437c181b102ff658c10bc329816">v8::internal::wasm::AsyncCompileJob::DecodeModule::counters_</a></div><div class="ttdeci">Counters *const counters_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03092">module-compiler.cc:3092</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html">v8::internal::wasm::AsyncCompileJob::Fail</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03203">module-compiler.cc:3203</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail_html_ac25f2c0a02c26e155b40b1d81740688b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1Fail.html#ac25f2c0a02c26e155b40b1d81740688b">v8::internal::wasm::AsyncCompileJob::Fail::RunInForeground</a></div><div class="ttdeci">void RunInForeground(AsyncCompileJob *job) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03205">module-compiler.cc:3205</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html">v8::internal::wasm::AsyncCompileJob::FinishCompilation</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03182">module-compiler.cc:3182</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation_html_a6f953f4a930cf5da320864312c15586c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#a6f953f4a930cf5da320864312c15586c">v8::internal::wasm::AsyncCompileJob::FinishCompilation::FinishCompilation</a></div><div class="ttdeci">FinishCompilation(std::shared_ptr&lt; NativeModule &gt; cached_native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03184">module-compiler.cc:3184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation_html_ab8a07eeec21e874700651ffe51950447"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ab8a07eeec21e874700651ffe51950447">v8::internal::wasm::AsyncCompileJob::FinishCompilation::cached_native_module_</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; cached_native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03197">module-compiler.cc:3197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation_html_ae0e81a512dd4e7cbc11da9d17e828a75"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1FinishCompilation.html#ae0e81a512dd4e7cbc11da9d17e828a75">v8::internal::wasm::AsyncCompileJob::FinishCompilation::RunInForeground</a></div><div class="ttdeci">void RunInForeground(AsyncCompileJob *job) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03188">module-compiler.cc:3188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03099">module-compiler.cc:3099</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_a0fd85bcabaef22e5f7c3d7bbdbd3458b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a0fd85bcabaef22e5f7c3d7bbdbd3458b">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::code_size_estimate_</a></div><div class="ttdeci">const size_t code_size_estimate_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03176">module-compiler.cc:3176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_a1d33784fa9eaa4136df95aaac7494d79"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#a1d33784fa9eaa4136df95aaac7494d79">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::start_compilation_</a></div><div class="ttdeci">const bool start_compilation_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03174">module-compiler.cc:3174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_aab1de8b23d4aa589a08ae97f6feb3220"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aab1de8b23d4aa589a08ae97f6feb3220">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::RunInForeground</a></div><div class="ttdeci">void RunInForeground(AsyncCompileJob *job) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03111">module-compiler.cc:3111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_ac5dccdcb6738c90ba8c230cf7450e8b2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ac5dccdcb6738c90ba8c230cf7450e8b2">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::PrepareAndStartCompile</a></div><div class="ttdeci">PrepareAndStartCompile(std::shared_ptr&lt; const WasmModule &gt; module, bool start_compilation, bool lazy_functions_are_validated, size_t code_size_estimate)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03101">module-compiler.cc:3101</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_ae660c8c041906fd2f5aac072b6ab12d8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#ae660c8c041906fd2f5aac072b6ab12d8">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::module_</a></div><div class="ttdeci">const std::shared_ptr&lt; const WasmModule &gt; module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03173">module-compiler.cc:3173</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile_html_aea65721b6185ebe2e1d51762fbb14079"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_1_1PrepareAndStartCompile.html#aea65721b6185ebe2e1d51762fbb14079">v8::internal::wasm::AsyncCompileJob::PrepareAndStartCompile::lazy_functions_are_validated_</a></div><div class="ttdeci">const bool lazy_functions_are_validated_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03175">module-compiler.cc:3175</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">v8::internal::wasm::AsyncCompileJob</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00112">module-compiler.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a035c432ed94d826d1746c7d879003dc4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a035c432ed94d826d1746c7d879003dc4">v8::internal::wasm::AsyncCompileJob::compile_imports_</a></div><div class="ttdeci">CompileTimeImports compile_imports_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00223">module-compiler.h:223</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a04c750e47b50446d0e7b808014cd1adc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a04c750e47b50446d0e7b808014cd1adc">v8::internal::wasm::AsyncCompileJob::api_method_name_</a></div><div class="ttdeci">const char *const api_method_name_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00220">module-compiler.h:220</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a09dd6dc4ecfe89eba438d934fdc99b48"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a09dd6dc4ecfe89eba438d934fdc99b48">v8::internal::wasm::AsyncCompileJob::Failed</a></div><div class="ttdeci">void Failed()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02833">module-compiler.cc:2833</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a0a4a22d3cbec712dad3fe9a6c3846106"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0a4a22d3cbec712dad3fe9a6c3846106">v8::internal::wasm::AsyncCompileJob::Start</a></div><div class="ttdeci">void Start()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02475">module-compiler.cc:2475</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a0f21c0af12e028ae3c120b03fbe2c835"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a0f21c0af12e028ae3c120b03fbe2c835">v8::internal::wasm::AsyncCompileJob::DecrementAndCheckFinisherCount</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT bool DecrementAndCheckFinisherCount()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00167">module-compiler.h:167</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a1251219f828730c4c64d1b96b4e80973"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1251219f828730c4c64d1b96b4e80973">v8::internal::wasm::AsyncCompileJob::enabled_features_</a></div><div class="ttdeci">const WasmEnabledFeatures enabled_features_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00221">module-compiler.h:221</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a139187b697c7eb6b4a94d3473d7d555b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a139187b697c7eb6b4a94d3473d7d555b">v8::internal::wasm::AsyncCompileJob::NextStep</a></div><div class="ttdeci">void NextStep(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03031">module-compiler.cc:3031</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a1969624508b5f667f28f0bb9ff9dfb1a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a1969624508b5f667f28f0bb9ff9dfb1a">v8::internal::wasm::AsyncCompileJob::Abort</a></div><div class="ttdeci">void Abort()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02480">module-compiler.cc:2480</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a2136db2ee2be12a3efaca49297536eb1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a2136db2ee2be12a3efaca49297536eb1">v8::internal::wasm::AsyncCompileJob::FinishCompile</a></div><div class="ttdeci">void FinishCompile(bool is_after_cache_hit)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02738">module-compiler.cc:2738</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a32567b0fa26ffcea6e894c54e5bbbc94"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a32567b0fa26ffcea6e894c54e5bbbc94">v8::internal::wasm::AsyncCompileJob::background_task_manager_</a></div><div class="ttdeci">CancelableTaskManager background_task_manager_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00241">module-compiler.h:241</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a3404727e5cda0afe92bc8c4d08fa0454"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3404727e5cda0afe92bc8c4d08fa0454">v8::internal::wasm::AsyncCompileJob::AsyncCompileJob</a></div><div class="ttdeci">AsyncCompileJob(Isolate *isolate, WasmEnabledFeatures enabled_features, CompileTimeImports compile_imports, base::OwnedVector&lt; const uint8_t &gt; bytes, DirectHandle&lt; Context &gt; context, DirectHandle&lt; NativeContext &gt; incumbent_context, const char *api_method_name, std::shared_ptr&lt; CompilationResultResolver &gt; resolver, int compilation_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02445">module-compiler.cc:2445</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a3baacc156ce42c61fa72fefff5552930"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a3baacc156ce42c61fa72fefff5552930">v8::internal::wasm::AsyncCompileJob::module_object_</a></div><div class="ttdeci">IndirectHandle&lt; WasmModuleObject &gt; module_object_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00237">module-compiler.h:237</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a4025ea6ad5b7cac05d76451054ae6829"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4025ea6ad5b7cac05d76451054ae6829">v8::internal::wasm::AsyncCompileJob::resolver_</a></div><div class="ttdeci">const std::shared_ptr&lt; CompilationResultResolver &gt; resolver_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00235">module-compiler.h:235</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a4578e31793025cea1409125dcd09c0a9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4578e31793025cea1409125dcd09c0a9">v8::internal::wasm::AsyncCompileJob::detected_features_</a></div><div class="ttdeci">WasmDetectedFeatures detected_features_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00222">module-compiler.h:222</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a4dff42fd647b975ce6708820a34fffe2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a4dff42fd647b975ce6708820a34fffe2">v8::internal::wasm::AsyncCompileJob::incumbent_context_</a></div><div class="ttdeci">IndirectHandle&lt; NativeContext &gt; incumbent_context_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00232">module-compiler.h:232</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a5323277e186f3ae7566581ed5e08e518"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5323277e186f3ae7566581ed5e08e518">v8::internal::wasm::AsyncCompileJob::CreateStreamingDecoder</a></div><div class="ttdeci">std::shared_ptr&lt; StreamingDecoder &gt; CreateStreamingDecoder()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02665">module-compiler.cc:2665</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a5770958190200f2689b976a6a38ed15b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5770958190200f2689b976a6a38ed15b">v8::internal::wasm::AsyncCompileJob::isolate_</a></div><div class="ttdeci">Isolate *const isolate_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00219">module-compiler.h:219</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a5d62877a0c3d97edb19bcefa2e452c57"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5d62877a0c3d97edb19bcefa2e452c57">v8::internal::wasm::AsyncCompileJob::context_id_</a></div><div class="ttdeci">v8::metrics::Recorder::ContextId context_id_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00233">module-compiler.h:233</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a60c83d8ce32a32ad052ad7a308c64d6c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a60c83d8ce32a32ad052ad7a308c64d6c">v8::internal::wasm::AsyncCompileJob::foreground_task_runner_</a></div><div class="ttdeci">std::shared_ptr&lt; v8::TaskRunner &gt; foreground_task_runner_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00243">module-compiler.h:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a63b00b6733c1470d1ab5d592880bce73"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a63b00b6733c1470d1ab5d592880bce73">v8::internal::wasm::AsyncCompileJob::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00131">module-compiler.h:131</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a64c8723a0d7cccf91835c2b97b5b3809"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64c8723a0d7cccf91835c2b97b5b3809">v8::internal::wasm::AsyncCompileJob::context</a></div><div class="ttdeci">DirectHandle&lt; NativeContext &gt; context() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00133">module-compiler.h:133</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a64f04fcf6cdb5b478e9aa48809ae9566"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a64f04fcf6cdb5b478e9aa48809ae9566">v8::internal::wasm::AsyncCompileJob::native_context_</a></div><div class="ttdeci">IndirectHandle&lt; NativeContext &gt; native_context_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00231">module-compiler.h:231</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a793199d0fbb4820d9397652ca4ff8be9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a793199d0fbb4820d9397652ca4ff8be9">v8::internal::wasm::AsyncCompileJob::stream_</a></div><div class="ttdeci">std::shared_ptr&lt; StreamingDecoder &gt; stream_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00257">module-compiler.h:257</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a7a578d0a0c6dc346c8b242ff3ba6708a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a7a578d0a0c6dc346c8b242ff3ba6708a">v8::internal::wasm::AsyncCompileJob::native_module_</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00238">module-compiler.h:238</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a80e0dfd6274908a644fcc877c72607a9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a80e0dfd6274908a644fcc877c72607a9">v8::internal::wasm::AsyncCompileJob::FinishSuccessfully</a></div><div class="ttdeci">void FinishSuccessfully()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03212">module-compiler.cc:3212</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a88a441ca477b50b987fc34ae1c949c35"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a88a441ca477b50b987fc34ae1c949c35">v8::internal::wasm::AsyncCompileJob::context_id</a></div><div class="ttdeci">v8::metrics::Recorder::ContextId context_id() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00134">module-compiler.h:134</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a9b511b12a269d1a9e7e8b50cfdce26a9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a9b511b12a269d1a9e7e8b50cfdce26a9">v8::internal::wasm::AsyncCompileJob::~AsyncCompileJob</a></div><div class="ttdeci">~AsyncCompileJob()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02672">module-compiler.cc:2672</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_aa84200caacc713311e166e63a9b3759f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#aa84200caacc713311e166e63a9b3759f">v8::internal::wasm::AsyncCompileJob::CancelPendingForegroundTask</a></div><div class="ttdeci">void CancelPendingForegroundTask()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02990">module-compiler.cc:2990</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ab2345a7e23a4b90636bf3986bb22f54e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab2345a7e23a4b90636bf3986bb22f54e">v8::internal::wasm::AsyncCompileJob::StartBackgroundTask</a></div><div class="ttdeci">void StartBackgroundTask()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02996">module-compiler.cc:2996</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ab4666e785e9acaa99d4290e9e21f8a9e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab4666e785e9acaa99d4290e9e21f8a9e">v8::internal::wasm::AsyncCompileJob::StartForegroundTask</a></div><div class="ttdeci">void StartForegroundTask()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02974">module-compiler.cc:2974</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ab632923d90b8ad7e8d6b3bbb8e985a7f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ab632923d90b8ad7e8d6b3bbb8e985a7f">v8::internal::wasm::AsyncCompileJob::start_time_</a></div><div class="ttdeci">base::TimeTicks start_time_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00224">module-compiler.h:224</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_abb47c3e3846b0ae191c5c1c9c2ef0b84"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#abb47c3e3846b0ae191c5c1c9c2ef0b84">v8::internal::wasm::AsyncCompileJob::DoImmediately</a></div><div class="ttdeci">void DoImmediately(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03019">module-compiler.cc:3019</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ac2da5dad6fdcf531d99f2ddf886d3898"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ac2da5dad6fdcf531d99f2ddf886d3898">v8::internal::wasm::AsyncCompileJob::outstanding_finishers_</a></div><div class="ttdeci">std::atomic&lt; int32_t &gt; outstanding_finishers_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00248">module-compiler.h:248</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ac48b6808fbb2e4a304b8bfb011ba8988"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ac48b6808fbb2e4a304b8bfb011ba8988">v8::internal::wasm::AsyncCompileJob::compilation_id_</a></div><div class="ttdeci">const int compilation_id_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00260">module-compiler.h:260</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ad155f15fbc01d3537cbaf00b74c2f382"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad155f15fbc01d3537cbaf00b74c2f382">v8::internal::wasm::AsyncCompileJob::GetOrCreateNativeModule</a></div><div class="ttdeci">bool GetOrCreateNativeModule(std::shared_ptr&lt; const WasmModule &gt; module, size_t code_size_estimate)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02711">module-compiler.cc:2711</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ad958c48b5e4f28453ed24da4dc46602f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ad958c48b5e4f28453ed24da4dc46602f">v8::internal::wasm::AsyncCompileJob::ExecuteForegroundTaskImmediately</a></div><div class="ttdeci">void ExecuteForegroundTaskImmediately()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02982">module-compiler.cc:2982</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_adc4f41e503922e7570bc5d1fbfc95bec"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adc4f41e503922e7570bc5d1fbfc95bec">v8::internal::wasm::AsyncCompileJob::metrics_event_</a></div><div class="ttdeci">v8::metrics::WasmModuleDecoded metrics_event_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00234">module-compiler.h:234</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_add267630191de419bf4467180a938b3b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#add267630191de419bf4467180a938b3b">v8::internal::wasm::AsyncCompileJob::DoAsync</a></div><div class="ttdeci">void DoAsync(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03025">module-compiler.cc:3025</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_adef95f093ae1dc1da035c1ec5d338c23"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#adef95f093ae1dc1da035c1ec5d338c23">v8::internal::wasm::AsyncCompileJob::CreateNativeModule</a></div><div class="ttdeci">void CreateNativeModule(std::shared_ptr&lt; const WasmModule &gt; module, size_t code_size_estimate)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02691">module-compiler.cc:2691</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ae77c020ba9cb9930263e6ef833d5186d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae77c020ba9cb9930263e6ef833d5186d">v8::internal::wasm::AsyncCompileJob::pending_foreground_task_</a></div><div class="ttdeci">CompileTask * pending_foreground_task_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00251">module-compiler.h:251</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ae9267b6a79f50110f5e4a79b38d0678d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9267b6a79f50110f5e4a79b38d0678d">v8::internal::wasm::AsyncCompileJob::bytes_copy_</a></div><div class="ttdeci">base::OwnedVector&lt; const uint8_t &gt; bytes_copy_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00227">module-compiler.h:227</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_ae9af46f338ef59099371aabe35332e84"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#ae9af46f338ef59099371aabe35332e84">v8::internal::wasm::AsyncCompileJob::PrepareRuntimeObjects</a></div><div class="ttdeci">void PrepareRuntimeObjects()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02722">module-compiler.cc:2722</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_af3c71b1c92469d246d929fe3f6ea1061"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af3c71b1c92469d246d929fe3f6ea1061">v8::internal::wasm::AsyncCompileJob::step_</a></div><div class="ttdeci">std::unique_ptr&lt; CompileStep &gt; step_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00240">module-compiler.h:240</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_af40a1ad30e0fb57f80aa1d76af7bdc84"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af40a1ad30e0fb57f80aa1d76af7bdc84">v8::internal::wasm::AsyncCompileJob::DoSync</a></div><div class="ttdeci">void DoSync(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03012">module-compiler.cc:3012</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_af6b76f3ffe061364d7d7b2e2b2090e5b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af6b76f3ffe061364d7d7b2e2b2090e5b">v8::internal::wasm::AsyncCompileJob::wire_bytes_</a></div><div class="ttdeci">ModuleWireBytes wire_bytes_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00230">module-compiler.h:230</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_af8542ed1d50257c03ea1bd612150af14"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#af8542ed1d50257c03ea1bd612150af14">v8::internal::wasm::AsyncCompileJob::UseExistingForegroundTask</a></div><div class="ttdeci">UseExistingForegroundTask</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8h_source.html#l00192">module-compiler.h:192</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html">v8::internal::wasm::AsyncStreamingProcessor</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02618">module-compiler.cc:2618</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a0658423182f9a376a82ffb6a3ea18529"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a0658423182f9a376a82ffb6a3ea18529">v8::internal::wasm::AsyncStreamingProcessor::decoder_</a></div><div class="ttdeci">ModuleDecoder decoder_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02650">module-compiler.cc:2650</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a1299b61f757fe2cfa5ec698e755650e0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a1299b61f757fe2cfa5ec698e755650e0">v8::internal::wasm::AsyncStreamingProcessor::OnFinishedStream</a></div><div class="ttdeci">void OnFinishedStream(base::OwnedVector&lt; const uint8_t &gt; bytes, bool after_error) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03387">module-compiler.cc:3387</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a19842d57ed6e47f88fc3ccb57cd43619"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a19842d57ed6e47f88fc3ccb57cd43619">v8::internal::wasm::AsyncStreamingProcessor::OnFinishedChunk</a></div><div class="ttdeci">void OnFinishedChunk() override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03381">module-compiler.cc:3381</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a221daf9573abdb3dd51a8c6b5b90f240"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a221daf9573abdb3dd51a8c6b5b90f240">v8::internal::wasm::AsyncStreamingProcessor::job_</a></div><div class="ttdeci">AsyncCompileJob * job_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02651">module-compiler.cc:2651</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a41aab3efc6dfb1d49db122d8d43176f6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a41aab3efc6dfb1d49db122d8d43176f6">v8::internal::wasm::AsyncStreamingProcessor::before_code_section_</a></div><div class="ttdeci">bool before_code_section_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02655">module-compiler.cc:2655</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a51402d2262d54931c0b503f9c652f89f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a51402d2262d54931c0b503f9c652f89f">v8::internal::wasm::AsyncStreamingProcessor::prefix_hasher_</a></div><div class="ttdeci">base::Hasher prefix_hasher_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02662">module-compiler.cc:2662</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a537df0ea5bce7272d916cb863442a908"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a537df0ea5bce7272d916cb863442a908">v8::internal::wasm::AsyncStreamingProcessor::validate_functions_job_handle_</a></div><div class="ttdeci">std::unique_ptr&lt; JobHandle &gt; validate_functions_job_handle_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02657">module-compiler.cc:2657</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a707cf5b73e892c3ddd7b74cef826c429"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a707cf5b73e892c3ddd7b74cef826c429">v8::internal::wasm::AsyncStreamingProcessor::ProcessCodeSectionHeader</a></div><div class="ttdeci">bool ProcessCodeSectionHeader(int num_functions, uint32_t functions_mismatch_error_offset, std::shared_ptr&lt; WireBytesStorage &gt;, int code_section_start, int code_section_length) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03275">module-compiler.cc:3275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a807224ecf5ba4eaf8434dea9b99a78a8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a807224ecf5ba4eaf8434dea9b99a78a8">v8::internal::wasm::AsyncStreamingProcessor::OnAbort</a></div><div class="ttdeci">void OnAbort() override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03520">module-compiler.cc:3520</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_a9da068ebd21214867da972e51689bee5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#a9da068ebd21214867da972e51689bee5">v8::internal::wasm::AsyncStreamingProcessor::AsyncStreamingProcessor</a></div><div class="ttdeci">AsyncStreamingProcessor(AsyncCompileJob *job)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03227">module-compiler.cc:3227</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_aa26940dbb1434275daab70cdf12e8326"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aa26940dbb1434275daab70cdf12e8326">v8::internal::wasm::AsyncStreamingProcessor::ProcessFunctionBody</a></div><div class="ttdeci">bool ProcessFunctionBody(base::Vector&lt; const uint8_t &gt; bytes, uint32_t offset) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03327">module-compiler.cc:3327</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_aac7514bd78200ea2d33761023d266de4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aac7514bd78200ea2d33761023d266de4">v8::internal::wasm::AsyncStreamingProcessor::ProcessSection</a></div><div class="ttdeci">bool ProcessSection(SectionCode section_code, base::Vector&lt; const uint8_t &gt; bytes, uint32_t offset) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03244">module-compiler.cc:3244</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_abd92e250972b00568ca25570a16ab1f1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#abd92e250972b00568ca25570a16ab1f1">v8::internal::wasm::AsyncStreamingProcessor::validate_functions_job_data_</a></div><div class="ttdeci">ValidateFunctionsStreamingJobData validate_functions_job_data_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02656">module-compiler.cc:2656</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_ac33024dbe8bff894aec911642a350dc6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac33024dbe8bff894aec911642a350dc6">v8::internal::wasm::AsyncStreamingProcessor::Deserialize</a></div><div class="ttdeci">bool Deserialize(base::Vector&lt; const uint8_t &gt; wire_bytes, base::Vector&lt; const uint8_t &gt; module_bytes) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03535">module-compiler.cc:3535</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_ac67a8f7664b800ae0d94e1bb983cbae3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ac67a8f7664b800ae0d94e1bb983cbae3">v8::internal::wasm::AsyncStreamingProcessor::num_functions_</a></div><div class="ttdeci">int num_functions_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02653">module-compiler.cc:2653</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_aded301ffb872d0ebb5f27eb3ee0d06a3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aded301ffb872d0ebb5f27eb3ee0d06a3">v8::internal::wasm::AsyncStreamingProcessor::compilation_unit_builder_</a></div><div class="ttdeci">std::unique_ptr&lt; CompilationUnitBuilder &gt; compilation_unit_builder_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02652">module-compiler.cc:2652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_ae4c1a9be1a289f121f11888233dc2065"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#ae4c1a9be1a289f121f11888233dc2065">v8::internal::wasm::AsyncStreamingProcessor::CommitCompilationUnits</a></div><div class="ttdeci">void CommitCompilationUnits()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03376">module-compiler.cc:3376</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_aee9a0b6fb579488ab89cc95ea9e6caef"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aee9a0b6fb579488ab89cc95ea9e6caef">v8::internal::wasm::AsyncStreamingProcessor::ProcessModuleHeader</a></div><div class="ttdeci">bool ProcessModuleHeader(base::Vector&lt; const uint8_t &gt; bytes) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03233">module-compiler.cc:3233</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor_html_aef24faaab0279a141c00469c1e66b617"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncStreamingProcessor.html#aef24faaab0279a141c00469c1e66b617">v8::internal::wasm::AsyncStreamingProcessor::prefix_cache_hit_</a></div><div class="ttdeci">bool prefix_cache_hit_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02654">module-compiler.cc:2654</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html">v8::internal::wasm::CallSiteFeedback</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00492">wasm-module.h:492</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_a581b4af07afd766cb8722d057fee809b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a581b4af07afd766cb8722d057fee809b">v8::internal::wasm::CallSiteFeedback::CreateMegamorphic</a></div><div class="ttdeci">static CallSiteFeedback CreateMegamorphic()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00499">wasm-module.h:499</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_a6088a3693fde5bfe38d4c287cb3ef006"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a6088a3693fde5bfe38d4c287cb3ef006">v8::internal::wasm::CallSiteFeedback::is_megamorphic</a></div><div class="ttdeci">bool is_megamorphic() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00577">wasm-module.h:577</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_a6d80e8276ad897f0d1bb2157b33aaf0d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a6d80e8276ad897f0d1bb2157b33aaf0d">v8::internal::wasm::CallSiteFeedback::num_cases</a></div><div class="ttdeci">int num_cases() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00555">wasm-module.h:555</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_a7a74f41aeae304037366748ed360538a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a7a74f41aeae304037366748ed360538a">v8::internal::wasm::CallSiteFeedback::call_count</a></div><div class="ttdeci">int call_count(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00565">wasm-module.h:565</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_a8c5e0d187ba12d271429ec0d6b1f93fe"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#a8c5e0d187ba12d271429ec0d6b1f93fe">v8::internal::wasm::CallSiteFeedback::has_non_inlineable_targets</a></div><div class="ttdeci">bool has_non_inlineable_targets() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00570">wasm-module.h:570</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CallSiteFeedback_html_aa53156b01a8f7b14b7fb11da2e2c150c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CallSiteFeedback.html#aa53156b01a8f7b14b7fb11da2e2c150c">v8::internal::wasm::CallSiteFeedback::function_index</a></div><div class="ttdeci">int function_index(int i) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00560">wasm-module.h:560</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalSig_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">v8::internal::wasm::CanonicalSig</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01298">value-type.h:1298</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationEventCallback_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationEventCallback.html">v8::internal::wasm::CompilationEventCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment_8h_source.html#l00103">compilation-environment.h:103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html">v8::internal::wasm::CompilationState</a></div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment_8h_source.html#l00125">compilation-environment.h:125</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a0fccff8ad60688e7fbd9b4c853e90439"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a0fccff8ad60688e7fbd9b4c853e90439">v8::internal::wasm::CompilationState::CancelInitialCompilation</a></div><div class="ttdeci">void CancelInitialCompilation()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00897">module-compiler.cc:897</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a2badfff8eee4ca33ffd54ab30ae5b1bf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a2badfff8eee4ca33ffd54ab30ae5b1bf">v8::internal::wasm::CompilationState::failed</a></div><div class="ttdeci">bool failed() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00938">module-compiler.cc:938</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a3763475c99a36d50427d6c2b3f4e1d07"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a3763475c99a36d50427d6c2b3f4e1d07">v8::internal::wasm::CompilationState::UpdateDetectedFeatures</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT WasmDetectedFeatures UpdateDetectedFeatures(WasmDetectedFeatures)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00971">module-compiler.cc:971</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a65d1dbc0c9fdd995fd0eb1fbbf8f1947"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a65d1dbc0c9fdd995fd0eb1fbbf8f1947">v8::internal::wasm::CompilationState::~CompilationState</a></div><div class="ttdeci">~CompilationState()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00889">module-compiler.cc:889</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a74e1f8aaf59a147b239151b5b913362f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a74e1f8aaf59a147b239151b5b913362f">v8::internal::wasm::CompilationState::baseline_compilation_finished</a></div><div class="ttdeci">bool baseline_compilation_finished() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00940">module-compiler.cc:940</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a7ed524741d5660c9c342c654df2ac37e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a7ed524741d5660c9c342c654df2ac37e">v8::internal::wasm::CompilationState::AddCallback</a></div><div class="ttdeci">void AddCallback(std::unique_ptr&lt; CompilationEventCallback &gt; callback)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00914">module-compiler.cc:914</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a80ea8bcbfde72f2c012a2002b8dacedf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a80ea8bcbfde72f2c012a2002b8dacedf">v8::internal::wasm::CompilationState::TierUpAllFunctions</a></div><div class="ttdeci">void TierUpAllFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00919">module-compiler.cc:919</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a82cff25a5e68e95bd42f7c5c45058171"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a82cff25a5e68e95bd42f7c5c45058171">v8::internal::wasm::CompilationState::SetWireBytesStorage</a></div><div class="ttdeci">void SetWireBytesStorage(std::shared_ptr&lt; WireBytesStorage &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00904">module-compiler.cc:904</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a94616121bb815ddab13b79d737542e29"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a94616121bb815ddab13b79d737542e29">v8::internal::wasm::CompilationState::CancelCompilation</a></div><div class="ttdeci">void CancelCompilation()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00893">module-compiler.cc:893</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a9c56f9d64da89e21922aaf94fab9c734"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9c56f9d64da89e21922aaf94fab9c734">v8::internal::wasm::CompilationState::AllowAnotherTopTierJobForAllFunctions</a></div><div class="ttdeci">void AllowAnotherTopTierJobForAllFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00927">module-compiler.cc:927</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_a9ebb11cd7d9fb9633666bdebbd038a5f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#a9ebb11cd7d9fb9633666bdebbd038a5f">v8::internal::wasm::CompilationState::InitializeAfterDeserialization</a></div><div class="ttdeci">void InitializeAfterDeserialization(base::Vector&lt; const int &gt; lazy_functions, base::Vector&lt; const int &gt; eager_functions)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00931">module-compiler.cc:931</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_aa483870e07defd3034a0d0a88e41ad8c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa483870e07defd3034a0d0a88e41ad8c">v8::internal::wasm::CompilationState::New</a></div><div class="ttdeci">static std::unique_ptr&lt; CompilationState &gt; New(const std::shared_ptr&lt; NativeModule &gt; &amp;, std::shared_ptr&lt; Counters &gt;, WasmDetectedFeatures detected_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00958">module-compiler.cc:958</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_aa615c60c7e1fc45f22289c32bf136cc3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aa615c60c7e1fc45f22289c32bf136cc3">v8::internal::wasm::CompilationState::SetError</a></div><div class="ttdeci">void SetError()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00902">module-compiler.cc:902</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_aaae5bb20ea313ddf1ccf1393ca5ade67"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aaae5bb20ea313ddf1ccf1393ca5ade67">v8::internal::wasm::CompilationState::set_compilation_id</a></div><div class="ttdeci">void set_compilation_id(int compilation_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00944">module-compiler.cc:944</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_ab81cbf88e8bd750d5d7e198464e923f3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ab81cbf88e8bd750d5d7e198464e923f3">v8::internal::wasm::CompilationState::InitCompileJob</a></div><div class="ttdeci">void InitCompileJob()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00891">module-compiler.cc:891</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_ac43a967338375f3962c4b31151e5d713"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac43a967338375f3962c4b31151e5d713">v8::internal::wasm::CompilationState::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00948">module-compiler.cc:948</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_ac94f5604f1684b2f28391cef5a2dffb7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ac94f5604f1684b2f28391cef5a2dffb7">v8::internal::wasm::CompilationState::GetWireBytesStorage</a></div><div class="ttdeci">std::shared_ptr&lt; WireBytesStorage &gt; GetWireBytesStorage() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00909">module-compiler.cc:909</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_aceda8f4173dae2b1acfdff2cf0bd9128"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#aceda8f4173dae2b1acfdff2cf0bd9128">v8::internal::wasm::CompilationState::AllowAnotherTopTierJob</a></div><div class="ttdeci">void AllowAnotherTopTierJob(uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00923">module-compiler.cc:923</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_ad47276201a3451517914237634bef777"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#ad47276201a3451517914237634bef777">v8::internal::wasm::CompilationState::PublishCode</a></div><div class="ttdeci">std::vector&lt; WasmCode * &gt; PublishCode(base::Vector&lt; UnpublishedWasmCode &gt; unpublished_code)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00952">module-compiler.cc:952</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompilationState_html_afda3d9cadd9a4eb735ff81fb8b5d0ea4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompilationState.html#afda3d9cadd9a4eb735ff81fb8b5d0ea4">v8::internal::wasm::CompilationState::detected_features</a></div><div class="ttdeci">WasmDetectedFeatures detected_features() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00967">module-compiler.cc:967</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">v8::internal::wasm::CompileTimeImports</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00150">wasm-features.h:150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html_a3a42250749ca938e52a5116f2e5720eb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a3a42250749ca938e52a5116f2e5720eb">v8::internal::wasm::CompileTimeImports::has_string_constants</a></div><div class="ttdeci">bool has_string_constants(base::Vector&lt; const uint8_t &gt; name) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00176">wasm-features.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html_a7bddfd43d06279d0cc613b668aa7e052"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a7bddfd43d06279d0cc613b668aa7e052">v8::internal::wasm::CompileTimeImports::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00175">wasm-features.h:175</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html_aa10cbaf2a25c618bfdda0ed3cf4b76da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#aa10cbaf2a25c618bfdda0ed3cf4b76da">v8::internal::wasm::CompileTimeImports::contains</a></div><div class="ttdeci">bool contains(CompileTimeImport imp) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00181">wasm-features.h:181</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ErrorThrower_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">v8::internal::wasm::ErrorThrower</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00123">wasm-result.h:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ErrorThrower_html_a2d32c2f4fadecb8c1434fa2998171e23"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a2d32c2f4fadecb8c1434fa2998171e23">v8::internal::wasm::ErrorThrower::CompileFailed</a></div><div class="ttdeci">void CompileFailed(const WasmError &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00138">wasm-result.h:138</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ErrorThrower_html_a4c6a67e2810545c4207da98f29137b62"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a4c6a67e2810545c4207da98f29137b62">v8::internal::wasm::ErrorThrower::Reify</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT DirectHandle&lt; JSObject &gt; Reify()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8cc_source.html#l00107">wasm-result.cc:107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ErrorThrower_html_a603a53d1ac3dddd81154744ff36db838"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html#a603a53d1ac3dddd81154744ff36db838">v8::internal::wasm::ErrorThrower::error</a></div><div class="ttdeci">bool error() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00149">wasm-result.h:149</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html">v8::internal::wasm::FeedbackMaker</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01355">module-compiler.cc:1355</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a0cdc61b56b654326fae1c9dd7b0e5f73"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a0cdc61b56b654326fae1c9dd7b0e5f73">v8::internal::wasm::FeedbackMaker::AddCall</a></div><div class="ttdeci">void AddCall(int target, int count)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01418">module-compiler.cc:1418</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a1228df35a1034986937d698a12ec48d5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1228df35a1034986937d698a12ec48d5">v8::internal::wasm::FeedbackMaker::AddCallRefCandidate</a></div><div class="ttdeci">void AddCallRefCandidate(Tagged&lt; WasmFuncRef &gt; funcref, int count)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01368">module-compiler.cc:1368</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a1de5839ed3afdbc96278501fce06c95a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a1de5839ed3afdbc96278501fce06c95a">v8::internal::wasm::FeedbackMaker::instance_data_</a></div><div class="ttdeci">const Tagged&lt; WasmTrustedInstanceData &gt; instance_data_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01502">module-compiler.cc:1502</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a21cb7646a6fd34c811c71f4651fcb9d2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a21cb7646a6fd34c811c71f4651fcb9d2">v8::internal::wasm::FeedbackMaker::AddCallIndirectCandidate</a></div><div class="ttdeci">void AddCallIndirectCandidate(Tagged&lt; Object &gt; target_truncated_obj, int count)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01384">module-compiler.cc:1384</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a2213da6f4221efbea81330fd8638df66"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a2213da6f4221efbea81330fd8638df66">v8::internal::wasm::FeedbackMaker::FinalizeCall</a></div><div class="ttdeci">void FinalizeCall()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01453">module-compiler.cc:1453</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a35024221f0a5d84611039a0670393b88"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a35024221f0a5d84611039a0670393b88">v8::internal::wasm::FeedbackMaker::HasTargetCached</a></div><div class="ttdeci">bool HasTargetCached(int target)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01441">module-compiler.cc:1441</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a421bfdaf8fe8b4f0e852affdc3da0352"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a421bfdaf8fe8b4f0e852affdc3da0352">v8::internal::wasm::FeedbackMaker::set_has_non_inlineable_targets</a></div><div class="ttdeci">void set_has_non_inlineable_targets()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01491">module-compiler.cc:1491</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a5494dd4e759c71ec8dfab525fb7cb4e1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5494dd4e759c71ec8dfab525fb7cb4e1">v8::internal::wasm::FeedbackMaker::isolate_</a></div><div class="ttdeci">Isolate *const isolate_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01501">module-compiler.cc:1501</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a5e77f5f48f3444fbf75a8a66ee8690f1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a5e77f5f48f3444fbf75a8a66ee8690f1">v8::internal::wasm::FeedbackMaker::FeedbackMaker</a></div><div class="ttdeci">FeedbackMaker(Isolate *const isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index, int num_calls)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01357">module-compiler.cc:1357</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a66eb2e349511d93e32a382a683834e17"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a66eb2e349511d93e32a382a683834e17">v8::internal::wasm::FeedbackMaker::set_megamorphic</a></div><div class="ttdeci">void set_megamorphic()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01492">module-compiler.cc:1492</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a74a8471ae23a09befac111d1fa94f064"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a74a8471ae23a09befac111d1fa94f064">v8::internal::wasm::FeedbackMaker::cache_usage_</a></div><div class="ttdeci">int cache_usage_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01507">module-compiler.cc:1507</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a7614c91282ffebca7c6b28e13265f028"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7614c91282ffebca7c6b28e13265f028">v8::internal::wasm::FeedbackMaker::seen_calls_</a></div><div class="ttdeci">int seen_calls_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01504">module-compiler.cc:1504</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_a7cdb91edd1fad24d531f68e6b1b53fb6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#a7cdb91edd1fad24d531f68e6b1b53fb6">v8::internal::wasm::FeedbackMaker::result_</a></div><div class="ttdeci">base::OwnedVector&lt; CallSiteFeedback &gt; result_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01503">module-compiler.cc:1503</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_ab2f34c0d99a09f4b0bf597934193d30a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab2f34c0d99a09f4b0bf597934193d30a">v8::internal::wasm::FeedbackMaker::AddResult</a></div><div class="ttdeci">void AddResult(CallSiteFeedback feedback)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01447">module-compiler.cc:1447</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_ab949e31f99ea4d685c9ad55c495d3743"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ab949e31f99ea4d685c9ad55c495d3743">v8::internal::wasm::FeedbackMaker::func_index_</a></div><div class="ttdeci">const int func_index_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01506">module-compiler.cc:1506</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_ac5e0bf69ca78dec84766bcb99337a1dc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ac5e0bf69ca78dec84766bcb99337a1dc">v8::internal::wasm::FeedbackMaker::is_megamorphic_</a></div><div class="ttdeci">bool is_megamorphic_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01513">module-compiler.cc:1513</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_ad0b6271abe0b371fb05b9cfc3ede0f5a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#ad0b6271abe0b371fb05b9cfc3ede0f5a">v8::internal::wasm::FeedbackMaker::has_non_inlineable_targets_</a></div><div class="ttdeci">bool has_non_inlineable_targets_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01510">module-compiler.cc:1510</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_adbcf8884373c5ab48d1fe9e7b6cdbb6a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#adbcf8884373c5ab48d1fe9e7b6cdbb6a">v8::internal::wasm::FeedbackMaker::targets_cache_</a></div><div class="ttdeci">std::array&lt; int, kMaxPolymorphism &gt; targets_cache_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01508">module-compiler.cc:1508</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_aea42c4ef1afb972bf2797399683207e7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aea42c4ef1afb972bf2797399683207e7">v8::internal::wasm::FeedbackMaker::counts_cache_</a></div><div class="ttdeci">std::array&lt; int, kMaxPolymorphism &gt; counts_cache_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01509">module-compiler.cc:1509</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_aefda39b4f72b34a82b4c94cb0de549ee"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#aefda39b4f72b34a82b4c94cb0de549ee">v8::internal::wasm::FeedbackMaker::GetResult</a></div><div class="ttdeci">base::OwnedVector&lt; CallSiteFeedback &gt; GetResult() &amp;&amp;</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01496">module-compiler.cc:1496</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1FeedbackMaker_html_af5d6075341ff19ff2ae481c9df75665a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1FeedbackMaker.html#af5d6075341ff19ff2ae481c9df75665a">v8::internal::wasm::FeedbackMaker::num_imported_functions_</a></div><div class="ttdeci">const int num_imported_functions_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01505">module-compiler.cc:1505</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951">v8::internal::wasm::HeapType::kExtern</a></div><div class="ttdeci">@ kExtern</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00797">value-type.h:797</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html">v8::internal::wasm::ModuleDecoder</a></div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8h_source.html#l00167">module-decoder.h:167</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_a158d159abc6eff4987e7b574305f6efd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a158d159abc6eff4987e7b574305f6efd">v8::internal::wasm::ModuleDecoder::DecodeSection</a></div><div class="ttdeci">void DecodeSection(SectionCode section_code, base::Vector&lt; const uint8_t &gt; bytes, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00158">module-decoder.cc:158</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_a6261e2904d468325a0ce31fc10e95b65"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a6261e2904d468325a0ce31fc10e95b65">v8::internal::wasm::ModuleDecoder::ok</a></div><div class="ttdeci">bool ok() const</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00191">module-decoder.cc:191</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_a80a8197a6d39d2a6cf242bdcf6b01425"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a80a8197a6d39d2a6cf242bdcf6b01425">v8::internal::wasm::ModuleDecoder::StartCodeSection</a></div><div class="ttdeci">void StartCodeSection(WireBytesRef section_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00169">module-decoder.cc:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_a8acb438d35687ddde33f2711f57fc43e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8acb438d35687ddde33f2711f57fc43e">v8::internal::wasm::ModuleDecoder::shared_module</a></div><div class="ttdeci">const std::shared_ptr&lt; WasmModule &gt; &amp; shared_module() const</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00150">module-decoder.cc:150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_a8b70e09648e0eff724498aace4f9b98d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#a8b70e09648e0eff724498aace4f9b98d">v8::internal::wasm::ModuleDecoder::module</a></div><div class="ttdeci">WasmModule * module() const</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8h_source.html#l00188">module-decoder.h:188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_ab269c7b3c86924c81fcad654b3e3a446"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#ab269c7b3c86924c81fcad654b3e3a446">v8::internal::wasm::ModuleDecoder::FinishDecoding</a></div><div class="ttdeci">ModuleResult FinishDecoding()</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00178">module-decoder.cc:178</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_adf6bbeca3b9ea708958affa0b8901d9c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#adf6bbeca3b9ea708958affa0b8901d9c">v8::internal::wasm::ModuleDecoder::DecodeModuleHeader</a></div><div class="ttdeci">void DecodeModuleHeader(base::Vector&lt; const uint8_t &gt; bytes)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00154">module-decoder.cc:154</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_ae4fc5f48b45481886c6146a470de6498"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#ae4fc5f48b45481886c6146a470de6498">v8::internal::wasm::ModuleDecoder::IdentifyUnknownSection</a></div><div class="ttdeci">static size_t IdentifyUnknownSection(ModuleDecoder *decoder, base::Vector&lt; const uint8_t &gt; bytes, uint32_t offset, SectionCode *result)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00180">module-decoder.cc:180</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_aefc7fd0a74afba7f3300dde744b3c09d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#aefc7fd0a74afba7f3300dde744b3c09d">v8::internal::wasm::ModuleDecoder::DecodeFunctionBody</a></div><div class="ttdeci">void DecodeFunctionBody(uint32_t index, uint32_t size, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00164">module-decoder.cc:164</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ModuleDecoder_html_af1e71390300a70d4322bbff2ec9c641e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ModuleDecoder.html#af1e71390300a70d4322bbff2ec9c641e">v8::internal::wasm::ModuleDecoder::CheckFunctionsCount</a></div><div class="ttdeci">bool CheckFunctionsCount(uint32_t functions_count, uint32_t error_offset)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00173">module-decoder.cc:173</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_ac7e973c109cc4129f87b3cc3c775f10b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#ac7e973c109cc4129f87b3cc3c775f10b">v8::internal::wasm::NativeModuleCache::PrefixHash</a></div><div class="ttdeci">static size_t PrefixHash(base::Vector&lt; const uint8_t &gt; wire_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00412">wasm-engine.cc:412</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">v8::internal::wasm::NativeModule</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00603">wasm-code-manager.h:603</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a04f2f50aa9d1cbc1dc28e60dbe687f74"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">v8::internal::wasm::NativeModule::module</a></div><div class="ttdeci">const WasmModule * module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00766">wasm-code-manager.h:766</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a37a8384fb8317a24c3d58cf66ff64123"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a37a8384fb8317a24c3d58cf66ff64123">v8::internal::wasm::NativeModule::GetCode</a></div><div class="ttdeci">WasmCode * GetCode(uint32_t index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l01691">wasm-code-manager.cc:1691</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a4210dcf60ee0c22b95de93af93f17f86"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">v8::internal::wasm::NativeModule::num_functions</a></div><div class="ttdeci">uint32_t num_functions() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00752">wasm-code-manager.h:752</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a56928b35d0408f401ca1d72c8c80162c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a56928b35d0408f401ca1d72c8c80162c">v8::internal::wasm::NativeModule::compilation_state</a></div><div class="ttdeci">CompilationState * compilation_state() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00748">wasm-code-manager.h:748</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a7394f35597a2e806ed37a5131279919d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7394f35597a2e806ed37a5131279919d">v8::internal::wasm::NativeModule::log_code</a></div><div class="ttdeci">bool log_code() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00897">wasm-code-manager.h:897</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a74d82ac97a7bb02ac5781d209ffe2bc5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a74d82ac97a7bb02ac5781d209ffe2bc5">v8::internal::wasm::NativeModule::HasCodeWithTier</a></div><div class="ttdeci">bool HasCodeWithTier(uint32_t index, ExecutionTier tier) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l01703">wasm-code-manager.cc:1703</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a88fe8f1d6e45f64edf0add83a8befd42"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a88fe8f1d6e45f64edf0add83a8befd42">v8::internal::wasm::NativeModule::AddLiftoffBailout</a></div><div class="ttdeci">void AddLiftoffBailout()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00822">wasm-code-manager.h:822</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a91db58c0a3ed6efdba8d82e23a659fa7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7">v8::internal::wasm::NativeModule::PublishCode</a></div><div class="ttdeci">WasmCode * PublishCode(UnpublishedWasmCode)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l01428">wasm-code-manager.cc:1428</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a957b590c391c9dc0949cdaff8c94cf05"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a957b590c391c9dc0949cdaff8c94cf05">v8::internal::wasm::NativeModule::wire_bytes</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; wire_bytes() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00763">wasm-code-manager.h:763</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a95dc87711f2fbd647080305bf39e447f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a95dc87711f2fbd647080305bf39e447f">v8::internal::wasm::NativeModule::IsInDebugState</a></div><div class="ttdeci">DebugState IsInDebugState() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00848">wasm-code-manager.h:848</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a9a49a036ab412a6c462feba4042ef5e8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9a49a036ab412a6c462feba4042ef5e8">v8::internal::wasm::NativeModule::lazy_compile_frozen</a></div><div class="ttdeci">bool lazy_compile_frozen() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00762">wasm-code-manager.h:762</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a9dc26792c1058956f82dd7114444a607"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9dc26792c1058956f82dd7114444a607">v8::internal::wasm::NativeModule::compile_imports</a></div><div class="ttdeci">const CompileTimeImports &amp; compile_imports() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00829">wasm-code-manager.h:829</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_abc4f3edf1e0fcd8adc53f38952345aed"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">v8::internal::wasm::NativeModule::AddCompiledCode</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT UnpublishedWasmCode AddCompiledCode(WasmCompilationResult &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02636">wasm-code-manager.cc:2636</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ac1c67fdd89ee3efcc205ed3885a12b36"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac1c67fdd89ee3efcc205ed3885a12b36">v8::internal::wasm::NativeModule::shared_module</a></div><div class="ttdeci">std::shared_ptr&lt; const WasmModule &gt; shared_module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00767">wasm-code-manager.h:767</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ac8900d676fd063b88a6876f464dd8a07"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac8900d676fd063b88a6876f464dd8a07">v8::internal::wasm::NativeModule::enabled_features</a></div><div class="ttdeci">WasmEnabledFeatures enabled_features() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00828">wasm-code-manager.h:828</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveNonDebugCode</a></div><div class="ttdeci">@ kRemoveNonDebugCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_af886dc3d493824b7a1ae1e1f5ae02e42"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af886dc3d493824b7a1ae1e1f5ae02e42">v8::internal::wasm::NativeModule::num_imported_functions</a></div><div class="ttdeci">uint32_t num_imported_functions() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00755">wasm-code-manager.h:755</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ProfileInformation_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html">v8::internal::wasm::ProfileInformation</a></div><div class="ttdef"><b>Definition:</b> <a href="pgo_8h_source.html#l00020">pgo.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ProfileInformation_html_a5bacce338f1db16d9d674d8f457087d5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#a5bacce338f1db16d9d674d8f457087d5">v8::internal::wasm::ProfileInformation::tiered_up_functions</a></div><div class="ttdeci">base::Vector&lt; const uint32_t &gt; tiered_up_functions() const</div><div class="ttdef"><b>Definition:</b> <a href="pgo_8h_source.html#l00034">pgo.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ProfileInformation_html_ad65daa29e05ac5cd3a2102976642d0dd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ProfileInformation.html#ad65daa29e05ac5cd3a2102976642d0dd">v8::internal::wasm::ProfileInformation::executed_functions</a></div><div class="ttdeci">base::Vector&lt; const uint32_t &gt; executed_functions() const</div><div class="ttdef"><b>Definition:</b> <a href="pgo_8h_source.html#l00031">pgo.h:31</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1Result_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1Result.html">v8::internal::wasm::Result</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00068">wasm-result.h:68</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1Result_html_a084b2eb633d37457622cd4dc1cd2e506"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1Result.html#a084b2eb633d37457622cd4dc1cd2e506">v8::internal::wasm::Result::ok</a></div><div class="ttdeci">bool ok() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00099">wasm-result.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1Result_html_a307af8b5af132a63ed8c43de7f7f9f3b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1Result.html#a307af8b5af132a63ed8c43de7f7f9f3b">v8::internal::wasm::Result::value</a></div><div class="ttdeci">const T &amp; value() const &amp;</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00108">wasm-result.h:108</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1Result_html_aff1e1589e6852f41ed5a060d5e4517f9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1Result.html#aff1e1589e6852f41ed5a060d5e4517f9">v8::internal::wasm::Result::failed</a></div><div class="ttdeci">bool failed() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00100">wasm-result.h:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StreamingDecoder_html_a64bbde97cda65ad78a00333670c8fb05"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html#a64bbde97cda65ad78a00333670c8fb05">v8::internal::wasm::StreamingDecoder::CreateAsyncStreamingDecoder</a></div><div class="ttdeci">static std::unique_ptr&lt; StreamingDecoder &gt; CreateAsyncStreamingDecoder(std::unique_ptr&lt; StreamingProcessor &gt; processor)</div><div class="ttdef"><b>Definition:</b> <a href="streaming-decoder_8cc_source.html#l00771">streaming-decoder.cc:771</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StreamingProcessor_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StreamingProcessor.html">v8::internal::wasm::StreamingProcessor</a></div><div class="ttdef"><b>Definition:</b> <a href="streaming-decoder_8h_source.html#l00027">streaming-decoder.h:27</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html">v8::internal::wasm::TransitiveTypeFeedbackProcessor</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01286">module-compiler.cc:1286</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a14ad0c368dcdb3b57a95a18ae4b3e245"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ad0c368dcdb3b57a95a18ae4b3e245">v8::internal::wasm::TransitiveTypeFeedbackProcessor::instance_data_</a></div><div class="ttdeci">const Tagged&lt; WasmTrustedInstanceData &gt; instance_data_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01342">module-compiler.cc:1342</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a14ecf3410e1fd0bc75f57f6f06b6beaf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a14ecf3410e1fd0bc75f57f6f06b6beaf">v8::internal::wasm::TransitiveTypeFeedbackProcessor::EnqueueCallees</a></div><div class="ttdeci">void EnqueueCallees(base::Vector&lt; CallSiteFeedback &gt; feedback)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01319">module-compiler.cc:1319</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a2eda69ab016a1f105368d8d2df5073f1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a2eda69ab016a1f105368d8d2df5073f1">v8::internal::wasm::TransitiveTypeFeedbackProcessor::queue_</a></div><div class="ttdeci">std::set&lt; int &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01348">module-compiler.cc:1348</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a35a64452e0fd990b109dab7ebae86f8b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a35a64452e0fd990b109dab7ebae86f8b">v8::internal::wasm::TransitiveTypeFeedbackProcessor::feedback_for_function_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, FunctionTypeFeedback &gt; &amp; feedback_for_function_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01347">module-compiler.cc:1347</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a381518a62cb3d6130a6eb99d495c0bd5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a381518a62cb3d6130a6eb99d495c0bd5">v8::internal::wasm::TransitiveTypeFeedbackProcessor::TransitiveTypeFeedbackProcessor</a></div><div class="ttdeci">TransitiveTypeFeedbackProcessor(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01296">module-compiler.cc:1296</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a3f876a92081673138a39d2fcb31a8065"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a3f876a92081673138a39d2fcb31a8065">v8::internal::wasm::TransitiveTypeFeedbackProcessor::no_gc_scope_</a></div><div class="ttdeci">DisallowGarbageCollection no_gc_scope_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01340">module-compiler.cc:1340</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a4947e196aa46dccc9b331ec8c6eae7bd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a4947e196aa46dccc9b331ec8c6eae7bd">v8::internal::wasm::TransitiveTypeFeedbackProcessor::Process</a></div><div class="ttdeci">static void Process(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01288">module-compiler.cc:1288</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a53de8c5be24369460263267dc7785ac8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a53de8c5be24369460263267dc7785ac8">v8::internal::wasm::TransitiveTypeFeedbackProcessor::isolate_</a></div><div class="ttdeci">Isolate *const isolate_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01341">module-compiler.cc:1341</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a6bef0d91ba2db74dbf60c794343fec99"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a6bef0d91ba2db74dbf60c794343fec99">v8::internal::wasm::TransitiveTypeFeedbackProcessor::ProcessFunction</a></div><div class="ttdeci">void ProcessFunction(int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01516">module-compiler.cc:1516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_a719d9a5ae78f1fa03211a6a7e4e240db"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#a719d9a5ae78f1fa03211a6a7e4e240db">v8::internal::wasm::TransitiveTypeFeedbackProcessor::ProcessQueue</a></div><div class="ttdeci">void ProcessQueue()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01309">module-compiler.cc:1309</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_ab274acbc08982b7464834a65ce4d898c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ab274acbc08982b7464834a65ce4d898c">v8::internal::wasm::TransitiveTypeFeedbackProcessor::module_</a></div><div class="ttdeci">const WasmModule *const module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01343">module-compiler.cc:1343</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_ae8e82bee771b314c3d1a1c4034244776"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#ae8e82bee771b314c3d1a1c4034244776">v8::internal::wasm::TransitiveTypeFeedbackProcessor::~TransitiveTypeFeedbackProcessor</a></div><div class="ttdeci">~TransitiveTypeFeedbackProcessor()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01307">module-compiler.cc:1307</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor_html_aeabb41a592879c293fbd438da7b09e9e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TransitiveTypeFeedbackProcessor.html#aeabb41a592879c293fbd438da7b09e9e">v8::internal::wasm::TransitiveTypeFeedbackProcessor::mutex_guard</a></div><div class="ttdeci">base::MutexGuard mutex_guard</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01346">module-compiler.cc:1346</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TruncatedUserString_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TruncatedUserString.html">v8::internal::wasm::TruncatedUserString</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l01092">wasm-module.h:1092</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_a786ffe03cbb5612cc865dff1331a20eb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a786ffe03cbb5612cc865dff1331a20eb">v8::internal::wasm::TypeCanonicalizer::kPredefinedArrayI16Index</a></div><div class="ttdeci">static constexpr CanonicalTypeIndex kPredefinedArrayI16Index</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8h_source.html#l00052">canonical-types.h:52</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_ad7596d2d5f3ea621ba8021e2b5c35ea0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#ad7596d2d5f3ea621ba8021e2b5c35ea0">v8::internal::wasm::TypeCanonicalizer::kPredefinedArrayI8Index</a></div><div class="ttdeci">static constexpr CanonicalTypeIndex kPredefinedArrayI8Index</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8h_source.html#l00051">canonical-types.h:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html">v8::internal::wasm::ValidateFunctionsStreamingJob</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02579">module-compiler.cc:2579</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_a595f738885e4ddc54dfbee0facb094d6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a595f738885e4ddc54dfbee0facb094d6">v8::internal::wasm::ValidateFunctionsStreamingJob::enabled_features_</a></div><div class="ttdeci">const WasmEnabledFeatures enabled_features_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02614">module-compiler.cc:2614</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_a5d40c7e666a805a418e6d6d3d7c8d8ee"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#a5d40c7e666a805a418e6d6d3d7c8d8ee">v8::internal::wasm::ValidateFunctionsStreamingJob::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02586">module-compiler.cc:2586</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_aaa06eba946895bf88516bb729e8c732f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aaa06eba946895bf88516bb729e8c732f">v8::internal::wasm::ValidateFunctionsStreamingJob::ValidateFunctionsStreamingJob</a></div><div class="ttdeci">ValidateFunctionsStreamingJob(const WasmModule *module, WasmEnabledFeatures enabled_features, ValidateFunctionsStreamingJobData *data)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02581">module-compiler.cc:2581</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_aac419dc4aa81f2d2594dd1976794f310"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#aac419dc4aa81f2d2594dd1976794f310">v8::internal::wasm::ValidateFunctionsStreamingJob::data_</a></div><div class="ttdeci">ValidateFunctionsStreamingJobData * data_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02615">module-compiler.cc:2615</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_ac6923ee5bb39b2a4b6475d72e8db7183"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac6923ee5bb39b2a4b6475d72e8db7183">v8::internal::wasm::ValidateFunctionsStreamingJob::module_</a></div><div class="ttdeci">const WasmModule *const module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02613">module-compiler.cc:2613</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob_html_ac9bebc6c772148aee5f452ca0aea569a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJob.html#ac9bebc6c772148aee5f452ca0aea569a">v8::internal::wasm::ValidateFunctionsStreamingJob::GetMaxConcurrency</a></div><div class="ttdeci">size_t GetMaxConcurrency(size_t worker_count) const override</div><div class="ttdoc">Controls the maximum number of threads calling Run() concurrently, given the number of threads curren...</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02608">module-compiler.cc:2608</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueType.html">v8::internal::wasm::ValueType</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00885">value-type.h:885</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a5b6cfe5d63b1c5f3b54fdb34ed91c863"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleCodeSize(const WasmModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02386">wasm-code-manager.cc:2386</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a8b17776c8a4fe19718f2b1931544253f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">v8::internal::wasm::WasmCodeManager::LookupCode</a></div><div class="ttdeci">WasmCode * LookupCode(Isolate *isolate, Address pc) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02982">wasm-code-manager.cc:2982</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_a65882a1f49bd2c6a667cd3054f3dc2e2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65882a1f49bd2c6a667cd3054f3dc2e2">v8::internal::wasm::WasmCodePointerTable::GetEntrypointWithoutSignatureCheck</a></div><div class="ttdeci">Address GetEntrypointWithoutSignatureCheck(WasmCodePointer index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00064">wasm-code-pointer-table-inl.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">v8::internal::wasm::WasmCodeRefScope</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01277">wasm-code-manager.h:1277</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">v8::internal::wasm::WasmCode</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00091">wasm-code-manager.h:91</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCompilationUnit_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html">v8::internal::wasm::WasmCompilationUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8h_source.html#l00096">function-compiler.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCompilationUnit_html_a5c56eda18110c9dfcce2ea66840fd4cd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#a5c56eda18110c9dfcce2ea66840fd4cd">v8::internal::wasm::WasmCompilationUnit::func_index</a></div><div class="ttdeci">int func_index() const</div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8h_source.html#l00110">function-compiler.h:110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCompilationUnit_html_a612577dea57ec12822ce26597949be5e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#a612577dea57ec12822ce26597949be5e">v8::internal::wasm::WasmCompilationUnit::tier</a></div><div class="ttdeci">ExecutionTier tier() const</div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8h_source.html#l00108">function-compiler.h:108</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">v8::internal::wasm::WasmDetectedFeatures</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00088">wasm-features.h:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">v8::internal::wasm::WasmEnabledFeatures</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00055">wasm-features.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a26391b903e117ed93787d080f0bc2fe4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a26391b903e117ed93787d080f0bc2fe4">v8::internal::wasm::WasmEngine::MaybeGetNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; MaybeGetNativeModule(ModuleOrigin origin, base::Vector&lt; const uint8_t &gt; wire_bytes, const CompileTimeImports &amp;compile_imports, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01604">wasm-engine.cc:1604</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a2b1c94eee0072e6f73f9262078571a4f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a2b1c94eee0072e6f73f9262078571a4f">v8::internal::wasm::WasmEngine::LogCode</a></div><div class="ttdeci">void LogCode(base::Vector&lt; WasmCode * &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01367">wasm-engine.cc:1367</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a3d8b862532f9f18b75db0b33dfa2b4dd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3d8b862532f9f18b75db0b33dfa2b4dd">v8::internal::wasm::WasmEngine::GetStreamingCompilationOwnership</a></div><div class="ttdeci">bool GetStreamingCompilationOwnership(size_t prefix_hash, const CompileTimeImports &amp;compile_imports)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01672">wasm-engine.cc:1672</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a80a2af861380fd22a236025164b81737"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a80a2af861380fd22a236025164b81737">v8::internal::wasm::WasmEngine::LogOutstandingCodesForIsolate</a></div><div class="ttdeci">void LogOutstandingCodesForIsolate(Isolate *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01516">wasm-engine.cc:1516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a8378f5ecdd236147a0b3c590c12899b8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8378f5ecdd236147a0b3c590c12899b8">v8::internal::wasm::WasmEngine::RemoveCompileJob</a></div><div class="ttdeci">std::unique_ptr&lt; AsyncCompileJob &gt; RemoveCompileJob(AsyncCompileJob *job)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01166">wasm-engine.cc:1166</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a88e0184f058142bc46a5b93f2f8061b3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">v8::internal::wasm::WasmEngine::GetOrCreateScript</a></div><div class="ttdeci">DirectHandle&lt; Script &gt; GetOrCreateScript(Isolate *, const std::shared_ptr&lt; NativeModule &gt; &amp;, base::Vector&lt; const char &gt; source_url)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01896">wasm-engine.cc:1896</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a91a8d27da954c0e30d403ffa8fcb7bf5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a91a8d27da954c0e30d403ffa8fcb7bf5">v8::internal::wasm::WasmEngine::CompileFunction</a></div><div class="ttdeci">void CompileFunction(Counters *counters, NativeModule *native_module, uint32_t function_index, ExecutionTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00871">wasm-engine.cc:871</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a92bf3bf6d5ba9b15735d9ae1a3643817"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a92bf3bf6d5ba9b15735d9ae1a3643817">v8::internal::wasm::WasmEngine::allocator</a></div><div class="ttdeci">AccountingAllocator * allocator()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00246">wasm-engine.h:246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a9df42171758a2a5af30388a2b7e97de8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9df42171758a2a5af30388a2b7e97de8">v8::internal::wasm::WasmEngine::StreamingCompilationFailed</a></div><div class="ttdeci">void StreamingCompilationFailed(size_t prefix_hash, const CompileTimeImports &amp;compile_imports)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01686">wasm-engine.cc:1686</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ac7a8ec2f950e76dfa9e2ec483c15a372"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac7a8ec2f950e76dfa9e2ec483c15a372">v8::internal::wasm::WasmEngine::NewNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; NewNativeModule(Isolate *isolate, WasmEnabledFeatures enabled_features, WasmDetectedFeatures detected_features, CompileTimeImports compile_imports, std::shared_ptr&lt; const WasmModule &gt; module, size_t code_size_estimate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01543">wasm-engine.cc:1543</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ae049eb40219a3e542bf2811e42ac1bb8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">v8::internal::wasm::WasmEngine::UpdateNativeModuleCache</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; UpdateNativeModuleCache(bool has_error, std::shared_ptr&lt; NativeModule &gt; native_module, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01639">wasm-engine.cc:1639</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmError_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmError.html">v8::internal::wasm::WasmError</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00026">wasm-result.h:26</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmError_html_a6ab171a87cb8a37f65415bbf06555362"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a6ab171a87cb8a37f65415bbf06555362">v8::internal::wasm::WasmError::message</a></div><div class="ttdeci">const std::string &amp; message() const &amp;</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00054">wasm-result.h:54</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmError_html_a814cbe82c25f67faffa1de4801d10574"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmError.html#a814cbe82c25f67faffa1de4801d10574">v8::internal::wasm::WasmError::has_error</a></div><div class="ttdeci">bool has_error() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-result_8h_source.html#l00046">wasm-result.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a83ced6511f55c6c4dca7707e21eb1d2d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a83ced6511f55c6c4dca7707e21eb1d2d">v8::internal::wasm::WasmImportWrapperCache::GetCompiled</a></div><div class="ttdeci">V8_EXPORT_PRIVATE std::shared_ptr&lt; WasmImportWrapperHandle &gt; GetCompiled(Isolate *isolate, ImportCallKind kind, CanonicalTypeIndex type_index, int expected_arity, Suspend suspend, const wasm::CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00283">wasm-import-wrapper-cache.cc:283</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WellKnownImportsList_html_aeaafe5f17892d90ba434f1f143620c42"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#aeaafe5f17892d90ba434f1f143620c42">v8::internal::wasm::WellKnownImportsList::Initialize</a></div><div class="ttdeci">void Initialize(int size)</div><div class="ttdef"><b>Definition:</b> <a href="well-known-imports_8h_source.html#l00126">well-known-imports.h:126</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">v8::internal::wasm::WireBytesRef</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00060">wasm-module.h:60</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html_a1853a6fc4a88a37d2bb8a91b58781daf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a1853a6fc4a88a37d2bb8a91b58781daf">v8::internal::wasm::WireBytesRef::end_offset</a></div><div class="ttdeci">uint32_t end_offset() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00071">wasm-module.h:71</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html_a4f2dffb7efc3721571b5f1604d5d448a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">v8::internal::wasm::WireBytesRef::offset</a></div><div class="ttdeci">uint32_t offset() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00069">wasm-module.h:69</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02342">module-compiler.cc:2342</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a3c1c31f0ac239247c46ca8dc3fad14d7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a3c1c31f0ac239247c46ca8dc3fad14d7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::native_module_</a></div><div class="ttdeci">std::weak_ptr&lt; NativeModule &gt; native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02372">module-compiler.cc:2372</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a42b4c8645b78dd64059a39acdac14c84"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a42b4c8645b78dd64059a39acdac14c84">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::BackgroundCompileJob</a></div><div class="ttdeci">BackgroundCompileJob(std::weak_ptr&lt; NativeModule &gt; native_module, std::shared_ptr&lt; Counters &gt; async_counters, CompilationTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02344">module-compiler.cc:2344</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a645ec0872363deee2a6c484e016f1956"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a645ec0872363deee2a6c484e016f1956">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02352">module-compiler.cc:2352</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a71e8a577baee57287702011e32eec6f4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a71e8a577baee57287702011e32eec6f4">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::engine_barrier_</a></div><div class="ttdeci">std::shared_ptr&lt; OperationsBarrier &gt; engine_barrier_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02373">module-compiler.cc:2373</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a75aa84849d5214c12c878bd006d44729"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a75aa84849d5214c12c878bd006d44729">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::tier_</a></div><div class="ttdeci">const CompilationTier tier_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02375">module-compiler.cc:2375</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_a78a9b9e95cb12abe581382bcef9a8ff3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#a78a9b9e95cb12abe581382bcef9a8ff3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::async_counters_</a></div><div class="ttdeci">const std::shared_ptr&lt; Counters &gt; async_counters_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02374">module-compiler.cc:2374</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob_html_aee498329e8088312de8e436970979446"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileJob.html#aee498329e8088312de8e436970979446">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileJob::GetMaxConcurrency</a></div><div class="ttdeci">size_t GetMaxConcurrency(size_t worker_count) const override</div><div class="ttdoc">Controls the maximum number of threads calling Run() concurrently, given the number of threads curren...</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02359">module-compiler.cc:2359</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00085">module-compiler.cc:85</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html_a3ed3fc179a78c21705a55b85c66c97ac"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a3ed3fc179a78c21705a55b85c66c97ac">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope::compilation_state</a></div><div class="ttdeci">CompilationStateImpl * compilation_state() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00841">module-compiler.cc:841</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html_a583e2f2b2299476e7f9c3e98f3386355"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a583e2f2b2299476e7f9c3e98f3386355">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope::cancelled</a></div><div class="ttdeci">bool cancelled() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00879">module-compiler.cc:879</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html_a8af5f11040c78dbc7da18a1a474dff27"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#a8af5f11040c78dbc7da18a1a474dff27">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope::native_module</a></div><div class="ttdeci">NativeModule * native_module() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00090">module-compiler.cc:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html_aa97a96e9e4753af9ec817898594ca51e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aa97a96e9e4753af9ec817898594ca51e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope::native_module_</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00100">module-compiler.cc:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope_html_aeab6208ee3cb8d5d04f8be1ea90233fc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1BackgroundCompileScope.html#aeab6208ee3cb8d5d04f8be1ea90233fc">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::BackgroundCompileScope::BackgroundCompileScope</a></div><div class="ttdeci">BackgroundCompileScope(std::weak_ptr&lt; NativeModule &gt; native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00087">module-compiler.cc:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00568">module-compiler.cc:568</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a01d1dc67992204402a64b064c6aece4d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a01d1dc67992204402a64b064c6aece4d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::native_module_weak_</a></div><div class="ttdeci">std::weak_ptr&lt; NativeModule &gt; const native_module_weak_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00743">module-compiler.cc:743</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a027613078d5bd38a4971700e68b6a20d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a027613078d5bd38a4971700e68b6a20d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::InitCompileJob</a></div><div class="ttdeci">void InitCompileJob()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03575">module-compiler.cc:3575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a06926c1b78473627fab3d1409a0916c6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a06926c1b78473627fab3d1409a0916c6">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::InitializeCompilationProgress</a></div><div class="ttdeci">void InitializeCompilationProgress(ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03757">module-compiler.cc:3757</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a0a03590d60fc6923649c15307fc00dfd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0a03590d60fc6923649c15307fc00dfd">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::OnFinishedUnits</a></div><div class="ttdeci">void OnFinishedUnits(base::Vector&lt; WasmCode * &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03996">module-compiler.cc:3996</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a0f9620bca55b357d90dba566d87043b1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0f9620bca55b357d90dba566d87043b1">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::bytes_since_last_chunk_</a></div><div class="ttdeci">size_t bytes_since_last_chunk_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00802">module-compiler.cc:802</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a0ff6ff765770fe090dc00572f0e64272"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a0ff6ff765770fe090dc00572f0e64272">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::compilation_progress_</a></div><div class="ttdeci">base::OwnedVector&lt; uint8_t &gt; compilation_progress_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00809">module-compiler.cc:809</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a1c2df4934d4b851409d16a00d569d33e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a1c2df4934d4b851409d16a00d569d33e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::compile_failed_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; compile_failed_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00748">module-compiler.cc:748</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a2321adabbd69bbd58643f3fcd00177bd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2321adabbd69bbd58643f3fcd00177bd">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::TierUpAllFunctions</a></div><div class="ttdeci">void TierUpAllFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04355">module-compiler.cc:4355</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a28b47f0cb3321f0107f1a57b0b7edf0d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a28b47f0cb3321f0107f1a57b0b7edf0d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::SetError</a></div><div class="ttdeci">void SetError()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04326">module-compiler.cc:4326</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a2c5396b3ed7bfce2157b37923b77ffee"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a2c5396b3ed7bfce2157b37923b77ffee">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::TriggerCachingAfterTimeout</a></div><div class="ttdeci">void TriggerCachingAfterTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04197">module-compiler.cc:4197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a31071aac7bfc7dfb7923f3376d78376b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a31071aac7bfc7dfb7923f3376d78376b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::SchedulePublishCompilationResults</a></div><div class="ttdeci">void SchedulePublishCompilationResults(std::vector&lt; UnpublishedWasmCode &gt; unpublished_code, CompilationTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04290">module-compiler.cc:4290</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a32bf0a519ec58a3c7c7444eeef340e5a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a32bf0a519ec58a3c7c7444eeef340e5a">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::kInvalidCompilationID</a></div><div class="ttdeci">static constexpr int kInvalidCompilationID</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00766">module-compiler.cc:766</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a3ca161fb12e541db32b60d80eb4b1e90"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a3ca161fb12e541db32b60d80eb4b1e90">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::callbacks_</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; CompilationEventCallback &gt; &gt; callbacks_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00793">module-compiler.cc:793</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a40e79d0e08ce2b9ec620f2492d883b2e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a40e79d0e08ce2b9ec620f2492d883b2e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::baseline_compile_job_</a></div><div class="ttdeci">std::unique_ptr&lt; JobHandle &gt; baseline_compile_job_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00762">module-compiler.cc:762</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a4471b1fe3aff990009d8c703160a9940"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4471b1fe3aff990009d8c703160a9940">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::baseline_compilation_finished</a></div><div class="ttdeci">bool baseline_compilation_finished() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00696">module-compiler.cc:696</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a4691d2bab412c73443a96c25fa8bc94b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4691d2bab412c73443a96c25fa8bc94b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::GetNextCompilationUnit</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; GetNextCompilationUnit(CompilationUnitQueues::Queue *, CompilationTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03991">module-compiler.cc:3991</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a46f742b041803cde875c307e3021be18"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a46f742b041803cde875c307e3021be18">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::detected_features</a></div><div class="ttdeci">WasmDetectedFeatures detected_features() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00649">module-compiler.cc:649</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a4d6c6ba4a5b1ef655d9a77edb45d44a3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4d6c6ba4a5b1ef655d9a77edb45d44a3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::AllowAnotherTopTierJob</a></div><div class="ttdeci">void AllowAnotherTopTierJob(uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00666">module-compiler.cc:666</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a4ed36715f9c0623f94e39fdb85d1b8dc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dc">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::CancellationPolicy</a></div><div class="ttdeci">CancellationPolicy</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00589">module-compiler.cc:589</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a4ed36715f9c0623f94e39fdb85d1b8dca56d6183964d232e8e20d243ae101bae3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a4ed36715f9c0623f94e39fdb85d1b8dca56d6183964d232e8e20d243ae101bae3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::kCancelInitialCompilation</a></div><div class="ttdeci">@ kCancelInitialCompilation</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00589">module-compiler.cc:589</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a50f1bd3b41156eaf80d7e833a95f5bce"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a50f1bd3b41156eaf80d7e833a95f5bce">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::AddTopTierPriorityCompilationUnit</a></div><div class="ttdeci">void AddTopTierPriorityCompilationUnit(WasmCompilationUnit, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03977">module-compiler.cc:3977</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a5691daef0ad1f616287b1bf605e6ed19"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5691daef0ad1f616287b1bf605e6ed19">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::set_compilation_id</a></div><div class="ttdeci">void set_compilation_id(int compilation_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00715">module-compiler.cc:715</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a5c78c0ef4fe93265afd37c1c6efe5792"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a5c78c0ef4fe93265afd37c1c6efe5792">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::CommitTopTierCompilationUnit</a></div><div class="ttdeci">void CommitTopTierCompilationUnit(WasmCompilationUnit)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03972">module-compiler.cc:3972</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a68db7bbe283a6280631da539f03ff3be"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a68db7bbe283a6280631da539f03ff3be">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::SetWireBytesStorage</a></div><div class="ttdeci">void SetWireBytesStorage(std::shared_ptr&lt; WireBytesStorage &gt; wire_bytes_storage)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00703">module-compiler.cc:703</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a6e8ed1af01ad199828413d1c9f4bacbb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a6e8ed1af01ad199828413d1c9f4bacbb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::cancelled</a></div><div class="ttdeci">bool cancelled() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03609">module-compiler.cc:3609</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a7167a723ca63724303768ed3d1b0736d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7167a723ca63724303768ed3d1b0736d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::top_tier_compile_job_</a></div><div class="ttdeci">std::unique_ptr&lt; JobHandle &gt; top_tier_compile_job_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00763">module-compiler.cc:763</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a765312328515d177ce5825f083c9b759"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a765312328515d177ce5825f083c9b759">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::callbacks_mutex_</a></div><div class="ttdeci">base::Mutex callbacks_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00787">module-compiler.cc:787</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a7ad6d8bbbac037e5f81f23aebaaf884b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7ad6d8bbbac037e5f81f23aebaaf884b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00846">module-compiler.cc:846</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a7bd4a3ad05fde241ad2e33e12ca1275d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a7bd4a3ad05fde241ad2e33e12ca1275d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::GetQueueForCompileTask</a></div><div class="ttdeci">CompilationUnitQueues::Queue * GetQueueForCompileTask(int task_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03986">module-compiler.cc:3986</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a85ad2d14130ce9699d36bd8d9fe02333"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a85ad2d14130ce9699d36bd8d9fe02333">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::ApplyCompilationHintToInitialProgress</a></div><div class="ttdeci">void ApplyCompilationHintToInitialProgress(const WasmCompilationHint &amp;hint, size_t hint_idx)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03613">module-compiler.cc:3613</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a875b97140d7a45a4148a0fb1a248e42b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a875b97140d7a45a4148a0fb1a248e42b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::TriggerOutstandingCallbacks</a></div><div class="ttdeci">void TriggerOutstandingCallbacks()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04117">module-compiler.cc:4117</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a88bbd14f5345baf9dea935d9f1b6de94"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a88bbd14f5345baf9dea935d9f1b6de94">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::wire_bytes_storage_</a></div><div class="ttdeci">std::shared_ptr&lt; WireBytesStorage &gt; wire_bytes_storage_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00779">module-compiler.cc:779</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a8961a8c084b70ecbdb9dfe082929b2bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8961a8c084b70ecbdb9dfe082929b2bb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::outstanding_baseline_units_</a></div><div class="ttdeci">int outstanding_baseline_units_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00798">module-compiler.cc:798</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a8ab550a27ff66014d823f06de54082e8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8ab550a27ff66014d823f06de54082e8">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::CancelCompilation</a></div><div class="ttdeci">void CancelCompilation(CancellationPolicy)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03590">module-compiler.cc:3590</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a8c6110baae5557a7b1bea2a035bf4cf2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a8c6110baae5557a7b1bea2a035bf4cf2">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::failed</a></div><div class="ttdeci">bool failed() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00692">module-compiler.cc:692</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a928d8dccea38ced17d01c739eadd64e7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a928d8dccea38ced17d01c739eadd64e7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::GetWireBytesStorage</a></div><div class="ttdeci">std::shared_ptr&lt; WireBytesStorage &gt; GetWireBytesStorage() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00709">module-compiler.cc:709</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a9a3e39ad3a707e8d6dfc2feab40f034a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9a3e39ad3a707e8d6dfc2feab40f034a">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::detected_features_</a></div><div class="ttdeci">std::atomic&lt; WasmDetectedFeatures &gt; detected_features_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00771">module-compiler.cc:771</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a9b824ee2bd19df1806a89e4d74a697da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9b824ee2bd19df1806a89e4d74a697da">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::mutex_</a></div><div class="ttdeci">base::Mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00758">module-compiler.cc:758</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a9c6ad44bd5a7aaefd4190c42ff0f3ea0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9c6ad44bd5a7aaefd4190c42ff0f3ea0">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::TriggerCallbacks</a></div><div class="ttdeci">void TriggerCallbacks(base::EnumSet&lt; CompilationEvent &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04164">module-compiler.cc:4164</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_a9d575e5064d78171ea8245113351208a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#a9d575e5064d78171ea8245113351208a">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::last_top_tier_compilation_timestamp_</a></div><div class="ttdeci">base::TimeTicks last_top_tier_compilation_timestamp_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00815">module-compiler.cc:815</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_aa518d97e029098e65c98341c966ded5a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aa518d97e029098e65c98341c966ded5a">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::AllowAnotherTopTierJobForAllFunctions</a></div><div class="ttdeci">void AllowAnotherTopTierJobForAllFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00675">module-compiler.cc:675</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_aabe8418b13e7c57d1415541cb0574eb6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aabe8418b13e7c57d1415541cb0574eb6">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::ApplyPgoInfoToInitialProgress</a></div><div class="ttdeci">void ApplyPgoInfoToInitialProgress(ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03662">module-compiler.cc:3662</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_aaf65fb2f96cb75ae477b7b62b8aecb90"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aaf65fb2f96cb75ae477b7b62b8aecb90">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::WaitForCompilationEvent</a></div><div class="ttdeci">void WaitForCompilationEvent(CompilationEvent event)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04337">module-compiler.cc:4337</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ab0af1dcf85378fb072a892b87ed4ac15"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab0af1dcf85378fb072a892b87ed4ac15">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::InitializeCompilationUnitForSingleFunction</a></div><div class="ttdeci">void InitializeCompilationUnitForSingleFunction(CompilationUnitBuilder *builder, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03817">module-compiler.cc:3817</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ab616d619108985decfe0d7f7ce17fcc6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab616d619108985decfe0d7f7ce17fcc6">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::compilation_unit_queues_</a></div><div class="ttdeci">CompilationUnitQueues compilation_unit_queues_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00754">module-compiler.cc:754</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ab766f332e04fe1ee004315c298624fb7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab766f332e04fe1ee004315c298624fb7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::~CompilationStateImpl</a></div><div class="ttdeci">~CompilationStateImpl()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00573">module-compiler.cc:573</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ab7f1169e5324c750facf09b9f5fbad94"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ab7f1169e5324c750facf09b9f5fbad94">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::native_module_</a></div><div class="ttdeci">NativeModule *const native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00742">module-compiler.cc:742</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_abba3d6e3f1705511c75747b22d3f05ec"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#abba3d6e3f1705511c75747b22d3f05ec">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::compilation_id_</a></div><div class="ttdeci">int compilation_id_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00767">module-compiler.cc:767</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ac57fa6c76918532a01b6d1028b948fb1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac57fa6c76918532a01b6d1028b948fb1">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::InitializeCompilationUnits</a></div><div class="ttdeci">void InitializeCompilationUnits(std::unique_ptr&lt; CompilationUnitBuilder &gt; builder)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03852">module-compiler.cc:3852</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ac7c4f6efcf3aafb8f51b8a77da48410b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ac7c4f6efcf3aafb8f51b8a77da48410b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::compile_cancelled_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; compile_cancelled_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00752">module-compiler.cc:752</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_acbf680841025a81ae543c133173e87a2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#acbf680841025a81ae543c133173e87a2">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::NumOutstandingCompilations</a></div><div class="ttdeci">size_t NumOutstandingCompilations(CompilationTier tier) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04321">module-compiler.cc:4321</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ad0de5a795e5ca3ea15b6dc64672f9fdb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ad0de5a795e5ca3ea15b6dc64672f9fdb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::async_counters_</a></div><div class="ttdeci">const std::shared_ptr&lt; Counters &gt; async_counters_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00744">module-compiler.cc:744</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ada63ef52e4d0b472d4194a3a6aec02e7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ada63ef52e4d0b472d4194a3a6aec02e7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::finished_events_</a></div><div class="ttdeci">base::EnumSet&lt; CompilationEvent &gt; finished_events_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00796">module-compiler.cc:796</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_adf989d360ca6f9f18f40ba6ed28c76b0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#adf989d360ca6f9f18f40ba6ed28c76b0">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::OnCompilationStopped</a></div><div class="ttdeci">void OnCompilationStopped(WasmDetectedFeatures detected)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04229">module-compiler.cc:4229</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ae307e43873e6a925477fefac9dcef545"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae307e43873e6a925477fefac9dcef545">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::UpdateDetectedFeatures</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT WasmDetectedFeatures UpdateDetectedFeatures(WasmDetectedFeatures)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04249">module-compiler.cc:4249</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_ae69af533e833f888b6c141e97058a96d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#ae69af533e833f888b6c141e97058a96d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::AddCallback</a></div><div class="ttdeci">void AddCallback(std::unique_ptr&lt; CompilationEventCallback &gt; callback)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03937">module-compiler.cc:3937</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_aeb68dfdbcf7afb114fbfe377cb9d16d7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aeb68dfdbcf7afb114fbfe377cb9d16d7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::counters</a></div><div class="ttdeci">Counters * counters() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00701">module-compiler.cc:701</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_aec07f03c5728ff18989f7f7714b30ea7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#aec07f03c5728ff18989f7f7714b30ea7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::ApplyPgoInfoLate</a></div><div class="ttdeci">void ApplyPgoInfoLate(ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03702">module-compiler.cc:3702</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_af474d59648037e58456a4564d5345fe5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#af474d59648037e58456a4564d5345fe5">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::CommitCompilationUnits</a></div><div class="ttdeci">void CommitCompilationUnits(base::Vector&lt; WasmCompilationUnit &gt; baseline_units, base::Vector&lt; WasmCompilationUnit &gt; top_tier_units)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03954">module-compiler.cc:3954</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_afc9ff843b7f51b2e035c286168390f2e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afc9ff843b7f51b2e035c286168390f2e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishCode</a></div><div class="ttdeci">std::vector&lt; WasmCode * &gt; PublishCode(base::Vector&lt; UnpublishedWasmCode &gt; codes)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04276">module-compiler.cc:4276</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_html_afcd9da62d1edbb0e854d525370766659"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl.html#afcd9da62d1edbb0e854d525370766659">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::InitializeCompilationProgressAfterDeserialization</a></div><div class="ttdeci">void InitializeCompilationProgressAfterDeserialization(base::Vector&lt; const int &gt; lazy_functions, base::Vector&lt; const int &gt; eager_functions)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l03869">module-compiler.cc:3869</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02184">module-compiler.cc:2184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_a35065633b2ee4e90df6849aa0af6ac56"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a35065633b2ee4e90df6849aa0af6ac56">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::start_time_</a></div><div class="ttdeci">base::TimeTicks start_time_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02244">module-compiler.cc:2244</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_a49d0c01363fce57f1caf4a1b783fd2e4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a49d0c01363fce57f1caf4a1b783fd2e4">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::call</a></div><div class="ttdeci">void call(CompilationEvent compilation_event) override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02199">module-compiler.cc:2199</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_a4b3c154dc5faec2d8c94b7d308e9fcf0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a4b3c154dc5faec2d8c94b7d308e9fcf0">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::context_id_</a></div><div class="ttdeci">v8::metrics::Recorder::ContextId context_id_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02247">module-compiler.cc:2247</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_a65172f6971d9386fc1d608281bad330e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a65172f6971d9386fc1d608281bad330e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::compile_mode_</a></div><div class="ttdeci">const CompileMode compile_mode_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02249">module-compiler.cc:2249</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_a7d80589fddf98d66aae180e9801840db"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#a7d80589fddf98d66aae180e9801840db">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::CompileMode</a></div><div class="ttdeci">CompileMode</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02186">module-compiler.cc:2186</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_aa13025a25432cc5ea96207517f8cd010"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aa13025a25432cc5ea96207517f8cd010">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::CompilationTimeCallback</a></div><div class="ttdeci">CompilationTimeCallback(std::shared_ptr&lt; Counters &gt; async_counters, std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder, v8::metrics::Recorder::ContextId context_id, std::weak_ptr&lt; NativeModule &gt; native_module, CompileMode compile_mode)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02187">module-compiler.cc:2187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_ab0883f6665aae17c866c43ef0174452b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ab0883f6665aae17c866c43ef0174452b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::async_counters_</a></div><div class="ttdeci">const std::shared_ptr&lt; Counters &gt; async_counters_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02245">module-compiler.cc:2245</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_ae7a569046bdf76e1192e4eb9e6fdd049"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#ae7a569046bdf76e1192e4eb9e6fdd049">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::native_module_</a></div><div class="ttdeci">std::weak_ptr&lt; NativeModule &gt; native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02248">module-compiler.cc:2248</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback_html_aed48e04cfa05645b262cc3de7f46a1ca"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationTimeCallback.html#aed48e04cfa05645b262cc3de7f46a1ca">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTimeCallback::metrics_recorder_</a></div><div class="ttdeci">std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02246">module-compiler.cc:2246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01096">module-compiler.cc:1096</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_a1853b5bda121022c5448167d81c165f6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a1853b5bda121022c5448167d81c165f6">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::native_module_</a></div><div class="ttdeci">NativeModule *const native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01128">module-compiler.cc:1128</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_a3fdbeebd6ebbbca6fd7eb3bd6c65a285"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a3fdbeebd6ebbbca6fd7eb3bd6c65a285">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::CompilationUnitBuilder</a></div><div class="ttdeci">CompilationUnitBuilder(NativeModule *native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01098">module-compiler.cc:1098</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_a8a125da97b4910923a225f9ee17e51da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8a125da97b4910923a225f9ee17e51da">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::AddTopTierUnit</a></div><div class="ttdeci">void AddTopTierUnit(int func_index, ExecutionTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01105">module-compiler.cc:1105</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_a8bd578eb533dc40e4d9b794c803916bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a8bd578eb533dc40e4d9b794c803916bb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::compilation_state</a></div><div class="ttdeci">CompilationStateImpl * compilation_state() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01124">module-compiler.cc:1124</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_a9a66b0a4ef936e689f1dd1bc1a3cf21c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#a9a66b0a4ef936e689f1dd1bc1a3cf21c">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::Commit</a></div><div class="ttdeci">void Commit()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01109">module-compiler.cc:1109</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_aaa13e84bbb2c58d607913feb63d4c40d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaa13e84bbb2c58d607913feb63d4c40d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::AddBaselineUnit</a></div><div class="ttdeci">void AddBaselineUnit(int func_index, ExecutionTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01101">module-compiler.cc:1101</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_aaf53cbbee851510fc5b34382c752aa66"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf53cbbee851510fc5b34382c752aa66">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::baseline_units_</a></div><div class="ttdeci">std::vector&lt; WasmCompilationUnit &gt; baseline_units_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01129">module-compiler.cc:1129</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_aaf7812a727fcb51ffb61e0d622ce4163"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aaf7812a727fcb51ffb61e0d622ce4163">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::tiering_units_</a></div><div class="ttdeci">std::vector&lt; WasmCompilationUnit &gt; tiering_units_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01130">module-compiler.cc:1130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_ac36114a39457411280c2bc2d349dba66"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#ac36114a39457411280c2bc2d349dba66">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01116">module-compiler.cc:1116</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder_html_aece45aed45df07f0c9b5bd08ea04a106"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitBuilder.html#aece45aed45df07f0c9b5bd08ea04a106">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitBuilder::module</a></div><div class="ttdeci">const WasmModule * module()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01121">module-compiler.cc:1121</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00108">module-compiler.cc:108</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a04f890a174602830b61b1a0423852c4c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a04f890a174602830b61b1a0423852c4c">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetTopTierPriorityUnit</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; GetTopTierPriorityUnit(QueueImpl *queue)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00407">module-compiler.cc:407</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a31357ad240d5b25fb61558f17ae39c94"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31357ad240d5b25fb61558f17ae39c94">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::AddUnits</a></div><div class="ttdeci">void AddUnits(base::Vector&lt; WasmCompilationUnit &gt; baseline_units, base::Vector&lt; WasmCompilationUnit &gt; top_tier_units, const WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00191">module-compiler.cc:191</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a31d34448ce13cf296171c77f1d498b9f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a31d34448ce13cf296171c77f1d498b9f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::next_task_id</a></div><div class="ttdeci">int next_task_id(int task_id, size_t num_queues) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00341">module-compiler.cc:341</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a3e5e5349a621aac9f3111fe61b580c43"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a3e5e5349a621aac9f3111fe61b580c43">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetNextUnit</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; GetNextUnit(Queue *queue, CompilationTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00179">module-compiler.cc:179</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a53ed0704366f808515d01af92d818889"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a53ed0704366f808515d01af92d818889">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::queues_</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; QueueImpl &gt; &gt; queues_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00517">module-compiler.cc:517</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a72c16e7a9412689bbc092e6cec45199f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a72c16e7a9412689bbc092e6cec45199f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::CompilationUnitQueues</a></div><div class="ttdeci">CompilationUnitQueues(int num_imported_functions, int num_declared_functions)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00115">module-compiler.cc:115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a807c3257bde86da495fc00d456573adc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a807c3257bde86da495fc00d456573adc">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::queues_mutex_</a></div><div class="ttdeci">base::Mutex queues_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00516">module-compiler.cc:516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a8989f95757602c9431351e25ac1cc181"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a8989f95757602c9431351e25ac1cc181">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::big_units_queue_</a></div><div class="ttdeci">BigUnitsQueue big_units_queue_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00522">module-compiler.cc:522</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a910e2a4d32ed0858ce4e69e2ff8b5c52"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a910e2a4d32ed0858ce4e69e2ff8b5c52">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::num_declared_functions_</a></div><div class="ttdeci">const int num_declared_functions_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00520">module-compiler.cc:520</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a91aaa8c461c03f44c2d900f81526d1d4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a91aaa8c461c03f44c2d900f81526d1d4">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::AddTopTierPriorityUnit</a></div><div class="ttdeci">void AddTopTierPriorityUnit(WasmCompilationUnit unit, size_t priority)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00234">module-compiler.cc:234</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a9501c1c937476a50964a10f42632fc5c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9501c1c937476a50964a10f42632fc5c">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::declared_function_index</a></div><div class="ttdeci">int declared_function_index(int func_index) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00509">module-compiler.cc:509</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a97b3d3e8de6b1cfcb7b063878d837de9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a97b3d3e8de6b1cfcb7b063878d837de9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::top_tier_compiled_</a></div><div class="ttdeci">std::unique_ptr&lt; std::atomic&lt; bool &gt;[]&gt; top_tier_compiled_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00526">module-compiler.cc:526</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_a9e79ae6cf67a501ea13f057de7cbd852"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#a9e79ae6cf67a501ea13f057de7cbd852">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::StealUnitsAndGetFirst</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; StealUnitsAndGetFirst(QueueImpl *queue, int steal_from_task_id, int wanted_tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00453">module-compiler.cc:453</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_aa477a5485afbdc372a13736797e2c0cf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aa477a5485afbdc372a13736797e2c0cf">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetNextUnitOfTier</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; GetNextUnitOfTier(Queue *public_queue, int tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00346">module-compiler.cc:346</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_aba1d01818282df3fa67d79db5f02a9f3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aba1d01818282df3fa67d79db5f02a9f3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::StealTopTierPriorityUnit</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; StealTopTierPriorityUnit(QueueImpl *queue, int steal_from_task_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00480">module-compiler.cc:480</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_ac5cf3ece9a08ba65c92468996df796f6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ac5cf3ece9a08ba65c92468996df796f6">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::AllowAnotherTopTierJob</a></div><div class="ttdeci">void AllowAnotherTopTierJob(uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00270">module-compiler.cc:270</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_acd207574701d74f08e9dd7875aa71269"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd207574701d74f08e9dd7875aa71269">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetBigUnitOfTier</a></div><div class="ttdeci">std::optional&lt; WasmCompilationUnit &gt; GetBigUnitOfTier(int tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00392">module-compiler.cc:392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_acd58ed5c7aa92fd01ef858dd4a885a68"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#acd58ed5c7aa92fd01ef858dd4a885a68">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetSizeForTier</a></div><div class="ttdeci">size_t GetSizeForTier(CompilationTier tier) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00265">module-compiler.cc:265</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_ae86f836350eec97e4895fa52b07307fd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#ae86f836350eec97e4895fa52b07307fd">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::num_imported_functions_</a></div><div class="ttdeci">const int num_imported_functions_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00519">module-compiler.cc:519</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_html_aef9c5e4fddae1550ab5ca318583d4c6d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues.html#aef9c5e4fddae1550ab5ca318583d4c6d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::GetQueueForTask</a></div><div class="ttdeci">Queue * GetQueueForTask(int task_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00140">module-compiler.cc:140</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01162">module-compiler.cc:1162</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html_a6dc7cc8b671708eb8266677a43ff52cf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a6dc7cc8b671708eb8266677a43ff52cf">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope::timer_</a></div><div class="ttdeci">base::ElapsedTimer timer_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01178">module-compiler.cc:1178</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html_a892aa4e737660936bc5451e988d4e5d3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#a892aa4e737660936bc5451e988d4e5d3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope::native_module_</a></div><div class="ttdeci">NativeModule * native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01177">module-compiler.cc:1177</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html_ac53d463063191b706dcc8e5f59c3df3f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ac53d463063191b706dcc8e5f59c3df3f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope::CompileLazyTimingScope</a></div><div class="ttdeci">CompileLazyTimingScope(Counters *counters, NativeModule *native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01164">module-compiler.cc:1164</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html_adf8515421b30b6a8d696632da65968c9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#adf8515421b30b6a8d696632da65968c9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope::counters_</a></div><div class="ttdeci">Counters * counters_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01176">module-compiler.cc:1176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope_html_ae5da0519209ffb6704f0f0c8fbf76d51"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompileLazyTimingScope.html#ae5da0519209ffb6704f0f0c8fbf76d51">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileLazyTimingScope::~CompileLazyTimingScope</a></div><div class="ttdeci">~CompileLazyTimingScope()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01169">module-compiler.cc:1169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::TriggerCodeCachingAfterTimeoutTask</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04100">module-compiler.cc:4100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask_html_a183ea8197dff0ff0db39eb462ab72c54"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a183ea8197dff0ff0db39eb462ab72c54">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::TriggerCodeCachingAfterTimeoutTask::native_module_</a></div><div class="ttdeci">const std::weak_ptr&lt; NativeModule &gt; native_module_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04113">module-compiler.cc:4113</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask_html_a535d1785c032574549845ffaea5cc657"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a535d1785c032574549845ffaea5cc657">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::TriggerCodeCachingAfterTimeoutTask::Run</a></div><div class="ttdeci">void Run() override</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04106">module-compiler.cc:4106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask_html_a9561da26cdafb247c1a66e5b369f4e65"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1TriggerCodeCachingAfterTimeoutTask.html#a9561da26cdafb247c1a66e5b369f4e65">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::TriggerCodeCachingAfterTimeoutTask::TriggerCodeCachingAfterTimeoutTask</a></div><div class="ttdeci">TriggerCodeCachingAfterTimeoutTask(std::weak_ptr&lt; NativeModule &gt; native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04102">module-compiler.cc:4102</a></div></div>
<div class="ttc" id="aclassv8_1_1metrics_1_1Recorder_1_1ContextId_html"><div class="ttname"><a href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00190">v8-metrics.h:190</a></div></div>
<div class="ttc" id="acode-space-access_8h_html"><div class="ttname"><a href="code-space-access_8h.html">code-space-access.h</a></div></div>
<div class="ttc" id="acompilation-environment-inl_8h_html"><div class="ttname"><a href="compilation-environment-inl_8h.html">compilation-environment-inl.h</a></div></div>
<div class="ttc" id="acompiler_8h_html"><div class="ttname"><a href="compiler_8h.html">compiler.h</a></div></div>
<div class="ttc" id="acounters-scopes_8h_html"><div class="ttname"><a href="counters-scopes_8h.html">counters-scopes.h</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="aenum-set_8h_html"><div class="ttname"><a href="enum-set_8h.html">enum-set.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a878783ad616ead06040f7d4b080f6a02"><div class="ttname"><a href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a></div><div class="ttdeci">=any, 0==ignition/interpreter, 1==sparkplug/baseline, &quot; &quot;2==maglev, 3==turbofan&quot;) DEFINE_MAYBE_BOOL(efficiency_mode, &quot;Forces efficiency mode on or off, disregarding any dynamic &quot; &quot;signals. Efficiency mode is optimized for situations with &quot; &quot;no latency requirements and uses fewer threads.&quot;) DEFINE_MAYBE_BOOL( battery_saver_mode, &quot;Forces battery saver mode on or off, disregarding any dynamic signals. &quot; &quot;Battery saver tries to conserve overall cpu cycles spent.&quot;) DEFINE_MAYBE_BOOL( memory_saver_mode, &quot;Forces memory saver mode on or off, disregarding any dynamic signals. &quot; &quot;Memory saver tries to keep memory footprint low at the expense of extra &quot; &quot;cpu cycles.&quot;) DEFINE_BOOL(efficiency_mode_for_tiering_heuristics, true, &quot;Use efficiency mode in tiering heuristics.&quot;) DEFINE_BOOL(efficiency_mode_disable_turbofan, false, &quot;Defer tier-up to turbofan while in efficiency mode.&quot;) DEFINE_INT(efficiency_mode_delay_turbofan, 15000, &quot;Delay tier-up to turbofan to a certain invocation count while in &quot; &quot;efficiency mode.&quot;) DEFINE_STRING( wasm_trace_native, nullptr, &quot;Select which native code sequence to use for wasm trace instruction:&quot; &quot;default or cpuid&quot;) #define V8_JITLESS_BOOL DEFINE_BOOL(jitless, V8_LITE_MODE_BOOL, &quot;Disable runtime allocation of executable memory.&quot;) DEFINE_BOOL( disable_optimizing_compilers, false, &quot;Disable all optimizing compilers while leaving baseline compilers enabled&quot;) DEFINE_BOOL(memory_protection_keys, true, &quot;protect code memory with PKU if available&quot;) DEFINE_BOOL(force_memory_protection_keys, false, &quot;fail if memory protection key support is not available&quot;) DEFINE_BOOL(assert_types, false, &quot;generate runtime type assertions to test the typer&quot;) DEFINE_EXPERIMENTAL_FEATURE( turboshaft_assert_types, &quot;generate runtime type assertions to test the turboshaft type system&quot;) DEFINE_BOOL(verify_simplified_lowering, false, &quot;verify graph generated by simplified lowering&quot;) #define V8_ALLOCATION_SITE_TRACKING_BOOL DEFINE_BOOL_READONLY(allocation_site_tracking, V8_ALLOCATION_SITE_TRACKING_BOOL, &quot;Enable allocation site tracking&quot;) DEFINE_NEG_NEG_IMPLICATION(allocation_site_tracking, allocation_site_pretenuring) DEFINE_BOOL(allocation_site_pretenuring, true, &quot;pretenure with allocation sites&quot;) DEFINE_INT(page_promotion_threshold, 70, &quot;min percentage of live bytes on a page to enable fast evacuation &quot; &quot;in full GCs&quot;) DEFINE_INT(minor_ms_page_promotion_threshold, 50, &quot;min percentage of live bytes on a page to enable fast evacuation &quot; &quot;in MinorMS&quot;) DEFINE_INT(minor_ms_page_promotion_max_lab_threshold, 30, &quot;max percentage of labs out of a page to still be considered for &quot; &quot;page promotion&quot;) DEFINE_UINT(minor_ms_max_page_age, 4, &quot;max age for a page after which it is force promoted to old space&quot;) DEFINE_BOOL(trace_pretenuring, false, &quot;trace pretenuring decisions of HAllocate instructions&quot;) DEFINE_BOOL(trace_pretenuring_statistics, false, &quot;trace allocation site pretenuring statistics&quot;) DEFINE_BOOL(trace_block_coverage, false, &quot;trace collected block coverage information&quot;) DEFINE_BOOL(trace_protector_invalidation, false, &quot;trace protector cell invalidations&quot;) DEFINE_BOOL(decommit_pooled_pages, true, &quot;decommit, rather than discard pooled pages&quot;) DEFINE_BOOL( zero_unused_memory, true, &quot;Zero unused memory(except for memory which was discarded) on memory &quot; &quot;reducing GCs.&quot;) DEFINE_BOOL_READONLY(minor_ms_shortcut_strings, false, &quot;short cut strings during marking&quot;) DEFINE_EXPERIMENTAL_FEATURE(feedback_normalization, &quot;feed back normalization to constructors&quot;) DEFINE_BOOL_READONLY(internalize_on_the_fly, true, &quot;internalize string keys for generic keyed ICs on the fly&quot;) DEFINE_INT(invocation_count_for_feedback_allocation, 8, &quot;invocation count required for allocating feedback vectors&quot;) DEFINE_INT(invocation_count_for_maglev, 400, &quot;invocation count required for optimizing with Maglev&quot;) DEFINE_INT(invocation_count_for_maglev_osr, 100, &quot;invocation count required for maglev OSR&quot;) DEFINE_BOOL(osr_from_maglev, false, &quot;whether we try to OSR to Turbofan from OSR 'd Maglev&quot;) DEFINE_FLOAT( osr_from_maglev_interrupt_scale_factor, 0.8, &quot;Scale interrupt budget reduction for OSR from Maglev vs. OSR to Maglev&quot;) DEFINE_BOOL(always_osr_from_maglev, false, &quot;whether we try to OSR to Turbofan from any Maglev&quot;) DEFINE_INT(invocation_count_for_turbofan, 3000, &quot;invocation count required for optimizing with TurboFan&quot;) DEFINE_INT(osr_to_tierup, 1, &quot;number to decrease the invocation budget by when we follow OSR&quot;) DEFINE_INT(minimum_invocations_after_ic_update, 500, &quot;How long to minimally wait after IC update before tier up&quot;) DEFINE_INT(minimum_invocations_before_optimization, 2, &quot;Minimum number of invocations we need before non-OSR optimization&quot;) DEFINE_BOOL(jit_fuzzing, false, &quot;Set JIT tiering thresholds suitable for JIT fuzzing&quot;) DEFINE_BOOL(use_std_math_pow, true, &quot;use std::pow instead of our custom implementation&quot;) DEFINE_BOOL(ignition_elide_noneffectful_bytecodes, true, &quot;elide bytecodes which won 't have any external effect&quot;) DEFINE_BOOL(ignition_filter_expression_positions, true, &quot;filter expression positions before the bytecode pipeline&quot;) DEFINE_BOOL(ignition_share_named_property_feedback, true, &quot;share feedback slots when loading the same named property from &quot; &quot;the same object&quot;) DEFINE_BOOL(ignition_elide_redundant_tdz_checks, true, &quot;elide TDZ checks dominated by other TDZ checks&quot;) DEFINE_BOOL(print_bytecode, false, &quot;print bytecode generated by ignition interpreter&quot;) DEFINE_BOOL(enable_lazy_source_positions, V8_LAZY_SOURCE_POSITIONS_BOOL, &quot;skip generating source positions during initial compile but &quot; &quot;regenerate when actually required&quot;) DEFINE_BOOL(stress_lazy_source_positions, false, &quot;collect lazy source positions immediately after lazy compile&quot;) DEFINE_STRING(print_bytecode_filter, &quot; *&quot;, &quot;filter for selecting which functions to print bytecode&quot;) DEFINE_BOOL(trace_ignition_codegen, false, &quot;trace the codegen of ignition interpreter bytecode handlers&quot;) DEFINE_STRING( trace_ignition_dispatches_output_file, nullptr, &quot;write the bytecode handler dispatch table to the specified file(d8 only) &quot; &quot;(requires building with v8_enable_ignition_dispatch_counting)&quot;) DEFINE_BOOL(trace_track_allocation_sites, false, &quot;trace the tracking of allocation sites&quot;) #define FLAG DEFINE_BOOL(sparkplug, ENABLE_SPARKPLUG_BY_DEFAULT, &quot;enable Sparkplug baseline compiler&quot;) DEFINE_BOOL_READONLY(concurrent_sparkplug, false, &quot;compile Sparkplug code in a background thread&quot;) DEFINE_BOOL(sparkplug_needs_short_builtins, false, &quot;only enable Sparkplug baseline compiler when &quot; &quot;--short-builtin-calls are also enabled&quot;) DEFINE_INT(baseline_batch_compilation_threshold, 4 * KB, &quot;the estimated instruction size of a batch to trigger compilation&quot;) DEFINE_BOOL(trace_baseline_batch_compilation, false, &quot;trace baseline batch compilation&quot;) #define FLAG DEFINE_BOOL_READONLY(always_use_string_forwarding_table, false, &quot;use string forwarding table instead of thin strings for &quot; &quot;all strings(experimental)&quot;) DEFINE_BOOL(transition_strings_during_gc_with_stack, false, &quot;Transition strings during a full GC with stack&quot;) DEFINE_SIZE_T(initial_shared_heap_size, 0, &quot;initial size of the shared heap(in Mbytes) tier</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00792">flag-definitions.h:1174</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_aca14fbede0905858c819226fce3678cc"><div class="ttname"><a href="flag-definitions_8h.html#aca14fbede0905858c819226fce3678cc">nullptr</a></div><div class="ttdeci">refactor address components for immediate indexing make OptimizeMaglevOnNextCall optimize to turbofan instead of maglev filter for tracing turbofan compilation nullptr</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l01280">flag-definitions.h:1280</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
<div class="ttc" id="afpu_8h_html"><div class="ttname"><a href="fpu_8h.html">fpu.h</a></div></div>
<div class="ttc" id="aglobal-handles-inl_8h_html"><div class="ttname"><a href="global-handles-inl_8h.html">global-handles-inl.h</a></div></div>
<div class="ttc" id="ajump-table-assembler_8h_html"><div class="ttname"><a href="jump-table-assembler_8h.html">jump-table-assembler.h</a></div></div>
<div class="ttc" id="ametrics_8h_html"><div class="ttname"><a href="metrics_8h.html">metrics.h</a></div></div>
<div class="ttc" id="amodule-compiler_8cc_html_a18329324175d88d28dc9e56d8ebbc5eb"><div class="ttname"><a href="module-compiler_8cc.html#a18329324175d88d28dc9e56d8ebbc5eb">CHECK_SIG</a></div><div class="ttdeci">#define CHECK_SIG(import_name, kSigName, kEnumName)</div></div>
<div class="ttc" id="amodule-compiler_8cc_html_a6e978c63340c33bc1dfa95a9fdbad525"><div class="ttname"><a href="module-compiler_8cc.html#a6e978c63340c33bc1dfa95a9fdbad525">TRACE_COMPILE</a></div><div class="ttdeci">#define TRACE_COMPILE(...)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00043">module-compiler.cc:43</a></div></div>
<div class="ttc" id="amodule-compiler_8cc_html_aaf621869b776bf1875191fe8fbe39c07"><div class="ttname"><a href="module-compiler_8cc.html#aaf621869b776bf1875191fe8fbe39c07">RETURN_ERROR</a></div><div class="ttdeci">#define RETURN_ERROR(module_name_string, import_name)</div></div>
<div class="ttc" id="amodule-compiler_8cc_html_ad0e56b939512b07a9f4022e490043302"><div class="ttname"><a href="module-compiler_8cc.html#ad0e56b939512b07a9f4022e490043302">TRACE_STREAMING</a></div><div class="ttdeci">#define TRACE_STREAMING(...)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00048">module-compiler.cc:48</a></div></div>
<div class="ttc" id="amodule-compiler_8cc_html_ad2bae691c0e698bc9c20b394f89ffb3c"><div class="ttname"><a href="module-compiler_8cc.html#ad2bae691c0e698bc9c20b394f89ffb3c">TRACE_LAZY</a></div><div class="ttdeci">#define TRACE_LAZY(...)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00053">module-compiler.cc:53</a></div></div>
<div class="ttc" id="amodule-compiler_8cc_html_aff4abc3a4fa9f8a9d5100a8532691198"><div class="ttname"><a href="module-compiler_8cc.html#aff4abc3a4fa9f8a9d5100a8532691198">CHECK_USE_COUNTER</a></div><div class="ttdeci">#define CHECK_USE_COUNTER(feat,...)</div></div>
<div class="ttc" id="amodule-compiler_8h_html"><div class="ttname"><a href="module-compiler_8h.html">module-compiler.h</a></div></div>
<div class="ttc" id="amodule-decoder_8h_html"><div class="ttname"><a href="module-decoder_8h.html">module-decoder.h</a></div></div>
<div class="ttc" id="amutex_8h_html"><div class="ttname"><a href="mutex_8h.html">mutex.h</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1bits_html_af9eb752b538fa8a66badab8f26e0e000"><div class="ttname"><a href="namespacev8_1_1base_1_1bits.html#af9eb752b538fa8a66badab8f26e0e000">v8::base::bits::IsPowerOfTwo</a></div><div class="ttdeci">constexpr bool IsPowerOfTwo(T value) requires(std</div><div class="ttdef"><b>Definition:</b> <a href="bits_8h_source.html#l00187">bits.h:187</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a0e542246e39cb25a93193a080e0e1148"><div class="ttname"><a href="namespacev8_1_1base.html#a0e542246e39cb25a93193a080e0e1148">v8::base::any_of</a></div><div class="ttdeci">bool any_of(const C &amp;container, const P &amp;predicate)</div><div class="ttdef"><b>Definition:</b> <a href="container-utils_8h_source.html#l00093">container-utils.h:93</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a26a5cb9b016254a5e99b5e1d0756abd8"><div class="ttname"><a href="namespacev8_1_1base.html#a26a5cb9b016254a5e99b5e1d0756abd8">v8::base::StaticOneByteVector</a></div><div class="ttdeci">Vector&lt; const uint8_t &gt; StaticOneByteVector(const char(&amp;array)[N])</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00345">vector.h:345</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40b71b3558e4b5297d51003612578a81"><div class="ttname"><a href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">v8::base::MutexGuard</a></div><div class="ttdeci">LockGuard&lt; Mutex &gt; MutexGuard</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00219">mutex.h:219</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a5bfc65f27076e49eb7752a4fb4d45acb"><div class="ttname"><a href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">v8::base::VectorOf</a></div><div class="ttdeci">constexpr Vector&lt; T &gt; VectorOf(T *start, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00359">vector.h:359</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ad03b241da4e98adde3145092fe54be8b"><div class="ttname"><a href="namespacev8_1_1base.html#ad03b241da4e98adde3145092fe54be8b">v8::base::args</a></div><div class="ttdeci">V8_BASE_EXPORT int const char va_list args</div><div class="ttdef"><b>Definition:</b> <a href="strings_8h_source.html#l00023">strings.h:23</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02js-duration-format_8cc_03_html_a92a126cff80447cdefea20ae7d212120"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02js-duration-format_8cc_03.html#a92a126cff80447cdefea20ae7d212120">v8::internal::anonymous_namespace{js-duration-format.cc}::Unit</a></div><div class="ttdeci">Unit</div><div class="ttdef"><b>Definition:</b> <a href="js-duration-format_8cc_source.html#l00045">js-duration-format.cc:45</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_a63d8eefb47468aa3f816fbe26a59466a"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">v8::internal::anonymous_namespace{json-stringifier.cc}::no_gc</a></div><div class="ttdeci">size_t const DisallowGarbageCollection &amp; no_gc</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00544">json-stringifier.cc:544</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a51dcb90ae077172b12d63271c7e7ba0c"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">v8::internal::compiler::end</a></div><div class="ttdeci">Node::Uses::const_iterator end(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00711">node.h:711</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_ac87a38a165cbd7423796063beb48dfe2a0580084be6562b9c6ce678acf564177b"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#ac87a38a165cbd7423796063beb48dfe2a0580084be6562b9c6ce678acf564177b">v8::internal::compiler::kWasmFunction</a></div><div class="ttdeci">@ kWasmFunction</div><div class="ttdef"><b>Definition:</b> <a href="wasm-compiler-definitions_8h_source.html#l00096">wasm-compiler-definitions.h:96</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a015ad5b29d5923038933294c57cca557"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a015ad5b29d5923038933294c57cca557">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kMainTaskId</a></div><div class="ttdeci">constexpr uint8_t kMainTaskId</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02040">module-compiler.cc:2040</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a115f40d5a1db2ef4a1f91c4e42c88a94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileStrategy</a></div><div class="ttdeci">CompileStrategy</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00062">module-compiler.cc:62</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a115f40d5a1db2ef4a1f91c4e42c88a94a1fede85ba930eef5832cf35bc93cb2cb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a115f40d5a1db2ef4a1f91c4e42c88a94a1fede85ba930eef5832cf35bc93cb2cb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileStrategy::kLazyBaselineEagerTopTier</a></div><div class="ttdeci">@ kLazyBaselineEagerTopTier</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a168d82deb0d259820bfa9d1edff28451"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a168d82deb0d259820bfa9d1edff28451">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ExecuteCompilationUnits</a></div><div class="ttdeci">CompilationExecutionResult ExecuteCompilationUnits(std::weak_ptr&lt; NativeModule &gt; native_module, Counters *counters, JobDelegate *delegate, CompilationTier tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02043">module-compiler.cc:2043</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a1ef8abc5c39d51cdbffe2b71a8c68a44"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a1ef8abc5c39d51cdbffe2b71a8c68a44">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetCompileStrategy</a></div><div class="ttdeci">CompileStrategy GetCompileStrategy(const WasmModule *module, WasmEnabledFeatures enabled_features, uint32_t func_index, bool lazy_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01006">module-compiler.cc:1006</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a2648e951d12b3a44f449116ec9866b2e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2648e951d12b3a44f449116ec9866b2e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::Impl</a></div><div class="ttdeci">const CompilationStateImpl * Impl(const CompilationState *compilation_state)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00837">module-compiler.cc:837</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a2a168ca8f855d74ddf2e46ee53233b20"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2a168ca8f855d74ddf2e46ee53233b20">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetCompilationHint</a></div><div class="ttdeci">const WasmCompilationHint * GetCompilationHint(const WasmModule *module, uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00994">module-compiler.cc:994</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a2f5e685f626460ac296f11ac3601234e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a2f5e685f626460ac296f11ac3601234e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompileNativeModule</a></div><div class="ttdeci">void CompileNativeModule(Isolate *isolate, v8::metrics::Recorder::ContextId context_id, ErrorThrower *thrower, std::shared_ptr&lt; NativeModule &gt; native_module, ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02295">module-compiler.cc:2295</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a3476387793c3e12b4a0f03900cad2c59"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a3476387793c3e12b4a0f03900cad2c59">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::MayCompriseLazyFunctions</a></div><div class="ttdeci">bool MayCompriseLazyFunctions(const WasmModule *module, WasmEnabledFeatures enabled_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02169">module-compiler.cc:2169</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a389db69d367e7efac0db6727f46fc3f0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a389db69d367e7efac0db6727f46fc3f0">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetDefaultTiersPerModule</a></div><div class="ttdeci">ExecutionTierPair GetDefaultTiersPerModule(NativeModule *native_module, DebugState is_in_debug_state, bool lazy_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01036">module-compiler.cc:1036</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a5c84f9651f5d91a9ec588b0be2866b40"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5c84f9651f5d91a9ec588b0be2866b40">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::IsLazyModule</a></div><div class="ttdeci">bool IsLazyModule(const WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01157">module-compiler.cc:1157</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a5e40db7d1803f45e703d7d44c554d6a9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5e40db7d1803f45e703d7d44c554d6a9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::Impl</a></div><div class="ttdeci">CompilationStateImpl * Impl(CompilationState *compilation_state)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00834">module-compiler.cc:834</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a5fe3511ee452d3e7c4db017d38b2a875"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a5fe3511ee452d3e7c4db017d38b2a875">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::IsI8Array</a></div><div class="ttdeci">bool IsI8Array(wasm::ValueType type, const WasmModule *module, bool allow_nullable)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01812">module-compiler.cc:1812</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a6eeacc59bea21e7cec9649abc2c0d555"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a6eeacc59bea21e7cec9649abc2c0d555">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ValidateSingleFunction</a></div><div class="ttdeci">DecodeResult ValidateSingleFunction(Zone *zone, const WasmModule *module, int func_index, base::Vector&lt; const uint8_t &gt; code, WasmEnabledFeatures enabled_features, WasmDetectedFeatures *detected_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01133">module-compiler.cc:1133</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a7b7f5d73feefbda427f05e9297ca8699"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a7b7f5d73feefbda427f05e9297ca8699">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ApplyHintToExecutionTier</a></div><div class="ttdeci">ExecutionTier ApplyHintToExecutionTier(WasmCompilationHintTier hint, ExecutionTier default_tier)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00981">module-compiler.cc:981</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a8da49e53852594df7dc1de3853ee4aed"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a8da49e53852594df7dc1de3853ee4aed">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetOrCompileNewNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; GetOrCompileNewNativeModule(Isolate *isolate, WasmEnabledFeatures enabled_features, WasmDetectedFeatures detected_features, CompileTimeImports compile_imports, ErrorThrower *thrower, std::shared_ptr&lt; const WasmModule &gt; module, base::OwnedVector&lt; const uint8_t &gt; wire_bytes, int compilation_id, v8::metrics::Recorder::ContextId context_id, ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02378">module-compiler.cc:2378</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_a96cb041804eb9ad1ff24e3dc61924efb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#a96cb041804eb9ad1ff24e3dc61924efb">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::IsI16Array</a></div><div class="ttdeci">bool IsI16Array(wasm::ValueType type, const WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01804">module-compiler.cc:1804</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_aa8e9ac1dc24b7d71879dea71afe0f9bd"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aa8e9ac1dc24b7d71879dea71afe0f9bd">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::InitializeCompilation</a></div><div class="ttdeci">std::unique_ptr&lt; CompilationUnitBuilder &gt; InitializeCompilation(Isolate *isolate, NativeModule *native_module, ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02159">module-compiler.cc:2159</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ab499118d31e8a33d00e9c72dc66824ff"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab499118d31e8a33d00e9c72dc66824ff">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetCompilationEventName</a></div><div class="ttdeci">const char * GetCompilationEventName(const WasmCompilationUnit &amp;unit, const CompilationEnv &amp;env)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02024">module-compiler.cc:2024</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ab844238ed02513478a0a17b5107670ec"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ab844238ed02513478a0a17b5107670ec">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ImportStartOffset</a></div><div class="ttdeci">uint32_t ImportStartOffset(base::Vector&lt; const uint8_t &gt; wire_bytes, uint32_t module_name_start)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01827">module-compiler.cc:1827</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ad24095519f429b94dcc97af671c9ce56"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::OnlyLazyFunctions</a></div><div class="ttdeci">OnlyLazyFunctions</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01152">module-compiler.cc:1152</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ad24095519f429b94dcc97af671c9ce56a34502fb9b3ecabea840b4c0f1b19ee6b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a34502fb9b3ecabea840b4c0f1b19ee6b">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kAllFunctions</a></div><div class="ttdeci">@ kAllFunctions</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01153">module-compiler.cc:1153</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ad24095519f429b94dcc97af671c9ce56a6876a5a7a3362814c6427ac82bfe58c2">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kOnlyLazyFunctions</a></div><div class="ttdeci">@ kOnlyLazyFunctions</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01154">module-compiler.cc:1154</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ae1a0e3acdeaf10ffa4f50002a3142e41"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationExecutionResult</a></div><div class="ttdeci">CompilationExecutionResult</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02022">module-compiler.cc:2022</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a577dc2d037846e27be1eb4e765f081c9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kNoMoreUnits</a></div><div class="ttdeci">@ kNoMoreUnits</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02022">module-compiler.cc:2022</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#ae1a0e3acdeaf10ffa4f50002a3142e41a947f61f88373f45f1b447f94e46b9a82">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kYield</a></div><div class="ttdeci">@ kYield</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02022">module-compiler.cc:2022</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_aef575f4d4842a6dcdb81b8c172df9eb5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationTier</a></div><div class="ttdeci">CompilationTier</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00103">module-compiler.cc:103</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kBaseline</a></div><div class="ttdeci">@ kBaseline</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00103">module-compiler.cc:103</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kTopTier</a></div><div class="ttdeci">@ kTopTier</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00103">module-compiler.cc:103</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::kNumTiers</a></div><div class="ttdeci">@ kNumTiers</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00103">module-compiler.cc:103</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_html_afa5d6fcac84dbf1bc0b0d47a39f81eb3"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03.html#afa5d6fcac84dbf1bc0b0d47a39f81eb3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetLazyCompilationTiers</a></div><div class="ttdeci">ExecutionTierPair GetLazyCompilationTiers(NativeModule *native_module, uint32_t func_index, DebugState is_in_debug_state)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01058">module-compiler.cc:1058</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html">v8::internal::wasm</a></div><div class="ttdef"><b>Definition:</b> <a href="asm-parser_8cc_source.html#l00024">asm-parser.cc:24</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a014ea81f0b1504833e290d4a98601282"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282">v8::internal::wasm::WasmCompilationHintTier</a></div><div class="ttdeci">WasmCompilationHintTier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00282">wasm-module.h:282</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a014ea81f0b1504833e290d4a98601282a51014a338329cb5629fd324cf7493bbc"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a51014a338329cb5629fd324cf7493bbc">v8::internal::wasm::WasmCompilationHintTier::kOptimized</a></div><div class="ttdeci">@ kOptimized</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a014ea81f0b1504833e290d4a98601282a65ffc7d8b4dceb3661bbcf4c6c12118d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a65ffc7d8b4dceb3661bbcf4c6c12118d">v8::internal::wasm::WasmCompilationHintTier::kBaseline</a></div><div class="ttdeci">@ kBaseline</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a014ea81f0b1504833e290d4a98601282a6867faeaa475fda467e48267db2bb8a8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a014ea81f0b1504833e290d4a98601282a6867faeaa475fda467e48267db2bb8a8">v8::internal::wasm::WasmCompilationHintTier::kDefault</a></div><div class="ttdeci">@ kDefault</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a020d8fcab0133f11030d7b8ef6259e29"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29">v8::internal::wasm::CompilationEvent</a></div><div class="ttdeci">CompilationEvent</div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment_8h_source.html#l00097">compilation-environment.h:97</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a41b18f40e8022b599bc6360f216daba4">v8::internal::wasm::CompilationEvent::kFinishedBaselineCompilation</a></div><div class="ttdeci">@ kFinishedBaselineCompilation</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29a9ac6b83a7cebbcdae83cb92173c10599">v8::internal::wasm::CompilationEvent::kFinishedCompilationChunk</a></div><div class="ttdeci">@ kFinishedCompilationChunk</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a020d8fcab0133f11030d7b8ef6259e29af90d51f0b738cedabb652e72ffd7b8ed">v8::internal::wasm::CompilationEvent::kFailedCompilation</a></div><div class="ttdeci">@ kFailedCompilation</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">v8::internal::wasm::kNotForDebugging</a></div><div class="ttdeci">@ kNotForDebugging</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00047">wasm-tier.h:47</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0">v8::internal::wasm::kForDebugging</a></div><div class="ttdeci">@ kForDebugging</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00048">wasm-tier.h:48</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04">v8::internal::wasm::CompileTimeImport::kTextDecoder</a></div><div class="ttdeci">@ kTextDecoder</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9">v8::internal::wasm::CompileTimeImport::kTextEncoder</a></div><div class="ttdeci">@ kTextEncoder</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420">v8::internal::wasm::CompileTimeImport::kJsString</a></div><div class="ttdeci">@ kJsString</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7aa6ff721a10304376cade807b9264cd98"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7aa6ff721a10304376cade807b9264cd98">v8::internal::wasm::CompileTimeImport::kDisableDenormalFloats</a></div><div class="ttdeci">@ kDisableDenormalFloats</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a19827f93e7ddd7bfc05feb71b9a55407"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a19827f93e7ddd7bfc05feb71b9a55407">v8::internal::wasm::TierUpNowForTesting</a></div><div class="ttdeci">void TierUpNowForTesting(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01694">module-compiler.cc:1694</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a25f59e94501ad0ce6680be236623cc3c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">v8::internal::wasm::DebugState</a></div><div class="ttdeci">DebugState</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00053">wasm-tier.h:53</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a274a3a31f85691b7918199e835fa91c9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a274a3a31f85691b7918199e835fa91c9">v8::internal::wasm::name</a></div><div class="ttdeci">constexpr const char * name(ValueKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01195">value-type.h:1195</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a36345041662f17bb39d27709c1cb78ac"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">v8::internal::wasm::GetWasmImportWrapperCache</a></div><div class="ttdeci">WasmImportWrapperCache * GetWasmImportWrapperCache()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02135">wasm-engine.cc:2135</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a39f220d6cd8ec966c407b99a7de6f461"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a39f220d6cd8ec966c407b99a7de6f461">v8::internal::wasm::kWasmRefExtern</a></div><div class="ttdeci">constexpr IndependentHeapType kWasmRefExtern</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01261">value-type.h:1261</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">v8::internal::wasm::kWasmOrigin</a></div><div class="ttdeci">@ kWasmOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00125">wasm-module.h:125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a42a2fc870f8946e6ffe986e629a5693b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693b">v8::internal::wasm::SectionCode</a></div><div class="ttdeci">SectionCode</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00106">wasm-constants.h:106</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a42a2fc870f8946e6ffe986e629a5693ba8cfdeb9213a3d517aed3c0ca252a5e6f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a42a2fc870f8946e6ffe986e629a5693ba8cfdeb9213a3d517aed3c0ca252a5e6f">v8::internal::wasm::kUnknownSectionCode</a></div><div class="ttdeci">@ kUnknownSectionCode</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00107">wasm-constants.h:107</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a4db122bc2036fcc7c5f94924836554e5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a4db122bc2036fcc7c5f94924836554e5">v8::internal::wasm::CompileImportWrapperForTest</a></div><div class="ttdeci">std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; CompileImportWrapperForTest(Isolate *isolate, ImportCallKind kind, const CanonicalSig *sig, CanonicalTypeIndex type_index, int expected_arity, Suspend suspend)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l04394">module-compiler.cc:4394</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a55a717894f5d005ae86062dd4647a3b2"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">v8::internal::wasm::GetWasmCodeManager</a></div><div class="ttdeci">WasmCodeManager * GetWasmCodeManager()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02130">wasm-engine.cc:2130</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a5d346308124847f8fc36bfd05b5079a3"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a5d346308124847f8fc36bfd05b5079a3">v8::internal::wasm::TriggerTierUp</a></div><div class="ttdeci">void TriggerTierUp(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01654">module-compiler.cc:1654</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a5fb16976eb8924e08ec6616b1527f636"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a5fb16976eb8924e08ec6616b1527f636">v8::internal::wasm::TierUpAllForTesting</a></div><div class="ttdeci">void TierUpAllForTesting(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01708">module-compiler.cc:1708</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a60a035009507dcad49f342b8e4676bfc"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a60a035009507dcad49f342b8e4676bfc">v8::internal::wasm::InitializeCompilationForTesting</a></div><div class="ttdeci">void InitializeCompilationForTesting(NativeModule *native_module)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01723">module-compiler.cc:1723</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a690faef021ab529c2506ff4cc19f23d3a9f2b960005d2a3a5f35ac32809d84db7"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3a9f2b960005d2a3a5f35ac32809d84db7">v8::internal::wasm::DecodingMethod::kAsync</a></div><div class="ttdeci">@ kAsync</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6eef6d24980961199f34fb770039843a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">v8::internal::wasm::Suspend</a></div><div class="ttdeci">Suspend</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00034">module-instantiate.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a70bbfcab50b20ba5da8696e0373a8af4"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a70bbfcab50b20ba5da8696e0373a8af4">v8::internal::wasm::is_asmjs_module</a></div><div class="ttdeci">bool is_asmjs_module(const WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00961">wasm-module.h:961</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">v8::internal::wasm::ExecutionTier</a></div><div class="ttdeci">ExecutionTier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00019">wasm-tier.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">v8::internal::wasm::ExecutionTier::kNone</a></div><div class="ttdeci">@ kNone</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">v8::internal::wasm::ExecutionTier::kLiftoff</a></div><div class="ttdeci">@ kLiftoff</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">v8::internal::wasm::ExecutionTier::kTurbofan</a></div><div class="ttdeci">@ kTurbofan</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a75bfbc047d813d2932698521c1c1145f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a75bfbc047d813d2932698521c1c1145f">v8::internal::wasm::kWasmExternRef</a></div><div class="ttdeci">constexpr IndependentHeapType kWasmExternRef</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01260">value-type.h:1260</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a7b893808fadaa287f225d7209d2d36c6"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a7b893808fadaa287f225d7209d2d36c6">v8::internal::wasm::kWasmI32</a></div><div class="ttdeci">constexpr IndependentValueType kWasmI32</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01243">value-type.h:1243</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a83ed1297167cba9f8c8971bacab69dbf"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">v8::internal::wasm::DecodeWasmModule</a></div><div class="ttdeci">ModuleResult DecodeWasmModule(WasmEnabledFeatures enabled_features, base::Vector&lt; const uint8_t &gt; wire_bytes, bool validate_functions, ModuleOrigin origin, Counters *counters, std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder, v8::metrics::Recorder::ContextId context_id, DecodingMethod decoding_method, WasmDetectedFeatures *detected_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00077">module-decoder.cc:77</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a8f515217a2a720fd696212a68a5cd87a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a8f515217a2a720fd696212a68a5cd87a">v8::internal::wasm::ThrowLazyCompilationError</a></div><div class="ttdeci">void ThrowLazyCompilationError(Isolate *isolate, const NativeModule *native_module, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01253">module-compiler.cc:1253</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a9185844f778e363e0f879498161aab47"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a9185844f778e363e0f879498161aab47">v8::internal::wasm::DeserializeNativeModule</a></div><div class="ttdeci">MaybeDirectHandle&lt; WasmModuleObject &gt; DeserializeNativeModule(Isolate *isolate, base::Vector&lt; const uint8_t &gt; data, base::Vector&lt; const uint8_t &gt; wire_bytes_vec, const CompileTimeImports &amp;compile_imports, base::Vector&lt; const char &gt; source_url)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-serialization_8cc_source.html#l01091">wasm-serialization.cc:1091</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a967972baab540f22d49f12d2fae66b46"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46">v8::internal::wasm::CompileToNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; CompileToNativeModule(Isolate *isolate, WasmEnabledFeatures enabled_features, WasmDetectedFeatures detected_features, CompileTimeImports compile_imports, ErrorThrower *thrower, std::shared_ptr&lt; const WasmModule &gt; module, base::OwnedVector&lt; const uint8_t &gt; wire_bytes, int compilation_id, v8::metrics::Recorder::ContextId context_id, ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02423">module-compiler.cc:2423</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a97644489c4ab86ae3156930153cd1b5e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">v8::internal::wasm::ValidateAndSetBuiltinImports</a></div><div class="ttdeci">WasmError ValidateAndSetBuiltinImports(const WasmModule *module, base::Vector&lt; const uint8_t &gt; wire_bytes, const CompileTimeImports &amp;imports, WasmDetectedFeatures *detected)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01842">module-compiler.cc:1842</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a9a79ec61e742ba6e76addd6390334f22"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a9a79ec61e742ba6e76addd6390334f22">v8::internal::wasm::kWasmExnRef</a></div><div class="ttdeci">constexpr IndependentHeapType kWasmExnRef</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01263">value-type.h:1263</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aa122591443234c1d0b597dadc9d55c5e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">v8::internal::wasm::ContentSize</a></div><div class="ttdeci">size_t ContentSize(const std::vector&lt; T &gt; &amp;vector)</div><div class="ttdef"><b>Definition:</b> <a href="std-object-sizes_8h_source.html#l00028">std-object-sizes.h:28</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aa7549c056d2ab9e5a9cf2558f1478051"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aa7549c056d2ab9e5a9cf2558f1478051">v8::internal::wasm::kMaxPolymorphism</a></div><div class="ttdeci">constexpr int kMaxPolymorphism</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00218">wasm-constants.h:218</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab14c5d1b4e1be5a5465678002c82ef10"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab14c5d1b4e1be5a5465678002c82ef10">v8::internal::wasm::ValidateFunctions</a></div><div class="ttdeci">WasmError ValidateFunctions(const WasmModule *module, WasmEnabledFeatures enabled_features, base::Vector&lt; const uint8_t &gt; wire_bytes, std::function&lt; bool(int)&gt; filter, WasmDetectedFeatures *detected_features_out)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00621">module-decoder.cc:621</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab650db3bf6479d5dfe0cb087f6880f73"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab650db3bf6479d5dfe0cb087f6880f73">v8::internal::wasm::ValidateFunctionBody</a></div><div class="ttdeci">DecodeResult ValidateFunctionBody(Zone *zone, WasmEnabledFeatures enabled, const WasmModule *module, WasmDetectedFeatures *detected, const FunctionBody &amp;body)</div><div class="ttdef"><b>Definition:</b> <a href="function-body-decoder_8cc_source.html#l00072">function-body-decoder.cc:72</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abc12fc3b25ebfb54c20b8479642acb94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">v8::internal::wasm::GetWasmEngine</a></div><div class="ttdeci">WasmEngine * GetWasmEngine()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02125">wasm-engine.cc:2125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abd9cf6cdda997dfabf862a6048202195"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">v8::internal::wasm::declared_function_index</a></div><div class="ttdeci">int declared_function_index(const WasmModule *module, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l01076">wasm-module.h:1076</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0c0d417be648d20ef96581e5d3bd63a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63a">v8::internal::wasm::ImportCallKind</a></div><div class="ttdeci">ImportCallKind</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00043">module-instantiate.h:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca357743e710fa56c5fabec8b006584e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca357743e710fa56c5fabec8b006584e">v8::internal::wasm::LoadProfileFromFile</a></div><div class="ttdeci">std::unique_ptr&lt; ProfileInformation &gt; LoadProfileFromFile(const WasmModule *module, base::Vector&lt; const uint8_t &gt; wire_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="pgo_8cc_source.html#l00222">pgo.cc:222</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_acb10c8534fdb3edc15e3f45d7ee6d547a6f3a1cfcc3386739303f7d10b0075ac5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#acb10c8534fdb3edc15e3f45d7ee6d547a6f3a1cfcc3386739303f7d10b0075ac5">v8::internal::wasm::kExternalGlobal</a></div><div class="ttdeci">@ kExternalGlobal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00082">wasm-constants.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_acb10c8534fdb3edc15e3f45d7ee6d547a841c234519f90eb88be0020af3622a4d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#acb10c8534fdb3edc15e3f45d7ee6d547a841c234519f90eb88be0020af3622a4d">v8::internal::wasm::kExternalFunction</a></div><div class="ttdeci">@ kExternalFunction</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00079">wasm-constants.h:79</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad2b94e9a247149c2f2a19be54a08f7e1a1f85c8fbccc9bb4fcda482bf840bc3e2"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1f85c8fbccc9bb4fcda482bf840bc3e2">v8::internal::wasm::WasmCompilationHintStrategy::kEager</a></div><div class="ttdeci">@ kEager</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad2b94e9a247149c2f2a19be54a08f7e1a1fede85ba930eef5832cf35bc93cb2cb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a1fede85ba930eef5832cf35bc93cb2cb">v8::internal::wasm::WasmCompilationHintStrategy::kLazyBaselineEagerTopTier</a></div><div class="ttdeci">@ kLazyBaselineEagerTopTier</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad2b94e9a247149c2f2a19be54a08f7e1a6867faeaa475fda467e48267db2bb8a8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1a6867faeaa475fda467e48267db2bb8a8">v8::internal::wasm::WasmCompilationHintStrategy::kDefault</a></div><div class="ttdeci">@ kDefault</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad2b94e9a247149c2f2a19be54a08f7e1ae3c54a7917f0c719b11db86b1dd59b0f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad2b94e9a247149c2f2a19be54a08f7e1ae3c54a7917f0c719b11db86b1dd59b0f">v8::internal::wasm::WasmCompilationHintStrategy::kLazy</a></div><div class="ttdeci">@ kLazy</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad817bffa6a445b9979513a6933576055"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad817bffa6a445b9979513a6933576055">v8::internal::wasm::IsCrossInstanceCall</a></div><div class="ttdeci">bool IsCrossInstanceCall(Tagged&lt; Object &gt; obj, Isolate *const isolate)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01351">module-compiler.cc:1351</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adbb89ce490c56aae60c8221f47b9f088"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adfc648b4e5d05b43110df728650e4e4e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adfc648b4e5d05b43110df728650e4e4e">v8::internal::wasm::WasmDetectedFeature</a></div><div class="ttdeci">WasmDetectedFeature</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00048">wasm-features.h:48</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae7a6dc8061ff4f4860d0efa2cca75d9d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae7a6dc8061ff4f4860d0efa2cca75d9d">v8::internal::wasm::PublishDetectedFeatures</a></div><div class="ttdeci">void PublishDetectedFeatures(WasmDetectedFeatures detected_features, Isolate *isolate, bool is_initial_compilation)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01728">module-compiler.cc:1728</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afa7a500801a38cc98469c31192f78468"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afa7a500801a38cc98469c31192f78468">v8::internal::wasm::CompileLazy</a></div><div class="ttdeci">bool CompileLazy(Isolate *isolate, Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01183">module-compiler.cc:1183</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6e">v8::internal::wasm::WellKnownImport</a></div><div class="ttdeci">WellKnownImport</div><div class="ttdef"><b>Definition:</b> <a href="well-known-imports_8h_source.html#l00019">well-known-imports.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea025e1c9f27557f20869f4e447d8e2650"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea025e1c9f27557f20869f4e447d8e2650">v8::internal::wasm::WellKnownImport::kStringSubstring</a></div><div class="ttdeci">@ kStringSubstring</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea2131852b663891f0994db1e7a36f8867"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea2131852b663891f0994db1e7a36f8867">v8::internal::wasm::WellKnownImport::kStringFromWtf16Array</a></div><div class="ttdeci">@ kStringFromWtf16Array</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea3da24690aec2adcb83a65afb07d2a81f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea3da24690aec2adcb83a65afb07d2a81f">v8::internal::wasm::WellKnownImport::kStringFromCharCode</a></div><div class="ttdeci">@ kStringFromCharCode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea4458d686d446ba3cb74e46d8c85ba791"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea4458d686d446ba3cb74e46d8c85ba791">v8::internal::wasm::WellKnownImport::kStringEquals</a></div><div class="ttdeci">@ kStringEquals</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea4a2d15530df7ed8fe7a35b02d47fff24"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea4a2d15530df7ed8fe7a35b02d47fff24">v8::internal::wasm::WellKnownImport::kUninstantiated</a></div><div class="ttdeci">@ kUninstantiated</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea880a1d9d17a0fea09c4f88e7e3a5b3c8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea880a1d9d17a0fea09c4f88e7e3a5b3c8">v8::internal::wasm::WellKnownImport::kStringCodePointAt</a></div><div class="ttdeci">@ kStringCodePointAt</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea8e3f25105ad0cf92c606529debc35721"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea8e3f25105ad0cf92c606529debc35721">v8::internal::wasm::WellKnownImport::kStringIntoUtf8Array</a></div><div class="ttdeci">@ kStringIntoUtf8Array</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea974aaaa059c6fba0dfb3f7e60ca0edc8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea974aaaa059c6fba0dfb3f7e60ca0edc8">v8::internal::wasm::WellKnownImport::kStringCompare</a></div><div class="ttdeci">@ kStringCompare</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea9de3632f47e27959c200e62484330936"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea9de3632f47e27959c200e62484330936">v8::internal::wasm::WellKnownImport::kStringToWtf16Array</a></div><div class="ttdeci">@ kStringToWtf16Array</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6ea9e97c9e6af7667c3fe85b7834c4ae470"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6ea9e97c9e6af7667c3fe85b7834c4ae470">v8::internal::wasm::WellKnownImport::kStringFromCodePoint</a></div><div class="ttdeci">@ kStringFromCodePoint</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eaae69b44fefda9823ba38a5e442454d7e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaae69b44fefda9823ba38a5e442454d7e">v8::internal::wasm::WellKnownImport::kStringCharCodeAt</a></div><div class="ttdeci">@ kStringCharCodeAt</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eab0a05b1529f7334a8bf654350c064fd1"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eab0a05b1529f7334a8bf654350c064fd1">v8::internal::wasm::WellKnownImport::kStringTest</a></div><div class="ttdeci">@ kStringTest</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eac87da7065fd2c38b65c88900f0136159"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eac87da7065fd2c38b65c88900f0136159">v8::internal::wasm::WellKnownImport::kStringLength</a></div><div class="ttdeci">@ kStringLength</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eaccfd587981c85c5c914d6ecd60e0f330"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaccfd587981c85c5c914d6ecd60e0f330">v8::internal::wasm::WellKnownImport::kStringToUtf8Array</a></div><div class="ttdeci">@ kStringToUtf8Array</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eada036082fdf62d64e75d6c2a78977904"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eada036082fdf62d64e75d6c2a78977904">v8::internal::wasm::WellKnownImport::kStringCast</a></div><div class="ttdeci">@ kStringCast</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eaee4e1698859a4c1b87e559835724e0e5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eaee4e1698859a4c1b87e559835724e0e5">v8::internal::wasm::WellKnownImport::kStringFromUtf8Array</a></div><div class="ttdeci">@ kStringFromUtf8Array</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afaaaa7fd7a0bc697a4d91133566c5c6eafd9a4c0cd1d6ca6e15057c5a9b13eedc"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afaaaa7fd7a0bc697a4d91133566c5c6eafd9a4c0cd1d6ca6e15057c5a9b13eedc">v8::internal::wasm::WellKnownImport::kStringMeasureUtf8</a></div><div class="ttdeci">@ kStringMeasureUtf8</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_afca7dc31d6cfc38c235556c27dec960b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#afca7dc31d6cfc38c235556c27dec960b">v8::internal::wasm::GetWasmErrorWithName</a></div><div class="ttdeci">WasmError GetWasmErrorWithName(base::Vector&lt; const uint8_t &gt; wire_bytes, int func_index, const WasmModule *module, WasmError error)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00664">module-decoder.cc:664</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="heap-snapshot-generator_8cc_source.html#l01698">heap-snapshot-generator.cc:1698</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b"><div class="ttname"><a href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">v8::internal::ConcurrencyMode::kSynchronous</a></div><div class="ttdeci">@ kSynchronous</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4e2118a7c0d730210e0cb87b511cba70"><div class="ttname"><a href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">v8::internal::bool</a></div><div class="ttdeci">bool</div><div class="ttdef"><b>Definition:</b> <a href="js-function-inl_8h_source.html#l00488">js-function-inl.h:488</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a538499d2a66bf6e9d3182a57104edec9"><div class="ttname"><a href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">v8::internal::UNIMPLEMENTED</a></div><div class="ttdeci">UNIMPLEMENTED()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">v8::internal::AllocationType::kOld</a></div><div class="ttdeci">@ kOld</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6135f0ef57de8d381e3225f6659c617a"><div class="ttname"><a href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">v8::internal::sig</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag kProtectedInstanceDataOffset sig</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00471">wasm-objects-inl.h:471</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a87c83cc0cb9799c767aaa72c71567680a9f2b960005d2a3a5f35ac32809d84db7"><div class="ttname"><a href="namespacev8_1_1internal.html#a87c83cc0cb9799c767aaa72c71567680a9f2b960005d2a3a5f35ac32809d84db7">v8::internal::IteratorType::kAsync</a></div><div class="ttdeci">@ kAsync</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a8c89f00da07e125218128b9fbf0a321c"><div class="ttname"><a href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">v8::internal::handle</a></div><div class="ttdeci">IndirectHandle&lt; T &gt; handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="handles-inl_8h_source.html#l00072">handles-inl.h:72</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aae0d674c07aba6028b4ee683cb1e760d"><div class="ttname"><a href="namespacev8_1_1internal.html#aae0d674c07aba6028b4ee683cb1e760d">v8::internal::duration</a></div><div class="ttdeci">duration</div><div class="ttdef"><b>Definition:</b> <a href="builtins-temporal_8cc_source.html#l00589">builtins-temporal.cc:589</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">v8::internal::WasmValueType::kI32</a></div><div class="ttdeci">@ kI32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac299e59759eecb4621f6bad64d5db952"><div class="ttname"><a href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">v8::internal::IsSmi</a></div><div class="ttdeci">constexpr bool IsSmi(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00666">objects.h:666</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac8a910d8da4f0e471c17479f76af3625a1f85c8fbccc9bb4fcda482bf840bc3e2"><div class="ttname"><a href="namespacev8_1_1internal.html#ac8a910d8da4f0e471c17479f76af3625a1f85c8fbccc9bb4fcda482bf840bc3e2">v8::internal::DeoptimizeKind::kEager</a></div><div class="ttdeci">@ kEager</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac8a910d8da4f0e471c17479f76af3625ae3c54a7917f0c719b11db86b1dd59b0f"><div class="ttname"><a href="namespacev8_1_1internal.html#ac8a910d8da4f0e471c17479f76af3625ae3c54a7917f0c719b11db86b1dd59b0f">v8::internal::DeoptimizeKind::kLazy</a></div><div class="ttdeci">@ kLazy</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad03e50e4d15ee0da6a722254f350e7eb"><div class="ttname"><a href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">v8::internal::kMaxInt</a></div><div class="ttdeci">constexpr int kMaxInt</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00375">globals.h:375</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adee95482032a93e07f59341fed5c909f"><div class="ttname"><a href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">v8::internal::is_shared</a></div><div class="ttdeci">JSArrayBuffer::IsDetachableBit is_shared</div><div class="ttdef"><b>Definition:</b> <a href="js-array-buffer-inl_8h_source.html#l00189">js-array-buffer-inl.h:189</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af04f4104c077ccbaef7596e23816a254"><div class="ttname"><a href="namespacev8_1_1internal.html#af04f4104c077ccbaef7596e23816a254">v8::internal::status</a></div><div class="ttdeci">status</div><div class="ttdef"><b>Definition:</b> <a href="js-disposable-stack-inl_8h_source.html#l00034">js-disposable-stack-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afa9ea55d792121fba92b4cfc8ef8c9d7"><div class="ttname"><a href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">v8::internal::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l01508">external-reference.cc:1508</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb7e5cd394b9632dddc2e7807b11b2ab"><div class="ttname"><a href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">v8::internal::script</a></div><div class="ttdeci">kInterpreterTrampolineOffset script</div><div class="ttdef"><b>Definition:</b> <a href="shared-function-info-inl_8h_source.html#l00117">shared-function-info-inl.h:117</a></div></div>
<div class="ttc" id="anamespacev8_html_a05f25f935e108a1ea2d150e274602b87a7ab4d58719c33b3ea2dfaefa29b111df"><div class="ttname"><a href="namespacev8.html#a05f25f935e108a1ea2d150e274602b87a7ab4d58719c33b3ea2dfaefa29b111df">v8::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">None.</div><div class="ttdef"><b>Definition:</b> <a href="v8-object_8h_source.html#l00143">v8-object.h:143</a></div></div>
<div class="ttc" id="anamespacev8_html_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209"><div class="ttname"><a href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::TaskPriority::kUserBlocking</a></div><div class="ttdeci">@ kUserBlocking</div><div class="ttdoc">User blocking tasks are highest priority tasks that block the execution thread (e....</div></div>
<div class="ttc" id="anamespacev8_html_a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d"><div class="ttname"><a href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a602dfdb2b16ea7a1f4392dc3d5761f7d">v8::TaskPriority::kUserVisible</a></div><div class="ttdeci">@ kUserVisible</div><div class="ttdoc">User visible tasks are long running background tasks that will improve performance and memory usage o...</div></div>
<div class="ttc" id="apgo_8h_html"><div class="ttname"><a href="pgo_8h.html">pgo.h</a></div></div>
<div class="ttc" id="asemaphore_8h_html"><div class="ttname"><a href="semaphore_8h.html">semaphore.h</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2209830df6b59d1ec1fdf66b9352924f"><div class="ttname"><a href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a></div><div class="ttdeci">#define DCHECK_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00491">logging.h:491</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00293">macros.h:293</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ac55fdd6aa61539c49b1b1f5d38a0ed73"><div class="ttname"><a href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a></div><div class="ttdeci">#define arraysize(array)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00067">macros.h:67</a></div></div>
<div class="ttc" id="astd-object-sizes_8h_html"><div class="ttname"><a href="std-object-sizes_8h.html">std-object-sizes.h</a></div></div>
<div class="ttc" id="astd-object-sizes_8h_html_a56caa02a4280c4f0c82adab429400770"><div class="ttname"><a href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a></div><div class="ttdeci">#define UPDATE_WHEN_CLASS_CHANGES(classname, size)</div><div class="ttdef"><b>Definition:</b> <a href="std-object-sizes_8h_source.html#l00079">std-object-sizes.h:79</a></div></div>
<div class="ttc" id="astreaming-decoder_8h_html"><div class="ttname"><a href="streaming-decoder_8h.html">streaming-decoder.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1count_html"><div class="ttname"><a href="structv8_1_1internal_1_1count.html">v8::internal::count</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-fast-api-calls_8h_source.html#l00511">v8-fast-api-calls.h:511</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html">v8::internal::wasm::CallSiteFeedback::PolymorphicCase</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00494">wasm-module.h:494</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase_html_a1dbb576c2c349f34231cd2504d72d952"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html#a1dbb576c2c349f34231cd2504d72d952">v8::internal::wasm::CallSiteFeedback::PolymorphicCase::function_index</a></div><div class="ttdeci">int function_index</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00495">wasm-module.h:495</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase_html_a335adc6abf34fc2ab937f4849c46006d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CallSiteFeedback_1_1PolymorphicCase.html#a335adc6abf34fc2ab937f4849c46006d">v8::internal::wasm::CallSiteFeedback::PolymorphicCase::absolute_call_frequency</a></div><div class="ttdeci">int absolute_call_frequency</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00496">wasm-module.h:496</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">v8::internal::wasm::CanonicalTypeIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00082">value-type.h:82</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CompilationEnv_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html">v8::internal::wasm::CompilationEnv</a></div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment_8h_source.html#l00052">compilation-environment.h:52</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CompilationEnv_html_a82326dba2957af291922c647638d924c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html#a82326dba2957af291922c647638d924c">v8::internal::wasm::CompilationEnv::ForModule</a></div><div class="ttdeci">static CompilationEnv ForModule(const NativeModule *native_module)</div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment-inl_8h_source.html#l00019">compilation-environment-inl.h:19</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CompilationEnv_html_aaa94c1bc8d30640716c3e0b5f32097cd"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CompilationEnv.html#aaa94c1bc8d30640716c3e0b5f32097cd">v8::internal::wasm::CompilationEnv::module</a></div><div class="ttdeci">const WasmModule *const module</div><div class="ttdef"><b>Definition:</b> <a href="compilation-environment_8h_source.html#l00054">compilation-environment.h:54</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1FunctionBody_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1FunctionBody.html">v8::internal::wasm::FunctionBody</a></div><div class="ttdef"><b>Definition:</b> <a href="function-body-decoder_8h_source.html#l00032">function-body-decoder.h:32</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback_html_ab023ba1d0947644b0bb1053726d15e12"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ab023ba1d0947644b0bb1053726d15e12">v8::internal::wasm::FunctionTypeFeedback::kCallRef</a></div><div class="ttdeci">static constexpr uint32_t kCallRef</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00621">wasm-module.h:621</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback_html_ad63f4199b4be307795d79157f5490c39"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1FunctionTypeFeedback.html#ad63f4199b4be307795d79157f5490c39">v8::internal::wasm::FunctionTypeFeedback::kCallIndirect</a></div><div class="ttdeci">static constexpr uint32_t kCallIndirect</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00622">wasm-module.h:622</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleTypeIndex_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">v8::internal::wasm::ModuleTypeIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00064">value-type.h:64</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">v8::internal::wasm::ModuleWireBytes</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00993">wasm-module.h:993</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html_a31e859ce9fbc3561f23d5411edd92c4b"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#a31e859ce9fbc3561f23d5411edd92c4b">v8::internal::wasm::ModuleWireBytes::length</a></div><div class="ttdeci">size_t length() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l01024">wasm-module.h:1024</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html_aad25d74a24c1f21b337f94460ecc662c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">v8::internal::wasm::ModuleWireBytes::GetNameOrNull</a></div><div class="ttdeci">WasmName GetNameOrNull(WireBytesRef ref) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8cc_source.html#l00217">wasm-module.cc:217</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html_af338b42016b3853f6809690916c09c04"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#af338b42016b3853f6809690916c09c04">v8::internal::wasm::ModuleWireBytes::module_bytes</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; module_bytes() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l01021">wasm-module.h:1021</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeDefinition_html_acc6533d7fffb2a411e20b62f7512038e"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeDefinition.html#acc6533d7fffb2a411e20b62f7512038e">v8::internal::wasm::TypeDefinition::is_shared</a></div><div class="ttdeci">bool is_shared</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00481">wasm-module.h:481</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html">v8::internal::wasm::TypeFeedbackStorage</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00626">wasm-module.h:626</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage_html_a2f59640a40aae70550d8eda5f0f89c5f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a2f59640a40aae70550d8eda5f0f89c5f">v8::internal::wasm::TypeFeedbackStorage::well_known_imports</a></div><div class="ttdeci">WellKnownImportsList well_known_imports</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00644">wasm-module.h:644</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage_html_a430d975fff82d80bbbbdd0cf3b5eafd8"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a430d975fff82d80bbbbdd0cf3b5eafd8">v8::internal::wasm::TypeFeedbackStorage::feedback_for_function</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, FunctionTypeFeedback &gt; feedback_for_function</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00627">wasm-module.h:627</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage_html_a978ef852d135cebd5dc2629bc8692090"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeFeedbackStorage.html#a978ef852d135cebd5dc2629bc8692090">v8::internal::wasm::TypeFeedbackStorage::mutex</a></div><div class="ttdeci">base::Mutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00642">wasm-module.h:642</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html">v8::internal::wasm::ValidateFunctionsStreamingJobData::Unit</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02490">module-compiler.cc:2490</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit_html_a1aa9923e94571d28a762b1a20f6c753b"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#a1aa9923e94571d28a762b1a20f6c753b">v8::internal::wasm::ValidateFunctionsStreamingJobData::Unit::code</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; code</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02493">module-compiler.cc:2493</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit_html_aee8a6605ef805e75bf5ee61c0f638e7d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_1_1Unit.html#aee8a6605ef805e75bf5ee61c0f638e7d">v8::internal::wasm::ValidateFunctionsStreamingJobData::Unit::func_index</a></div><div class="ttdeci">int func_index</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02492">module-compiler.cc:2492</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html">v8::internal::wasm::ValidateFunctionsStreamingJobData</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02489">module-compiler.cc:2489</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a19f07dd2194cf5b0c00412210dc91b92"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a19f07dd2194cf5b0c00412210dc91b92">v8::internal::wasm::ValidateFunctionsStreamingJobData::units</a></div><div class="ttdeci">base::OwnedVector&lt; Unit &gt; units</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02572">module-compiler.cc:2572</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a30537e9b0e0f4d0160b17f97f2ceed43"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a30537e9b0e0f4d0160b17f97f2ceed43">v8::internal::wasm::ValidateFunctionsStreamingJobData::Initialize</a></div><div class="ttdeci">void Initialize(int num_declared_functions)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02502">module-compiler.cc:2502</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a3fbf9bebc526ac76149545b2e6b1e5bc"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a3fbf9bebc526ac76149545b2e6b1e5bc">v8::internal::wasm::ValidateFunctionsStreamingJobData::end_of_available_units</a></div><div class="ttdeci">std::atomic&lt; Unit * &gt; end_of_available_units</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02574">module-compiler.cc:2574</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a4ec50926fec4429aac9d5d81a5d9a705"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a4ec50926fec4429aac9d5d81a5d9a705">v8::internal::wasm::ValidateFunctionsStreamingJobData::next_available_unit</a></div><div class="ttdeci">std::atomic&lt; Unit * &gt; next_available_unit</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02573">module-compiler.cc:2573</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a5552012797ffa8222c56b7b65fcc4c45"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a5552012797ffa8222c56b7b65fcc4c45">v8::internal::wasm::ValidateFunctionsStreamingJobData::UpdateDetectedFeatures</a></div><div class="ttdeci">void UpdateDetectedFeatures(WasmDetectedFeatures new_detected_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02562">module-compiler.cc:2562</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a82498d65506cdd9a96e15cbc43061da0"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a82498d65506cdd9a96e15cbc43061da0">v8::internal::wasm::ValidateFunctionsStreamingJobData::NumOutstandingUnits</a></div><div class="ttdeci">size_t NumOutstandingUnits() const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02538">module-compiler.cc:2538</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_a9cfdfc887c8e71d8e6f5e70352b372c2"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#a9cfdfc887c8e71d8e6f5e70352b372c2">v8::internal::wasm::ValidateFunctionsStreamingJobData::found_error</a></div><div class="ttdeci">std::atomic&lt; bool &gt; found_error</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02575">module-compiler.cc:2575</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_aa3640734bcf13379124fb8a689e3865f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aa3640734bcf13379124fb8a689e3865f">v8::internal::wasm::ValidateFunctionsStreamingJobData::GetUnit</a></div><div class="ttdeci">Unit GetUnit()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02547">module-compiler.cc:2547</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_ace23482eb9e8803b07a5f797fb9a0985"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#ace23482eb9e8803b07a5f797fb9a0985">v8::internal::wasm::ValidateFunctionsStreamingJobData::detected_features</a></div><div class="ttdeci">std::atomic&lt; WasmDetectedFeatures &gt; detected_features</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02576">module-compiler.cc:2576</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData_html_aea4d7941a772b26e34a901b0e3dad6c9"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ValidateFunctionsStreamingJobData.html#aea4d7941a772b26e34a901b0e3dad6c9">v8::internal::wasm::ValidateFunctionsStreamingJobData::AddUnit</a></div><div class="ttdeci">void AddUnit(int declared_func_index, base::Vector&lt; const uint8_t &gt; code, JobHandle *job_handle)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02510">module-compiler.cc:2510</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationHint_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html">v8::internal::wasm::WasmCompilationHint</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00289">wasm-module.h:289</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationHint_html_a0e925f80d2cb467976424c2e1d09782d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a0e925f80d2cb467976424c2e1d09782d">v8::internal::wasm::WasmCompilationHint::top_tier</a></div><div class="ttdeci">WasmCompilationHintTier top_tier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00292">wasm-module.h:292</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationHint_html_a0fec5831fdab722f5cf38aeed571cc9f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a0fec5831fdab722f5cf38aeed571cc9f">v8::internal::wasm::WasmCompilationHint::strategy</a></div><div class="ttdeci">WasmCompilationHintStrategy strategy</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00290">wasm-module.h:290</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationHint_html_a40f8cffca7ea986394a11d33c9f6ec60"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationHint.html#a40f8cffca7ea986394a11d33c9f6ec60">v8::internal::wasm::WasmCompilationHint::baseline_tier</a></div><div class="ttdeci">WasmCompilationHintTier baseline_tier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00291">wasm-module.h:291</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationResult_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">v8::internal::wasm::WasmCompilationResult</a></div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8h_source.html#l00062">function-compiler.h:62</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">v8::internal::wasm::WasmFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00081">wasm-module.h:81</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_a27c9b60862536d6bd685a1fb750bec1f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a27c9b60862536d6bd685a1fb750bec1f">v8::internal::wasm::WasmFunction::sig_index</a></div><div class="ttdeci">ModuleTypeIndex sig_index</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00084">wasm-module.h:84</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_ab4f3d0ecf1a3e6eab1bb917b4568d547"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#ab4f3d0ecf1a3e6eab1bb917b4568d547">v8::internal::wasm::WasmFunction::sig</a></div><div class="ttdeci">const FunctionSig * sig</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00082">wasm-module.h:82</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_aec97739a140bf8da830c55636434adcf"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#aec97739a140bf8da830c55636434adcf">v8::internal::wasm::WasmFunction::code</a></div><div class="ttdeci">WireBytesRef code</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00086">wasm-module.h:86</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmImport_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmImport.html">v8::internal::wasm::WasmImport</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00261">wasm-module.h:261</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">v8::internal::wasm::WasmModule</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00666">wasm-module.h:666</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a1ba1c8f2a48659fe0cdf2aee38ce0a43"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a1ba1c8f2a48659fe0cdf2aee38ce0a43">v8::internal::wasm::WasmModule::set_function_validated</a></div><div class="ttdeci">void set_function_validated(int func_index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00917">wasm-module.h:917</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a203c3dead384ed9378fabac21ef51c52"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a203c3dead384ed9378fabac21ef51c52">v8::internal::wasm::WasmModule::canonical_type_id</a></div><div class="ttdeci">CanonicalTypeIndex canonical_type_id(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00813">wasm-module.h:813</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a29343a7352161e7534f33ef4620338b3"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a29343a7352161e7534f33ef4620338b3">v8::internal::wasm::WasmModule::debug_symbols</a></div><div class="ttdeci">std::array&lt; WasmDebugSymbols, WasmDebugSymbols::kNumTypes &gt; debug_symbols</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00736">wasm-module.h:736</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a4d7f2eb3c584f9a7b9d79754dd29a315"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4d7f2eb3c584f9a7b9d79754dd29a315">v8::internal::wasm::WasmModule::has_array</a></div><div class="ttdeci">bool has_array(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00872">wasm-module.h:872</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a4f710e1d1dd945669cbebae2b51835e5"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4f710e1d1dd945669cbebae2b51835e5">v8::internal::wasm::WasmModule::import_table</a></div><div class="ttdeci">std::vector&lt; WasmImport &gt; import_table</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00719">wasm-module.h:719</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a5a60fa14372f7bc06d7d6f51d23b0bee"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">v8::internal::wasm::WasmModule::num_declared_functions</a></div><div class="ttdeci">uint32_t num_declared_functions</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00684">wasm-module.h:684</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a7871ace0ad8518a7de0c52ac35e43eb2"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">v8::internal::wasm::WasmModule::origin</a></div><div class="ttdeci">const ModuleOrigin origin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00734">wasm-module.h:734</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a79b743888793de4a17ae53dd93988de6"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">v8::internal::wasm::WasmModule::functions</a></div><div class="ttdeci">std::vector&lt; WasmFunction &gt; functions</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00714">wasm-module.h:714</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a81b4b2b056e744758f875acafe4c909a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">v8::internal::wasm::WasmModule::num_imported_functions</a></div><div class="ttdeci">uint32_t num_imported_functions</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00681">wasm-module.h:681</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a89e37309b6619867746a4cf77adcaa2a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a89e37309b6619867746a4cf77adcaa2a">v8::internal::wasm::WasmModule::type</a></div><div class="ttdeci">const TypeDefinition &amp; type(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00801">wasm-module.h:801</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a95d37263699ce0b3219d51eee06a3d99"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a95d37263699ce0b3219d51eee06a3d99">v8::internal::wasm::WasmModule::compilation_hints</a></div><div class="ttdeci">std::vector&lt; WasmCompilationHint &gt; compilation_hints</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00724">wasm-module.h:724</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_abee9ee3ec87853b99da8df1432ce7f4d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#abee9ee3ec87853b99da8df1432ce7f4d">v8::internal::wasm::WasmModule::code</a></div><div class="ttdeci">WireBytesRef code</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00696">wasm-module.h:696</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_ac6101242a2a805d0e982fff4ddcc4677"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac6101242a2a805d0e982fff4ddcc4677">v8::internal::wasm::WasmModule::globals</a></div><div class="ttdeci">std::vector&lt; WasmGlobal &gt; globals</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00715">wasm-module.h:715</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_aceb39daaf893b7024baceccf7571a97d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aceb39daaf893b7024baceccf7571a97d">v8::internal::wasm::WasmModule::type_feedback</a></div><div class="ttdeci">TypeFeedbackStorage type_feedback</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00732">wasm-module.h:732</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_ad1d21f975964f38d4f11b3db56a094bf"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ad1d21f975964f38d4f11b3db56a094bf">v8::internal::wasm::WasmModule::function_was_validated</a></div><div class="ttdeci">bool function_was_validated(int func_index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00905">wasm-module.h:905</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishState</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00820">module-compiler.cc:820</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState_html_a0652285a727cdec2debbefe00a652596"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a0652285a727cdec2debbefe00a652596">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishState::publisher_running_</a></div><div class="ttdeci">bool publisher_running_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00824">module-compiler.cc:824</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState_html_a2158878e7c7333664ad74c3960abfa62"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#a2158878e7c7333664ad74c3960abfa62">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishState::publish_queue_</a></div><div class="ttdeci">std::vector&lt; UnpublishedWasmCode &gt; publish_queue_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00823">module-compiler.cc:823</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState_html_abc98036b1574bf70e9fea478f34078ed"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationStateImpl_1_1PublishState.html#abc98036b1574bf70e9fea478f34078ed">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishState::mutex_</a></div><div class="ttdeci">base::Mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00822">module-compiler.cc:822</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00282">module-compiler.cc:282</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit_html_a46bc98c912a3ba9794957ad768d23212"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a46bc98c912a3ba9794957ad768d23212">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnit::func_size</a></div><div class="ttdeci">size_t func_size</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00286">module-compiler.cc:286</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit_html_a4f03b490da824084738a353f560b9c54"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a4f03b490da824084738a353f560b9c54">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnit::unit</a></div><div class="ttdeci">WasmCompilationUnit unit</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00287">module-compiler.cc:287</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit_html_a7e3905b73fe8f46f9139f725c2c7d76f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#a7e3905b73fe8f46f9139f725c2c7d76f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnit::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const BigUnit &amp;other) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00289">module-compiler.cc:289</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit_html_ad3d6ef413ef573355d5a51bfabe3662f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit.html#ad3d6ef413ef573355d5a51bfabe3662f">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnit::BigUnit</a></div><div class="ttdeci">BigUnit(size_t func_size, WasmCompilationUnit unit)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00283">module-compiler.cc:283</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnitsQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00306">module-compiler.cc:306</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_html_a181b05512139df247ab64b6ceb7078a3"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#a181b05512139df247ab64b6ceb7078a3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnitsQueue::BigUnitsQueue</a></div><div class="ttdeci">BigUnitsQueue()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00307">module-compiler.cc:307</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_html_acb7941e826d5a0c58c9e008ed08135ae"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue.html#acb7941e826d5a0c58c9e008ed08135ae">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::BigUnitsQueue::mutex</a></div><div class="ttdeci">base::Mutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00314">module-compiler.cc:314</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00323">module-compiler.cc:323</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html_a1fb2c7a92f00c30c0155c582da3764c9"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a1fb2c7a92f00c30c0155c582da3764c9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl::next_steal_task_id</a></div><div class="ttdeci">int next_steal_task_id</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00338">module-compiler.cc:338</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html_a323ada2a6d9e85c820e5f23e8b126431"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#a323ada2a6d9e85c820e5f23e8b126431">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl::top_tier_priority_units</a></div><div class="ttdeci">std::priority_queue&lt; TopTierPriorityUnit &gt; top_tier_priority_units</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00337">module-compiler.cc:337</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html_ab98233b7ecfb319dcf1a1ad3e4a0d6c3"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ab98233b7ecfb319dcf1a1ad3e4a0d6c3">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl::QueueImpl</a></div><div class="ttdeci">QueueImpl(int next_steal_task_id)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00324">module-compiler.cc:324</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html_ac19959e945f549a116c6737e1ee42487"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac19959e945f549a116c6737e1ee42487">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl::units</a></div><div class="ttdeci">std::vector&lt; WasmCompilationUnit &gt; units[CompilationTier::kNumTiers]</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00336">module-compiler.cc:336</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl_html_ac63b6196066fab82fe13c8a94dd27374"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl.html#ac63b6196066fab82fe13c8a94dd27374">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::QueueImpl::mutex</a></div><div class="ttdeci">base::Mutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00333">module-compiler.cc:333</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::Queue</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00111">module-compiler.cc:111</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue_html_a99d638f6df8f21a79c191c8eca28972d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue.html#a99d638f6df8f21a79c191c8eca28972d">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::Queue::ShouldPublish</a></div><div class="ttdeci">bool ShouldPublish(int num_processed_units) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00556">module-compiler.cc:556</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::TopTierPriorityUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00294">module-compiler.cc:294</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit_html_a5fdbe990390dd6dea7905fb41139fe18"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a5fdbe990390dd6dea7905fb41139fe18">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::TopTierPriorityUnit::TopTierPriorityUnit</a></div><div class="ttdeci">TopTierPriorityUnit(int priority, WasmCompilationUnit unit)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00295">module-compiler.cc:295</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit_html_a978ddb2d87390e5486fc508ffa480935"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#a978ddb2d87390e5486fc508ffa480935">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::TopTierPriorityUnit::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const TopTierPriorityUnit &amp;other) const</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00301">module-compiler.cc:301</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit_html_aac1416f53db5786da3308c91206d22d7"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#aac1416f53db5786da3308c91206d22d7">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::TopTierPriorityUnit::priority</a></div><div class="ttdeci">size_t priority</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00298">module-compiler.cc:298</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit_html_ac3c067d608e384553e0a0baa1e0f9bc9"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit.html#ac3c067d608e384553e0a0baa1e0f9bc9">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationUnitQueues::TopTierPriorityUnit::unit</a></div><div class="ttdeci">WasmCompilationUnit unit</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l00299">module-compiler.cc:299</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ExecutionTierPair</a></div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01027">module-compiler.cc:1027</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair_html_a381ec7401b14b2e24435734ab150a10e"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#a381ec7401b14b2e24435734ab150a10e">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ExecutionTierPair::baseline_tier</a></div><div class="ttdeci">ExecutionTier baseline_tier</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01028">module-compiler.cc:1028</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair_html_ad1863284c6f824ffbb515eb4002d6027"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1ExecutionTierPair.html#ad1863284c6f824ffbb515eb4002d6027">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::ExecutionTierPair::top_tier</a></div><div class="ttdeci">ExecutionTier top_tier</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01029">module-compiler.cc:1029</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleCompiled_html"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleCompiled.html">v8::metrics::WasmModuleCompiled</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00134">v8-metrics.h:134</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a0c885c3b1441ebec57f9287097d22c8a"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a0c885c3b1441ebec57f9287097d22c8a">v8::metrics::WasmModuleDecoded::module_size_in_bytes</a></div><div class="ttdeci">size_t module_size_in_bytes</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00129">v8-metrics.h:129</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a1ab324a8f990e43dc13988c126633619"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a1ab324a8f990e43dc13988c126633619">v8::metrics::WasmModuleDecoded::async</a></div><div class="ttdeci">bool async</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00126">v8-metrics.h:126</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a3a12992a55d6b19a482b62b19ca4897f"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a3a12992a55d6b19a482b62b19ca4897f">v8::metrics::WasmModuleDecoded::function_count</a></div><div class="ttdeci">size_t function_count</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00130">v8-metrics.h:130</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a4cee86a201704ae118af2b1ca9ace654"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a4cee86a201704ae118af2b1ca9ace654">v8::metrics::WasmModuleDecoded::success</a></div><div class="ttdeci">bool success</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00128">v8-metrics.h:128</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a6411b52c7ce98217b836614f6c3169e9"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a6411b52c7ce98217b836614f6c3169e9">v8::metrics::WasmModuleDecoded::wall_clock_duration_in_us</a></div><div class="ttdeci">int64_t wall_clock_duration_in_us</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00131">v8-metrics.h:131</a></div></div>
<div class="ttc" id="astructv8_1_1metrics_1_1WasmModuleDecoded_html_a74b4fc4ae92e15fb9f6c73dbff7d9a16"><div class="ttname"><a href="structv8_1_1metrics_1_1WasmModuleDecoded.html#a74b4fc4ae92e15fb9f6c73dbff7d9a16">v8::metrics::WasmModuleDecoded::streamed</a></div><div class="ttdeci">bool streamed</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00127">v8-metrics.h:127</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a58927f99d797f77024561f336303380c"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a58927f99d797f77024561f336303380c">TRACE_EVENT2</a></div><div class="ttdeci">#define TRACE_EVENT2(category_group, name, arg1_name, arg1_val, arg2_name, arg2_val)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00043">trace-event-no-perfetto.h:43</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a97689377430b094caec680dd7dd230fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a></div><div class="ttdeci">#define TRACE_DISABLED_BY_DEFAULT(name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00025">trace-event-no-perfetto.h:25</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_ac437f27e15925a9bd53c69692a6c85fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a></div><div class="ttdeci">#define TRACE_EVENT1(category_group, name, arg1_name, arg1_val)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00037">trace-event-no-perfetto.h:37</a></div></div>
<div class="ttc" id="atracing_2trace-event_8h_html"><div class="ttname"><a href="tracing_2trace-event_8h.html">trace-event.h</a></div></div>
<div class="ttc" id="av8config_8h_html_a4f489f1b838163ab33f251c9e470d938"><div class="ttname"><a href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a></div><div class="ttdeci">#define V8_LIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00661">v8config.h:661</a></div></div>
<div class="ttc" id="av8config_8h_html_a63258e4bf5dc9fb8c78f881c8405d83b"><div class="ttname"><a href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a></div><div class="ttdeci">#define V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00671">v8config.h:671</a></div></div>
<div class="ttc" id="av8config_8h_html_a67bd29db07c711b0fb11ff1c324ebb60"><div class="ttname"><a href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a></div><div class="ttdeci">#define V8_UNLIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00660">v8config.h:660</a></div></div>
<div class="ttc" id="av8config_8h_html_ae5350bf5d731891583a34f9c8c52b532"><div class="ttname"><a href="v8config_8h.html#ae5350bf5d731891583a34f9c8c52b532">V8_NODISCARD</a></div><div class="ttdeci">#define V8_NODISCARD</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00693">v8config.h:693</a></div></div>
<div class="ttc" id="awasm-code-manager_8h_html"><div class="ttname"><a href="wasm-code-manager_8h.html">wasm-code-manager.h</a></div></div>
<div class="ttc" id="awasm-code-pointer-table-inl_8h_html"><div class="ttname"><a href="wasm-code-pointer-table-inl_8h.html">wasm-code-pointer-table-inl.h</a></div></div>
<div class="ttc" id="awasm-compiler_8h_html"><div class="ttname"><a href="wasm-compiler_8h.html">wasm-compiler.h</a></div></div>
<div class="ttc" id="awasm-engine_8h_html"><div class="ttname"><a href="wasm-engine_8h.html">wasm-engine.h</a></div></div>
<div class="ttc" id="awasm-feature-flags_8h_html"><div class="ttname"><a href="wasm-feature-flags_8h.html">wasm-feature-flags.h</a></div></div>
<div class="ttc" id="awasm-feature-flags_8h_html_a7cdfb27e220029d969e05e0c5dafbe5e"><div class="ttname"><a href="wasm-feature-flags_8h.html#a7cdfb27e220029d969e05e0c5dafbe5e">FOREACH_WASM_STAGING_FEATURE_FLAG</a></div><div class="ttdeci">#define FOREACH_WASM_STAGING_FEATURE_FLAG(V)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-feature-flags_8h_source.html#l00101">wasm-feature-flags.h:101</a></div></div>
<div class="ttc" id="awasm-feature-flags_8h_html_ade45dbfc8a894dfb754e489442d41c4a"><div class="ttname"><a href="wasm-feature-flags_8h.html#ade45dbfc8a894dfb754e489442d41c4a">FOREACH_WASM_SHIPPED_FEATURE_FLAG</a></div><div class="ttdeci">#define FOREACH_WASM_SHIPPED_FEATURE_FLAG(V)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-feature-flags_8h_source.html#l00115">wasm-feature-flags.h:115</a></div></div>
<div class="ttc" id="awasm-features_8h_html_af51d8ba1d0c550a316bafe40d335ff01"><div class="ttname"><a href="wasm-features_8h.html#af51d8ba1d0c550a316bafe40d335ff01">FOREACH_WASM_NON_FLAG_FEATURE</a></div><div class="ttdeci">#define FOREACH_WASM_NON_FLAG_FEATURE(V)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00021">wasm-features.h:21</a></div></div>
<div class="ttc" id="awasm-import-wrapper-cache_8h_html"><div class="ttname"><a href="wasm-import-wrapper-cache_8h.html">wasm-import-wrapper-cache.h</a></div></div>
<div class="ttc" id="awasm-js_8h_html"><div class="ttname"><a href="wasm-js_8h.html">wasm-js.h</a></div></div>
<div class="ttc" id="awasm-limits_8h_html"><div class="ttname"><a href="wasm-limits_8h.html">wasm-limits.h</a></div></div>
<div class="ttc" id="awasm-module_8h_html_a97da966b01775707b360f5ace2370c0e"><div class="ttname"><a href="wasm-module_8h.html#a97da966b01775707b360f5ace2370c0e">SELECT_WASM_COUNTER</a></div><div class="ttdeci">#define SELECT_WASM_COUNTER(counters, origin, prefix, suffix)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00295">wasm-module.h:295</a></div></div>
<div class="ttc" id="awasm-objects-inl_8h_html"><div class="ttname"><a href="wasm-objects-inl_8h.html">wasm-objects-inl.h</a></div></div>
<div class="ttc" id="awasm-result_8h_html"><div class="ttname"><a href="wasm-result_8h.html">wasm-result.h</a></div></div>
<div class="ttc" id="awasm-serialization_8h_html"><div class="ttname"><a href="wasm-serialization_8h.html">wasm-serialization.h</a></div></div>
<div class="ttc" id="azone_8h_html_a6b1fd0a126df3f1b788cee19d9cce66e"><div class="ttname"><a href="zone_8h.html#a6b1fd0a126df3f1b788cee19d9cce66e">ZONE_NAME</a></div><div class="ttdeci">#define ZONE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="zone_8h_source.html#l00022">zone.h:22</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_72f9e9028b46e75e11b89ac450e9bb8f.html">wasm</a></li><li class="navelem"><a class="el" href="module-compiler_8cc.html">module-compiler.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:01:00 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
