<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/sandbox/external-entity-table-inl.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('external-entity-table-inl_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">external-entity-table-inl.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="external-entity-table-inl_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2023 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#ifndef V8_SANDBOX_EXTERNAL_ENTITY_TABLE_INL_H_</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#define V8_SANDBOX_EXTERNAL_ENTITY_TABLE_INL_H_</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="external-entity-table_8h.html">src/sandbox/external-entity-table.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Include the non-inl header before the rest of the headers.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="atomicops_8h.html">src/base/atomicops.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="emulated-virtual-address-subspace_8h.html">src/base/emulated-virtual-address-subspace.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator_8h.html">src/base/iterator.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert-scope_8h.html">src/common/assert-scope.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="segmented-table-inl_8h.html">src/common/segmented-table-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="src_2utils_2allocation_8h.html">src/utils/allocation.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#ae55a0acac29554b726e9099af41cefae">   22</a></span>&#160;<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#ae55a0acac29554b726e9099af41cefae">ExternalEntityTable&lt;Entry, size&gt;::Space::~Space</a>() {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="comment">// The segments belonging to this space must have already been deallocated</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="comment">// (through TearDownSpace()), otherwise we may leak memory.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a3e8a19a5b431be5c99f8efc172b09d4f">segments_</a>.empty());</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a997daf314669bb642d6eb0da142bc4d1">   29</a></span>&#160;uint32_t <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a997daf314669bb642d6eb0da142bc4d1">ExternalEntityTable&lt;Entry, size&gt;::Space::freelist_length</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">auto</span> freelist = freelist_head_.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordflow">return</span> freelist.length();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a37fbde9043e39f424cf8e719ac3402a5">   35</a></span>&#160;uint32_t <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a37fbde9043e39f424cf8e719ac3402a5">ExternalEntityTable&lt;Entry, size&gt;::Space::num_segments</a>() {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  mutex_.AssertHeld();</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(segments_.size());</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a01d86d6ff395154c18cfe30246d4ca0a">   41</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a01d86d6ff395154c18cfe30246d4ca0a">ExternalEntityTable&lt;Entry, size&gt;::Space::Contains</a>(uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;mutex_);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html">Segment</a> segment = <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a71f158e454560c2623db5914e5cde027">Segment::Containing</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">return</span> segments_.find(segment) != segments_.end();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a618909b92853be6de8554ba3e3ceae6f">   48</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a618909b92853be6de8554ba3e3ceae6f">ExternalEntityTable&lt;Entry, size&gt;::Initialize</a>() {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a90da5b29133f5d1a9a90f2b63fdf631f">Base::Initialize</a>();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#af5261a9204a574c7867ca14ed6ebdc56">ExternalEntityTable::kUseContiguousMemory</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// Allocate the read-only segments of the table. These segments are always</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// located at offset 0. The first segment contains the null entry (pointing at</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// kNullAddress) at index 0. Initially we allocate these segments with</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// kNoAccess, which is converted to kRead on Extend. It may later be</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// temporarily marked read-write, see UnsealedReadOnlySegmentScope. The first</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// segment is already initialized at kRead such that the null handle can be</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// dereferenced during initialization.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  static_assert(<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a542a6f266be1b65d19f9010ccecadeec">kEndOfReadOnlyIndex</a> * <span class="keyword">sizeof</span>(Entry) ==</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classuintptr__t.html">Address</a> first_segment = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a507753f63e8c88702ca7f85a3f503c95">AllocatePages</a>(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * kNumReadOnlySegments, <a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#ac7a070f2964f69e6cbfedb71048605ad">Base::kAlignment</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <a class="code" href="namespacev8.html#afd990b3ba59f8683a014651f68dd2555a8604cf55a79d6bfdcb30f77d1622839b">PagePermissions::kRead</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (first_segment != this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>()) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="stringliteral">&quot;ExternalEntityTable::InitializeTable (r/o segments allocation)&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(first_segment - this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>(),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a5a88de0147c6ddfbecf5f4cc533e6069">kInternalReadOnlySegmentsOffset</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> constexpr (<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#aff7d1c3350d709a9da4f36bf0b47b8c0">Base::kUseSegmentPool</a>) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#ac292584e6e68dc5d39e39055cd8febb8">FillSegmentsPool</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a8ec7c96072e9d4e5c43b5422d833b867">   80</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a8ec7c96072e9d4e5c43b5422d833b867">ExternalEntityTable&lt;Entry, size&gt;::TearDown</a>() {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#af5261a9204a574c7867ca14ed6ebdc56">ExternalEntityTable::kUseContiguousMemory</a>) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// Deallocate the (read-only) first segment.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a1e0f659a566ee6d617210c91c98c2836">FreePages</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>(),</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                          <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2cfdb07012a5ae848125c147ec5596d1">Base::TearDown</a>();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a471c7cf2e9d530dffb64a63a39732563">   93</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a471c7cf2e9d530dffb64a63a39732563">ExternalEntityTable&lt;Entry, size&gt;::InitializeSpace</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;owning_table_, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;owning_table_ = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#ad18a21272eaa4ab17168842931f61324">  101</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ad18a21272eaa4ab17168842931f61324">ExternalEntityTable&lt;Entry, size&gt;::TearDownSpace</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(space-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> segment : <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a98e2c68aec897cc079ab143afc7bcf6f">FreeTableSegment</a>(segment);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_.clear();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a213b9692d0f2f7a925703c26f8d339dd">  111</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a213b9692d0f2f7a925703c26f8d339dd">ExternalEntityTable&lt;Entry, size&gt;::ZeroInternalNullEntry</a>() {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  std::conditional_t&lt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a98cf442ccc8db31ec185855b3ef6ec3d">Base::kIsWriteProtected</a>, <a class="code" href="namespacev8_1_1internal.html#ae25b6f0e106fb2dffecbfa47926f0225">CFIMetadataWriteScope</a>,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                     <a class="code" href="classv8_1_1internal_1_1NopRwxMemoryWriteScope.html">NopRwxMemoryWriteScope</a>&gt;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      write_scope(<span class="stringliteral">&quot;ZeroInternalNullEntry&quot;</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  memset(&amp;this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a5e935f40bee4aa836511d3708ddbfda0">at</a>(<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#acd3844231082b64533a6d70deaa19645">kInternalNullEntryIndex</a>), 0, <span class="keyword">sizeof</span>(Entry));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#aac4bcae11c306ce96a95b45e6efb1985">  119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#aac4bcae11c306ce96a95b45e6efb1985">ExternalEntityTable&lt;Entry, size&gt;::AttachSpaceToReadOnlySegments</a>(</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#af5261a9204a574c7867ca14ed6ebdc56">ExternalEntityTable::kUseContiguousMemory</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(space-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space());</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// For the internal read-only segment, index 0 is reserved for the `null`</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// entry. This call also ensures that the first segment is initialized.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable_1_1UnsealReadOnlySegmentScope.html">UnsealReadOnlySegmentScope</a> writable(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    uint32_t null_entry = <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac7c2d54546c11dd1c44fececcc69a58a">AllocateEntry</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(null_entry, <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#acd3844231082b64533a6d70deaa19645">kInternalNullEntryIndex</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a213b9692d0f2f7a925703c26f8d339dd">ZeroInternalNullEntry</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a443fff9eb270001d617cf9b0c3b9d640">  139</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a443fff9eb270001d617cf9b0c3b9d640">ExternalEntityTable&lt;Entry, size&gt;::DetachSpaceFromReadOnlySegments</a>(</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(space-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// Remove the RO segment from the space&#39;s segment list without freeing it.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">// The table itself manages the RO segment&#39;s lifecycle.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_.size(), <a class="code" href="namespacev8_1_1internal.html#ac3ae3605bcdba7262f327c91f0b90ae0">this</a>-&gt;read_only_segments_used_);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#aefb638882b1a695bedf09efa523cb98e">read_only_segments_used_</a> = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  space-&gt;<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a3e8a19a5b431be5c99f8efc172b09d4f">segments_</a>.clear();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#abb7ec42cba552729539549d3c84425a9">  152</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#abb7ec42cba552729539549d3c84425a9">ExternalEntityTable&lt;Entry, size&gt;::UnsealReadOnlySegments</a>() {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">bool</span> success = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a8c1c16f99b3654cd3287242d3a4a5fb5">SetPagePermissions</a>(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="namespacev8.html#afd990b3ba59f8683a014651f68dd2555af34c23f2eed93c9645e1aa681c77bec5">PagePermissions::kReadWrite</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(success);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a9a285f352389f670fa1ba9c204498170">  161</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a9a285f352389f670fa1ba9c204498170">ExternalEntityTable&lt;Entry, size&gt;::SealReadOnlySegments</a>() {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">bool</span> success = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a8c1c16f99b3654cd3287242d3a4a5fb5">SetPagePermissions</a>(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">vas_</a>-&gt;<a class="code" href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">base</a>(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <a class="code" href="namespacev8.html#afd990b3ba59f8683a014651f68dd2555a8604cf55a79d6bfdcb30f77d1622839b">PagePermissions::kRead</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(success);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac7c2d54546c11dd1c44fececcc69a58a">  170</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac7c2d54546c11dd1c44fececcc69a58a">ExternalEntityTable&lt;Entry, size&gt;::AllocateEntry</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> res = <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac33a77d7e8781516c96763c1d9b1529c">TryAllocateEntry</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>)) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> *res;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;ExternalEntityTable::AllocateEntry&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac33a77d7e8781516c96763c1d9b1529c">  178</a></span>&#160;std::optional&lt;uint32_t&gt; <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ac33a77d7e8781516c96763c1d9b1529c">ExternalEntityTable&lt;Entry, size&gt;::TryAllocateEntry</a>(</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(space-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// We currently don&#39;t want entry allocation to trigger garbage collection as</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// this may cause seemingly harmless pointer field assignments to trigger</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// garbage collection. This is especially true for lazily-initialized</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// external pointer slots which will typically only allocate the external</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// pointer table entry when the pointer is first set to a non-null value.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> freelist;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// This is essentially DCLP (see</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// https://preshing.com/20130930/double-checked-locking-is-fixed-in-cpp11/)</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// and so requires an acquire load as well as a release store in Grow() to</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// prevent reordering of memory accesses, which could for example cause one</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// thread to read a freelist entry before it has been properly initialized.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    freelist = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.load(std::memory_order_acquire);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>())) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// Freelist is empty. Need to take the lock, then attempt to allocate a</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="comment">// new segment if no other thread has done it in the meantime.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="comment">// Reload freelist head in case another thread already grew the table.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      freelist = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span> (freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>()) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// Freelist is (still) empty so extend this space by another segment.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> maybe_freelist = <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#aa5bcdef9b413d2720bda21a698c637ed">TryExtend</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>)) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          freelist = *maybe_freelist;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">// Extend() adds one segment to the space and so to its freelist.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#a699b587b7a8ed1be74d0d07c61287c71">length</a>(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ae0187857fa58732720c5b7f545de2cb1">kEntriesPerSegment</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a>(<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a21de1ed108d0ccb377d667b0e9bbe59c">TryAllocateEntryFromFreelist</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, freelist))) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  uint32_t allocated_entry = freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">next</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;Contains(allocated_entry));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space(), allocated_entry != 0);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">return</span> allocated_entry;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a23e287b8f13e54829d6cc733894c5ea1">  230</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a23e287b8f13e54829d6cc733894c5ea1">ExternalEntityTable&lt;Entry, size&gt;::AllocateEntryBelow</a>(</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, uint32_t threshold_index) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">is_initialized</a>());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> freelist;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">while</span> (!success) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    freelist = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.load(std::memory_order_acquire);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// Check that the next free entry is below the threshold.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>() || freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">next</a>() &gt;= threshold_index) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    success = <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a21de1ed108d0ccb377d667b0e9bbe59c">TryAllocateEntryFromFreelist</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, freelist);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  uint32_t allocated_entry = freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">next</a>();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;Contains(allocated_entry));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(allocated_entry, 0);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(allocated_entry, threshold_index);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">return</span> allocated_entry;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a21de1ed108d0ccb377d667b0e9bbe59c">  252</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a21de1ed108d0ccb377d667b0e9bbe59c">ExternalEntityTable&lt;Entry, size&gt;::TryAllocateEntryFromFreelist</a>(</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> freelist) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>());</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;Contains(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">next</a>()));</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  Entry&amp; freelist_entry = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a5e935f40bee4aa836511d3708ddbfda0">at</a>(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">next</a>());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  uint32_t next_freelist_entry = freelist_entry.GetNextFreelistEntryIndex();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> new_freelist(next_freelist_entry, freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#a699b587b7a8ed1be74d0d07c61287c71">length</a>() - 1);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">bool</span> success = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.compare_exchange_strong(</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      freelist, new_freelist, std::memory_order_relaxed);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// When the CAS succeeded, the entry must&#39;ve been a freelist entry.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Otherwise, this is not guaranteed as another thread may have allocated</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// and overwritten the same entry in the meantime.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (success) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#a699b587b7a8ed1be74d0d07c61287c71">length</a>() &gt; 1, !new_freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>());</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#a699b587b7a8ed1be74d0d07c61287c71">length</a>() == 1, new_freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;std::optional&lt;typename ExternalEntityTable&lt;Entry, size&gt;::FreelistHead&gt;</div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#aa5bcdef9b413d2720bda21a698c637ed">  275</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#aa5bcdef9b413d2720bda21a698c637ed">ExternalEntityTable&lt;Entry, size&gt;::TryExtend</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// Freelist should be empty when calling this method.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_length(), 0);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// The caller must lock the space&#39;s mutex before extending it.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_.AssertHeld();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space()) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// If this check fails during snapshot generation increase</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// kNumReadOnlySegments as needed.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a>(this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#aefb638882b1a695bedf09efa523cb98e">read_only_segments_used_</a>, <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(space-&gt;<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a3e8a19a5b431be5c99f8efc172b09d4f">segments_</a>.size(), <a class="code" href="namespacev8_1_1internal.html#ac3ae3605bcdba7262f327c91f0b90ae0">this</a>-&gt;read_only_segments_used_);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html">Segment</a> next_segment =</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a1a49a341bae11984fb6b88eee0eaf142">Segment::At</a>(<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a5a88de0147c6ddfbecf5f4cc533e6069">kInternalReadOnlySegmentsOffset</a> +</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a> * this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#aefb638882b1a695bedf09efa523cb98e">read_only_segments_used_</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a>(next_segment.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#ab5667a21eda1a1b1aa763f3c78575630">last_entry</a>(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a542a6f266be1b65d19f9010ccecadeec">kEndOfReadOnlyIndex</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> freelist = <a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a2698c7c4e18d6d7ae38d9b9a1496f7d3">Base::InitializeFreeList</a>(next_segment);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3a1ef72aec12d13f6a0b8d8214a52853">Extend</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, next_segment, freelist);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!freelist.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">is_empty</a>());</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    this-&gt;read_only_segments_used_++;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> freelist;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Allocate the new segment.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keyword">auto</span> extended = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a210f6da5f2320dda65c278bd2a987f38">TryAllocateAndInitializeSegment</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (!extended) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keyword">auto</span> [segment, freelist_head] = *extended;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3a1ef72aec12d13f6a0b8d8214a52853">Extend</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, segment, freelist_head);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">return</span> freelist_head;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3a1ef72aec12d13f6a0b8d8214a52853">  308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3a1ef72aec12d13f6a0b8d8214a52853">ExternalEntityTable&lt;Entry, size&gt;::Extend</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html">Segment</a> segment,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                              <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> freelist) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// Freelist should be empty when calling this method.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_length(), 0);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// The caller must lock the space&#39;s mutex before extending it.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_.AssertHeld();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_.insert(segment);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(!<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#af5261a9204a574c7867ca14ed6ebdc56">ExternalEntityTable::kUseContiguousMemory</a>,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                segment.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a1b4c8f676d9f6d2ac4c04d06f19df10e">number</a>() != 0);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space(),</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            segment.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a1b4c8f676d9f6d2ac4c04d06f19df10e">number</a>() &lt; <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;is_internal_read_only_space(),</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      segment.<a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a79663b15f68d1c4c084bf36f8e3f714c">offset</a>() == <a class="code" href="namespacev8_1_1internal.html#ac3ae3605bcdba7262f327c91f0b90ae0">this</a>-&gt;read_only_segments_used_ * <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">kSegmentSize</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// This must be a release store to prevent reordering of  of earlier stores to</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// the freelist (for example during initialization of the segment) from being</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// reordered past this store. See AllocateEntry() for more details.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.store(freelist, std::memory_order_release);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3f5114ae540635a65861cfa3cf2347dc">  331</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3f5114ae540635a65861cfa3cf2347dc">ExternalEntityTable&lt;Entry, size&gt;::GenericSweep</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3f5114ae540635a65861cfa3cf2347dc">GenericSweep</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, [](Entry&amp;) {});</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#ae68916e01050f84d6e782789d210d501">  337</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a3f5114ae540635a65861cfa3cf2347dc">ExternalEntityTable&lt;Entry, size&gt;::GenericSweep</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                        Callback callback) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// Lock the space. Technically this is not necessary since no other thread can</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// allocate entries at this point, but some of the methods we call on the</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// space assert that the lock is held.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// There must not be any entry allocations while the table is being swept as</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// that would not be safe. Set the freelist to this special marker value to</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// easily catch any violation of this requirement.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.store(<a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#aabe4150d2569536878391a6f4dfab68c">kEntryAllocationIsForbiddenMarker</a>,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                              std::memory_order_relaxed);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// Here we can iterate over the segments collection without taking a lock</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// because no other thread can currently allocate entries in this space.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  uint32_t current_freelist_head = 0;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  uint32_t current_freelist_length = 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  std::vector&lt;Segment&gt; segments_to_deallocate;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> segment : <a class="code" href="namespacev8_1_1base.html#a7364bf7dcb822d07f7380aeff8d2a77b">base::Reversed</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_)) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// Remember the state of the freelist before this segment in case this</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// segment turns out to be completely empty and we deallocate it.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    uint32_t previous_freelist_head = current_freelist_head;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    uint32_t previous_freelist_length = current_freelist_length;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Process every entry in this segment, again going top to bottom.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1SegmentedTable_1_1WriteIterator.html">WriteIterator</a> it = this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#ac4414a3741068d3003a55ddbf3bbaea0">iter_at</a>(segment.last_entry());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         it.<a class="code" href="classv8_1_1internal_1_1SegmentedTable_1_1WriteIterator.html#a5b830b5e678724ca7b0a6938085db203">index</a>() &gt;= segment.first_entry(); --it) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> (!it-&gt;IsMarked()) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        it-&gt;MakeFreelistEntry(current_freelist_head);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        current_freelist_head = it.index();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        current_freelist_length++;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        callback(*it);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        it-&gt;Unmark();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// If a segment is completely empty, free it.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    uint32_t free_entries = current_freelist_length - previous_freelist_length;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">bool</span> segment_is_empty = free_entries == <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#ae0187857fa58732720c5b7f545de2cb1">kEntriesPerSegment</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">if</span> (segment_is_empty &amp;&amp; segment.number() &gt;= <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      segments_to_deallocate.push_back(segment);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="comment">// Restore the state of the freelist before this segment.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      current_freelist_head = previous_freelist_head;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      current_freelist_length = previous_freelist_length;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// We cannot remove the segments while iterating over the segments set, so</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// defer that until now.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> segment : segments_to_deallocate) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Segment zero is reserved.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(segment.number(), <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">kNumReadOnlySegments</a>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    this-&gt;<a class="code" href="classv8_1_1internal_1_1SegmentedTable.html#a98e2c68aec897cc079ab143afc7bcf6f">FreeTableSegment</a>(segment);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_.erase(segment);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">FreelistHead</a> new_freelist(current_freelist_head, current_freelist_length);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_head_.store(new_freelist, std::memory_order_release);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;freelist_length(), current_freelist_length);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  uint32_t num_live_entries = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;capacity() - current_freelist_length;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> num_live_entries;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Entry, <span class="keywordtype">size_t</span> size&gt;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ExternalEntityTable.html#a82fb79152d605f156481dc0cc72ed747">  407</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ExternalEntityTable.html#a82fb79152d605f156481dc0cc72ed747">ExternalEntityTable&lt;Entry, size&gt;::IterateEntriesIn</a>(<a class="code" href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">Space</a>* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                                        Callback callback) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;BelongsTo(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;mutex_);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> segment : <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;segments_) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = segment.first_entry(); <a class="code" href="namespacev8_1_1internal.html">i</a> &lt;= segment.last_entry(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      callback(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_SANDBOX_EXTERNAL_ENTITY_TABLE_INL_H_</span></div>
<div class="ttc" id="aassert-scope_8h_html"><div class="ttname"><a href="assert-scope_8h.html">assert-scope.h</a></div></div>
<div class="ttc" id="aatomicops_8h_html"><div class="ttname"><a href="atomicops_8h.html">atomicops.h</a></div></div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassv8_1_1VirtualAddressSpace_html_a0d1b4fa7f1cc543711aa912dc2323712"><div class="ttname"><a href="classv8_1_1VirtualAddressSpace.html#a0d1b4fa7f1cc543711aa912dc2323712">v8::VirtualAddressSpace::base</a></div><div class="ttdeci">Address base() const</div><div class="ttdoc">The base address of the address space managed by this instance.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00818">v8-platform.h:818</a></div></div>
<div class="ttc" id="aclassv8_1_1VirtualAddressSpace_html_a1e0f659a566ee6d617210c91c98c2836"><div class="ttname"><a href="classv8_1_1VirtualAddressSpace.html#a1e0f659a566ee6d617210c91c98c2836">v8::VirtualAddressSpace::FreePages</a></div><div class="ttdeci">virtual void FreePages(Address address, size_t size)=0</div><div class="ttdoc">Frees previously allocated pages.</div></div>
<div class="ttc" id="aclassv8_1_1VirtualAddressSpace_html_a507753f63e8c88702ca7f85a3f503c95"><div class="ttname"><a href="classv8_1_1VirtualAddressSpace.html#a507753f63e8c88702ca7f85a3f503c95">v8::VirtualAddressSpace::AllocatePages</a></div><div class="ttdeci">virtual V8_WARN_UNUSED_RESULT Address AllocatePages(Address hint, size_t size, size_t alignment, PagePermissions permissions)=0</div></div>
<div class="ttc" id="aclassv8_1_1VirtualAddressSpace_html_a8c1c16f99b3654cd3287242d3a4a5fb5"><div class="ttname"><a href="classv8_1_1VirtualAddressSpace.html#a8c1c16f99b3654cd3287242d3a4a5fb5">v8::VirtualAddressSpace::SetPagePermissions</a></div><div class="ttdeci">virtual V8_WARN_UNUSED_RESULT bool SetPagePermissions(Address address, size_t size, PagePermissions permissions)=0</div><div class="ttdoc">Sets permissions of all allocated pages in the given range.</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_1_1UnsealReadOnlySegmentScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable_1_1UnsealReadOnlySegmentScope.html">v8::internal::ExternalEntityTable::UnsealReadOnlySegmentScope</a></div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00255">external-entity-table.h:255</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a15f53718e784c6032303bec6d09e334a"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a15f53718e784c6032303bec6d09e334a">v8::internal::ExternalEntityTable::kSegmentSize</a></div><div class="ttdeci">static constexpr size_t kSegmentSize</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00054">external-entity-table.h:54</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a213b9692d0f2f7a925703c26f8d339dd"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a213b9692d0f2f7a925703c26f8d339dd">v8::internal::ExternalEntityTable::ZeroInternalNullEntry</a></div><div class="ttdeci">void ZeroInternalNullEntry()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00111">external-entity-table-inl.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a2194554354720a7f2da5a63575974393"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a2194554354720a7f2da5a63575974393">v8::internal::ExternalEntityTable::kNumReadOnlySegments</a></div><div class="ttdeci">static constexpr size_t kNumReadOnlySegments</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00057">external-entity-table.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a21de1ed108d0ccb377d667b0e9bbe59c"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a21de1ed108d0ccb377d667b0e9bbe59c">v8::internal::ExternalEntityTable::TryAllocateEntryFromFreelist</a></div><div class="ttdeci">bool TryAllocateEntryFromFreelist(Space *space, FreelistHead freelist)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00252">external-entity-table-inl.h:252</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a23e287b8f13e54829d6cc733894c5ea1"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a23e287b8f13e54829d6cc733894c5ea1">v8::internal::ExternalEntityTable::AllocateEntryBelow</a></div><div class="ttdeci">uint32_t AllocateEntryBelow(Space *space, uint32_t threshold_index)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00230">external-entity-table-inl.h:230</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a3a1ef72aec12d13f6a0b8d8214a52853"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a3a1ef72aec12d13f6a0b8d8214a52853">v8::internal::ExternalEntityTable::Extend</a></div><div class="ttdeci">void Extend(Space *space, Segment segment, FreelistHead freelist)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00308">external-entity-table-inl.h:308</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a3f5114ae540635a65861cfa3cf2347dc"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a3f5114ae540635a65861cfa3cf2347dc">v8::internal::ExternalEntityTable::GenericSweep</a></div><div class="ttdeci">uint32_t GenericSweep(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00331">external-entity-table-inl.h:331</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a443fff9eb270001d617cf9b0c3b9d640"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a443fff9eb270001d617cf9b0c3b9d640">v8::internal::ExternalEntityTable::DetachSpaceFromReadOnlySegments</a></div><div class="ttdeci">void DetachSpaceFromReadOnlySegments(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00139">external-entity-table-inl.h:139</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a471c7cf2e9d530dffb64a63a39732563"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a471c7cf2e9d530dffb64a63a39732563">v8::internal::ExternalEntityTable::InitializeSpace</a></div><div class="ttdeci">void InitializeSpace(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00093">external-entity-table-inl.h:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a542a6f266be1b65d19f9010ccecadeec"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a542a6f266be1b65d19f9010ccecadeec">v8::internal::ExternalEntityTable::kEndOfReadOnlyIndex</a></div><div class="ttdeci">static constexpr uint32_t kEndOfReadOnlyIndex</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00271">external-entity-table.h:271</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a5a88de0147c6ddfbecf5f4cc533e6069"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a5a88de0147c6ddfbecf5f4cc533e6069">v8::internal::ExternalEntityTable::kInternalReadOnlySegmentsOffset</a></div><div class="ttdeci">static constexpr uint32_t kInternalReadOnlySegmentsOffset</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00269">external-entity-table.h:269</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a618909b92853be6de8554ba3e3ceae6f"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a618909b92853be6de8554ba3e3ceae6f">v8::internal::ExternalEntityTable::Initialize</a></div><div class="ttdeci">void Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00048">external-entity-table-inl.h:48</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a82fb79152d605f156481dc0cc72ed747"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a82fb79152d605f156481dc0cc72ed747">v8::internal::ExternalEntityTable::IterateEntriesIn</a></div><div class="ttdeci">void IterateEntriesIn(Space *space, Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00407">external-entity-table-inl.h:407</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a8ec7c96072e9d4e5c43b5422d833b867"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a8ec7c96072e9d4e5c43b5422d833b867">v8::internal::ExternalEntityTable::TearDown</a></div><div class="ttdeci">void TearDown()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00080">external-entity-table-inl.h:80</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_a9a285f352389f670fa1ba9c204498170"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#a9a285f352389f670fa1ba9c204498170">v8::internal::ExternalEntityTable::SealReadOnlySegments</a></div><div class="ttdeci">void SealReadOnlySegments()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00161">external-entity-table-inl.h:161</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_aa5bcdef9b413d2720bda21a698c637ed"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#aa5bcdef9b413d2720bda21a698c637ed">v8::internal::ExternalEntityTable::TryExtend</a></div><div class="ttdeci">std::optional&lt; FreelistHead &gt; TryExtend(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00275">external-entity-table-inl.h:275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_aabe4150d2569536878391a6f4dfab68c"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#aabe4150d2569536878391a6f4dfab68c">v8::internal::ExternalEntityTable::kEntryAllocationIsForbiddenMarker</a></div><div class="ttdeci">static constexpr FreelistHead kEntryAllocationIsForbiddenMarker</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00224">external-entity-table.h:224</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_aac4bcae11c306ce96a95b45e6efb1985"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#aac4bcae11c306ce96a95b45e6efb1985">v8::internal::ExternalEntityTable::AttachSpaceToReadOnlySegments</a></div><div class="ttdeci">void AttachSpaceToReadOnlySegments(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00119">external-entity-table-inl.h:119</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_abb7ec42cba552729539549d3c84425a9"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#abb7ec42cba552729539549d3c84425a9">v8::internal::ExternalEntityTable::UnsealReadOnlySegments</a></div><div class="ttdeci">void UnsealReadOnlySegments()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00152">external-entity-table-inl.h:152</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_ac33a77d7e8781516c96763c1d9b1529c"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#ac33a77d7e8781516c96763c1d9b1529c">v8::internal::ExternalEntityTable::TryAllocateEntry</a></div><div class="ttdeci">std::optional&lt; uint32_t &gt; TryAllocateEntry(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00178">external-entity-table-inl.h:178</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_ac7c2d54546c11dd1c44fececcc69a58a"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#ac7c2d54546c11dd1c44fececcc69a58a">v8::internal::ExternalEntityTable::AllocateEntry</a></div><div class="ttdeci">uint32_t AllocateEntry(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00170">external-entity-table-inl.h:170</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_acd3844231082b64533a6d70deaa19645"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#acd3844231082b64533a6d70deaa19645">v8::internal::ExternalEntityTable::kInternalNullEntryIndex</a></div><div class="ttdeci">static constexpr uint32_t kInternalNullEntryIndex</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00270">external-entity-table.h:270</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_ad18a21272eaa4ab17168842931f61324"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#ad18a21272eaa4ab17168842931f61324">v8::internal::ExternalEntityTable::TearDownSpace</a></div><div class="ttdeci">void TearDownSpace(Space *space)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00101">external-entity-table-inl.h:101</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalEntityTable_html_ae0187857fa58732720c5b7f545de2cb1"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalEntityTable.html#ae0187857fa58732720c5b7f545de2cb1">v8::internal::ExternalEntityTable::kEntriesPerSegment</a></div><div class="ttdeci">static constexpr size_t kEntriesPerSegment</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00055">external-entity-table.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NopRwxMemoryWriteScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1NopRwxMemoryWriteScope.html">v8::internal::NopRwxMemoryWriteScope</a></div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8h_source.html#l00607">code-memory-access.h:607</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_1_1WriteIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable_1_1WriteIterator.html">v8::internal::SegmentedTable::WriteIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00155">segmented-table.h:155</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_1_1WriteIterator_html_a5b830b5e678724ca7b0a6938085db203"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable_1_1WriteIterator.html#a5b830b5e678724ca7b0a6938085db203">v8::internal::SegmentedTable::WriteIterator::index</a></div><div class="ttdeci">uint32_t index() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00159">segmented-table.h:159</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a210f6da5f2320dda65c278bd2a987f38"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a210f6da5f2320dda65c278bd2a987f38">v8::internal::SegmentedTable::TryAllocateAndInitializeSegment</a></div><div class="ttdeci">std::optional&lt; std::pair&lt; Segment, FreelistHead &gt; &gt; TryAllocateAndInitializeSegment()</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00231">segmented-table-inl.h:231</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a2549c846632c44b78c582618984f1d5c"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a2549c846632c44b78c582618984f1d5c">v8::internal::SegmentedTable::vas_</a></div><div class="ttdeci">VirtualAddressSpace * vas_</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00252">segmented-table.h:252</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a2698c7c4e18d6d7ae38d9b9a1496f7d3"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a2698c7c4e18d6d7ae38d9b9a1496f7d3">v8::internal::SegmentedTable::InitializeFreeList</a></div><div class="ttdeci">FreelistHead InitializeFreeList(Segment segment, uint32_t start_offset=0)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00128">segmented-table-inl.h:128</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a2cfdb07012a5ae848125c147ec5596d1"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a2cfdb07012a5ae848125c147ec5596d1">v8::internal::SegmentedTable::TearDown</a></div><div class="ttdeci">void TearDown()</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00112">segmented-table-inl.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a5e935f40bee4aa836511d3708ddbfda0"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a5e935f40bee4aa836511d3708ddbfda0">v8::internal::SegmentedTable::at</a></div><div class="ttdeci">Entry &amp; at(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00034">segmented-table-inl.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a6799f39bfc332d89b03de3214de30d67"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a6799f39bfc332d89b03de3214de30d67">v8::internal::SegmentedTable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00050">segmented-table-inl.h:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a90da5b29133f5d1a9a90f2b63fdf631f"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a90da5b29133f5d1a9a90f2b63fdf631f">v8::internal::SegmentedTable::Initialize</a></div><div class="ttdeci">void Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00062">segmented-table-inl.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a98cf442ccc8db31ec185855b3ef6ec3d"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a98cf442ccc8db31ec185855b3ef6ec3d">v8::internal::SegmentedTable::kIsWriteProtected</a></div><div class="ttdeci">static constexpr bool kIsWriteProtected</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00036">segmented-table.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_a98e2c68aec897cc079ab143afc7bcf6f"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#a98e2c68aec897cc079ab143afc7bcf6f">v8::internal::SegmentedTable::FreeTableSegment</a></div><div class="ttdeci">void FreeTableSegment(Segment segment)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00241">segmented-table-inl.h:241</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_ac292584e6e68dc5d39e39055cd8febb8"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#ac292584e6e68dc5d39e39055cd8febb8">v8::internal::SegmentedTable::FillSegmentsPool</a></div><div class="ttdeci">std::optional&lt; Segment &gt; FillSegmentsPool(bool return_a_segment)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00198">segmented-table-inl.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_ac4414a3741068d3003a55ddbf3bbaea0"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#ac4414a3741068d3003a55ddbf3bbaea0">v8::internal::SegmentedTable::iter_at</a></div><div class="ttdeci">WriteIterator iter_at(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00045">segmented-table-inl.h:45</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_ac7a070f2964f69e6cbfedb71048605ad"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#ac7a070f2964f69e6cbfedb71048605ad">v8::internal::SegmentedTable::kAlignment</a></div><div class="ttdeci">static constexpr size_t kAlignment</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00075">segmented-table.h:75</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_aefb638882b1a695bedf09efa523cb98e"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#aefb638882b1a695bedf09efa523cb98e">v8::internal::SegmentedTable::read_only_segments_used_</a></div><div class="ttdeci">uint32_t read_only_segments_used_</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00261">segmented-table.h:261</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_af5261a9204a574c7867ca14ed6ebdc56"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#af5261a9204a574c7867ca14ed6ebdc56">v8::internal::SegmentedTable::kUseContiguousMemory</a></div><div class="ttdeci">static constexpr bool kUseContiguousMemory</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00056">segmented-table.h:56</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SegmentedTable_html_aff7d1c3350d709a9da4f36bf0b47b8c0"><div class="ttname"><a href="classv8_1_1internal_1_1SegmentedTable.html#aff7d1c3350d709a9da4f36bf0b47b8c0">v8::internal::SegmentedTable::kUseSegmentPool</a></div><div class="ttdeci">static constexpr bool kUseSegmentPool</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00057">segmented-table.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a977b087d4ee58955efe72b33136a4e94"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(Isolate *isolate, const char *location, const OOMDetails &amp;details=kNoOOMDetails)</div></div>
<div class="ttc" id="aemulated-virtual-address-subspace_8h_html"><div class="ttname"><a href="emulated-virtual-address-subspace_8h.html">emulated-virtual-address-subspace.h</a></div></div>
<div class="ttc" id="aexternal-entity-table_8h_html"><div class="ttname"><a href="external-entity-table_8h.html">external-entity-table.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a087fd0337c14e102a4a2abccd41a39ad"><div class="ttname"><a href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available space</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l02215">flag-definitions.h:2213</a></div></div>
<div class="ttc" id="aiterator_8h_html"><div class="ttname"><a href="iterator_8h.html">iterator.h</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40b71b3558e4b5297d51003612578a81"><div class="ttname"><a href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">v8::base::MutexGuard</a></div><div class="ttdeci">LockGuard&lt; Mutex &gt; MutexGuard</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00219">mutex.h:219</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a7364bf7dcb822d07f7380aeff8d2a77b"><div class="ttname"><a href="namespacev8_1_1base.html#a7364bf7dcb822d07f7380aeff8d2a77b">v8::base::Reversed</a></div><div class="ttdeci">auto Reversed(T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="iterator_8h_source.html#l00102">iterator.h:102</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_a63d8eefb47468aa3f816fbe26a59466a"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">v8::internal::anonymous_namespace{json-stringifier.cc}::no_gc</a></div><div class="ttdeci">size_t const DisallowGarbageCollection &amp; no_gc</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00544">json-stringifier.cc:544</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="heap-snapshot-generator_8cc_source.html#l01698">heap-snapshot-generator.cc:1698</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00453">wasm-objects-inl.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac3ae3605bcdba7262f327c91f0b90ae0"><div class="ttname"><a href="namespacev8_1_1internal.html#ac3ae3605bcdba7262f327c91f0b90ae0">v8::internal::this</a></div><div class="ttdeci">!IsContextMap this</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00891">map-inl.h:891</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae25b6f0e106fb2dffecbfa47926f0225"><div class="ttname"><a href="namespacev8_1_1internal.html#ae25b6f0e106fb2dffecbfa47926f0225">v8::internal::CFIMetadataWriteScope</a></div><div class="ttdeci">RwxMemoryWriteScope CFIMetadataWriteScope</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8h_source.html#l00635">code-memory-access.h:635</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="anamespacev8_html_afd990b3ba59f8683a014651f68dd2555a8604cf55a79d6bfdcb30f77d1622839b"><div class="ttname"><a href="namespacev8.html#afd990b3ba59f8683a014651f68dd2555a8604cf55a79d6bfdcb30f77d1622839b">v8::PagePermissions::kRead</a></div><div class="ttdeci">@ kRead</div></div>
<div class="ttc" id="anamespacev8_html_afd990b3ba59f8683a014651f68dd2555af34c23f2eed93c9645e1aa681c77bec5"><div class="ttname"><a href="namespacev8.html#afd990b3ba59f8683a014651f68dd2555af34c23f2eed93c9645e1aa681c77bec5">v8::PagePermissions::kReadWrite</a></div><div class="ttdeci">@ kReadWrite</div></div>
<div class="ttc" id="asegmented-table-inl_8h_html"><div class="ttname"><a href="segmented-table-inl_8h.html">segmented-table-inl.h</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a45a0717f39b7011dc823c1fe7b83e6fc"><div class="ttname"><a href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a></div><div class="ttdeci">#define CHECK_LT(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
<div class="ttc" id="asrc_2utils_2allocation_8h_html"><div class="ttname"><a href="src_2utils_2allocation_8h.html">allocation.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html">v8::internal::ExternalEntityTable::Space</a></div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00073">external-entity-table.h:73</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html_a01d86d6ff395154c18cfe30246d4ca0a"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a01d86d6ff395154c18cfe30246d4ca0a">v8::internal::ExternalEntityTable::Space::Contains</a></div><div class="ttdeci">bool Contains(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00041">external-entity-table-inl.h:41</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html_a37fbde9043e39f424cf8e719ac3402a5"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a37fbde9043e39f424cf8e719ac3402a5">v8::internal::ExternalEntityTable::Space::num_segments</a></div><div class="ttdeci">uint32_t num_segments()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00035">external-entity-table-inl.h:35</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html_a3e8a19a5b431be5c99f8efc172b09d4f"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a3e8a19a5b431be5c99f8efc172b09d4f">v8::internal::ExternalEntityTable::Space::segments_</a></div><div class="ttdeci">std::set&lt; Segment &gt; segments_</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table_8h_source.html#l00137">external-entity-table.h:137</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html_a997daf314669bb642d6eb0da142bc4d1"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#a997daf314669bb642d6eb0da142bc4d1">v8::internal::ExternalEntityTable::Space::freelist_length</a></div><div class="ttdeci">uint32_t freelist_length() const</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00029">external-entity-table-inl.h:29</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1ExternalEntityTable_1_1Space_html_ae55a0acac29554b726e9099af41cefae"><div class="ttname"><a href="structv8_1_1internal_1_1ExternalEntityTable_1_1Space.html#ae55a0acac29554b726e9099af41cefae">v8::internal::ExternalEntityTable::Space::~Space</a></div><div class="ttdeci">~Space()</div><div class="ttdef"><b>Definition:</b> <a href="external-entity-table-inl_8h_source.html#l00022">external-entity-table-inl.h:22</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1FreelistHead_html"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html">v8::internal::SegmentedTable::FreelistHead</a></div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00126">segmented-table.h:126</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1FreelistHead_html_a699b587b7a8ed1be74d0d07c61287c71"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#a699b587b7a8ed1be74d0d07c61287c71">v8::internal::SegmentedTable::FreelistHead::length</a></div><div class="ttdeci">uint32_t length() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00136">segmented-table.h:136</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1FreelistHead_html_aba7ce754ea1262bbee9273ab40aab862"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#aba7ce754ea1262bbee9273ab40aab862">v8::internal::SegmentedTable::FreelistHead::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00138">segmented-table.h:138</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1FreelistHead_html_ae683b9fa2a066b70ed705ec6b16647e6"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1FreelistHead.html#ae683b9fa2a066b70ed705ec6b16647e6">v8::internal::SegmentedTable::FreelistHead::next</a></div><div class="ttdeci">uint32_t next() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00133">segmented-table.h:133</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html">v8::internal::SegmentedTable::Segment</a></div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00083">segmented-table.h:83</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html_a1a49a341bae11984fb6b88eee0eaf142"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a1a49a341bae11984fb6b88eee0eaf142">v8::internal::SegmentedTable::Segment::At</a></div><div class="ttdeci">static Segment At(uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00020">segmented-table-inl.h:20</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html_a1b4c8f676d9f6d2ac4c04d06f19df10e"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a1b4c8f676d9f6d2ac4c04d06f19df10e">v8::internal::SegmentedTable::Segment::number</a></div><div class="ttdeci">uint32_t number() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00097">segmented-table.h:97</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html_a71f158e454560c2623db5914e5cde027"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a71f158e454560c2623db5914e5cde027">v8::internal::SegmentedTable::Segment::Containing</a></div><div class="ttdeci">static Segment Containing(uint32_t entry_index)</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table-inl_8h_source.html#l00028">segmented-table-inl.h:28</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html_a79663b15f68d1c4c084bf36f8e3f714c"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#a79663b15f68d1c4c084bf36f8e3f714c">v8::internal::SegmentedTable::Segment::offset</a></div><div class="ttdeci">uint32_t offset() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00100">segmented-table.h:100</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1SegmentedTable_1_1Segment_html_ab5667a21eda1a1b1aa763f3c78575630"><div class="ttname"><a href="structv8_1_1internal_1_1SegmentedTable_1_1Segment.html#ab5667a21eda1a1b1aa763f3c78575630">v8::internal::SegmentedTable::Segment::last_entry</a></div><div class="ttdeci">uint32_t last_entry() const</div><div class="ttdef"><b>Definition:</b> <a href="segmented-table_8h_source.html#l00106">segmented-table.h:106</a></div></div>
<div class="ttc" id="av8config_8h_html_a4f489f1b838163ab33f251c9e470d938"><div class="ttname"><a href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a></div><div class="ttdeci">#define V8_LIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00661">v8config.h:661</a></div></div>
<div class="ttc" id="av8config_8h_html_a67bd29db07c711b0fb11ff1c324ebb60"><div class="ttname"><a href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a></div><div class="ttdeci">#define V8_UNLIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00660">v8config.h:660</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_d9ad92fcb1c9e950b685c3ac072f4391.html">sandbox</a></li><li class="navelem"><a class="el" href="external-entity-table-inl_8h.html">external-entity-table-inl.h</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:00:23 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
