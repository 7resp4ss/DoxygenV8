<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/heap/free-list.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('free-list_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">free-list.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="free-list_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2020 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#ifndef V8_HEAP_FREE_LIST_H_</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#define V8_HEAP_FREE_LIST_H_</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="src_2base_2macros_8h.html">src/base/macros.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_2globals_8h.html">src/common/globals.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="allocation-result_8h.html">src/heap/allocation-result.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutable-page-metadata_8h.html">src/heap/mutable-page-metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="free-space_8h.html">src/objects/free-space.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">src/objects/map.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utils_2utils_8h.html">src/utils/utils.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;testing/gtest/include/gtest/gtest_prod.h&quot;</span>  <span class="comment">// nogncheck</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceheap.html">heap</a> {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">class </span>HeapTester;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">class </span>TestCodePageAllocatorScope;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}  <span class="comment">// namespace heap</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">class </span>AllocationObserver;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">class </span>FreeList;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">class </span>Isolate;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">class </span>LargeObjectSpace;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">class </span>LargePageMetadata;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">class </span>LinearAllocationArea;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">class </span>PageMetadata;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">class </span>PagedSpace;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">class </span>SemiSpace;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">   37</a></span>&#160;<span class="keyword">using</span> <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> = <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">   39</a></span>&#160;<span class="keyword">static</span> constexpr <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">kFirstCategory</a> = 0;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#adaaee8620068888ef2b3c120d05d8cd3">   40</a></span>&#160;<span class="keyword">static</span> constexpr <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal.html#adaaee8620068888ef2b3c120d05d8cd3">kInvalidCategory</a> = -1;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">   42</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">FreeMode</a> { <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829ca53409264f9ed262cc16b5b513fea3a6e">kLinkCategory</a>, <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829caba2ca651c63fb8feea63d688e34fceb4">kDoNotLinkCategory</a> };</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// A free list category maintains a linked list of free memory blocks.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html">   45</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a5f433934357036f7199d55a8410987da">   47</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a5f433934357036f7199d55a8410987da">Initialize</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a66a793a27ebffc0e7c7b1e8ca91449d6">type_</a> = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a53df23d0072ff98d06c5c51ed3f1809f">available_</a> = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">prev_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">next_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Unlinks the category from the freelist.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#af7811fc9ff899adb081e7646287da6d2">Unlink</a>(<a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* owner);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// Resets all the fields of the category.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a62ee6b2ce9366cd29bc53531430a3f65">Reset</a>(<a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* owner);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a5c4612d807dcf03546d802ad081beb2a">RepairFreeList</a>(<a class="code" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// Relinks the category into the currently owning free list. Requires that the</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// category is currently unlinked.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a00aeff21fa36a2a47cc19d386e1a0568">Relink</a>(<a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* owner);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a76415989e4364f9963276666ae7aca9c">Free</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1WritableFreeSpace.html">WritableFreeSpace</a>&amp; writable_free_space, <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">FreeMode</a> <a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* owner);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// Performs a single try to pick a node of at least |minimum_size| from the</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// category. Stores the actual size in |node_size|. Returns nullptr if no</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// node is found.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ada21e8428aa07c2bf16af74dd26a7058">PickNodeFromList</a>(<span class="keywordtype">size_t</span> minimum_size,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                                       <span class="keywordtype">size_t</span>* node_size);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Picks a node of at least |minimum_size| from the category. Stores the</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// actual size in |node_size|. Returns nullptr if no node is found.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ac7c8e8bb20da687de2b5954b09fa9b05">SearchForNodeInList</a>(<span class="keywordtype">size_t</span> minimum_size, <span class="keywordtype">size_t</span>* node_size);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a4861415136f38069c04f4350a40f9d73">is_linked</a>(<a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* owner) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a7216c7b46bede002b7c76bfaff070565">   79</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a7216c7b46bede002b7c76bfaff070565">is_empty</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">top</a>().is_null(); }</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a10fc05fb3a597ed95cbff7275ce46e59">   80</a></span>&#160;  uint32_t <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a10fc05fb3a597ed95cbff7275ce46e59">available</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a53df23d0072ff98d06c5c51ed3f1809f">available_</a>; }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a4d6cd7015e925fcf3f7d1cfcafe8be82">SumFreeList</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a37596c9c3ceee90a7aa75e1b6c32205a">FreeListLength</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#afc9e0048b0a0f04f6cf94aa28cb9a091">   86</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#afc9e0048b0a0f04f6cf94aa28cb9a091">IterateNodesForTesting</a>(Callback callback) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> cur_node = <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">top</a>(); !cur_node.is_null();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;         cur_node = cur_node-&gt;next()) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      callback(cur_node);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// For debug builds we accurately compute free lists lengths up until</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// {kVeryLongFreeList} by manually walking the list.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a5d5b15c39655b27d302d0b6ffecf51ae">   96</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a5d5b15c39655b27d302d0b6ffecf51ae">kVeryLongFreeList</a> = 500;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// Updates |available_|, |length_| and free_list_-&gt;Available() after an</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// allocation of size |allocation_size|.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad40ea10881827eac91c85445f16c2f26">UpdateCountersAfterAllocation</a>(<span class="keywordtype">size_t</span> allocation_size);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">  102</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">top</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#affd6fcd4102bbb8f32cab3c4e5cd927e">top_</a>; }</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#af282ba9f21b6238225c4b00694d8b2be">  103</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#af282ba9f21b6238225c4b00694d8b2be">set_top</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">top</a>) { <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#affd6fcd4102bbb8f32cab3c4e5cd927e">top_</a> = <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">top</a>; }</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a6353b127ae6e0f9b8b7597293cb662dc">  104</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a6353b127ae6e0f9b8b7597293cb662dc">prev</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">prev_</a>; }</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#ad9da9426887fedeeab403737dca34932">  105</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#ad9da9426887fedeeab403737dca34932">set_prev</a>(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a6353b127ae6e0f9b8b7597293cb662dc">prev</a>) { <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">prev_</a> = <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a6353b127ae6e0f9b8b7597293cb662dc">prev</a>; }</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">  106</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">next</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">next_</a>; }</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#af5fc1fe207986ba1133ad0d3f457a062">  107</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#af5fc1fe207986ba1133ad0d3f457a062">set_next</a>(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">next</a>) { <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">next_</a> = <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">next</a>; }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// |type_|: The type of this free list category.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a66a793a27ebffc0e7c7b1e8ca91449d6">  110</a></span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a66a793a27ebffc0e7c7b1e8ca91449d6">type_</a> = <a class="code" href="namespacev8_1_1internal.html#adaaee8620068888ef2b3c120d05d8cd3">kInvalidCategory</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// |available_|: Total available bytes in all blocks of this free list</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// category.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a53df23d0072ff98d06c5c51ed3f1809f">  114</a></span>&#160;  uint32_t <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a53df23d0072ff98d06c5c51ed3f1809f">available_</a> = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// |top_|: Points to the top FreeSpace in the free list category.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#affd6fcd4102bbb8f32cab3c4e5cd927e">  117</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#affd6fcd4102bbb8f32cab3c4e5cd927e">top_</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">  119</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">prev_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">  120</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">next_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#aef93a5461456ab609efd34caf72f8764">  122</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a3fca1e6a0fe8445e1b435a7f5018c7ad">  123</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html">FreeListManyCached</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a57d18a423c610563132a99ab1e1c1b8e">  124</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListCategory.html#a473699f6975093660ea70ce91f083298">  125</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#a473699f6975093660ea70ce91f083298">MapSpace</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;};</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// A free list maintains free blocks of memory. The free list is organized in</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// a way to encourage objects allocated around the same time to be near each</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// other. The normal way to allocate is intended to be by bumping a &#39;top&#39;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// pointer until it hits a &#39;limit&#39; pointer.  When the limit is hit we need to</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// find a new space to allocate from. This is done with the free list, which is</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// divided up into rough categories to cut down on waste. Having finer</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// categories would scatter allocation more.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html">  135</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a> {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// Creates a Freelist of the default class.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keyword">static</span> std::unique_ptr&lt;FreeList&gt; <a class="code" href="classv8_1_1internal_1_1FreeList.html#a3493244ef61ab0a37c8c7c43c5f21c0c">CreateFreeList</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// Creates a Freelist for new space.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keyword">static</span> std::unique_ptr&lt;FreeList&gt;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeList.html#a9f37f7601004b9fdb436a0a92bb2b716">CreateFreeListForNewSpace</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeList.html#a3bbe47a0c0527a6b642b828f4ce8b6fb">FreeList</a>(<span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aae1948bb0d72d2a9cda2fbaac3720499">number_of_categories</a>, <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#ac932560dcf31ce70c131ce0931fe6ea7">min_block_size</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a6f45e2c56db7c629e14441dc4446e3e9">  144</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6f45e2c56db7c629e14441dc4446e3e9">~FreeList</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Adds a node on the free list. The block of size {size_in_bytes} starting</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// at {start} is placed on the free list. The return value is the number of</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// bytes that were not added to the free list, because the freed memory block</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// was too small. Bookkeeping information will be written to the block, i.e.,</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// its contents will be destroyed. The start address should be word aligned,</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// and the size should be a non-zero multiple of the word size.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aa150098e457ff2c1b99168e7c6206e1a">Free</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1WritableFreeSpace.html">WritableFreeSpace</a>&amp; free_space, <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">FreeMode</a> <a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Allocates a free space node from the free list of at least size_in_bytes</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// bytes. Returns the actual node size in node_size which can be bigger than</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// size_in_bytes. This method returns null if the allocation request cannot be</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// handled by the free list.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a661a36be58203eda04f2b02b01746c42">  158</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a661a36be58203eda04f2b02b01746c42">Allocate</a>(</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes, <span class="keywordtype">size_t</span>* node_size, <a class="code" href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">AllocationOrigin</a> origin) = 0;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// Returns a page containing an entry for a given type, or nullptr otherwise.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a13f519089f16c9fd26add74810903237">  162</a></span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code" href="classv8_1_1internal_1_1FreeList.html#a13f519089f16c9fd26add74810903237">GetPageForSize</a>(</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes) = 0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#ab4abea8fbd917cb43b9b440ef1010342">Reset</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a259a3dce6de80bce29ff9a5aa0438e84">ResetForNonBlackAllocatedPages</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Return the number of bytes available on the free list.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#abf51753a0ae52b9c3b3143fe2d6e2dc6">  169</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#abf51753a0ae52b9c3b3143fe2d6e2dc6">Available</a>() {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeList.html#a759dc276e64a73ba23f3377dda99667e">VerifyAvailable</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">available_</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// Update number of available  bytes on the Freelists.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a6279a4ca390d2092e1a505872fe91fd2">  175</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6279a4ca390d2092e1a505872fe91fd2">IncreaseAvailableBytes</a>(<span class="keywordtype">size_t</span> bytes) { <a class="code" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">available_</a> += bytes; }</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#aaa0347de311efbb00cc0f6151da34d46">  176</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aaa0347de311efbb00cc0f6151da34d46">DecreaseAvailableBytes</a>(<span class="keywordtype">size_t</span> bytes) { <a class="code" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">available_</a> -= bytes; }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a02fee5a0d7f148283749d37e17386c48">  178</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a02fee5a0d7f148283749d37e17386c48">wasted_bytes</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">wasted_bytes_</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a403da0f5477a38f0d1f4541180965a0f">  181</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a403da0f5477a38f0d1f4541180965a0f">increase_wasted_bytes</a>(<span class="keywordtype">size_t</span> bytes) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">wasted_bytes_</a>.fetch_add(bytes, std::memory_order_relaxed);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#ab3d5e267a023ee05cfdcfcc3d0973edc">  184</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#ab3d5e267a023ee05cfdcfcc3d0973edc">decrease_wasted_bytes</a>(<span class="keywordtype">size_t</span> bytes) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">wasted_bytes_</a>.fetch_sub(bytes, std::memory_order_relaxed);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a7c78f22b1971e2943be876918d163dd0">IsEmpty</a>();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// Used after booting the VM.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aeeb8bd0cb83326e7985985b468597d14">RepairLists</a>(<a class="code" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a5a58fc6be55c434e8e28e32f478a76e0">EvictFreeListItems</a>(<a class="code" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* page);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#aae1948bb0d72d2a9cda2fbaac3720499">  195</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aae1948bb0d72d2a9cda2fbaac3720499">number_of_categories</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a3eccafb7155354520aef3fbf7ccbccd8">number_of_categories_</a>; }</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#aa0ecab6f30220582f2caa7387651441a">  196</a></span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aa0ecab6f30220582f2caa7387651441a">last_category</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#abb5a579515e5c76b3f564bfb7c728f29">last_category_</a>; }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#ac932560dcf31ce70c131ce0931fe6ea7">  198</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#ac932560dcf31ce70c131ce0931fe6ea7">min_block_size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a545456af996f8aadf780c67f43305d0e">min_block_size_</a>; }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a874575254a8775cea516360ac77fa79f">  201</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a874575254a8775cea516360ac77fa79f">ForAllFreeListCategories</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, Callback callback) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* current = <a class="code" href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">categories_</a>[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">while</span> (current != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* next = current-&gt;<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">next</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      callback(current);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      current = next;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a3f8c32e83ac1e62650e96615d3a85e49">  211</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a3f8c32e83ac1e62650e96615d3a85e49">ForAllFreeListCategories</a>(Callback callback) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">kFirstCategory</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="classv8_1_1internal_1_1FreeList.html#aae1948bb0d72d2a9cda2fbaac3720499">number_of_categories</a>(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FreeList.html#a874575254a8775cea516360ac77fa79f">ForAllFreeListCategories</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html">i</a>), callback);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a5e449f34c8035d4f353c10cb8bfc6272">AddCategory</a>(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* category);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#ae9eb2b754f476bc5b138d7b5e9407550">RemoveCategory</a>(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* category);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#af3cbe43b30d422110caba0e7f86bf673">PrintCategories</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html">  222</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html">FreeListCategoryIterator</a> final {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af6f54d67384a9d10fcbb7311b3691d76">  224</a></span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af6f54d67384a9d10fcbb7311b3691d76">FreeListCategoryIterator</a>(<a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a>* free_list, <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        : <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a>(free_list-&gt;<a class="code" href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">categories_</a>[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>]) {}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af37f714fd744b254770c99e195eb4f31">  227</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af37f714fd744b254770c99e195eb4f31">HasNext</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a> != <span class="keyword">nullptr</span>; }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#a43d7825d0a0479b8cfdd2fe9c6d47874">  229</a></span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#a43d7825d0a0479b8cfdd2fe9c6d47874">Next</a>() {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af37f714fd744b254770c99e195eb4f31">HasNext</a>());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* tmp = <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a> = <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">next</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">  237</a></span>&#160;    <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">current_</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  };</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keywordtype">size_t</span> SumFreeLists();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <span class="keywordtype">bool</span> IsVeryLong();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a759dc276e64a73ba23f3377dda99667e">  245</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a759dc276e64a73ba23f3377dda99667e">VerifyAvailable</a>() {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsVeryLong() || <a class="code" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">available_</a> == SumFreeLists());</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Tries to retrieve a node from the first category in a given |type|.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// Returns nullptr if the category is empty or the top entry is smaller</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// than minimum_size.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#afcf7f72515a76f1313d11c172a89d164">TryFindNodeIn</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                  <span class="keywordtype">size_t</span> minimum_size, <span class="keywordtype">size_t</span>* node_size);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Searches a given |type| for a node of at least |minimum_size|.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a509ffac428a7df2429290ff156d8985c">SearchForNodeInList</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                        <span class="keywordtype">size_t</span> minimum_size, <span class="keywordtype">size_t</span>* node_size);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// Returns the smallest category in which an object of |size_in_bytes| could</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// fit.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a218dbf4a6fc40a71e0e40323f4ecc9a5">  261</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a218dbf4a6fc40a71e0e40323f4ecc9a5">SelectFreeListCategoryType</a>(</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes) = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#ad1e54f8e566e1d8124e57a9e811e6c6d">  264</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* <a class="code" href="classv8_1_1internal_1_1FreeList.html#ad1e54f8e566e1d8124e57a9e811e6c6d">top</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">categories_</a>[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keyword">inline</span> <a class="code" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code" href="classv8_1_1internal_1_1FreeList.html#a81d720396af370e4504f6bd85f44c65d">GetPageForCategoryType</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a3eccafb7155354520aef3fbf7ccbccd8">  270</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a3eccafb7155354520aef3fbf7ccbccd8">number_of_categories_</a> = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#abb5a579515e5c76b3f564bfb7c728f29">  271</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeList.html#abb5a579515e5c76b3f564bfb7c728f29">last_category_</a> = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a545456af996f8aadf780c67f43305d0e">  272</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#a545456af996f8aadf780c67f43305d0e">min_block_size_</a> = 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">  274</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>** <a class="code" href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">categories_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// The number of bytes in this freelist that are available for allocation.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">  277</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">available_</a> = 0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// Number of wasted bytes in this free list that are not available for</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// allocation.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">  280</a></span>&#160;  std::atomic&lt;size_t&gt; <a class="code" href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">wasted_bytes_</a> = 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#ac7b8d83f9833f7883a102608d8720210">  282</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#ab6e455fca7c63870414e3ad07cab39ca">  283</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#af8a443316247b93441e448442892337e">  284</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a9367c799388c5da0edc808ed1181d433">  285</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1ReadOnlyPageMetadata.html">ReadOnlyPageMetadata</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeList.html#a473699f6975093660ea70ce91f083298">  286</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeList.html#a473699f6975093660ea70ce91f083298">MapSpace</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;};</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// Use 24 Freelists: on per 16 bytes between 24 and 256, and then a few ones for</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">// larger sizes. See the variable |categories_min| for the size of each</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// Freelist.  Allocation is done using a best-fit strategy (considering only the</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// first element of each category though).</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">// Performances are expected to be worst than FreeListLegacy, but memory</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// consumption should be lower (since fragmentation should be lower).</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html">  295</a></span>&#160;<span class="keyword">class </span><a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <a class="code" href="classv8_1_1internal_1_1FreeListMany.html">FreeListMany</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeList.html">FreeList</a> {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* GetPageForSize(<span class="keywordtype">size_t</span> size_in_bytes) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListMany.html">FreeListMany</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  ~<a class="code" href="classv8_1_1internal_1_1FreeListMany.html">FreeListMany</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03.html#a85c792759a8f677e481c149d6d9bb5f2">Allocate</a>(</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes, <span class="keywordtype">size_t</span>* node_size,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">AllocationOrigin</a> origin) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a8326e5d8d483dcc68fb919a9aa826caf">  307</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> kMinBlockSize = 3 * <a class="code" href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">kTaggedSize</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// This is a conservative upper bound. The actual maximum block size takes</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// padding and alignment of data and code pages into account.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a8c2d2aefe3d682dd84ace2b3e7b486bd">  311</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> kMaxBlockSize = <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">MutablePageMetadata::kPageSize</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Largest size for which categories are still precise, and for which we can</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// therefore compute the category in constant time.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a1027209f87cdbb8b492202e0d7cd2ec6">  314</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> kPreciseCategoryMaxSize = 256;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// Categories boundaries generated with:</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// perl -E &#39;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">//      @cat = (24, map {$_*16} 2..16, 48, 64);</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">//      while ($cat[-1] &lt;= 32768) {</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">//        push @cat, $cat[-1]*2</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">//      }</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">//      say join &quot;, &quot;, @cat;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">//      say &quot;\n&quot;, scalar @cat&#39;</span></div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#af9db2cf094e6f0380b1e18941eaaffaf">  324</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> kNumberOfCategories = 24;</div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a23a741fd6b0a57f5e0e1471acb9aeafd">  325</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> categories_min[kNumberOfCategories] = {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      24,  32,  48,  64,  80,  96,   112,  128,  144,  160,   176,   192,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      208, 224, 240, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536};</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// Return the smallest category that could hold |size_in_bytes| bytes.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a1465b7f832afc7748e5e939f1d76efbd">  330</a></span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeListMany.html#a1465b7f832afc7748e5e939f1d76efbd">SelectFreeListCategoryType</a>(</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (size_in_bytes &lt;= kPreciseCategoryMaxSize) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (size_in_bytes &lt; categories_min[1]) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a><span class="keyword">&gt;</span>(size_in_bytes &gt;&gt; 4) - 1;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cat = (kPreciseCategoryMaxSize &gt;&gt; 4) - 1; cat &lt; last_category_;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         cat++) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (size_in_bytes &lt; categories_min[cat + 1]) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> cat;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> last_category_;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a8478c3b01db5a6a4b4dd57e9794bc63d">  345</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListMany.html#a8478c3b01db5a6a4b4dd57e9794bc63d">FRIEND_TEST</a>(SpacesTest, FreeListManySelectFreeListCategoryType);</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListMany.html#a863b8577ed6ab575b90661ab264791f8">  346</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListMany.html#a863b8577ed6ab575b90661ab264791f8">FRIEND_TEST</a>(SpacesTest, FreeListManyGuaranteedAllocatable);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;};</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// Same as FreeListMany but uses a cache to know which categories are empty.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">// The cache (|next_nonempty_category|) is maintained in a way such that for</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">// each category c, next_nonempty_category[c] contains the first non-empty</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// category greater or equal to c, that may hold an object of size c.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// Allocation is done using the same strategy as FreeListMany (ie, best fit).</span></div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCached.html">  354</a></span>&#160;<span class="keyword">class </span><a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html">FreeListManyCached</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeListMany.html">FreeListMany</a> {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html">FreeListManyCached</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03.html#a85c792759a8f677e481c149d6d9bb5f2">Allocate</a>(</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes, <span class="keywordtype">size_t</span>* node_size,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">AllocationOrigin</a> origin) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1base.html#af0b04fe9288a783d9de7a19dcfc55fa3">Free</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1WritableFreeSpace.html">WritableFreeSpace</a>&amp; free_space, <a class="code" href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">FreeMode</a> <a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordtype">void</span> Reset() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">void</span> ResetForNonBlackAllocatedPages() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordtype">bool</span> AddCategory(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* category) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">void</span> RemoveCategory(<a class="code" href="classv8_1_1internal_1_1FreeListCategory.html">FreeListCategory</a>* category) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// Updates the cache after adding something in the category |cat|.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCached.html#a875a7f47e2afb80c768995f9b2b6abb4">  372</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html#a875a7f47e2afb80c768995f9b2b6abb4">UpdateCacheAfterAddition</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> cat) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = cat; <a class="code" href="namespacev8_1_1internal.html">i</a> &gt;= <a class="code" href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">kFirstCategory</a> &amp;&amp; next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] &gt; cat;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         <a class="code" href="namespacev8_1_1internal.html">i</a>--) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] = cat;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Updates the cache after emptying category |cat|.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCached.html#ac05f2f5d1fa9cb6bcf0a4ef38f2f2e2d">  380</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html#ac05f2f5d1fa9cb6bcf0a4ef38f2f2e2d">UpdateCacheAfterRemoval</a>(<a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> cat) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = cat; <a class="code" href="namespacev8_1_1internal.html">i</a> &gt;= <a class="code" href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">kFirstCategory</a> &amp;&amp; next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] == cat;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         <a class="code" href="namespacev8_1_1internal.html">i</a>--) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] = next_nonempty_category[cat + 1];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">void</span> CheckCacheIntegrity() {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt;= last_category_; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(next_nonempty_category[<a class="code" href="namespacev8_1_1internal.html">i</a>] == last_category_ + 1 ||</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;             categories_[next_nonempty_category[<a class="code" href="namespacev8_1_1internal.html">i</a>]] != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = <a class="code" href="namespacev8_1_1internal.html">i</a>; j &lt; next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>]; j++) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(categories_[j] == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// The cache is overallocated by one so that the last element is always</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// defined, and when updating the cache, we can always use cache[i+1] as long</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// as i is &lt; kNumberOfCategories.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCached.html#af002e0e155354e90082573861a897781">  402</a></span>&#160;  <span class="keywordtype">int</span> next_nonempty_category[kNumberOfCategories + 1];</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCached.html#a6a818df5ad221002b979757280e0db1a">  405</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html#a6a818df5ad221002b979757280e0db1a">ResetCache</a>() {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; kNumberOfCategories; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      next_nonempty_category[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] = kNumberOfCategories;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// Setting the after-last element as well, as explained in the cache&#39;s</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// declaration.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    next_nonempty_category[kNumberOfCategories] = kNumberOfCategories;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;};</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">// Same as FreeListManyCached but uses a fast path.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">// The fast path overallocates by at least 1.85k bytes. The idea of this 1.85k</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">// is: we want the fast path to always overallocate, even for larger</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">// categories. Therefore, we have two choices: either overallocate by</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// &quot;size_in_bytes * something&quot; or overallocate by &quot;size_in_bytes +</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// something&quot;. We choose the later, as the former will tend to overallocate too</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">// much for larger objects. The 1.85k (= 2048 - 128) has been chosen such that</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// for tiny objects (size &lt;= 128 bytes), the first category considered is the</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">// 36th (which holds objects of 2k to 3k), while for larger objects, the first</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// category considered will be one that guarantees a 1.85k+ bytes</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">// overallocation. Using 2k rather than 1.85k would have resulted in either a</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// more complex logic for SelectFastAllocationFreeListCategoryType, or the 36th</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// category (2k to 3k) not being used; both of which are undesirable.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// A secondary fast path is used for tiny objects (size &lt;= 128), in order to</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// consider categories from 256 to 2048 bytes for them.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">// Note that this class uses a precise GetPageForSize (inherited from</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">// FreeListMany), which makes its fast path less fast in the Scavenger. This is</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">// done on purpose, since this class&#39;s only purpose is to be used by</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">// FreeListManyCachedOrigin, which is precise for the scavenger.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">  434</a></span>&#160;<span class="keyword">class </span><a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">FreeListManyCachedFastPathBase</a></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCached.html">FreeListManyCached</a> {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">  437</a></span>&#160;  <span class="keyword">enum class</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">SmallBlocksMode</a> { kAllow, kProhibit };</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a8284f829f689281e0c67ae559c31e361">  439</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a8284f829f689281e0c67ae559c31e361">FreeListManyCachedFastPathBase</a>(<a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">SmallBlocksMode</a> small_blocks_mode)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      : small_blocks_mode_(small_blocks_mode) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (small_blocks_mode_ == SmallBlocksMode::kProhibit) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      min_block_size_ =</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms_min_lab_size_kb &gt; 0))</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;              ? (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms_min_lab_size_kb * <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;              : kFastPathStart;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03.html#a85c792759a8f677e481c149d6d9bb5f2">Allocate</a>(</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes, <span class="keywordtype">size_t</span>* node_size,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">AllocationOrigin</a> origin) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// Objects in the 18th category are at least 2048 bytes</span></div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#ae8b24e14eda9fe222f1573f43cd04efb">  455</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> kFastPathFirstCategory = 18;</div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a27907ee830c34f0c2c87f1eb0e6c575d">  456</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> kFastPathStart = 2048;</div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a252e5af4dbb148d003131782dac0f247">  457</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> kTinyObjectMaxSize = 128;</div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#aeba6cb184f7c15e1cae3fa0d67797fa1">  458</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> kFastPathOffset = kFastPathStart - kTinyObjectMaxSize;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// Objects in the 15th category are at least 256 bytes</span></div>
<div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#ac27b13ab52ee050450c7928c4a8e2131">  460</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> kFastPathFallBackTiny = 15;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  static_assert(categories_min[kFastPathFirstCategory] == kFastPathStart);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  static_assert(categories_min[kFastPathFallBackTiny] ==</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                kTinyObjectMaxSize * 2);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a7bbd534b8d3181b9fd439cbbe2169c46">  466</a></span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">FreeListCategoryType</a> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a7bbd534b8d3181b9fd439cbbe2169c46">SelectFastAllocationFreeListCategoryType</a>(</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(size_in_bytes &lt; kMaxBlockSize);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (size_in_bytes &gt;= categories_min[last_category_]) <span class="keywordflow">return</span> last_category_;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    size_in_bytes += kFastPathOffset;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cat = kFastPathFirstCategory; cat &lt; last_category_; cat++) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">if</span> (size_in_bytes &lt;= categories_min[cat]) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">return</span> cat;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> last_category_;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#abeede8171b61c68d11a77d8b2685e0b1">  482</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">SmallBlocksMode</a> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#abeede8171b61c68d11a77d8b2685e0b1">small_blocks_mode_</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a1c94c0c3da5b57de82f894495a21d6b3">  484</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a1c94c0c3da5b57de82f894495a21d6b3">FRIEND_TEST</a>(</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      SpacesTest,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      FreeListManyCachedFastPathSelectFastAllocationFreeListCategoryType);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;};</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html">  489</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html">FreeListManyCachedFastPath</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">FreeListManyCachedFastPathBase</a> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html#a041d4a769ebd8fa11f9c65bd12d47fa3">  491</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html#a041d4a769ebd8fa11f9c65bd12d47fa3">FreeListManyCachedFastPath</a>()</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">FreeListManyCachedFastPathBase</a>(<a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">SmallBlocksMode</a>::kAllow) {}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;};</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html">  495</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html">FreeListManyCachedFastPathForNewSpace</a></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">FreeListManyCachedFastPathBase</a> {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html#ab6449721f9234f39e85ff4234860f9df">  498</a></span>&#160;  <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html#ab6449721f9234f39e85ff4234860f9df">FreeListManyCachedFastPathForNewSpace</a>()</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">FreeListManyCachedFastPathBase</a>(<a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">SmallBlocksMode</a>::kProhibit) {}</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;};</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">// Uses FreeListManyCached if in the GC; FreeListManyCachedFastPath otherwise.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">// The reasoning behind this FreeList is the following: the GC runs in</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">// parallel, and therefore, more expensive allocations there are less</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">// noticeable. On the other hand, the generated code and runtime need to be very</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">// fast. Therefore, the strategy for the former is one that is not very</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// efficient, but reduces fragmentation (FreeListManyCached), while the strategy</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// for the later is one that is very efficient, but introduces some</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// fragmentation (FreeListManyCachedFastPath).</span></div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FreeListManyCachedOrigin.html">  510</a></span>&#160;<span class="keyword">class </span><a class="code" href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedOrigin.html">FreeListManyCachedOrigin</a></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html">FreeListManyCachedFastPath</a> {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FreeSpace&gt;</a> <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03.html#a85c792759a8f677e481c149d6d9bb5f2">Allocate</a>(</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes, <span class="keywordtype">size_t</span>* node_size,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">AllocationOrigin</a> origin) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;};</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_HEAP_FREE_LIST_H_</span></div>
<div class="ttc" id="aallocation-result_8h_html"><div class="ttname"><a href="allocation-result_8h.html">allocation-result.h</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html">v8::internal::FreeListCategory</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00045">free-list.h:45</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a00aeff21fa36a2a47cc19d386e1a0568"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a00aeff21fa36a2a47cc19d386e1a0568">v8::internal::FreeListCategory::Relink</a></div><div class="ttdeci">void Relink(FreeList *owner)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00118">free-list.cc:118</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a10fc05fb3a597ed95cbff7275ce46e59"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a10fc05fb3a597ed95cbff7275ce46e59">v8::internal::FreeListCategory::available</a></div><div class="ttdeci">uint32_t available() const</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00080">free-list.h:80</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a16948a10293811b73d9722cf82cee58c"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a16948a10293811b73d9722cf82cee58c">v8::internal::FreeListCategory::prev_</a></div><div class="ttdeci">FreeListCategory * prev_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00119">free-list.h:119</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a37596c9c3ceee90a7aa75e1b6c32205a"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a37596c9c3ceee90a7aa75e1b6c32205a">v8::internal::FreeListCategory::FreeListLength</a></div><div class="ttdeci">int FreeListLength()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00556">free-list.cc:556</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a473699f6975093660ea70ce91f083298"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a473699f6975093660ea70ce91f083298">v8::internal::FreeListCategory::MapSpace</a></div><div class="ttdeci">friend class MapSpace</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00125">free-list.h:125</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a4861415136f38069c04f4350a40f9d73"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a4861415136f38069c04f4350a40f9d73">v8::internal::FreeListCategory::is_linked</a></div><div class="ttdeci">bool is_linked(FreeList *owner) const</div><div class="ttdef"><b>Definition:</b> <a href="free-list-inl_8h_source.html#l00017">free-list-inl.h:17</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a4d6cd7015e925fcf3f7d1cfcafe8be82"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a4d6cd7015e925fcf3f7d1cfcafe8be82">v8::internal::FreeListCategory::SumFreeList</a></div><div class="ttdeci">size_t SumFreeList()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00539">free-list.cc:539</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a53df23d0072ff98d06c5c51ed3f1809f"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a53df23d0072ff98d06c5c51ed3f1809f">v8::internal::FreeListCategory::available_</a></div><div class="ttdeci">uint32_t available_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00114">free-list.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a5c4612d807dcf03546d802ad081beb2a"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a5c4612d807dcf03546d802ad081beb2a">v8::internal::FreeListCategory::RepairFreeList</a></div><div class="ttdeci">void RepairFreeList(Heap *heap)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00104">free-list.cc:104</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a5d5b15c39655b27d302d0b6ffecf51ae"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a5d5b15c39655b27d302d0b6ffecf51ae">v8::internal::FreeListCategory::kVeryLongFreeList</a></div><div class="ttdeci">static constexpr int kVeryLongFreeList</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00096">free-list.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a5f433934357036f7199d55a8410987da"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a5f433934357036f7199d55a8410987da">v8::internal::FreeListCategory::Initialize</a></div><div class="ttdeci">void Initialize(FreeListCategoryType type)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00047">free-list.h:47</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a611631e4766cb33392b570510e1dc62f"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a611631e4766cb33392b570510e1dc62f">v8::internal::FreeListCategory::next_</a></div><div class="ttdeci">FreeListCategory * next_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00120">free-list.h:120</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a62ee6b2ce9366cd29bc53531430a3f65"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a62ee6b2ce9366cd29bc53531430a3f65">v8::internal::FreeListCategory::Reset</a></div><div class="ttdeci">void Reset(FreeList *owner)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00029">free-list.cc:29</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a6353b127ae6e0f9b8b7597293cb662dc"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a6353b127ae6e0f9b8b7597293cb662dc">v8::internal::FreeListCategory::prev</a></div><div class="ttdeci">FreeListCategory * prev()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00104">free-list.h:104</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a66a793a27ebffc0e7c7b1e8ca91449d6"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a66a793a27ebffc0e7c7b1e8ca91449d6">v8::internal::FreeListCategory::type_</a></div><div class="ttdeci">FreeListCategoryType type_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00110">free-list.h:110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a7216c7b46bede002b7c76bfaff070565"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a7216c7b46bede002b7c76bfaff070565">v8::internal::FreeListCategory::is_empty</a></div><div class="ttdeci">bool is_empty()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00079">free-list.h:79</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_a76415989e4364f9963276666ae7aca9c"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#a76415989e4364f9963276666ae7aca9c">v8::internal::FreeListCategory::Free</a></div><div class="ttdeci">void Free(const WritableFreeSpace &amp;writable_free_space, FreeMode mode, FreeList *owner)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00086">free-list.cc:86</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_aa85c0f31efef08691770e63319e4dd7c"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#aa85c0f31efef08691770e63319e4dd7c">v8::internal::FreeListCategory::next</a></div><div class="ttdeci">FreeListCategory * next()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00106">free-list.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_ac7c8e8bb20da687de2b5954b09fa9b05"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#ac7c8e8bb20da687de2b5954b09fa9b05">v8::internal::FreeListCategory::SearchForNodeInList</a></div><div class="ttdeci">Tagged&lt; FreeSpace &gt; SearchForNodeInList(size_t minimum_size, size_t *node_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00050">free-list.cc:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_ad07db7e489ba8f8fc2a0f149b7e7f27f"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#ad07db7e489ba8f8fc2a0f149b7e7f27f">v8::internal::FreeListCategory::top</a></div><div class="ttdeci">Tagged&lt; FreeSpace &gt; top()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00102">free-list.h:102</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_ad40ea10881827eac91c85445f16c2f26"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#ad40ea10881827eac91c85445f16c2f26">v8::internal::FreeListCategory::UpdateCountersAfterAllocation</a></div><div class="ttdeci">void UpdateCountersAfterAllocation(size_t allocation_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list-inl_8h_source.html#l00022">free-list-inl.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_ad9da9426887fedeeab403737dca34932"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#ad9da9426887fedeeab403737dca34932">v8::internal::FreeListCategory::set_prev</a></div><div class="ttdeci">void set_prev(FreeListCategory *prev)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00105">free-list.h:105</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_ada21e8428aa07c2bf16af74dd26a7058"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#ada21e8428aa07c2bf16af74dd26a7058">v8::internal::FreeListCategory::PickNodeFromList</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Tagged&lt; FreeSpace &gt; PickNodeFromList(size_t minimum_size, size_t *node_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00035">free-list.cc:35</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_af282ba9f21b6238225c4b00694d8b2be"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#af282ba9f21b6238225c4b00694d8b2be">v8::internal::FreeListCategory::set_top</a></div><div class="ttdeci">void set_top(Tagged&lt; FreeSpace &gt; top)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00103">free-list.h:103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_af5fc1fe207986ba1133ad0d3f457a062"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#af5fc1fe207986ba1133ad0d3f457a062">v8::internal::FreeListCategory::set_next</a></div><div class="ttdeci">void set_next(FreeListCategory *next)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00107">free-list.h:107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_af7811fc9ff899adb081e7646287da6d2"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#af7811fc9ff899adb081e7646287da6d2">v8::internal::FreeListCategory::Unlink</a></div><div class="ttdeci">void Unlink(FreeList *owner)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00021">free-list.cc:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_afc9e0048b0a0f04f6cf94aa28cb9a091"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#afc9e0048b0a0f04f6cf94aa28cb9a091">v8::internal::FreeListCategory::IterateNodesForTesting</a></div><div class="ttdeci">void IterateNodesForTesting(Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00086">free-list.h:86</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListCategory_html_affd6fcd4102bbb8f32cab3c4e5cd927e"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListCategory.html#affd6fcd4102bbb8f32cab3c4e5cd927e">v8::internal::FreeListCategory::top_</a></div><div class="ttdeci">Tagged&lt; FreeSpace &gt; top_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00117">free-list.h:117</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html">v8::internal::FreeListManyCachedFastPathBase</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00434">free-list.h:435</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html_a1c94c0c3da5b57de82f894495a21d6b3"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a1c94c0c3da5b57de82f894495a21d6b3">v8::internal::FreeListManyCachedFastPathBase::FRIEND_TEST</a></div><div class="ttdeci">FRIEND_TEST(SpacesTest, FreeListManyCachedFastPathSelectFastAllocationFreeListCategoryType)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html_a7bbd534b8d3181b9fd439cbbe2169c46"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a7bbd534b8d3181b9fd439cbbe2169c46">v8::internal::FreeListManyCachedFastPathBase::SelectFastAllocationFreeListCategoryType</a></div><div class="ttdeci">FreeListCategoryType SelectFastAllocationFreeListCategoryType(size_t size_in_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00466">free-list.h:466</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html_a8284f829f689281e0c67ae559c31e361"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#a8284f829f689281e0c67ae559c31e361">v8::internal::FreeListManyCachedFastPathBase::FreeListManyCachedFastPathBase</a></div><div class="ttdeci">FreeListManyCachedFastPathBase(SmallBlocksMode small_blocks_mode)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00439">free-list.h:439</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html_abeede8171b61c68d11a77d8b2685e0b1"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#abeede8171b61c68d11a77d8b2685e0b1">v8::internal::FreeListManyCachedFastPathBase::small_blocks_mode_</a></div><div class="ttdeci">SmallBlocksMode small_blocks_mode_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00482">free-list.h:482</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathBase_html_acae04c87ddac627d037661ad5926b04b"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathBase.html#acae04c87ddac627d037661ad5926b04b">v8::internal::FreeListManyCachedFastPathBase::SmallBlocksMode</a></div><div class="ttdeci">SmallBlocksMode</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00437">free-list.h:437</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html">v8::internal::FreeListManyCachedFastPathForNewSpace</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00495">free-list.h:496</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace_html_ab6449721f9234f39e85ff4234860f9df"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPathForNewSpace.html#ab6449721f9234f39e85ff4234860f9df">v8::internal::FreeListManyCachedFastPathForNewSpace::FreeListManyCachedFastPathForNewSpace</a></div><div class="ttdeci">FreeListManyCachedFastPathForNewSpace()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00498">free-list.h:498</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPath_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html">v8::internal::FreeListManyCachedFastPath</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00489">free-list.h:489</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedFastPath_html_a041d4a769ebd8fa11f9c65bd12d47fa3"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedFastPath.html#a041d4a769ebd8fa11f9c65bd12d47fa3">v8::internal::FreeListManyCachedFastPath::FreeListManyCachedFastPath</a></div><div class="ttdeci">FreeListManyCachedFastPath()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00491">free-list.h:491</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCachedOrigin_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCachedOrigin.html">v8::internal::FreeListManyCachedOrigin</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00510">free-list.h:511</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCached_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCached.html">v8::internal::FreeListManyCached</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00354">free-list.h:354</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCached_html_a6a818df5ad221002b979757280e0db1a"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCached.html#a6a818df5ad221002b979757280e0db1a">v8::internal::FreeListManyCached::ResetCache</a></div><div class="ttdeci">void ResetCache()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00405">free-list.h:405</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCached_html_a875a7f47e2afb80c768995f9b2b6abb4"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCached.html#a875a7f47e2afb80c768995f9b2b6abb4">v8::internal::FreeListManyCached::UpdateCacheAfterAddition</a></div><div class="ttdeci">void UpdateCacheAfterAddition(FreeListCategoryType cat)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00372">free-list.h:372</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListManyCached_html_ac05f2f5d1fa9cb6bcf0a4ef38f2f2e2d"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListManyCached.html#ac05f2f5d1fa9cb6bcf0a4ef38f2f2e2d">v8::internal::FreeListManyCached::UpdateCacheAfterRemoval</a></div><div class="ttdeci">void UpdateCacheAfterRemoval(FreeListCategoryType cat)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00380">free-list.h:380</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListMany_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListMany.html">v8::internal::FreeListMany</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00295">free-list.h:295</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListMany_html_a1465b7f832afc7748e5e939f1d76efbd"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListMany.html#a1465b7f832afc7748e5e939f1d76efbd">v8::internal::FreeListMany::SelectFreeListCategoryType</a></div><div class="ttdeci">FreeListCategoryType SelectFreeListCategoryType(size_t size_in_bytes) override</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00330">free-list.h:330</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListMany_html_a8478c3b01db5a6a4b4dd57e9794bc63d"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListMany.html#a8478c3b01db5a6a4b4dd57e9794bc63d">v8::internal::FreeListMany::FRIEND_TEST</a></div><div class="ttdeci">FRIEND_TEST(SpacesTest, FreeListManySelectFreeListCategoryType)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeListMany_html_a863b8577ed6ab575b90661ab264791f8"><div class="ttname"><a href="classv8_1_1internal_1_1FreeListMany.html#a863b8577ed6ab575b90661ab264791f8">v8::internal::FreeListMany::FRIEND_TEST</a></div><div class="ttdeci">FRIEND_TEST(SpacesTest, FreeListManyGuaranteedAllocatable)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html">v8::internal::FreeList::FreeListCategoryIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00222">free-list.h:222</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator_html_a43d7825d0a0479b8cfdd2fe9c6d47874"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#a43d7825d0a0479b8cfdd2fe9c6d47874">v8::internal::FreeList::FreeListCategoryIterator::Next</a></div><div class="ttdeci">FreeListCategory * Next()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00229">free-list.h:229</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator_html_add90affe501fcb59af752b2047712535"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#add90affe501fcb59af752b2047712535">v8::internal::FreeList::FreeListCategoryIterator::current_</a></div><div class="ttdeci">FreeListCategory * current_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00237">free-list.h:237</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator_html_af37f714fd744b254770c99e195eb4f31"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af37f714fd744b254770c99e195eb4f31">v8::internal::FreeList::FreeListCategoryIterator::HasNext</a></div><div class="ttdeci">bool HasNext() const</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00227">free-list.h:227</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator_html_af6f54d67384a9d10fcbb7311b3691d76"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList_1_1FreeListCategoryIterator.html#af6f54d67384a9d10fcbb7311b3691d76">v8::internal::FreeList::FreeListCategoryIterator::FreeListCategoryIterator</a></div><div class="ttdeci">FreeListCategoryIterator(FreeList *free_list, FreeListCategoryType type)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00224">free-list.h:224</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html">v8::internal::FreeList</a></div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00135">free-list.h:135</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a02fee5a0d7f148283749d37e17386c48"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a02fee5a0d7f148283749d37e17386c48">v8::internal::FreeList::wasted_bytes</a></div><div class="ttdeci">size_t wasted_bytes() const</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00178">free-list.h:178</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a13f519089f16c9fd26add74810903237"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a13f519089f16c9fd26add74810903237">v8::internal::FreeList::GetPageForSize</a></div><div class="ttdeci">virtual V8_EXPORT_PRIVATE PageMetadata * GetPageForSize(size_t size_in_bytes)=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a218dbf4a6fc40a71e0e40323f4ecc9a5"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a218dbf4a6fc40a71e0e40323f4ecc9a5">v8::internal::FreeList::SelectFreeListCategoryType</a></div><div class="ttdeci">virtual FreeListCategoryType SelectFreeListCategoryType(size_t size_in_bytes)=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a259a3dce6de80bce29ff9a5aa0438e84"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a259a3dce6de80bce29ff9a5aa0438e84">v8::internal::FreeList::ResetForNonBlackAllocatedPages</a></div><div class="ttdeci">virtual void ResetForNonBlackAllocatedPages()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00452">free-list.cc:452</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a3493244ef61ab0a37c8c7c43c5f21c0c"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a3493244ef61ab0a37c8c7c43c5f21c0c">v8::internal::FreeList::CreateFreeList</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE std::unique_ptr&lt; FreeList &gt; CreateFreeList()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00131">free-list.cc:131</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a3bbe47a0c0527a6b642b828f4ce8b6fb"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a3bbe47a0c0527a6b642b828f4ce8b6fb">v8::internal::FreeList::FreeList</a></div><div class="ttdeci">FreeList(int number_of_categories, size_t min_block_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00126">free-list.cc:126</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a3eccafb7155354520aef3fbf7ccbccd8"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a3eccafb7155354520aef3fbf7ccbccd8">v8::internal::FreeList::number_of_categories_</a></div><div class="ttdeci">const int number_of_categories_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00270">free-list.h:270</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a3f8c32e83ac1e62650e96615d3a85e49"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a3f8c32e83ac1e62650e96615d3a85e49">v8::internal::FreeList::ForAllFreeListCategories</a></div><div class="ttdeci">void ForAllFreeListCategories(Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00211">free-list.h:211</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a403da0f5477a38f0d1f4541180965a0f"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a403da0f5477a38f0d1f4541180965a0f">v8::internal::FreeList::increase_wasted_bytes</a></div><div class="ttdeci">void increase_wasted_bytes(size_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00181">free-list.h:181</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a473699f6975093660ea70ce91f083298"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a473699f6975093660ea70ce91f083298">v8::internal::FreeList::MapSpace</a></div><div class="ttdeci">friend class MapSpace</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00286">free-list.h:286</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a509ffac428a7df2429290ff156d8985c"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a509ffac428a7df2429290ff156d8985c">v8::internal::FreeList::SearchForNodeInList</a></div><div class="ttdeci">Tagged&lt; FreeSpace &gt; SearchForNodeInList(FreeListCategoryType type, size_t minimum_size, size_t *node_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00155">free-list.cc:155</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a545456af996f8aadf780c67f43305d0e"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a545456af996f8aadf780c67f43305d0e">v8::internal::FreeList::min_block_size_</a></div><div class="ttdeci">size_t min_block_size_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00272">free-list.h:272</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a5a58fc6be55c434e8e28e32f478a76e0"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a5a58fc6be55c434e8e28e32f478a76e0">v8::internal::FreeList::EvictFreeListItems</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void EvictFreeListItems(PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00471">free-list.cc:471</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a5e449f34c8035d4f353c10cb8bfc6272"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a5e449f34c8035d4f353c10cb8bfc6272">v8::internal::FreeList::AddCategory</a></div><div class="ttdeci">virtual bool AddCategory(FreeListCategory *category)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00486">free-list.cc:486</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a5e4b9f95bd2be705ce52df72eb7977ff"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a5e4b9f95bd2be705ce52df72eb7977ff">v8::internal::FreeList::categories_</a></div><div class="ttdeci">FreeListCategory ** categories_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00274">free-list.h:274</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a6279a4ca390d2092e1a505872fe91fd2"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a6279a4ca390d2092e1a505872fe91fd2">v8::internal::FreeList::IncreaseAvailableBytes</a></div><div class="ttdeci">void IncreaseAvailableBytes(size_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00175">free-list.h:175</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a661a36be58203eda04f2b02b01746c42"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a661a36be58203eda04f2b02b01746c42">v8::internal::FreeList::Allocate</a></div><div class="ttdeci">virtual V8_WARN_UNUSED_RESULT Tagged&lt; FreeSpace &gt; Allocate(size_t size_in_bytes, size_t *node_size, AllocationOrigin origin)=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a6934af6d3e9dddeed4a3a5a2039dc847"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a6934af6d3e9dddeed4a3a5a2039dc847">v8::internal::FreeList::wasted_bytes_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; wasted_bytes_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00280">free-list.h:280</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a6f45e2c56db7c629e14441dc4446e3e9"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a6f45e2c56db7c629e14441dc4446e3e9">v8::internal::FreeList::~FreeList</a></div><div class="ttdeci">virtual ~FreeList()=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a759dc276e64a73ba23f3377dda99667e"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a759dc276e64a73ba23f3377dda99667e">v8::internal::FreeList::VerifyAvailable</a></div><div class="ttdeci">void VerifyAvailable()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00245">free-list.h:245</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a7c78f22b1971e2943be876918d163dd0"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a7c78f22b1971e2943be876918d163dd0">v8::internal::FreeList::IsEmpty</a></div><div class="ttdeci">bool IsEmpty()</div><div class="ttdef"><b>Definition:</b> <a href="free-list-inl_8h_source.html#l00036">free-list-inl.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a81d720396af370e4504f6bd85f44c65d"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a81d720396af370e4504f6bd85f44c65d">v8::internal::FreeList::GetPageForCategoryType</a></div><div class="ttdeci">PageMetadata * GetPageForCategoryType(FreeListCategoryType type)</div><div class="ttdef"><b>Definition:</b> <a href="free-list-inl_8h_source.html#l00026">free-list-inl.h:26</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a874575254a8775cea516360ac77fa79f"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a874575254a8775cea516360ac77fa79f">v8::internal::FreeList::ForAllFreeListCategories</a></div><div class="ttdeci">void ForAllFreeListCategories(FreeListCategoryType type, Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00201">free-list.h:201</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_a9f37f7601004b9fdb436a0a92bb2b716"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#a9f37f7601004b9fdb436a0a92bb2b716">v8::internal::FreeList::CreateFreeListForNewSpace</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE std::unique_ptr&lt; FreeList &gt; CreateFreeListForNewSpace()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00135">free-list.cc:135</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aa0ecab6f30220582f2caa7387651441a"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aa0ecab6f30220582f2caa7387651441a">v8::internal::FreeList::last_category</a></div><div class="ttdeci">FreeListCategoryType last_category()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00196">free-list.h:196</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aa150098e457ff2c1b99168e7c6206e1a"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aa150098e457ff2c1b99168e7c6206e1a">v8::internal::FreeList::Free</a></div><div class="ttdeci">virtual size_t Free(const WritableFreeSpace &amp;free_space, FreeMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00175">free-list.cc:175</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aaa0347de311efbb00cc0f6151da34d46"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aaa0347de311efbb00cc0f6151da34d46">v8::internal::FreeList::DecreaseAvailableBytes</a></div><div class="ttdeci">void DecreaseAvailableBytes(size_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00176">free-list.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aae1948bb0d72d2a9cda2fbaac3720499"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aae1948bb0d72d2a9cda2fbaac3720499">v8::internal::FreeList::number_of_categories</a></div><div class="ttdeci">int number_of_categories()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00195">free-list.h:195</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_ab3d5e267a023ee05cfdcfcc3d0973edc"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#ab3d5e267a023ee05cfdcfcc3d0973edc">v8::internal::FreeList::decrease_wasted_bytes</a></div><div class="ttdeci">void decrease_wasted_bytes(size_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00184">free-list.h:184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_ab4abea8fbd917cb43b9b440ef1010342"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#ab4abea8fbd917cb43b9b440ef1010342">v8::internal::FreeList::Reset</a></div><div class="ttdeci">virtual void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00442">free-list.cc:442</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_abb5a579515e5c76b3f564bfb7c728f29"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#abb5a579515e5c76b3f564bfb7c728f29">v8::internal::FreeList::last_category_</a></div><div class="ttdeci">const FreeListCategoryType last_category_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00271">free-list.h:271</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_abf51753a0ae52b9c3b3143fe2d6e2dc6"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#abf51753a0ae52b9c3b3143fe2d6e2dc6">v8::internal::FreeList::Available</a></div><div class="ttdeci">size_t Available()</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00169">free-list.h:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_ac932560dcf31ce70c131ce0931fe6ea7"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#ac932560dcf31ce70c131ce0931fe6ea7">v8::internal::FreeList::min_block_size</a></div><div class="ttdeci">size_t min_block_size() const</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00198">free-list.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_ad1e54f8e566e1d8124e57a9e811e6c6d"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#ad1e54f8e566e1d8124e57a9e811e6c6d">v8::internal::FreeList::top</a></div><div class="ttdeci">FreeListCategory * top(FreeListCategoryType type) const</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00264">free-list.h:264</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_ae9eb2b754f476bc5b138d7b5e9407550"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#ae9eb2b754f476bc5b138d7b5e9407550">v8::internal::FreeList::RemoveCategory</a></div><div class="ttdeci">virtual V8_EXPORT_PRIVATE void RemoveCategory(FreeListCategory *category)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00505">free-list.cc:505</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aecf06c16c572b5c0965ee21945e270d3"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aecf06c16c572b5c0965ee21945e270d3">v8::internal::FreeList::available_</a></div><div class="ttdeci">size_t available_</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00277">free-list.h:277</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_aeeb8bd0cb83326e7985985b468597d14"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#aeeb8bd0cb83326e7985985b468597d14">v8::internal::FreeList::RepairLists</a></div><div class="ttdeci">void RepairLists(Heap *heap)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00481">free-list.cc:481</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_af3cbe43b30d422110caba0e7f86bf673"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#af3cbe43b30d422110caba0e7f86bf673">v8::internal::FreeList::PrintCategories</a></div><div class="ttdeci">void PrintCategories(FreeListCategoryType type)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00528">free-list.cc:528</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FreeList_html_afcf7f72515a76f1313d11c172a89d164"><div class="ttname"><a href="classv8_1_1internal_1_1FreeList.html#afcf7f72515a76f1313d11c172a89d164">v8::internal::FreeList::TryFindNodeIn</a></div><div class="ttdeci">Tagged&lt; FreeSpace &gt; TryFindNodeIn(FreeListCategoryType type, size_t minimum_size, size_t *node_size)</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8cc_source.html#l00139">free-list.cc:139</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html">v8::internal::Heap</a></div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00212">heap.h:212</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html">v8::internal::MutablePageMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00046">mutable-page-metadata.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a8ca68362b7531b2ab93a045cdcedfdde"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">v8::internal::MutablePageMetadata::kPageSize</a></div><div class="ttdeci">static const int kPageSize</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00062">mutable-page-metadata.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1PageMetadata.html">v8::internal::PageMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="page-metadata_8h_source.html#l00024">page-metadata.h:24</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedSpace_html"><div class="ttname"><a href="classv8_1_1internal_1_1PagedSpace.html">v8::internal::PagedSpace</a></div><div class="ttdef"><b>Definition:</b> <a href="paged-spaces_8h_source.html#l00361">paged-spaces.h:361</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ReadOnlyPageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1ReadOnlyPageMetadata.html">v8::internal::ReadOnlyPageMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="read-only-spaces_8h_source.html#l00028">read-only-spaces.h:28</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00707">tagged.h:707</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableFreeSpace_html"><div class="ttname"><a href="classv8_1_1internal_1_1WritableFreeSpace.html">v8::internal::WritableFreeSpace</a></div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8h_source.html#l00491">code-memory-access.h:491</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html"><div class="ttname"><a href="common_2globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_adaf90f045d5cd2710edd625b8685472a"><div class="ttname"><a href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available threshold for starting incremental marking immediately in percent of available Use a single schedule for determining a marking schedule between JS and C objects schedules the minor GC task with kUserVisible priority max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats TracingFlags::gc_stats track native contexts that are expected to be garbage collected verify heap pointers before and after GC memory reducer runs GC with ReduceMemoryFootprint flag Maximum number of memory reducer GCs scheduled Old gen GC speed is computed directly from gc tracer counters Perform compaction on full GCs based on V8 s default heuristics Perform compaction on every full GC Perform code space compaction when finalizing a full GC with stack Stress GC compaction to flush out bugs with moving objects flush of baseline code when it has not been executed recently Use time base code flushing instead of age Use a progress bar to scan large objects in increments when incremental marking is active force incremental marking for small heaps and run it more often Release pooled large pages after X seconds prints number of allocations and enables analysis mode for gc fuzz e g stress stress scavenge force scavenge at random points between and reclaim otherwise unreachable unmodified wrapper objects when possible discard the memory pool before invoking the GC on memory pressure or last resort GCs Delay before memory reducer start virtual randomize memory reservations by ignoring any hints passed when allocating pages use incremental marking for CppHeap cppheap_concurrent_marking c value for membalancer A special constant to balance between memory and space tradeoff The smaller the more memory it uses enable use of SSE4 instructions if available enable use of SAHF instruction if enable use of AVX VNNI instructions if available enable use of POPCNT instruction if available force all emitted branches to be in long mode(MIPS/PPC only)&quot;) DEFINE_BOOL(partial_constant_pool</div></div>
<div class="ttc" id="afree-space_8h_html"><div class="ttname"><a href="free-space_8h.html">free-space.h</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amutable-page-metadata_8h_html"><div class="ttname"><a href="mutable-page-metadata_8h.html">mutable-page-metadata.h</a></div></div>
<div class="ttc" id="anamespaceheap_html"><div class="ttname"><a href="namespaceheap.html">heap</a></div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2platform_2platform_8h_source.html#l00072">platform.h:72</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_ab0275d47f9778d486eafe88b18c5851d"><div class="ttname"><a href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00042">unicode.cc:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03_html_a85c792759a8f677e481c149d6d9bb5f2"><div class="ttname"><a href="namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03.html#a85c792759a8f677e481c149d6d9bb5f2">v8::base::anonymous_namespace{platform-posix.cc}::Allocate</a></div><div class="ttdeci">void * Allocate(void *hint, size_t size, OS::MemoryPermission access, PageType page_type)</div><div class="ttdef"><b>Definition:</b> <a href="platform-posix_8cc_source.html#l00166">platform-posix.cc:166</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_af0b04fe9288a783d9de7a19dcfc55fa3"><div class="ttname"><a href="namespacev8_1_1base.html#af0b04fe9288a783d9de7a19dcfc55fa3">v8::base::Free</a></div><div class="ttdeci">void Free(void *memory)</div><div class="ttdef"><b>Definition:</b> <a href="base_2platform_2memory_8h_source.html#l00063">memory.h:63</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a044f3a8fe8dabbdeee3db1b16e85a1ba"><div class="ttname"><a href="namespacev8_1_1internal.html#a044f3a8fe8dabbdeee3db1b16e85a1ba">v8::internal::kFirstCategory</a></div><div class="ttdeci">static constexpr FreeListCategoryType kFirstCategory</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00039">free-list.h:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a12d50d7bb2c9d8a916ff0785e6eff241"><div class="ttname"><a href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">v8::internal::kTaggedSize</a></div><div class="ttdeci">constexpr int kTaggedSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00533">globals.h:533</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a45db351d90234e7d9e494015fcf3829c"><div class="ttname"><a href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829c">v8::internal::FreeMode</a></div><div class="ttdeci">FreeMode</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00042">free-list.h:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a45db351d90234e7d9e494015fcf3829ca53409264f9ed262cc16b5b513fea3a6e"><div class="ttname"><a href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829ca53409264f9ed262cc16b5b513fea3a6e">v8::internal::kLinkCategory</a></div><div class="ttdeci">@ kLinkCategory</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00042">free-list.h:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a45db351d90234e7d9e494015fcf3829caba2ca651c63fb8feea63d688e34fceb4"><div class="ttname"><a href="namespacev8_1_1internal.html#a45db351d90234e7d9e494015fcf3829caba2ca651c63fb8feea63d688e34fceb4">v8::internal::kDoNotLinkCategory</a></div><div class="ttdeci">@ kDoNotLinkCategory</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00042">free-list.h:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00453">wasm-objects-inl.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a816230f1832dc47bed246958dae96938"><div class="ttname"><a href="namespacev8_1_1internal.html#a816230f1832dc47bed246958dae96938">v8::internal::FreeListCategoryType</a></div><div class="ttdeci">int32_t FreeListCategoryType</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00037">free-list.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a93b2e7c72fa0878021b495b6f3cec820"><div class="ttname"><a href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">v8::internal::KB</a></div><div class="ttdeci">constexpr int KB</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00055">v8-internal.h:55</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abddbb63b815c1d69390fef2325df451a"><div class="ttname"><a href="namespacev8_1_1internal.html#abddbb63b815c1d69390fef2325df451a">v8::internal::AllocationOrigin</a></div><div class="ttdeci">AllocationOrigin</div><div class="ttdef"><b>Definition:</b> <a href="allocation-result_8h_source.html#l00015">allocation-result.h:15</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adaaee8620068888ef2b3c120d05d8cd3"><div class="ttname"><a href="namespacev8_1_1internal.html#adaaee8620068888ef2b3c120d05d8cd3">v8::internal::kInvalidCategory</a></div><div class="ttdeci">static constexpr FreeListCategoryType kInvalidCategory</div><div class="ttdef"><b>Definition:</b> <a href="free-list_8h_source.html#l00040">free-list.h:40</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html"><div class="ttname"><a href="src_2base_2macros_8h.html">macros.h</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ab08e353943a53678ac6baafc678f2d81"><div class="ttname"><a href="src_2base_2macros_8h.html#ab08e353943a53678ac6baafc678f2d81">V8_EXPORT_PRIVATE</a></div><div class="ttdeci">#define V8_EXPORT_PRIVATE</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00460">macros.h:460</a></div></div>
<div class="ttc" id="autils_2utils_8h_html"><div class="ttname"><a href="utils_2utils_8h.html">utils.h</a></div></div>
<div class="ttc" id="av8config_8h_html_a63258e4bf5dc9fb8c78f881c8405d83b"><div class="ttname"><a href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a></div><div class="ttdeci">#define V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00671">v8config.h:671</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_a974448b91dd98c933fb07a236a86d25.html">heap</a></li><li class="navelem"><a class="el" href="free-list_8h.html">free-list.h</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 15:56:33 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
