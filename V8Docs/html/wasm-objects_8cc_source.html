<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/wasm/wasm-objects.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wasm-objects_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">wasm-objects.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wasm-objects_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2015 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-objects_8h.html">src/wasm/wasm-objects.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#if V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// `sys/mman.h defines `MAP_TYPE`, but `MAP_TYPE` also gets defined within V8.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// Since we don&#39;t need `sys/mman.h`&#39;s `MAP_TYPE`, we undefine it immediately</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// after the `#include`.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#undef MAP_TYPE</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator_8h.html">src/base/iterator.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vector_8h.html">src/base/vector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="builtins-inl_8h.html">src/builtins/builtins-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-compiler_8h.html">src/compiler/wasm-compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">src/debug/debug.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="counters_8h.html">src/logging/counters.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="managed-inl_8h.html">src/objects/managed-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="objects-inl_8h.html">src/objects/objects-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="oddball_8h.html">src/objects/oddball.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shared-function-info_8h.html">src/objects/shared-function-info.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="roots-inl_8h.html">src/roots/roots-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="utils_2utils_8h.html">src/utils/utils.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="canonical-types_8h.html">src/wasm/canonical-types.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="code-space-access_8h.html">src/wasm/code-space-access.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module-compiler_8h.html">src/wasm/module-compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module-decoder_8h.html">src/wasm/module-decoder.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="module-instantiate_8h.html">src/wasm/module-instantiate.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stacks_8h.html">src/wasm/stacks.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="value-type_8h.html">src/wasm/value-type.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-code-manager_8h.html">src/wasm/wasm-code-manager.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-code-pointer-table-inl_8h.html">src/wasm/wasm-code-pointer-table-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-engine_8h.html">src/wasm/wasm-engine.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-export-wrapper-cache_8h.html">src/wasm/wasm-export-wrapper-cache.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-limits_8h.html">src/wasm/wasm-limits.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-module_8h.html">src/wasm/wasm-module.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-objects-inl_8h.html">src/wasm/wasm-objects-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-subtyping_8h.html">src/wasm/wasm-subtyping.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-value_8h.html">src/wasm/wasm-value.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-interpreter-inl_8h.html">src/wasm/interpreter/wasm-interpreter-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wasm-interpreter-runtime_8h.html">src/wasm/interpreter/wasm-interpreter-runtime.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Needs to be last so macros do not get undefined.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="object-macros_8h.html">src/objects/object-macros.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="wasm-objects_8cc.html#a21efa1f26601b2d6f6839765ebc71df9">   55</a></span>&#160;<span class="preprocessor">#define TRACE_IFT(...)              \</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">  do {                              \</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">    if (false) PrintF(__VA_ARGS__); \</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">  } while (false)</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html">   63</a></span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// Utilities for handling &quot;uses&quot; lists. We reserve one slot for the</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// used length, then store pairs of (instance, table_index).</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">   67</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a> = 1;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">   68</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">SetUsedLength</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses, <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// {set} includes a DCHECK for sufficient capacity.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  uses-&gt;set(0, <a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(<a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">   72</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (uses-&gt;length() == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">return</span> Cast&lt;Smi&gt;(uses-&gt;get(0)).value();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af8f9bd68361ee2ccfd1496da2f5951fd">   76</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af8f9bd68361ee2ccfd1496da2f5951fd">SetEntry</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses, <span class="keywordtype">int</span> slot_index,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;              <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> user, <span class="keywordtype">int</span> table_index) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(slot_index &amp; 1);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  uses-&gt;set(slot_index, <a class="code" href="namespacev8_1_1internal.html#a96a98d1219c08bac1c5c91ba9dacd1d4">MakeWeak</a>(user));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  uses-&gt;set(slot_index + 1, <a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(table_index));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// These are two separate functions because GCMole produces bogus warnings</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// when we return a std::pair&lt;A, B&gt; and call it as `auto [a, b] = ...`.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">   84</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">GetInstance</a>(</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses, <span class="keywordtype">int</span> slot_index) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(slot_index &amp; 1);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmTrustedInstanceData&gt;(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      uses-&gt;get(slot_index).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#af954049cb1526fdcdff6faad97f5fbac">GetHeapObjectAssumeWeak</a>());</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">   90</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">GetTableIndex</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses, <span class="keywordtype">int</span> slot_index) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(slot_index &amp; 1);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> Cast&lt;Smi&gt;(uses-&gt;get(slot_index + 1)).value();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a8f7a09b96377cfc3e65480e903628980">   94</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a8f7a09b96377cfc3e65480e903628980">CopyEntry</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> dst, <span class="keywordtype">int</span> dst_index,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;               <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> src, <span class="keywordtype">int</span> src_index) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(dst_index &amp; 1);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(src_index &amp; 1);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// There shouldn&#39;t be a reason to copy cleared entries.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      IsWasmTrustedInstanceData(src-&gt;get(src_index).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#af954049cb1526fdcdff6faad97f5fbac">GetHeapObjectAssumeWeak</a>()));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(src-&gt;get(src_index + 1)));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  dst-&gt;set(dst_index, src-&gt;get(src_index));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  dst-&gt;set(dst_index + 1, src-&gt;get(src_index + 1));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// Import a few often used types from the wasm namespace.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#aee315e6fdfed61d0c5a8b4d88d9e85b6">  109</a></span>&#160;<span class="keyword">using</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">WasmFunction</a> = <a class="code" href="namespacev8_1_1internal.html#aee315e6fdfed61d0c5a8b4d88d9e85b6">wasm::WasmFunction</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a09dbf9baefb793fd78912d6ef89f9dde">  110</a></span>&#160;<span class="keyword">using</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> = <a class="code" href="namespacev8_1_1internal.html#a09dbf9baefb793fd78912d6ef89f9dde">wasm::WasmModule</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">  113</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">WasmModuleObject::New</a>(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, std::shared_ptr&lt;wasm::NativeModule&gt; native_module,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Script&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Managed&lt;wasm::NativeModule&gt;</a>&gt; managed_native_module;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>-&gt;type() == Script::Type::kWasm) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    managed_native_module = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a94c4a6c4ad3993b5e0e43bc2191c084b">Cast</a>&lt;<a class="code" href="classv8_1_1internal_1_1Managed.html">Managed&lt;wasm::NativeModule&gt;</a>&gt;(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>-&gt;wasm_managed_native_module()),</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        isolate);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a> = <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a909423f11ae499833369d415e9a18212">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">size_t</span> memory_estimate =</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a909423f11ae499833369d415e9a18212">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abacd1cb85a612977eef0bc38deb0e076">committed_code_space</a>() +</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a329950b560b30699bd218b9622eedda7">wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize</a>(<a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    managed_native_module = <a class="code" href="classv8_1_1internal_1_1Managed.html#a1c10cb948281b864db32d8af25a7b7d9">Managed&lt;wasm::NativeModule&gt;::From</a>(</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        isolate, memory_estimate, std::move(<a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a909423f11ae499833369d415e9a18212">native_module</a>));</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object = Cast&lt;WasmModuleObject&gt;(</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(isolate-&gt;wasm_module_constructor()));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  module_object-&gt;set_managed_native_module(*managed_native_module);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  module_object-&gt;set_script(*<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">return</span> module_object;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">  136</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">WasmModuleObject::ExtractUtf8StringFromModuleBytes</a>(</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">wasm::WireBytesRef</a> ref, <a class="code" href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fb">InternalizeString</a> internalize) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes =</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      module_object-&gt;native_module()-&gt;wire_bytes();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">ExtractUtf8StringFromModuleBytes</a>(isolate, wire_bytes, ref,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                          internalize);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#a5c7adba7fd59fb6edd3375ad0bb6f2c8">  145</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">WasmModuleObject::ExtractUtf8StringFromModuleBytes</a>(</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">wasm::WireBytesRef</a> ref, <a class="code" href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fb">InternalizeString</a> internalize) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> name_vec =</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(ref.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">offset</a>(), ref.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a1853a6fc4a88a37d2bb8a91b58781daf">end_offset</a>());</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// UTF8 validation happens at decode time.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classunibrow_1_1Utf8.html#aa6e4ee521e61e597e3861e9cf77f73aa">unibrow::Utf8::ValidateEncoding</a>(name_vec.<a class="code" href="classv8_1_1base_1_1Vector.html#a127410ecb29a2d265d49cbf575f676f9">begin</a>(), name_vec.<a class="code" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>()));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keyword">auto</span>* factory = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">return</span> internalize</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;             ? factory-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#af3f3d9861e8eb4e63e94eae4d18aa477">InternalizeUtf8String</a>(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                   <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const char&gt;::cast</a>(name_vec))</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;             : factory</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                   -&gt;NewStringFromUtf8(<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const char&gt;::cast</a>(name_vec))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                   .ToHandleChecked();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#a5baf40871885dded667e73ac9a56e9a2">  161</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;String&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a5baf40871885dded667e73ac9a56e9a2">WasmModuleObject::GetModuleNameOrNull</a>(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a> = module_object-&gt;module();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac76bdfa93432deb3dc1580b98a9b836e">name</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a94db77b7254197e7ed15d4851dcc3934">is_set</a>()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">ExtractUtf8StringFromModuleBytes</a>(isolate, module_object, <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac76bdfa93432deb3dc1580b98a9b836e">name</a>,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                          <a class="code" href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fba81b23a97077ceef0f9633d2041ae1737">kNoInternalize</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#a43a4243e8c99a7f72e7fa6406f303f8b">  169</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;String&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a43a4243e8c99a7f72e7fa6406f303f8b">WasmModuleObject::GetFunctionNameOrNull</a>(</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    uint32_t func_index) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(func_index, module_object-&gt;module()-&gt;functions.size());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">wasm::WireBytesRef</a> <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> =</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      module_object-&gt;module()-&gt;lazily_generated_names.LookupFunctionName(</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">wasm::ModuleWireBytes</a>(module_object-&gt;native_module()-&gt;wire_bytes()),</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          func_index);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>.is_set()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">ExtractUtf8StringFromModuleBytes</a>(isolate, module_object, <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                          <a class="code" href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fba81b23a97077ceef0f9633d2041ae1737">kNoInternalize</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmModuleObject.html#a9c404ba0124692e0b3b5b7c58c582ac2">  182</a></span>&#160;<a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a9c404ba0124692e0b3b5b7c58c582ac2">WasmModuleObject::GetRawFunctionName</a>(</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (func_index == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">wasm::kAnonymousFuncIndex</a>) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a>({<span class="keyword">nullptr</span>, 0});</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(<a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a>()-&gt;functions.size(), func_index);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">wasm::ModuleWireBytes</a> wire_bytes(<a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a909423f11ae499833369d415e9a18212">native_module</a>()-&gt;wire_bytes());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">wasm::WireBytesRef</a> name_ref =</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">module</a>()-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a0968dbfaa7e6cf781764e9d2cf7336a5">lazily_generated_names</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1LazilyGeneratedNames.html#a18b1d6d0ec7a67bbb0ecac1da13d75db">LookupFunctionName</a>(wire_bytes,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                          func_index);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">wasm::WasmName</a> <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> = wire_bytes.<a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">GetNameOrNull</a>(name_ref);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;::cast</a>(<a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a44960b521a446db5f1e61b9bfb0c56d6">  196</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a44960b521a446db5f1e61b9bfb0c56d6">WasmTableObject::New</a>(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> canonical_type,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    uint32_t initial, <span class="keywordtype">bool</span> has_maximum, uint64_t maximum,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> initial_value, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">wasm::AddressType</a> address_type,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a>* out_dispatch_table) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a538bea74f04b303202a3184772b964be">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#aa459140e8766cc7f6bdf67dcd174ad1e">is_object_reference</a>());</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(initial, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>());</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> entries = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">NewFixedArray</a>(initial);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; i &lt; static_cast&lt;int&gt;(initial); ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    entries-&gt;set(<a class="code" href="namespacev8_1_1internal.html">i</a>, *initial_value);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordtype">bool</span> is_function_table = <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a6b4a750d18a949ca6c0e9346e0f66179">canonical_type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#accec08e44f61c25ff3606c50e321a56c">IsFunctionType</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> shared = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table =</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      is_function_table ? isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmDispatchTable(</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                              initial, <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a6b4a750d18a949ca6c0e9346e0f66179">canonical_type</a>, shared)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        : <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a>{};</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;UnionOf&lt;Undefined, Number, BigInt&gt;</a>&gt; max =</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;undefined_value();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (has_maximum) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (address_type == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">wasm::AddressType::kI32</a>) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<a class="code" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">kMaxUInt32</a>, maximum);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      max = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#ad56bf14a7882ee1e69e60b467b0be0e7">NewNumber</a>(maximum);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      max = <a class="code" href="classv8_1_1internal_1_1BigInt.html#a7df25eb1750797b26ce9588754f919c3">BigInt::FromUint64</a>(isolate, maximum);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> table_ctor(</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_table_constructor(), isolate);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keyword">auto</span> table_obj =</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      Cast&lt;WasmTableObject&gt;(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(table_ctor));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (!trusted_data.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">is_null</a>()) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    table_obj-&gt;set_trusted_data(*trusted_data);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    table_obj-&gt;clear_trusted_data();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  table_obj-&gt;set_entries(*entries);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  table_obj-&gt;set_current_length(initial);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  table_obj-&gt;set_maximum_length(*max);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  table_obj-&gt;set_raw_type(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a538bea74f04b303202a3184772b964be">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#acf78d34b0ebd28dd987c335f1efddaac">raw_bit_field</a>()));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  table_obj-&gt;set_address_type(address_type);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  table_obj-&gt;set_padding_for_address_type_0(0);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  table_obj-&gt;set_padding_for_address_type_1(0);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#if TAGGED_SIZE_8_BYTES</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  table_obj-&gt;set_padding_for_address_type_2(0);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">if</span> (is_function_table) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(table_obj-&gt;current_length(), dispatch_table-&gt;length());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    table_obj-&gt;set_trusted_dispatch_table(*dispatch_table);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (out_dispatch_table) *out_dispatch_table = dispatch_table;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    table_obj-&gt;clear_trusted_dispatch_table();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">return</span> table_obj;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#ad51363b96ea8a38d2957f46f2767b4de">  259</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#ad51363b96ea8a38d2957f46f2767b4de">WasmTableObject::Grow</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                          uint32_t <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> init_value) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  uint32_t old_size = table-&gt;current_length();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1count.html">count</a> == 0) <span class="keywordflow">return</span> old_size;  <span class="comment">// Degenerate case: nothing to do.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Check if growing by {count} is valid.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad39cf555e73abbf7233ee2029b74ff7d">wasm::kV8MaxWasmTableSize</a> &lt;= <a class="code" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">kMaxUInt32</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  uint64_t static_max_size = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  uint32_t max_size = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(std::min(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      static_max_size, table-&gt;maximum_length_u64().value_or(static_max_size)));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(old_size, max_size);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1count.html">count</a> &gt; max_size - old_size) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  uint32_t new_size = old_size + <a class="code" href="structv8_1_1internal_1_1count.html">count</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// Even with 2x over-allocation, there should not be an integer overflow.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad39cf555e73abbf7233ee2029b74ff7d">wasm::kV8MaxWasmTableSize</a> &lt;= <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a> / 2);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>, new_size);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordtype">int</span> old_capacity = table-&gt;entries()-&gt;length();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (new_size &gt; <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(old_capacity)) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">int</span> grow = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(new_size) - old_capacity;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Grow at least by the old capacity, to implement exponential growing.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    grow = std::max(grow, old_capacity);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Never grow larger than the max size.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    grow = std::min(grow, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(max_size - old_capacity));</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">auto</span> new_store = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a848c5c1939908dd001227d09e1c217a2">CopyFixedArrayAndGrow</a>(</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(table-&gt;entries(), isolate), grow);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    table-&gt;set_entries(*new_store, <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d">WriteBarrierMode::UPDATE_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span> (table-&gt;has_trusted_dispatch_table()) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        table-&gt;trusted_dispatch_table(isolate), isolate);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_size, dispatch_table-&gt;length());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> new_dispatch_table =</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a295a7068bb6e12ef63d746cf4dbf53c3">WasmDispatchTable::Grow</a>(isolate, dispatch_table, new_size);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (!dispatch_table.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a616490b5813ae8be61c7d607af9f9dbd">is_identical_to</a>(new_dispatch_table)) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      table-&gt;set_trusted_dispatch_table(*new_dispatch_table);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_size, table-&gt;trusted_dispatch_table(isolate)-&gt;length());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses = dispatch_table-&gt;protected_uses();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordtype">int</span> used_length = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; used_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> instance = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">GetInstance</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (instance-&gt;has_interpreter_object()) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          <span class="keywordtype">int</span> table_index = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">GetTableIndex</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a32a62b50d2670eff6682c2d356b8f5c4">wasm::WasmInterpreterRuntime::UpdateIndirectCallTable</a>(</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;              isolate, <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(instance-&gt;instance_object(), isolate),</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;              table_index);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Only update the current length after all allocations of sub-objects</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// (in particular: the new dispatch table) are done, so that heap verification</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// can assert that the dispatch table&#39;s length matches the table&#39;s length.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  table-&gt;set_current_length(new_size);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">for</span> (uint32_t entry = old_size; entry &lt; new_size; ++entry) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">WasmTableObject::Set</a>(isolate, table, entry, init_value);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">return</span> old_size;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#aaa393ceb64344c386d966b5b1c6e9a16">  328</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aaa393ceb64344c386d966b5b1c6e9a16">WasmTableObject::JSToWasmElement</a>(</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> entry, <span class="keyword">const</span> <span class="keywordtype">char</span>** error_message) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = !table-&gt;has_trusted_data()</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                 ? <a class="code" href="flag-definitions_8h.html#aca14fbede0905858c819226fce3678cc">nullptr</a></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                 : table-&gt;trusted_data(isolate)-&gt;module();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074">wasm::JSToWasmObject</a>(isolate, module, entry, table-&gt;type(module),</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                              error_message);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a4d17c6f8f0a18a656e9037595396372f">  338</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a4d17c6f8f0a18a656e9037595396372f">WasmTableObject::SetFunctionTableEntry</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                            <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                            <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                            <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> entry) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (IsWasmNull(*entry, isolate)) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    table-&gt;ClearDispatchTable(entry_index);  <span class="comment">// Degenerate case.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    table-&gt;entries()-&gt;set(entry_index, <a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>(isolate).wasm_null());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsWasmFuncRef(*entry));</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> external = <a class="code" href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a">WasmInternalFunction::GetOrCreateExternal</a>(</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmFuncRef&gt;(*entry)-&gt;internal(isolate), isolate));</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">WasmExportedFunction::IsWasmExportedFunction</a>(*external)) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">auto</span> exported_function = Cast&lt;WasmExportedFunction&gt;(external);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">auto</span> func_data = exported_function-&gt;shared()-&gt;wasm_exported_function_data();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> target_instance_data(</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        func_data-&gt;instance_data(), isolate);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordtype">int</span> func_index = func_data-&gt;function_index();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = target_instance_data-&gt;module();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a>(func_index, module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>.size());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">auto</span>* wasm_function = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>.data() + func_index;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">UpdateDispatchTable</a>(isolate, table, entry_index, wasm_function,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        target_instance_data</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        ,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        func_index</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    );</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">WasmJSFunction::IsWasmJSFunction</a>(*external)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">UpdateDispatchTable</a>(isolate, table, entry_index,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        Cast&lt;WasmJSFunction&gt;(external));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">WasmCapiFunction::IsWasmCapiFunction</a>(*external));</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">UpdateDispatchTable</a>(isolate, table, entry_index,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        Cast&lt;WasmCapiFunction&gt;(external));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  table-&gt;entries()-&gt;set(entry_index, *entry);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">// Note: This needs to be handlified because it can call {NewWasmImportData}.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">  379</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">WasmTableObject::Set</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                          uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> entry) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Callers need to perform bounds checks, type check, and error handling.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table-&gt;is_in_bounds(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> entries(table-&gt;entries(), isolate);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// The FixedArray is addressed with int&#39;s.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">int</span> entry_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a> = table-&gt;unsafe_type();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">has_index</a>()) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table-&gt;has_trusted_data());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">wasm::WasmModule</a>* module = table-&gt;trusted_data(isolate)-&gt;module();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a3afd8a65f37ef25ae73380555291ce94">has_signature</a>(table-&gt;type(module).ref_index())) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a4d17c6f8f0a18a656e9037595396372f">SetFunctionTableEntry</a>(isolate, table, entry_index, entry);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    entries-&gt;set(entry_index, *entry);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#af1a7ed1bec8df3c5d4b5717319edf55d">generic_kind</a>()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kExtern:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kString:</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kStringViewWtf8:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kStringViewWtf16:</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kStringViewIter:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kEq:</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1torque_1_1ls.html#afd5aaa8da6c9fbff1051077ef657d7f7aea5653220781a5615d141c669ca30213">wasm::GenericKind::kStruct</a>:</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kArray:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kAny:</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kI31:</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kNone:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kNoFunc:</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kNoExtern:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kExn:</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kNoExn:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kCont:</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kNoCont:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      entries-&gt;set(entry_index, *entry);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kFunc:</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a4d17c6f8f0a18a656e9037595396372f">SetFunctionTableEntry</a>(isolate, table, entry_index, entry);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kBottom:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kTop:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kVoid:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">case</span> wasm::GenericKind::kExternString:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#aa5e3c6d5c308301194a5fd89e6dd9e59">  431</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa5e3c6d5c308301194a5fd89e6dd9e59">WasmTableObject::Get</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                          <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                          uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> entries(table-&gt;entries(), isolate);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Callers need to perform bounds checks and error handling.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table-&gt;is_in_bounds(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// The FixedArray is addressed with int&#39;s.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordtype">int</span> entry_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> entry(entries-&gt;get(entry_index), isolate);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (IsWasmNull(*entry, isolate)) <span class="keywordflow">return</span> entry;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">if</span> (IsWasmFuncRef(*entry)) <span class="keywordflow">return</span> entry;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a> = table-&gt;unsafe_type();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">has_index</a>()) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table-&gt;has_trusted_data());</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = table-&gt;trusted_data(isolate)-&gt;module();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">wasm::ModuleTypeIndex</a> element_type = table-&gt;type(module).ref_index();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4d7f2eb3c584f9a7b9d79754dd29a315">has_array</a>(element_type) || module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aaf7eed69c6866ffacfec579a31b9fa3d">has_struct</a>(element_type)) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">return</span> entry;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a3afd8a65f37ef25ae73380555291ce94">has_signature</a>(element_type));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Fall through.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">unsafe_type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#af1a7ed1bec8df3c5d4b5717319edf55d">generic_kind</a>()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kStringViewWtf8:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kStringViewWtf16:</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kStringViewIter:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kExtern:</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kString:</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kEq:</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kI31:</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1torque_1_1ls.html#afd5aaa8da6c9fbff1051077ef657d7f7aea5653220781a5615d141c669ca30213">wasm::GenericKind::kStruct</a>:</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kArray:</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kAny:</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kNone:</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kNoFunc:</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kNoExtern:</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kExn:</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kNoExn:</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kCont:</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kNoCont:</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">return</span> entry;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kFunc:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// Placeholder; handled below.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kBottom:</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kTop:</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kVoid:</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">case</span> wasm::GenericKind::kExternString:</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// {entry} is not a valid entry in the table. It has to be a placeholder</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// for lazy initialization.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Tuple2&gt;</a> tuple = Cast&lt;Tuple2&gt;(entry);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keyword">auto</span> trusted_instance_data = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      Cast&lt;WasmInstanceObject&gt;(tuple-&gt;value1())-&gt;trusted_data(isolate),</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      isolate);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">int</span> function_index = Cast&lt;Smi&gt;(tuple-&gt;value2()).value();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// Create a WasmInternalFunction and WasmFuncRef for the function if it does</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// not exist yet, and store it in the table.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmFuncRef&gt;</a> func_ref =</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a27d1f1a3201baec4b9103b3bb27888b6">WasmTrustedInstanceData::GetOrCreateFuncRef</a>(</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          isolate, trusted_instance_data, function_index);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  entries-&gt;set(entry_index, *func_ref);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">return</span> func_ref;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#abd200bd6702d0b1d288516cb0f7173fc">  504</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#abd200bd6702d0b1d288516cb0f7173fc">WasmTableObject::Fill</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                           <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, uint32_t start,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                           <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> entry, uint32_t <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// Bounds checks must be done by the caller.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(start, table-&gt;current_length());</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="structv8_1_1internal_1_1count.html">count</a>, table-&gt;current_length());</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(start + <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, table-&gt;current_length());</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="structv8_1_1internal_1_1count.html">count</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">WasmTableObject::Set</a>(isolate, table, start + <a class="code" href="namespacev8_1_1internal.html">i</a>, entry);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#if V8_ENABLE_SANDBOX || DEBUG</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="keywordtype">bool</span> FunctionSigMatchesTable(<a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                             <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> table_type) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#aa459140e8766cc7f6bdf67dcd174ad1e">is_object_reference</a>());</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// When in-sandbox data is corrupted, we can&#39;t trust the statically</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// checked types; to prevent sandbox escapes, we have to verify actual</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// types before installing the dispatch table entry. There are three</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// alternative success conditions:</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// (1) Generic &quot;funcref&quot; tables can hold any function entry.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (!table_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">has_index</a>() &amp;&amp;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      table_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#af1a7ed1bec8df3c5d4b5717319edf55d">generic_kind</a>() == wasm::GenericKind::kFunc) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// (2) Most function types are expected to be final, so they can be compared</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">//     cheaply by canonicalized index equality.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  wasm::CanonicalTypeIndex canonical_table_type = table_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#ab58fc78ee1cd5b17394acbc1a9fb7225">ref_index</a>();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a>(sig_id == canonical_table_type)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// (3) In the remaining cases, perform the full subtype check.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">type_canonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a09f520b3ab3e3fa22827a66c4eebcb59">IsCanonicalSubtype</a>(</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      sig_id, canonical_table_type);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX || DEBUG</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">  541</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">WasmTableObject::UpdateDispatchTable</a>(</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">wasm::WasmFunction</a>* func,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> target_instance_data</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    ,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">int</span> target_func_index</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedObject&gt;</a> implicit_arg =</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#af8099247d56554096502101a9b7321be">imported</a></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;          <span class="comment">// The function in the target instance was imported. Use its imports</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;          <span class="comment">// table to look up the ref.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          ? <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;TrustedObject&gt;(</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                              target_instance_data-&gt;dispatch_table_for_imports()</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                  -&gt;implicit_arg(func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a8b451aaa09042c8dcc935d85f4fa0422">func_index</a>)),</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                          isolate)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          <span class="comment">// For wasm functions, just pass the target instance data.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          : target_instance_data;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (target_func_index &lt;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          target_instance_data-&gt;module()-&gt;num_imported_functions)) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    target_func_index = target_instance_data-&gt;imported_function_indices()-&gt;get(</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        target_func_index);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* target_module = target_instance_data-&gt;module();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id =</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      target_module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a80ed14bf76cb65cc93c6c9ba1b56f75c">canonical_sig_id</a>(func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a27c9b60862536d6bd685a1fb750bec1f">sig_index</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table(</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      table-&gt;trusted_dispatch_table(isolate), isolate);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(FunctionSigMatchesTable(sig_id, dispatch_table-&gt;table_type()));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_generic_wrapper &amp;&amp; IsWasmImportData(*implicit_arg)) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keyword">auto</span> import_data = Cast&lt;WasmImportData&gt;(implicit_arg);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    constexpr <span class="keywordtype">bool</span> kShared = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmImportData&gt;</a> new_import_data =</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmImportData(import_data, kShared);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    new_import_data-&gt;set_call_origin(*dispatch_table);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    new_import_data-&gt;set_table_slot(entry_index);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    implicit_arg = new_import_data;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  std::optional&lt;std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt;&gt; maybe_wrapper =</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      target_instance_data-&gt;dispatch_table_for_imports()-&gt;MaybeGetWrapperHandle(</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a8b451aaa09042c8dcc935d85f4fa0422">func_index</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">if</span> (maybe_wrapper) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(IsWasmImportData(*implicit_arg));</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    dispatch_table-&gt;SetForWrapper(entry_index,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                  Cast&lt;WasmImportData&gt;(*implicit_arg),</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                  *maybe_wrapper, sig_id,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                  target_func_index,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;#endif</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                  <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (IsWasmImportData(*implicit_arg)) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      dispatch_table-&gt;SetForWrapper(</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          entry_index, Cast&lt;WasmImportData&gt;(*implicit_arg), {}, sig_id,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          target_func_index, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      dispatch_table-&gt;SetForNonWrapper(</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          entry_index, Cast&lt;WasmTrustedInstanceData&gt;(*implicit_arg), {}, sig_id,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          target_func_index, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses = dispatch_table-&gt;protected_uses();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordtype">int</span> used_length = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; used_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> instance = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">GetInstance</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (instance-&gt;has_interpreter_object()) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordtype">int</span> table_index = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">GetTableIndex</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a32a62b50d2670eff6682c2d356b8f5c4">wasm::WasmInterpreterRuntime::UpdateIndirectCallTable</a>(</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            isolate, <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(instance-&gt;instance_object(), isolate),</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            table_index);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(IsWasmTrustedInstanceData(*implicit_arg));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    dispatch_table-&gt;SetForNonWrapper(</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        entry_index, Cast&lt;WasmTrustedInstanceData&gt;(*implicit_arg),</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        target_instance_data-&gt;GetCallTarget(func-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a8b451aaa09042c8dcc935d85f4fa0422">func_index</a>), sig_id,</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        target_func_index,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;#endif</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00638"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a1d4d2376f066e51065d0d07be8b24304">  638</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">WasmTableObject::UpdateDispatchTable</a>(</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmJSFunction&gt;</a> <span class="keyword">function</span>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmJSFunctionData&gt;</a> function_data =</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keyword">function</span>-&gt;shared()-&gt;wasm_js_function_data();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id = function_data-&gt;sig_index();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table(</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      table-&gt;trusted_dispatch_table(isolate), isolate);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(FunctionSigMatchesTable(sig_id, dispatch_table-&gt;table_type()));</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle =</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      function_data-&gt;offheap_data()-&gt;wrapper_handle();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmImportData&gt;</a> import_data(</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      Cast&lt;WasmImportData&gt;(function_data-&gt;internal()-&gt;implicit_arg()), isolate);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="classuintptr__t.html">Address</a> call_target =</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">wasm::GetProcessWideWasmCodePointerTable</a>()</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;          -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65882a1f49bd2c6a667cd3054f3dc2e2">GetEntrypointWithoutSignatureCheck</a>(wrapper_handle-&gt;code_pointer());</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (wrapper_handle-&gt;has_code()) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(wrapper_handle-&gt;code().instruction_start(), call_target);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">type_canonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">LookupFunctionSignature</a>(</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            sig_id);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// We still don&#39;t have a compiled wrapper. Allocate a new import_data</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// so we can store the proper call_origin for later wrapper tier-up.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(call_target ==</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;               <a class="code" href="classv8_1_1internal_1_1Builtins.html#a47a260ae04bebdcad714c481a3cd3553">Builtins::EmbeddedEntryOf</a>(Builtin::kWasmToJsWrapperAsm) ||</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;           call_target ==</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;               <a class="code" href="classv8_1_1internal_1_1Builtins.html#a47a260ae04bebdcad714c481a3cd3553">Builtins::EmbeddedEntryOf</a>(Builtin::kWasmToJsWrapperInvalidSig));</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    constexpr <span class="keywordtype">bool</span> kShared = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">wasm::Suspend</a> suspend = function_data-&gt;GetSuspend();</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    import_data = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmImportData(</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keyword">function</span>, suspend, <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmTrustedInstanceData&gt;</a>{}, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        kShared);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    import_data-&gt;SetIndexInTableAsCallOrigin(*dispatch_table, entry_index);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(wrapper_handle-&gt;has_code() ||</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;         call_target ==</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;             <a class="code" href="classv8_1_1internal_1_1Builtins.html#a47a260ae04bebdcad714c481a3cd3553">Builtins::EmbeddedEntryOf</a>(Builtin::kWasmToJsWrapperAsm) ||</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         call_target ==</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;             <a class="code" href="classv8_1_1internal_1_1Builtins.html#a47a260ae04bebdcad714c481a3cd3553">Builtins::EmbeddedEntryOf</a>(Builtin::kWasmToJsWrapperInvalidSig));</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  dispatch_table-&gt;SetForWrapper(entry_index, *import_data, wrapper_handle,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                sig_id,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                WasmDispatchTable::kInvalidFunctionIndex,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a30fb6d462d77b86690d5acd49aea4b01">  694</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">WasmTableObject::UpdateDispatchTable</a>(</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmCapiFunction&gt;</a> capi_function) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmCapiFunctionData&gt;</a> func_data(</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      capi_function-&gt;shared()-&gt;wasm_capi_function_data(), isolate);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = func_data-&gt;sig();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02read-only-promotion_8cc_03.html#a996ff47de27ce5f127bdcc0bff48b7f9">Contains</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>));</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_index = func_data-&gt;sig_index();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html">wasm::WasmImportWrapperCache</a>* cache = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">wasm::GetWasmImportWrapperCache</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keyword">auto</span> kind = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa7f5686cf8a9e0b7053c4d28dde68020f">wasm::ImportCallKind::kWasmToCapi</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordtype">int</span> param_count = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count());</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle =</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      cache-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a83ced6511f55c6c4dca7707e21eb1d2d">GetCompiled</a>(isolate, kind, sig_index, param_count,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                         <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843aac51012268661bd5ae03450b2207e5d83">wasm::kNoSuspend</a>, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmImportData&gt;</a> implicit_arg =</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      Cast&lt;WasmImportData&gt;(func_data-&gt;internal()-&gt;implicit_arg());</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmDispatchTable&gt;</a> dispatch_table =</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      table-&gt;trusted_dispatch_table(isolate);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(FunctionSigMatchesTable(sig_index, dispatch_table-&gt;table_type()));</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  dispatch_table-&gt;SetForWrapper(entry_index, implicit_arg, wrapper_handle,</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                                sig_index,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                WasmDispatchTable::kInvalidFunctionIndex,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a0d4796d0039b7a60188d70af68ef3c0b">  724</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a0d4796d0039b7a60188d70af68ef3c0b">WasmTableObject::ClearDispatchTable</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate = <a class="code" href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">Isolate::Current</a>();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmDispatchTable&gt;</a> dispatch_table = <a class="code" href="namespacev8_1_1internal.html#a79552c2014f70cf733dc4b55bbd46d64">trusted_dispatch_table</a>(isolate);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  dispatch_table-&gt;Clear(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses = dispatch_table-&gt;protected_uses();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">int</span> used_length = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; used_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> non_shared_instance_data =</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">GetInstance</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">if</span> (non_shared_instance_data-&gt;has_interpreter_object()) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordtype">int</span> table_index = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">GetTableIndex</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInstanceObject&gt;</a> instance_handle(</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            non_shared_instance_data-&gt;instance_object(), isolate);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a0eb4e3dabf7592236408a50ae7fdb88d">wasm::WasmInterpreterRuntime::ClearIndirectCallCacheEntry</a>(</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            isolate, instance_handle, table_index, <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#ada0ac8e1ab7d1e365edd372d6b02c53d">  750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#ada0ac8e1ab7d1e365edd372d6b02c53d">WasmTableObject::SetFunctionTablePlaceholder</a>(</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordtype">int</span> func_index) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// Put (instance, func_index) as a Tuple2 into the entry_index.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// The {WasmExportedFunction} will be created lazily.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// Allocate directly in old space as the tuples are typically long-lived, and</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// we create many of them, which would result in lots of GC when initializing</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// large tables.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// TODO(42204563): Avoid crashing if the instance object is not available.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trusted_instance_data-&gt;has_instance_object());</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Tuple2&gt;</a> tuple = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a532adb2efc73755fa0e8c9431d49635d">NewTuple2</a>(</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(trusted_instance_data-&gt;instance_object(), isolate),</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(<a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(func_index), isolate), <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  table-&gt;entries()-&gt;set(entry_index, *tuple);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTableObject.html#a155821336cf0ba7fe765cc56e972c22a">  768</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#a155821336cf0ba7fe765cc56e972c22a">WasmTableObject::GetFunctionTableEntry</a>(</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table, <span class="keywordtype">int</span> entry_index,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordtype">bool</span>* is_valid, <span class="keywordtype">bool</span>* is_null,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmTrustedInstanceData&gt;</a>* <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordtype">int</span>* function_index, <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmJSFunction&gt;</a>* maybe_js_function) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">if</span> (table-&gt;has_trusted_data()) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">wasm::WasmModule</a>* module = table-&gt;trusted_data(isolate)-&gt;module();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3c8e5205c40b2156097780fb9e7d3f7b">wasm::IsSubtypeOf</a>(table-&gt;type(module), <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a90941f620285a912a302a3aced092560">wasm::kWasmFuncRef</a>, module));</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">// A function table defined outside a module may only have type exactly</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// {funcref}.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(table-&gt;unsafe_type() == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a90941f620285a912a302a3aced092560">wasm::kWasmFuncRef</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(entry_index, table-&gt;current_length());</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// We initialize {is_valid} with {true}. We may change it later.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  *is_valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> element(table-&gt;entries()-&gt;get(entry_index), isolate);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  *is_null = IsWasmNull(*element, isolate);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (*is_null) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (IsWasmFuncRef(*element)) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInternalFunction&gt;</a> <span class="keyword">internal</span>{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        Cast&lt;WasmFuncRef&gt;(*element)-&gt;internal(isolate), isolate};</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    element = <a class="code" href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a">WasmInternalFunction::GetOrCreateExternal</a>(<span class="keyword">internal</span>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">WasmExportedFunction::IsWasmExportedFunction</a>(*element)) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keyword">auto</span> target_func = Cast&lt;WasmExportedFunction&gt;(element);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keyword">auto</span> func_data = Cast&lt;WasmExportedFunctionData&gt;(</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        target_func-&gt;shared()-&gt;wasm_exported_function_data());</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    *<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a> = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(func_data-&gt;instance_data(), isolate);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    *function_index = func_data-&gt;function_index();</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    *maybe_js_function = <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmJSFunction&gt;</a>();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">WasmJSFunction::IsWasmJSFunction</a>(*element)) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    *<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a> = <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmTrustedInstanceData&gt;</a>();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    *maybe_js_function = Cast&lt;WasmJSFunction&gt;(element);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (IsTuple2(*element)) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keyword">auto</span> tuple = Cast&lt;Tuple2&gt;(element);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    *<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a> = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        Cast&lt;WasmInstanceObject&gt;(tuple-&gt;value1())-&gt;trusted_data(isolate),</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        isolate);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    *function_index = Cast&lt;Smi&gt;(tuple-&gt;value2()).value();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    *maybe_js_function = <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmJSFunction&gt;</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  *is_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmSuspendingObject.html#a07464f83ede52a8147f4d4bb36c4123d">  822</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmSuspendingObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmSuspendingObject.html#a07464f83ede52a8147f4d4bb36c4123d">WasmSuspendingObject::New</a>(</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSReceiver&gt;</a> callable) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> suspending_ctor(</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_suspending_constructor(), isolate);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keyword">auto</span> suspending_obj = Cast&lt;WasmSuspendingObject&gt;(</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(suspending_ctor));</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  suspending_obj-&gt;set_callable(*callable);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">return</span> suspending_obj;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">  834</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">SetInstanceMemory</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSArrayBuffer&gt;</a> buffer, <span class="keywordtype">int</span> memory_index) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowHeapAllocation</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = trusted_instance_data-&gt;module();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html">wasm::WasmMemory</a>&amp; memory = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a2db4294c50e9d81d12819ce61ababaec">memories</a>[memory_index];</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordtype">bool</span> is_wasm_module = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">wasm::kWasmOrigin</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordtype">bool</span> use_trap_handler = memory.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html#a2f28747332d5adbb45a11c870b46c24c">bounds_checks</a> == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aaca6d9503a7b3a8f1d6e319b19baca66a6c3b400bf8685e810f458dfd466cf006">wasm::kTrapHandler</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// Asm.js does not use trap handling.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(use_trap_handler, is_wasm_module);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// ArrayBuffers allocated for Wasm do always have a BackingStore.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(is_wasm_module, backing_store);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(is_wasm_module, backing_store-&gt;is_wasm_memory());</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// Wasm modules compiled to use the trap handler don&#39;t have bounds checks,</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// so they must have a memory that has guard regions.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">// Note: This CHECK can fail when in-sandbox corruption modified a</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// WasmMemoryObject. We currently believe that this would at worst</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// corrupt the contents of other Wasm memories or ArrayBuffers, but having</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// this CHECK in release mode is nice as an additional layer of defense.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(use_trap_handler, backing_store-&gt;has_guard_regions());</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// We checked this before, but a malicious worker thread with an in-sandbox</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// corruption primitive could have modified it since then.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordtype">size_t</span> byte_length = buffer-&gt;GetByteLength();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="check_8h.html#aec752d98ed7d655aa8ced64592c346d5">SBXCHECK_GE</a>(byte_length, memory.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html#a3f8ff3b6fc9def96c415b2a54770a3a2">min_memory_size</a>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  trusted_instance_data-&gt;SetRawMemory(</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      memory_index, <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(buffer-&gt;backing_store()),</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      byte_length);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless &amp;&amp;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      trusted_instance_data-&gt;has_interpreter_object()) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">AllowHeapAllocation</a> allow_heap;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate = <a class="code" href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">Isolate::Current</a>();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> scope(isolate);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a48114bb1dcdac00eb8d8d1ea88929540">wasm::WasmInterpreterRuntime::UpdateMemoryAddress</a>(</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(trusted_instance_data-&gt;instance_object(), isolate));</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab10298844a3a2e6993fc6f3634eaf898">  878</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab10298844a3a2e6993fc6f3634eaf898">WasmMemoryObject::New</a>(</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> buffer, <span class="keywordtype">int</span> maximum,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">wasm::AddressType</a> address_type) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> memory_ctor(</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_memory_constructor(), isolate);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keyword">auto</span> memory_object = Cast&lt;WasmMemoryObject&gt;(</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(memory_ctor, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>));</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  memory_object-&gt;set_array_buffer(*buffer);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  memory_object-&gt;set_maximum_pages(maximum);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  memory_object-&gt;set_address_type(address_type);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  memory_object-&gt;set_padding_for_address_type_0(0);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  memory_object-&gt;set_padding_for_address_type_1(0);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">#if TAGGED_SIZE_8_BYTES</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  memory_object-&gt;set_padding_for_address_type_2(0);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  memory_object-&gt;set_instances(<a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>{isolate}.empty_weak_array_list());</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (buffer-&gt;is_resizable_by_js()) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    memory_object-&gt;FixUpResizableArrayBuffer(*buffer);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">if</span> (buffer-&gt;is_shared()) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// Only Wasm memory can be shared (in contrast to asm.js memory).</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(backing_store &amp;&amp; backing_store-&gt;is_wasm_memory());</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    backing_store-&gt;AttachSharedWasmMemoryObject(isolate, memory_object);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (backing_store) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!backing_store-&gt;is_shared());</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// instance.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Symbol&gt;</a> symbol =</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;array_buffer_wasm_memory_symbol();</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Object.html#a2e8108d7b7d2b826ab90a71b20be7a9d">Object::SetProperty</a>(isolate, buffer, symbol, memory_object).Check();</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">return</span> memory_object;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a6308dc98ea5bcf03a11a988ed2d29c53">  918</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmMemoryObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab10298844a3a2e6993fc6f3634eaf898">WasmMemoryObject::New</a>(</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keywordtype">int</span> initial, <span class="keywordtype">int</span> maximum, <a class="code" href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160">SharedFlag</a> shared,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">wasm::AddressType</a> address_type) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordtype">bool</span> has_maximum = maximum != <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a65b8addcf2135f693f3f83a8acf74aa7">kNoMaximum</a>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordtype">int</span> engine_maximum = address_type == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0">wasm::AddressType::kI64</a></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                           ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a4326f4455d83a545760a1048f2d6b122">wasm::max_mem64_pages</a>())</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                           : <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a2c6edd5180c4a1c2a0454eaac389dc1f">wasm::max_mem32_pages</a>());</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">if</span> (initial &gt; engine_maximum) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="preprocessor">#ifdef V8_TARGET_ARCH_32_BIT</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// On 32-bit platforms we need an heuristic here to balance overall memory</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// and address space consumption.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  constexpr <span class="keywordtype">int</span> kGBPages = 1024 * 1024 * 1024 / <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// We allocate the smallest of the following sizes, but at least the initial</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// size:</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// 1) the module-defined maximum;</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// 2) 1GB;</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// 3) the engine maximum;</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordtype">int</span> allocation_maximum = std::min(kGBPages, engine_maximum);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordtype">int</span> heuristic_maximum;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (initial &gt; kGBPages) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// We always allocate at least the initial size.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    heuristic_maximum = initial;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_maximum) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// We try to reserve the maximum, but at most the allocation_maximum to</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="comment">// avoid OOMs.</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    heuristic_maximum = std::min(maximum, allocation_maximum);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shared == <a class="code" href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16">SharedFlag::kShared</a>) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// If shared memory has no maximum, we use the allocation_maximum as an</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// implicit maximum.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    heuristic_maximum = allocation_maximum;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// If non-shared memory has no maximum, we only allocate the initial size</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="comment">// and then grow with realloc.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    heuristic_maximum = initial;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordtype">int</span> heuristic_maximum =</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      has_maximum ? std::min(engine_maximum, maximum) : engine_maximum;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  std::unique_ptr&lt;BackingStore&gt; backing_store =</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      BackingStore::AllocateWasmMemory(isolate, initial, heuristic_maximum,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                       address_type == <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">wasm::AddressType::kI32</a></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                           ? <a class="code" href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412">WasmMemoryFlag::kWasmMemory32</a></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                           : <a class="code" href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913">WasmMemoryFlag::kWasmMemory64</a>,</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                       shared);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keywordflow">if</span> (!backing_store) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> buffer =</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      shared == <a class="code" href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16">SharedFlag::kShared</a></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;          ? isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a590cfed2fdf00318861bd31d70909ef1">NewJSSharedArrayBuffer</a>(std::move(backing_store))</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          : isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#ad8628a3ae8c2623d4f4679134b930381">NewJSArrayBuffer</a>(std::move(backing_store));</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab10298844a3a2e6993fc6f3634eaf898">New</a>(isolate, buffer, maximum, address_type);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a83af2a10e27026f8c76e91833243e5f5">  978</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a83af2a10e27026f8c76e91833243e5f5">WasmMemoryObject::UseInInstance</a>(</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> shared_trusted_instance_data,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordtype">int</span> memory_index_in_instance) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">SetInstanceMemory</a>(*trusted_instance_data, memory-&gt;array_buffer(),</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    memory_index_in_instance);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">if</span> (!shared_trusted_instance_data.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">is_null</a>()) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">SetInstanceMemory</a>(*shared_trusted_instance_data, memory-&gt;array_buffer(),</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                      memory_index_in_instance);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WeakArrayList&gt;</a> instances{memory-&gt;instances(), isolate};</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keyword">auto</span> weak_instance_object = <a class="code" href="classv8_1_1internal_1_1MaybeObjectDirectHandle.html#af39f668bdaaf25432eb7cdbc4066f4d6">MaybeObjectDirectHandle::Weak</a>(</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      trusted_instance_data-&gt;instance_object(), isolate);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  instances = <a class="code" href="classv8_1_1internal_1_1WeakArrayList.html#aa986929cdb53581c4198099a06376487">WeakArrayList::Append</a>(isolate, instances, weak_instance_object);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  memory-&gt;set_instances(*instances);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a97b4ba7ad14c6f986087c0cd437f108a">  996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a97b4ba7ad14c6f986087c0cd437f108a">WasmMemoryObject::SetNewBuffer</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSArrayBuffer&gt;</a> new_buffer) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> new_buffer_is_resizable_by_js = new_buffer-&gt;is_resizable_by_js();</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (new_buffer_is_resizable_by_js) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ae99a8b8f00da43fbbbe34eaa7a187225">FixUpResizableArrayBuffer</a>(*new_buffer);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSArrayBuffer&gt;</a> old_buffer = array_buffer();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  set_array_buffer(new_buffer);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// Iterating and updating all instances is a slow operation, and is required</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// when the pointer to memory or size of memory changes.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// When refreshing the buffer for changing the resizability of the JS-exposed</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// (S)AB, both the data pointer and size stay the same, only the JS object</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// changes.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// When refreshing the buffer for growing a memory exposing a fixed-length</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// (S)AB (i.e. both the old and new buffers are !is_resizable_by_js()), the</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// size is changing, and updating the instances is needed.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// This function is never called in a way such that both the old and new</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// (S)ABs are resizable. Once a Wasm memory exposes a resizable (S)AB,</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// changing the size does not refresh the buffer.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!old_buffer-&gt;is_resizable_by_js() ||</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;         !new_buffer-&gt;is_resizable_by_js());</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">if</span> (!old_buffer-&gt;is_resizable_by_js() &amp;&amp; !new_buffer_is_resizable_by_js) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ad61fd836f186cfadacfaf1d000424a4a">UpdateInstances</a>(isolate);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#ad61fd836f186cfadacfaf1d000424a4a"> 1026</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ad61fd836f186cfadacfaf1d000424a4a">WasmMemoryObject::UpdateInstances</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WeakArrayList&gt;</a> instances = this-&gt;instances();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0, len = instances-&gt;length(); <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; len; ++<a class="code" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;MaybeObject&gt;</a> elem = instances-&gt;Get(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> (elem.<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmInstanceObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a> =</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        Cast&lt;WasmInstanceObject&gt;(elem.<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#af954049cb1526fdcdff6faad97f5fbac">GetHeapObjectAssumeWeak</a>());</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> trusted_data =</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>-&gt;trusted_data(isolate);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// TODO(clemens): Avoid the iteration by also remembering the memory index</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// if we ever see larger numbers of memories.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">memory_objects</a> = trusted_data-&gt;memory_objects();</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordtype">int</span> num_memories = <a class="code" href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">memory_objects</a>-&gt;length();</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mem_idx = 0; mem_idx &lt; num_memories; ++mem_idx) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">memory_objects</a>-&gt;get(mem_idx) == *<span class="keyword">this</span>) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">SetInstanceMemory</a>(trusted_data, array_buffer(), mem_idx);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;}</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#ae99a8b8f00da43fbbbe34eaa7a187225"> 1048</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ae99a8b8f00da43fbbbe34eaa7a187225">WasmMemoryObject::FixUpResizableArrayBuffer</a>(</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSArrayBuffer&gt;</a> new_buffer) {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a7ce26bf7f45ae37057ae2017749b25bf">has_maximum_pages</a>());</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(new_buffer-&gt;is_resizable_by_js());</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (new_buffer-&gt;is_shared()) new_buffer-&gt;set_byte_length(0);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// Unlike JS-created resizable buffers, Wasm memories&#39; backing store maximum</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// may differ from the exposed maximum.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> max_byte_length;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> constexpr (<a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a> == 4) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// The spec says the maximum number of pages for 32-bit memories is 65536,</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// which means the maximum byte size is 65536 * 65536 (= 2^32), which is</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// UINT32_MAX+1. BackingStores, ArrayBuffers, and TypedArrays represent byte</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">// lengths as uintptr_t, and UINT32_MAX+1 is not representable on 32bit.</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// As a willful violation and gross hack, if we&#39;re exposing a Wasm memory</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// with an unrepresentable maximum, subtract one page size.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    uint64_t max_byte_length64 =</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(maximum_pages()) * <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (max_byte_length64 &gt; std::numeric_limits&lt;uintptr_t&gt;::max()) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      max_byte_length64 =</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;          std::numeric_limits&lt;uintptr_t&gt;::max() - <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(new_buffer-&gt;GetBackingStore()-&gt;max_byte_length() &lt;=</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            max_byte_length64);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    max_byte_length = <span class="keyword">static_cast&lt;</span><a class="code" href="classuintptr__t.html">uintptr_t</a><span class="keyword">&gt;</span>(max_byte_length64);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    max_byte_length = maximum_pages() * <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  new_buffer-&gt;set_max_byte_length(max_byte_length);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4"> 1081</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">WasmMemoryObject::RefreshBuffer</a>(</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory_object,</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    std::shared_ptr&lt;BackingStore&gt; new_backing_store) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// Detach old and create a new one with the new backing store.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> old_buffer(memory_object-&gt;array_buffer(),</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                         isolate);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordtype">void</span>* old_data_pointer = old_buffer-&gt;backing_store();</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordtype">size_t</span> old_byte_length = old_buffer-&gt;byte_length();</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="classv8_1_1internal_1_1JSArrayBuffer.html#a98d48c4b2a6e4e7d80037a26ed2de8ff">JSArrayBuffer::Detach</a>(old_buffer, <span class="keyword">true</span>).Check();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> new_buffer =</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#ad8628a3ae8c2623d4f4679134b930381">NewJSArrayBuffer</a>(std::move(new_backing_store));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keywordtype">bool</span> data_pointer_unchanged = new_buffer-&gt;backing_store() == old_data_pointer;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keywordtype">bool</span> byte_length_unchanged = new_buffer-&gt;byte_length() == old_byte_length;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordtype">bool</span> resizability_changed =</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      old_buffer-&gt;is_resizable_by_js() != new_buffer-&gt;is_resizable_by_js();</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// SetNewBuffer only calls UpdateInstances if resizability didn&#39;t change,</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// which depends on resizability changing not changing the data pointer or</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// byte length. See comment in SetNewBuffer.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(resizability_changed,</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                 data_pointer_unchanged &amp;&amp; byte_length_unchanged);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  memory_object-&gt;SetNewBuffer(isolate, *new_buffer);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// instance.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Symbol&gt;</a> symbol =</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;array_buffer_wasm_memory_symbol();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Object.html#a2e8108d7b7d2b826ab90a71b20be7a9d">Object::SetProperty</a>(isolate, new_buffer, symbol, memory_object).Check();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">return</span> new_buffer;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;}</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a0df25b331079bfa7ca55891d84d1a511"> 1115</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a0df25b331079bfa7ca55891d84d1a511">WasmMemoryObject::RefreshSharedBuffer</a>(</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory_object,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348">ResizableFlag</a> resizable_by_js) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> old_buffer(memory_object-&gt;array_buffer(),</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                                         isolate);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = old_buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// Wasm memory always has a BackingStore.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a9154b181227e4b02e465befe50219158">CHECK_NOT_NULL</a>(backing_store);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(backing_store-&gt;is_wasm_memory());</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(backing_store-&gt;is_shared());</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// Keep a raw pointer to the backing store for a CHECK later one. Make it</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// {void*} so we do not accidentally try to use it for anything else.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordtype">void</span>* expected_backing_store = backing_store.get();</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> new_buffer =</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a590cfed2fdf00318861bd31d70909ef1">NewJSSharedArrayBuffer</a>(std::move(backing_store));</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(expected_backing_store, new_buffer-&gt;GetBackingStore().get());</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordflow">if</span> (resizable_by_js == <a class="code" href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0">ResizableFlag::kResizable</a>) {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    new_buffer-&gt;set_is_resizable_by_js(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  memory_object-&gt;SetNewBuffer(isolate, *new_buffer);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// instance.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Symbol&gt;</a> symbol =</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;array_buffer_wasm_memory_symbol();</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Object.html#a2e8108d7b7d2b826ab90a71b20be7a9d">Object::SetProperty</a>(isolate, new_buffer, symbol, memory_object).Check();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> new_buffer;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab04a12b70d33ad72a3442d2a21bbfff7"> 1146</a></span>&#160;<a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#ab04a12b70d33ad72a3442d2a21bbfff7">WasmMemoryObject::Grow</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                               <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory_object,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                               uint32_t pages) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.GrowMemory&quot;</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> old_buffer(memory_object-&gt;array_buffer(),</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                                         isolate);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = old_buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// Wasm memory can grow, and Wasm memory always has a backing store.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(backing_store);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// Check for maximum memory size.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// Note: The {wasm::max_mem_pages()} limit is already checked in</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// {BackingStore::CopyWasmMemory}, and is irrelevant for</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// {GrowWasmMemoryInPlace} because memory is never allocated with more</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// capacity than that limit.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordtype">size_t</span> old_size = old_buffer-&gt;GetByteLength();</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, old_size % <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordtype">size_t</span> old_pages = old_size / <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordtype">size_t</span> max_pages = memory_object-&gt;is_memory64() ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a4326f4455d83a545760a1048f2d6b122">wasm::max_mem64_pages</a>()</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                                  : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a2c6edd5180c4a1c2a0454eaac389dc1f">wasm::max_mem32_pages</a>();</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">if</span> (memory_object-&gt;has_maximum_pages()) {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    max_pages = std::min(max_pages,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(memory_object-&gt;maximum_pages()));</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(max_pages, old_pages);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordflow">if</span> (pages &gt; max_pages - old_pages) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> must_grow_in_place =</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      old_buffer-&gt;is_shared() || backing_store-&gt;has_guard_regions() ||</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      backing_store-&gt;is_resizable_by_js() || pages == 0;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> try_grow_in_place =</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      must_grow_in_place || !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_wasm_memory_moving;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  std::optional&lt;size_t&gt; result_inplace =</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      try_grow_in_place</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;          ? backing_store-&gt;GrowWasmMemoryInPlace(isolate, pages, max_pages)</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;          : std::nullopt;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (must_grow_in_place &amp;&amp; !result_inplace.has_value()) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// There are different limits per platform, thus crash if the correctness</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// fuzzer is running.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.correctness_fuzzer_suppressions) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;could not grow wasm memory&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// Handle shared memory first.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">if</span> (old_buffer-&gt;is_shared()) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(result_inplace.has_value());</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    backing_store-&gt;BroadcastSharedWasmMemoryGrow(isolate);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> (!old_buffer-&gt;is_resizable_by_js()) {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">// Broadcasting the update should update this memory object too.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(*old_buffer, memory_object-&gt;array_buffer());</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordtype">size_t</span> new_pages = result_inplace.value() + pages;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// If the allocation succeeded, then this can&#39;t possibly overflow:</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordtype">size_t</span> new_byte_length = new_pages * <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="comment">// This is a less than check, as it is not guaranteed that the SAB</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// length here will be equal to the stashed length above as calls to</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// grow the same memory object can come in from different workers.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// It is also possible that a call to Grow was in progress when</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">// handling this call.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(new_byte_length, memory_object-&gt;array_buffer()-&gt;GetByteLength());</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// As {old_pages} was read racefully, we return here the synchronized</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// value provided by {GrowWasmMemoryInPlace}, to provide the atomic</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="comment">// read-modify-write behavior required by the spec.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a><span class="keyword">&gt;</span>(result_inplace.value());  <span class="comment">// success</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordtype">size_t</span> new_pages = old_pages + pages;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// Check for overflow (should be excluded via {max_pages} above).</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(old_pages, new_pages);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// Check if the non-shared memory could grow in-place.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (result_inplace.has_value()) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (memory_object-&gt;array_buffer()-&gt;is_resizable_by_js()) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      memory_object-&gt;array_buffer()-&gt;set_byte_length(new_pages *</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                                                     <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">wasm::kWasmPageSize</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      memory_object-&gt;UpdateInstances(isolate);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">RefreshBuffer</a>(isolate, memory_object, std::move(backing_store));</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(result_inplace.value(), old_pages);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a><span class="keyword">&gt;</span>(result_inplace.value());  <span class="comment">// success</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!memory_object-&gt;array_buffer()-&gt;is_resizable_by_js());</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// We should only try growing by copying if we actually grow.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(old_pages, new_pages);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// Try allocating a new backing store and copying.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// To avoid overall quadratic complexity of many small grow operations, we</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// grow by at least 0.5 MB + 12.5% of the existing memory size.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// These numbers are kept small because we must be careful about address</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// space consumption on 32-bit platforms.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordtype">size_t</span> min_growth = old_pages + 8 + (old_pages &gt;&gt; 3);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// First apply {min_growth}, then {max_pages}. The order is important, because</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// {min_growth} can be bigger than {max_pages}, and in that case we want to</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// cap to {max_pages}.</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordtype">size_t</span> new_capacity = std::min(max_pages, std::max(new_pages, min_growth));</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(new_pages, new_capacity);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  std::unique_ptr&lt;BackingStore&gt; new_backing_store =</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      backing_store-&gt;CopyWasmMemory(isolate, new_pages, new_capacity,</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                                    memory_object-&gt;is_memory64()</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                                        ? <a class="code" href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913">WasmMemoryFlag::kWasmMemory64</a></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                        : <a class="code" href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412">WasmMemoryFlag::kWasmMemory32</a>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">if</span> (!new_backing_store) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// Crash on out-of-memory if the correctness fuzzer is running.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.correctness_fuzzer_suppressions) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;could not grow wasm memory&quot;</span>);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// Set the non-determinism flag in the WasmEngine.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a97fb0af7b57585ca92456077115b16a7">wasm::WasmEngine::set_had_nondeterminism</a>();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">RefreshBuffer</a>(isolate, memory_object, std::move(new_backing_store));</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a><span class="keyword">&gt;</span>(old_pages);  <span class="comment">// success</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;}</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a11123e674ed260e849a726396a6b1f3c"> 1269</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a11123e674ed260e849a726396a6b1f3c">WasmMemoryObject::ToFixedLengthBuffer</a>(</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory_object) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> old_buffer(memory_object-&gt;array_buffer(),</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                                         isolate);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(old_buffer-&gt;is_resizable_by_js());</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keywordflow">if</span> (old_buffer-&gt;is_shared()) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a0df25b331079bfa7ca55891d84d1a511">RefreshSharedBuffer</a>(isolate, memory_object,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                               <a class="code" href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348af444d0c6959a4f4e0553ccd4f9f35908">ResizableFlag::kNotResizable</a>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = old_buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(backing_store);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  backing_store-&gt;MakeWasmMemoryResizableByJS(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">RefreshBuffer</a>(isolate, memory_object, std::move(backing_store));</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryObject.html#a32101d7a077535dadf31d9373ec3a6f2"> 1285</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a32101d7a077535dadf31d9373ec3a6f2">WasmMemoryObject::ToResizableBuffer</a>(</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory_object) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// Resizable ArrayBuffers require a maximum size during creation. Mirror the</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">// requirement when reflecting Wasm memory as a resizable buffer.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(memory_object-&gt;has_maximum_pages());</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> old_buffer(memory_object-&gt;array_buffer(),</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                         isolate);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!old_buffer-&gt;is_resizable_by_js());</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (old_buffer-&gt;is_shared()) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a0df25b331079bfa7ca55891d84d1a511">RefreshSharedBuffer</a>(isolate, memory_object,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                               <a class="code" href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0">ResizableFlag::kResizable</a>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  std::shared_ptr&lt;BackingStore&gt; backing_store = old_buffer-&gt;GetBackingStore();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(backing_store);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  backing_store-&gt;MakeWasmMemoryResizableByJS(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">RefreshBuffer</a>(isolate, memory_object, std::move(backing_store));</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmMemoryMapDescriptor&gt;</a></div>
<div class="line"><a name="l01304"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a5d494fe23259c204fea87f6e5eefb391"> 1304</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a5d494fe23259c204fea87f6e5eefb391">WasmMemoryMapDescriptor::NewFromAnonymous</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="preprocessor">#if V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory_control);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> descriptor_ctor(</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_memory_map_descriptor_constructor(),</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      isolate);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordtype">int</span> file_descriptor = memfd_create(<span class="stringliteral">&quot;wasm_memory_map_descriptor&quot;</span>, MFD_CLOEXEC);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">if</span> (file_descriptor == -1) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordtype">int</span> ret_val = ftruncate(file_descriptor, <a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">if</span> (ret_val == -1) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a9ec548948b1d7bb30d31749ef162f145">NewFromFileDescriptor</a>(isolate, file_descriptor);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="preprocessor">#else   </span><span class="comment">// V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;}</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryMapDescriptor&gt;</a></div>
<div class="line"><a name="l01327"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a9ec548948b1d7bb30d31749ef162f145"> 1327</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a9ec548948b1d7bb30d31749ef162f145">WasmMemoryMapDescriptor::NewFromFileDescriptor</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                                               <span class="keywordtype">int</span> file_descriptor) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory_control);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> descriptor_ctor(</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_memory_map_descriptor_constructor(),</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      isolate);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keyword">auto</span> descriptor_object = Cast&lt;WasmMemoryMapDescriptor&gt;(</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(descriptor_ctor, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>));</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  descriptor_object-&gt;set_file_descriptor(file_descriptor);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  descriptor_object-&gt;set_memory(<a class="code" href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">ClearedValue</a>(isolate));</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  descriptor_object-&gt;set_offset(0);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  descriptor_object-&gt;set_size(0);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">return</span> descriptor_object;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;}</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a1960f2edb81d9fb0e21db67370235719"> 1345</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a1960f2edb81d9fb0e21db67370235719">WasmMemoryMapDescriptor::MapDescriptor</a>(</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmMemoryObject&gt;</a> memory, <span class="keywordtype">size_t</span> offset) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="preprocessor">#if V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory_control);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordflow">if</span> (memory-&gt;array_buffer()-&gt;is_shared()) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="comment">// TODO(ahaas): Handle concurrent calls to `MapDescriptor`. To prevent</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="comment">// concurrency issues, we disable `MapDescriptor` for shared wasm memories</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">// so far.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordflow">if</span> (memory-&gt;is_memory64()) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// TODO(ahaas): Handle memory64. So far the offset in the</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="comment">// MemoryMapDescriptor is only an uint32. Either the offset has to be</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="comment">// interpreted as a wasm memory page, or be extended to an uint64.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  uint8_t* target =</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(memory-&gt;array_buffer()-&gt;backing_store()) +</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      offset;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keyword">struct </span>stat stat_for_size;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span> (fstat(this-&gt;file_descriptor(), &amp;stat_for_size) == -1) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// Could not determine file size.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = <a class="code" href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(stat_for_size.st_size,</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                        <a class="code" href="namespacev8_1_1internal.html#ad2f1f50a10b1b024ff3ee1aae8927b30">GetArrayBufferPageAllocator</a>()-&gt;<a class="code" href="namespacev8_1_1internal.html#a9f5507dc03f0b35f38b119fc3285586a">AllocatePageSize</a>());</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> + offset &lt; <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>) {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="comment">// Overflow</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> + offset &gt; memory-&gt;array_buffer()-&gt;GetByteLength()) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordtype">void</span>* ret_val = mmap(target, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, PROT_READ | PROT_WRITE,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                       MAP_FIXED | MAP_SHARED, this-&gt;file_descriptor(), 0);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(ret_val, MAP_FAILED);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(ret_val, target);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a4bd7bb60a3267105908ed66ebb9b18c7"> 1392</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a4bd7bb60a3267105908ed66ebb9b18c7">WasmMemoryMapDescriptor::UnmapDescriptor</a>() {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">#if V8_TARGET_OS_LINUX</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory_control);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::WasmMemoryObject&gt;</a> memory =</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      Cast&lt;i::WasmMemoryObject&gt;(<a class="code" href="namespacev8_1_1internal.html#a2aebb1376bec4577a02698bacf76fbf4">MakeStrong</a>(this-&gt;memory()));</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">if</span> (memory.<a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a0930e2a8cbe8abbc5cdd476902fe6c88">is_null</a>()) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  uint32_t offset = this-&gt;offset();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  uint32_t <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = this-&gt;<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="comment">// The following checks already passed during `MapDescriptor`, and they should</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">// still pass.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!memory-&gt;is_memory64());</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!memory-&gt;array_buffer()-&gt;is_shared());</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> % <a class="code" href="namespacev8_1_1internal.html#ad2f1f50a10b1b024ff3ee1aae8927b30">GetArrayBufferPageAllocator</a>()-&gt;<a class="code" href="namespacev8_1_1internal.html#a9f5507dc03f0b35f38b119fc3285586a">AllocatePageSize</a>(), 0);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> + offset, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> + offset, memory-&gt;array_buffer()-&gt;byte_length());</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  uint8_t* target =</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(memory-&gt;array_buffer()-&gt;backing_store()) +</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      offset;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordtype">void</span>* ret_val = mmap(target, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, PROT_READ | PROT_WRITE,</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                       MAP_FIXED | MAP_SHARED | MAP_ANONYMOUS, -1, 0);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(ret_val, MAP_FAILED);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(ret_val, target);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmGlobalObject.html#ade63c64025c7c0f0ba5a05b9d11e431f"> 1429</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;WasmGlobalObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmGlobalObject.html#ade63c64025c7c0f0ba5a05b9d11e431f">WasmGlobalObject::New</a>(</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;JSArrayBuffer&gt;</a> maybe_untagged_buffer,</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;FixedArray&gt;</a> maybe_tagged_buffer, <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>,</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> offset, <span class="keywordtype">bool</span> is_mutable) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> global_ctor(</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_global_constructor(), isolate);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keyword">auto</span> global_obj =</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      Cast&lt;WasmGlobalObject&gt;(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(global_ctor));</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="comment">// Disallow GC until all fields have acceptable types.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">if</span> (!trusted_data.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">is_null</a>()) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      global_obj-&gt;set_trusted_data(*trusted_data);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      global_obj-&gt;clear_trusted_data();</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    global_obj-&gt;set_type(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    global_obj-&gt;set_offset(offset);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    global_obj-&gt;set_is_mutable(is_mutable);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_reference()) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(maybe_untagged_buffer.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a872ccde05e0ba79452e0b75afdfabf39">is_null</a>());</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afb53db8cc7fb48b96a2be12004cdcb10">tagged_buffer</a>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> (!maybe_tagged_buffer.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a7c6aa1159cd89fe343afabcaad620b98">ToHandle</a>(&amp;<a class="code" href="namespacev8_1_1internal.html#afb53db8cc7fb48b96a2be12004cdcb10">tagged_buffer</a>)) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="comment">// If no buffer was provided, create one.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#afb53db8cc7fb48b96a2be12004cdcb10">tagged_buffer</a> =</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;          isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">NewFixedArray</a>(1, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(offset, 0);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    global_obj-&gt;set_tagged_buffer(*<a class="code" href="namespacev8_1_1internal.html#afb53db8cc7fb48b96a2be12004cdcb10">tagged_buffer</a>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(maybe_tagged_buffer.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a872ccde05e0ba79452e0b75afdfabf39">is_null</a>());</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    uint32_t <a class="code" href="classv8_1_1internal_1_1WasmGlobalObject.html#a9edfe9ec8d5743bb3ca664cfdb54dad8">type_size</a> = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.value_kind_size();</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSArrayBuffer&gt;</a> untagged_buffer;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keywordflow">if</span> (!maybe_untagged_buffer.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a7c6aa1159cd89fe343afabcaad620b98">ToHandle</a>(&amp;untagged_buffer)) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;JSArrayBuffer&gt;</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;          isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a51594e340f34ee0a31a326a1f659b6de">NewJSArrayBufferAndBackingStore</a>(</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;              offset + <a class="code" href="classv8_1_1internal_1_1WasmGlobalObject.html#a9edfe9ec8d5743bb3ca664cfdb54dad8">type_size</a>, <a class="code" href="namespacev8_1_1internal.html#a6d3f691695696e478ebb4a18ab857bfaae914d084ea4fe52636ea783ce1c1cbc0">InitializedFlag::kZeroInitialized</a>);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.ToHandle(&amp;untagged_buffer)) {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a5819188db3266ad85f50d20a1e254459">Throw</a>(*isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewRangeError(</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            MessageTemplate::kOutOfMemory,</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#a099d2a505298c549ede814b4b4021464">NewStringFromAsciiChecked</a>(</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                <span class="stringliteral">&quot;WebAssembly.Global&quot;</span>)));</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">// Check that the offset is in bounds.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(offset + <a class="code" href="classv8_1_1internal_1_1WasmGlobalObject.html#a9edfe9ec8d5743bb3ca664cfdb54dad8">type_size</a>, untagged_buffer-&gt;GetByteLength());</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    global_obj-&gt;set_untagged_buffer(*untagged_buffer);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">return</span> global_obj;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a34b1502ca8959364a38d211aed59c67d"> 1489</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a34b1502ca8959364a38d211aed59c67d">FunctionTargetAndImplicitArg::FunctionTargetAndImplicitArg</a>(</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> target_instance_data,</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordtype">int</span> target_func_index) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a5e4e91362d0e1a4c0ec404cec5997c81">implicit_arg_</a> = target_instance_data;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">if</span> (target_func_index &lt;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;          target_instance_data-&gt;module()-&gt;num_imported_functions)) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// The function in the target instance was imported. Load the ref from the</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// dispatch table for imports.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a5e4e91362d0e1a4c0ec404cec5997c81">implicit_arg_</a> = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        Cast&lt;TrustedObject&gt;(</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            target_instance_data-&gt;dispatch_table_for_imports()-&gt;implicit_arg(</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                target_func_index)),</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        isolate);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    target_func_index_ = target_instance_data-&gt;imported_function_indices()-&gt;get(</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        target_func_index);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// The function in the target instance was not imported.</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    target_func_index_ = target_func_index;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <a class="code" href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#adabbd38fc203bd4d656ec7d18e175023">call_target_</a> = target_instance_data-&gt;GetCallTarget(target_func_index);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#ae4a858cbd25b5e257bba9fcd311ec1e7"> 1517</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#ae4a858cbd25b5e257bba9fcd311ec1e7">ImportedFunctionEntry::SetWasmToWrapper</a>(</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSReceiver&gt;</a> callable,</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle,</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">wasm::Suspend</a> suspend, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="comment">// Ignores wrapper_handle.</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmImportData&gt;</a> import_data =</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmImportData(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">callable</a>, suspend, <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>,</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                                              <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>, <span class="keyword">false</span> <span class="comment">/*kShared*/</span>);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports()-&gt;SetForWrapper(</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;          <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, *import_data, {}, sig_id, -1,</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;          <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;imported_function_indices()-&gt;set(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, -1);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="wasm-objects_8cc.html#a21efa1f26601b2d6f6839765ebc71df9">TRACE_IFT</a>(<span class="stringliteral">&quot;Import callable 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;[%d] = {callable=0x%&quot;</span> PRIxPTR</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <span class="stringliteral">&quot;, target=%p}\n&quot;</span>,</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;ptr(), <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">callable</a>-&gt;ptr(),</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            wrapper_handle-&gt;has_code()</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                ? <span class="keyword">nullptr</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                : wrapper_handle-&gt;code().instructions().begin());</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (wrapper_handle-&gt;has_code()) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(wrapper_handle-&gt;code().kind() == <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">wasm::WasmCode::kWasmToJsWrapper</a> ||</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;           wrapper_handle-&gt;code().kind() == <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5">wasm::WasmCode::kWasmToCapiWrapper</a>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(wrapper_handle-&gt;code().signature_hash(), <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;signature_hash());</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  constexpr <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02elements_8cc_03.html#acd37159826079290ea180403d57a2ebeaa7e1f9f93df2422d7dd8114153deed99">kShared</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmImportData&gt;</a> import_data =</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmImportData(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">callable</a>, suspend, <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>,</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                                            <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>, <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02elements_8cc_03.html#acd37159826079290ea180403d57a2ebeaa7e1f9f93df2422d7dd8114153deed99">kShared</a>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">if</span> (!wrapper_handle-&gt;has_code()) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    import_data-&gt;SetIndexInTableAsCallOrigin(</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports(), <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmDispatchTable&gt;</a> dispatch_table =</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports();</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  dispatch_table-&gt;SetForWrapper(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, *import_data, std::move(wrapper_handle),</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                                sig_id,</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                WasmDispatchTable::kInvalidFunctionIndex,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5a9f2f50b3fefb9ec17a7654a289287866">WasmDispatchTable::kNewEntry</a>);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;}</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#aff58f12e21d41c7343027b995211e629"> 1574</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#aff58f12e21d41c7343027b995211e629">ImportedFunctionEntry::SetWasmToWasm</a>(</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> target_instance_data,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> call_target, <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    ,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordtype">int</span> exported_function_index</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="wasm-objects_8cc.html#a21efa1f26601b2d6f6839765ebc71df9">TRACE_IFT</a>(<span class="stringliteral">&quot;Import Wasm 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;[%d] = {instance_data=0x%&quot;</span> PRIxPTR</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            <span class="stringliteral">&quot;, target=0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;}\n&quot;</span>,</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;ptr(), <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, target_instance_data.<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a4dba1b2eafcf7a414910966f950540c9">ptr</a>(),</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">wasm::GetProcessWideWasmCodePointerTable</a>()</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                -&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65882a1f49bd2c6a667cd3054f3dc2e2">GetEntrypointWithoutSignatureCheck</a>(call_target));</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmDispatchTable&gt;</a> dispatch_table =</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports();</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  dispatch_table-&gt;SetForNonWrapper(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>, target_instance_data, call_target,</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                                   sig_id,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                                   WasmDispatchTable::kInvalidFunctionIndex,</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                                   <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">WasmDispatchTable::kExistingEntry</a>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;imported_function_indices()-&gt;set(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>,</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                                                   exported_function_index);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">// Returns an empty Tagged&lt;Object&gt;() if no callable is available, a JSReceiver</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">// otherwise.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a63021958628904891284066b5e414b8d"> 1605</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a63021958628904891284066b5e414b8d">ImportedFunctionEntry::maybe_callable</a>() {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> data = <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a610c4666b44a3e3a5b45ed43b0e0baf2">implicit_arg</a>();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordflow">if</span> (!IsWasmImportData(data)) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a>();</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keywordflow">return</span> Cast&lt;JSReceiver&gt;(Cast&lt;WasmImportData&gt;(data)-&gt;<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">callable</a>());</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc"> 1611</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSReceiver&gt;</a> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">ImportedFunctionEntry::callable</a>() {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">return</span> Cast&lt;JSReceiver&gt;(Cast&lt;WasmImportData&gt;(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a610c4666b44a3e3a5b45ed43b0e0baf2">implicit_arg</a>())-&gt;<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">callable</a>());</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a610c4666b44a3e3a5b45ed43b0e0baf2"> 1615</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a610c4666b44a3e3a5b45ed43b0e0baf2">ImportedFunctionEntry::implicit_arg</a>() {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports()-&gt;implicit_arg(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;}</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0e747f460892159f4f39aa81962d615a"> 1619</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0e747f460892159f4f39aa81962d615a">ImportedFunctionEntry::target</a>() {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;dispatch_table_for_imports()-&gt;target(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;}</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="keywordtype">int</span> ImportedFunctionEntry::function_index_in_called_module() {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">instance_data_</a>-&gt;imported_function_indices()-&gt;get(<a class="code" href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">index_</a>);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;}</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;constexpr std::array&lt;uint16_t, WasmTrustedInstanceData::kTaggedFieldsCount&gt;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#aabf57a672c88fe7c988311cd560a37d1">WasmTrustedInstanceData::kTaggedFieldOffsets</a>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;constexpr std::array&lt;const char*, WasmTrustedInstanceData::kTaggedFieldsCount&gt;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a82e0d67b495b3d12886e1491a43cdb24">WasmTrustedInstanceData::kTaggedFieldNames</a>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;constexpr std::array&lt;uint16_t, 6&gt;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a6d40ff595b69eb36026f3ec8d1a35fac">WasmTrustedInstanceData::kProtectedFieldOffsets</a>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;constexpr std::array&lt;const char*, 6&gt;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a570376cd95bb723fb0a30b9e1e0ebc0d">WasmTrustedInstanceData::kProtectedFieldNames</a>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a3b10b49e542f346ba14702828af547c0"> 1642</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a3b10b49e542f346ba14702828af547c0">WasmTrustedInstanceData::SetRawMemory</a>(<span class="keywordtype">int</span> memory_index, uint8_t* mem_start,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                           <span class="keywordtype">size_t</span> mem_size) {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a>(memory_index, <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>()-&gt;memories.size());</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(mem_size, <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>()-&gt;memories[memory_index].is_memory64()</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                         ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adce8d2d1fb7219dada0f8cb31b9ba0ce">wasm::max_mem64_bytes</a>()</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                         : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab2ccdd8f6263889b55561cb1aa7b566e">wasm::max_mem32_bytes</a>());</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="comment">// All memory bases and sizes are stored in a TrustedFixedAddressArray.</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;TrustedFixedAddressArray&gt;</a> bases_and_sizes = memory_bases_and_sizes();</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  bases_and_sizes-&gt;set(memory_index * 2, <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">Address</a><span class="keyword">&gt;</span>(mem_start));</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  bases_and_sizes-&gt;set(memory_index * 2 + 1, mem_size);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Memory 0 has fast-access fields.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="keywordflow">if</span> (memory_index == 0) {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    set_memory0_start(mem_start);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    set_memory0_size(mem_size);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;}</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Tuple2&gt;</a> WasmTrustedInstanceData::GetOrCreateInterpreterObject(</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInstanceObject&gt;</a> instance) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate = <a class="code" href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">Isolate::Current</a>();</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data(</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      instance-&gt;trusted_data(isolate), isolate);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="keywordflow">if</span> (trusted_data-&gt;has_interpreter_object()) {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(trusted_data-&gt;interpreter_object(), isolate);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  DirectHandle&lt;Tuple2&gt; new_interpreter = <a class="code" href="classv8_1_1internal_1_1WasmInterpreterObject.html#a600f4df497830dd1d5c891b5d846f1f7">WasmInterpreterObject::New</a>(instance);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(trusted_data-&gt;has_interpreter_object());</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="keywordflow">return</span> new_interpreter;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;}</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;DirectHandle&lt;Tuple2&gt; WasmTrustedInstanceData::GetInterpreterObject(</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    DirectHandle&lt;WasmInstanceObject&gt; instance) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  Isolate* isolate = <a class="code" href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">Isolate::Current</a>();</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  DirectHandle&lt;WasmTrustedInstanceData&gt; trusted_data(</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      instance-&gt;trusted_data(isolate), isolate);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(trusted_data-&gt;has_interpreter_object());</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(trusted_data-&gt;interpreter_object(), isolate);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;}</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a046bdad8a33dfd81561292116a4dbcec"> 1686</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a046bdad8a33dfd81561292116a4dbcec">WasmTrustedInstanceData::New</a>(</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmModuleObject&gt;</a> module_object,</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordtype">bool</span> shared) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="comment">// Read the link to the {std::shared_ptr&lt;NativeModule&gt;} once from the</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="comment">// `module_object` and use it to initialize the fields of the</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// `WasmTrustedInstanceData`. It will then be stored in a `TrustedManaged` in</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">// the `WasmTrustedInstanceData` where it is safe from manipulation.</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  std::shared_ptr&lt;wasm::NativeModule&gt; <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a> =</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;shared_native_module();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// Do first allocate all objects that will be stored in instance fields,</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// because otherwise we would have to allocate when the instance is not fully</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// initialized yet, which can lead to heap verification errors.</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a> = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20a">AllocationType</a> allocation =</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      shared ? <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa420fc4b93a98a0b612db8f2f69463514">AllocationType::kSharedOld</a> : <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa492ef7cfa083cd677493179d45c9961e">AllocationType::kYoung</a>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordtype">int</span> num_imported_functions = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ad255146ba1429764e1e53305b0f4f1fe">dispatch_table_for_imports</a> =</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmDispatchTable(num_imported_functions,</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                                               <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a90941f620285a912a302a3aced092560">wasm::kWasmFuncRef</a>, shared);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> well_known_imports =</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">NewFixedArray</a>(num_imported_functions, allocation);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160; </div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a11f7e5d645f7820437ee9433162fc433">func_refs</a> =</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#ae56f02d0d6d5d61358da6e0eae0db018">NewFixedArrayWithZeroes</a>(</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;          <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>.size()), allocation);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordtype">int</span> num_imported_mutable_globals = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a56f32c556f3ad6b75e11d3d0733cb2a5">num_imported_mutable_globals</a>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// The imported_mutable_globals is essentially a FixedAddressArray (storing</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// sandboxed pointers), but some entries (the indices for reference-type</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="comment">// globals) are accessed as 32-bit integers which is more convenient with a</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="comment">// raw ByteArray.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedAddressArray&gt;</a> imported_mutable_globals =</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FixedAddressArrayBase.html#a9a841198f5470650b41517ca5c1a27d0">FixedAddressArray::New</a>(isolate, num_imported_mutable_globals, allocation);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160; </div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordtype">int</span> num_data_segments = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ad79d08b44791f2a0e0d573330a5e14d7">num_declared_data_segments</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedAddressArray&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a29244e5018f095691fb102a39c82f5f5">data_segment_starts</a> =</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FixedAddressArrayBase.html#a9a841198f5470650b41517ca5c1a27d0">FixedAddressArray::New</a>(isolate, num_data_segments, allocation);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedUInt32Array&gt;</a> data_segment_sizes =</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FixedIntegerArrayBase.html#ab977d693c069b16770327672f8a9ae8e">FixedUInt32Array::New</a>(isolate, num_data_segments, allocation);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedInt32Array&gt;</a> imported_function_indices =</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FixedIntegerArrayBase.html#ab977d693c069b16770327672f8a9ae8e">FixedInt32Array::New</a>(isolate, num_imported_functions);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab89f70ccd3d4626bef2224d6496f7feb">wasm::kV8MaxWasmMemories</a> &lt; <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a> / 2);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordtype">int</span> num_memories = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a2db4294c50e9d81d12819ce61ababaec">memories</a>.size());</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">memory_objects</a> =</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">NewFixedArray</a>(num_memories, allocation);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedFixedAddressArray&gt;</a> memory_bases_and_sizes =</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <a class="code" href="classv8_1_1internal_1_1FixedAddressArrayBase.html#a9a841198f5470650b41517ca5c1a27d0">TrustedFixedAddressArray::New</a>(</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;          isolate, 2 * num_memories,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;          shared ? <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa01a215f41271b4552d8e37930de95706">AllocationType::kSharedTrusted</a> : <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aaea89848074d781cbd54fcacbdca3f826">AllocationType::kTrusted</a>);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// TODO(clemensb): Should we have singleton empty dispatch table in the</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// trusted space?</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> empty_dispatch_table =</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmDispatchTable(0, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a90941f620285a912a302a3aced092560">wasm::kWasmFuncRef</a>, shared);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;ProtectedFixedArray&gt;</a> empty_protected_fixed_array =</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;empty_protected_fixed_array();</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="comment">// Use the same memory estimate as the (untrusted) Managed in</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// WasmModuleObject. This is not security critical, and we at least always</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// read the memory estimation of *some* NativeModule here.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordtype">size_t</span> estimated_size =</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;managed_native_module()-&gt;estimated_size();</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedManaged&lt;wasm::NativeModule&gt;</a>&gt;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      trusted_managed_native_module = <a class="code" href="classv8_1_1internal_1_1TrustedManaged.html#a73ea83d3adfbe4b1dfe34d6bf865e90c">TrustedManaged&lt;wasm::NativeModule&gt;::From</a>(</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;          isolate, estimated_size, <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>, shared);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="comment">// Now allocate the WasmTrustedInstanceData.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="comment">// During this step, no more allocations should happen because the instance is</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="comment">// incomplete yet, so we should not trigger heap verification at this point.</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data =</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmTrustedInstanceData(shared);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowHeapAllocation</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">// Some constants:</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    uint8_t* empty_backing_store_buffer =</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a274585e1c399e58d90a0ed65a3900084">EmptyBackingStoreBuffer</a>());</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a> ro_roots{isolate};</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> empty_fixed_array = ro_roots.empty_fixed_array();</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    trusted_data-&gt;set_dispatch_table_for_imports(*<a class="code" href="namespacev8_1_1internal.html#ad255146ba1429764e1e53305b0f4f1fe">dispatch_table_for_imports</a>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    trusted_data-&gt;set_imported_mutable_globals(*imported_mutable_globals);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    trusted_data-&gt;set_dispatch_table0(*empty_dispatch_table);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    trusted_data-&gt;set_dispatch_tables(*empty_protected_fixed_array);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    trusted_data-&gt;set_shared_part(*trusted_data);  <span class="comment">// TODO(14616): Good enough?</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    trusted_data-&gt;set_data_segment_starts(*<a class="code" href="namespacev8_1_1internal.html#a29244e5018f095691fb102a39c82f5f5">data_segment_starts</a>);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    trusted_data-&gt;set_data_segment_sizes(*data_segment_sizes);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    trusted_data-&gt;set_element_segments(empty_fixed_array);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    trusted_data-&gt;set_managed_native_module(*trusted_managed_native_module);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    trusted_data-&gt;set_new_allocation_limit_address(</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad5014f8f0da530498e7614cba60013a6">NewSpaceAllocationLimitAddress</a>());</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    trusted_data-&gt;set_new_allocation_top_address(</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36b006124ed0f7b75bfd7edc07ffe9b0">NewSpaceAllocationTopAddress</a>());</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    trusted_data-&gt;set_old_allocation_limit_address(</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae8c88266b8e03d1b1170ca54bb80dbea">OldSpaceAllocationLimitAddress</a>());</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    trusted_data-&gt;set_old_allocation_top_address(</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#acd6e76f78e13576abf3edcd8e66c5075">OldSpaceAllocationTopAddress</a>());</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    trusted_data-&gt;set_globals_start(empty_backing_store_buffer);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    trusted_data-&gt;set_imported_function_indices(*imported_function_indices);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (!shared) trusted_data-&gt;set_native_context(*isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>());</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    trusted_data-&gt;set_jump_table_start(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aad381026fba28fc729be46402fef86e7">jump_table_start</a>());</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    trusted_data-&gt;set_hook_on_function_call_address(</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#add58aa2cf5e62000c95ea11411ce9ae6">debug</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Debug.html#a25ef04805028d9eeef793ff917caf193">hook_on_function_call_address</a>());</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    trusted_data-&gt;set_managed_object_maps(</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        *isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;empty_fixed_array());</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    trusted_data-&gt;set_well_known_imports(*well_known_imports);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    trusted_data-&gt;set_func_refs(*<a class="code" href="namespacev8_1_1internal.html#a11f7e5d645f7820437ee9433162fc433">func_refs</a>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    trusted_data-&gt;set_feedback_vectors(</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        *isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;empty_fixed_array());</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    trusted_data-&gt;set_tiering_budget_array(</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a23ef76714c5b5dc6571cba072eb3dae1">tiering_budget_array</a>());</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    trusted_data-&gt;set_break_on_entry(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;script()-&gt;break_on_entry());</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    trusted_data-&gt;InitDataSegmentArrays(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>.get());</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    trusted_data-&gt;set_memory0_start(empty_backing_store_buffer);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    trusted_data-&gt;set_memory0_size(0);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    trusted_data-&gt;set_memory_objects(*<a class="code" href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">memory_objects</a>);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    trusted_data-&gt;set_memory_bases_and_sizes(*memory_bases_and_sizes);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    trusted_data-&gt;set_stress_deopt_counter_address(</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        ExternalReference::stress_deopt_count(isolate).address());</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_memories; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      memory_bases_and_sizes-&gt;set(</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;          2 * <a class="code" href="namespacev8_1_1internal.html">i</a>, <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">Address</a><span class="keyword">&gt;</span>(empty_backing_store_buffer));</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      memory_bases_and_sizes-&gt;set(2 * <a class="code" href="namespacev8_1_1internal.html">i</a> + 1, 0);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="comment">// Allocate the exports object, to be store in the instance object.</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> exports_object =</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a35f86baf123dfbe57824f027ae1b0999">NewJSObjectWithNullProto</a>();</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInstanceObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordflow">if</span> (!shared) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="comment">// Allocate the WasmInstanceObject (JS wrapper).</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> instance_cons(</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_instance_constructor(), isolate);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a> = Cast&lt;WasmInstanceObject&gt;(</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(instance_cons, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>));</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>-&gt;set_trusted_data(*trusted_data);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>-&gt;set_module_object(*<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>-&gt;set_exports_object(*exports_object);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    trusted_data-&gt;set_instance_object(*<a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="comment">// Insert the new instance into the scripts weak list of instances. This list</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="comment">// is used for breakpoints affecting all instances belonging to the script.</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;script()-&gt;type() == Script::Type::kWasm &amp;&amp;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      !<a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>.is_null()) {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WeakArrayList&gt;</a> weak_instance_list(</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;script()-&gt;wasm_weak_instance_list(), isolate);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    weak_instance_list =</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WeakArrayList.html#aa986929cdb53581c4198099a06376487">WeakArrayList::Append</a>(isolate, weak_instance_list,</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                              <a class="code" href="classv8_1_1internal_1_1MaybeObjectDirectHandle.html#af39f668bdaaf25432eb7cdbc4066f4d6">MaybeObjectDirectHandle::Weak</a>(<a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>));</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">module_object</a>-&gt;script()-&gt;set_wasm_weak_instance_list(*weak_instance_list);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  }</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordflow">return</span> trusted_data;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;}</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160; </div>
<div class="line"><a name="l01855"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a74e85e919dddc266cc1d846849aec50a"> 1855</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a74e85e919dddc266cc1d846849aec50a">WasmTrustedInstanceData::InitDataSegmentArrays</a>(</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">wasm::NativeModule</a>* native_module) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a> = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">module</a>();</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> wire_bytes = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a957b590c391c9dc0949cdaff8c94cf05">wire_bytes</a>();</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  uint32_t num_data_segments = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ad79d08b44791f2a0e0d573330a5e14d7">num_declared_data_segments</a>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// The number of declared data segments will be zero if there is no DataCount</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="comment">// section. These arrays will not be allocated nor initialized in that case,</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="comment">// since they cannot be used (since the validator checks that number of</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="comment">// declared data segments when validating the memory.init and memory.drop</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="comment">// instructions).</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(num_data_segments == 0 ||</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;         num_data_segments == <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#adc0a70e660a7112df858945f38616edc">data_segments</a>.size());</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_data_segments; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html">wasm::WasmDataSegment</a>&amp; segment = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#adc0a70e660a7112df858945f38616edc">data_segments</a>[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="comment">// Initialize the pointer and size of passive segments.</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keyword">auto</span> source_bytes = wire_bytes.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(segment.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html#ad002288f070d114ec32dd93c4874ee5b">source</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">offset</a>(),</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                                             segment.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html#ad002288f070d114ec32dd93c4874ee5b">source</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a1853a6fc4a88a37d2bb8a91b58781daf">end_offset</a>());</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a29244e5018f095691fb102a39c82f5f5">data_segment_starts</a>()-&gt;set(<a class="code" href="namespacev8_1_1internal.html">i</a>,</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                               <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">Address</a><span class="keyword">&gt;</span>(source_bytes.begin()));</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="comment">// Set the active segments to being already dropped, since memory.init on</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="comment">// a dropped passive segment and an active segment have the same</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="comment">// behavior.</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    data_segment_sizes()-&gt;set(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                              segment.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html#a12e17e3fa84bb4207424e2b348187aa8">active</a> ? 0 : source_bytes.length());</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;}</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad7aa4c4d7b3be1343889e872863e2982"> 1882</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad7aa4c4d7b3be1343889e872863e2982">WasmTrustedInstanceData::GetCallTarget</a>(uint32_t func_index) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">wasm::NativeModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a> = this-&gt;<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>();</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <a class="code" href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a>(func_index, <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>());</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="keywordflow">if</span> (func_index &lt; native_module-&gt;num_imported_functions()) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ad255146ba1429764e1e53305b0f4f1fe">dispatch_table_for_imports</a>()-&gt;target(func_index);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">wasm::kInvalidWasmCodePointer</a>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160; </div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">native_module</a>-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">GetCodePointerHandle</a>(func_index);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad5fa0df8fba113e186afd8a1b10b8161"> 1897</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad5fa0df8fba113e186afd8a1b10b8161">WasmTrustedInstanceData::CopyTableEntries</a>(</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    uint32_t table_dst_index, uint32_t table_src_index, uint32_t dst,</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    uint32_t src, uint32_t <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a>(table_dst_index, trusted_instance_data-&gt;tables()-&gt;length());</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a>(table_src_index, trusted_instance_data-&gt;tables()-&gt;length());</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keyword">auto</span> table_dst =</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmTableObject&gt;(</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                        trusted_instance_data-&gt;tables()-&gt;get(table_dst_index)),</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                    isolate);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="keyword">auto</span> table_src =</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmTableObject&gt;(</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                        trusted_instance_data-&gt;tables()-&gt;get(table_src_index)),</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                    isolate);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  uint32_t max_dst = table_dst-&gt;current_length();</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  uint32_t max_src = table_src-&gt;current_length();</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordtype">bool</span> copy_backward = src &lt; dst;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="keywordflow">if</span> (!base::IsInBounds(dst, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, max_dst) ||</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      !base::IsInBounds(src, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, max_src)) {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  }</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// no-op</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">if</span> ((dst == src &amp;&amp; table_dst_index == table_src_index) || <a class="code" href="structv8_1_1internal_1_1count.html">count</a> == 0) {</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="structv8_1_1internal_1_1count.html">count</a>; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    uint32_t src_index = copy_backward ? (src + <a class="code" href="structv8_1_1internal_1_1count.html">count</a> - <a class="code" href="namespacev8_1_1internal.html">i</a> - 1) : src + <a class="code" href="namespacev8_1_1internal.html">i</a>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    uint32_t dst_index = copy_backward ? (dst + <a class="code" href="structv8_1_1internal_1_1count.html">count</a> - <a class="code" href="namespacev8_1_1internal.html">i</a> - 1) : dst + <a class="code" href="namespacev8_1_1internal.html">i</a>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#aa5e3c6d5c308301194a5fd89e6dd9e59">WasmTableObject::Get</a>(isolate, table_src, src_index);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">WasmTableObject::Set</a>(isolate, table_dst, dst_index, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  }</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a77178e357a3856cdbbeb238b075f45e4"> 1935</a></span>&#160;std::optional&lt;MessageTemplate&gt; <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a77178e357a3856cdbbeb238b075f45e4">WasmTrustedInstanceData::InitTableEntries</a>(</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> shared_trusted_instance_data,</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    uint32_t table_index, uint32_t segment_index, uint32_t dst, uint32_t src,</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    uint32_t <a class="code" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classv8_1_1internal_1_1AccountingAllocator.html">AccountingAllocator</a> allocator;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="comment">// This {Zone} will be used only by the temporary WasmFullDecoder allocated</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="comment">// down the line from this call. Therefore it is safe to stack-allocate it</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="comment">// here.</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Zone.html">Zone</a> zone(&amp;allocator, <span class="stringliteral">&quot;LoadElemSegment&quot;</span>);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a> = trusted_instance_data-&gt;module();</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordtype">bool</span> table_is_shared = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#af40a46c2d14efc9c68b499d7a459d9b0">tables</a>[table_index].shared;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="keywordtype">bool</span> segment_is_shared = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4e531b388f3b2edb6a515b3a454ed49a">elem_segments</a>[segment_index].shared;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTableObject&gt;</a> table_object(</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      Cast&lt;WasmTableObject&gt;((table_is_shared ? shared_trusted_instance_data</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                             : trusted_instance_data)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                                -&gt;<a class="code" href="namespacev8_1_1internal.html#a484d41a2d1f12b77b5cf3953276c1efb">tables</a>()</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                                -&gt;get(table_index)),</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      isolate);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// If needed, try to lazily initialize the element segment.</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  std::optional&lt;MessageTemplate&gt; opt_error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a44100d6c17be0db51b00a9f4fdb9d678">wasm::InitializeElementSegment</a>(</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      &amp;zone, isolate, trusted_instance_data, shared_trusted_instance_data,</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      segment_index);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">if</span> (opt_error.has_value()) <span class="keywordflow">return</span> opt_error;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> elem_segment(</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      Cast&lt;FixedArray&gt;((segment_is_shared ? shared_trusted_instance_data</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                                          : trusted_instance_data)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                           -&gt;<a class="code" href="namespacev8_1_1internal.html#afb2de75dc052e06de22749c47f93d0d4">element_segments</a>()</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                           -&gt;get(segment_index)),</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      isolate);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="keywordflow">if</span> (!base::IsInBounds&lt;uint64_t&gt;(dst, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, table_object-&gt;current_length())) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keywordflow">return</span> {MessageTemplate::kWasmTrapTableOutOfBounds};</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  }</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="keywordflow">if</span> (!base::IsInBounds&lt;uint64_t&gt;(src, <a class="code" href="structv8_1_1internal_1_1count.html">count</a>, elem_segment-&gt;length())) {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">return</span> {MessageTemplate::kWasmTrapElementSegmentOutOfBounds};</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="structv8_1_1internal_1_1count.html">count</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">WasmTableObject::Set</a>(</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        isolate, table_object, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(dst + <a class="code" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(elem_segment-&gt;get(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(src + <a class="code" href="namespacev8_1_1internal.html">i</a>)), isolate));</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;}</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a6a3c772c7795f345d71f35b3cac43d45"> 1987</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a6a3c772c7795f345d71f35b3cac43d45">WasmTrustedInstanceData::try_get_func_ref</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>,</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                                               <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmFuncRef&gt;</a>* <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> val = <a class="code" href="namespacev8_1_1internal.html#a11f7e5d645f7820437ee9433162fc433">func_refs</a>()-&gt;get(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#ac581f955a852851b751735177af20efa">IsSmi</a>(val)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  *<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = Cast&lt;WasmFuncRef&gt;(val);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;}</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a27d1f1a3201baec4b9103b3bb27888b6"> 1995</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmFuncRef&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a27d1f1a3201baec4b9103b3bb27888b6">WasmTrustedInstanceData::GetOrCreateFuncRef</a>(</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_instance_data,</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordtype">int</span> function_index) {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordtype">bool</span> shared = <a class="code" href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">HeapLayout::InAnySharedSpace</a>(*trusted_instance_data);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmFuncRef&gt;</a> existing_func_ref;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="keywordflow">if</span> (trusted_instance_data-&gt;try_get_func_ref(function_index,</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                                              &amp;existing_func_ref)) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(existing_func_ref, isolate);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a> = trusted_instance_data-&gt;module();</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="keywordtype">bool</span> is_import =</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      function_index &lt; static_cast&lt;int&gt;(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">num_imported_functions</a>);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">wasm::ModuleTypeIndex</a> sig_index = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[function_index].sig_index;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedObject&gt;</a> implicit_arg =</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      is_import ? <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                      Cast&lt;TrustedObject&gt;(</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                          trusted_instance_data-&gt;dispatch_table_for_imports()</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                              -&gt;implicit_arg(function_index)),</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                      isolate)</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                : trusted_instance_data;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">// TODO(14034): Create funcref RTTs lazily?</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt{</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      Cast&lt;Map&gt;(</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;          trusted_instance_data-&gt;managed_object_maps()-&gt;get(sig_index.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>)),</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      isolate};</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">// Reuse the call target of the instance. In case of import wrappers, the</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// wrapper will automatically get tiered up together since it will use the</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// same CPT entry.</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInternalFunction&gt;</a> internal_function =</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmInternalFunction(</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;          implicit_arg, function_index, shared,</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;          trusted_instance_data-&gt;GetCallTarget(function_index));</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmFuncRef&gt;</a> func_ref =</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmFuncRef(internal_function, rtt, shared);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  trusted_instance_data-&gt;func_refs()-&gt;set(function_index, *func_ref);</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="keywordflow">return</span> func_ref;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;}</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmInternalFunction.html#afc61f955fff63212f4ae19ee110cf978"> 2038</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmInternalFunction.html#afc61f955fff63212f4ae19ee110cf978">WasmInternalFunction::try_get_external</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a>* <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <span class="keywordflow">if</span> (IsUndefined(external())) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  *<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = Cast&lt;JSFunction&gt;(external());</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;}</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a"> 2045</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a">WasmInternalFunction::GetOrCreateExternal</a>(</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInternalFunction&gt;</a> <span class="keyword">internal</span>) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate = <a class="code" href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">Isolate::Current</a>();</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a> existing_external;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a>-&gt;try_get_external(&amp;existing_external)) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(existing_external, isolate);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="comment">// {this} can either be:</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">// - a declared function, i.e. {implicit_arg()} is a WasmTrustedInstanceData,</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="comment">// - or an imported callable, i.e. {implicit_arg()} is a WasmImportData which</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">//   refers to the imported instance.</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// It cannot be a JS/C API function as for those, the external function is set</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="comment">// at creation.</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedObject&gt;</a> implicit_arg{<span class="keyword">internal</span>-&gt;implicit_arg(), isolate};</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a> =</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      IsWasmTrustedInstanceData(*implicit_arg)</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;          ? Cast&lt;WasmTrustedInstanceData&gt;(implicit_arg)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;          : <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmImportData&gt;(*implicit_arg)-&gt;instance_data(),</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                          isolate);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;module();</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">WasmFunction</a>&amp; <span class="keyword">function</span> = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[<span class="keyword">internal</span>-&gt;function_index()];</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id =</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a80ed14bf76cb65cc93c6c9ba1b56f75c">canonical_sig_id</a>(<span class="keyword">function</span>.sig_index);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">LookupFunctionSignature</a>(sig_id);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aac1117f1918f3c8580be0e192a1c7307">wasm::TypeCanonicalizer::PrepareForCanonicalTypeId</a>(isolate, sig_id);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="comment">// For now, we assume traditional behavior where the receiver is ignored.</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">// If the corresponding bit in the WasmExportedFunctionData is flipped later,</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="comment">// we&#39;ll have to reset any existing compiled wrapper.</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="keywordtype">bool</span> receiver_is_first_param = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> wrapper_code = <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa4ad9d9842d4f60c0411e95936f9d6d0">WasmExportedFunction::GetWrapper</a>(</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      isolate, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>, sig_id, receiver_is_first_param, module);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmFuncRef&gt;</a> func_ref{</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      Cast&lt;WasmFuncRef&gt;(</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;func_refs()-&gt;get(<a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a>-&gt;function_index())),</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      isolate};</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(func_ref-&gt;internal(isolate), *<span class="keyword">internal</span>);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#ac6583fa41f78a2543566f9812e57146b">WasmExportedFunction::New</a>(</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      isolate, <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>, func_ref, <span class="keyword">internal</span>,</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count()), wrapper_code);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keyword">internal</span>-&gt;set_external(*<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;}</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa4ad9d9842d4f60c0411e95936f9d6d0"> 2095</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa4ad9d9842d4f60c0411e95936f9d6d0">WasmExportedFunction::GetWrapper</a>(</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id, <span class="keywordtype">bool</span> receiver_is_first_param,</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module) {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">code_handle</a>(</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        Builtin::kGenericJSToWasmInterpreterWrapper);</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;CodeWrapper&gt;</a> entry = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmExportWrapperCache.html#aa67c99c7e5e517261faf25a6a4c4a053">wasm::WasmExportWrapperCache::Get</a>(</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      isolate, sig_id, receiver_is_first_param);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="keywordflow">if</span> (!entry.<a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a0930e2a8cbe8abbc5cdd476902fe6c88">is_null</a>()) {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(entry-&gt;code(isolate), isolate);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  }</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ab9a8d710a7bf323243d7de997b010b30">wasm::CanUseGenericJsToWasmWrapper</a>(module, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>)) {</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_wasm_stack_switching) {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">code_handle</a>(Builtin::kWasmStressSwitch);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    }</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">code_handle</a>(Builtin::kJSToWasmWrapper);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">// Otherwise compile a wrapper.</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> compiled =</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1JSToWasmWrapperCompilationUnit.html#a752a58d9590a7faefdd7d7ea8732275d">wasm::JSToWasmWrapperCompilationUnit::CompileJSToWasmWrapper</a>(</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;          isolate, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>, sig_id, receiver_is_first_param);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <span class="comment">// This should have added an entry in the per-isolate cache.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(compiled-&gt;wrapper(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmExportWrapperCache.html#aa67c99c7e5e517261faf25a6a4c4a053">wasm::WasmExportWrapperCache::Get</a>(</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                                     isolate, sig_id, receiver_is_first_param));</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">return</span> compiled;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;}</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; </div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa93c65fca3c328966a6acdbd0f1037c1"> 2127</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa93c65fca3c328966a6acdbd0f1037c1">WasmExportedFunction::MarkAsReceiverIsFirstParam</a>(</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExportedFunction&gt;</a> exported_function) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmExportedFunctionData&gt;</a> data =</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      exported_function-&gt;shared()-&gt;wasm_exported_function_data();</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="keywordflow">if</span> (data-&gt;receiver_is_first_param() != 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  data-&gt;set_receiver_is_first_param(1);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExportedFunctionData&gt;</a> data_handle(data, isolate);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">// Reset the wrapper code. If that&#39;s a compiled wrapper, it baked in the</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="comment">// bit we just flipped.</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> wrapper =</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#aa4ad9d9842d4f60c0411e95936f9d6d0">GetWrapper</a>(isolate, data-&gt;sig(), data-&gt;sig_index(), <span class="keyword">true</span>,</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                 data-&gt;instance_data()-&gt;module());</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  data = {};  <span class="comment">// Might be stale due to GC.</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  data_handle-&gt;set_wrapper_code(*wrapper);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  exported_function-&gt;UpdateCode(isolate, *wrapper);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;}</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmImportData.html#aa4e2be8693dfea569a0e6264c7d7fae7"> 2144</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmImportData.html#aa4e2be8693dfea569a0e6264c7d7fae7">WasmImportData::SetIndexInTableAsCallOrigin</a>(</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmDispatchTable&gt;</a> table, <span class="keywordtype">int</span> entry_index) {</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  set_call_origin(table);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  set_table_slot(entry_index);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;}</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmImportData.html#a5e5fe028402ec8919bc6fa46e6057d08"> 2150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmImportData.html#a5e5fe028402ec8919bc6fa46e6057d08">WasmImportData::SetFuncRefAsCallOrigin</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmInternalFunction&gt;</a> func) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  set_call_origin(func);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;}</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a7558971c5572009784c8a45e25033bdc"> 2154</a></span>&#160;uint8_t* <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a7558971c5572009784c8a45e25033bdc">WasmTrustedInstanceData::GetGlobalStorage</a>(</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html">wasm::WasmGlobal</a>&amp; global) {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a786387bf26930354003d39a87eec7921">is_reference</a>());</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">if</span> (global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#ab337075faef641441d4180f20d0a9365">mutability</a> &amp;&amp; global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a24043583c0a876cc3c838259974492f5">imported</a>) {</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        imported_mutable_globals()-&gt;get_sandboxed_pointer(global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a41c558eeba7d915933647fdbdb1daf41">index</a>));</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a67a321483bf059e8447957a469e2896b">globals_start</a>() + global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a542230c2ed200a1e8a0c6d1423a9426a">offset</a>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;}</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;std::pair&lt;Tagged&lt;FixedArray&gt;, uint32_t&gt;</div>
<div class="line"><a name="l02165"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a2b52a6afd836b6b563383e787d3131e7"> 2165</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a2b52a6afd836b6b563383e787d3131e7">WasmTrustedInstanceData::GetGlobalBufferAndIndex</a>(</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html">wasm::WasmGlobal</a>&amp; global) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a786387bf26930354003d39a87eec7921">is_reference</a>());</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="keywordflow">if</span> (global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#ab337075faef641441d4180f20d0a9365">mutability</a> &amp;&amp; global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a24043583c0a876cc3c838259974492f5">imported</a>) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> buffer =</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        Cast&lt;FixedArray&gt;(imported_mutable_globals_buffers()-&gt;get(global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a41c558eeba7d915933647fdbdb1daf41">index</a>));</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    <a class="code" href="classuintptr__t.html">Address</a> idx = imported_mutable_globals()-&gt;get(global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a41c558eeba7d915933647fdbdb1daf41">index</a>);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(idx, std::numeric_limits&lt;uint32_t&gt;::max());</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">return</span> {buffer, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(idx)};</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  }</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordflow">return</span> {<a class="code" href="namespacev8_1_1internal.html#a910dba0d1f94fc1784f2a389925b59af">tagged_globals_buffer</a>(), global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a542230c2ed200a1e8a0c6d1423a9426a">offset</a>};</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;}</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div>
<div class="line"><a name="l02179"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abc9dc826c0283941be4d1e6cfa9371d3"> 2179</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a> <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abc9dc826c0283941be4d1e6cfa9371d3">WasmTrustedInstanceData::GetGlobalValue</a>(</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html">wasm::WasmGlobal</a>&amp; global) {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="keywordflow">if</span> (global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a786387bf26930354003d39a87eec7921">is_reference</a>()) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;FixedArray&gt;</a> global_buffer;  <span class="comment">// The buffer of the global.</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    uint32_t global_index = 0;         <span class="comment">// The index into the buffer.</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    std::tie(global_buffer, global_index) = <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a2b52a6afd836b6b563383e787d3131e7">GetGlobalBufferAndIndex</a>(global);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a>(</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(global_buffer-&gt;get(global_index), isolate),</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        <a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">module</a>()-&gt;canonical_type(global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">type</a>));</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  }</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <a class="code" href="classuintptr__t.html">Address</a> <a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a4dba1b2eafcf7a414910966f950540c9">ptr</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">Address</a><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a7558971c5572009784c8a45e25033bdc">GetGlobalStorage</a>(global));</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">switch</span> (global.<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">type</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a777139722a5dbb1f696aa90375aab584">kind</a>()) {</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="preprocessor">#define CASE_TYPE(valuetype, ctype) \</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="preprocessor">  case wasm::valuetype:             \</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="preprocessor">    return wasm::WasmValue(base::ReadUnalignedValue&lt;ctype&gt;(ptr));</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="value-type_8h.html#adf86c65c5ba682f447bce7040a35a995">FOREACH_WASMVALUE_CTYPES</a>(<a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>)</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="preprocessor">#undef CASE_TYPE</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;}</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160; </div>
<div class="line"><a name="l02202"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmStruct.html#a458cc221d1af0ccb4c05fd25770a2074"> 2202</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalStructType.html">wasm::CanonicalStructType</a>* <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#a458cc221d1af0ccb4c05fd25770a2074">WasmStruct::GcSafeType</a>(<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(WASM_STRUCT_TYPE, map-&gt;instance_type());</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html">Tagged&lt;HeapObject&gt;</a> raw = Cast&lt;HeapObject&gt;(map-&gt;constructor_or_back_pointer());</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// The {WasmTypeInfo} might be in the middle of being moved, which is why we</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="comment">// can&#39;t read its map for a checked cast. But we can rely on its native type</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="comment">// pointer being intact in the old location.</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTypeInfo&gt;</a> type_info = UncheckedCast&lt;WasmTypeInfo&gt;(raw);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a13aa3a05620a7a9732ac5274d80b62b5">LookupStruct</a>(type_info-&gt;type_index());</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;}</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmStruct.html#ad141fc8214797aa163eb2804e95366f9"> 2212</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#ad141fc8214797aa163eb2804e95366f9">WasmStruct::AllocatePrototype</a>(</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSPrototype&gt;</a> parent) {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="comment">// Follow the example of {CreateClassPrototype} and create a map with no</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="comment">// in-object properties.</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="comment">// TODO(ishell): If we support caching the zero-in-object-properties map,</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// update this code.</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map = <a class="code" href="classv8_1_1internal_1_1Map.html#a0190d1c4f6fe4adec7b0719e448d5199">Map::Create</a>(isolate, 0);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  map-&gt;set_is_prototype_map(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Map.html#a93f004fb26af73077d064b097c740fa3">Map::SetPrototype</a>(isolate, map, parent);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a> =</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#ad2c55e5f426c5266376a9c5434fa1891">NewJSObjectFromMap</a>(map);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a36632c116af97ed40a9495ff3315dbde">UpdateProtectorsOnSetPrototype</a>(<a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>, parent);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">// Allocates a Wasm Struct that is a descriptor for another type, leaving</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">// its fields uninitialized.</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">// Descriptor structs have a 1:1 relationship with the internal &quot;RTT&quot; (aka</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">// v8::internal::Map) of the struct type they are describing, so this RTT</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">// is allocated along with the descriptor below, and the links between them</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">// are set up. RTTs with custom descriptors always are subtypes of the</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">// canonical RTT for the same type, so that canonical RTT is installed as the</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">// super-RTT of the customized RTT.</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">// The RTT/map of the descriptor itself is provided by the caller as {map}.</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment">// The eventual on-heap object structure will be something like the following,</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment">// where (A) is the object returned by this function, and (B) is allocated</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment">// along with it. There will likely be many instances of (C), and they will be</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="comment">// allocated (much) later, by one or more {struct.new} instructions that</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="comment">// take (A) as input and retrieve (B) from it.</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">// (D) is the {map} passed to this function.</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment">//   Wasm struct (C):                    Wasm Descriptor Struct (A):</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment">//   +-----------+                       +-----------+</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">//   | Map       |------\                | Map (D)   |</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">//   +-----------+      |                +-----------+</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">//   | hash      |      |                | hash      |</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">//   +-----------+      |       /--------| RTT       |</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">//   | fields... |      v  (B)  v        +-----------+</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">//   |           |   +-------------+     | fields... |</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment">//   +-----------+   | Meta-map    |     |           |</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment">//                   +-------------+     +-----------+</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="comment">//                   | ...         |         ^</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">//                   | Descriptor  |---------/</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">//                   | ...         |</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">//                   +-------------+</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmStruct.html#a7f2b5aa8e14b67c2b8f6f70a70b1455b"> 2259</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmStruct&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#a7f2b5aa8e14b67c2b8f6f70a70b1455b">WasmStruct::AllocateDescriptorUninitialized</a>(</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data,</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">wasm::ModuleTypeIndex</a> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map,</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> first_field) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">wasm::WasmModule</a>* module = trusted_data-&gt;module();</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeDefinition.html">wasm::TypeDefinition</a>&amp; <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a89e37309b6619867746a4cf77adcaa2a">type</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_descriptor());</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">// TODO(jkummerow): Figure out support for shared objects.</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.is_shared) <a class="code" href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">UNIMPLEMENTED</a>();</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> described_index =</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a203c3dead384ed9378fabac21ef51c52">canonical_type_id</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.describes);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt_parent{</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      Cast&lt;Map&gt;(trusted_data-&gt;managed_object_maps()-&gt;get(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.describes.index)),</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      isolate};</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;NativeContext&gt;</a> context(</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      Cast&lt;NativeContext&gt;(trusted_data-&gt;native_context()), isolate);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt =</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a05e9cdedf4032400775ed1056dc71feb">CreateStructMap</a>(isolate, described_index, rtt_parent, context);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_explicit_prototypes &amp;&amp; !<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*first_field) &amp;&amp;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      IsWasmDescriptorOptions(Cast&lt;HeapObject&gt;(*first_field))) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSPrototype&gt;</a> <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a> = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        Cast&lt;JSReceiver&gt;(</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            Cast&lt;WasmDescriptorOptions&gt;(*first_field)-&gt;prototype()),</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        isolate);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Map.html#a93f004fb26af73077d064b097c740fa3">Map::SetPrototype</a>(isolate, rtt, <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  }</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmStruct&gt;</a> descriptor =</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmStructUninitialized(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.struct_type, map,</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                                                     <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// The struct&#39;s body is uninitialized. As soon as we return, callers will</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// take care of that. Until then, no allocations are allowed.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  descriptor-&gt;set_described_rtt(*rtt);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  rtt-&gt;set_custom_descriptor(*descriptor);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keywordflow">return</span> descriptor;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;}</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160; </div>
<div class="line"><a name="l02298"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmStruct.html#a9bfd362a1d1c2f9a5eaa51e5740c4d59"> 2298</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a> <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#a9bfd362a1d1c2f9a5eaa51e5740c4d59">WasmStruct::GetFieldValue</a>(uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalStructType.html">wasm::CanonicalStructType</a>* <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> =</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a13aa3a05620a7a9732ac5274d80b62b5">LookupStruct</a>(</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;          map()-&gt;wasm_type_info()-&gt;type_index());</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> field_type = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>-&gt;field(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordtype">int</span> field_offset = WasmStruct::kHeaderSize + <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>-&gt;field_offset(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <a class="code" href="classuintptr__t.html">Address</a> field_address = GetFieldAddress(field_offset);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordflow">switch</span> (field_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a777139722a5dbb1f696aa90375aab584">kind</a>()) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="preprocessor">#define CASE_TYPE(valuetype, ctype) \</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="preprocessor">  case wasm::valuetype:             \</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="preprocessor">    return wasm::WasmValue(base::ReadUnalignedValue&lt;ctype&gt;(field_address));</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>(<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603">kI8</a>, int8_t)</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>(<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3">kI16</a>, <a class="code" href="namespaceunibrow.html#a511cc0636aed6a00d37d3e7cc0ec4e7c">int16_t</a>)</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="value-type_8h.html#adf86c65c5ba682f447bce7040a35a995">FOREACH_WASMVALUE_CTYPES</a>(<a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>)</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="preprocessor">#undef CASE_TYPE</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">case</span> wasm::kF16:</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a>(fp16_ieee_to_fp32_value(</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;          base::ReadUnalignedValue&lt;uint16_t&gt;(field_address)));</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">case</span> wasm::kRef:</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">case</span> wasm::kRefNull: {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> ref(<a class="code" href="classv8_1_1internal_1_1TaggedField.html">TaggedField&lt;Object&gt;::load</a>(*<span class="keyword">this</span>, field_offset),</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                               <a class="code" href="namespacev8_1_1internal.html#a3e7c556dd0b04856cb85ebea286b7597">GetIsolateFromWritableObject</a>(*<span class="keyword">this</span>));</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a>(ref, field_type);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">case</span> wasm::kVoid:</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">case</span> wasm::kTop:</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">case</span> wasm::kBottom:</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;}</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160; </div>
<div class="line"><a name="l02329"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmArray.html#a083bf7dcc3db8f7422ff53b33261af95"> 2329</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a> <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a083bf7dcc3db8f7422ff53b33261af95">WasmArray::GetElement</a>(uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> element_type =</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      map()-&gt;wasm_type_info()-&gt;element_type();</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">element_offset</a> =</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      WasmArray::kHeaderSize + <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> * element_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a09cf4ea5d5c5131cd99bf69b427dd13f">value_kind_size</a>();</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <a class="code" href="classuintptr__t.html">Address</a> element_address = GetFieldAddress(<a class="code" href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">element_offset</a>);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keywordflow">switch</span> (element_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a777139722a5dbb1f696aa90375aab584">kind</a>()) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="preprocessor">#define CASE_TYPE(value_type, ctype) \</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="preprocessor">  case wasm::value_type:             \</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="preprocessor">    return wasm::WasmValue(base::ReadUnalignedValue&lt;ctype&gt;(element_address));</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>(<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603">kI8</a>, int8_t)</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>(<a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3">kI16</a>, <a class="code" href="namespaceunibrow.html#a511cc0636aed6a00d37d3e7cc0ec4e7c">int16_t</a>)</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <a class="code" href="value-type_8h.html#adf86c65c5ba682f447bce7040a35a995">FOREACH_WASMVALUE_CTYPES</a>(<a class="code" href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a>)</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="preprocessor">#undef CASE_TYPE</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">case</span> wasm::kF16:</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a>(fp16_ieee_to_fp32_value(</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;          base::ReadUnalignedValue&lt;uint16_t&gt;(element_address)));</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">case</span> wasm::kRef:</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="keywordflow">case</span> wasm::kRefNull: {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> ref(<a class="code" href="classv8_1_1internal_1_1TaggedField.html">TaggedField&lt;Object&gt;::load</a>(*<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">element_offset</a>),</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                               <a class="code" href="namespacev8_1_1internal.html#a3e7c556dd0b04856cb85ebea286b7597">GetIsolateFromWritableObject</a>(*<span class="keyword">this</span>));</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">wasm::WasmValue</a>(ref, element_type);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    }</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">case</span> wasm::kVoid:</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">case</span> wasm::kTop:</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">case</span> wasm::kBottom:</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;}</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160; </div>
<div class="line"><a name="l02359"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmArray.html#a40b023f6ad782775f32009f324a26217"> 2359</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a40b023f6ad782775f32009f324a26217">WasmArray::SetTaggedElement</a>(uint32_t <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>,</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                                 <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13">WriteBarrierMode</a> <a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(map()-&gt;wasm_type_info()-&gt;element_type().<a class="code" href="namespacev8_1_1internal_1_1wasm.html#aed0daa933fcad9ee13252b351e01a3d9">is_reference</a>());</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TaggedField.html#a8d902c25d47df2b4fa0e50d189bbc705">TaggedField&lt;Object&gt;::store</a>(*<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">element_offset</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>), *<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <a class="code" href="object-macros_8h.html#a9231f70a649a71a193851bbd81d05010">CONDITIONAL_WRITE_BARRIER</a>(*<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">element_offset</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>), *<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, <a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;}</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTagObject.html#a80e21a9531997c9d7c95d9bd95d86cd4"> 2367</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTagObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmTagObject.html#a80e21a9531997c9d7c95d9bd95d86cd4">WasmTagObject::New</a>(</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Signature.html">wasm::FunctionSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> type_index, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;HeapObject&gt;</a> tag,</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> trusted_data) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> tag_cons(</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_tag_constructor(), isolate);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="comment">// Serialize the signature.</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count());</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count(), std::numeric_limits&lt;int&gt;::max());</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordtype">int</span> sig_size = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count());</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;PodArray&lt;wasm::ValueType&gt;</a>&gt; serialized_sig =</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <a class="code" href="classv8_1_1internal_1_1PodArray.html#a3f28a70fe5af7c7d45ec1d89d2afe748">PodArray&lt;wasm::ValueType&gt;::New</a>(isolate, sig_size, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = 0;  <span class="comment">// Index into the {PodArray} above.</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">wasm::ValueType</a> param : <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameters()) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    serialized_sig-&gt;set(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>++, param);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> tag_object =</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(tag_cons, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTagObject&gt;</a> tag_wrapper = Cast&lt;WasmTagObject&gt;(tag_object);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  tag_wrapper-&gt;set_serialized_signature(*serialized_sig);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  tag_wrapper-&gt;set_canonical_type_index(type_index.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  tag_wrapper-&gt;set_tag(*tag);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="keywordflow">if</span> (!trusted_data.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">is_null</a>()) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    tag_wrapper-&gt;set_trusted_data(*trusted_data);</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    tag_wrapper-&gt;clear_trusted_data();</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160; </div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="keywordflow">return</span> tag_wrapper;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDescriptorOptions.html#a3d09ffa2effb4501fd95e5fb947c9970"> 2400</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDescriptorOptions&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmDescriptorOptions.html#a3d09ffa2effb4501fd95e5fb947c9970">WasmDescriptorOptions::New</a>(</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>) {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> ctor(</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_descriptor_options_constructor(),</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      isolate);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDescriptorOptions&gt;</a> desc =</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      Cast&lt;WasmDescriptorOptions&gt;(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(ctor));</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  desc-&gt;set_prototype(*<a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="keywordflow">return</span> desc;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;}</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160; </div>
<div class="line"><a name="l02411"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmTagObject.html#a5e0d871680ed27f3dc92de54b1c2257d"> 2411</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmTagObject.html#a5e0d871680ed27f3dc92de54b1c2257d">WasmTagObject::MatchesSignature</a>(<a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> expected_index) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a>{<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;             this-&gt;canonical_type_index())} == expected_index;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;}</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160; </div>
<div class="line"><a name="l02416"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmCapiFunction.html#a303283aba317fedb0d548295dd9f3a2d"> 2416</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a303283aba317fedb0d548295dd9f3a2d">WasmCapiFunction::sig</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordflow">return</span> shared()-&gt;wasm_capi_function_data()-&gt;sig();</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;}</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> WasmDispatchTableData::WrapperCodePointerForDebugging(</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.find(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(it, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.end());</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;  <span class="keywordflow">return</span> it-&gt;second-&gt;code_pointer();</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;}</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160; </div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;std::optional&lt;std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt;&gt;</div>
<div class="line"><a name="l02430"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a72836a7f841b6211d64c54b174471a3a"> 2430</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a72836a7f841b6211d64c54b174471a3a">WasmDispatchTableData::MaybeGetWrapperHandle</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.find(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="keywordflow">if</span> (it == <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.end()) {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  }</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;}</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160; </div>
<div class="line"><a name="l02438"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a50e100a96969327139b0b3dcf088ecb0"> 2438</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a50e100a96969327139b0b3dcf088ecb0">WasmDispatchTableData::Add</a>(</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <span class="keyword">auto</span> [wrapper_cache, was_inserted] =</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.emplace(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, std::move(wrapper_handle));</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(was_inserted);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(was_inserted);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a8be00d6024973b9644c3528702e7f9b6"> 2446</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a8be00d6024973b9644c3528702e7f9b6">WasmDispatchTableData::Remove</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) { <a class="code" href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">wrappers_</a>.erase(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>); }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160; </div>
<div class="line"><a name="l02448"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad13f2dd16d9157875facfdc771841df9"> 2448</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad13f2dd16d9157875facfdc771841df9">WasmDispatchTable::SetForNonWrapper</a>(</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt;<a class="code" href="classv8_1_1internal_1_1Union.html">Union&lt;Smi, WasmTrustedInstanceData&gt;</a>&gt; implicit_arg,</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> call_target, <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id,</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    uint32_t function_index,</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5">NewOrExistingEntry</a> new_or_existing) {</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a> == <a class="code" href="classv8_1_1internal_1_1Smi.html#a5386e0cc44bcfd6a13c8481b95f5652f">Smi::zero</a>()) {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless ||</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;           (<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">wasm::kInvalidWasmCodePointer</a> == call_target));</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a077547a040fefbe67a9a443a4c4431bb">Clear</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, new_or_existing);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <a class="code" href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a21e6f366c276cd435de54841571be9d8">length</a>());</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsWasmTrustedInstanceData(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>));</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#a9340071636f85090c2fe2171797857c0">valid</a>());</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#afe90b842432164928401d05f5fff3a8a">OffsetOf</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="comment">// When overwriting an existing entry, we must decrement the refcount</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="comment">// of any overwritten wrappers. When initializing an entry, we must not</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="comment">// read uninitialized memory.</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span> (new_or_existing == <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">kExistingEntry</a>) {</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      offheap_data()-&gt;Remove(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    }</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a3e4e2907cbc69176e0725dd18f3dca97">kTargetBias</a>, call_target.<a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html#aa08af187eb29ca018162901c0d47183b">value</a>());</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="comment">// Ignore call_target, not used in jitless mode.</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    WriteField&lt;int&gt;(offset + kFunctionIndexBias, function_index);</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  }</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TrustedObject.html#a839a65b36476a066b6053d45f18c2ecb">WriteProtectedPointerField</a>(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>,</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                             Cast&lt;TrustedObject&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>));</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <a class="code" href="object-macros_8h.html#a9231f70a649a71a193851bbd81d05010">CONDITIONAL_WRITE_BARRIER</a>(*<span class="keyword">this</span>, offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>,</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                            <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d">UPDATE_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a7dc6e7ebbb76782d6d3232ffea5edaf7">kSigBias</a>, sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;}</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a02c4f4414880c4428bb892f795f71739"> 2487</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a02c4f4414880c4428bb892f795f71739">WasmDispatchTable::SetForWrapper</a>(</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmImportData&gt;</a> implicit_arg,</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle,</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id,</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    uint32_t function_index,</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5">NewOrExistingEntry</a> new_or_existing) {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>, <a class="code" href="classv8_1_1internal_1_1Smi.html#a5386e0cc44bcfd6a13c8481b95f5652f">Smi::zero</a>());</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless || !wrapper_handle-&gt;has_code() ||</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;           !wrapper_handle-&gt;code().is_dying());</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <a class="code" href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a21e6f366c276cd435de54841571be9d8">length</a>());</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#a9340071636f85090c2fe2171797857c0">valid</a>());</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#afe90b842432164928401d05f5fff3a8a">OffsetOf</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TrustedObject.html#a839a65b36476a066b6053d45f18c2ecb">WriteProtectedPointerField</a>(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>,</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                             Cast&lt;TrustedObject&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>));</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="object-macros_8h.html#a9231f70a649a71a193851bbd81d05010">CONDITIONAL_WRITE_BARRIER</a>(*<span class="keyword">this</span>, offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>,</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                            <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d">UPDATE_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="comment">// When overwriting an existing entry, we must decrement the refcount</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="comment">// of any overwritten wrappers. When initializing an entry, we must not</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">// read uninitialized memory.</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">if</span> (new_or_existing == <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">kExistingEntry</a>) {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      offheap_data()-&gt;Remove(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    }</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a3e4e2907cbc69176e0725dd18f3dca97">kTargetBias</a>,</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                         wrapper_handle-&gt;code_pointer().value());</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    offheap_data()-&gt;Add(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, std::move(wrapper_handle));</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <span class="comment">// Ignore call_target, not used in jitless mode.</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    WriteField&lt;int&gt;(offset + kFunctionIndexBias, function_index);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  }</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a7dc6e7ebbb76782d6d3232ffea5edaf7">kSigBias</a>, sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;}</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160; </div>
<div class="line"><a name="l02525"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a077547a040fefbe67a9a443a4c4431bb"> 2525</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a077547a040fefbe67a9a443a4c4431bb">WasmDispatchTable::Clear</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5">NewOrExistingEntry</a> new_or_existing) {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <a class="code" href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a21e6f366c276cd435de54841571be9d8">length</a>());</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#afe90b842432164928401d05f5fff3a8a">OffsetOf</a>(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="comment">// When clearing an existing entry, we must update the refcount of any</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="comment">// wrappers. When clear-initializing new entries, we must not read</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="comment">// uninitialized memory.</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">if</span> (new_or_existing == <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">kExistingEntry</a>) {</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    offheap_data()-&gt;Remove(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  }</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TrustedObject.html#a3e0789f0ae71c63b4b841bc64154093d">ClearProtectedPointerField</a>(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a3e4e2907cbc69176e0725dd18f3dca97">kTargetBias</a>,</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                       <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">wasm::kInvalidWasmCodePointer</a>.<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>());</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  WriteField&lt;int&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a7dc6e7ebbb76782d6d3232ffea5edaf7">kSigBias</a>, -1);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;}</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;std::optional&lt;std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt;&gt;</div>
<div class="line"><a name="l02541"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a883a0830eebf148c3c01b4ce020edc5f"> 2541</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a883a0830eebf148c3c01b4ce020edc5f">WasmDispatchTable::MaybeGetWrapperHandle</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">return</span> offheap_data()-&gt;MaybeGetWrapperHandle(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;}</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a865e5bfc2f812c54e4b6d38c64ad6ac8"> 2546</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a865e5bfc2f812c54e4b6d38c64ad6ac8">WasmDispatchTable::AddUse</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                               <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table,</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                               <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> instance,</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                               <span class="keywordtype">int</span> table_index) {</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses =</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af7dac59bb8e83c542a078d6a63e33979">MaybeGrowUsesList</a>(isolate, dispatch_table);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="keywordtype">int</span> cursor = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">// {MaybeGrowUsesList} ensures that we have enough capacity.</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af8f9bd68361ee2ccfd1496da2f5951fd">SetEntry</a>(uses, cursor, *instance, table_index);</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">SetUsedLength</a>(uses, cursor + 2);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;}</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160; </div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#af7dac59bb8e83c542a078d6a63e33979"> 2559</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af7dac59bb8e83c542a078d6a63e33979">WasmDispatchTable::MaybeGrowUsesList</a>(</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> dispatch_table) {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses = dispatch_table-&gt;protected_uses();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a> = uses-&gt;length();</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a> == 0) {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    constexpr <span class="keywordtype">int</span> kInitialLength = 3;  <span class="comment">// 1 slot + 1 pair.</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;ProtectedWeakFixedArray&gt;</a> new_uses =</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#ad4b78219bdb04735f21eb388928c0fd5">NewProtectedWeakFixedArray</a>(kInitialLength);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">SetUsedLength</a>(*new_uses, <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    dispatch_table-&gt;set_protected_uses(*new_uses);</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <span class="keywordflow">return</span> *new_uses;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(uses-&gt;length(), 0);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keywordtype">int</span> used_length = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">if</span> (used_length &lt; <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a>) <span class="keywordflow">return</span> uses;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="comment">// Try to compact, grow if that doesn&#39;t free up enough space.</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="keywordtype">int</span> cleared_entries = 0;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="keywordtype">int</span> write_cursor = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#ad30270db72c80341abd40ca560eb3632">IsWeakOrCleared</a>());</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      cleared_entries++;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    }</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="keywordflow">if</span> (write_cursor != <a class="code" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a8f7a09b96377cfc3e65480e903628980">CopyEntry</a>(uses, write_cursor, uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    }</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    write_cursor += 2;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="comment">// We need at least one free entry. We want at least half the array to be</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="comment">// empty; each entry needs two slots.</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keywordtype">int</span> min_free_entries = 1 + (<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a> &gt;&gt; 2);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <span class="keywordflow">if</span> (cleared_entries &gt;= min_free_entries) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">SetUsedLength</a>(uses, write_cursor);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordflow">return</span> uses;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="comment">// Grow by 50%, at least one entry.</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;ProtectedWeakFixedArray&gt;</a> uses_handle(uses, isolate);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  uses = {};</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="keywordtype">int</span> old_entries = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">capacity</a> &gt;&gt; 1;  <span class="comment">// Two slots per entry.</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="keywordtype">int</span> new_entries = std::max(old_entries + 1, old_entries + (old_entries &gt;&gt; 1));</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="keywordtype">int</span> new_capacity = new_entries * 2 + <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;ProtectedWeakFixedArray&gt;</a> new_uses =</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#ad4b78219bdb04735f21eb388928c0fd5">NewProtectedWeakFixedArray</a>(new_capacity);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <span class="comment">// The allocation could have triggered GC, freeing more entries.</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <span class="comment">// The previous compaction&#39;s {write_cursor} is the new upper bound on</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="comment">// existing entries.</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  used_length = write_cursor;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  uses = *uses_handle;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;  write_cursor = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; used_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a8f7a09b96377cfc3e65480e903628980">CopyEntry</a>(*new_uses, write_cursor, uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    write_cursor += 2;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  }</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">SetUsedLength</a>(*new_uses, write_cursor);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  dispatch_table-&gt;set_protected_uses(*new_uses);</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordflow">return</span> *new_uses;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;}</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160; </div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a8d080aacae0ab37ff54447698f152914"> 2621</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a8d080aacae0ab37ff54447698f152914">WasmDispatchTable::New</a>(</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>, <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> table_type,</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="keywordtype">bool</span> shared) {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmDispatchTable(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a21e6f366c276cd435de54841571be9d8">length</a>, table_type, shared);</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;}</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160; </div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmDispatchTable.html#a295a7068bb6e12ef63d746cf4dbf53c3"> 2628</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a295a7068bb6e12ef63d746cf4dbf53c3">WasmDispatchTable::Grow</a>(</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> old_table,</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    uint32_t new_length) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  uint32_t old_length = old_table-&gt;length();</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="comment">// This method should only be called if we actually grow. For sandbox</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">// purposes we also want to ensure tables can never shrink below their</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">// static minimum size.</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <a class="code" href="check_8h.html#a27bd9aa8e613a2123a446cd6bc973fdf">SBXCHECK_LT</a>(old_length, new_length);</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  uint32_t old_capacity = old_table-&gt;capacity();</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="comment">// Catch possible corruption. {new_length} is computed from untrusted data.</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <a class="code" href="check_8h.html#a0331d7a4dc5d6372d25e946af1f96588">SBXCHECK_LE</a>(new_length, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>());</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="comment">// {old_length} and {old_capacity} are read from trusted space, so we trust</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="comment">// them. The DCHECKs give fuzzers a chance to catch potential bugs.</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(old_length, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>());</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(old_capacity, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>());</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <span class="keywordflow">if</span> (new_length &lt; old_capacity) {</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="object-macros_8h.html#af3b897121626563e23614c667e3f754a">RELEASE_WRITE_INT32_FIELD</a>(*old_table, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#adb64eac40ae89f9acaae1409ca56e65a">kLengthOffset</a>, new_length);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <span class="comment">// All fields within the old capacity are already cleared (see below).</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    <span class="keywordflow">return</span> old_table;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  }</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160; </div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="comment">// Grow table exponentially to guarantee amortized constant allocation and gc</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="comment">// time.</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  uint32_t limit =</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      std::min&lt;uint32_t&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a1b90f33e89bf3bcee0fb69f1dd86f461">WasmDispatchTable::kMaxLength</a>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">wasm::max_table_size</a>());</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  uint32_t max_grow = limit - old_capacity;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  uint32_t min_grow = new_length - old_capacity;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(min_grow, max_grow);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <span class="comment">// Grow by old capacity, and at least by 8. Clamp to min_grow and max_grow.</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  uint32_t exponential_grow = std::max(old_capacity, 8u);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  uint32_t grow = std::clamp(exponential_grow, min_grow, max_grow);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  uint32_t new_capacity = old_capacity + grow;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(new_capacity, limit);</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmDispatchTable&gt;</a> new_table =</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a8d080aacae0ab37ff54447698f152914">WasmDispatchTable::New</a>(isolate, new_capacity, old_table-&gt;table_type(),</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                             <a class="code" href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">HeapLayout::InAnySharedSpace</a>(*old_table));</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160; </div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <a class="code" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">no_gc</a>;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  <span class="comment">// Writing non-atomically is fine here because this is a freshly allocated</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;  new_table-&gt;WriteField&lt;<span class="keywordtype">int</span>&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#adb64eac40ae89f9acaae1409ca56e65a">kLengthOffset</a>, new_length);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; old_length; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> call_target = old_table-&gt;target(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="comment">// Update any stored call origins, so that future compiled wrappers</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="comment">// get installed into the new dispatch table.</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a> = old_table-&gt;implicit_arg(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="keywordflow">if</span> (IsWasmImportData(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>)) {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmImportData&gt;</a> import_data = Cast&lt;WasmImportData&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      <span class="comment">// After installing a compiled wrapper, we don&#39;t set or update</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      <span class="comment">// call origins any more.</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      <span class="keywordflow">if</span> (import_data-&gt;has_call_origin()) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <span class="keywordflow">if</span> (import_data-&gt;call_origin() == *old_table) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;          import_data-&gt;set_call_origin(*new_table);</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless ||</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                 <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">wasm::GetWasmImportWrapperCache</a>()-&gt;IsCompiledWrapper(</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                     call_target));</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        }</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      }</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    }</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160; </div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a> == <a class="code" href="classv8_1_1internal_1_1Smi.html#a5386e0cc44bcfd6a13c8481b95f5652f">Smi::zero</a>()) {</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      new_table-&gt;Clear(<a class="code" href="namespacev8_1_1internal.html">i</a>, <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5a9f2f50b3fefb9ec17a7654a289287866">kNewEntry</a>);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#afe90b842432164928401d05f5fff3a8a">OffsetOf</a>(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      new_table-&gt;WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a3e4e2907cbc69176e0725dd18f3dca97">kTargetBias</a>,</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                                      call_target.<a class="code" href="classv8_1_1internal_1_1WasmCodePointer.html#aa08af187eb29ca018162901c0d47183b">value</a>());</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <span class="comment">// Ignore call_target, not used in jitless mode.</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;      new_table-&gt;WriteField&lt;<span class="keywordtype">int</span>&gt;(offset + kFunctionIndexBias,</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                                 old_table-&gt;function_index(<a class="code" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    }</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    new_table-&gt;WriteProtectedPointerField(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>,</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                                          Cast&lt;TrustedObject&gt;(<a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>));</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <a class="code" href="object-macros_8h.html#a9231f70a649a71a193851bbd81d05010">CONDITIONAL_WRITE_BARRIER</a>(*new_table, offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">kImplicitArgBias</a>,</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                              <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">implicit_arg</a>, <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d">UPDATE_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    new_table-&gt;WriteField&lt;uint32_t&gt;(offset + <a class="code" href="classv8_1_1internal_1_1WasmDispatchTable.html#a7dc6e7ebbb76782d6d3232ffea5edaf7">kSigBias</a>, old_table-&gt;sig(<a class="code" href="namespacev8_1_1internal.html">i</a>).index);</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  }</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160; </div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  new_table-&gt;offheap_data()-&gt;wrappers_ =</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;      std::move(old_table-&gt;offheap_data()-&gt;wrappers_);</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="comment">// Update users.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ProtectedWeakFixedArray&gt;</a> uses = old_table-&gt;protected_uses();</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  new_table-&gt;set_protected_uses(uses);</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="keywordtype">int</span> used_length = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">GetUsedLength</a>(uses);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">kReservedSlotOffset</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; used_length; <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordflow">if</span> (uses-&gt;get(<a class="code" href="namespacev8_1_1internal.html">i</a>).<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTrustedInstanceData&gt;</a> instance = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">GetInstance</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordtype">int</span> table_index = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">GetTableIndex</a>(uses, <a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(instance-&gt;dispatch_tables()-&gt;get(table_index), *old_table);</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    instance-&gt;dispatch_tables()-&gt;set(table_index, *new_table);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span> (table_index == 0) {</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(instance-&gt;dispatch_table0(), *old_table);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      instance-&gt;set_dispatch_table0(*new_table);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    }</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  }</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">return</span> new_table;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;}</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmCapiFunction.html#aa65370f2fd8cec8f4042ab5b2fa79b7a"> 2735</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#aa65370f2fd8cec8f4042ab5b2fa79b7a">WasmCapiFunction::MatchesSignature</a>(</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> other_canonical_sig_index)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="comment">// TODO(14034): Change this if indexed types are allowed.</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> : this-&gt;<a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a303283aba317fedb0d548295dd9f3a2d">sig</a>()-&gt;<a class="code" href="flag-definitions_8h.html#aeb1d337a6a2e13e2e9fa9e47fb153aa3">all</a>()) {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.has_index());</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  }</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="comment">// TODO(14034): Check for subtyping instead if C API functions can define</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="comment">// signature supertype.</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="keywordflow">return</span> shared()-&gt;wasm_capi_function_data()-&gt;sig_index() ==</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;         other_canonical_sig_index;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;}</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a310dfde86feecf720c6a44124ab7dbca"> 2750</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionPackage&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a310dfde86feecf720c6a44124ab7dbca">WasmExceptionPackage::New</a>(</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionTag&gt;</a> exception_tag, <span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>) {</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> values = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">NewFixedArray</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a310dfde86feecf720c6a44124ab7dbca">New</a>(isolate, exception_tag, values);</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;}</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160; </div>
<div class="line"><a name="l02756"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a9ba47ad404c47df21b8a875e05b2d2cf"> 2756</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionPackage&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a310dfde86feecf720c6a44124ab7dbca">WasmExceptionPackage::New</a>(</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionTag&gt;</a> exception_tag,</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> values) {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> exception_cons(</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()-&gt;wasm_exception_constructor(), isolate);</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> exception =</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">NewJSObject</a>(exception_cons);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  exception-&gt;InObjectPropertyAtPut(<a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a7a460589a60bdb8f714ae48c9ea6868caed5075d6670bcb3fbea0070f8a69fb27">kTagIndex</a>, *exception_tag);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  exception-&gt;InObjectPropertyAtPut(<a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a7a460589a60bdb8f714ae48c9ea6868cadfaf00fe3bca39744c0eaf6637917b71">kValuesIndex</a>, *values);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmExceptionPackage&gt;(exception);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;}</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#aff0527791499aaefa3d40b6b010470ca"> 2769</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#aff0527791499aaefa3d40b6b010470ca">WasmExceptionPackage::GetExceptionTag</a>(</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionPackage&gt;</a> exception_package) {</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> tag;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1JSReceiver.html#aba4a2cfb4946da1635ae2730b710ff00">JSReceiver::GetProperty</a>(isolate, exception_package,</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                              isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;wasm_exception_tag_symbol())</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;          .ToHandle(&amp;tag)) {</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">return</span> tag;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  }</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;undefined_value();</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;}</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160; </div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a92e3cf4344536855bbcc0c46ec31c269"> 2781</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a92e3cf4344536855bbcc0c46ec31c269">WasmExceptionPackage::GetExceptionValues</a>(</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionPackage&gt;</a> exception_package) {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> values;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1JSReceiver.html#aba4a2cfb4946da1635ae2730b710ff00">JSReceiver::GetProperty</a>(</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;          isolate, exception_package,</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;          isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;wasm_exception_values_symbol())</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;          .ToHandle(&amp;values)) {</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!IsUndefined(*values), IsFixedArray(*values));</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <span class="keywordflow">return</span> values;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  }</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;undefined_value();</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;}</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160; </div>
<div class="line"><a name="l02794"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a2a2a0e61ae504b5c29621f23fe6d1ae8"> 2794</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal.html#a2a2a0e61ae504b5c29621f23fe6d1ae8">EncodeI32ExceptionValue</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> encoded_values,</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                             uint32_t* encoded_index, uint32_t <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) {</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  encoded_values-&gt;set((*encoded_index)++, <a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> &gt;&gt; 16));</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  encoded_values-&gt;set((*encoded_index)++, <a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> &amp; 0xffff));</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;}</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160; </div>
<div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#af7ebacf07d7eaed3247cbd3fca3a35e6"> 2800</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal.html#af7ebacf07d7eaed3247cbd3fca3a35e6">EncodeI64ExceptionValue</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> encoded_values,</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                             uint32_t* encoded_index, uint64_t <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) {</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a2a2a0e61ae504b5c29621f23fe6d1ae8">EncodeI32ExceptionValue</a>(encoded_values, encoded_index,</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                          <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> &gt;&gt; 32));</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a2a2a0e61ae504b5c29621f23fe6d1ae8">EncodeI32ExceptionValue</a>(encoded_values, encoded_index,</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;                          <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;}</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a2ef75ab406122e31bc6a5e46e16e0de9"> 2808</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal.html#a2ef75ab406122e31bc6a5e46e16e0de9">DecodeI32ExceptionValue</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> encoded_values,</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                             uint32_t* encoded_index, uint32_t* <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) {</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  uint32_t msb = Cast&lt;Smi&gt;(encoded_values-&gt;get((*encoded_index)++)).value();</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  uint32_t lsb = Cast&lt;Smi&gt;(encoded_values-&gt;get((*encoded_index)++)).value();</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  *<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = (msb &lt;&lt; 16) | (lsb &amp; 0xffff);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;}</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160; </div>
<div class="line"><a name="l02815"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a833daad0bfc17094878be96c55497d8e"> 2815</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacev8_1_1internal.html#a833daad0bfc17094878be96c55497d8e">DecodeI64ExceptionValue</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> encoded_values,</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                             uint32_t* encoded_index, uint64_t* <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) {</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  uint32_t lsb = 0, msb = 0;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a2ef75ab406122e31bc6a5e46e16e0de9">DecodeI32ExceptionValue</a>(encoded_values, encoded_index, &amp;msb);</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a2ef75ab406122e31bc6a5e46e16e0de9">DecodeI32ExceptionValue</a>(encoded_values, encoded_index, &amp;lsb);</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  *<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = (<span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(msb) &lt;&lt; 32) | <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(lsb);</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;}</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a667827abe3e3649a272fe634ee5b2612"> 2823</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a667827abe3e3649a272fe634ee5b2612">UseGenericWasmToJSWrapper</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63a">wasm::ImportCallKind</a> kind,</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                               <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">wasm::Suspend</a> suspend) {</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="keywordflow">if</span> (kind != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa2c181723941144749e409c197a8d87d1">wasm::ImportCallKind::kJSFunction</a>) {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  }</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a769350a0bf794ab0ebf3c8fc1c8fc450">wasm::IsJSCompatibleSignature</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>));</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="preprocessor">#if !V8_TARGET_ARCH_X64 &amp;&amp; !V8_TARGET_ARCH_ARM64 &amp;&amp; !V8_TARGET_ARCH_ARM &amp;&amp; \</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="preprocessor">    !V8_TARGET_ARCH_IA32 &amp;&amp; !V8_TARGET_ARCH_RISCV64 &amp;&amp;                     \</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="preprocessor">    !V8_TARGET_ARCH_RISCV32 &amp;&amp; !V8_TARGET_ARCH_PPC64 &amp;&amp;                    \</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="preprocessor">    !V8_TARGET_ARCH_S390X &amp;&amp; !V8_TARGET_ARCH_LOONG64 &amp;&amp; !V8_TARGET_ARCH_MIPS64</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="keywordflow">if</span> (suspend != <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843aac51012268661bd5ae03450b2207e5d83">wasm::Suspend::kNoSuspend</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_generic_wrapper;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;}</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160; </div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;constexpr uint32_t kBytesPerExceptionValuesArrayElement = 2;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160; </div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="keywordtype">size_t</span> ComputeEncodedElementSize(wasm::ValueType <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <span class="keywordtype">size_t</span> byte_size = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.value_kind_size();</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(byte_size % kBytesPerExceptionValuesArrayElement, 0);</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(1, byte_size / kBytesPerExceptionValuesArrayElement);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="keywordflow">return</span> byte_size / kBytesPerExceptionValuesArrayElement;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;}</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160; </div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160; </div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#ae6a213f410751f606e8abe6ac7183bbb"> 2860</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a932f3378b7a526a7233f8264f5faa3b3">WasmExceptionPackage::GetEncodedSize</a>(<span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmTag.html">wasm::WasmTag</a>* tag) {</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a932f3378b7a526a7233f8264f5faa3b3">GetEncodedSize</a>(tag-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmTag.html#ab248923eacd85fe26d448e7647a9a142">sig</a>);</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;}</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a932f3378b7a526a7233f8264f5faa3b3"> 2865</a></span>&#160;uint32_t <a class="code" href="classv8_1_1internal_1_1WasmExceptionPackage.html#a932f3378b7a526a7233f8264f5faa3b3">WasmExceptionPackage::GetEncodedSize</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Signature.html">wasm::WasmTagSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  uint32_t encoded_size = 0;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count(); ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code" href="namespacev8_1_1internal.html">i</a>).kind()) {</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;      <span class="keywordflow">case</span> wasm::kI32:</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;      <span class="keywordflow">case</span> wasm::kF32:</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(2, ComputeEncodedElementSize(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        encoded_size += 2;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="keywordflow">case</span> wasm::kI64:</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      <span class="keywordflow">case</span> wasm::kF64:</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(4, ComputeEncodedElementSize(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        encoded_size += 4;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      <span class="keywordflow">case</span> wasm::kS128:</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(8, ComputeEncodedElementSize(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;        encoded_size += 8;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <span class="keywordflow">case</span> wasm::kRef:</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <span class="keywordflow">case</span> wasm::kRefNull:</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;        encoded_size += 1;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordflow">case</span> wasm::kVoid:</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="keywordflow">case</span> wasm::kTop:</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <span class="keywordflow">case</span> wasm::kBottom:</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      <span class="keywordflow">case</span> wasm::kI8:</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">case</span> wasm::kI16:</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      <span class="keywordflow">case</span> wasm::kF16:</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    }</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  }</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  <span class="keywordflow">return</span> encoded_size;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;}</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160; </div>
<div class="line"><a name="l02899"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef"> 2899</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">WasmExportedFunction::IsWasmExportedFunction</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="keywordflow">if</span> (!IsJSFunction(<span class="keywordtype">object</span>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a> js_function = Cast&lt;JSFunction&gt;(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = js_function-&gt;code(<a class="code" href="namespacev8_1_1internal.html#adb23f3baf7223f8c3acb2901e2491245">GetCurrentIsolateForSandbox</a>());</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <span class="keywordflow">if</span> (CodeKind::JS_TO_WASM_FUNCTION != <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;kind() &amp;&amp;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;builtin_id() != Builtin::kGenericJSToWasmInterpreterWrapper &amp;&amp;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;builtin_id() != Builtin::kJSToWasmWrapper &amp;&amp;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;builtin_id() != Builtin::kWasmPromising &amp;&amp;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;builtin_id() != Builtin::kWasmStressSwitch) {</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  }</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(js_function-&gt;shared()-&gt;HasWasmExportedFunctionData(</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#adb23f3baf7223f8c3acb2901e2491245">GetCurrentIsolateForSandbox</a>()));</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;}</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160; </div>
<div class="line"><a name="l02917"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83"> 2917</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">WasmCapiFunction::IsWasmCapiFunction</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="keywordflow">if</span> (!IsJSFunction(<span class="keywordtype">object</span>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a> js_function = Cast&lt;JSFunction&gt;(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <span class="comment">// TODO(jkummerow): Enable this when there is a JavaScript wrapper</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="comment">// able to call this function.</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// if (js_function-&gt;code()-&gt;kind() != CodeKind::WASM_TO_CAPI_FUNCTION) {</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="comment">//   return false;</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="comment">// DCHECK(js_function-&gt;shared()-&gt;HasWasmCapiFunctionData(</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="comment">//        GetCurrentIsolateForSandbox()));</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  <span class="comment">// return true;</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="keywordflow">return</span> js_function-&gt;shared()-&gt;HasWasmCapiFunctionData(</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#adb23f3baf7223f8c3acb2901e2491245">GetCurrentIsolateForSandbox</a>());</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;}</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160; </div>
<div class="line"><a name="l02932"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmCapiFunction.html#a346b5906717c251f219e6fdc0115c39f"> 2932</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmCapiFunction&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a346b5906717c251f219e6fdc0115c39f">WasmCapiFunction::New</a>(</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classuintptr__t.html">Address</a> call_target, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Foreign&gt;</a> embedder_data,</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_index, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="comment">// TODO(jkummerow): Install a JavaScript wrapper. For now, calling</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <span class="comment">// these functions directly is unsupported; they can only be called</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <span class="comment">// from Wasm code.</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <span class="comment">// To support simulator builds, we potentially have to redirect the</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  <span class="comment">// call target (which is an address pointing into the C++ binary).</span></div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  call_target = <a class="code" href="classv8_1_1internal_1_1ExternalReference.html#af4f8bd08709c2b99f51c5dea884e63af">ExternalReference::Create</a>(call_target).<a class="code" href="classv8_1_1internal_1_1ExternalReference.html#aadf8c6aed72f2104bd107b194c7d86a8">address</a>();</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;wasm_func_ref_map();</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmCapiFunctionData&gt;</a> fun_data =</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmCapiFunctionData(</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;          call_target, embedder_data, <a class="code" href="builtins_8h.html#af33bd0f259d8e6a511fd018115e0d62c">BUILTIN_CODE</a>(isolate, Illegal), rtt,</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;          sig_index, <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a303283aba317fedb0d548295dd9f3a2d">sig</a>);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;SharedFunctionInfo&gt;</a> shared =</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewSharedFunctionInfoForWasmCapiFunction(fun_data);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Factory_1_1JSFunctionBuilder.html">Factory::JSFunctionBuilder</a>{isolate, shared, isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>()}</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;          .Build();</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  fun_data-&gt;internal()-&gt;set_external(*<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmCapiFunction&gt;(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;}</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160; </div>
<div class="line"><a name="l02957"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunction.html#ac6583fa41f78a2543566f9812e57146b"> 2957</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExportedFunction&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#ac6583fa41f78a2543566f9812e57146b">WasmExportedFunction::New</a>(</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTrustedInstanceData&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>,</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmFuncRef&gt;</a> func_ref,</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInternalFunction&gt;</a> internal_function, <span class="keywordtype">int</span> arity,</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> export_wrapper) {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(CodeKind::JS_TO_WASM_FUNCTION == export_wrapper-&gt;kind() ||</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;         (export_wrapper-&gt;is_builtin() &amp;&amp;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;          (export_wrapper-&gt;builtin_id() == Builtin::kJSToWasmWrapper ||</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;#<span class="keywordflow">if</span> V8_ENABLE_DRUMBRAKE</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;           export_wrapper-&gt;builtin_id() ==</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;               Builtin::kGenericJSToWasmInterpreterWrapper ||</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;#endif  <span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;           export_wrapper-&gt;builtin_id() == Builtin::kWasmPromising ||</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;           export_wrapper-&gt;builtin_id() == Builtin::kWasmStressSwitch)));</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="keywordtype">int</span> func_index = internal_function-&gt;function_index();</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Factory.html">Factory</a>* factory = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>();</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460">wasm::Promise</a> promise =</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      export_wrapper-&gt;builtin_id() == Builtin::kWasmPromising</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;          ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460a6da34b562310c09460985d37264a7920">wasm::kPromise</a></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;          : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460a4db77348000919f64dc35a43c94c8121">wasm::kNoPromise</a>;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">wasm::WasmModule</a>* module = <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;module();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id =</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a80ed14bf76cb65cc93c6c9ba1b56f75c">canonical_sig_id</a>(module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[func_index].sig_index);</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">LookupFunctionSignature</a>(sig_id);</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExportedFunctionData&gt;</a> function_data =</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      factory-&gt;NewWasmExportedFunctionData(</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;          export_wrapper, <a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>, func_ref, internal_function, <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;          sig_id, <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_wrapper_tiering_budget, promise);</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160; </div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Signature.html">wasm::FunctionSig</a>* function_sig =</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="classv8_1_1internal_1_1Signature.html">wasm::FunctionSig</a>*<span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    uint32_t aligned_size =</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#a26899f1489841558f19ee9d079c7a7ab">wasm::WasmBytecode::JSToWasmWrapperPackedArraySize</a>(function_sig);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordtype">bool</span> hasRefArgs = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#aedbf4c4975cb628b6a71f1f9daaa2ee0">wasm::WasmBytecode::RefArgsCount</a>(function_sig) &gt; 0;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keywordtype">bool</span> hasRefRets = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#af0d04f07fb83ec9836826b0ec50f1004">wasm::WasmBytecode::RefRetsCount</a>(function_sig) &gt; 0;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    function_data-&gt;set_packed_args_size(</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">wasm::WasmInterpreterRuntime::PackedArgsSizeField::encode</a>(</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;            aligned_size) |</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">wasm::WasmInterpreterRuntime::HasRefArgsField::encode</a>(hasRefArgs) |</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        <a class="code" href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">wasm::WasmInterpreterRuntime::HasRefRetsField::encode</a>(hasRefRets));</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  }</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;String&gt;</a> maybe_name;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keywordtype">bool</span> is_asm_js_module = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a70bbfcab50b20ba5da8696e0373a8af4">is_asmjs_module</a>(module);</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <span class="keywordflow">if</span> (is_asm_js_module) {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="comment">// We can use the function name only for asm.js. For WebAssembly, the</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="comment">// function name is specified as the function_index.toString().</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    maybe_name = <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a43a4243e8c99a7f72e7fa6406f303f8b">WasmModuleObject::GetFunctionNameOrNull</a>(</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        isolate, <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;module_object(), isolate),</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        func_index);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  }</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="keywordflow">if</span> (!maybe_name.<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a7c6aa1159cd89fe343afabcaad620b98">ToHandle</a>(&amp;<a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>)) {</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <a class="code" href="classv8_1_1base_1_1EmbeddedVector.html">base::EmbeddedVector&lt;char, 16&gt;</a> buffer;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a6b3543d0c75f5744819dbdf406cd8d46">length</a> = <a class="code" href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">SNPrintF</a>(buffer, <span class="stringliteral">&quot;%d&quot;</span>, func_index);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> = factory</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;               -&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#a0373b86900852e5f348f638a98a235d1">NewStringFromOneByte</a>(</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                   <a class="code" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;::cast</a>(buffer.<a class="code" href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">SubVector</a>(0, <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a6b3543d0c75f5744819dbdf406cd8d46">length</a>)))</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;               .ToHandleChecked();</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  }</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160; </div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;NativeContext&gt;</a> <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a0daec6428bc67855b84ea6c6d4c33c15">context</a>(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>());</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;SharedFunctionInfo&gt;</a> shared =</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;      factory-&gt;NewSharedFunctionInfoForWasmExportedFunction(<a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>, function_data,</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                                                            arity, <a class="code" href="namespacev8_1_1internal.html#aa3d67860d4b49aab967b47ffb6631c1a">kAdapt</a>);</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160; </div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">function_map</a>;</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;  <span class="keywordflow">switch</span> (module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">origin</a>) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">wasm::kWasmOrigin</a>:</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">function_map</a> = isolate-&gt;wasm_exported_function_map();</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902">wasm::kAsmJsSloppyOrigin</a>:</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">function_map</a> = isolate-&gt;sloppy_function_map();</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a">wasm::kAsmJsStrictOrigin</a>:</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">function_map</a> = isolate-&gt;strict_function_map();</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      shared-&gt;set_language_mode(<a class="code" href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858ba35215d4c3b69349b967c421fd68b0b36">LanguageMode::kStrict</a>);</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  }</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160; </div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> js_function =</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Factory_1_1JSFunctionBuilder.html">Factory::JSFunctionBuilder</a>{isolate, shared, <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a0daec6428bc67855b84ea6c6d4c33c15">context</a>}</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;          .set_map(<a class="code" href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">function_map</a>)</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;          .Build();</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <span class="comment">// According to the spec, exported functions should not have a [[Construct]]</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="comment">// method. This does not apply to functions exported from asm.js however.</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(is_asm_js_module, IsConstructor(*js_function));</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;has_instance_object()) {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    shared-&gt;set_script(<a class="code" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;module_object()-&gt;script(), <a class="code" href="namespacev8.html#a13596ed4ca024abd4790ec46b62c2097">kReleaseStore</a>);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    shared-&gt;set_script(*isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;undefined_value(), <a class="code" href="namespacev8.html#a13596ed4ca024abd4790ec46b62c2097">kReleaseStore</a>);</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  }</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  function_data-&gt;internal()-&gt;set_external(*js_function);</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmExportedFunction&gt;(js_function);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;}</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160; </div>
<div class="line"><a name="l03059"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunctionData.html#aafe79a7d521f191a2e276e90ab8e92be"> 3059</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunctionData.html#aafe79a7d521f191a2e276e90ab8e92be">WasmExportedFunctionData::MatchesSignature</a>(</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> other_canonical_type_index) {</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a09f520b3ab3e3fa22827a66c4eebcb59">IsCanonicalSubtype</a>(</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmExportedFunctionData.html#a61d4218f4ec2d1c304c144d07011bfb3">sig_index</a>(), other_canonical_type_index);</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;}</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160; </div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExportedFunction.html#a1185042522e2a2bf4f029417bb5dcf3c"> 3066</a></span>&#160;std::unique_ptr&lt;char[]&gt; <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a1185042522e2a2bf4f029417bb5dcf3c">WasmExportedFunction::GetDebugName</a>(</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>) {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  constexpr <span class="keyword">const</span> <span class="keywordtype">char</span> kPrefix[] = <span class="stringliteral">&quot;js-to-wasm:&quot;</span>;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="comment">// prefix + parameters + delimiter + returns + zero byte</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <span class="keywordtype">size_t</span> len = strlen(kPrefix) + <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;all().size() + 2;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <span class="keyword">auto</span> buffer = <a class="code" href="classv8_1_1base_1_1OwnedVector.html#a2661cfcee856d5f551befac70c31a730">base::OwnedVector&lt;char&gt;::New</a>(len);</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  memcpy(buffer.begin(), kPrefix, strlen(kPrefix));</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1torque.html#a5abb431dd0527f28bc5f38038f8d7e62">PrintSignature</a>(buffer.as_vector() + strlen(kPrefix), <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>);</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="keywordflow">return</span> buffer.ReleaseData();</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;}</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160; </div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f"> 3078</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">WasmJSFunction::IsWasmJSFunction</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="keywordflow">if</span> (!IsJSFunction(<span class="keywordtype">object</span>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a> js_function = Cast&lt;JSFunction&gt;(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="keywordflow">return</span> js_function-&gt;shared()-&gt;HasWasmJSFunctionData(</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#adb23f3baf7223f8c3acb2901e2491245">GetCurrentIsolateForSandbox</a>());</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;}</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160; </div>
<div class="line"><a name="l03085"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a05e9cdedf4032400775ed1056dc71feb"> 3085</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a05e9cdedf4032400775ed1056dc71feb">CreateStructMap</a>(</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> struct_index,</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> opt_rtt_parent,</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;NativeContext&gt;</a> opt_native_context) {</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalStructType.html">wasm::CanonicalStructType</a>* <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> =</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a13aa3a05620a7a9732ac5274d80b62b5">LookupStruct</a>(struct_index);</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> shared = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aae73c94c9da97889bfdb35f3756e497b">IsShared</a>(struct_index);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> inobject_properties = 0;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">// We have to use the variable size sentinel because the instance size</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="comment">// stored directly in a Map is capped at 255 pointer sizes.</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> map_instance_size = <a class="code" href="namespacev8_1_1internal.html#a67d120bf8a8f82f8b1a4075a607ecc55">kVariableSizeSentinel</a>;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">InstanceType</a> instance_type = WASM_STRUCT_TYPE;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  <span class="comment">// TODO(jkummerow): If NO_ELEMENTS were supported, we could use that here.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> elements_kind = <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cabe08801c504e24eba74657d920a18f30">TERMINAL_FAST_ELEMENTS_KIND</a>;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> no_array_element = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#accd7a01a4feacf7239992e49a422c952">wasm::kWasmBottom</a>;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <span class="comment">// If we had a CanonicalHeapType, we could use that here.</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> heaptype = <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a5f242cbe0f130951b31358c708e796bb">wasm::CanonicalValueType::Ref</a>(</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      struct_index, shared, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921a37d24e1221658f0e0333a512fdbcd2f0">wasm::RefTypeKind::kStruct</a>);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTypeInfo&gt;</a> type_info = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmTypeInfo(</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      heaptype, no_array_element, opt_rtt_parent, shared);</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <span class="comment">// TODO(manoskouk): Combine `shared` with contextful maps.</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="keywordflow">if</span> (shared) {</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    map = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a07ecf0d639df2cfec26a358dfd826897">NewMapWithMetaMap</a>(</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;meta_map(), instance_type, map_instance_size,</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        elements_kind, inobject_properties, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa666d5c2572774089f28df0b4751f6521">AllocationType::kSharedMap</a>);</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opt_native_context.<a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">is_null</a>()) {</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    map = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a0c86e0a3f9aec2327be970da03af4e9c">NewContextlessMap</a>(</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        instance_type, map_instance_size, elements_kind, inobject_properties);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    map = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a4b252a0366739cd2612e0a11b54827b9">NewContextfulMap</a>(</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        opt_native_context, instance_type, map_instance_size, elements_kind,</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        inobject_properties);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  }</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  map-&gt;set_wasm_type_info(*type_info);</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  map-&gt;set_is_extensible(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> real_instance_size = <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#a0f976add8d54cabc42cc6cd961299590">WasmStruct::Size</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <a class="code" href="classv8_1_1internal_1_1WasmStruct.html#a9777734ea79e85221a87ed3417b9f01d">WasmStruct::EncodeInstanceSizeInMap</a>(real_instance_size, *map);</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <span class="keywordflow">return</span> map;</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;}</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a50f479f3aa59463f4b3636c7d9c1fb1f"> 3126</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a50f479f3aa59463f4b3636c7d9c1fb1f">CreateArrayMap</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                                 <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> array_index,</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                                 <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> opt_rtt_parent) {</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalArrayType.html">wasm::CanonicalArrayType</a>* <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> =</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a5fb6b7ad8c3b4aea3365cf98d5ed0392">LookupArray</a>(array_index);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> element_type = <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>-&gt;element_type();</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> shared = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aae73c94c9da97889bfdb35f3756e497b">IsShared</a>(array_index);</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> inobject_properties = 0;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> map_instance_size = <a class="code" href="namespacev8_1_1internal.html#a67d120bf8a8f82f8b1a4075a607ecc55">kVariableSizeSentinel</a>;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">InstanceType</a> instance_type = WASM_ARRAY_TYPE;</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> elements_kind = <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cabe08801c504e24eba74657d920a18f30">TERMINAL_FAST_ELEMENTS_KIND</a>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> heaptype = <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a5f242cbe0f130951b31358c708e796bb">wasm::CanonicalValueType::Ref</a>(</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      array_index, shared, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921aafc9b058c0fa7b9d2556bbcdcc49a272">wasm::RefTypeKind::kArray</a>);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTypeInfo&gt;</a> type_info = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmTypeInfo(</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;      heaptype, element_type, opt_rtt_parent, shared);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160; </div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map =</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      shared ? isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a07ecf0d639df2cfec26a358dfd826897">NewMapWithMetaMap</a>(</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                   isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;meta_map(), instance_type,</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                   map_instance_size, elements_kind, inobject_properties,</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                   <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa666d5c2572774089f28df0b4751f6521">AllocationType::kSharedMap</a>)</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;             : isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a0c86e0a3f9aec2327be970da03af4e9c">NewContextlessMap</a>(</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                   instance_type, map_instance_size, elements_kind,</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                   inobject_properties);</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  map-&gt;set_wasm_type_info(*type_info);</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  map-&gt;SetInstanceDescriptors(isolate,</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                              *isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;empty_descriptor_array(), 0,</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                              <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75">SKIP_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  map-&gt;set_is_extensible(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <a class="code" href="classv8_1_1internal_1_1WasmArray.html#ac8a34e383a690a1892ed22e5e10b8a49">WasmArray::EncodeElementSizeInMap</a>(element_type.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a09cf4ea5d5c5131cd99bf69b427dd13f">value_kind_size</a>(), *map);</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <span class="keywordflow">return</span> map;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;}</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160; </div>
<div class="line"><a name="l03159"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#ad8e371531759bf81f85b50e36e86d4f8"> 3159</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ad8e371531759bf81f85b50e36e86d4f8">CreateFuncRefMap</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                                   <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>,</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;                                   <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> opt_rtt_parent,</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                                   <span class="keywordtype">bool</span> shared) {</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> inobject_properties = 0;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">InstanceType</a> instance_type = WASM_FUNC_REF_TYPE;</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> elements_kind = <a class="code" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cabe08801c504e24eba74657d920a18f30">TERMINAL_FAST_ELEMENTS_KIND</a>;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> no_array_element = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#accd7a01a4feacf7239992e49a422c952">wasm::kWasmBottom</a>;</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> heaptype =</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a5f242cbe0f130951b31358c708e796bb">wasm::CanonicalValueType::Ref</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, shared, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921ad77fcb77da3dc9a391cbdfd264f8d7d9">wasm::RefTypeKind::kFunction</a>);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmTypeInfo&gt;</a> type_info = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;NewWasmTypeInfo(</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      heaptype, no_array_element, opt_rtt_parent, shared);</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  constexpr <span class="keywordtype">int</span> kInstanceSize = WasmFuncRef::kSize;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      kInstanceSize,</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      Cast&lt;Map&gt;(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a3600858dfb405ce24551f99bd9fe2c2c">root</a>(RootIndex::kWasmFuncRefMap))-&gt;instance_size());</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Factory.html#a0c86e0a3f9aec2327be970da03af4e9c">NewContextlessMap</a>(</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      instance_type, kInstanceSize, elements_kind, inobject_properties,</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      shared ? <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa666d5c2572774089f28df0b4751f6521">AllocationType::kSharedMap</a> : <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aafb5397a5037cdaeda0a604dcbfe8c01f">AllocationType::kMap</a>);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  map-&gt;set_wasm_type_info(*type_info);</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <span class="keywordflow">return</span> map;</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;}</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunction.html#a5f4776e0c31cabfacc5c5cfa6d1a6caa"> 3182</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmJSFunction&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#a5f4776e0c31cabfacc5c5cfa6d1a6caa">WasmJSFunction::New</a>(</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1Signature.html">wasm::FunctionSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>,</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSReceiver&gt;</a> callable, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">wasm::Suspend</a> suspend) {</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;all().size(), <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>);</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  <span class="keywordtype">int</span> parameter_count = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count());</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Factory.html">Factory</a>* factory = isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>();</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160; </div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> rtt;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;NativeContext&gt;</a> <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a0daec6428bc67855b84ea6c6d4c33c15">context</a>(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">native_context</a>());</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160; </div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;  static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a2e079999502e577b181583a71bb096ef">wasm::kMaxCanonicalTypes</a> &lt;= <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="comment">// TODO(clemensb): Merge the next two lines into a single call.</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> sig_id =</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa7d63877150be29e04f49d189ea88c99">AddRecursiveGroup</a>(<a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>);</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* canonical_sig =</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">wasm::GetTypeCanonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">LookupFunctionSignature</a>(sig_id);</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160; </div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aac1117f1918f3c8580be0e192a1c7307">wasm::TypeCanonicalizer::PrepareForCanonicalTypeId</a>(isolate, sig_id);</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160; </div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WeakFixedArray&gt;</a> canonical_rtts(</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">heap</a>()-&gt;wasm_canonical_rtts(), isolate);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;MaybeObject&gt;</a> maybe_canonical_map = canonical_rtts-&gt;get(sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>);</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160; </div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">if</span> (!maybe_canonical_map.<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">IsCleared</a>()) {</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    rtt = <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        Cast&lt;Map&gt;(maybe_canonical_map.<a class="code" href="classv8_1_1internal_1_1TaggedImpl.html#af954049cb1526fdcdff6faad97f5fbac">GetHeapObjectAssumeWeak</a>()), isolate);</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    rtt = <a class="code" href="namespacev8_1_1internal.html#ad8e371531759bf81f85b50e36e86d4f8">CreateFuncRefMap</a>(isolate, sig_id, <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    canonical_rtts-&gt;set(sig_id.<a class="code" href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">index</a>, <a class="code" href="namespacev8_1_1internal.html#a96a98d1219c08bac1c5c91ba9dacd1d4">MakeWeak</a>(*rtt));</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  }</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160; </div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <span class="keywordtype">int</span> expected_arity = parameter_count;</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63a">wasm::ImportCallKind</a> kind;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  <span class="keywordflow">if</span> (IsJSFunction(*callable)) {</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;SharedFunctionInfo&gt;</a> shared = Cast&lt;JSFunction&gt;(callable)-&gt;shared();</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">if</span> (shared-&gt;HasWasmFunctionData(isolate)) {</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;      kind = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa5427d5490900477a371648688dfbb95b">wasm::ImportCallKind::kUseCallBuiltin</a>;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;      expected_arity =</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;          shared-&gt;internal_formal_parameter_count_without_receiver();</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      kind = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa2c181723941144749e409c197a8d87d1">wasm::ImportCallKind::kJSFunction</a>;</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    }</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    kind = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa5427d5490900477a371648688dfbb95b">wasm::ImportCallKind::kUseCallBuiltin</a>;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  }</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160; </div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html">wasm::WasmImportWrapperCache</a>* cache = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">wasm::GetWasmImportWrapperCache</a>();</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <span class="comment">// Initialize the import wrapper cache if that hasn&#39;t happened yet.</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  cache-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a62f4cb8fc02e1bbfe2ed0f09ce2aa050">LazyInitialize</a>(isolate);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  std::shared_ptr&lt;wasm::WasmImportWrapperHandle&gt; wrapper_handle =</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      cache-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#afdfee412fc036961cd7dd6c121d628da">Get</a>(isolate, kind, sig_id, expected_arity, suspend, canonical_sig);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160; </div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <span class="keywordtype">bool</span> should_clear_call_origin = wrapper_handle-&gt;has_code();</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160; </div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> js_to_js_wrapper_code =</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a769350a0bf794ab0ebf3c8fc1c8fc450">wasm::IsJSCompatibleSignature</a>(canonical_sig)</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;          ? isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">code_handle</a>(Builtin::kJSToJSWrapper)</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;          : isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">code_handle</a>(Builtin::kJSToJSWrapperInvalidSig);</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160; </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmJSFunctionData&gt;</a> function_data =</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;      factory-&gt;NewWasmJSFunctionData(sig_id, callable, js_to_js_wrapper_code,</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;                                     rtt, suspend, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460a4db77348000919f64dc35a43c94c8121">wasm::kNoPromise</a>,</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                                     wrapper_handle);</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmInternalFunction&gt;</a> internal_function{</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      function_data-&gt;internal(), isolate};</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="comment">// Some later DCHECKs assume that we don&#39;t have a {call_origin} when</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  <span class="comment">// the function already uses a compiled wrapper.</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keywordflow">if</span> (should_clear_call_origin) {</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    Cast&lt;WasmImportData&gt;(internal_function-&gt;implicit_arg())</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        -&gt;clear_call_origin();</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160; </div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> = factory-&gt;Function_string();</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <span class="keywordflow">if</span> (IsJSFunction(*callable)) {</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> = <a class="code" href="classv8_1_1internal_1_1JSFunction.html#abad4b9d80b65ea3058231db04c2a9129">JSFunction::GetDebugName</a>(isolate, Cast&lt;JSFunction&gt;(callable));</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a> = String::Flatten(isolate, <a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>);</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  }</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;SharedFunctionInfo&gt;</a> shared =</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      factory-&gt;NewSharedFunctionInfoForWasmJSFunction(<a class="code" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>, function_data);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  shared-&gt;set_internal_formal_parameter_count(</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aad3893fccd0a1a6e0ddcdf0a940428c7">JSParameterCount</a>(parameter_count));</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> js_function =</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Factory_1_1JSFunctionBuilder.html">Factory::JSFunctionBuilder</a>{isolate, shared, <a class="code" href="classv8_1_1internal_1_1JSFunction.html#a0daec6428bc67855b84ea6c6d4c33c15">context</a>}</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;          .set_map(isolate-&gt;wasm_exported_function_map())</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;          .Build();</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  internal_function-&gt;set_external(*js_function);</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmJSFunction&gt;(js_function);</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;}</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160; </div>
<div class="line"><a name="l03273"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunctionData.html#af782694f73663f80aab12fcc5ec2787a"> 3273</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSReceiver&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#af782694f73663f80aab12fcc5ec2787a">WasmJSFunctionData::GetCallable</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  <span class="keywordflow">return</span> Cast&lt;JSReceiver&gt;(</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;      Cast&lt;WasmImportData&gt;(<span class="keyword">internal</span>()-&gt;implicit_arg())-&gt;callable());</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;}</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160; </div>
<div class="line"><a name="l03278"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a9e186bca027fc2dd4d39d21c4508fd65"> 3278</a></span>&#160;<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">wasm::Suspend</a> <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a9e186bca027fc2dd4d39d21c4508fd65">WasmJSFunctionData::GetSuspend</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  <span class="keywordflow">return</span> Cast&lt;WasmImportData&gt;(<span class="keyword">internal</span>()-&gt;implicit_arg())-&gt;suspend();</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;}</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a1077c937f7fbff28184a2a9146fb87dc"> 3282</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a1077c937f7fbff28184a2a9146fb87dc">WasmJSFunctionData::GetSignature</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">type_canonicalizer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">LookupFunctionSignature</a>(</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#ad273501a0b5fb4cbba3dcdd43c763995">sig_index</a>());</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;}</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160; </div>
<div class="line"><a name="l03287"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a0b2e66ac19774c9fed00276e33a7a43d"> 3287</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a0b2e66ac19774c9fed00276e33a7a43d">WasmJSFunctionData::MatchesSignature</a>(</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">wasm::CanonicalTypeIndex</a> other_canonical_sig_index)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <span class="comment">// TODO(14034): Change this if indexed types are allowed.</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">wasm::CanonicalSig</a>* <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#a1077c937f7fbff28184a2a9146fb87dc">GetSignature</a>();</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">wasm::CanonicalValueType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> : <a class="code" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;all()) <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>.has_index());</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  <span class="comment">// TODO(14034): Check for subtyping instead if WebAssembly.Function can define</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  <span class="comment">// signature supertype.</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmJSFunctionData.html#ad273501a0b5fb4cbba3dcdd43c763995">sig_index</a>() == other_canonical_sig_index;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;}</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160; </div>
<div class="line"><a name="l03299"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExternalFunction.html#ac2a96212bef554982c768f1c04f72d20"> 3299</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1WasmExternalFunction.html#ac2a96212bef554982c768f1c04f72d20">WasmExternalFunction::IsWasmExternalFunction</a>(<a class="code" href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">WasmExportedFunction::IsWasmExportedFunction</a>(<span class="keywordtype">object</span>) ||</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;         <a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">WasmJSFunction::IsWasmJSFunction</a>(<span class="keywordtype">object</span>) ||</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;         <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">WasmCapiFunction::IsWasmCapiFunction</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;}</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1WasmExceptionTag.html#a16f4ecfd034d8f83eb0b57c2dfeb7e86"> 3305</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmExceptionTag&gt;</a> <a class="code" href="classv8_1_1internal_1_1WasmExceptionTag.html#a16f4ecfd034d8f83eb0b57c2dfeb7e86">WasmExceptionTag::New</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;                                                     <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = Cast&lt;WasmExceptionTag&gt;(isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#aceeb1b599909d7e0870bd25b99b88726">NewStruct</a>(</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      WASM_EXCEPTION_TAG_TYPE, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>));</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;set_index(<a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;}</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160; </div>
<div class="line"><a name="l03313"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1AsmWasmData.html#acc0ab9f86a21e107f090ac2725be47ce"> 3313</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1Handle.html">Handle&lt;AsmWasmData&gt;</a> <a class="code" href="classv8_1_1internal_1_1AsmWasmData.html#acc0ab9f86a21e107f090ac2725be47ce">AsmWasmData::New</a>(</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, std::shared_ptr&lt;wasm::NativeModule&gt; native_module,</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;HeapNumber&gt;</a> uses_bitset) {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module-&gt;module();</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="keywordtype">size_t</span> memory_estimate =</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a>(module) +</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a329950b560b30699bd218b9622eedda7">wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize</a>(module);</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Managed&lt;wasm::NativeModule&gt;</a>&gt; managed_native_module =</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;      <a class="code" href="classv8_1_1internal_1_1Managed.html#a1c10cb948281b864db32d8af25a7b7d9">Managed&lt;wasm::NativeModule&gt;::From</a>(isolate, memory_estimate,</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;                                        std::move(native_module));</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = Cast&lt;AsmWasmData&gt;(</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#aceeb1b599909d7e0870bd25b99b88726">NewStruct</a>(ASM_WASM_DATA_TYPE, <a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">AllocationType::kOld</a>));</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;set_managed_native_module(*managed_native_module);</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;set_uses_bitset(*uses_bitset);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;}</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160; </div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03331"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a04fa3c6a01a022927ac37eefe104a26a"> 3331</a></span>&#160;constexpr <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a04fa3c6a01a022927ac37eefe104a26a">kInt31MaxValue</a> = 0x3fffffff;</div>
<div class="line"><a name="l03332"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac33e40695ed20cfd97c2f081dafd7c38"> 3332</a></span>&#160;constexpr <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac33e40695ed20cfd97c2f081dafd7c38">kInt31MinValue</a> = -<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a04fa3c6a01a022927ac37eefe104a26a">kInt31MaxValue</a> - 1;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160; </div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;<span class="comment">// Tries to canonicalize a HeapNumber to an i31ref Smi. Returns the original</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="comment">// HeapNumber if it fails.</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790"> 3336</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790">CanonicalizeHeapNumber</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> number,</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;                                            <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a>) {</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="keyword">auto</span> heap_number = Cast&lt;HeapNumber&gt;(number);</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  <span class="keywordtype">double</span> double_value = heap_number-&gt;value();</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  <span class="keywordflow">if</span> (double_value &gt;= <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac33e40695ed20cfd97c2f081dafd7c38">kInt31MinValue</a> &amp;&amp; double_value &lt;= <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a04fa3c6a01a022927ac37eefe104a26a">kInt31MaxValue</a> &amp;&amp;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      !<a class="code" href="namespacev8_1_1internal.html#ac2e67965c23f31e787267da33347b3d7">IsMinusZero</a>(double_value) &amp;&amp;</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      double_value == <a class="code" href="namespacev8_1_1internal.html#a61075b05a94d1b5188fa013f53b22606">FastI2D</a>(<a class="code" href="namespacev8_1_1internal.html#aa4cc6fe7d4a1473292e27590723c7543">FastD2I</a>(double_value))) {</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(<a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(<a class="code" href="namespacev8_1_1internal.html#aa4cc6fe7d4a1473292e27590723c7543">FastD2I</a>(double_value)), isolate);</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a> &amp;&amp; !<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(*heap_number)) {</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#a3b9ecb63b6b4fae0f26b4f8883ee48ed">NewHeapNumber</a>&lt;<a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa420fc4b93a98a0b612db8f2f69463514">AllocationType::kSharedOld</a>&gt;(</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;        double_value);</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;  }</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="keywordflow">return</span> number;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;}</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;<span class="comment">// Tries to canonicalize a Smi into an i31 Smi. Returns a HeapNumber if it</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;<span class="comment">// fails.</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226"> 3354</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226">CanonicalizeSmi</a>(<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> smi, <a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                                     <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a>) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <span class="keywordflow">if</span> constexpr (<a class="code" href="namespacev8_1_1internal.html#a86aed8f961b5086cb7d5ae530a8770f5">SmiValuesAre31Bits</a>()) <span class="keywordflow">return</span> smi;</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160; </div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = Cast&lt;Smi&gt;(*smi).value();</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  <span class="keywordflow">if</span> (value &lt;= kInt31MaxValue &amp;&amp; value &gt;= <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac33e40695ed20cfd97c2f081dafd7c38">kInt31MinValue</a>) {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">return</span> smi;</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">is_shared</a>) {</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#a3b9ecb63b6b4fae0f26b4f8883ee48ed">NewHeapNumber</a>&lt;<a class="code" href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa420fc4b93a98a0b612db8f2f69463514">AllocationType::kSharedOld</a>&gt;(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1FactoryBase.html#a3b9ecb63b6b4fae0f26b4f8883ee48ed">NewHeapNumber</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;  }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;}</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacewasm.html">wasm</a> {</div>
<div class="line"><a name="l03371"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html"> 3371</a></span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03372"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf"> 3372</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf">CheckExpectedSharedness</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>,</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">CanonicalValueType</a> expected,</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span>** error_message) {</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_shared &amp;&amp; (*value).IsHeapObject()) {</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html">Tagged&lt;HeapObject&gt;</a> heap_obj = (*value).<a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#acb5ed8ed88a0e4c54785c0dde65f87a4">cast</a>&lt;<a class="code" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a>&gt;();</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">if</span> (expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>() != <a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_obj)) {</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      *error_message =</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;          expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>()</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;              ? <span class="stringliteral">&quot;unshared object is not allowed for shared heap types&quot;</span></div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;              : <span class="stringliteral">&quot;shared object is not allowed for unshared heap types&quot;</span>;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    }</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  }</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;}</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160; </div>
<div class="line"><a name="l03389"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a4f50ceeaf443c5da42053153d92f4bdb"> 3389</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a4f50ceeaf443c5da42053153d92f4bdb">ConvertToSharedIfExpected</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;                                      <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a>* <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>,</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                                      <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">CanonicalValueType</a> expected,</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                                      <span class="keyword">const</span> <span class="keywordtype">char</span>** error_message) {</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_shared &amp;&amp; expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>() &amp;&amp;</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;      (**value).IsHeapObject()) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html">Tagged&lt;HeapObject&gt;</a> heap_obj = (**value).<a class="code" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#acb5ed8ed88a0e4c54785c0dde65f87a4">cast</a>&lt;<a class="code" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a>&gt;();</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_obj)) {</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      <span class="keywordflow">if</span> (!Object::Share(isolate, *<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, <a class="code" href="namespacev8_1_1internal.html#adbf2c933630f2f4bb419ce1ba04ce760a4b0c7b00af69f6f81914acaa3a9849ee">ShouldThrow::kDontThrow</a>)</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;               .ToHandle(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        *error_message = <span class="stringliteral">&quot;unshared object is not allowed for shared heap types&quot;</span>;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  }</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;}</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160; </div>
<div class="line"><a name="l03408"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074"> 3408</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074">JSToWasmObject</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;                                         <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>,</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;                                         <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">CanonicalValueType</a> expected,</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                                         <span class="keyword">const</span> <span class="keywordtype">char</span>** error_message) {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#aa459140e8766cc7f6bdf67dcd174ad1e">is_object_reference</a>());</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;  <span class="keywordflow">if</span> (expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a777139722a5dbb1f696aa90375aab584">kind</a>() == <a class="code" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3">kRefNull</a> &amp;&amp; <a class="code" href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">IsNull</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate)) {</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    <span class="keywordflow">switch</span> (expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a55e602025f5b4c74e00c757608fda100">heap_representation</a>()) {</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9ae3ff6d40e4ac963dbe392d083e73bb">HeapType::kStringViewWtf8</a>:</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;        *error_message = <span class="stringliteral">&quot;stringview_wtf8 has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9c79438cff5460b1bbe855546a90f95b">HeapType::kStringViewWtf16</a>:</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;        *error_message = <span class="stringliteral">&quot;stringview_wtf16 has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa320906bfc64211b7edc96b87e7bb0b1f">HeapType::kStringViewIter</a>:</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;        *error_message = <span class="stringliteral">&quot;stringview_iter has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa446676998f26658060f286eeef6669df">HeapType::kExn</a>:</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;        *error_message = <span class="stringliteral">&quot;invalid type (ref null exn)&quot;</span>;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa529e9f3c6770fd6ad2816bde1bd1b850">HeapType::kNoExn</a>:</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        *error_message = <span class="stringliteral">&quot;invalid type (ref null noexn)&quot;</span>;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa95dbdc9ef58bd0036eb0d473fa446447">HeapType::kNoCont</a>:</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;        *error_message = <span class="stringliteral">&quot;invalid type (ref null nocont)&quot;</span>;</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fab9ec01b11894d2e81d42dc19629e0d3d">HeapType::kCont</a>:</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        *error_message = <span class="stringliteral">&quot;invalid type (ref null cont)&quot;</span>;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;        <span class="keywordflow">return</span> expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#ad4ba8a380246eb2e204befd51ae7b94a">use_wasm_null</a>() ? isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;wasm_null()</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                                        : <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    }</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160; </div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="keywordflow">switch</span> (expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a9b1bb53f0e9ccecf9708e9787d4ead8f">heap_representation_non_shared</a>()) {</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa1f943ff029672b2df1e322fc75323eaf">HeapType::kFunc</a>: {</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="keywordflow">if</span> (!(<a class="code" href="classv8_1_1internal_1_1WasmExternalFunction.html#ac2a96212bef554982c768f1c04f72d20">WasmExternalFunction::IsWasmExternalFunction</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) ||</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            <a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">WasmCapiFunction::IsWasmCapiFunction</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>))) {</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        *error_message =</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            <span class="stringliteral">&quot;function-typed object must be null (if nullable) or a Wasm &quot;</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;            <span class="stringliteral">&quot;function object&quot;</span>;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      }</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;          Cast&lt;JSFunction&gt;(*value)-&gt;shared()-&gt;wasm_function_data()-&gt;func_ref(),</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;          isolate);</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    }</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951">HeapType::kExtern</a>: {</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a4f50ceeaf443c5da42053153d92f4bdb">ConvertToSharedIfExpected</a>(isolate, &amp;<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, expected,</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                                     error_message)) {</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;      }</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">IsNull</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate)) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      *error_message = <span class="stringliteral">&quot;null is not allowed for (ref extern)&quot;</span>;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    }</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fab1897e4b7a37cdfc22e53ac3d2b4cf80">HeapType::kAny</a>: {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      <span class="comment">// TODO(mliedtke): We need to construct heap numbers with correct</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <span class="comment">// sharedness.</span></div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226">CanonicalizeSmi</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      }</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      <span class="keywordflow">if</span> (IsHeapNumber(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790">CanonicalizeHeapNumber</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;      }</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a4f50ceeaf443c5da42053153d92f4bdb">ConvertToSharedIfExpected</a>(isolate, &amp;<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, expected,</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                                     error_message)) {</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      }</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">IsNull</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate)) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      *error_message = <span class="stringliteral">&quot;null is not allowed for (ref any)&quot;</span>;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    }</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa446676998f26658060f286eeef6669df">HeapType::kExn</a>:</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      *error_message = <span class="stringliteral">&quot;invalid type (ref exn)&quot;</span>;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fab9ec01b11894d2e81d42dc19629e0d3d">HeapType::kCont</a>:</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      *error_message = <span class="stringliteral">&quot;invalid type (ref cont)&quot;</span>;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fac8f8cc8d98a963031849efc0bccb2e99">HeapType::kStruct</a>: {</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf">CheckExpectedSharedness</a>(isolate, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, expected, error_message)) {</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      }</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      <span class="keywordflow">if</span> (IsWasmStruct(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      }</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      *error_message =</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;          <span class="stringliteral">&quot;structref object must be null (if nullable) or a wasm struct&quot;</span>;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    }</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa5ba0faa894795494a24087253c072837">HeapType::kArray</a>: {</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf">CheckExpectedSharedness</a>(isolate, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, expected, error_message)) {</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      }</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <span class="keywordflow">if</span> (IsWasmArray(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      }</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      *error_message =</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;          <span class="stringliteral">&quot;arrayref object must be null (if nullable) or a wasm array&quot;</span>;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    }</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa6d6b40bce596e155c6368d23522c8280">HeapType::kEq</a>: {</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> truncated =</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226">CanonicalizeSmi</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*truncated)) <span class="keywordflow">return</span> truncated;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsHeapNumber(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> truncated =</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790">CanonicalizeHeapNumber</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*truncated)) <span class="keywordflow">return</span> truncated;</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsWasmStruct(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) || IsWasmArray(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf">CheckExpectedSharedness</a>(isolate, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, expected, error_message)) {</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        }</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      }</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;      *error_message =</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;          <span class="stringliteral">&quot;eqref object must be null (if nullable), or a wasm &quot;</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;          <span class="stringliteral">&quot;struct/array, or a Number that fits in i31ref range&quot;</span>;</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    }</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faecd5fb2d44d9d12ded1d3748e2c9852a">HeapType::kI31</a>: {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> truncated =</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226">CanonicalizeSmi</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*truncated)) <span class="keywordflow">return</span> truncated;</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsHeapNumber(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> truncated =</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790">CanonicalizeHeapNumber</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, isolate, expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">is_shared</a>());</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(*truncated)) <span class="keywordflow">return</span> truncated;</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      }</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      *error_message =</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;          <span class="stringliteral">&quot;i31ref object must be null (if nullable) or a Number that fits &quot;</span></div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;          <span class="stringliteral">&quot;in i31ref range&quot;</span>;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    }</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fac4556d4417e6893fa9f6d8aa4506a401">HeapType::kString</a>:</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      <span class="keywordflow">if</span> (IsString(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      *error_message = <span class="stringliteral">&quot;wrong type (expected a string)&quot;</span>;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9ae3ff6d40e4ac963dbe392d083e73bb">HeapType::kStringViewWtf8</a>:</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      *error_message = <span class="stringliteral">&quot;stringview_wtf8 has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9c79438cff5460b1bbe855546a90f95b">HeapType::kStringViewWtf16</a>:</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;      *error_message = <span class="stringliteral">&quot;stringview_wtf16 has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa320906bfc64211b7edc96b87e7bb0b1f">HeapType::kStringViewIter</a>:</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      *error_message = <span class="stringliteral">&quot;stringview_iter has no JS representation&quot;</span>;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa48a0832a4b4a496ffab357a84bff6be9">HeapType::kNoFunc</a>:</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa0282c61a075219b5972d3d3112c0a10a">HeapType::kNoExtern</a>:</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa529e9f3c6770fd6ad2816bde1bd1b850">HeapType::kNoExn</a>:</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa95dbdc9ef58bd0036eb0d473fa446447">HeapType::kNoCont</a>:</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fafc5645deb64028bd000dc0583f6a2645">HeapType::kNone</a>: {</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      *error_message = <span class="stringliteral">&quot;only null allowed for null types&quot;</span>;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    }</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <span class="keywordflow">default</span>: {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">has_index</a>());</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;      <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">CanonicalTypeIndex</a> canonical_index = expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#ab58fc78ee1cd5b17394acbc1a9fb7225">ref_index</a>();</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;      <span class="keyword">auto</span> type_canonicalizer = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">type_canonicalizer</a>();</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160; </div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">WasmExportedFunction::IsWasmExportedFunction</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;        <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmExportedFunction&gt;</a> <span class="keyword">function</span> =</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;            Cast&lt;WasmExportedFunction&gt;(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">CanonicalTypeIndex</a> real_type_index =</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <span class="keyword">function</span>-&gt;shared()-&gt;wasm_exported_function_data()-&gt;sig_index();</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        <span class="keywordflow">if</span> (!type_canonicalizer-&gt;IsCanonicalSubtype(real_type_index,</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;                                                    canonical_index)) {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;          *error_message =</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;              <span class="stringliteral">&quot;assigned exported function has to be a subtype of the &quot;</span></div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;              <span class="stringliteral">&quot;expected type&quot;</span>;</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        }</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmExternalFunction&gt;(*value)-&gt;func_ref(),</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;                             isolate);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">WasmJSFunction::IsWasmJSFunction</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="keywordflow">if</span> (!Cast&lt;WasmJSFunction&gt;(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;                 -&gt;shared()</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;                 -&gt;wasm_js_function_data()</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                 -&gt;MatchesSignature(canonical_index)) {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;          *error_message =</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;              <span class="stringliteral">&quot;assigned WebAssembly.Function has to be a subtype of the &quot;</span></div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;              <span class="stringliteral">&quot;expected type&quot;</span>;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        }</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmExternalFunction&gt;(*value)-&gt;func_ref(),</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;                             isolate);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">WasmCapiFunction::IsWasmCapiFunction</a>(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keywordflow">if</span> (!Cast&lt;WasmCapiFunction&gt;(*value)-&gt;MatchesSignature(</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                canonical_index)) {</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;          *error_message =</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;              <span class="stringliteral">&quot;assigned C API function has to be a subtype of the expected &quot;</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;              <span class="stringliteral">&quot;type&quot;</span>;</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        }</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(Cast&lt;WasmExternalFunction&gt;(*value)-&gt;func_ref(),</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                             isolate);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsWasmStruct(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) || IsWasmArray(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;WasmObject&gt;</a> wasm_obj = Cast&lt;WasmObject&gt;(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;        <a class="code" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;WasmTypeInfo&gt;</a> type_info = wasm_obj-&gt;map()-&gt;wasm_type_info();</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        <a class="code" href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">CanonicalTypeIndex</a> actual_type = type_info-&gt;type_index();</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;        <span class="keywordflow">if</span> (!type_canonicalizer-&gt;IsCanonicalSubtype(actual_type,</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                                                    canonical_index)) {</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;          *error_message = <span class="stringliteral">&quot;object is not a subtype of expected type&quot;</span>;</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;          <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        }</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        *error_message = <span class="stringliteral">&quot;JS object does not match expected wasm type&quot;</span>;</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      }</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    }</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  }</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;}</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160; </div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;<span class="comment">// Utility which canonicalizes {expected} in addition.</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#af45c6ff2b232226ab6fe2deaf3600bf3"> 3625</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074">JSToWasmObject</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module,</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;                                         <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>,</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;                                         <a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> expected,</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;                                         <span class="keyword">const</span> <span class="keywordtype">char</span>** error_message) {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">CanonicalValueType</a> canonical;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  <span class="keywordflow">if</span> (expected.<a class="code" href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">has_index</a>()) {</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    canonical = module-&gt;<a class="code" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a72d5b3903dd429c932220d3adee950a8">canonical_type</a>(expected);</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;    canonical = <a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">CanonicalValueType</a>{expected};</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  }</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074">JSToWasmObject</a>(isolate, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, canonical, error_message);</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;}</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160; </div>
<div class="line"><a name="l03639"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#af0e8eb22038f6f652121cb71d71ff62b"> 3639</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#af0e8eb22038f6f652121cb71d71ff62b">WasmToJSObject</a>(<a class="code" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>) {</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  <span class="keywordflow">if</span> (IsWasmNull(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">factory</a>()-&gt;null_value();</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsWasmFuncRef(*<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a">i::WasmInternalFunction::GetOrCreateExternal</a>(<a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">i::direct_handle</a>(</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        i::Cast&lt;i::WasmFuncRef&gt;(*value)-&gt;internal(isolate), isolate));</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  }</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;}</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160; </div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;<span class="comment">// The WasmArray header is not a multiple of 8 bytes. For shared i64 arrays each</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;<span class="comment">// element needs to be 8 byte aligned for atomic accesses. Therefore shared</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="comment">// arrays use the kDoubleUnaligned alignment. If the header size changes to a</span></div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="comment">// multiple of 8 bytes, shared arrays should be allocated using kDoubleAligned</span></div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment">// instead.</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment">// Note that for 64 bit no-pointer-compression builds, kDoubleUnAligned performs</span></div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment">// aligned(!) allocations instead, so we manually align the kHeaderSize there.</span></div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;<span class="comment">// Needed changes in case the header size changes to a multiple of 8:</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="comment">// - objects-inl.h: HeapObject::RequiredAlignment</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="comment">// - wasm.tq: WasmAllocateSharedArray_Uninitialized</span></div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="comment">// LINT.IfChange</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;static_assert(WasmArray::kHeaderSize % <a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a> ==</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;              (<a class="code" href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">kTaggedSize</a> != <a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a> ? 4 : 0));</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="comment">// LINT.ThenChange(src/objects/objects-inl.h, src/builtins/wasm.tq)</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160; </div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;}  <span class="comment">// namespace wasm</span></div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160; </div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="object-macros-undef_8h.html">src/objects/object-macros-undef.h</a>&quot;</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="preprocessor">#undef TRACE_IFT</span></div>
<div class="ttc" id="abuiltins-inl_8h_html"><div class="ttname"><a href="builtins-inl_8h.html">builtins-inl.h</a></div></div>
<div class="ttc" id="abuiltins_8h_html_af33bd0f259d8e6a511fd018115e0d62c"><div class="ttname"><a href="builtins_8h.html#af33bd0f259d8e6a511fd018115e0d62c">BUILTIN_CODE</a></div><div class="ttdeci">#define BUILTIN_CODE(isolate, name)</div><div class="ttdef"><b>Definition:</b> <a href="builtins_8h_source.html#l00047">builtins.h:47</a></div></div>
<div class="ttc" id="acanonical-types_8h_html"><div class="ttname"><a href="canonical-types_8h.html">canonical-types.h</a></div></div>
<div class="ttc" id="acheck_8h_html_a0331d7a4dc5d6372d25e946af1f96588"><div class="ttname"><a href="check_8h.html#a0331d7a4dc5d6372d25e946af1f96588">SBXCHECK_LE</a></div><div class="ttdeci">#define SBXCHECK_LE(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00060">check.h:60</a></div></div>
<div class="ttc" id="acheck_8h_html_a27bd9aa8e613a2123a446cd6bc973fdf"><div class="ttname"><a href="check_8h.html#a27bd9aa8e613a2123a446cd6bc973fdf">SBXCHECK_LT</a></div><div class="ttdeci">#define SBXCHECK_LT(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00059">check.h:59</a></div></div>
<div class="ttc" id="acheck_8h_html_aa48820509053e4a2ad5061bae4fb9c40"><div class="ttname"><a href="check_8h.html#aa48820509053e4a2ad5061bae4fb9c40">SBXCHECK_BOUNDS</a></div><div class="ttdeci">#define SBXCHECK_BOUNDS(index, limit)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00061">check.h:61</a></div></div>
<div class="ttc" id="acheck_8h_html_aec752d98ed7d655aa8ced64592c346d5"><div class="ttname"><a href="check_8h.html#aec752d98ed7d655aa8ced64592c346d5">SBXCHECK_GE</a></div><div class="ttdeci">#define SBXCHECK_GE(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00058">check.h:58</a></div></div>
<div class="ttc" id="acheck_8h_html_aee78f6fbdf206be23e949191f9408e4b"><div class="ttname"><a href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a></div><div class="ttdeci">#define SBXCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00054">check.h:54</a></div></div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassunibrow_1_1Utf8_html_aa6e4ee521e61e597e3861e9cf77f73aa"><div class="ttname"><a href="classunibrow_1_1Utf8.html#aa6e4ee521e61e597e3861e9cf77f73aa">unibrow::Utf8::ValidateEncoding</a></div><div class="ttdeci">static bool ValidateEncoding(const uint8_t *str, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00236">unicode.cc:236</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BitField_html_a70718344d8a4df6c20b3cf9c9b14d0d4"><div class="ttname"><a href="classv8_1_1base_1_1BitField.html#a70718344d8a4df6c20b3cf9c9b14d0d4">v8::base::BitField::encode</a></div><div class="ttdeci">static constexpr U encode(T value)</div><div class="ttdef"><b>Definition:</b> <a href="bit-field_8h_source.html#l00055">bit-field.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EmbeddedVector_html"><div class="ttname"><a href="classv8_1_1base_1_1EmbeddedVector.html">v8::base::EmbeddedVector</a></div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00396">vector.h:396</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_a2661cfcee856d5f551befac70c31a730"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#a2661cfcee856d5f551befac70c31a730">v8::base::OwnedVector::New</a></div><div class="ttdeci">static OwnedVector&lt; T &gt; New(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00277">vector.h:277</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt; const uint8_t &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a127410ecb29a2d265d49cbf575f676f9"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a127410ecb29a2d265d49cbf575f676f9">v8::base::Vector::begin</a></div><div class="ttdeci">constexpr T * begin() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00096">vector.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a1eb4ed5d322a219428bdb9f9a2cb6708"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">v8::base::Vector::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00064">vector.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_ae3db4c14cac8e648389541fdb745c6b0"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#ae3db4c14cac8e648389541fdb745c6b0">v8::base::Vector::SubVector</a></div><div class="ttdeci">Vector&lt; T &gt; SubVector(size_t from, size_t to) const</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00041">vector.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AccountingAllocator_html"><div class="ttname"><a href="classv8_1_1internal_1_1AccountingAllocator.html">v8::internal::AccountingAllocator</a></div><div class="ttdef"><b>Definition:</b> <a href="accounting-allocator_8h_source.html#l00028">accounting-allocator.h:28</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AsmWasmData_html_acc0ab9f86a21e107f090ac2725be47ce"><div class="ttname"><a href="classv8_1_1internal_1_1AsmWasmData.html#acc0ab9f86a21e107f090ac2725be47ce">v8::internal::AsmWasmData::New</a></div><div class="ttdeci">static Handle&lt; AsmWasmData &gt; New(Isolate *isolate, std::shared_ptr&lt; wasm::NativeModule &gt; native_module, DirectHandle&lt; HeapNumber &gt; uses_bitset)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03313">wasm-objects.cc:3313</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1BigInt_html_a7df25eb1750797b26ce9588754f919c3"><div class="ttname"><a href="classv8_1_1internal_1_1BigInt.html#a7df25eb1750797b26ce9588754f919c3">v8::internal::BigInt::FromUint64</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; BigInt &gt; FromUint64(Isolate *isolate, uint64_t n)</div><div class="ttdef"><b>Definition:</b> <a href="bigint_8cc_source.html#l01351">bigint.cc:1351</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Builtins_html_a2a4ab319b3b14dc0a1b6cc7967d27523"><div class="ttname"><a href="classv8_1_1internal_1_1Builtins.html#a2a4ab319b3b14dc0a1b6cc7967d27523">v8::internal::Builtins::code_handle</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Handle&lt; Code &gt; code_handle(Builtin builtin)</div><div class="ttdef"><b>Definition:</b> <a href="builtins_8cc_source.html#l00154">builtins.cc:154</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Builtins_html_a47a260ae04bebdcad714c481a3cd3553"><div class="ttname"><a href="classv8_1_1internal_1_1Builtins.html#a47a260ae04bebdcad714c481a3cd3553">v8::internal::Builtins::EmbeddedEntryOf</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Address EmbeddedEntryOf(Builtin builtin)</div><div class="ttdef"><b>Definition:</b> <a href="builtins_8cc_source.html#l00355">builtins.cc:355</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Debug_html_a25ef04805028d9eeef793ff917caf193"><div class="ttname"><a href="classv8_1_1internal_1_1Debug.html#a25ef04805028d9eeef793ff917caf193">v8::internal::Debug::hook_on_function_call_address</a></div><div class="ttdeci">Address hook_on_function_call_address()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00452">debug.h:452</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00654">handles.h:660</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html_a5c266d7537e00f9125f055cfd0bac808"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html#a5c266d7537e00f9125f055cfd0bac808">v8::internal::DirectHandle::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00694">handles.h:694</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html_a616490b5813ae8be61c7d607af9f9dbd"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html#a616490b5813ae8be61c7d607af9f9dbd">v8::internal::DirectHandle::is_identical_to</a></div><div class="ttdeci">bool is_identical_to(Handle&lt; S &gt; other) const</div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00717">handles.h:717</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalReference_html_aadf8c6aed72f2104bd107b194c7d86a8"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalReference.html#aadf8c6aed72f2104bd107b194c7d86a8">v8::internal::ExternalReference::address</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Address address() const</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l00220">external-reference.cc:220</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalReference_html_af4f8bd08709c2b99f51c5dea884e63af"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalReference.html#af4f8bd08709c2b99f51c5dea884e63af">v8::internal::ExternalReference::Create</a></div><div class="ttdeci">static ExternalReference Create(const SCTableReference &amp;table_ref)</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l00420">external-reference.cc:420</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_a0373b86900852e5f348f638a98a235d1"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#a0373b86900852e5f348f638a98a235d1">v8::internal::FactoryBase::NewStringFromOneByte</a></div><div class="ttdeci">MaybeHandle&lt; String &gt; NewStringFromOneByte(base::Vector&lt; const uint8_t &gt; string, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8cc_source.html#l00987">factory-base.cc:987</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_a099d2a505298c549ede814b4b4021464"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#a099d2a505298c549ede814b4b4021464">v8::internal::FactoryBase::NewStringFromAsciiChecked</a></div><div class="ttdeci">Handle&lt; String &gt; NewStringFromAsciiChecked(const char *str, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8h_source.html#l00325">factory-base.h:325</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_a3b9ecb63b6b4fae0f26b4f8883ee48ed"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#a3b9ecb63b6b4fae0f26b4f8883ee48ed">v8::internal::FactoryBase::NewHeapNumber</a></div><div class="ttdeci">Handle&lt; HeapNumber &gt; NewHeapNumber(double value)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base-inl_8h_source.html#l00102">factory-base-inl.h:102</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_aceeb1b599909d7e0870bd25b99b88726"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#aceeb1b599909d7e0870bd25b99b88726">v8::internal::FactoryBase::NewStruct</a></div><div class="ttdeci">Handle&lt; Struct &gt; NewStruct(InstanceType type, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8cc_source.html#l00065">factory-base.cc:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_ad4b78219bdb04735f21eb388928c0fd5"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#ad4b78219bdb04735f21eb388928c0fd5">v8::internal::FactoryBase::NewProtectedWeakFixedArray</a></div><div class="ttdeci">Handle&lt; ProtectedWeakFixedArray &gt; NewProtectedWeakFixedArray(int length)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8cc_source.html#l00296">factory-base.cc:296</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_ad56bf14a7882ee1e69e60b467b0be0e7"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#ad56bf14a7882ee1e69e60b467b0be0e7">v8::internal::FactoryBase::NewNumber</a></div><div class="ttdeci">Handle&lt; Number &gt; NewNumber(double value)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base-inl_8h_source.html#l00050">factory-base-inl.h:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_add1def193680fa7edc2ead51ef49f8c3"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#add1def193680fa7edc2ead51ef49f8c3">v8::internal::FactoryBase::NewFixedArray</a></div><div class="ttdeci">Handle&lt; FixedArray &gt; NewFixedArray(int length, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8cc_source.html#l00180">factory-base.cc:180</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FactoryBase_html_ae56f02d0d6d5d61358da6e0eae0db018"><div class="ttname"><a href="classv8_1_1internal_1_1FactoryBase.html#ae56f02d0d6d5d61358da6e0eae0db018">v8::internal::FactoryBase::NewFixedArrayWithZeroes</a></div><div class="ttdeci">DirectHandle&lt; FixedArray &gt; NewFixedArrayWithZeroes(int length, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory-base_8cc_source.html#l00238">factory-base.cc:238</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_1_1JSFunctionBuilder_html"><div class="ttname"><a href="classv8_1_1internal_1_1Factory_1_1JSFunctionBuilder.html">v8::internal::Factory::JSFunctionBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="factory_8h_source.html#l01121">factory.h:1121</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html">v8::internal::Factory</a></div><div class="ttdef"><b>Definition:</b> <a href="factory_8h_source.html#l00141">factory.h:141</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a07ecf0d639df2cfec26a358dfd826897"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a07ecf0d639df2cfec26a358dfd826897">v8::internal::Factory::NewMapWithMetaMap</a></div><div class="ttdeci">DirectHandle&lt; Map &gt; NewMapWithMetaMap(DirectHandle&lt; Map &gt; meta_map, InstanceType type, int instance_size, ElementsKind elements_kind=TERMINAL_FAST_ELEMENTS_KIND, int inobject_properties=0, AllocationType allocation_type=AllocationType::kMap)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l02419">factory.cc:2419</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a0c86e0a3f9aec2327be970da03af4e9c"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a0c86e0a3f9aec2327be970da03af4e9c">v8::internal::Factory::NewContextlessMap</a></div><div class="ttdeci">Handle&lt; Map &gt; NewContextlessMap(InstanceType type, int instance_size, ElementsKind elements_kind=TERMINAL_FAST_ELEMENTS_KIND, int inobject_properties=0, AllocationType allocation_type=AllocationType::kMap)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l02488">factory.cc:2488</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a35f86baf123dfbe57824f027ae1b0999"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a35f86baf123dfbe57824f027ae1b0999">v8::internal::Factory::NewJSObjectWithNullProto</a></div><div class="ttdeci">Handle&lt; JSObject &gt; NewJSObjectWithNullProto()</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03037">factory.cc:3037</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a4b252a0366739cd2612e0a11b54827b9"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a4b252a0366739cd2612e0a11b54827b9">v8::internal::Factory::NewContextfulMap</a></div><div class="ttdeci">DirectHandle&lt; Map &gt; NewContextfulMap(DirectHandle&lt; JSReceiver &gt; creation_context_holder, InstanceType type, int instance_size, ElementsKind elements_kind=TERMINAL_FAST_ELEMENTS_KIND, int inobject_properties=0, AllocationType allocation_type=AllocationType::kMap)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l02436">factory.cc:2436</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a51594e340f34ee0a31a326a1f659b6de"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a51594e340f34ee0a31a326a1f659b6de">v8::internal::Factory::NewJSArrayBufferAndBackingStore</a></div><div class="ttdeci">MaybeHandle&lt; JSArrayBuffer &gt; NewJSArrayBufferAndBackingStore(size_t byte_length, InitializedFlag initialized, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03532">factory.cc:3532</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a532adb2efc73755fa0e8c9431d49635d"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a532adb2efc73755fa0e8c9431d49635d">v8::internal::Factory::NewTuple2</a></div><div class="ttdeci">DirectHandle&lt; Tuple2 &gt; NewTuple2(DirectHandle&lt; Object &gt; value1, DirectHandle&lt; Object &gt; value2, AllocationType allocation)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l00402">factory.cc:402</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a54c843caad6266415afc266860855cdb"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a54c843caad6266415afc266860855cdb">v8::internal::Factory::NewJSObject</a></div><div class="ttdeci">Handle&lt; JSObject &gt; NewJSObject(DirectHandle&lt; JSFunction &gt; constructor, AllocationType allocation=AllocationType::kYoung, NewJSObjectType=NewJSObjectType::kNoAPIWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03018">factory.cc:3018</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a590cfed2fdf00318861bd31d70909ef1"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a590cfed2fdf00318861bd31d70909ef1">v8::internal::Factory::NewJSSharedArrayBuffer</a></div><div class="ttdeci">Handle&lt; JSArrayBuffer &gt; NewJSSharedArrayBuffer(std::shared_ptr&lt; BackingStore &gt; backing_store)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03577">factory.cc:3577</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a848c5c1939908dd001227d09e1c217a2"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a848c5c1939908dd001227d09e1c217a2">v8::internal::Factory::CopyFixedArrayAndGrow</a></div><div class="ttdeci">Handle&lt; FixedArray &gt; CopyFixedArrayAndGrow(DirectHandle&lt; FixedArray &gt; array, int grow_by, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l02696">factory.cc:2696</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_ad2c55e5f426c5266376a9c5434fa1891"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#ad2c55e5f426c5266376a9c5434fa1891">v8::internal::Factory::NewJSObjectFromMap</a></div><div class="ttdeci">Handle&lt; JSObject &gt; NewJSObjectFromMap(DirectHandle&lt; Map &gt; map, AllocationType allocation=AllocationType::kYoung, DirectHandle&lt; AllocationSite &gt; allocation_site=DirectHandle&lt; AllocationSite &gt;::null(), NewJSObjectType=NewJSObjectType::kNoAPIWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03159">factory.cc:3159</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_ad8628a3ae8c2623d4f4679134b930381"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#ad8628a3ae8c2623d4f4679134b930381">v8::internal::Factory::NewJSArrayBuffer</a></div><div class="ttdeci">Handle&lt; JSArrayBuffer &gt; NewJSArrayBuffer(std::shared_ptr&lt; BackingStore &gt; backing_store, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l03515">factory.cc:3515</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_af3f3d9861e8eb4e63e94eae4d18aa477"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#af3f3d9861e8eb4e63e94eae4d18aa477">v8::internal::Factory::InternalizeUtf8String</a></div><div class="ttdeci">Handle&lt; String &gt; InternalizeUtf8String(base::Vector&lt; const char &gt; str)</div><div class="ttdef"><b>Definition:</b> <a href="factory_8cc_source.html#l00614">factory.cc:614</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FixedAddressArrayBase_html_a9a841198f5470650b41517ca5c1a27d0"><div class="ttname"><a href="classv8_1_1internal_1_1FixedAddressArrayBase.html#a9a841198f5470650b41517ca5c1a27d0">v8::internal::FixedAddressArrayBase::New</a></div><div class="ttdeci">static DirectHandle&lt; FixedAddressArrayBase &gt; New(Isolate *isolate, int length, MoreArgs &amp;&amp;... more_args)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FixedIntegerArrayBase_html_ab977d693c069b16770327672f8a9ae8e"><div class="ttname"><a href="classv8_1_1internal_1_1FixedIntegerArrayBase.html#ab977d693c069b16770327672f8a9ae8e">v8::internal::FixedIntegerArrayBase::New</a></div><div class="ttdeci">static Handle&lt; FixedIntegerArrayBase&lt; T, Base &gt; &gt; New(Isolate *isolate, int length, MoreArgs &amp;&amp;... more_args)</div><div class="ttdef"><b>Definition:</b> <a href="fixed-array-inl_8h_source.html#l00829">fixed-array-inl.h:829</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FunctionTargetAndImplicitArg_html_a34b1502ca8959364a38d211aed59c67d"><div class="ttname"><a href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a34b1502ca8959364a38d211aed59c67d">v8::internal::FunctionTargetAndImplicitArg::FunctionTargetAndImplicitArg</a></div><div class="ttdeci">FunctionTargetAndImplicitArg(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; target_instance_data, int target_func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01489">wasm-objects.cc:1489</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FunctionTargetAndImplicitArg_html_a5e4e91362d0e1a4c0ec404cec5997c81"><div class="ttname"><a href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#a5e4e91362d0e1a4c0ec404cec5997c81">v8::internal::FunctionTargetAndImplicitArg::implicit_arg_</a></div><div class="ttdeci">DirectHandle&lt; TrustedObject &gt; implicit_arg_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00093">wasm-objects.h:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FunctionTargetAndImplicitArg_html_adabbd38fc203bd4d656ec7d18e175023"><div class="ttname"><a href="classv8_1_1internal_1_1FunctionTargetAndImplicitArg.html#adabbd38fc203bd4d656ec7d18e175023">v8::internal::FunctionTargetAndImplicitArg::call_target_</a></div><div class="ttdeci">WasmCodePointer call_target_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00094">wasm-objects.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00263">handles.h:263</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Handle_html"><div class="ttname"><a href="classv8_1_1internal_1_1Handle.html">v8::internal::Handle</a></div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00150">handles.h:150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a7125239f9673b20fca00902b11d24726"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">v8::internal::HeapLayout::InWritableSharedSpace</a></div><div class="ttdeci">static bool InWritableSharedSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-layout-inl_8h_source.html#l00067">heap-layout-inl.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_ae77bf0d1f0e1b86681fb29101ecd527a"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">v8::internal::HeapLayout::InAnySharedSpace</a></div><div class="ttdeci">static bool InAnySharedSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-layout-inl_8h_source.html#l00072">heap-layout-inl.h:72</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObject_html"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObject.html">v8::internal::HeapObject</a></div><div class="ttdef"><b>Definition:</b> <a href="heap-object_8h_source.html#l00150">heap-object.h:150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a36b006124ed0f7b75bfd7edc07ffe9b0"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a36b006124ed0f7b75bfd7edc07ffe9b0">v8::internal::Heap::NewSpaceAllocationTopAddress</a></div><div class="ttdeci">Address * NewSpaceAllocationTopAddress()</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00160">heap-inl.h:160</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_acd6e76f78e13576abf3edcd8e66c5075"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#acd6e76f78e13576abf3edcd8e66c5075">v8::internal::Heap::OldSpaceAllocationTopAddress</a></div><div class="ttdeci">Address * OldSpaceAllocationTopAddress()</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00172">heap-inl.h:172</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad5014f8f0da530498e7614cba60013a6"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad5014f8f0da530498e7614cba60013a6">v8::internal::Heap::NewSpaceAllocationLimitAddress</a></div><div class="ttdeci">Address * NewSpaceAllocationLimitAddress()</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00166">heap-inl.h:166</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae8c88266b8e03d1b1170ca54bb80dbea"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae8c88266b8e03d1b1170ca54bb80dbea">v8::internal::Heap::OldSpaceAllocationLimitAddress</a></div><div class="ttdeci">Address * OldSpaceAllocationLimitAddress()</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00176">heap-inl.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_a0dc369c8fad0c9c8e98af59d7165ddbc"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0dc369c8fad0c9c8e98af59d7165ddbc">v8::internal::ImportedFunctionEntry::callable</a></div><div class="ttdeci">Tagged&lt; JSReceiver &gt; callable()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01611">wasm-objects.cc:1611</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_a0e747f460892159f4f39aa81962d615a"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a0e747f460892159f4f39aa81962d615a">v8::internal::ImportedFunctionEntry::target</a></div><div class="ttdeci">WasmCodePointer target()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01619">wasm-objects.cc:1619</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_a1c23f1b43dd3aaf0b10ed4a9eb758326"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a1c23f1b43dd3aaf0b10ed4a9eb758326">v8::internal::ImportedFunctionEntry::index_</a></div><div class="ttdeci">int const index_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00158">wasm-objects.h:158</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_a610c4666b44a3e3a5b45ed43b0e0baf2"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a610c4666b44a3e3a5b45ed43b0e0baf2">v8::internal::ImportedFunctionEntry::implicit_arg</a></div><div class="ttdeci">Tagged&lt; Object &gt; implicit_arg()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01615">wasm-objects.cc:1615</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_a63021958628904891284066b5e414b8d"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#a63021958628904891284066b5e414b8d">v8::internal::ImportedFunctionEntry::maybe_callable</a></div><div class="ttdeci">Tagged&lt; Object &gt; maybe_callable()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01605">wasm-objects.cc:1605</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_ae4a858cbd25b5e257bba9fcd311ec1e7"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#ae4a858cbd25b5e257bba9fcd311ec1e7">v8::internal::ImportedFunctionEntry::SetWasmToWrapper</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void SetWasmToWrapper(Isolate *, DirectHandle&lt; JSReceiver &gt; callable, std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; wrapper_handle, wasm::Suspend suspend, const wasm::CanonicalSig *sig, wasm::CanonicalTypeIndex sig_id)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01517">wasm-objects.cc:1517</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_afb0ec87eaa96b544023af6f00a5de36c"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#afb0ec87eaa96b544023af6f00a5de36c">v8::internal::ImportedFunctionEntry::instance_data_</a></div><div class="ttdeci">DirectHandle&lt; WasmTrustedInstanceData &gt; const instance_data_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00157">wasm-objects.h:157</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ImportedFunctionEntry_html_aff58f12e21d41c7343027b995211e629"><div class="ttname"><a href="classv8_1_1internal_1_1ImportedFunctionEntry.html#aff58f12e21d41c7343027b995211e629">v8::internal::ImportedFunctionEntry::SetWasmToWasm</a></div><div class="ttdeci">void SetWasmToWasm(Tagged&lt; WasmTrustedInstanceData &gt; target_instance_object, WasmCodePointer call_target, wasm::CanonicalTypeIndex sig_id)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01574">wasm-objects.cc:1574</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l00595">isolate.h:595</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a05a2b08b2b0f2d5aef8dc053e2ea3d9b"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a05a2b08b2b0f2d5aef8dc053e2ea3d9b">v8::internal::Isolate::Current</a></div><div class="ttdeci">static Isolate * Current()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate-inl_8h_source.html#l00035">isolate-inl.h:35</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a3600858dfb405ce24551f99bd9fe2c2c"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a3600858dfb405ce24551f99bd9fe2c2c">v8::internal::Isolate::root</a></div><div class="ttdeci">Tagged&lt; Object &gt; root(RootIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01280">isolate.h:1280</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a36632c116af97ed40a9495ff3315dbde"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a36632c116af97ed40a9495ff3315dbde">v8::internal::Isolate::UpdateProtectorsOnSetPrototype</a></div><div class="ttdeci">void UpdateProtectorsOnSetPrototype(DirectHandle&lt; JSObject &gt; object, DirectHandle&lt; Object &gt; new_prototype)</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l06362">isolate.cc:6362</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a5819188db3266ad85f50d20a1e254459"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a5819188db3266ad85f50d20a1e254459">v8::internal::Isolate::Throw</a></div><div class="ttdeci">Tagged&lt; Object &gt; Throw(Tagged&lt; Object &gt; exception, MessageLocation *location=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l02100">isolate.cc:2100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a6cb0edf57f829ea37a9a48a3e6bc007d"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">v8::internal::Isolate::builtins</a></div><div class="ttdeci">Builtins * builtins()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01458">isolate.h:1458</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a7e2962359009581ba84e6a361f574f61"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a7e2962359009581ba84e6a361f574f61">v8::internal::Isolate::factory</a></div><div class="ttdeci">v8::internal::Factory * factory()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01553">isolate.h:1553</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a9435d2734e67d1dac0a3ce2a5b9387b8"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a9435d2734e67d1dac0a3ce2a5b9387b8">v8::internal::Isolate::native_context</a></div><div class="ttdeci">Handle&lt; NativeContext &gt; native_context()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate-inl_8h_source.html#l00048">isolate-inl.h:48</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ac74a11613906581a9989b1cb7f7b3275"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ac74a11613906581a9989b1cb7f7b3275">v8::internal::Isolate::heap</a></div><div class="ttdeci">Heap * heap()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01214">isolate.h:1214</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_add58aa2cf5e62000c95ea11411ce9ae6"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#add58aa2cf5e62000c95ea11411ce9ae6">v8::internal::Isolate::debug</a></div><div class="ttdeci">Debug * debug() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01500">isolate.h:1500</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSArrayBuffer_html_a98d48c4b2a6e4e7d80037a26ed2de8ff"><div class="ttname"><a href="classv8_1_1internal_1_1JSArrayBuffer.html#a98d48c4b2a6e4e7d80037a26ed2de8ff">v8::internal::JSArrayBuffer::Detach</a></div><div class="ttdeci">V8_EXPORT_PRIVATE static V8_WARN_UNUSED_RESULT Maybe&lt; bool &gt; Detach(DirectHandle&lt; JSArrayBuffer &gt; buffer, bool force_for_wasm_memory=false, DirectHandle&lt; Object &gt; key={})</div><div class="ttdef"><b>Definition:</b> <a href="js-array-buffer_8cc_source.html#l00123">js-array-buffer.cc:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSFunction_html_a0daec6428bc67855b84ea6c6d4c33c15"><div class="ttname"><a href="classv8_1_1internal_1_1JSFunction.html#a0daec6428bc67855b84ea6c6d4c33c15">v8::internal::JSFunction::context</a></div><div class="ttdeci">Tagged&lt; Context &gt; context()</div><div class="ttdef"><b>Definition:</b> <a href="js-function-inl_8h_source.html#l00463">js-function-inl.h:463</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSFunction_html_a6b3543d0c75f5744819dbdf406cd8d46"><div class="ttname"><a href="classv8_1_1internal_1_1JSFunction.html#a6b3543d0c75f5744819dbdf406cd8d46">v8::internal::JSFunction::length</a></div><div class="ttdeci">int length()</div><div class="ttdef"><b>Definition:</b> <a href="js-function-inl_8h_source.html#l00078">js-function-inl.h:78</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSFunction_html_abad4b9d80b65ea3058231db04c2a9129"><div class="ttname"><a href="classv8_1_1internal_1_1JSFunction.html#abad4b9d80b65ea3058231db04c2a9129">v8::internal::JSFunction::GetDebugName</a></div><div class="ttdeci">static DirectHandle&lt; String &gt; GetDebugName(Isolate *isolate, DirectHandle&lt; JSFunction &gt; function)</div><div class="ttdef"><b>Definition:</b> <a href="js-function_8cc_source.html#l01378">js-function.cc:1378</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSReceiver_html_aba4a2cfb4946da1635ae2730b710ff00"><div class="ttname"><a href="classv8_1_1internal_1_1JSReceiver.html#aba4a2cfb4946da1635ae2730b710ff00">v8::internal::JSReceiver::GetProperty</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT MaybeHandle&lt; Object &gt; GetProperty(Isolate *isolate, DirectHandle&lt; JSReceiver &gt; receiver, const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="js-objects-inl_8h_source.html#l00123">js-objects-inl.h:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Managed_html"><div class="ttname"><a href="classv8_1_1internal_1_1Managed.html">v8::internal::Managed</a></div><div class="ttdef"><b>Definition:</b> <a href="managed_8h_source.html#l00094">managed.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Managed_html_a1c10cb948281b864db32d8af25a7b7d9"><div class="ttname"><a href="classv8_1_1internal_1_1Managed.html#a1c10cb948281b864db32d8af25a7b7d9">v8::internal::Managed::From</a></div><div class="ttdeci">static DirectHandle&lt; Managed&lt; CppType &gt; &gt; From(Isolate *isolate, size_t estimated_size, std::shared_ptr&lt; CppType &gt; shared_ptr, AllocationType allocation_type=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="managed-inl_8h_source.html#l00027">managed-inl.h:27</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a0190d1c4f6fe4adec7b0719e448d5199"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a0190d1c4f6fe4adec7b0719e448d5199">v8::internal::Map::Create</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; Map &gt; Create(Isolate *isolate, int inobject_properties)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cc_source.html#l01835">map.cc:1835</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a93f004fb26af73077d064b097c740fa3"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a93f004fb26af73077d064b097c740fa3">v8::internal::Map::SetPrototype</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void SetPrototype(Isolate *isolate, DirectHandle&lt; Map &gt; map, DirectHandle&lt; JSPrototype &gt; prototype, bool enable_prototype_setup_mode=true)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cc_source.html#l02481">map.cc:2481</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html">v8::internal::MaybeDirectHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles_8h_source.html#l00241">maybe-handles.h:241</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html_a7c6aa1159cd89fe343afabcaad620b98"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html#a7c6aa1159cd89fe343afabcaad620b98">v8::internal::MaybeDirectHandle::ToHandle</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT bool ToHandle(DirectHandle&lt; S &gt; *out) const</div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles_8h_source.html#l00277">maybe-handles.h:277</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html_a872ccde05e0ba79452e0b75afdfabf39"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html#a872ccde05e0ba79452e0b75afdfabf39">v8::internal::MaybeDirectHandle::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles_8h_source.html#l00281">maybe-handles.h:281</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeObjectDirectHandle_html_af39f668bdaaf25432eb7cdbc4066f4d6"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeObjectDirectHandle.html#af39f668bdaaf25432eb7cdbc4066f4d6">v8::internal::MaybeObjectDirectHandle::Weak</a></div><div class="ttdeci">static MaybeObjectDirectHandle Weak(Tagged&lt; Object &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="maybe-handles-inl_8h_source.html#l00254">maybe-handles-inl.h:254</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Object_html_a2e8108d7b7d2b826ab90a71b20be7a9d"><div class="ttname"><a href="classv8_1_1internal_1_1Object.html#a2e8108d7b7d2b826ab90a71b20be7a9d">v8::internal::Object::SetProperty</a></div><div class="ttdeci">V8_EXPORT_PRIVATE static V8_WARN_UNUSED_RESULT Maybe&lt; bool &gt; SetProperty(LookupIterator *it, DirectHandle&lt; Object &gt; value, StoreOrigin store_origin, Maybe&lt; ShouldThrow &gt; should_throw=Nothing&lt; ShouldThrow &gt;())</div><div class="ttdef"><b>Definition:</b> <a href="objects_8cc_source.html#l02460">objects.cc:2460</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PodArray_html_a3f28a70fe5af7c7d45ec1d89d2afe748"><div class="ttname"><a href="classv8_1_1internal_1_1PodArray.html#a3f28a70fe5af7c7d45ec1d89d2afe748">v8::internal::PodArray::New</a></div><div class="ttdeci">static Handle&lt; PodArray&lt; T &gt; &gt; New(Isolate *isolate, int length, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="fixed-array-inl_8h_source.html#l00884">fixed-array-inl.h:884</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ReadOnlyRoots_html"><div class="ttname"><a href="classv8_1_1internal_1_1ReadOnlyRoots.html">v8::internal::ReadOnlyRoots</a></div><div class="ttdef"><b>Definition:</b> <a href="roots_8h_source.html#l00724">roots.h:724</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html">v8::internal::Signature&lt; ValueType &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_a5386e0cc44bcfd6a13c8481b95f5652f"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#a5386e0cc44bcfd6a13c8481b95f5652f">v8::internal::Smi::zero</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; zero()</div><div class="ttdef"><b>Definition:</b> <a href="smi_8h_source.html#l00099">smi.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_afe7f07102d90ccce48cbe677c88a0645"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="smi_8h_source.html#l00038">smi.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedField_html"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedField.html">v8::internal::TaggedField</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged-field_8h_source.html#l00175">tagged-field.h:175</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedField_html_a8d902c25d47df2b4fa0e50d189bbc705"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedField.html#a8d902c25d47df2b4fa0e50d189bbc705">v8::internal::TaggedField::store</a></div><div class="ttdeci">static void store(Tagged&lt; HeapObject &gt; host, PtrType value)</div><div class="ttdef"><b>Definition:</b> <a href="tagged-field-inl_8h_source.html#l00232">tagged-field-inl.h:232</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_a4dba1b2eafcf7a414910966f950540c9"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#a4dba1b2eafcf7a414910966f950540c9">v8::internal::TaggedImpl::ptr</a></div><div class="ttdeci">constexpr StorageType ptr() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged-impl_8h_source.html#l00110">tagged-impl.h:110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_a5d84dde6d0c8149b4560d7c79cf8f1a3"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#a5d84dde6d0c8149b4560d7c79cf8f1a3">v8::internal::TaggedImpl::IsCleared</a></div><div class="ttdeci">constexpr bool IsCleared() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged-impl_8h_source.html#l00125">tagged-impl.h:125</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_ac581f955a852851b751735177af20efa"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#ac581f955a852851b751735177af20efa">v8::internal::TaggedImpl&lt; HeapObjectReferenceType::STRONG, Address &gt;::IsSmi</a></div><div class="ttdeci">constexpr bool IsSmi() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged-impl_8h_source.html#l00117">tagged-impl.h:117</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_ad30270db72c80341abd40ca560eb3632"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#ad30270db72c80341abd40ca560eb3632">v8::internal::TaggedImpl::IsWeakOrCleared</a></div><div class="ttdeci">constexpr bool IsWeakOrCleared() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged-impl_8h_source.html#l00155">tagged-impl.h:155</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_af954049cb1526fdcdff6faad97f5fbac"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#af954049cb1526fdcdff6faad97f5fbac">v8::internal::TaggedImpl::GetHeapObjectAssumeWeak</a></div><div class="ttdeci">Tagged&lt; HeapObject &gt; GetHeapObjectAssumeWeak() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged-impl-inl_8h_source.html#l00189">tagged-impl-inl.h:189</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html">v8::internal::Tagged&lt; HeapObject &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00470">tagged.h:470</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html_a0930e2a8cbe8abbc5cdd476902fe6c88"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a0930e2a8cbe8abbc5cdd476902fe6c88">v8::internal::Tagged&lt; HeapObject &gt;::is_null</a></div><div class="ttdeci">constexpr bool is_null() const</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00502">tagged.h:502</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html_acb5ed8ed88a0e4c54785c0dde65f87a4"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#acb5ed8ed88a0e4c54785c0dde65f87a4">v8::internal::Tagged&lt; HeapObject &gt;::cast</a></div><div class="ttdeci">static constexpr Tagged&lt; HeapObject &gt; cast(U other)</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00520">tagged.h:520</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01Object_01_4_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01Object_01_4.html">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00387">tagged.h:387</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00707">tagged.h:707</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TrustedManaged_html_a73ea83d3adfbe4b1dfe34d6bf865e90c"><div class="ttname"><a href="classv8_1_1internal_1_1TrustedManaged.html#a73ea83d3adfbe4b1dfe34d6bf865e90c">v8::internal::TrustedManaged::From</a></div><div class="ttdeci">static DirectHandle&lt; TrustedManaged&lt; CppType &gt; &gt; From(Isolate *isolate, size_t estimated_size, std::shared_ptr&lt; CppType &gt; shared_ptr, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="managed-inl_8h_source.html#l00052">managed-inl.h:52</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TrustedObject_html_a3e0789f0ae71c63b4b841bc64154093d"><div class="ttname"><a href="classv8_1_1internal_1_1TrustedObject.html#a3e0789f0ae71c63b4b841bc64154093d">v8::internal::TrustedObject::ClearProtectedPointerField</a></div><div class="ttdeci">void ClearProtectedPointerField(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="trusted-object-inl_8h_source.html#l00060">trusted-object-inl.h:60</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TrustedObject_html_a839a65b36476a066b6053d45f18c2ecb"><div class="ttname"><a href="classv8_1_1internal_1_1TrustedObject.html#a839a65b36476a066b6053d45f18c2ecb">v8::internal::TrustedObject::WriteProtectedPointerField</a></div><div class="ttdeci">void WriteProtectedPointerField(int offset, Tagged&lt; TrustedObject &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="trusted-object-inl_8h_source.html#l00036">trusted-object-inl.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Union_html"><div class="ttname"><a href="classv8_1_1internal_1_1Union.html">v8::internal::Union</a></div><div class="ttdef"><b>Definition:</b> <a href="union_8h_source.html#l00062">union.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmArray_html_a083bf7dcc3db8f7422ff53b33261af95"><div class="ttname"><a href="classv8_1_1internal_1_1WasmArray.html#a083bf7dcc3db8f7422ff53b33261af95">v8::internal::WasmArray::GetElement</a></div><div class="ttdeci">V8_EXPORT_PRIVATE wasm::WasmValue GetElement(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02329">wasm-objects.cc:2329</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmArray_html_a3cb945dc26102a0b75d0f7fe0d33f5f7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmArray.html#a3cb945dc26102a0b75d0f7fe0d33f5f7">v8::internal::WasmArray::element_offset</a></div><div class="ttdeci">uint32_t element_offset(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00782">wasm-objects-inl.h:782</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmArray_html_a40b023f6ad782775f32009f324a26217"><div class="ttname"><a href="classv8_1_1internal_1_1WasmArray.html#a40b023f6ad782775f32009f324a26217">v8::internal::WasmArray::SetTaggedElement</a></div><div class="ttdeci">void SetTaggedElement(uint32_t index, DirectHandle&lt; Object &gt; value, WriteBarrierMode mode=UPDATE_WRITE_BARRIER)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02359">wasm-objects.cc:2359</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmArray_html_ac8a34e383a690a1892ed22e5e10b8a49"><div class="ttname"><a href="classv8_1_1internal_1_1WasmArray.html#ac8a34e383a690a1892ed22e5e10b8a49">v8::internal::WasmArray::EncodeElementSizeInMap</a></div><div class="ttdeci">static void EncodeElementSizeInMap(int element_size, Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00812">wasm-objects-inl.h:812</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCapiFunction_html_a303283aba317fedb0d548295dd9f3a2d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCapiFunction.html#a303283aba317fedb0d548295dd9f3a2d">v8::internal::WasmCapiFunction::sig</a></div><div class="ttdeci">const wasm::CanonicalSig * sig() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02416">wasm-objects.cc:2416</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCapiFunction_html_a346b5906717c251f219e6fdc0115c39f"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCapiFunction.html#a346b5906717c251f219e6fdc0115c39f">v8::internal::WasmCapiFunction::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmCapiFunction &gt; New(Isolate *isolate, Address call_target, DirectHandle&lt; Foreign &gt; embedder_data, wasm::CanonicalTypeIndex sig_index, const wasm::CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02932">wasm-objects.cc:2932</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCapiFunction_html_a62930ad9bbbf2736e47ad0b607ee0c83"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCapiFunction.html#a62930ad9bbbf2736e47ad0b607ee0c83">v8::internal::WasmCapiFunction::IsWasmCapiFunction</a></div><div class="ttdeci">static bool IsWasmCapiFunction(Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02917">wasm-objects.cc:2917</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCapiFunction_html_aa65370f2fd8cec8f4042ab5b2fa79b7a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCapiFunction.html#aa65370f2fd8cec8f4042ab5b2fa79b7a">v8::internal::WasmCapiFunction::MatchesSignature</a></div><div class="ttdeci">bool MatchesSignature(wasm::CanonicalTypeIndex other_canonical_sig_index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02735">wasm-objects.cc:2735</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCodePointer_html"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCodePointer.html">v8::internal::WasmCodePointer</a></div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02891">globals.h:2891</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCodePointer_html_aa08af187eb29ca018162901c0d47183b"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCodePointer.html#aa08af187eb29ca018162901c0d47183b">v8::internal::WasmCodePointer::value</a></div><div class="ttdeci">uint32_t value() const</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02896">globals.h:2896</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDescriptorOptions_html_a3d09ffa2effb4501fd95e5fb947c9970"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDescriptorOptions.html#a3d09ffa2effb4501fd95e5fb947c9970">v8::internal::WasmDescriptorOptions::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmDescriptorOptions &gt; New(Isolate *isolate, DirectHandle&lt; Object &gt; prototype)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02400">wasm-objects.cc:2400</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTableData_html_a14927c2d96149fc12c0117d6f8320929"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTableData.html#a14927c2d96149fc12c0117d6f8320929">v8::internal::WasmDispatchTableData::wrappers_</a></div><div class="ttdeci">std::unordered_map&lt; int, std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; &gt; wrappers_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00800">wasm-objects.h:800</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTableData_html_a50e100a96969327139b0b3dcf088ecb0"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTableData.html#a50e100a96969327139b0b3dcf088ecb0">v8::internal::WasmDispatchTableData::Add</a></div><div class="ttdeci">void Add(int index, std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; wrapper_handle)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02438">wasm-objects.cc:2438</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTableData_html_a72836a7f841b6211d64c54b174471a3a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTableData.html#a72836a7f841b6211d64c54b174471a3a">v8::internal::WasmDispatchTableData::MaybeGetWrapperHandle</a></div><div class="ttdeci">V8_EXPORT_PRIVATE std::optional&lt; std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; &gt; MaybeGetWrapperHandle(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02430">wasm-objects.cc:2430</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTableData_html_a8be00d6024973b9644c3528702e7f9b6"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTableData.html#a8be00d6024973b9644c3528702e7f9b6">v8::internal::WasmDispatchTableData::Remove</a></div><div class="ttdeci">void Remove(int index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02446">wasm-objects.cc:2446</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a02c4f4414880c4428bb892f795f71739"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a02c4f4414880c4428bb892f795f71739">v8::internal::WasmDispatchTable::SetForWrapper</a></div><div class="ttdeci">void V8_EXPORT_PRIVATE SetForWrapper(int index, Tagged&lt; WasmImportData &gt; implicit_arg, std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; wrapper_handle, wasm::CanonicalTypeIndex sig_id, NewOrExistingEntry new_or_existing)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02487">wasm-objects.cc:2487</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a077547a040fefbe67a9a443a4c4431bb"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a077547a040fefbe67a9a443a4c4431bb">v8::internal::WasmDispatchTable::Clear</a></div><div class="ttdeci">void Clear(int index, NewOrExistingEntry new_or_existing)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02525">wasm-objects.cc:2525</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a101af281a2591cf1af90baa9491805b8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a101af281a2591cf1af90baa9491805b8">v8::internal::WasmDispatchTable::capacity</a></div><div class="ttdeci">int capacity() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00369">wasm-objects-inl.h:369</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a1b90f33e89bf3bcee0fb69f1dd86f461"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a1b90f33e89bf3bcee0fb69f1dd86f461">v8::internal::WasmDispatchTable::kMaxLength</a></div><div class="ttdeci">static constexpr int kMaxLength</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00855">wasm-objects.h:855</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a21e6f366c276cd435de54841571be9d8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a21e6f366c276cd435de54841571be9d8">v8::internal::WasmDispatchTable::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00367">wasm-objects-inl.h:367</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a295a7068bb6e12ef63d746cf4dbf53c3"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a295a7068bb6e12ef63d746cf4dbf53c3">v8::internal::WasmDispatchTable::Grow</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT DirectHandle&lt; WasmDispatchTable &gt; Grow(Isolate *, DirectHandle&lt; WasmDispatchTable &gt;, uint32_t new_length)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02628">wasm-objects.cc:2628</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a3e4e2907cbc69176e0725dd18f3dca97"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a3e4e2907cbc69176e0725dd18f3dca97">v8::internal::WasmDispatchTable::kTargetBias</a></div><div class="ttdeci">static constexpr size_t kTargetBias</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00838">wasm-objects.h:838</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a7dc6e7ebbb76782d6d3232ffea5edaf7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a7dc6e7ebbb76782d6d3232ffea5edaf7">v8::internal::WasmDispatchTable::kSigBias</a></div><div class="ttdeci">static constexpr size_t kSigBias</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00845">wasm-objects.h:845</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a865e5bfc2f812c54e4b6d38c64ad6ac8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a865e5bfc2f812c54e4b6d38c64ad6ac8">v8::internal::WasmDispatchTable::AddUse</a></div><div class="ttdeci">static void V8_EXPORT_PRIVATE AddUse(Isolate *isolate, DirectHandle&lt; WasmDispatchTable &gt; dispatch_table, DirectHandle&lt; WasmTrustedInstanceData &gt; instance, int table_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02546">wasm-objects.cc:2546</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a883a0830eebf148c3c01b4ce020edc5f"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a883a0830eebf148c3c01b4ce020edc5f">v8::internal::WasmDispatchTable::MaybeGetWrapperHandle</a></div><div class="ttdeci">V8_EXPORT_PRIVATE std::optional&lt; std::shared_ptr&lt; wasm::WasmImportWrapperHandle &gt; &gt; MaybeGetWrapperHandle(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02541">wasm-objects.cc:2541</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_a8d080aacae0ab37ff54447698f152914"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#a8d080aacae0ab37ff54447698f152914">v8::internal::WasmDispatchTable::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE V8_WARN_UNUSED_RESULT DirectHandle&lt; WasmDispatchTable &gt; New(Isolate *isolate, int length, wasm::CanonicalValueType table_type, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02621">wasm-objects.cc:2621</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_aac23a57676a6c819173dd81a2ecc7eaa"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#aac23a57676a6c819173dd81a2ecc7eaa">v8::internal::WasmDispatchTable::kImplicitArgBias</a></div><div class="ttdeci">static constexpr size_t kImplicitArgBias</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00846">wasm-objects.h:846</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_ad13f2dd16d9157875facfdc771841df9"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#ad13f2dd16d9157875facfdc771841df9">v8::internal::WasmDispatchTable::SetForNonWrapper</a></div><div class="ttdeci">void V8_EXPORT_PRIVATE SetForNonWrapper(int index, Tagged&lt; Union&lt; Smi, WasmTrustedInstanceData &gt;&gt; implicit_arg, WasmCodePointer call_target, wasm::CanonicalTypeIndex sig_id, NewOrExistingEntry new_or_existing)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02448">wasm-objects.cc:2448</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_ad1ad1647c93a971226e24d85ed741da5"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5">v8::internal::WasmDispatchTable::NewOrExistingEntry</a></div><div class="ttdeci">NewOrExistingEntry</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00815">wasm-objects.h:815</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_ad1ad1647c93a971226e24d85ed741da5a9f2f50b3fefb9ec17a7654a289287866"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5a9f2f50b3fefb9ec17a7654a289287866">v8::internal::WasmDispatchTable::kNewEntry</a></div><div class="ttdeci">@ kNewEntry</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00815">wasm-objects.h:815</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#ad1ad1647c93a971226e24d85ed741da5ae94e8b46dc9495b2683216119d41f6be">v8::internal::WasmDispatchTable::kExistingEntry</a></div><div class="ttdeci">@ kExistingEntry</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00815">wasm-objects.h:815</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_adb64eac40ae89f9acaae1409ca56e65a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#adb64eac40ae89f9acaae1409ca56e65a">v8::internal::WasmDispatchTable::kLengthOffset</a></div><div class="ttdeci">static constexpr size_t kLengthOffset</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00819">wasm-objects.h:819</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_af57144d54ea98150a598940d4a4729bb"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#af57144d54ea98150a598940d4a4729bb">v8::internal::WasmDispatchTable::implicit_arg</a></div><div class="ttdeci">Tagged&lt; Object &gt; implicit_arg(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00373">wasm-objects-inl.h:373</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_af7dac59bb8e83c542a078d6a63e33979"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#af7dac59bb8e83c542a078d6a63e33979">v8::internal::WasmDispatchTable::MaybeGrowUsesList</a></div><div class="ttdeci">static Tagged&lt; ProtectedWeakFixedArray &gt; MaybeGrowUsesList(Isolate *isolate, DirectHandle&lt; WasmDispatchTable &gt; dispatch_table)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02559">wasm-objects.cc:2559</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmDispatchTable_html_afe90b842432164928401d05f5fff3a8a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmDispatchTable.html#afe90b842432164928401d05f5fff3a8a">v8::internal::WasmDispatchTable::OffsetOf</a></div><div class="ttdeci">static constexpr int OffsetOf(int index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00862">wasm-objects.h:862</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_a310dfde86feecf720c6a44124ab7dbca"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#a310dfde86feecf720c6a44124ab7dbca">v8::internal::WasmExceptionPackage::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmExceptionPackage &gt; New(Isolate *isolate, DirectHandle&lt; WasmExceptionTag &gt; exception_tag, int encoded_size)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02750">wasm-objects.cc:2750</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_a7a460589a60bdb8f714ae48c9ea6868cadfaf00fe3bca39744c0eaf6637917b71"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#a7a460589a60bdb8f714ae48c9ea6868cadfaf00fe3bca39744c0eaf6637917b71">v8::internal::WasmExceptionPackage::kValuesIndex</a></div><div class="ttdeci">@ kValuesIndex</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00968">wasm-objects.h:968</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_a7a460589a60bdb8f714ae48c9ea6868caed5075d6670bcb3fbea0070f8a69fb27"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#a7a460589a60bdb8f714ae48c9ea6868caed5075d6670bcb3fbea0070f8a69fb27">v8::internal::WasmExceptionPackage::kTagIndex</a></div><div class="ttdeci">@ kTagIndex</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00968">wasm-objects.h:968</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_a92e3cf4344536855bbcc0c46ec31c269"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#a92e3cf4344536855bbcc0c46ec31c269">v8::internal::WasmExceptionPackage::GetExceptionValues</a></div><div class="ttdeci">static DirectHandle&lt; Object &gt; GetExceptionValues(Isolate *isolate, DirectHandle&lt; WasmExceptionPackage &gt; exception_package)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02781">wasm-objects.cc:2781</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_a932f3378b7a526a7233f8264f5faa3b3"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#a932f3378b7a526a7233f8264f5faa3b3">v8::internal::WasmExceptionPackage::GetEncodedSize</a></div><div class="ttdeci">static uint32_t GetEncodedSize(const wasm::WasmTagSig *tag)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02865">wasm-objects.cc:2865</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionPackage_html_aff0527791499aaefa3d40b6b010470ca"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionPackage.html#aff0527791499aaefa3d40b6b010470ca">v8::internal::WasmExceptionPackage::GetExceptionTag</a></div><div class="ttdeci">static DirectHandle&lt; Object &gt; GetExceptionTag(Isolate *isolate, DirectHandle&lt; WasmExceptionPackage &gt; exception_package)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02769">wasm-objects.cc:2769</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExceptionTag_html_a16f4ecfd034d8f83eb0b57c2dfeb7e86"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExceptionTag.html#a16f4ecfd034d8f83eb0b57c2dfeb7e86">v8::internal::WasmExceptionTag::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmExceptionTag &gt; New(Isolate *isolate, int index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03305">wasm-objects.cc:3305</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunctionData_html_a61d4218f4ec2d1c304c144d07011bfb3"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunctionData.html#a61d4218f4ec2d1c304c144d07011bfb3">v8::internal::WasmExportedFunctionData::sig_index</a></div><div class="ttdeci">wasm::CanonicalTypeIndex sig_index() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00474">wasm-objects-inl.h:474</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunctionData_html_aafe79a7d521f191a2e276e90ab8e92be"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunctionData.html#aafe79a7d521f191a2e276e90ab8e92be">v8::internal::WasmExportedFunctionData::MatchesSignature</a></div><div class="ttdeci">bool MatchesSignature(wasm::CanonicalTypeIndex other_canonical_sig_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03059">wasm-objects.cc:3059</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunction_html_a1185042522e2a2bf4f029417bb5dcf3c"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunction.html#a1185042522e2a2bf4f029417bb5dcf3c">v8::internal::WasmExportedFunction::GetDebugName</a></div><div class="ttdeci">static std::unique_ptr&lt; char[]&gt; GetDebugName(const wasm::CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03066">wasm-objects.cc:3066</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunction_html_a89d14615aeb9e6fdd2017315fe60d0ef"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunction.html#a89d14615aeb9e6fdd2017315fe60d0ef">v8::internal::WasmExportedFunction::IsWasmExportedFunction</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE bool IsWasmExportedFunction(Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02899">wasm-objects.cc:2899</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunction_html_aa4ad9d9842d4f60c0411e95936f9d6d0"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunction.html#aa4ad9d9842d4f60c0411e95936f9d6d0">v8::internal::WasmExportedFunction::GetWrapper</a></div><div class="ttdeci">static DirectHandle&lt; Code &gt; GetWrapper(Isolate *isolate, const wasm::CanonicalSig *sig, wasm::CanonicalTypeIndex sig_id, bool receiver_is_first_param, const wasm::WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02095">wasm-objects.cc:2095</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunction_html_aa93c65fca3c328966a6acdbd0f1037c1"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunction.html#aa93c65fca3c328966a6acdbd0f1037c1">v8::internal::WasmExportedFunction::MarkAsReceiverIsFirstParam</a></div><div class="ttdeci">static void MarkAsReceiverIsFirstParam(Isolate *isolate, DirectHandle&lt; WasmExportedFunction &gt; exported_function)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02127">wasm-objects.cc:2127</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExportedFunction_html_ac6583fa41f78a2543566f9812e57146b"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExportedFunction.html#ac6583fa41f78a2543566f9812e57146b">v8::internal::WasmExportedFunction::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmExportedFunction &gt; New(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; instance_data, DirectHandle&lt; WasmFuncRef &gt; func_ref, DirectHandle&lt; WasmInternalFunction &gt; internal_function, int arity, DirectHandle&lt; Code &gt; export_wrapper)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02957">wasm-objects.cc:2957</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmExternalFunction_html_ac2a96212bef554982c768f1c04f72d20"><div class="ttname"><a href="classv8_1_1internal_1_1WasmExternalFunction.html#ac2a96212bef554982c768f1c04f72d20">v8::internal::WasmExternalFunction::IsWasmExternalFunction</a></div><div class="ttdeci">static bool IsWasmExternalFunction(Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03299">wasm-objects.cc:3299</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmGlobalObject_html_a9edfe9ec8d5743bb3ca664cfdb54dad8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmGlobalObject.html#a9edfe9ec8d5743bb3ca664cfdb54dad8">v8::internal::WasmGlobalObject::type_size</a></div><div class="ttdeci">int type_size() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00132">wasm-objects-inl.h:132</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmGlobalObject_html_ade63c64025c7c0f0ba5a05b9d11e431f"><div class="ttname"><a href="classv8_1_1internal_1_1WasmGlobalObject.html#ade63c64025c7c0f0ba5a05b9d11e431f">v8::internal::WasmGlobalObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE MaybeDirectHandle&lt; WasmGlobalObject &gt; New(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; instance_object, MaybeDirectHandle&lt; JSArrayBuffer &gt; maybe_untagged_buffer, MaybeDirectHandle&lt; FixedArray &gt; maybe_tagged_buffer, wasm::ValueType type, int32_t offset, bool is_mutable)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01429">wasm-objects.cc:1429</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmImportData_html_a5e5fe028402ec8919bc6fa46e6057d08"><div class="ttname"><a href="classv8_1_1internal_1_1WasmImportData.html#a5e5fe028402ec8919bc6fa46e6057d08">v8::internal::WasmImportData::SetFuncRefAsCallOrigin</a></div><div class="ttdeci">void SetFuncRefAsCallOrigin(Tagged&lt; WasmInternalFunction &gt; func)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02150">wasm-objects.cc:2150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmImportData_html_aa4e2be8693dfea569a0e6264c7d7fae7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmImportData.html#aa4e2be8693dfea569a0e6264c7d7fae7">v8::internal::WasmImportData::SetIndexInTableAsCallOrigin</a></div><div class="ttdeci">void SetIndexInTableAsCallOrigin(Tagged&lt; WasmDispatchTable &gt; table, int entry_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02144">wasm-objects.cc:2144</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmInternalFunction_html_aa01e2244c83b9a4ca24d4bfd2cb0d78a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmInternalFunction.html#aa01e2244c83b9a4ca24d4bfd2cb0d78a">v8::internal::WasmInternalFunction::GetOrCreateExternal</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; JSFunction &gt; GetOrCreateExternal(DirectHandle&lt; WasmInternalFunction &gt; internal)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02045">wasm-objects.cc:2045</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmInternalFunction_html_afc61f955fff63212f4ae19ee110cf978"><div class="ttname"><a href="classv8_1_1internal_1_1WasmInternalFunction.html#afc61f955fff63212f4ae19ee110cf978">v8::internal::WasmInternalFunction::try_get_external</a></div><div class="ttdeci">bool try_get_external(Tagged&lt; JSFunction &gt; *result)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02038">wasm-objects.cc:2038</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmInterpreterObject_html_a600f4df497830dd1d5c891b5d846f1f7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmInterpreterObject.html#a600f4df497830dd1d5c891b5d846f1f7">v8::internal::WasmInterpreterObject::New</a></div><div class="ttdeci">static DirectHandle&lt; Tuple2 &gt; New(DirectHandle&lt; WasmInstanceObject &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-objects_8cc_source.html#l00017">wasm-interpreter-objects.cc:17</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunctionData_html_a0b2e66ac19774c9fed00276e33a7a43d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunctionData.html#a0b2e66ac19774c9fed00276e33a7a43d">v8::internal::WasmJSFunctionData::MatchesSignature</a></div><div class="ttdeci">bool MatchesSignature(wasm::CanonicalTypeIndex other_canonical_sig_index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03287">wasm-objects.cc:3287</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunctionData_html_a1077c937f7fbff28184a2a9146fb87dc"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunctionData.html#a1077c937f7fbff28184a2a9146fb87dc">v8::internal::WasmJSFunctionData::GetSignature</a></div><div class="ttdeci">const wasm::CanonicalSig * GetSignature() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03282">wasm-objects.cc:3282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunctionData_html_a9e186bca027fc2dd4d39d21c4508fd65"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunctionData.html#a9e186bca027fc2dd4d39d21c4508fd65">v8::internal::WasmJSFunctionData::GetSuspend</a></div><div class="ttdeci">wasm::Suspend GetSuspend() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03278">wasm-objects.cc:3278</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunctionData_html_ad273501a0b5fb4cbba3dcdd43c763995"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunctionData.html#ad273501a0b5fb4cbba3dcdd43c763995">v8::internal::WasmJSFunctionData::sig_index</a></div><div class="ttdeci">wasm::CanonicalTypeIndex sig_index() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00492">wasm-objects-inl.h:492</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunctionData_html_af782694f73663f80aab12fcc5ec2787a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunctionData.html#af782694f73663f80aab12fcc5ec2787a">v8::internal::WasmJSFunctionData::GetCallable</a></div><div class="ttdeci">Tagged&lt; JSReceiver &gt; GetCallable() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03273">wasm-objects.cc:3273</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunction_html_a5f4776e0c31cabfacc5c5cfa6d1a6caa"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunction.html#a5f4776e0c31cabfacc5c5cfa6d1a6caa">v8::internal::WasmJSFunction::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmJSFunction &gt; New(Isolate *isolate, const wasm::FunctionSig *sig, DirectHandle&lt; JSReceiver &gt; callable, wasm::Suspend suspend)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03182">wasm-objects.cc:3182</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmJSFunction_html_acd5f3569a442acea759fd951ca21567f"><div class="ttname"><a href="classv8_1_1internal_1_1WasmJSFunction.html#acd5f3569a442acea759fd951ca21567f">v8::internal::WasmJSFunction::IsWasmJSFunction</a></div><div class="ttdeci">static bool IsWasmJSFunction(Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03078">wasm-objects.cc:3078</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryMapDescriptor_html_a1960f2edb81d9fb0e21db67370235719"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a1960f2edb81d9fb0e21db67370235719">v8::internal::WasmMemoryMapDescriptor::MapDescriptor</a></div><div class="ttdeci">V8_EXPORT_PRIVATE size_t MapDescriptor(DirectHandle&lt; WasmMemoryObject &gt; memory, size_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01345">wasm-objects.cc:1345</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryMapDescriptor_html_a4bd7bb60a3267105908ed66ebb9b18c7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a4bd7bb60a3267105908ed66ebb9b18c7">v8::internal::WasmMemoryMapDescriptor::UnmapDescriptor</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool UnmapDescriptor()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01392">wasm-objects.cc:1392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryMapDescriptor_html_a5d494fe23259c204fea87f6e5eefb391"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a5d494fe23259c204fea87f6e5eefb391">v8::internal::WasmMemoryMapDescriptor::NewFromAnonymous</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE MaybeDirectHandle&lt; WasmMemoryMapDescriptor &gt; NewFromAnonymous(Isolate *isolate, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01304">wasm-objects.cc:1304</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryMapDescriptor_html_a9ec548948b1d7bb30d31749ef162f145"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryMapDescriptor.html#a9ec548948b1d7bb30d31749ef162f145">v8::internal::WasmMemoryMapDescriptor::NewFromFileDescriptor</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmMemoryMapDescriptor &gt; NewFromFileDescriptor(Isolate *isolate, v8::WasmMemoryMapDescriptor::WasmFileDescriptor file_descriptor)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01327">wasm-objects.cc:1327</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a0df25b331079bfa7ca55891d84d1a511"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a0df25b331079bfa7ca55891d84d1a511">v8::internal::WasmMemoryObject::RefreshSharedBuffer</a></div><div class="ttdeci">static DirectHandle&lt; JSArrayBuffer &gt; RefreshSharedBuffer(Isolate *isolate, DirectHandle&lt; WasmMemoryObject &gt; memory, ResizableFlag resizable_by_js)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01115">wasm-objects.cc:1115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a11123e674ed260e849a726396a6b1f3c"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a11123e674ed260e849a726396a6b1f3c">v8::internal::WasmMemoryObject::ToFixedLengthBuffer</a></div><div class="ttdeci">static DirectHandle&lt; JSArrayBuffer &gt; ToFixedLengthBuffer(Isolate *isolate, DirectHandle&lt; WasmMemoryObject &gt; memory)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01269">wasm-objects.cc:1269</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a32101d7a077535dadf31d9373ec3a6f2"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a32101d7a077535dadf31d9373ec3a6f2">v8::internal::WasmMemoryObject::ToResizableBuffer</a></div><div class="ttdeci">static DirectHandle&lt; JSArrayBuffer &gt; ToResizableBuffer(Isolate *isolate, DirectHandle&lt; WasmMemoryObject &gt; memory)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01285">wasm-objects.cc:1285</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a5d9a1955952df150f9c2d140bd173ad4"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a5d9a1955952df150f9c2d140bd173ad4">v8::internal::WasmMemoryObject::RefreshBuffer</a></div><div class="ttdeci">static DirectHandle&lt; JSArrayBuffer &gt; RefreshBuffer(Isolate *isolate, DirectHandle&lt; WasmMemoryObject &gt; memory, std::shared_ptr&lt; BackingStore &gt; new_backing_store)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01081">wasm-objects.cc:1081</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a65b8addcf2135f693f3f83a8acf74aa7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a65b8addcf2135f693f3f83a8acf74aa7">v8::internal::WasmMemoryObject::kNoMaximum</a></div><div class="ttdeci">static constexpr int kNoMaximum</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00427">wasm-objects.h:427</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a7ce26bf7f45ae37057ae2017749b25bf"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a7ce26bf7f45ae37057ae2017749b25bf">v8::internal::WasmMemoryObject::has_maximum_pages</a></div><div class="ttdeci">bool has_maximum_pages()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00638">wasm-objects-inl.h:638</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a83af2a10e27026f8c76e91833243e5f5"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a83af2a10e27026f8c76e91833243e5f5">v8::internal::WasmMemoryObject::UseInInstance</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void UseInInstance(Isolate *isolate, DirectHandle&lt; WasmMemoryObject &gt; memory, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, DirectHandle&lt; WasmTrustedInstanceData &gt; shared_trusted_instance_data, int memory_index_in_instance)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00978">wasm-objects.cc:978</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_a97b4ba7ad14c6f986087c0cd437f108a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#a97b4ba7ad14c6f986087c0cd437f108a">v8::internal::WasmMemoryObject::SetNewBuffer</a></div><div class="ttdeci">void SetNewBuffer(Isolate *isolate, Tagged&lt; JSArrayBuffer &gt; new_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00996">wasm-objects.cc:996</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_ab04a12b70d33ad72a3442d2a21bbfff7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#ab04a12b70d33ad72a3442d2a21bbfff7">v8::internal::WasmMemoryObject::Grow</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE int32_t Grow(Isolate *, DirectHandle&lt; WasmMemoryObject &gt;, uint32_t pages)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01146">wasm-objects.cc:1146</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_ab10298844a3a2e6993fc6f3634eaf898"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#ab10298844a3a2e6993fc6f3634eaf898">v8::internal::WasmMemoryObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmMemoryObject &gt; New(Isolate *isolate, DirectHandle&lt; JSArrayBuffer &gt; buffer, int maximum, wasm::AddressType address_type)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00878">wasm-objects.cc:878</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_ad61fd836f186cfadacfaf1d000424a4a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#ad61fd836f186cfadacfaf1d000424a4a">v8::internal::WasmMemoryObject::UpdateInstances</a></div><div class="ttdeci">void UpdateInstances(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01026">wasm-objects.cc:1026</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmMemoryObject_html_ae99a8b8f00da43fbbbe34eaa7a187225"><div class="ttname"><a href="classv8_1_1internal_1_1WasmMemoryObject.html#ae99a8b8f00da43fbbbe34eaa7a187225">v8::internal::WasmMemoryObject::FixUpResizableArrayBuffer</a></div><div class="ttdeci">void FixUpResizableArrayBuffer(Tagged&lt; JSArrayBuffer &gt; new_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01048">wasm-objects.cc:1048</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a11f569095080536e4a32d07e7819ab78"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a11f569095080536e4a32d07e7819ab78">v8::internal::WasmModuleObject::module</a></div><div class="ttdeci">const wasm::WasmModule * module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00095">wasm-objects-inl.h:95</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a420d36fa31fab80f7dd6cf6bce2438c8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">v8::internal::WasmModuleObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmModuleObject &gt; New(Isolate *isolate, std::shared_ptr&lt; wasm::NativeModule &gt; native_module, DirectHandle&lt; Script &gt; script)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00113">wasm-objects.cc:113</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a43a4243e8c99a7f72e7fa6406f303f8b"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a43a4243e8c99a7f72e7fa6406f303f8b">v8::internal::WasmModuleObject::GetFunctionNameOrNull</a></div><div class="ttdeci">static MaybeDirectHandle&lt; String &gt; GetFunctionNameOrNull(Isolate *, DirectHandle&lt; WasmModuleObject &gt;, uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00169">wasm-objects.cc:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a5baf40871885dded667e73ac9a56e9a2"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a5baf40871885dded667e73ac9a56e9a2">v8::internal::WasmModuleObject::GetModuleNameOrNull</a></div><div class="ttdeci">static MaybeDirectHandle&lt; String &gt; GetModuleNameOrNull(Isolate *, DirectHandle&lt; WasmModuleObject &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00161">wasm-objects.cc:161</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a909423f11ae499833369d415e9a18212"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a909423f11ae499833369d415e9a18212">v8::internal::WasmModuleObject::native_module</a></div><div class="ttdeci">wasm::NativeModule * native_module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00088">wasm-objects-inl.h:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a9c404ba0124692e0b3b5b7c58c582ac2"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a9c404ba0124692e0b3b5b7c58c582ac2">v8::internal::WasmModuleObject::GetRawFunctionName</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; GetRawFunctionName(int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00182">wasm-objects.cc:182</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_aad63556c675d28c5823c6f4ca765c67d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#aad63556c675d28c5823c6f4ca765c67d">v8::internal::WasmModuleObject::ExtractUtf8StringFromModuleBytes</a></div><div class="ttdeci">static DirectHandle&lt; String &gt; ExtractUtf8StringFromModuleBytes(Isolate *, DirectHandle&lt; WasmModuleObject &gt;, wasm::WireBytesRef, InternalizeString)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00136">wasm-objects.cc:136</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_a0f976add8d54cabc42cc6cd961299590"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#a0f976add8d54cabc42cc6cd961299590">v8::internal::WasmStruct::Size</a></div><div class="ttdeci">static int Size(const wasm::StructType *type)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l01446">wasm-objects.h:1446</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_a458cc221d1af0ccb4c05fd25770a2074"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#a458cc221d1af0ccb4c05fd25770a2074">v8::internal::WasmStruct::GcSafeType</a></div><div class="ttdeci">static const wasm::CanonicalStructType * GcSafeType(Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02202">wasm-objects.cc:2202</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_a7f2b5aa8e14b67c2b8f6f70a70b1455b"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#a7f2b5aa8e14b67c2b8f6f70a70b1455b">v8::internal::WasmStruct::AllocateDescriptorUninitialized</a></div><div class="ttdeci">static DirectHandle&lt; WasmStruct &gt; AllocateDescriptorUninitialized(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_data, wasm::ModuleTypeIndex index, DirectHandle&lt; Map &gt; map, DirectHandle&lt; Object &gt; first_field)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02259">wasm-objects.cc:2259</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_a9777734ea79e85221a87ed3417b9f01d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#a9777734ea79e85221a87ed3417b9f01d">v8::internal::WasmStruct::EncodeInstanceSizeInMap</a></div><div class="ttdeci">static void EncodeInstanceSizeInMap(int instance_size, Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00719">wasm-objects-inl.h:719</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_a9bfd362a1d1c2f9a5eaa51e5740c4d59"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#a9bfd362a1d1c2f9a5eaa51e5740c4d59">v8::internal::WasmStruct::GetFieldValue</a></div><div class="ttdeci">V8_EXPORT_PRIVATE wasm::WasmValue GetFieldValue(uint32_t field_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02298">wasm-objects.cc:2298</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmStruct_html_ad141fc8214797aa163eb2804e95366f9"><div class="ttname"><a href="classv8_1_1internal_1_1WasmStruct.html#ad141fc8214797aa163eb2804e95366f9">v8::internal::WasmStruct::AllocatePrototype</a></div><div class="ttdeci">static DirectHandle&lt; JSObject &gt; AllocatePrototype(Isolate *isolate, DirectHandle&lt; JSPrototype &gt; parent)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02212">wasm-objects.cc:2212</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmSuspendingObject_html_a07464f83ede52a8147f4d4bb36c4123d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmSuspendingObject.html#a07464f83ede52a8147f4d4bb36c4123d">v8::internal::WasmSuspendingObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmSuspendingObject &gt; New(Isolate *isolate, DirectHandle&lt; JSReceiver &gt; callable)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00822">wasm-objects.cc:822</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a0d4796d0039b7a60188d70af68ef3c0b"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a0d4796d0039b7a60188d70af68ef3c0b">v8::internal::WasmTableObject::ClearDispatchTable</a></div><div class="ttdeci">void ClearDispatchTable(int index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00724">wasm-objects.cc:724</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a155821336cf0ba7fe765cc56e972c22a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a155821336cf0ba7fe765cc56e972c22a">v8::internal::WasmTableObject::GetFunctionTableEntry</a></div><div class="ttdeci">static void GetFunctionTableEntry(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, int entry_index, bool *is_valid, bool *is_null, MaybeDirectHandle&lt; WasmTrustedInstanceData &gt; *instance_data, int *function_index, MaybeDirectHandle&lt; WasmJSFunction &gt; *maybe_js_function)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00768">wasm-objects.cc:768</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a16b9d149c61b70377845fc6b41761c19"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a16b9d149c61b70377845fc6b41761c19">v8::internal::WasmTableObject::UpdateDispatchTable</a></div><div class="ttdeci">static void UpdateDispatchTable(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, int entry_index, const wasm::WasmFunction *func, DirectHandle&lt; WasmTrustedInstanceData &gt; target_instance)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00541">wasm-objects.cc:541</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a44960b521a446db5f1e61b9bfb0c56d6"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a44960b521a446db5f1e61b9bfb0c56d6">v8::internal::WasmTableObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmTableObject &gt; New(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_data, wasm::ValueType type, wasm::CanonicalValueType canonical_type, uint32_t initial, bool has_maximum, uint64_t maximum, DirectHandle&lt; Object &gt; initial_value, wasm::AddressType address_type, DirectHandle&lt; WasmDispatchTable &gt; *out_dispatch_table=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00196">wasm-objects.cc:196</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a4d17c6f8f0a18a656e9037595396372f"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a4d17c6f8f0a18a656e9037595396372f">v8::internal::WasmTableObject::SetFunctionTableEntry</a></div><div class="ttdeci">static void SetFunctionTableEntry(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, int entry_index, DirectHandle&lt; Object &gt; entry)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00338">wasm-objects.cc:338</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a538bea74f04b303202a3184772b964be"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a538bea74f04b303202a3184772b964be">v8::internal::WasmTableObject::type</a></div><div class="ttdeci">wasm::ValueType type(const wasm::WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00583">wasm-objects-inl.h:583</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_a6b4a750d18a949ca6c0e9346e0f66179"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#a6b4a750d18a949ca6c0e9346e0f66179">v8::internal::WasmTableObject::canonical_type</a></div><div class="ttdeci">wasm::CanonicalValueType canonical_type(const wasm::WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00589">wasm-objects-inl.h:589</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_aa5e3c6d5c308301194a5fd89e6dd9e59"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#aa5e3c6d5c308301194a5fd89e6dd9e59">v8::internal::WasmTableObject::Get</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; Object &gt; Get(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00431">wasm-objects.cc:431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_aa8de568bbf14b8b7bb4570f825887df5"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#aa8de568bbf14b8b7bb4570f825887df5">v8::internal::WasmTableObject::unsafe_type</a></div><div class="ttdeci">wasm::ValueType unsafe_type()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00597">wasm-objects-inl.h:597</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_aaa393ceb64344c386d966b5b1c6e9a16"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#aaa393ceb64344c386d966b5b1c6e9a16">v8::internal::WasmTableObject::JSToWasmElement</a></div><div class="ttdeci">static MaybeDirectHandle&lt; Object &gt; JSToWasmElement(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, DirectHandle&lt; Object &gt; entry, const char **error_message)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00328">wasm-objects.cc:328</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_abd200bd6702d0b1d288516cb0f7173fc"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#abd200bd6702d0b1d288516cb0f7173fc">v8::internal::WasmTableObject::Fill</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void Fill(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, uint32_t start, DirectHandle&lt; Object &gt; entry, uint32_t count)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00504">wasm-objects.cc:504</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_acfdec070b48fe34a36f7aa7fed63a969"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#acfdec070b48fe34a36f7aa7fed63a969">v8::internal::WasmTableObject::Set</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void Set(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, uint32_t index, DirectHandle&lt; Object &gt; entry)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00379">wasm-objects.cc:379</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_ad51363b96ea8a38d2957f46f2767b4de"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#ad51363b96ea8a38d2957f46f2767b4de">v8::internal::WasmTableObject::Grow</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE int Grow(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, uint32_t count, DirectHandle&lt; Object &gt; init_value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00259">wasm-objects.cc:259</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTableObject_html_ada0ac8e1ab7d1e365edd372d6b02c53d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTableObject.html#ada0ac8e1ab7d1e365edd372d6b02c53d">v8::internal::WasmTableObject::SetFunctionTablePlaceholder</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void SetFunctionTablePlaceholder(Isolate *isolate, DirectHandle&lt; WasmTableObject &gt; table, int entry_index, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00750">wasm-objects.cc:750</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTagObject_html_a5e0d871680ed27f3dc92de54b1c2257d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTagObject.html#a5e0d871680ed27f3dc92de54b1c2257d">v8::internal::WasmTagObject::MatchesSignature</a></div><div class="ttdeci">bool MatchesSignature(wasm::CanonicalTypeIndex expected_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02411">wasm-objects.cc:2411</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTagObject_html_a80e21a9531997c9d7c95d9bd95d86cd4"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTagObject.html#a80e21a9531997c9d7c95d9bd95d86cd4">v8::internal::WasmTagObject::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmTagObject &gt; New(Isolate *isolate, const wasm::FunctionSig *sig, wasm::CanonicalTypeIndex type_index, DirectHandle&lt; HeapObject &gt; tag, DirectHandle&lt; WasmTrustedInstanceData &gt; instance)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02367">wasm-objects.cc:2367</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a046bdad8a33dfd81561292116a4dbcec"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a046bdad8a33dfd81561292116a4dbcec">v8::internal::WasmTrustedInstanceData::New</a></div><div class="ttdeci">static DirectHandle&lt; WasmTrustedInstanceData &gt; New(Isolate *, DirectHandle&lt; WasmModuleObject &gt;, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01686">wasm-objects.cc:1686</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a1712b5e555cfe7c555c1167b74a0c81a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a1712b5e555cfe7c555c1167b74a0c81a">v8::internal::WasmTrustedInstanceData::native_module</a></div><div class="ttdeci">wasm::NativeModule * native_module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00310">wasm-objects-inl.h:310</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a27d1f1a3201baec4b9103b3bb27888b6"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a27d1f1a3201baec4b9103b3bb27888b6">v8::internal::WasmTrustedInstanceData::GetOrCreateFuncRef</a></div><div class="ttdeci">static DirectHandle&lt; WasmFuncRef &gt; GetOrCreateFuncRef(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, int function_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01995">wasm-objects.cc:1995</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a2b52a6afd836b6b563383e787d3131e7"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a2b52a6afd836b6b563383e787d3131e7">v8::internal::WasmTrustedInstanceData::GetGlobalBufferAndIndex</a></div><div class="ttdeci">std::pair&lt; Tagged&lt; FixedArray &gt;, uint32_t &gt; GetGlobalBufferAndIndex(const wasm::WasmGlobal &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02165">wasm-objects.cc:2165</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a3b10b49e542f346ba14702828af547c0"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a3b10b49e542f346ba14702828af547c0">v8::internal::WasmTrustedInstanceData::SetRawMemory</a></div><div class="ttdeci">void SetRawMemory(int memory_index, uint8_t *mem_start, size_t mem_size)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01642">wasm-objects.cc:1642</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a50285bb0cb1b1cf4b3c6cb146f73eecb"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a50285bb0cb1b1cf4b3c6cb146f73eecb">v8::internal::WasmTrustedInstanceData::module_object</a></div><div class="ttdeci">Tagged&lt; WasmModuleObject &gt; module_object() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00314">wasm-objects-inl.h:314</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a570376cd95bb723fb0a30b9e1e0ebc0d"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a570376cd95bb723fb0a30b9e1e0ebc0d">v8::internal::WasmTrustedInstanceData::kProtectedFieldNames</a></div><div class="ttdeci">static constexpr std::array&lt; const char *, 6 &gt; kProtectedFieldNames</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00659">wasm-objects.h:659</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a6a3c772c7795f345d71f35b3cac43d45"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a6a3c772c7795f345d71f35b3cac43d45">v8::internal::WasmTrustedInstanceData::try_get_func_ref</a></div><div class="ttdeci">bool try_get_func_ref(int index, Tagged&lt; WasmFuncRef &gt; *result)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01987">wasm-objects.cc:1987</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a6d40ff595b69eb36026f3ec8d1a35fac"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a6d40ff595b69eb36026f3ec8d1a35fac">v8::internal::WasmTrustedInstanceData::kProtectedFieldOffsets</a></div><div class="ttdeci">static constexpr std::array&lt; uint16_t, 6 &gt; kProtectedFieldOffsets</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00657">wasm-objects.h:657</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a74e85e919dddc266cc1d846849aec50a"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a74e85e919dddc266cc1d846849aec50a">v8::internal::WasmTrustedInstanceData::InitDataSegmentArrays</a></div><div class="ttdeci">void InitDataSegmentArrays(const wasm::NativeModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01855">wasm-objects.cc:1855</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a7558971c5572009784c8a45e25033bdc"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a7558971c5572009784c8a45e25033bdc">v8::internal::WasmTrustedInstanceData::GetGlobalStorage</a></div><div class="ttdeci">uint8_t * GetGlobalStorage(const wasm::WasmGlobal &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02154">wasm-objects.cc:2154</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a77178e357a3856cdbbeb238b075f45e4"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a77178e357a3856cdbbeb238b075f45e4">v8::internal::WasmTrustedInstanceData::InitTableEntries</a></div><div class="ttdeci">static std::optional&lt; MessageTemplate &gt; InitTableEntries(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, DirectHandle&lt; WasmTrustedInstanceData &gt; shared_trusted_instance_data, uint32_t table_index, uint32_t segment_index, uint32_t dst, uint32_t src, uint32_t count) V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01935">wasm-objects.cc:1935</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_a82e0d67b495b3d12886e1491a43cdb24"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#a82e0d67b495b3d12886e1491a43cdb24">v8::internal::WasmTrustedInstanceData::kTaggedFieldNames</a></div><div class="ttdeci">static constexpr std::array&lt; const char *, kTaggedFieldsCount &gt; kTaggedFieldNames</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00655">wasm-objects.h:655</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_aabf57a672c88fe7c988311cd560a37d1"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#aabf57a672c88fe7c988311cd560a37d1">v8::internal::WasmTrustedInstanceData::kTaggedFieldOffsets</a></div><div class="ttdeci">static constexpr std::array&lt; uint16_t, kTaggedFieldsCount &gt; kTaggedFieldOffsets</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00652">wasm-objects.h:652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_abc9dc826c0283941be4d1e6cfa9371d3"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abc9dc826c0283941be4d1e6cfa9371d3">v8::internal::WasmTrustedInstanceData::GetGlobalValue</a></div><div class="ttdeci">wasm::WasmValue GetGlobalValue(Isolate *, const wasm::WasmGlobal &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02179">wasm-objects.cc:2179</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_abe17aad860c7790fe78f65cae8e64d29"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#abe17aad860c7790fe78f65cae8e64d29">v8::internal::WasmTrustedInstanceData::module</a></div><div class="ttdeci">const wasm::WasmModule * module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00318">wasm-objects-inl.h:318</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_ad5fa0df8fba113e186afd8a1b10b8161"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad5fa0df8fba113e186afd8a1b10b8161">v8::internal::WasmTrustedInstanceData::CopyTableEntries</a></div><div class="ttdeci">static bool CopyTableEntries(Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, uint32_t table_dst_index, uint32_t table_src_index, uint32_t dst, uint32_t src, uint32_t count) V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01897">wasm-objects.cc:1897</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmTrustedInstanceData_html_ad7aa4c4d7b3be1343889e872863e2982"><div class="ttname"><a href="classv8_1_1internal_1_1WasmTrustedInstanceData.html#ad7aa4c4d7b3be1343889e872863e2982">v8::internal::WasmTrustedInstanceData::GetCallTarget</a></div><div class="ttdeci">WasmCodePointer GetCallTarget(uint32_t func_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l01882">wasm-objects.cc:1882</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakArrayList_html_aa986929cdb53581c4198099a06376487"><div class="ttname"><a href="classv8_1_1internal_1_1WeakArrayList.html#aa986929cdb53581c4198099a06376487">v8::internal::WeakArrayList::Append</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT DirectHandle&lt; WeakArrayList &gt; Append(Isolate *isolate, DirectHandle&lt; WeakArrayList &gt; array, MaybeObjectDirectHandle value, AllocationType allocation=AllocationType::kYoung)</div><div class="ttdef"><b>Definition:</b> <a href="fixed-array_8cc_source.html#l00201">fixed-array.cc:201</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Zone_html"><div class="ttname"><a href="classv8_1_1internal_1_1Zone.html">v8::internal::Zone</a></div><div class="ttdef"><b>Definition:</b> <a href="zone_8h_source.html#l00043">zone.h:43</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalArrayType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalArrayType.html">v8::internal::wasm::CanonicalArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="struct-types_8h_source.html#l00341">struct-types.h:341</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalSig_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalSig.html">v8::internal::wasm::CanonicalSig</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01298">value-type.h:1298</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalStructType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalStructType.html">v8::internal::wasm::CanonicalStructType</a></div><div class="ttdef"><b>Definition:</b> <a href="struct-types_8h_source.html#l00273">struct-types.h:273</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html">v8::internal::wasm::CanonicalValueType</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01025">value-type.h:1025</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html_a55e602025f5b4c74e00c757608fda100"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a55e602025f5b4c74e00c757608fda100">v8::internal::wasm::CanonicalValueType::heap_representation</a></div><div class="ttdeci">constexpr HeapType::Representation heap_representation() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01085">value-type.h:1085</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html_a5f242cbe0f130951b31358c708e796bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a5f242cbe0f130951b31358c708e796bb">v8::internal::wasm::CanonicalValueType::Ref</a></div><div class="ttdeci">static constexpr CanonicalValueType Ref(CanonicalTypeIndex index, bool shared, RefTypeKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01030">value-type.h:1030</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html_a9b1bb53f0e9ccecf9708e9787d4ead8f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#a9b1bb53f0e9ccecf9708e9787d4ead8f">v8::internal::wasm::CanonicalValueType::heap_representation_non_shared</a></div><div class="ttdeci">constexpr HeapType::Representation heap_representation_non_shared() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01090">value-type.h:1090</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html_ab58fc78ee1cd5b17394acbc1a9fb7225"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#ab58fc78ee1cd5b17394acbc1a9fb7225">v8::internal::wasm::CanonicalValueType::ref_index</a></div><div class="ttdeci">constexpr CanonicalTypeIndex ref_index() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01068">value-type.h:1068</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalValueType_html_accec08e44f61c25ff3606c50e321a56c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalValueType.html#accec08e44f61c25ff3606c50e321a56c">v8::internal::wasm::CanonicalValueType::IsFunctionType</a></div><div class="ttdeci">constexpr bool IsFunctionType() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01080">value-type.h:1080</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa0282c61a075219b5972d3d3112c0a10a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa0282c61a075219b5972d3d3112c0a10a">v8::internal::wasm::HeapType::kNoExtern</a></div><div class="ttdeci">@ kNoExtern</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00808">value-type.h:808</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa1f943ff029672b2df1e322fc75323eaf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa1f943ff029672b2df1e322fc75323eaf">v8::internal::wasm::HeapType::kFunc</a></div><div class="ttdeci">@ kFunc</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00791">value-type.h:791</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa320906bfc64211b7edc96b87e7bb0b1f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa320906bfc64211b7edc96b87e7bb0b1f">v8::internal::wasm::HeapType::kStringViewIter</a></div><div class="ttdeci">@ kStringViewIter</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00805">value-type.h:805</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa446676998f26658060f286eeef6669df"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa446676998f26658060f286eeef6669df">v8::internal::wasm::HeapType::kExn</a></div><div class="ttdeci">@ kExn</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00801">value-type.h:801</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa48a0832a4b4a496ffab357a84bff6be9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa48a0832a4b4a496ffab357a84bff6be9">v8::internal::wasm::HeapType::kNoFunc</a></div><div class="ttdeci">@ kNoFunc</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00807">value-type.h:807</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa529e9f3c6770fd6ad2816bde1bd1b850"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa529e9f3c6770fd6ad2816bde1bd1b850">v8::internal::wasm::HeapType::kNoExn</a></div><div class="ttdeci">@ kNoExn</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00809">value-type.h:809</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa5ba0faa894795494a24087253c072837"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa5ba0faa894795494a24087253c072837">v8::internal::wasm::HeapType::kArray</a></div><div class="ttdeci">@ kArray</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00795">value-type.h:795</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa6d6b40bce596e155c6368d23522c8280"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa6d6b40bce596e155c6368d23522c8280">v8::internal::wasm::HeapType::kEq</a></div><div class="ttdeci">@ kEq</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00792">value-type.h:792</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa95dbdc9ef58bd0036eb0d473fa446447"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa95dbdc9ef58bd0036eb0d473fa446447">v8::internal::wasm::HeapType::kNoCont</a></div><div class="ttdeci">@ kNoCont</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00812">value-type.h:812</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa9ae3ff6d40e4ac963dbe392d083e73bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9ae3ff6d40e4ac963dbe392d083e73bb">v8::internal::wasm::HeapType::kStringViewWtf8</a></div><div class="ttdeci">@ kStringViewWtf8</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00803">value-type.h:803</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fa9c79438cff5460b1bbe855546a90f95b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fa9c79438cff5460b1bbe855546a90f95b">v8::internal::wasm::HeapType::kStringViewWtf16</a></div><div class="ttdeci">@ kStringViewWtf16</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00804">value-type.h:804</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faa9a632a937d4e6beaffc6f2b2e765951">v8::internal::wasm::HeapType::kExtern</a></div><div class="ttdeci">@ kExtern</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00797">value-type.h:797</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fab1897e4b7a37cdfc22e53ac3d2b4cf80"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fab1897e4b7a37cdfc22e53ac3d2b4cf80">v8::internal::wasm::HeapType::kAny</a></div><div class="ttdeci">@ kAny</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00796">value-type.h:796</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fab9ec01b11894d2e81d42dc19629e0d3d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fab9ec01b11894d2e81d42dc19629e0d3d">v8::internal::wasm::HeapType::kCont</a></div><div class="ttdeci">@ kCont</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00810">value-type.h:810</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fac4556d4417e6893fa9f6d8aa4506a401"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fac4556d4417e6893fa9f6d8aa4506a401">v8::internal::wasm::HeapType::kString</a></div><div class="ttdeci">@ kString</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00802">value-type.h:802</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fac8f8cc8d98a963031849efc0bccb2e99"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fac8f8cc8d98a963031849efc0bccb2e99">v8::internal::wasm::HeapType::kStruct</a></div><div class="ttdeci">@ kStruct</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00794">value-type.h:794</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05faecd5fb2d44d9d12ded1d3748e2c9852a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05faecd5fb2d44d9d12ded1d3748e2c9852a">v8::internal::wasm::HeapType::kI31</a></div><div class="ttdeci">@ kI31</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00793">value-type.h:793</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapType_html_a3cb113c1c1bd610631ec536141d2b05fafc5645deb64028bd000dc0583f6a2645"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapType.html#a3cb113c1c1bd610631ec536141d2b05fafc5645deb64028bd000dc0583f6a2645">v8::internal::wasm::HeapType::kNone</a></div><div class="ttdeci">@ kNone</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00806">value-type.h:806</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JSToWasmWrapperCompilationUnit_html_a752a58d9590a7faefdd7d7ea8732275d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JSToWasmWrapperCompilationUnit.html#a752a58d9590a7faefdd7d7ea8732275d">v8::internal::wasm::JSToWasmWrapperCompilationUnit::CompileJSToWasmWrapper</a></div><div class="ttdeci">static DirectHandle&lt; Code &gt; CompileJSToWasmWrapper(Isolate *isolate, const CanonicalSig *sig, CanonicalTypeIndex sig_index, bool receiver_is_first_param)</div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8cc_source.html#l00263">function-compiler.cc:263</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1LazilyGeneratedNames_html_a18b1d6d0ec7a67bbb0ecac1da13d75db"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1LazilyGeneratedNames.html#a18b1d6d0ec7a67bbb0ecac1da13d75db">v8::internal::wasm::LazilyGeneratedNames::LookupFunctionName</a></div><div class="ttdeci">WireBytesRef LookupFunctionName(ModuleWireBytes wire_bytes, uint32_t function_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8cc_source.html#l00085">wasm-module.cc:85</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">v8::internal::wasm::NativeModule</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00603">wasm-code-manager.h:603</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a04f2f50aa9d1cbc1dc28e60dbe687f74"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a04f2f50aa9d1cbc1dc28e60dbe687f74">v8::internal::wasm::NativeModule::module</a></div><div class="ttdeci">const WasmModule * module() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00766">wasm-code-manager.h:766</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a23ef76714c5b5dc6571cba072eb3dae1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a23ef76714c5b5dc6571cba072eb3dae1">v8::internal::wasm::NativeModule::tiering_budget_array</a></div><div class="ttdeci">std::atomic&lt; uint32_t &gt; * tiering_budget_array() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00886">wasm-code-manager.h:886</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a4210dcf60ee0c22b95de93af93f17f86"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">v8::internal::wasm::NativeModule::num_functions</a></div><div class="ttdeci">uint32_t num_functions() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00752">wasm-code-manager.h:752</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a63657aff1b54d8355c88d671645a62fd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">v8::internal::wasm::NativeModule::GetCodePointerHandle</a></div><div class="ttdeci">WasmCodePointer GetCodePointerHandle(int index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02144">wasm-code-manager.cc:2144</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a957b590c391c9dc0949cdaff8c94cf05"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a957b590c391c9dc0949cdaff8c94cf05">v8::internal::wasm::NativeModule::wire_bytes</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; wire_bytes() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00763">wasm-code-manager.h:763</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_aad381026fba28fc729be46402fef86e7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aad381026fba28fc729be46402fef86e7">v8::internal::wasm::NativeModule::jump_table_start</a></div><div class="ttdeci">Address jump_table_start() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00722">wasm-code-manager.h:722</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_abacd1cb85a612977eef0bc38deb0e076"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abacd1cb85a612977eef0bc38deb0e076">v8::internal::wasm::NativeModule::committed_code_space</a></div><div class="ttdeci">size_t committed_code_space() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00768">wasm-code-manager.h:768</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_a09f520b3ab3e3fa22827a66c4eebcb59"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a09f520b3ab3e3fa22827a66c4eebcb59">v8::internal::wasm::TypeCanonicalizer::IsCanonicalSubtype</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool IsCanonicalSubtype(CanonicalTypeIndex sub_index, CanonicalTypeIndex super_index)</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00236">canonical-types.cc:236</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_a13aa3a05620a7a9732ac5274d80b62b5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a13aa3a05620a7a9732ac5274d80b62b5">v8::internal::wasm::TypeCanonicalizer::LookupStruct</a></div><div class="ttdeci">V8_EXPORT_PRIVATE const CanonicalStructType * LookupStruct(CanonicalTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00197">canonical-types.cc:197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_a5fb6b7ad8c3b4aea3365cf98d5ed0392"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#a5fb6b7ad8c3b4aea3365cf98d5ed0392">v8::internal::wasm::TypeCanonicalizer::LookupArray</a></div><div class="ttdeci">V8_EXPORT_PRIVATE const CanonicalArrayType * LookupArray(CanonicalTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00204">canonical-types.cc:204</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_aa1f36fc3851ba2316d47223fa2b6e155"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa1f36fc3851ba2316d47223fa2b6e155">v8::internal::wasm::TypeCanonicalizer::LookupFunctionSignature</a></div><div class="ttdeci">V8_EXPORT_PRIVATE const CanonicalSig * LookupFunctionSignature(CanonicalTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00190">canonical-types.cc:190</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_aa7d63877150be29e04f49d189ea88c99"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aa7d63877150be29e04f49d189ea88c99">v8::internal::wasm::TypeCanonicalizer::AddRecursiveGroup</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void AddRecursiveGroup(WasmModule *module, uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00032">canonical-types.cc:32</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_aac1117f1918f3c8580be0e192a1c7307"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aac1117f1918f3c8580be0e192a1c7307">v8::internal::wasm::TypeCanonicalizer::PrepareForCanonicalTypeId</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void PrepareForCanonicalTypeId(Isolate *isolate, CanonicalTypeIndex id)</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00417">canonical-types.cc:417</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_aae73c94c9da97889bfdb35f3756e497b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#aae73c94c9da97889bfdb35f3756e497b">v8::internal::wasm::TypeCanonicalizer::IsShared</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool IsShared(CanonicalTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00467">canonical-types.cc:467</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_a09cf4ea5d5c5131cd99bf69b427dd13f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a09cf4ea5d5c5131cd99bf69b427dd13f">v8::internal::wasm::ValueTypeBase::value_kind_size</a></div><div class="ttdeci">constexpr int value_kind_size() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00486">value-type.h:486</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_a777139722a5dbb1f696aa90375aab584"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a777139722a5dbb1f696aa90375aab584">v8::internal::wasm::ValueTypeBase::kind</a></div><div class="ttdeci">constexpr ValueKind kind() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00637">value-type.h:637</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_a786387bf26930354003d39a87eec7921"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a786387bf26930354003d39a87eec7921">v8::internal::wasm::ValueTypeBase::is_reference</a></div><div class="ttdeci">constexpr bool is_reference() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00606">value-type.h:606</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_a836d5af46593f4f1abdd07a5521350ef"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a836d5af46593f4f1abdd07a5521350ef">v8::internal::wasm::ValueTypeBase::is_shared</a></div><div class="ttdeci">constexpr bool is_shared() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00404">value-type.h:404</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_a97e374db0b2e830d34c73ad6d6bc9afb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#a97e374db0b2e830d34c73ad6d6bc9afb">v8::internal::wasm::ValueTypeBase::has_index</a></div><div class="ttdeci">constexpr bool has_index() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00368">value-type.h:368</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_aa459140e8766cc7f6bdf67dcd174ad1e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#aa459140e8766cc7f6bdf67dcd174ad1e">v8::internal::wasm::ValueTypeBase::is_object_reference</a></div><div class="ttdeci">constexpr bool is_object_reference() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00607">value-type.h:607</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_acf78d34b0ebd28dd987c335f1efddaac"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#acf78d34b0ebd28dd987c335f1efddaac">v8::internal::wasm::ValueTypeBase::raw_bit_field</a></div><div class="ttdeci">constexpr uint32_t raw_bit_field() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00600">value-type.h:600</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_ad4ba8a380246eb2e204befd51ae7b94a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#ad4ba8a380246eb2e204befd51ae7b94a">v8::internal::wasm::ValueTypeBase::use_wasm_null</a></div><div class="ttdeci">constexpr bool use_wasm_null() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00463">value-type.h:463</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueTypeBase_html_af1a7ed1bec8df3c5d4b5717319edf55d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueTypeBase.html#af1a7ed1bec8df3c5d4b5717319edf55d">v8::internal::wasm::ValueTypeBase::generic_kind</a></div><div class="ttdeci">constexpr GenericKind generic_kind() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00421">value-type.h:421</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueType.html">v8::internal::wasm::ValueType</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00885">value-type.h:885</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmBytecode_html_a26899f1489841558f19ee9d079c7a7ab"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#a26899f1489841558f19ee9d079c7a7ab">v8::internal::wasm::WasmBytecode::JSToWasmWrapperPackedArraySize</a></div><div class="ttdeci">static uint32_t JSToWasmWrapperPackedArraySize(const FunctionSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-inl_8h_source.html#l00227">wasm-interpreter-inl.h:227</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmBytecode_html_aedbf4c4975cb628b6a71f1f9daaa2ee0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#aedbf4c4975cb628b6a71f1f9daaa2ee0">v8::internal::wasm::WasmBytecode::RefArgsCount</a></div><div class="ttdeci">static uint32_t RefArgsCount(const FunctionSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-inl_8h_source.html#l00184">wasm-interpreter-inl.h:184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmBytecode_html_af0d04f07fb83ec9836826b0ec50f1004"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmBytecode.html#af0d04f07fb83ec9836826b0ec50f1004">v8::internal::wasm::WasmBytecode::RefRetsCount</a></div><div class="ttdeci">static uint32_t RefRetsCount(const FunctionSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-inl_8h_source.html#l00194">wasm-interpreter-inl.h:194</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a329950b560b30699bd218b9622eedda7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a329950b560b30699bd218b9622eedda7">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleMetaDataSize(const WasmModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02441">wasm-code-manager.cc:2441</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a5b6cfe5d63b1c5f3b54fdb34ed91c863"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleCodeSize(const WasmModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02386">wasm-code-manager.cc:2386</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_a65882a1f49bd2c6a667cd3054f3dc2e2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65882a1f49bd2c6a667cd3054f3dc2e2">v8::internal::wasm::WasmCodePointerTable::GetEntrypointWithoutSignatureCheck</a></div><div class="ttdeci">Address GetEntrypointWithoutSignatureCheck(WasmCodePointer index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00064">wasm-code-pointer-table-inl.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5">v8::internal::wasm::WasmCode::kWasmToCapiWrapper</a></div><div class="ttdeci">@ kWasmToCapiWrapper</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00095">wasm-code-manager.h:95</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">v8::internal::wasm::WasmCode::kWasmToJsWrapper</a></div><div class="ttdeci">@ kWasmToJsWrapper</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00096">wasm-code-manager.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a82694f241e35d38f8f882c255e49e743"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">v8::internal::wasm::WasmEngine::type_canonicalizer</a></div><div class="ttdeci">TypeCanonicalizer * type_canonicalizer()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00392">wasm-engine.h:392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a97fb0af7b57585ca92456077115b16a7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a97fb0af7b57585ca92456077115b16a7">v8::internal::wasm::WasmEngine::set_had_nondeterminism</a></div><div class="ttdeci">static void set_had_nondeterminism()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00431">wasm-engine.h:431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmExportWrapperCache_html_aa67c99c7e5e517261faf25a6a4c4a053"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmExportWrapperCache.html#aa67c99c7e5e517261faf25a6a4c4a053">v8::internal::wasm::WasmExportWrapperCache::Get</a></div><div class="ttdeci">static Tagged&lt; CodeWrapper &gt; Get(Isolate *isolate, CanonicalTypeIndex sig_index, bool receiver_is_first_param)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-export-wrapper-cache_8cc_source.html#l00036">wasm-export-wrapper-cache.cc:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html">v8::internal::wasm::WasmImportWrapperCache</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8h_source.html#l00025">wasm-import-wrapper-cache.h:25</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a62f4cb8fc02e1bbfe2ed0f09ce2aa050"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a62f4cb8fc02e1bbfe2ed0f09ce2aa050">v8::internal::wasm::WasmImportWrapperCache::LazyInitialize</a></div><div class="ttdeci">void LazyInitialize(Isolate *triggering_isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00059">wasm-import-wrapper-cache.cc:59</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a83ced6511f55c6c4dca7707e21eb1d2d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a83ced6511f55c6c4dca7707e21eb1d2d">v8::internal::wasm::WasmImportWrapperCache::GetCompiled</a></div><div class="ttdeci">V8_EXPORT_PRIVATE std::shared_ptr&lt; WasmImportWrapperHandle &gt; GetCompiled(Isolate *isolate, ImportCallKind kind, CanonicalTypeIndex type_index, int expected_arity, Suspend suspend, const wasm::CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00283">wasm-import-wrapper-cache.cc:283</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_afdfee412fc036961cd7dd6c121d628da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#afdfee412fc036961cd7dd6c121d628da">v8::internal::wasm::WasmImportWrapperCache::Get</a></div><div class="ttdeci">V8_EXPORT_PRIVATE std::shared_ptr&lt; WasmImportWrapperHandle &gt; Get(Isolate *isolate, ImportCallKind kind, CanonicalTypeIndex type_index, int expected_arity, Suspend suspend, const wasm::CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00220">wasm-import-wrapper-cache.cc:220</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime_html_a0eb4e3dabf7592236408a50ae7fdb88d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a0eb4e3dabf7592236408a50ae7fdb88d">v8::internal::wasm::WasmInterpreterRuntime::ClearIndirectCallCacheEntry</a></div><div class="ttdeci">static void ClearIndirectCallCacheEntry(Isolate *isolate, DirectHandle&lt; WasmInstanceObject &gt; instance, uint32_t table_index, uint32_t entry_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-runtime_8cc_source.html#l01715">wasm-interpreter-runtime.cc:1715</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime_html_a32a62b50d2670eff6682c2d356b8f5c4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a32a62b50d2670eff6682c2d356b8f5c4">v8::internal::wasm::WasmInterpreterRuntime::UpdateIndirectCallTable</a></div><div class="ttdeci">static void UpdateIndirectCallTable(Isolate *isolate, DirectHandle&lt; WasmInstanceObject &gt; instance, uint32_t table_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-runtime_8cc_source.html#l01731">wasm-interpreter-runtime.cc:1731</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime_html_a48114bb1dcdac00eb8d8d1ea88929540"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInterpreterRuntime.html#a48114bb1dcdac00eb8d8d1ea88929540">v8::internal::wasm::WasmInterpreterRuntime::UpdateMemoryAddress</a></div><div class="ttdeci">static void UpdateMemoryAddress(DirectHandle&lt; WasmInstanceObject &gt; instance)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter-runtime_8cc_source.html#l00359">wasm-interpreter-runtime.cc:359</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmValue_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmValue.html">v8::internal::wasm::WasmValue</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-value_8h_source.html#l00047">wasm-value.h:47</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">v8::internal::wasm::WireBytesRef</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00060">wasm-module.h:60</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html_a1853a6fc4a88a37d2bb8a91b58781daf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a1853a6fc4a88a37d2bb8a91b58781daf">v8::internal::wasm::WireBytesRef::end_offset</a></div><div class="ttdeci">uint32_t end_offset() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00071">wasm-module.h:71</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html_a4f2dffb7efc3721571b5f1604d5d448a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a4f2dffb7efc3721571b5f1604d5d448a">v8::internal::wasm::WireBytesRef::offset</a></div><div class="ttdeci">uint32_t offset() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00069">wasm-module.h:69</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html_a94db77b7254197e7ed15d4851dcc3934"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html#a94db77b7254197e7ed15d4851dcc3934">v8::internal::wasm::WireBytesRef::is_set</a></div><div class="ttdeci">bool is_set() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00073">wasm-module.h:73</a></div></div>
<div class="ttc" id="acode-space-access_8h_html"><div class="ttname"><a href="code-space-access_8h.html">code-space-access.h</a></div></div>
<div class="ttc" id="acounters_8h_html"><div class="ttname"><a href="counters_8h.html">counters.h</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a3df0b28b666e942ffb9d7d04acdb9715"><div class="ttname"><a href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space size(in Mbytes)&quot;)     DEFINE_INT(random_gc_interval</div></div>
<div class="ttc" id="aflag-definitions_8h_html_aca14fbede0905858c819226fce3678cc"><div class="ttname"><a href="flag-definitions_8h.html#aca14fbede0905858c819226fce3678cc">nullptr</a></div><div class="ttdeci">refactor address components for immediate indexing make OptimizeMaglevOnNextCall optimize to turbofan instead of maglev filter for tracing turbofan compilation nullptr</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l01280">flag-definitions.h:1280</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_adaf90f045d5cd2710edd625b8685472a"><div class="ttname"><a href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available threshold for starting incremental marking immediately in percent of available Use a single schedule for determining a marking schedule between JS and C objects schedules the minor GC task with kUserVisible priority max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats TracingFlags::gc_stats track native contexts that are expected to be garbage collected verify heap pointers before and after GC memory reducer runs GC with ReduceMemoryFootprint flag Maximum number of memory reducer GCs scheduled Old gen GC speed is computed directly from gc tracer counters Perform compaction on full GCs based on V8 s default heuristics Perform compaction on every full GC Perform code space compaction when finalizing a full GC with stack Stress GC compaction to flush out bugs with moving objects flush of baseline code when it has not been executed recently Use time base code flushing instead of age Use a progress bar to scan large objects in increments when incremental marking is active force incremental marking for small heaps and run it more often Release pooled large pages after X seconds prints number of allocations and enables analysis mode for gc fuzz e g stress stress scavenge force scavenge at random points between and reclaim otherwise unreachable unmodified wrapper objects when possible discard the memory pool before invoking the GC on memory pressure or last resort GCs Delay before memory reducer start virtual randomize memory reservations by ignoring any hints passed when allocating pages use incremental marking for CppHeap cppheap_concurrent_marking c value for membalancer A special constant to balance between memory and space tradeoff The smaller the more memory it uses enable use of SSE4 instructions if available enable use of SAHF instruction if enable use of AVX VNNI instructions if available enable use of POPCNT instruction if available force all emitted branches to be in long mode(MIPS/PPC only)&quot;) DEFINE_BOOL(partial_constant_pool</div></div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_aeb1d337a6a2e13e2e9fa9e47fb153aa3"><div class="ttname"><a href="flag-definitions_8h.html#aeb1d337a6a2e13e2e9fa9e47fb153aa3">all</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at all</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l01570">flag-definitions.h:1570</a></div></div>
<div class="ttc" id="aiterator_8h_html"><div class="ttname"><a href="iterator_8h.html">iterator.h</a></div></div>
<div class="ttc" id="amanaged-inl_8h_html"><div class="ttname"><a href="managed-inl_8h.html">managed-inl.h</a></div></div>
<div class="ttc" id="amodule-compiler_8h_html"><div class="ttname"><a href="module-compiler_8h.html">module-compiler.h</a></div></div>
<div class="ttc" id="amodule-decoder_8h_html"><div class="ttname"><a href="module-decoder_8h.html">module-decoder.h</a></div></div>
<div class="ttc" id="amodule-instantiate_8h_html"><div class="ttname"><a href="module-instantiate_8h.html">module-instantiate.h</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_a511cc0636aed6a00d37d3e7cc0ec4e7c"><div class="ttname"><a href="namespaceunibrow.html#a511cc0636aed6a00d37d3e7cc0ec4e7c">unibrow::int16_t</a></div><div class="ttdeci">signed short int16_t</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00040">unicode.cc:40</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_ab0275d47f9778d486eafe88b18c5851d"><div class="ttname"><a href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00042">unicode.cc:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a36caaf43a3f7761ae90d699b961f0239"><div class="ttname"><a href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">v8::base::SNPrintF</a></div><div class="ttdeci">int SNPrintF(Vector&lt; char &gt; str, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8cc_source.html#l00020">strings.cc:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02elements_8cc_03_html_acd37159826079290ea180403d57a2ebeaa7e1f9f93df2422d7dd8114153deed99"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02elements_8cc_03.html#acd37159826079290ea180403d57a2ebeaa7e1f9f93df2422d7dd8114153deed99">v8::internal::anonymous_namespace{elements.cc}::kShared</a></div><div class="ttdeci">@ kShared</div><div class="ttdef"><b>Definition:</b> <a href="elements_8cc_source.html#l03364">elements.cc:3364</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_a63d8eefb47468aa3f816fbe26a59466a"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#a63d8eefb47468aa3f816fbe26a59466a">v8::internal::anonymous_namespace{json-stringifier.cc}::no_gc</a></div><div class="ttdeci">size_t const DisallowGarbageCollection &amp; no_gc</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00544">json-stringifier.cc:544</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02read-only-promotion_8cc_03_html_a996ff47de27ce5f127bdcc0bff48b7f9"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02read-only-promotion_8cc_03.html#a996ff47de27ce5f127bdcc0bff48b7f9">v8::internal::anonymous_namespace{read-only-promotion.cc}::Contains</a></div><div class="ttdeci">bool Contains(const HeapObjectSet &amp;s, Tagged&lt; HeapObject &gt; o)</div><div class="ttdef"><b>Definition:</b> <a href="read-only-promotion_8cc_source.html#l00032">read-only-promotion.cc:32</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a04fa3c6a01a022927ac37eefe104a26a"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a04fa3c6a01a022927ac37eefe104a26a">v8::internal::anonymous_namespace{wasm-objects.cc}::kInt31MaxValue</a></div><div class="ttdeci">constexpr int32_t kInt31MaxValue</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03331">wasm-objects.cc:3331</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a09b9fb6d23cab8b89f4b83ad905ed790"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a09b9fb6d23cab8b89f4b83ad905ed790">v8::internal::anonymous_namespace{wasm-objects.cc}::CanonicalizeHeapNumber</a></div><div class="ttdeci">DirectHandle&lt; Object &gt; CanonicalizeHeapNumber(DirectHandle&lt; Object &gt; number, Isolate *isolate, bool is_shared)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03336">wasm-objects.cc:3336</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a1c0ca09e01a99b0484d7696bbd1ee934"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a1c0ca09e01a99b0484d7696bbd1ee934">v8::internal::anonymous_namespace{wasm-objects.cc}::SetUsedLength</a></div><div class="ttdeci">void SetUsedLength(Tagged&lt; ProtectedWeakFixedArray &gt; uses, int length)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00068">wasm-objects.cc:68</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a273824e89a88e88090857d7d3540379b"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a273824e89a88e88090857d7d3540379b">v8::internal::anonymous_namespace{wasm-objects.cc}::GetUsedLength</a></div><div class="ttdeci">int GetUsedLength(Tagged&lt; ProtectedWeakFixedArray &gt; uses)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00072">wasm-objects.cc:72</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a2e6748c56ea85af464e74e7d59a67226"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a2e6748c56ea85af464e74e7d59a67226">v8::internal::anonymous_namespace{wasm-objects.cc}::CanonicalizeSmi</a></div><div class="ttdeci">DirectHandle&lt; Object &gt; CanonicalizeSmi(DirectHandle&lt; Object &gt; smi, Isolate *isolate, bool is_shared)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03354">wasm-objects.cc:3354</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a659f69596a797e6ff72fc95ca6e09e59"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a659f69596a797e6ff72fc95ca6e09e59">v8::internal::anonymous_namespace{wasm-objects.cc}::GetTableIndex</a></div><div class="ttdeci">int GetTableIndex(Tagged&lt; ProtectedWeakFixedArray &gt; uses, int slot_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00090">wasm-objects.cc:90</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a8f7a09b96377cfc3e65480e903628980"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a8f7a09b96377cfc3e65480e903628980">v8::internal::anonymous_namespace{wasm-objects.cc}::CopyEntry</a></div><div class="ttdeci">void CopyEntry(Tagged&lt; ProtectedWeakFixedArray &gt; dst, int dst_index, Tagged&lt; ProtectedWeakFixedArray &gt; src, int src_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00094">wasm-objects.cc:94</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_aa22d63eb5051d0e1f324e5215b201d0e"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#aa22d63eb5051d0e1f324e5215b201d0e">v8::internal::anonymous_namespace{wasm-objects.cc}::GetInstance</a></div><div class="ttdeci">Tagged&lt; WasmTrustedInstanceData &gt; GetInstance(Tagged&lt; ProtectedWeakFixedArray &gt; uses, int slot_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00084">wasm-objects.cc:84</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_ac33e40695ed20cfd97c2f081dafd7c38"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac33e40695ed20cfd97c2f081dafd7c38">v8::internal::anonymous_namespace{wasm-objects.cc}::kInt31MinValue</a></div><div class="ttdeci">constexpr int32_t kInt31MinValue</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03332">wasm-objects.cc:3332</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_ac6cc9f200ea9fad68bd6e5a7dfc5e6dd"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#ac6cc9f200ea9fad68bd6e5a7dfc5e6dd">v8::internal::anonymous_namespace{wasm-objects.cc}::SetInstanceMemory</a></div><div class="ttdeci">void SetInstanceMemory(Tagged&lt; WasmTrustedInstanceData &gt; trusted_instance_data, Tagged&lt; JSArrayBuffer &gt; buffer, int memory_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00834">wasm-objects.cc:834</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_af610668463a6caf6b8bf2a79f84beafe"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af610668463a6caf6b8bf2a79f84beafe">v8::internal::anonymous_namespace{wasm-objects.cc}::kReservedSlotOffset</a></div><div class="ttdeci">static constexpr int kReservedSlotOffset</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00067">wasm-objects.cc:67</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_html_af8f9bd68361ee2ccfd1496da2f5951fd"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03.html#af8f9bd68361ee2ccfd1496da2f5951fd">v8::internal::anonymous_namespace{wasm-objects.cc}::SetEntry</a></div><div class="ttdeci">void SetEntry(Tagged&lt; ProtectedWeakFixedArray &gt; uses, int slot_index, Tagged&lt; WasmTrustedInstanceData &gt; user, int table_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00076">wasm-objects.cc:76</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1libvtune_html_a0fcf6e701e6a3e10310c2126f52732e9"><div class="ttname"><a href="namespacev8_1_1internal_1_1libvtune.html#a0fcf6e701e6a3e10310c2126f52732e9">v8::internal::libvtune::function_map</a></div><div class="ttdeci">const auto &amp; function_map</div><div class="ttdef"><b>Definition:</b> <a href="vtunedomain-support-extension_8cc_source.html#l00021">vtunedomain-support-extension.cc:21</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1torque_1_1ls_html_afd5aaa8da6c9fbff1051077ef657d7f7aea5653220781a5615d141c669ca30213"><div class="ttname"><a href="namespacev8_1_1internal_1_1torque_1_1ls.html#afd5aaa8da6c9fbff1051077ef657d7f7aea5653220781a5615d141c669ca30213">v8::internal::torque::ls::kStruct</a></div><div class="ttdeci">@ kStruct</div><div class="ttdef"><b>Definition:</b> <a href="message_8h_source.html#l00303">message.h:303</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1torque_html_a5abb431dd0527f28bc5f38038f8d7e62"><div class="ttname"><a href="namespacev8_1_1internal_1_1torque.html#a5abb431dd0527f28bc5f38038f8d7e62">v8::internal::torque::PrintSignature</a></div><div class="ttdeci">void PrintSignature(std::ostream &amp;os, const Signature &amp;sig, bool with_names)</div><div class="ttdef"><b>Definition:</b> <a href="torque_2types_8cc_source.html#l01061">types.cc:1061</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a4f50ceeaf443c5da42053153d92f4bdb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a4f50ceeaf443c5da42053153d92f4bdb">v8::internal::wasm::anonymous_namespace{wasm-objects.cc}::ConvertToSharedIfExpected</a></div><div class="ttdeci">bool ConvertToSharedIfExpected(Isolate *isolate, DirectHandle&lt; Object &gt; *value, CanonicalValueType expected, const char **error_message)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03389">wasm-objects.cc:3389</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03_html_a9a5afb7099fbfe7d8ca93bd89e7e1ecf"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-objects_8cc_03.html#a9a5afb7099fbfe7d8ca93bd89e7e1ecf">v8::internal::wasm::anonymous_namespace{wasm-objects.cc}::CheckExpectedSharedness</a></div><div class="ttdeci">bool CheckExpectedSharedness(Isolate *isolate, DirectHandle&lt; Object &gt; value, CanonicalValueType expected, const char **error_message)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03372">wasm-objects.cc:3372</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a1bb1a5429ae3d1ec380de1b5da81238f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">v8::internal::wasm::kAnonymousFuncIndex</a></div><div class="ttdeci">constexpr int kAnonymousFuncIndex</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00189">wasm-constants.h:189</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2c6edd5180c4a1c2a0454eaac389dc1f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2c6edd5180c4a1c2a0454eaac389dc1f">v8::internal::wasm::max_mem32_pages</a></div><div class="ttdeci">uint32_t max_mem32_pages()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02146">wasm-engine.cc:2146</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2e079999502e577b181583a71bb096ef"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2e079999502e577b181583a71bb096ef">v8::internal::wasm::kMaxCanonicalTypes</a></div><div class="ttdeci">static constexpr size_t kMaxCanonicalTypes</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8h_source.html#l00030">canonical-types.h:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a36345041662f17bb39d27709c1cb78ac"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">v8::internal::wasm::GetWasmImportWrapperCache</a></div><div class="ttdeci">WasmImportWrapperCache * GetWasmImportWrapperCache()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02135">wasm-engine.cc:2135</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a38d56b630d25ea0451a91c6204e89042"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a38d56b630d25ea0451a91c6204e89042">v8::internal::wasm::max_table_size</a></div><div class="ttdeci">uint32_t max_table_size()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02165">wasm-engine.cc:2165</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a">v8::internal::wasm::kAsmJsStrictOrigin</a></div><div class="ttdeci">@ kAsmJsStrictOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00128">wasm-module.h:127</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902">v8::internal::wasm::kAsmJsSloppyOrigin</a></div><div class="ttdeci">@ kAsmJsSloppyOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00126">wasm-module.h:126</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">v8::internal::wasm::kWasmOrigin</a></div><div class="ttdeci">@ kWasmOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00125">wasm-module.h:125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3c8e5205c40b2156097780fb9e7d3f7b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3c8e5205c40b2156097780fb9e7d3f7b">v8::internal::wasm::IsSubtypeOf</a></div><div class="ttdeci">bool IsSubtypeOf(ValueType subtype, ValueType supertype, const WasmModule *sub_module, const WasmModule *super_module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-subtyping_8h_source.html#l00068">wasm-subtyping.h:68</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3e2697d50763bb9f401d4c992e24a074"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3e2697d50763bb9f401d4c992e24a074">v8::internal::wasm::JSToWasmObject</a></div><div class="ttdeci">MaybeDirectHandle&lt; Object &gt; JSToWasmObject(Isolate *isolate, DirectHandle&lt; Object &gt; value, CanonicalValueType expected, const char **error_message)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03408">wasm-objects.cc:3408</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a4326f4455d83a545760a1048f2d6b122"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a4326f4455d83a545760a1048f2d6b122">v8::internal::wasm::max_mem64_pages</a></div><div class="ttdeci">uint32_t max_mem64_pages()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02155">wasm-engine.cc:2155</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a44100d6c17be0db51b00a9f4fdb9d678"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a44100d6c17be0db51b00a9f4fdb9d678">v8::internal::wasm::InitializeElementSegment</a></div><div class="ttdeci">std::optional&lt; MessageTemplate &gt; InitializeElementSegment(Zone *zone, Isolate *isolate, DirectHandle&lt; WasmTrustedInstanceData &gt; trusted_instance_data, DirectHandle&lt; WasmTrustedInstanceData &gt; shared_trusted_instance_data, uint32_t segment_index)</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8cc_source.html#l03254">module-instantiate.cc:3254</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6eef6d24980961199f34fb770039843a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843a">v8::internal::wasm::Suspend</a></div><div class="ttdeci">Suspend</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00034">module-instantiate.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6eef6d24980961199f34fb770039843aac51012268661bd5ae03450b2207e5d83"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6eef6d24980961199f34fb770039843aac51012268661bd5ae03450b2207e5d83">v8::internal::wasm::kNoSuspend</a></div><div class="ttdeci">@ kNoSuspend</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00034">module-instantiate.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6feb413448e84daf9201bd8a2381a718"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">v8::internal::wasm::GetTypeCanonicalizer</a></div><div class="ttdeci">TypeCanonicalizer * GetTypeCanonicalizer()</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00020">canonical-types.cc:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a70bbfcab50b20ba5da8696e0373a8af4"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a70bbfcab50b20ba5da8696e0373a8af4">v8::internal::wasm::is_asmjs_module</a></div><div class="ttdeci">bool is_asmjs_module(const WasmModule *module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00961">wasm-module.h:961</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a769350a0bf794ab0ebf3c8fc1c8fc450"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a769350a0bf794ab0ebf3c8fc1c8fc450">v8::internal::wasm::IsJSCompatibleSignature</a></div><div class="ttdeci">bool IsJSCompatibleSignature(const CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-opcodes_8cc_source.html#l00031">wasm-opcodes.cc:31</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a7d41c6d12091165e18a14f58ae8b1b91"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">v8::internal::wasm::kInvalidWasmCodePointer</a></div><div class="ttdeci">constexpr WasmCodePointer kInvalidWasmCodePointer</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00088">wasm-code-manager.h:88</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a90941f620285a912a302a3aced092560"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a90941f620285a912a302a3aced092560">v8::internal::wasm::kWasmFuncRef</a></div><div class="ttdeci">constexpr IndependentHeapType kWasmFuncRef</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01256">value-type.h:1256</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aaca6d9503a7b3a8f1d6e319b19baca66a6c3b400bf8685e810f458dfd466cf006"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aaca6d9503a7b3a8f1d6e319b19baca66a6c3b400bf8685e810f458dfd466cf006">v8::internal::wasm::kTrapHandler</a></div><div class="ttdeci">@ kTrapHandler</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00132">wasm-module.h:132</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab2ccdd8f6263889b55561cb1aa7b566e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab2ccdd8f6263889b55561cb1aa7b566e">v8::internal::wasm::max_mem32_bytes</a></div><div class="ttdeci">uint64_t max_mem32_bytes()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-limits_8h_source.html#l00102">wasm-limits.h:102</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab89f70ccd3d4626bef2224d6496f7feb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab89f70ccd3d4626bef2224d6496f7feb">v8::internal::wasm::kV8MaxWasmMemories</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmMemories</div><div class="ttdef"><b>Definition:</b> <a href="wasm-limits_8h_source.html#l00061">wasm-limits.h:61</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab9a8d710a7bf323243d7de997b010b30"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab9a8d710a7bf323243d7de997b010b30">v8::internal::wasm::CanUseGenericJsToWasmWrapper</a></div><div class="ttdeci">bool CanUseGenericJsToWasmWrapper(const WasmModule *module, const CanonicalSig *sig)</div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8h_source.html#l00165">function-compiler.h:165</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abc12fc3b25ebfb54c20b8479642acb94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">v8::internal::wasm::GetWasmEngine</a></div><div class="ttdeci">WasmEngine * GetWasmEngine()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02125">wasm-engine.cc:2125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0c0d417be648d20ef96581e5d3bd63a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63a">v8::internal::wasm::ImportCallKind</a></div><div class="ttdeci">ImportCallKind</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00043">module-instantiate.h:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0c0d417be648d20ef96581e5d3bd63aa2c181723941144749e409c197a8d87d1"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa2c181723941144749e409c197a8d87d1">v8::internal::wasm::ImportCallKind::kJSFunction</a></div><div class="ttdeci">@ kJSFunction</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0c0d417be648d20ef96581e5d3bd63aa5427d5490900477a371648688dfbb95b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa5427d5490900477a371648688dfbb95b">v8::internal::wasm::ImportCallKind::kUseCallBuiltin</a></div><div class="ttdeci">@ kUseCallBuiltin</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0c0d417be648d20ef96581e5d3bd63aa7f5686cf8a9e0b7053c4d28dde68020f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0c0d417be648d20ef96581e5d3bd63aa7f5686cf8a9e0b7053c4d28dde68020f">v8::internal::wasm::ImportCallKind::kWasmToCapi</a></div><div class="ttdeci">@ kWasmToCapi</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac29e28cd9a3b18c7e07a3406d5d6ff1a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac29e28cd9a3b18c7e07a3406d5d6ff1a">v8::internal::wasm::kWasmPageSize</a></div><div class="ttdeci">constexpr size_t kWasmPageSize</div><div class="ttdef"><b>Definition:</b> <a href="wasm-constants_8h_source.html#l00179">wasm-constants.h:179</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">v8::internal::wasm::AddressType</a></div><div class="ttdeci">AddressType</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00049">wasm-module.h:49</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">v8::internal::wasm::AddressType::kI32</a></div><div class="ttdeci">@ kI32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0">v8::internal::wasm::AddressType::kI64</a></div><div class="ttdeci">@ kI64</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_accd7a01a4feacf7239992e49a422c952"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#accd7a01a4feacf7239992e49a422c952">v8::internal::wasm::kWasmBottom</a></div><div class="ttdeci">constexpr IndependentHeapType kWasmBottom</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01254">value-type.h:1254</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad39cf555e73abbf7233ee2029b74ff7d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad39cf555e73abbf7233ee2029b74ff7d">v8::internal::wasm::kV8MaxWasmTableSize</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmTableSize</div><div class="ttdef"><b>Definition:</b> <a href="wasm-limits_8h_source.html#l00058">wasm-limits.h:58</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad97a36aa15ff4a0e71c9e8982a5cc460"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460">v8::internal::wasm::Promise</a></div><div class="ttdeci">Promise</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00037">module-instantiate.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad97a36aa15ff4a0e71c9e8982a5cc460a4db77348000919f64dc35a43c94c8121"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460a4db77348000919f64dc35a43c94c8121">v8::internal::wasm::kNoPromise</a></div><div class="ttdeci">@ kNoPromise</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00037">module-instantiate.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ad97a36aa15ff4a0e71c9e8982a5cc460a6da34b562310c09460985d37264a7920"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ad97a36aa15ff4a0e71c9e8982a5cc460a6da34b562310c09460985d37264a7920">v8::internal::wasm::kPromise</a></div><div class="ttdeci">@ kPromise</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8h_source.html#l00037">module-instantiate.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adbb89ce490c56aae60c8221f47b9f088"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adce8d2d1fb7219dada0f8cb31b9ba0ce"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adce8d2d1fb7219dada0f8cb31b9ba0ce">v8::internal::wasm::max_mem64_bytes</a></div><div class="ttdeci">uint64_t max_mem64_bytes()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-limits_8h_source.html#l00106">wasm-limits.h:106</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae45db4269c4a761b277944e582743921a37d24e1221658f0e0333a512fdbcd2f0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921a37d24e1221658f0e0333a512fdbcd2f0">v8::internal::wasm::RefTypeKind::kStruct</a></div><div class="ttdeci">@ kStruct</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae45db4269c4a761b277944e582743921aafc9b058c0fa7b9d2556bbcdcc49a272"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921aafc9b058c0fa7b9d2556bbcdcc49a272">v8::internal::wasm::RefTypeKind::kArray</a></div><div class="ttdeci">@ kArray</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae45db4269c4a761b277944e582743921ad77fcb77da3dc9a391cbdfd264f8d7d9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae45db4269c4a761b277944e582743921ad77fcb77da3dc9a391cbdfd264f8d7d9">v8::internal::wasm::RefTypeKind::kFunction</a></div><div class="ttdeci">@ kFunction</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aed0daa933fcad9ee13252b351e01a3d9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aed0daa933fcad9ee13252b351e01a3d9">v8::internal::wasm::is_reference</a></div><div class="ttdeci">constexpr bool is_reference(ValueKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01154">value-type.h:1154</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0e8eb22038f6f652121cb71d71ff62b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0e8eb22038f6f652121cb71d71ff62b">v8::internal::wasm::WasmToJSObject</a></div><div class="ttdeci">DirectHandle&lt; Object &gt; WasmToJSObject(Isolate *isolate, DirectHandle&lt; Object &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03639">wasm-objects.cc:3639</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a00e6a81b8b499c814a011d90853897fb"><div class="ttname"><a href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fb">v8::internal::InternalizeString</a></div><div class="ttdeci">InternalizeString</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00161">wasm-objects.h:161</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a00e6a81b8b499c814a011d90853897fba81b23a97077ceef0f9633d2041ae1737"><div class="ttname"><a href="namespacev8_1_1internal.html#a00e6a81b8b499c814a011d90853897fba81b23a97077ceef0f9633d2041ae1737">v8::internal::kNoInternalize</a></div><div class="ttdeci">@ kNoInternalize</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8h_source.html#l00161">wasm-objects.h:161</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a05e9cdedf4032400775ed1056dc71feb"><div class="ttname"><a href="namespacev8_1_1internal.html#a05e9cdedf4032400775ed1056dc71feb">v8::internal::CreateStructMap</a></div><div class="ttdeci">DirectHandle&lt; Map &gt; CreateStructMap(Isolate *isolate, wasm::CanonicalTypeIndex struct_index, DirectHandle&lt; Map &gt; opt_rtt_parent, DirectHandle&lt; NativeContext &gt; opt_native_context)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03085">wasm-objects.cc:3085</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a09dbf9baefb793fd78912d6ef89f9dde"><div class="ttname"><a href="namespacev8_1_1internal.html#a09dbf9baefb793fd78912d6ef89f9dde">v8::internal::WasmModule</a></div><div class="ttdeci">wasm::WasmModule WasmModule</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00110">wasm-objects.cc:110</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="heap-snapshot-generator_8cc_source.html#l01698">heap-snapshot-generator.cc:1698</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a11f7e5d645f7820437ee9433162fc433"><div class="ttname"><a href="namespacev8_1_1internal.html#a11f7e5d645f7820437ee9433162fc433">v8::internal::func_refs</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset kInstanceObjectOffset kMemoryObjectsOffset kTaggedGlobalsBufferOffset kTablesOffset kProtectedDispatchTable0Offset kProtectedDispatchTableForImportsOffset func_refs</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00261">wasm-objects-inl.h:261</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a12d50d7bb2c9d8a916ff0785e6eff241"><div class="ttname"><a href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">v8::internal::kTaggedSize</a></div><div class="ttdeci">constexpr int kTaggedSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00533">globals.h:533</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20c66a96ddfae551866ceae989a8ba13"><div class="ttname"><a href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13">v8::internal::WriteBarrierMode</a></div><div class="ttdeci">WriteBarrierMode</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00051">objects.h:51</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75"><div class="ttname"><a href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75">v8::internal::SKIP_WRITE_BARRIER</a></div><div class="ttdeci">@ SKIP_WRITE_BARRIER</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00052">objects.h:52</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d"><div class="ttname"><a href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a936c581afe29bbe04ab84d8ae4c6267d">v8::internal::UPDATE_WRITE_BARRIER</a></div><div class="ttdeci">@ UPDATE_WRITE_BARRIER</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00056">objects.h:55</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a274585e1c399e58d90a0ed65a3900084"><div class="ttname"><a href="namespacev8_1_1internal.html#a274585e1c399e58d90a0ed65a3900084">v8::internal::EmptyBackingStoreBuffer</a></div><div class="ttdeci">void * EmptyBackingStoreBuffer()</div><div class="ttdef"><b>Definition:</b> <a href="sandbox_8h_source.html#l00345">sandbox.h:345</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a29244e5018f095691fb102a39c82f5f5"><div class="ttname"><a href="namespacev8_1_1internal.html#a29244e5018f095691fb102a39c82f5f5">v8::internal::data_segment_starts</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset data_segment_starts</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00223">wasm-objects-inl.h:223</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2a2a0e61ae504b5c29621f23fe6d1ae8"><div class="ttname"><a href="namespacev8_1_1internal.html#a2a2a0e61ae504b5c29621f23fe6d1ae8">v8::internal::EncodeI32ExceptionValue</a></div><div class="ttdeci">void EncodeI32ExceptionValue(DirectHandle&lt; FixedArray &gt; encoded_values, uint32_t *encoded_index, uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02794">wasm-objects.cc:2794</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2aebb1376bec4577a02698bacf76fbf4"><div class="ttname"><a href="namespacev8_1_1internal.html#a2aebb1376bec4577a02698bacf76fbf4">v8::internal::MakeStrong</a></div><div class="ttdeci">Tagged&lt; T &gt; MakeStrong(Tagged&lt; T &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00903">tagged.h:903</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2ef75ab406122e31bc6a5e46e16e0de9"><div class="ttname"><a href="namespacev8_1_1internal.html#a2ef75ab406122e31bc6a5e46e16e0de9">v8::internal::DecodeI32ExceptionValue</a></div><div class="ttdeci">void DecodeI32ExceptionValue(DirectHandle&lt; FixedArray &gt; encoded_values, uint32_t *encoded_index, uint32_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02808">wasm-objects.cc:2808</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3e7c556dd0b04856cb85ebea286b7597"><div class="ttname"><a href="namespacev8_1_1internal.html#a3e7c556dd0b04856cb85ebea286b7597">v8::internal::GetIsolateFromWritableObject</a></div><div class="ttdeci">Isolate * GetIsolateFromWritableObject(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="isolate-utils-inl_8h_source.html#l00035">isolate-utils-inl.h:35</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a484d41a2d1f12b77b5cf3953276c1efb"><div class="ttname"><a href="namespacev8_1_1internal.html#a484d41a2d1f12b77b5cf3953276c1efb">v8::internal::tables</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset kInstanceObjectOffset kMemoryObjectsOffset kTaggedGlobalsBufferOffset tables</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00244">wasm-objects-inl.h:244</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4bf21ee96580042a8262a8300dca514c"><div class="ttname"><a href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">v8::internal::instance_data</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag instance_data</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00464">wasm-objects-inl.h:464</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00453">wasm-objects-inl.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a50f479f3aa59463f4b3636c7d9c1fb1f"><div class="ttname"><a href="namespacev8_1_1internal.html#a50f479f3aa59463f4b3636c7d9c1fb1f">v8::internal::CreateArrayMap</a></div><div class="ttdeci">DirectHandle&lt; Map &gt; CreateArrayMap(Isolate *isolate, wasm::CanonicalTypeIndex array_index, DirectHandle&lt; Map &gt; opt_rtt_parent)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03126">wasm-objects.cc:3126</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5297fd2c72981b2220e6b9a831570fb3"><div class="ttname"><a href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdeci">Tagged&lt; Object &gt;</div><div class="ttdef"><b>Definition:</b> <a href="js-objects-inl_8h_source.html#l00162">js-objects-inl.h:162</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a538499d2a66bf6e9d3182a57104edec9"><div class="ttname"><a href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">v8::internal::UNIMPLEMENTED</a></div><div class="ttdeci">UNIMPLEMENTED()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a58e3fb6c5ada1d544715988b7a735333"><div class="ttname"><a href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">v8::internal::instance_object</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset instance_object</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00232">wasm-objects-inl.h:232</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412"><div class="ttname"><a href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412">v8::internal::WasmMemoryFlag::kWasmMemory32</a></div><div class="ttdeci">@ kWasmMemory32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913"><div class="ttname"><a href="namespacev8_1_1internal.html#a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913">v8::internal::WasmMemoryFlag::kWasmMemory64</a></div><div class="ttdeci">@ kWasmMemory64</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149c"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">v8::internal::ElementsKind</a></div><div class="ttdeci">ElementsKind</div><div class="ttdef"><b>Definition:</b> <a href="elements-kind_8h_source.html#l00105">elements-kind.h:105</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149cabe08801c504e24eba74657d920a18f30"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cabe08801c504e24eba74657d920a18f30">v8::internal::TERMINAL_FAST_ELEMENTS_KIND</a></div><div class="ttdeci">@ TERMINAL_FAST_ELEMENTS_KIND</div><div class="ttdef"><b>Definition:</b> <a href="elements-kind_8h_source.html#l00171">elements-kind.h:171</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20a"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20a">v8::internal::AllocationType</a></div><div class="ttdeci">AllocationType</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01378">globals.h:1378</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa01a215f41271b4552d8e37930de95706"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa01a215f41271b4552d8e37930de95706">v8::internal::AllocationType::kSharedTrusted</a></div><div class="ttdeci">@ kSharedTrusted</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff">v8::internal::AllocationType::kOld</a></div><div class="ttdeci">@ kOld</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa420fc4b93a98a0b612db8f2f69463514"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa420fc4b93a98a0b612db8f2f69463514">v8::internal::AllocationType::kSharedOld</a></div><div class="ttdeci">@ kSharedOld</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa492ef7cfa083cd677493179d45c9961e"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa492ef7cfa083cd677493179d45c9961e">v8::internal::AllocationType::kYoung</a></div><div class="ttdeci">@ kYoung</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aa666d5c2572774089f28df0b4751f6521"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aa666d5c2572774089f28df0b4751f6521">v8::internal::AllocationType::kSharedMap</a></div><div class="ttdeci">@ kSharedMap</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aaea89848074d781cbd54fcacbdca3f826"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aaea89848074d781cbd54fcacbdca3f826">v8::internal::AllocationType::kTrusted</a></div><div class="ttdeci">@ kTrusted</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604d5beeb6fc8639670f737ed201e20aafb5397a5037cdaeda0a604dcbfe8c01f"><div class="ttname"><a href="namespacev8_1_1internal.html#a604d5beeb6fc8639670f737ed201e20aafb5397a5037cdaeda0a604dcbfe8c01f">v8::internal::AllocationType::kMap</a></div><div class="ttdeci">@ kMap</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a61075b05a94d1b5188fa013f53b22606"><div class="ttname"><a href="namespacev8_1_1internal.html#a61075b05a94d1b5188fa013f53b22606">v8::internal::FastI2D</a></div><div class="ttdeci">double FastI2D(int x)</div><div class="ttdef"><b>Definition:</b> <a href="conversions_8h_source.html#l00109">conversions.h:109</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a611f0528d5415d4591ad6e8fe9513ac4"><div class="ttname"><a href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">v8::internal::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="heap-snapshot-generator_8cc_source.html#l01699">heap-snapshot-generator.cc:1699</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6135f0ef57de8d381e3225f6659c617a"><div class="ttname"><a href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">v8::internal::sig</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag kProtectedInstanceDataOffset sig</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00471">wasm-objects-inl.h:471</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a667827abe3e3649a272fe634ee5b2612"><div class="ttname"><a href="namespacev8_1_1internal.html#a667827abe3e3649a272fe634ee5b2612">v8::internal::UseGenericWasmToJSWrapper</a></div><div class="ttdeci">bool UseGenericWasmToJSWrapper(wasm::ImportCallKind kind, const wasm::CanonicalSig *sig, wasm::Suspend suspend)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02823">wasm-objects.cc:2823</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67a321483bf059e8447957a469e2896b"><div class="ttname"><a href="namespacev8_1_1internal.html#a67a321483bf059e8447957a469e2896b">v8::internal::globals_start</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset globals_start</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00206">wasm-objects-inl.h:206</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67d120bf8a8f82f8b1a4075a607ecc55"><div class="ttname"><a href="namespacev8_1_1internal.html#a67d120bf8a8f82f8b1a4075a607ecc55">v8::internal::kVariableSizeSentinel</a></div><div class="ttdeci">const int kVariableSizeSentinel</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00084">objects.h:84</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a680ace1d3e86dae2df93867132a3c160"><div class="ttname"><a href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160">v8::internal::SharedFlag</a></div><div class="ttdeci">SharedFlag</div><div class="ttdef"><b>Definition:</b> <a href="backing-store_8h_source.html#l00026">backing-store.h:26</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16"><div class="ttname"><a href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16">v8::internal::SharedFlag::kShared</a></div><div class="ttdeci">@ kShared</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6d3f691695696e478ebb4a18ab857bfaae914d084ea4fe52636ea783ce1c1cbc0"><div class="ttname"><a href="namespacev8_1_1internal.html#a6d3f691695696e478ebb4a18ab857bfaae914d084ea4fe52636ea783ce1c1cbc0">v8::internal::InitializedFlag::kZeroInitialized</a></div><div class="ttdeci">@ kZeroInitialized</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a72cbfdfeabb9a401f279f7b80bcff67a"><div class="ttname"><a href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">v8::internal::kSystemPointerSize</a></div><div class="ttdeci">constexpr int kSystemPointerSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00411">globals.h:411</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a73502f55102d18cb764881bc29f35c05"><div class="ttname"><a href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">v8::internal::direct_handle</a></div><div class="ttdeci">DirectHandle&lt; T &gt; direct_handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="handles-inl_8h_source.html#l00143">handles-inl.h:143</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a79552c2014f70cf733dc4b55bbd46d64"><div class="ttname"><a href="namespacev8_1_1internal.html#a79552c2014f70cf733dc4b55bbd46d64">v8::internal::trusted_dispatch_table</a></div><div class="ttdeci">trusted_dispatch_table</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00579">wasm-objects-inl.h:579</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a833daad0bfc17094878be96c55497d8e"><div class="ttname"><a href="namespacev8_1_1internal.html#a833daad0bfc17094878be96c55497d8e">v8::internal::DecodeI64ExceptionValue</a></div><div class="ttdeci">void DecodeI64ExceptionValue(DirectHandle&lt; FixedArray &gt; encoded_values, uint32_t *encoded_index, uint64_t *value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02815">wasm-objects.cc:2815</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a86aed8f961b5086cb7d5ae530a8770f5"><div class="ttname"><a href="namespacev8_1_1internal.html#a86aed8f961b5086cb7d5ae530a8770f5">v8::internal::SmiValuesAre31Bits</a></div><div class="ttdeci">constexpr bool SmiValuesAre31Bits()</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00208">v8-internal.h:208</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a910dba0d1f94fc1784f2a389925b59af"><div class="ttname"><a href="namespacev8_1_1internal.html#a910dba0d1f94fc1784f2a389925b59af">v8::internal::tagged_globals_buffer</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset kInstanceObjectOffset kMemoryObjectsOffset tagged_globals_buffer</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00240">wasm-objects-inl.h:240</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9312a9fc987dba9376a530956f94e8fe"><div class="ttname"><a href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">v8::internal::InstanceType</a></div><div class="ttdeci">InstanceType</div><div class="ttdef"><b>Definition:</b> <a href="instance-type_8h_source.html#l00116">instance-type.h:116</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a932143dd77f3ffbd83a1186db64c0c8f"><div class="ttname"><a href="namespacev8_1_1internal.html#a932143dd77f3ffbd83a1186db64c0c8f">v8::internal::memory_objects</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset kInstanceObjectOffset memory_objects</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00236">wasm-objects-inl.h:236</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a94c4a6c4ad3993b5e0e43bc2191c084b"><div class="ttname"><a href="namespacev8_1_1internal.html#a94c4a6c4ad3993b5e0e43bc2191c084b">v8::internal::Cast</a></div><div class="ttdeci">requires HasCastImplementation&lt; Holder, To, From &gt; Holder&lt; To &gt; Cast(Holder&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition:</b> <a href="casting_8h_source.html#l00122">casting.h:122</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a96a98d1219c08bac1c5c91ba9dacd1d4"><div class="ttname"><a href="namespacev8_1_1internal.html#a96a98d1219c08bac1c5c91ba9dacd1d4">v8::internal::MakeWeak</a></div><div class="ttdeci">Tagged&lt; MaybeWeak&lt; T &gt; &gt; MakeWeak(Tagged&lt; T &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00893">tagged.h:893</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9f5507dc03f0b35f38b119fc3285586a"><div class="ttname"><a href="namespacev8_1_1internal.html#a9f5507dc03f0b35f38b119fc3285586a">v8::internal::AllocatePageSize</a></div><div class="ttdeci">size_t AllocatePageSize()</div><div class="ttdef"><b>Definition:</b> <a href="utils_2allocation_8cc_source.html#l00155">allocation.cc:155</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa2b1520107e1a7067d5db8226721c882"><div class="ttname"><a href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">v8::internal::ClearedValue</a></div><div class="ttdeci">Tagged&lt; ClearedWeakValue &gt; ClearedValue(PtrComprCageBase cage_base)</div><div class="ttdef"><b>Definition:</b> <a href="maybe-object-inl_8h_source.html#l00020">maybe-object-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa3d67860d4b49aab967b47ffb6631c1a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa3d67860d4b49aab967b47ffb6631c1a">v8::internal::kAdapt</a></div><div class="ttdeci">constexpr AdaptArguments kAdapt</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02793">globals.h:2793</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa4cc6fe7d4a1473292e27590723c7543"><div class="ttname"><a href="namespacev8_1_1internal.html#aa4cc6fe7d4a1473292e27590723c7543">v8::internal::FastD2I</a></div><div class="ttdeci">int FastD2I(double x)</div><div class="ttdef"><b>Definition:</b> <a href="conversions_8h_source.html#l00101">conversions.h:101</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aad3893fccd0a1a6e0ddcdf0a940428c7"><div class="ttname"><a href="namespacev8_1_1internal.html#aad3893fccd0a1a6e0ddcdf0a940428c7">v8::internal::JSParameterCount</a></div><div class="ttdeci">constexpr int JSParameterCount(int param_count_without_receiver)</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02800">globals.h:2800</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab10416aabce855093f2c91151df24348"><div class="ttname"><a href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348">v8::internal::ResizableFlag</a></div><div class="ttdeci">ResizableFlag</div><div class="ttdef"><b>Definition:</b> <a href="backing-store_8h_source.html#l00029">backing-store.h:29</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0"><div class="ttname"><a href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0">v8::internal::ResizableFlag::kResizable</a></div><div class="ttdeci">@ kResizable</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab10416aabce855093f2c91151df24348af444d0c6959a4f4e0553ccd4f9f35908"><div class="ttname"><a href="namespacev8_1_1internal.html#ab10416aabce855093f2c91151df24348af444d0c6959a4f4e0553ccd4f9f35908">v8::internal::ResizableFlag::kNotResizable</a></div><div class="ttdeci">@ kNotResizable</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3">v8::internal::WasmValueType::kI16</a></div><div class="ttdeci">@ kI16</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603">v8::internal::WasmValueType::kI8</a></div><div class="ttdeci">@ kI8</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3">v8::internal::WasmValueType::kRefNull</a></div><div class="ttdeci">@ kRefNull</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac1a33b5fd9af1653d346746cdb5c1ac0"><div class="ttname"><a href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">v8::internal::value</a></div><div class="ttdeci">return value</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00912">map-inl.h:912</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac299e59759eecb4621f6bad64d5db952"><div class="ttname"><a href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">v8::internal::IsSmi</a></div><div class="ttdeci">constexpr bool IsSmi(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00666">objects.h:666</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac2e67965c23f31e787267da33347b3d7"><div class="ttname"><a href="namespacev8_1_1internal.html#ac2e67965c23f31e787267da33347b3d7">v8::internal::IsMinusZero</a></div><div class="ttdeci">static bool IsMinusZero(double value)</div><div class="ttdef"><b>Definition:</b> <a href="conversions_8h_source.html#l00224">conversions.h:224</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad03e50e4d15ee0da6a722254f350e7eb"><div class="ttname"><a href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">v8::internal::kMaxInt</a></div><div class="ttdeci">constexpr int kMaxInt</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00375">globals.h:375</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad255146ba1429764e1e53305b0f4f1fe"><div class="ttname"><a href="namespacev8_1_1internal.html#ad255146ba1429764e1e53305b0f4f1fe">v8::internal::dispatch_table_for_imports</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset kInstanceObjectOffset kMemoryObjectsOffset kTaggedGlobalsBufferOffset kTablesOffset kProtectedDispatchTable0Offset dispatch_table_for_imports</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00256">wasm-objects-inl.h:256</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad2f1f50a10b1b024ff3ee1aae8927b30"><div class="ttname"><a href="namespacev8_1_1internal.html#ad2f1f50a10b1b024ff3ee1aae8927b30">v8::internal::GetArrayBufferPageAllocator</a></div><div class="ttdeci">v8::PageAllocator * GetArrayBufferPageAllocator()</div><div class="ttdef"><b>Definition:</b> <a href="src_2utils_2allocation_8h_source.html#l00125">allocation.h:125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad8e371531759bf81f85b50e36e86d4f8"><div class="ttname"><a href="namespacev8_1_1internal.html#ad8e371531759bf81f85b50e36e86d4f8">v8::internal::CreateFuncRefMap</a></div><div class="ttdeci">DirectHandle&lt; Map &gt; CreateFuncRefMap(Isolate *isolate, wasm::CanonicalTypeIndex type, DirectHandle&lt; Map &gt; opt_rtt_parent, bool shared)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03159">wasm-objects.cc:3159</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ada67458c5a8e8c0ade0017e5d3c56fd3"><div class="ttname"><a href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">v8::internal::kDoubleSize</a></div><div class="ttdeci">constexpr int kDoubleSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00408">globals.h:408</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adb23f3baf7223f8c3acb2901e2491245"><div class="ttname"><a href="namespacev8_1_1internal.html#adb23f3baf7223f8c3acb2901e2491245">v8::internal::GetCurrentIsolateForSandbox</a></div><div class="ttdeci">IsolateForSandbox GetCurrentIsolateForSandbox()</div><div class="ttdef"><b>Definition:</b> <a href="sandbox_2isolate_8h_source.html#l00067">isolate.h:67</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adbf2c933630f2f4bb419ce1ba04ce760a4b0c7b00af69f6f81914acaa3a9849ee"><div class="ttname"><a href="namespacev8_1_1internal.html#adbf2c933630f2f4bb419ce1ba04ce760a4b0c7b00af69f6f81914acaa3a9849ee">v8::internal::kDontThrow</a></div><div class="ttdeci">@ kDontThrow</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01734">globals.h:1734</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adee95482032a93e07f59341fed5c909f"><div class="ttname"><a href="namespacev8_1_1internal.html#adee95482032a93e07f59341fed5c909f">v8::internal::is_shared</a></div><div class="ttdeci">JSArrayBuffer::IsDetachableBit is_shared</div><div class="ttdef"><b>Definition:</b> <a href="js-array-buffer-inl_8h_source.html#l00189">js-array-buffer-inl.h:189</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b3d70a0b2f7c3c669d187fd9a9dae2"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">v8::internal::kMaxUInt32</a></div><div class="ttdeci">constexpr uint32_t kMaxUInt32</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00388">globals.h:388</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aea9d736830d86242c4e1cb59a371d3a6"><div class="ttname"><a href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">v8::internal::IsNull</a></div><div class="ttdeci">kInstanceDescriptorsOffset kTransitionsOrPrototypeInfoOffset IsNull(value)||IsJSProxy(value)||IsWasmObject(value)||(IsJSObject(value) &amp;&amp;(HeapLayout</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00070">map-inl.h:70</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aee315e6fdfed61d0c5a8b4d88d9e85b6"><div class="ttname"><a href="namespacev8_1_1internal.html#aee315e6fdfed61d0c5a8b4d88d9e85b6">v8::internal::WasmFunction</a></div><div class="ttdeci">wasm::WasmFunction WasmFunction</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00109">wasm-objects.cc:109</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af2d9fec01057be7bdab90bb4682717b0"><div class="ttname"><a href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">v8::internal::prototype</a></div><div class="ttdeci">kInstanceDescriptorsOffset kTransitionsOrPrototypeInfoOffset prototype</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00069">map-inl.h:69</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af7ebacf07d7eaed3247cbd3fca3a35e6"><div class="ttname"><a href="namespacev8_1_1internal.html#af7ebacf07d7eaed3247cbd3fca3a35e6">v8::internal::EncodeI64ExceptionValue</a></div><div class="ttdeci">void EncodeI64ExceptionValue(DirectHandle&lt; FixedArray &gt; encoded_values, uint32_t *encoded_index, uint64_t value)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l02800">wasm-objects.cc:2800</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afa9ea55d792121fba92b4cfc8ef8c9d7"><div class="ttname"><a href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">v8::internal::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l01508">external-reference.cc:1508</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb2de75dc052e06de22749c47f93d0d4"><div class="ttname"><a href="namespacev8_1_1internal.html#afb2de75dc052e06de22749c47f93d0d4">v8::internal::element_segments</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset element_segments</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00227">wasm-objects-inl.h:227</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb53db8cc7fb48b96a2be12004cdcb10"><div class="ttname"><a href="namespacev8_1_1internal.html#afb53db8cc7fb48b96a2be12004cdcb10">v8::internal::tagged_buffer</a></div><div class="ttdeci">tagged_buffer</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00111">wasm-objects-inl.h:111</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb7e5cd394b9632dddc2e7807b11b2ab"><div class="ttname"><a href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">v8::internal::script</a></div><div class="ttdeci">kInterpreterTrampolineOffset script</div><div class="ttdef"><b>Definition:</b> <a href="shared-function-info-inl_8h_source.html#l00117">shared-function-info-inl.h:117</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff2483f817f329c2b4c7c1d7149f858ba35215d4c3b69349b967c421fd68b0b36"><div class="ttname"><a href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858ba35215d4c3b69349b967c421fd68b0b36">v8::internal::LanguageMode::kStrict</a></div><div class="ttdeci">@ kStrict</div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="anamespacev8_html_a13596ed4ca024abd4790ec46b62c2097"><div class="ttname"><a href="namespacev8.html#a13596ed4ca024abd4790ec46b62c2097">v8::kReleaseStore</a></div><div class="ttdeci">static constexpr ReleaseStoreTag kReleaseStore</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02944">globals.h:2944</a></div></div>
<div class="ttc" id="anamespacewasm_html"><div class="ttname"><a href="namespacewasm.html">wasm</a></div><div class="ttdef"><b>Definition:</b> <a href="c-api_8cc_source.html#l00087">c-api.cc:87</a></div></div>
<div class="ttc" id="aobject-macros-undef_8h_html"><div class="ttname"><a href="object-macros-undef_8h.html">object-macros-undef.h</a></div></div>
<div class="ttc" id="aobject-macros_8h_html"><div class="ttname"><a href="object-macros_8h.html">object-macros.h</a></div></div>
<div class="ttc" id="aobject-macros_8h_html_a9231f70a649a71a193851bbd81d05010"><div class="ttname"><a href="object-macros_8h.html#a9231f70a649a71a193851bbd81d05010">CONDITIONAL_WRITE_BARRIER</a></div><div class="ttdeci">#define CONDITIONAL_WRITE_BARRIER(object, offset, value, mode)</div><div class="ttdef"><b>Definition:</b> <a href="object-macros_8h_source.html#l00756">object-macros.h:756</a></div></div>
<div class="ttc" id="aobject-macros_8h_html_af3b897121626563e23614c667e3f754a"><div class="ttname"><a href="object-macros_8h.html#af3b897121626563e23614c667e3f754a">RELEASE_WRITE_INT32_FIELD</a></div><div class="ttdeci">#define RELEASE_WRITE_INT32_FIELD(p, offset, value)</div><div class="ttdef"><b>Definition:</b> <a href="object-macros_8h_source.html#l00892">object-macros.h:892</a></div></div>
<div class="ttc" id="aobjects-inl_8h_html"><div class="ttname"><a href="objects-inl_8h.html">objects-inl.h</a></div></div>
<div class="ttc" id="aoddball_8h_html"><div class="ttname"><a href="oddball_8h.html">oddball.h</a></div></div>
<div class="ttc" id="aroots-inl_8h_html"><div class="ttname"><a href="roots-inl_8h.html">roots-inl.h</a></div></div>
<div class="ttc" id="ashared-function-info_8h_html"><div class="ttname"><a href="shared-function-info_8h.html">shared-function-info.h</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a0d093cb749cfc7ab5993726392df681f"><div class="ttname"><a href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a></div><div class="ttdeci">#define FATAL(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00047">logging.h:47</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a1c7c9b7f14b9a33ea69cbe4578016a19"><div class="ttname"><a href="src_2base_2logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a45a0717f39b7011dc823c1fe7b83e6fc"><div class="ttname"><a href="src_2base_2logging_8h.html#a45a0717f39b7011dc823c1fe7b83e6fc">CHECK_LT</a></div><div class="ttdeci">#define CHECK_LT(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a56e883b55c80205b4d1727679c68b2bd"><div class="ttname"><a href="src_2base_2logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a></div><div class="ttdeci">#define CHECK_LE(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00491">logging.h:491</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a9154b181227e4b02e465befe50219158"><div class="ttname"><a href="src_2base_2logging_8h.html#a9154b181227e4b02e465befe50219158">CHECK_NOT_NULL</a></div><div class="ttdeci">#define CHECK_NOT_NULL(val)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aa958a8a4e5dda3abaa031977268ae60e"><div class="ttname"><a href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a></div><div class="ttdeci">#define CHECK_NE(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00293">macros.h:293</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a5113f5db9eec9c30ecea57b8d4175f2d"><div class="ttname"><a href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a></div><div class="ttdeci">constexpr T RoundUp(T x, intptr_t m)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00387">macros.h:387</a></div></div>
<div class="ttc" id="astacks_8h_html"><div class="ttname"><a href="stacks_8h.html">stacks.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1count_html"><div class="ttname"><a href="structv8_1_1internal_1_1count.html">v8::internal::count</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-fast-api-calls_8h_source.html#l00511">v8-fast-api-calls.h:511</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex.html">v8::internal::wasm::CanonicalTypeIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00082">value-type.h:82</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleTypeIndex_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">v8::internal::wasm::ModuleTypeIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00064">value-type.h:64</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">v8::internal::wasm::ModuleWireBytes</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00993">wasm-module.h:993</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html_aad25d74a24c1f21b337f94460ecc662c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">v8::internal::wasm::ModuleWireBytes::GetNameOrNull</a></div><div class="ttdeci">WasmName GetNameOrNull(WireBytesRef ref) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8cc_source.html#l00217">wasm-module.cc:217</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeDefinition_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeDefinition.html">v8::internal::wasm::TypeDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00425">wasm-module.h:425</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeIndex_html_a9340071636f85090c2fe2171797857c0"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#a9340071636f85090c2fe2171797857c0">v8::internal::wasm::TypeIndex::valid</a></div><div class="ttdeci">constexpr bool valid() const</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00059">value-type.h:59</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1TypeIndex_html_ad0355b4f2bc1bc8a489e4d01da40067b"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1TypeIndex.html#ad0355b4f2bc1bc8a489e4d01da40067b">v8::internal::wasm::TypeIndex::index</a></div><div class="ttdeci">uint32_t index</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l00053">value-type.h:53</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDataSegment_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html">v8::internal::wasm::WasmDataSegment</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00177">wasm-module.h:177</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDataSegment_html_a12e17e3fa84bb4207424e2b348187aa8"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html#a12e17e3fa84bb4207424e2b348187aa8">v8::internal::wasm::WasmDataSegment::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00191">wasm-module.h:191</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDataSegment_html_ad002288f070d114ec32dd93c4874ee5b"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDataSegment.html#ad002288f070d114ec32dd93c4874ee5b">v8::internal::wasm::WasmDataSegment::source</a></div><div class="ttdeci">WireBytesRef source</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00195">wasm-module.h:195</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html">v8::internal::wasm::WasmFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00081">wasm-module.h:81</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_a27c9b60862536d6bd685a1fb750bec1f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a27c9b60862536d6bd685a1fb750bec1f">v8::internal::wasm::WasmFunction::sig_index</a></div><div class="ttdeci">ModuleTypeIndex sig_index</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00084">wasm-module.h:84</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_a8b451aaa09042c8dcc935d85f4fa0422"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#a8b451aaa09042c8dcc935d85f4fa0422">v8::internal::wasm::WasmFunction::func_index</a></div><div class="ttdeci">uint32_t func_index</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00083">wasm-module.h:83</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmFunction_html_af8099247d56554096502101a9b7321be"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmFunction.html#af8099247d56554096502101a9b7321be">v8::internal::wasm::WasmFunction::imported</a></div><div class="ttdeci">bool imported</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00087">wasm-module.h:87</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html">v8::internal::wasm::WasmGlobal</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00093">wasm-module.h:93</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html_a24043583c0a876cc3c838259974492f5"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a24043583c0a876cc3c838259974492f5">v8::internal::wasm::WasmGlobal::imported</a></div><div class="ttdeci">bool imported</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00105">wasm-module.h:105</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html_a41c558eeba7d915933647fdbdb1daf41"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a41c558eeba7d915933647fdbdb1daf41">v8::internal::wasm::WasmGlobal::index</a></div><div class="ttdeci">uint32_t index</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00099">wasm-module.h:99</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html_a542230c2ed200a1e8a0c6d1423a9426a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a542230c2ed200a1e8a0c6d1423a9426a">v8::internal::wasm::WasmGlobal::offset</a></div><div class="ttdeci">uint32_t offset</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00102">wasm-module.h:102</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html_a65b8d04d9022b2619f9bc51256d6946e"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#a65b8d04d9022b2619f9bc51256d6946e">v8::internal::wasm::WasmGlobal::type</a></div><div class="ttdeci">ValueType type</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00094">wasm-module.h:94</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmGlobal_html_ab337075faef641441d4180f20d0a9365"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmGlobal.html#ab337075faef641441d4180f20d0a9365">v8::internal::wasm::WasmGlobal::mutability</a></div><div class="ttdeci">bool mutability</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00095">wasm-module.h:95</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmMemory_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html">v8::internal::wasm::WasmMemory</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00140">wasm-module.h:140</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmMemory_html_a2f28747332d5adbb45a11c870b46c24c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html#a2f28747332d5adbb45a11c870b46c24c">v8::internal::wasm::WasmMemory::bounds_checks</a></div><div class="ttdeci">BoundsCheckStrategy bounds_checks</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00162">wasm-module.h:162</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmMemory_html_a3f8ff3b6fc9def96c415b2a54770a3a2"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmMemory.html#a3f8ff3b6fc9def96c415b2a54770a3a2">v8::internal::wasm::WasmMemory::min_memory_size</a></div><div class="ttdeci">uintptr_t min_memory_size</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00157">wasm-module.h:157</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">v8::internal::wasm::WasmModule</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00666">wasm-module.h:666</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a0968dbfaa7e6cf781764e9d2cf7336a5"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a0968dbfaa7e6cf781764e9d2cf7336a5">v8::internal::wasm::WasmModule::lazily_generated_names</a></div><div class="ttdeci">LazilyGeneratedNames lazily_generated_names</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00735">wasm-module.h:735</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a203c3dead384ed9378fabac21ef51c52"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a203c3dead384ed9378fabac21ef51c52">v8::internal::wasm::WasmModule::canonical_type_id</a></div><div class="ttdeci">CanonicalTypeIndex canonical_type_id(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00813">wasm-module.h:813</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a2db4294c50e9d81d12819ce61ababaec"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a2db4294c50e9d81d12819ce61ababaec">v8::internal::wasm::WasmModule::memories</a></div><div class="ttdeci">std::vector&lt; WasmMemory &gt; memories</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00718">wasm-module.h:718</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a3afd8a65f37ef25ae73380555291ce94"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a3afd8a65f37ef25ae73380555291ce94">v8::internal::wasm::WasmModule::has_signature</a></div><div class="ttdeci">bool has_signature(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00827">wasm-module.h:827</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a4d7f2eb3c584f9a7b9d79754dd29a315"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4d7f2eb3c584f9a7b9d79754dd29a315">v8::internal::wasm::WasmModule::has_array</a></div><div class="ttdeci">bool has_array(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00872">wasm-module.h:872</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a4e531b388f3b2edb6a515b3a454ed49a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a4e531b388f3b2edb6a515b3a454ed49a">v8::internal::wasm::WasmModule::elem_segments</a></div><div class="ttdeci">std::vector&lt; WasmElemSegment &gt; elem_segments</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00723">wasm-module.h:723</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a56f32c556f3ad6b75e11d3d0733cb2a5"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a56f32c556f3ad6b75e11d3d0733cb2a5">v8::internal::wasm::WasmModule::num_imported_mutable_globals</a></div><div class="ttdeci">uint32_t num_imported_mutable_globals</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00680">wasm-module.h:680</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a72d5b3903dd429c932220d3adee950a8"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a72d5b3903dd429c932220d3adee950a8">v8::internal::wasm::WasmModule::canonical_type</a></div><div class="ttdeci">CanonicalValueType canonical_type(ValueType type) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00820">wasm-module.h:820</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a7871ace0ad8518a7de0c52ac35e43eb2"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a7871ace0ad8518a7de0c52ac35e43eb2">v8::internal::wasm::WasmModule::origin</a></div><div class="ttdeci">const ModuleOrigin origin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00734">wasm-module.h:734</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a79b743888793de4a17ae53dd93988de6"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">v8::internal::wasm::WasmModule::functions</a></div><div class="ttdeci">std::vector&lt; WasmFunction &gt; functions</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00714">wasm-module.h:714</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a80ed14bf76cb65cc93c6c9ba1b56f75c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a80ed14bf76cb65cc93c6c9ba1b56f75c">v8::internal::wasm::WasmModule::canonical_sig_id</a></div><div class="ttdeci">CanonicalTypeIndex canonical_sig_id(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00850">wasm-module.h:850</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a81b4b2b056e744758f875acafe4c909a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a81b4b2b056e744758f875acafe4c909a">v8::internal::wasm::WasmModule::num_imported_functions</a></div><div class="ttdeci">uint32_t num_imported_functions</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00681">wasm-module.h:681</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a89e37309b6619867746a4cf77adcaa2a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a89e37309b6619867746a4cf77adcaa2a">v8::internal::wasm::WasmModule::type</a></div><div class="ttdeci">const TypeDefinition &amp; type(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00801">wasm-module.h:801</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_aaf7eed69c6866ffacfec579a31b9fa3d"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#aaf7eed69c6866ffacfec579a31b9fa3d">v8::internal::wasm::WasmModule::has_struct</a></div><div class="ttdeci">bool has_struct(ModuleTypeIndex index) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00860">wasm-module.h:860</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_ac76bdfa93432deb3dc1580b98a9b836e"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ac76bdfa93432deb3dc1580b98a9b836e">v8::internal::wasm::WasmModule::name</a></div><div class="ttdeci">WireBytesRef name</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00697">wasm-module.h:697</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_ad79d08b44791f2a0e0d573330a5e14d7"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#ad79d08b44791f2a0e0d573330a5e14d7">v8::internal::wasm::WasmModule::num_declared_data_segments</a></div><div class="ttdeci">uint32_t num_declared_data_segments</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00693">wasm-module.h:693</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_adc0a70e660a7112df858945f38616edc"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#adc0a70e660a7112df858945f38616edc">v8::internal::wasm::WasmModule::data_segments</a></div><div class="ttdeci">std::vector&lt; WasmDataSegment &gt; data_segments</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00716">wasm-module.h:716</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_af40a46c2d14efc9c68b499d7a459d9b0"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#af40a46c2d14efc9c68b499d7a459d9b0">v8::internal::wasm::WasmModule::tables</a></div><div class="ttdeci">std::vector&lt; WasmTable &gt; tables</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00717">wasm-module.h:717</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmTag_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmTag.html">v8::internal::wasm::WasmTag</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00115">wasm-module.h:115</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmTag_html_ab248923eacd85fe26d448e7647a9a142"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmTag.html#ab248923eacd85fe26d448e7647a9a142">v8::internal::wasm::WasmTag::sig</a></div><div class="ttdeci">const WasmTagSig * sig</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00120">wasm-module.h:120</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
<div class="ttc" id="autils_2utils_8h_html"><div class="ttname"><a href="utils_2utils_8h.html">utils.h</a></div></div>
<div class="ttc" id="av8config_8h_html_a4f489f1b838163ab33f251c9e470d938"><div class="ttname"><a href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a></div><div class="ttdeci">#define V8_LIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00661">v8config.h:661</a></div></div>
<div class="ttc" id="avalue-type_8h_html"><div class="ttname"><a href="value-type_8h.html">value-type.h</a></div></div>
<div class="ttc" id="avalue-type_8h_html_adf86c65c5ba682f447bce7040a35a995"><div class="ttname"><a href="value-type_8h.html#adf86c65c5ba682f447bce7040a35a995">FOREACH_WASMVALUE_CTYPES</a></div><div class="ttdeci">#define FOREACH_WASMVALUE_CTYPES(V)</div><div class="ttdef"><b>Definition:</b> <a href="value-type_8h_source.html#l01289">value-type.h:1289</a></div></div>
<div class="ttc" id="avector_8h_html"><div class="ttname"><a href="vector_8h.html">vector.h</a></div></div>
<div class="ttc" id="awasm-code-manager_8h_html"><div class="ttname"><a href="wasm-code-manager_8h.html">wasm-code-manager.h</a></div></div>
<div class="ttc" id="awasm-code-pointer-table-inl_8h_html"><div class="ttname"><a href="wasm-code-pointer-table-inl_8h.html">wasm-code-pointer-table-inl.h</a></div></div>
<div class="ttc" id="awasm-compiler_8h_html"><div class="ttname"><a href="wasm-compiler_8h.html">wasm-compiler.h</a></div></div>
<div class="ttc" id="awasm-engine_8h_html"><div class="ttname"><a href="wasm-engine_8h.html">wasm-engine.h</a></div></div>
<div class="ttc" id="awasm-export-wrapper-cache_8h_html"><div class="ttname"><a href="wasm-export-wrapper-cache_8h.html">wasm-export-wrapper-cache.h</a></div></div>
<div class="ttc" id="awasm-interpreter-inl_8h_html"><div class="ttname"><a href="wasm-interpreter-inl_8h.html">wasm-interpreter-inl.h</a></div></div>
<div class="ttc" id="awasm-interpreter-runtime_8h_html"><div class="ttname"><a href="wasm-interpreter-runtime_8h.html">wasm-interpreter-runtime.h</a></div></div>
<div class="ttc" id="awasm-limits_8h_html"><div class="ttname"><a href="wasm-limits_8h.html">wasm-limits.h</a></div></div>
<div class="ttc" id="awasm-module_8h_html"><div class="ttname"><a href="wasm-module_8h.html">wasm-module.h</a></div></div>
<div class="ttc" id="awasm-objects-inl_8h_html"><div class="ttname"><a href="wasm-objects-inl_8h.html">wasm-objects-inl.h</a></div></div>
<div class="ttc" id="awasm-objects_8cc_html_a0979779f556ee0d06534c86c91092716"><div class="ttname"><a href="wasm-objects_8cc.html#a0979779f556ee0d06534c86c91092716">CASE_TYPE</a></div><div class="ttdeci">#define CASE_TYPE(valuetype, ctype)</div></div>
<div class="ttc" id="awasm-objects_8cc_html_a21efa1f26601b2d6f6839765ebc71df9"><div class="ttname"><a href="wasm-objects_8cc.html#a21efa1f26601b2d6f6839765ebc71df9">TRACE_IFT</a></div><div class="ttdeci">#define TRACE_IFT(...)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00055">wasm-objects.cc:55</a></div></div>
<div class="ttc" id="awasm-objects_8h_html"><div class="ttname"><a href="wasm-objects_8h.html">wasm-objects.h</a></div></div>
<div class="ttc" id="awasm-subtyping_8h_html"><div class="ttname"><a href="wasm-subtyping_8h.html">wasm-subtyping.h</a></div></div>
<div class="ttc" id="awasm-value_8h_html"><div class="ttname"><a href="wasm-value_8h.html">wasm-value.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_72f9e9028b46e75e11b89ac450e9bb8f.html">wasm</a></li><li class="navelem"><a class="el" href="wasm-objects_8cc.html">wasm-objects.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:01:09 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
