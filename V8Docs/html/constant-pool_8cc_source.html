<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/codegen/constant-pool.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('constant-pool_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">constant-pool.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="constant-pool_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2018 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="constant-pool_8h.html">src/codegen/constant-pool.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assembler-arch_8h.html">src/codegen/assembler-arch.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assembler-inl_8h.html">src/codegen/assembler-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_PPC64)</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;ConstantPoolBuilder::ConstantPoolBuilder(<span class="keywordtype">int</span> ptr_reach_bits,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                         <span class="keywordtype">int</span> double_reach_bits) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>].entries.reserve(64);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>].regular_reach_bits = ptr_reach_bits;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>].regular_reach_bits = double_reach_bits;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;}</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">ConstantPoolEntry::Access</a> ConstantPoolBuilder::NextAccess(</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34">ConstantPoolEntry::Type</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="keyword">const</span> PerTypeEntryInfo&amp; info = info_[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordflow">if</span> (info.overflow()) <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordtype">int</span> dbl_count = info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>].regular_count;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordtype">int</span> dbl_offset = dbl_count * <a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordtype">int</span> ptr_count = info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>].regular_count;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordtype">int</span> ptr_offset = ptr_count * <a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a> + dbl_offset;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// Double overflow detection must take into account the reach for both types</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">int</span> ptr_reach_bits = info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>].regular_reach_bits;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">is_uintn</a>(dbl_offset, info.regular_reach_bits) ||</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        (ptr_count &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;         !<a class="code" href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">is_uintn</a>(ptr_offset + <a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a> - <a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                   ptr_reach_bits))) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a> == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">is_uintn</a>(ptr_offset, info.regular_reach_bits)) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">ConstantPoolEntry::Access</a> ConstantPoolBuilder::AddEntry(</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    ConstantPoolEntry* entry, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34">ConstantPoolEntry::Type</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!emitted_label_.is_bound());</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  PerTypeEntryInfo&amp; info = info_[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> entry_size = <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a11980869d87e0390dcea4827cc067fb0">ConstantPoolEntry::size</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordtype">bool</span> merged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">if</span> (entry-&gt;sharing_ok()) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// Try to merge entries</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    std::vector&lt;ConstantPoolEntry&gt;::iterator it = info.shared_entries.begin();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(info.shared_entries.size());</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++, it++) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">if</span> ((entry_size == <a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a>)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;              ? entry-&gt;value() == it-&gt;value()</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;              : entry-&gt;value64() == it-&gt;value64()) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">// Merge with found entry.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        entry-&gt;set_merged_index(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        merged = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// By definition, merged entries have regular access.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!merged || entry-&gt;merged_index() &lt; info.regular_count);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">ConstantPoolEntry::Access</a> access =</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      (merged ? <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a> : NextAccess(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// Enforce an upper bound on search time by limiting the search to</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// unique sharable entries which fit in the regular section.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (entry-&gt;sharing_ok() &amp;&amp; !merged &amp;&amp; access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    info.shared_entries.push_back(*entry);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    info.entries.push_back(*entry);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// We&#39;re done if we found a match or have already triggered the</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// overflow state.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (merged || info.overflow()) <span class="keywordflow">return</span> access;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    info.regular_count++;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    info.overflow_start = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(info.entries.size()) - 1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">return</span> access;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keywordtype">void</span> ConstantPoolBuilder::EmitSharedEntries(Assembler* assm,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                            <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34">ConstantPoolEntry::Type</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  PerTypeEntryInfo&amp; info = info_[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  std::vector&lt;ConstantPoolEntry&gt;&amp; shared_entries = info.shared_entries;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> entry_size = <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a11980869d87e0390dcea4827cc067fb0">ConstantPoolEntry::size</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordtype">int</span> base = emitted_label_.pos();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(base, 0);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordtype">int</span> shared_end = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(shared_entries.size());</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  std::vector&lt;ConstantPoolEntry&gt;::iterator shared_it = shared_entries.begin();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; shared_end; <a class="code" href="namespacev8_1_1internal.html">i</a>++, shared_it++) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">int</span> offset = assm-&gt;pc_offset() - base;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    shared_it-&gt;set_offset(offset);  <span class="comment">// Save offset for merged entries.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> (entry_size == <a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a>) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      assm-&gt;dp(shared_it-&gt;value());</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      assm-&gt;dq(shared_it-&gt;value64());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">is_uintn</a>(offset, info.regular_reach_bits));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Patch load sequence with correct offset.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    assm-&gt;PatchConstantPoolAccessInstruction(shared_it-&gt;position(), offset,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                             <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>, <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordtype">void</span> ConstantPoolBuilder::EmitGroup(Assembler* assm,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">ConstantPoolEntry::Access</a> access,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34">ConstantPoolEntry::Type</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  PerTypeEntryInfo&amp; info = info_[<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>];</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">overflow</a> = info.overflow();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  std::vector&lt;ConstantPoolEntry&gt;&amp; entries = info.entries;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  std::vector&lt;ConstantPoolEntry&gt;&amp; shared_entries = info.shared_entries;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> entry_size = <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a11980869d87e0390dcea4827cc067fb0">ConstantPoolEntry::size</a>(<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">int</span> base = emitted_label_.pos();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(base, 0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// Emit any shared entries first</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    EmitSharedEntries(assm, <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span> (access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a> = 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">overflow</a> ? info.overflow_start : <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(entries.size());</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">overflow</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a> = info.overflow_start;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(entries.size());</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  std::vector&lt;ConstantPoolEntry&gt;::iterator it = entries.begin();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a> &gt; 0) std::advance(it, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = <a class="code" href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">begin</a>; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>; <a class="code" href="namespacev8_1_1internal.html">i</a>++, it++) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Update constant pool if necessary and get the entry&#39;s offset.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> offset;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">ConstantPoolEntry::Access</a> entry_access;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (!it-&gt;is_merged()) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="comment">// Emit new entry</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      offset = assm-&gt;pc_offset() - base;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      entry_access = access;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">if</span> (entry_size == <a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a>) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        assm-&gt;dp(it-&gt;value());</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        assm-&gt;dq(it-&gt;value64());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// Retrieve offset from shared entry.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      offset = shared_entries[it-&gt;merged_index()].offset();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      entry_access = <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(entry_access == <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a> ||</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;           <a class="code" href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">is_uintn</a>(offset, info.regular_reach_bits));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// Patch load sequence with correct offset.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    assm-&gt;PatchConstantPoolAccessInstruction(it-&gt;position(), offset,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                             entry_access, <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// Emit and return size of pool.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">int</span> ConstantPoolBuilder::Emit(Assembler* assm) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">bool</span> emitted = emitted_label_.is_bound();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordtype">bool</span> empty = IsEmpty();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (!emitted) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Mark start of constant pool.  Align if necessary.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (!empty) assm-&gt;DataAlign(<a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    assm-&gt;bind(&amp;emitted_label_);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (!empty) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">// Emit in groups based on access and type.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// Emit doubles first for alignment purposes.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      EmitGroup(assm, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      EmitGroup(assm, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">ConstantPoolEntry::REGULAR</a>, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">if</span> (info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>].<a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">overflow</a>()) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        assm-&gt;DataAlign(<a class="code" href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">kDoubleSize</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        EmitGroup(assm, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">ConstantPoolEntry::DOUBLE</a>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">if</span> (info_[<a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>].<a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">overflow</a>()) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        EmitGroup(assm, <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">ConstantPoolEntry::OVERFLOWED</a>,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">ConstantPoolEntry::INTPTR</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">return</span> !empty ? (assm-&gt;pc_offset() - emitted_label_.pos()) : 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(V8_TARGET_ARCH_PPC64)</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_ARM64)</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// Constant Pool.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;ConstantPool::ConstantPool(Assembler* assm) : assm_(assm) {}</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;ConstantPool::~ConstantPool() { <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(blocked_nesting_, 0); }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;RelocInfoStatus ConstantPool::RecordEntry(uint32_t data,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                          RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(data, rmode);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32());</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> RecordKey(std::move(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>), assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;RelocInfoStatus ConstantPool::RecordEntry(uint64_t data,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                          RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(data, rmode);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32());</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> RecordKey(std::move(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>), assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;RelocInfoStatus ConstantPool::RecordKey(ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <span class="keywordtype">int</span> offset) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  RelocInfoStatus write_reloc_info = GetRelocInfoStatusFor(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (write_reloc_info == RelocInfoStatus::kMustRecord) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32()) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (entry32_count_ == 0) first_use_32_ = offset;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      ++entry32_count_;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (entry64_count_ == 0) first_use_64_ = offset;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      ++entry64_count_;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  entries_.insert(std::make_pair(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, offset));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() + Entry64Count() &gt; ConstantPool::kApproxMaxEntryCount) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Request constant pool emission after the next instruction.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    SetNextCheckIn(1);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">return</span> write_reloc_info;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;RelocInfoStatus ConstantPool::GetRelocInfoStatusFor(</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">const</span> ConstantPoolKey&amp; <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.AllowsDeduplication()) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">auto</span> existing = entries_.find(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (existing != entries_.end()) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span> RelocInfoStatus::kMustOmitForDuplicate;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">return</span> RelocInfoStatus::kMustRecord;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keywordtype">void</span> ConstantPool::EmitAndClear(Jump require_jump) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsBlocked());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// Prevent recursive pool emission.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  Assembler::BlockPoolsScope block_pools(assm_, PoolEmissionCheck::kSkip);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  Alignment require_alignment =</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      IsAlignmentRequiredIfEmittedAt(require_jump, assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = ComputeSize(require_jump, require_alignment);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03.html#a219ad4847edd5647586f81d183a15c88">Label</a> size_check;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  assm_-&gt;bind(&amp;size_check);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  assm_-&gt;RecordConstPool(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// Emit the constant pool. It is preceded by an optional branch if</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// {require_jump} and a header which will:</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">//  1) Encode the size of the constant pool, for use by the disassembler.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">//  2) Terminate the program, to try to prevent execution from accidentally</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">//     flowing into the constant pool.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">//  3) align the 64bit pool entries to 64-bit.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// TODO(all): Make the alignment part less fragile. Currently code is</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// allocated as a byte array so there are no guarantees the alignment will</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// be preserved on compaction. Currently it works as allocation seems to be</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// 64-bit aligned.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03.html#a219ad4847edd5647586f81d183a15c88">Label</a> after_pool;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (require_jump == Jump::kRequired) assm_-&gt;b(&amp;after_pool);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  assm_-&gt;RecordComment(<span class="stringliteral">&quot;[ Constant Pool&quot;</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  EmitPrologue(require_alignment);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (require_alignment == Alignment::kRequired) assm_-&gt;Align(<a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  EmitEntries();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  assm_-&gt;RecordComment(<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (after_pool.is_linked()) assm_-&gt;bind(&amp;after_pool);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(assm_-&gt;SizeOfCodeGeneratedSince(&amp;size_check), <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  Clear();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keywordtype">void</span> ConstantPool::Clear() {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  entries_.clear();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  first_use_32_ = -1;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  first_use_64_ = -1;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  entry32_count_ = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  entry64_count_ = 0;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  next_check_ = 0;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  old_next_check_ = 0;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keywordtype">void</span> ConstantPool::StartBlock() {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">if</span> (blocked_nesting_ == 0) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// Prevent constant pool checks from happening by setting the next check to</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// the biggest possible offset.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    old_next_check_ = next_check_;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    next_check_ = <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  ++blocked_nesting_;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keywordtype">void</span> ConstantPool::EndBlock() {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  --blocked_nesting_;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (blocked_nesting_ == 0) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsInImmRangeIfEmittedAt(assm_-&gt;pc_offset()));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Restore the old next_check_ value if it&#39;s less than the current</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// next_check_. This accounts for any attempt to emit pools sooner whilst</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// pools were blocked.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    next_check_ = std::min(next_check_, old_next_check_);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keywordtype">bool</span> ConstantPool::IsBlocked()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> blocked_nesting_ &gt; 0; }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keywordtype">void</span> ConstantPool::SetNextCheckIn(<span class="keywordtype">size_t</span> instructions) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  next_check_ =</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      assm_-&gt;pc_offset() + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(instructions * <a class="code" href="namespacev8_1_1internal.html#ac915558733f2fceaec1860dd81c6df7f">kInstrSize</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keywordtype">void</span> ConstantPool::EmitEntries() {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = entries_.begin(); iter != entries_.end();) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(iter-&gt;first.is_value32() || <a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(assm_-&gt;pc_offset(), 8));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">auto</span> range = entries_.equal_range(iter-&gt;first);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">bool</span> shared = iter-&gt;first.AllowsDeduplication();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = range.first; it != range.second; ++it) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      SetLoadOffsetToConstPoolEntry(it-&gt;second, assm_-&gt;pc(), it-&gt;first);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (!shared) Emit(it-&gt;first);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (shared) Emit(iter-&gt;first);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    iter = range.second;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="keywordtype">void</span> ConstantPool::Emit(<span class="keyword">const</span> ConstantPoolKey&amp; <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32()) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    assm_-&gt;dd(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.value32());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    assm_-&gt;dq(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.value64());</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keywordtype">bool</span> ConstantPool::ShouldEmitNow(Jump require_jump, <span class="keywordtype">size_t</span> margin)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (IsEmpty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() + Entry64Count() &gt; ConstantPool::kApproxMaxEntryCount) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// We compute {dist32/64}, i.e. the distance from the first instruction</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// accessing a 32bit/64bit entry in the constant pool to any of the</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// 32bit/64bit constant pool entries, respectively. This is required because</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// we do not guarantee that entries are emitted in order of reference, i.e. it</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// is possible that the entry with the earliest reference is emitted last.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// The constant pool should be emitted if either of the following is true:</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// (A) {dist32/64} will be out of range at the next check in.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// (B) Emission can be done behind an unconditional branch and {dist32/64}</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// exceeds {kOpportunityDist*}.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// (C) {dist32/64} exceeds the desired approximate distance to the pool.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordtype">int</span> worst_case_size = ComputeSize(Jump::kRequired, Alignment::kRequired);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">size_t</span> pool_end_32 = assm_-&gt;pc_offset() + margin + worst_case_size;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordtype">size_t</span> pool_end_64 = pool_end_32 - Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (Entry64Count() != 0) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// The 64-bit constants are always emitted before the 32-bit constants, so</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// we subtract the size of the 32-bit constants from {size}.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">size_t</span> dist64 = pool_end_64 - first_use_64_;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">bool</span> next_check_too_late = dist64 + 2 * kCheckInterval &gt;= kMaxDistToPool64;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordtype">bool</span> opportune_emission_without_jump =</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        require_jump == Jump::kOmitted &amp;&amp; (dist64 &gt;= kOpportunityDistToPool64);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">bool</span> approximate_distance_exceeded = dist64 &gt;= kApproxDistToPool64;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (next_check_too_late || opportune_emission_without_jump ||</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        approximate_distance_exceeded) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() != 0) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">size_t</span> dist32 = pool_end_32 - first_use_32_;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">bool</span> next_check_too_late = dist32 + 2 * kCheckInterval &gt;= kMaxDistToPool32;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">bool</span> opportune_emission_without_jump =</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        require_jump == Jump::kOmitted &amp;&amp; (dist32 &gt;= kOpportunityDistToPool32);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">bool</span> approximate_distance_exceeded = dist32 &gt;= kApproxDistToPool32;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (next_check_too_late || opportune_emission_without_jump ||</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        approximate_distance_exceeded) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordtype">int</span> ConstantPool::ComputeSize(Jump require_jump,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                              Alignment require_alignment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordtype">int</span> size_up_to_marker = PrologueSize(require_jump);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">int</span> alignment = require_alignment == Alignment::kRequired ? <a class="code" href="namespacev8_1_1internal.html#ac915558733f2fceaec1860dd81c6df7f">kInstrSize</a> : 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordtype">size_t</span> size_after_marker =</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a> + alignment + Entry64Count() * <a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">return</span> size_up_to_marker + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(size_after_marker);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;Alignment ConstantPool::IsAlignmentRequiredIfEmittedAt(Jump require_jump,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                                       <span class="keywordtype">int</span> pc_offset)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">int</span> size_up_to_marker = PrologueSize(require_jump);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (Entry64Count() != 0 &amp;&amp;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      !<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(pc_offset + size_up_to_marker, <a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>)) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">return</span> Alignment::kRequired;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">return</span> Alignment::kOmitted;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keywordtype">bool</span> ConstantPool::IsInImmRangeIfEmittedAt(<span class="keywordtype">int</span> pc_offset) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Check that all entries are in range if the pool is emitted at {pc_offset}.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// This ignores kPcLoadDelta (conservatively, since all offsets are positive),</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// and over-estimates the last entry&#39;s address with the pool&#39;s end.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  Alignment require_alignment =</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      IsAlignmentRequiredIfEmittedAt(Jump::kRequired, pc_offset);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordtype">size_t</span> pool_end_32 =</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      pc_offset + ComputeSize(Jump::kRequired, require_alignment);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordtype">size_t</span> pool_end_64 = pool_end_32 - Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordtype">bool</span> entries_in_range_32 =</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      Entry32Count() == 0 || (pool_end_32 &lt; first_use_32_ + kMaxDistToPool32);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordtype">bool</span> entries_in_range_64 =</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      Entry64Count() == 0 || (pool_end_64 &lt; first_use_64_ + kMaxDistToPool64);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> entries_in_range_32 &amp;&amp; entries_in_range_64;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;ConstantPool::BlockScope::BlockScope(Assembler* assm, <span class="keywordtype">size_t</span> margin)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    : pool_(&amp;assm-&gt;constpool_) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  pool_-&gt;assm_-&gt;EmitConstPoolWithJumpIfNeeded(margin);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  pool_-&gt;StartBlock();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;ConstantPool::BlockScope::BlockScope(Assembler* assm, PoolEmissionCheck check)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    : pool_(&amp;assm-&gt;constpool_) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(check, PoolEmissionCheck::kSkip);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  pool_-&gt;StartBlock();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;ConstantPool::BlockScope::~BlockScope() { pool_-&gt;EndBlock(); }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="keywordtype">void</span> ConstantPool::MaybeCheck() {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (assm_-&gt;pc_offset() &gt;= next_check_) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    Check(Emission::kIfNeeded, Jump::kRequired);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(V8_TARGET_ARCH_ARM64)</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#if defined(V8_TARGET_ARCH_RISCV64) || defined(V8_TARGET_ARCH_RISCV32)</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">// Constant Pool.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;ConstantPool::ConstantPool(Assembler* assm) : assm_(assm) {}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;ConstantPool::~ConstantPool() { <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(blocked_nesting_, 0); }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;RelocInfoStatus ConstantPool::RecordEntry(uint32_t data,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                          RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(data, rmode);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32());</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">return</span> RecordKey(std::move(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>), assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;RelocInfoStatus ConstantPool::RecordEntry(uint64_t data,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                          RelocInfo::Mode rmode) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(data, rmode);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32());</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">return</span> RecordKey(std::move(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>), assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;RelocInfoStatus ConstantPool::RecordKey(ConstantPoolKey <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <span class="keywordtype">int</span> offset) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  RelocInfoStatus write_reloc_info = GetRelocInfoStatusFor(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> (write_reloc_info == RelocInfoStatus::kMustRecord) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32()) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (entry32_count_ == 0) first_use_32_ = offset;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      ++entry32_count_;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">if</span> (entry64_count_ == 0) first_use_64_ = offset;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      ++entry64_count_;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  entries_.insert(std::make_pair(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, offset));</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() + Entry64Count() &gt; ConstantPool::kApproxMaxEntryCount) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// Request constant pool emission after the next instruction.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    SetNextCheckIn(1);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">return</span> write_reloc_info;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;RelocInfoStatus ConstantPool::GetRelocInfoStatusFor(</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">const</span> ConstantPoolKey&amp; <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.AllowsDeduplication()) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">auto</span> existing = entries_.find(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (existing != entries_.end()) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">return</span> RelocInfoStatus::kMustOmitForDuplicate;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">return</span> RelocInfoStatus::kMustRecord;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="keywordtype">void</span> ConstantPool::EmitAndClear(Jump require_jump) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsBlocked());</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Prevent recursive pool emission.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  Assembler::BlockPoolsScope block_pools(assm_, PoolEmissionCheck::kSkip);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  Alignment require_alignment =</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      IsAlignmentRequiredIfEmittedAt(require_jump, assm_-&gt;pc_offset());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = ComputeSize(require_jump, require_alignment);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03.html#a219ad4847edd5647586f81d183a15c88">Label</a> size_check;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  assm_-&gt;bind(&amp;size_check);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  assm_-&gt;RecordConstPool(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// Emit the constant pool. It is preceded by an optional branch if</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// {require_jump} and a header which will:</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">//  1) Encode the size of the constant pool, for use by the disassembler.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">//  2) Terminate the program, to try to prevent execution from accidentally</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">//     flowing into the constant pool.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">//  3) align the 64bit pool entries to 64-bit.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// TODO(all): Make the alignment part less fragile. Currently code is</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// allocated as a byte array so there are no guarantees the alignment will</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// be preserved on compaction. Currently it works as allocation seems to be</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// 64-bit aligned.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="assembler-riscv_8h.html#a5c8ef3c24dad2c469a42784a9a39403b">DEBUG_PRINTF</a>(<span class="stringliteral">&quot;\tConstant Pool start\n&quot;</span>)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03.html#a219ad4847edd5647586f81d183a15c88">Label</a> after_pool;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a445d20ee7b513ed654c93c662150d040">if</a> (require_jump == Jump::kRequired) assm_-&gt;b(&amp;after_pool);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  assm_-&gt;RecordComment(&quot;[ Constant Pool&quot;);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  EmitPrologue(require_alignment);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a445d20ee7b513ed654c93c662150d040">if</a> (require_alignment == Alignment::kRequired) assm_-&gt;DataAlign(<a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  EmitEntries();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  assm_-&gt;RecordComment(&quot;]&quot;);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  assm_-&gt;bind(&amp;after_pool);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="assembler-riscv_8h.html#a5c8ef3c24dad2c469a42784a9a39403b">DEBUG_PRINTF</a>(&quot;\tConstant Pool <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>\n&quot;)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(assm_-&gt;SizeOfCodeGeneratedSince(&amp;size_check) - <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, 3);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  Clear();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keywordtype">void</span> ConstantPool::Clear() {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  entries_.clear();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  first_use_32_ = -1;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  first_use_64_ = -1;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  entry32_count_ = 0;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  entry64_count_ = 0;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  next_check_ = 0;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="keywordtype">void</span> ConstantPool::StartBlock() {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (blocked_nesting_ == 0) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// Prevent constant pool checks from happening by setting the next check to</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// the biggest possible offset.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    next_check_ = <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  ++blocked_nesting_;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="keywordtype">void</span> ConstantPool::EndBlock() {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  --blocked_nesting_;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">if</span> (blocked_nesting_ == 0) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsInImmRangeIfEmittedAt(assm_-&gt;pc_offset()));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// Make sure a check happens quickly after getting unblocked.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    next_check_ = 0;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="keywordtype">bool</span> ConstantPool::IsBlocked()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> blocked_nesting_ &gt; 0; }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keywordtype">void</span> ConstantPool::SetNextCheckIn(<span class="keywordtype">size_t</span> instructions) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  next_check_ =</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      assm_-&gt;pc_offset() + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(instructions * <a class="code" href="namespacev8_1_1internal.html#ac915558733f2fceaec1860dd81c6df7f">kInstrSize</a>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="keywordtype">void</span> ConstantPool::EmitEntries() {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = entries_.begin(); iter != entries_.end();) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(iter-&gt;first.is_value32() || <a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(assm_-&gt;pc_offset(), 8));</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">auto</span> range = entries_.equal_range(iter-&gt;first);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">bool</span> shared = iter-&gt;first.AllowsDeduplication();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = range.first; it != range.second; ++it) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      SetLoadOffsetToConstPoolEntry(it-&gt;second, assm_-&gt;pc(), it-&gt;first);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">if</span> (!shared) Emit(it-&gt;first);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (shared) Emit(iter-&gt;first);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    iter = range.second;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> ConstantPool::Emit(<span class="keyword">const</span> ConstantPoolKey&amp; <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.is_value32()) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    assm_-&gt;dd(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.value32());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    assm_-&gt;dq(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>.value64());</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="keywordtype">bool</span> ConstantPool::ShouldEmitNow(Jump require_jump, <span class="keywordtype">size_t</span> margin)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (IsEmpty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() + Entry64Count() &gt; ConstantPool::kApproxMaxEntryCount) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// We compute {dist32/64}, i.e. the distance from the first instruction</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// accessing a 32bit/64bit entry in the constant pool to any of the</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// 32bit/64bit constant pool entries, respectively. This is required because</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// we do not guarantee that entries are emitted in order of reference, i.e. it</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// is possible that the entry with the earliest reference is emitted last.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// The constant pool should be emitted if either of the following is true:</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// (A) {dist32/64} will be out of range at the next check in.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// (B) Emission can be done behind an unconditional branch and {dist32/64}</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// exceeds {kOpportunityDist*}.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">// (C) {dist32/64} exceeds the desired approximate distance to the pool.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordtype">int</span> worst_case_size = ComputeSize(Jump::kRequired, Alignment::kRequired);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordtype">size_t</span> pool_end_32 = assm_-&gt;pc_offset() + margin + worst_case_size;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordtype">size_t</span> pool_end_64 = pool_end_32 - Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">if</span> (Entry64Count() != 0) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// The 64-bit constants are always emitted before the 32-bit constants, so</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// we subtract the size of the 32-bit constants from {size}.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordtype">size_t</span> dist64 = pool_end_64 - first_use_64_;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordtype">bool</span> next_check_too_late = dist64 + 2 * kCheckInterval &gt;= kMaxDistToPool64;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">bool</span> opportune_emission_without_jump =</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        require_jump == Jump::kOmitted &amp;&amp; (dist64 &gt;= kOpportunityDistToPool64);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordtype">bool</span> approximate_distance_exceeded = dist64 &gt;= kApproxDistToPool64;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (next_check_too_late || opportune_emission_without_jump ||</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        approximate_distance_exceeded) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (Entry32Count() != 0) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordtype">size_t</span> dist32 = pool_end_32 - first_use_32_;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordtype">bool</span> next_check_too_late = dist32 + 2 * kCheckInterval &gt;= kMaxDistToPool32;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordtype">bool</span> opportune_emission_without_jump =</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        require_jump == Jump::kOmitted &amp;&amp; (dist32 &gt;= kOpportunityDistToPool32);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordtype">bool</span> approximate_distance_exceeded = dist32 &gt;= kApproxDistToPool32;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (next_check_too_late || opportune_emission_without_jump ||</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        approximate_distance_exceeded) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="keywordtype">int</span> ConstantPool::ComputeSize(Jump require_jump,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                              Alignment require_alignment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">int</span> size_up_to_marker = PrologueSize(require_jump);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordtype">int</span> alignment = require_alignment == Alignment::kRequired ? <a class="code" href="namespacev8_1_1internal.html#ac915558733f2fceaec1860dd81c6df7f">kInstrSize</a> : 0;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordtype">size_t</span> size_after_marker =</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a> + alignment + Entry64Count() * <a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordflow">return</span> size_up_to_marker + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(size_after_marker);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;Alignment ConstantPool::IsAlignmentRequiredIfEmittedAt(Jump require_jump,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                       <span class="keywordtype">int</span> pc_offset)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">int</span> size_up_to_marker = PrologueSize(require_jump);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">if</span> (Entry64Count() != 0 &amp;&amp;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      !<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(pc_offset + size_up_to_marker, <a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>)) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> Alignment::kRequired;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">return</span> Alignment::kOmitted;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="keywordtype">bool</span> ConstantPool::IsInImmRangeIfEmittedAt(<span class="keywordtype">int</span> pc_offset) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Check that all entries are in range if the pool is emitted at {pc_offset}.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// This ignores kPcLoadDelta (conservatively, since all offsets are positive),</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// and over-estimates the last entry&#39;s address with the pool&#39;s end.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  Alignment require_alignment =</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      IsAlignmentRequiredIfEmittedAt(Jump::kRequired, pc_offset);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordtype">size_t</span> pool_end_32 =</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      pc_offset + ComputeSize(Jump::kRequired, require_alignment);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordtype">size_t</span> pool_end_64 = pool_end_32 - Entry32Count() * <a class="code" href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">kInt32Size</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">bool</span> entries_in_range_32 =</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      Entry32Count() == 0 || (pool_end_32 &lt; first_use_32_ + kMaxDistToPool32);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordtype">bool</span> entries_in_range_64 =</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      Entry64Count() == 0 || (pool_end_64 &lt; first_use_64_ + kMaxDistToPool64);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">return</span> entries_in_range_32 &amp;&amp; entries_in_range_64;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;ConstantPool::BlockScope::BlockScope(Assembler* assm, <span class="keywordtype">size_t</span> margin)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    : pool_(&amp;assm-&gt;constpool_) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  pool_-&gt;assm_-&gt;EmitConstPoolWithJumpIfNeeded(margin);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  pool_-&gt;StartBlock();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;ConstantPool::BlockScope::BlockScope(Assembler* assm, PoolEmissionCheck check)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    : pool_(&amp;assm-&gt;constpool_) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(check, PoolEmissionCheck::kSkip);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  pool_-&gt;StartBlock();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;ConstantPool::BlockScope::~BlockScope() { pool_-&gt;EndBlock(); }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="keywordtype">void</span> ConstantPool::MaybeCheck() {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (assm_-&gt;pc_offset() &gt;= next_check_) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    Check(Emission::kIfNeeded, Jump::kRequired);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;}</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(V8_TARGET_ARCH_RISCV64) || defined(V8_TARGET_ARCH_RISCV32)</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="aassembler-arch_8h_html"><div class="ttname"><a href="assembler-arch_8h.html">assembler-arch.h</a></div></div>
<div class="ttc" id="aassembler-inl_8h_html"><div class="ttname"><a href="assembler-inl_8h.html">assembler-inl.h</a></div></div>
<div class="ttc" id="aassembler-riscv_8h_html_a5c8ef3c24dad2c469a42784a9a39403b"><div class="ttname"><a href="assembler-riscv_8h.html#a5c8ef3c24dad2c469a42784a9a39403b">DEBUG_PRINTF</a></div><div class="ttdeci">#define DEBUG_PRINTF(...)</div><div class="ttdef"><b>Definition:</b> <a href="assembler-riscv_8h_source.html#l00070">assembler-riscv.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a11980869d87e0390dcea4827cc067fb0"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a11980869d87e0390dcea4827cc067fb0">v8::internal::ConstantPoolEntry::size</a></div><div class="ttdeci">static int size(Type type)</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00065">constant-pool.h:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a3b552e534b5468e4b9fc4c6dfc67e3c8"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8">v8::internal::ConstantPoolEntry::Access</a></div><div class="ttdeci">Access</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00069">constant-pool.h:69</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a0b950723144445249c9a3e2db8168348">v8::internal::ConstantPoolEntry::OVERFLOWED</a></div><div class="ttdeci">@ OVERFLOWED</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00069">constant-pool.h:69</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a3b552e534b5468e4b9fc4c6dfc67e3c8a25ab5af80b3d31c1f04cc8505b604aac">v8::internal::ConstantPoolEntry::REGULAR</a></div><div class="ttdeci">@ REGULAR</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00069">constant-pool.h:69</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a7544bf628d1729f4c2043ac53cf4eb34"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34">v8::internal::ConstantPoolEntry::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00063">constant-pool.h:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34a2f62fcf36f26dda5967e0c1cb6ccddc6">v8::internal::ConstantPoolEntry::INTPTR</a></div><div class="ttdeci">@ INTPTR</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00063">constant-pool.h:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConstantPoolEntry_html_a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9"><div class="ttname"><a href="classv8_1_1internal_1_1ConstantPoolEntry.html#a7544bf628d1729f4c2043ac53cf4eb34afeb5b7e2c980b078139f0a3d829b81e9">v8::internal::ConstantPoolEntry::DOUBLE</a></div><div class="ttdeci">@ DOUBLE</div><div class="ttdef"><b>Definition:</b> <a href="constant-pool_8h_source.html#l00063">constant-pool.h:63</a></div></div>
<div class="ttc" id="aconstant-pool_8h_html"><div class="ttname"><a href="constant-pool_8h.html">constant-pool.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a3df0b28b666e942ffb9d7d04acdb9715"><div class="ttname"><a href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space size(in Mbytes)&quot;)     DEFINE_INT(random_gc_interval</div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a445d20ee7b513ed654c93c662150d040"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a445d20ee7b513ed654c93c662150d040">v8::base::internal::if</a></div><div class="ttdeci">if(CheckedAddOp&lt; T, U &gt;::Do(x, y, &amp;result))</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00083">clamped_math_impl.h:83</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a51dcb90ae077172b12d63271c7e7ba0c"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">v8::internal::compiler::end</a></div><div class="ttdeci">Node::Uses::const_iterator end(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00711">node.h:711</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_ae72af9053b45630a01be9a6140820b5a"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#ae72af9053b45630a01be9a6140820b5a">v8::internal::compiler::begin</a></div><div class="ttdeci">Node::Uses::const_iterator begin(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00708">node.h:708</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03_html_a219ad4847edd5647586f81d183a15c88"><div class="ttname"><a href="namespacev8_1_1internal_1_1interpreter_1_1anonymous__namespace_02interpreter-generator_8cc_03.html#a219ad4847edd5647586f81d183a15c88">v8::internal::interpreter::anonymous_namespace{interpreter-generator.cc}::Label</a></div><div class="ttdeci">CodeStubAssembler::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="interpreter-generator_8cc_source.html#l00043">interpreter-generator.cc:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a191fd08d000c1fc6a1c0d14655f1b711"><div class="ttname"><a href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">v8::internal::kInt64Size</a></div><div class="ttdeci">constexpr int kInt64Size</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00403">globals.h:403</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd"><div class="ttname"><a href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a382cfc7833f9a238ab5ffcfea5060ddd">v8::internal::overflow</a></div><div class="ttdeci">@ overflow</div><div class="ttdef"><b>Definition:</b> <a href="assembler-ia32_8h_source.html#l00059">assembler-ia32.h:59</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00453">wasm-objects-inl.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67a51b6314a9bc8a8c44c5fe14149e6c"><div class="ttname"><a href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">v8::internal::key</a></div><div class="ttdeci">int32_t key</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l01408">external-reference.cc:1408</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a72cbfdfeabb9a401f279f7b80bcff67a"><div class="ttname"><a href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">v8::internal::kSystemPointerSize</a></div><div class="ttdeci">constexpr int kSystemPointerSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00411">globals.h:411</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a914d19dea357ee280bea7580796a62b5"><div class="ttname"><a href="namespacev8_1_1internal.html#a914d19dea357ee280bea7580796a62b5">v8::internal::kInt32Size</a></div><div class="ttdeci">constexpr int kInt32Size</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00402">globals.h:402</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac915558733f2fceaec1860dd81c6df7f"><div class="ttname"><a href="namespacev8_1_1internal.html#ac915558733f2fceaec1860dd81c6df7f">v8::internal::kInstrSize</a></div><div class="ttdeci">constexpr uint8_t kInstrSize</div><div class="ttdef"><b>Definition:</b> <a href="constants-arm_8h_source.html#l00448">constants-arm.h:448</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad03e50e4d15ee0da6a722254f350e7eb"><div class="ttname"><a href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">v8::internal::kMaxInt</a></div><div class="ttdeci">constexpr int kMaxInt</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00375">globals.h:375</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ada67458c5a8e8c0ade0017e5d3c56fd3"><div class="ttname"><a href="namespacev8_1_1internal.html#ada67458c5a8e8c0ade0017e5d3c56fd3">v8::internal::kDoubleSize</a></div><div class="ttdeci">constexpr int kDoubleSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00408">globals.h:408</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adbc08c5189048428e905c5845a8a24b4"><div class="ttname"><a href="namespacev8_1_1internal.html#adbc08c5189048428e905c5845a8a24b4">v8::internal::is_uintn</a></div><div class="ttdeci">constexpr bool is_uintn(int64_t x, unsigned n)</div><div class="ttdef"><b>Definition:</b> <a href="utils_2utils_8h_source.html#l00578">utils.h:578</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00481">logging.h:481</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00403">macros.h:403</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_313fec8840c8aa07b688695bcdb7b436.html">codegen</a></li><li class="navelem"><a class="el" href="constant-pool_8cc.html">constant-pool.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 15:53:59 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
