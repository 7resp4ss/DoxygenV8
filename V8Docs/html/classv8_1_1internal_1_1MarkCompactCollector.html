<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: v8::internal::MarkCompactCollector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classv8_1_1internal_1_1MarkCompactCollector.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classv8_1_1internal_1_1MarkCompactCollector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">v8::internal::MarkCompactCollector Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for v8::internal::MarkCompactCollector:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html">ClearTrivialWeakRefJobItem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html">CustomRootBodyMarkingVisitor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html">FilterNonTrivialWeakRefJobItem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">RecordRelocSlotInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html">SharedHeapObjectVisitor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aeffa934d2a7a740c62b6b7521f0c3897"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">StartCompactionMode</a> { <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a4461e3132c6a68cc061f851d6b53fc15">kIncremental</a>
, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">kAtomic</a>
 }</td></tr>
<tr class="separator:aeffa934d2a7a740c62b6b7521f0c3897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7aa03799336160dde3614472c712abe"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abe">MarkingWorklistProcessingMode</a> { <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8">kDefault</a>
, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7">kProcessRememberedEphemerons</a>
 }</td></tr>
<tr class="separator:ab7aa03799336160dde3614472c712abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c44c012f24399a6d96a1191d92e4fb"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">CallOrigin</a> { <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba207a015d266ec0bfad7ac80475bed3ff">kIncrementalMarkingStep</a>
, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">kAtomicGC</a>
 }</td></tr>
<tr class="separator:a85c44c012f24399a6d96a1191d92e4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4a3c7fbd042b3a90c2c1e4f00cac88"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">EphemeronResult</a> { <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e">kUnresolved</a>
, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">kMarkedValue</a>
, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b">kResolved</a>
 }</td></tr>
<tr class="separator:aaf4a3c7fbd042b3a90c2c1e4f00cac88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0af0fd7aa4d838723848a5c082e43412"><td class="memTemplParams" colspan="2">template&lt;MarkingWorklistProcessingMode mode = MarkingWorklistProcessingMode::kDefault&gt; </td></tr>
<tr class="memitem:a0af0fd7aa4d838723848a5c082e43412"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0af0fd7aa4d838723848a5c082e43412">ProcessMarkingWorklist</a> (<a class="el" href="classv8_1_1base_1_1TimeDelta.html">v8::base::TimeDelta</a> max_duration, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> max_bytes_to_process)</td></tr>
<tr class="separator:a0af0fd7aa4d838723848a5c082e43412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac79654a97e006616402d89dcec98eac7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac79654a97e006616402d89dcec98eac7">TearDown</a> ()</td></tr>
<tr class="separator:ac79654a97e006616402d89dcec98eac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82db441b928fc8abc959d3d4c7c18906"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a82db441b928fc8abc959d3d4c7c18906">CollectGarbage</a> ()</td></tr>
<tr class="separator:a82db441b928fc8abc959d3d4c7c18906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf7f62c683dbc4b89a6f71b7d60cc37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a> (<a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *<a class="el" href="flag-definitions_8h.html#a1d8cf0775c94df78b63812966a84395c">space</a>)</td></tr>
<tr class="separator:a3cf7f62c683dbc4b89a6f71b7d60cc37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325b77c4c0ed550f8eb2c317f8d5ebd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a> (<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *p)</td></tr>
<tr class="separator:a325b77c4c0ed550f8eb2c317f8d5ebd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88bb504c9d7b76a16ab2f067e907574c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a88bb504c9d7b76a16ab2f067e907574c">Prepare</a> ()</td></tr>
<tr class="separator:a88bb504c9d7b76a16ab2f067e907574c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6f060a09240e70ae531c260c99650b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">FinishConcurrentMarking</a> ()</td></tr>
<tr class="separator:a9d6f060a09240e70ae531c260c99650b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e6a8160a88f451d394d7135403f3ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">StartCompaction</a> (<a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">StartCompactionMode</a> <a class="el" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a>)</td></tr>
<tr class="separator:ab7e6a8160a88f451d394d7135403f3ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222eabb25bd3b1513f83bc63e6043bf3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a222eabb25bd3b1513f83bc63e6043bf3">StartMarking</a> (std::shared_ptr&lt;::<a class="el" href="classheap_1_1base_1_1IncrementalMarkingSchedule.html">heap::base::IncrementalMarkingSchedule</a> &gt; schedule={})</td></tr>
<tr class="separator:a222eabb25bd3b1513f83bc63e6043bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aefdd8b8b50a471f4ab14827b26c4ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0aefdd8b8b50a471f4ab14827b26c4ad">is_compacting</a> () const</td></tr>
<tr class="separator:a0aefdd8b8b50a471f4ab14827b26c4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2eab3d2c459df2d12cbdf972b1a48d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4e2eab3d2c459df2d12cbdf972b1a48d">AddTransitionArray</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt; array)</td></tr>
<tr class="separator:a4e2eab3d2c459df2d12cbdf972b1a48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268c6d19f21e9b35d477806a33960d64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a268c6d19f21e9b35d477806a33960d64">RecordStrongDescriptorArraysForWeakening</a> (<a class="el" href="classv8_1_1internal_1_1GlobalHandleVector.html">GlobalHandleVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; strong_descriptor_arrays)</td></tr>
<tr class="separator:a268c6d19f21e9b35d477806a33960d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17e6e45984b6757652c6611c22c17cff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">VerifyMarking</a> ()</td></tr>
<tr class="separator:a17e6e45984b6757652c6611c22c17cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77b1f17c1aaf49a93ba2e394fd11984"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab77b1f17c1aaf49a93ba2e394fd11984">epoch</a> () const</td></tr>
<tr class="separator:ab77b1f17c1aaf49a93ba2e394fd11984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b443b2076c56d087e7c0decad77074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet</a>&lt; <a class="el" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925b">CodeFlushMode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a00b443b2076c56d087e7c0decad77074">code_flush_mode</a> () const</td></tr>
<tr class="separator:a00b443b2076c56d087e7c0decad77074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c709cbcdf524f1f21d6780173a377b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html">MarkingWorklists</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c709cbcdf524f1f21d6780173a377b4">marking_worklists</a> ()</td></tr>
<tr class="separator:a1c709cbcdf524f1f21d6780173a377b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a770c9f4b80f0ac788fe5e0f1596713"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html#a941d07bdea68cc187975415adc4dac79">MarkingWorklists::Local</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9a770c9f4b80f0ac788fe5e0f1596713">local_marking_worklists</a> () const</td></tr>
<tr class="separator:a9a770c9f4b80f0ac788fe5e0f1596713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13bc63346bb82388df996ca28b39f6d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1WeakObjects.html">WeakObjects</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a13bc63346bb82388df996ca28b39f6d3">weak_objects</a> ()</td></tr>
<tr class="separator:a13bc63346bb82388df996ca28b39f6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c26fb846b8fa0a693ab2d751fc7b1c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">WeakObjects::Local</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a> ()</td></tr>
<tr class="separator:a5c26fb846b8fa0a693ab2d751fc7b1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa709baf43b9629ff0df85d2700caa88b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a> () const</td></tr>
<tr class="separator:aa709baf43b9629ff0df85d2700caa88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927eebc2a596cab74de9a052a849d0ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">MaybeEnableBackgroundThreadsInCycle</a> (<a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">CallOrigin</a> origin)</td></tr>
<tr class="separator:a927eebc2a596cab74de9a052a849d0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19c3ac5994087b78c51c64221e1771c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a> ()</td></tr>
<tr class="separator:ae19c3ac5994087b78c51c64221e1771c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e1a054489f11045c46e33fd3c17c97"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">MarkCompactCollector</a> (<a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *<a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>)</td></tr>
<tr class="separator:af7e1a054489f11045c46e33fd3c17c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f2fdb072e51e33c943ff1835035d9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a62f2fdb072e51e33c943ff1835035d9a">~MarkCompactCollector</a> ()</td></tr>
<tr class="separator:a62f2fdb072e51e33c943ff1835035d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac134d900ab0dbca461ef7cb20318c4ba"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">IsUnmarkedHeapObject</a> (<a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *<a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>, <a class="el" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p)</td></tr>
<tr class="separator:ac134d900ab0dbca461ef7cb20318c4ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45dbe9fb4c2e4b5ebdf19806b2de88fe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">IsUnmarkedSharedHeapObject</a> (<a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *<a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>, <a class="el" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p)</td></tr>
<tr class="separator:a45dbe9fb4c2e4b5ebdf19806b2de88fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0477b3276f6b872199164ffc981999"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f0477b3276f6b872199164ffc981999">IsOnEvacuationCandidate</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="namespacev8_1_1internal.html#aa8509f8e21058aabbc6caa5f6425bd13">MaybeObject</a> &gt; obj)</td></tr>
<tr class="separator:a5f0477b3276f6b872199164ffc981999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97a73ff845731485fa3556291425f39"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac97a73ff845731485fa3556291425f39">ShouldRecordRelocSlot</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt; host, <a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *rinfo, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; target)</td></tr>
<tr class="separator:ac97a73ff845731485fa3556291425f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb22d7642cc47c49db3b6f5041b129b9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">RecordRelocSlotInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#adb22d7642cc47c49db3b6f5041b129b9">ProcessRelocInfo</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt; host, <a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *rinfo, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; target)</td></tr>
<tr class="separator:adb22d7642cc47c49db3b6f5041b129b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4455c0b37942d5616bb57730157eb6a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a">RecordRelocSlot</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt; host, <a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *rinfo, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; target)</td></tr>
<tr class="separator:ae4455c0b37942d5616bb57730157eb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f19e21a6973a04ac052c06f045ac10"><td class="memTemplParams" colspan="2">template&lt;typename THeapObjectSlot &gt; </td></tr>
<tr class="memitem:a48f19e21a6973a04ac052c06f045ac10"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; object, THeapObjectSlot slot, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; target)</td></tr>
<tr class="separator:a48f19e21a6973a04ac052c06f045ac10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b185ed1b8262db434462d3e8ed074d"><td class="memTemplParams" colspan="2">template&lt;typename THeapObjectSlot &gt; </td></tr>
<tr class="memitem:a16b185ed1b8262db434462d3e8ed074d"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a16b185ed1b8262db434462d3e8ed074d">RecordSlot</a> (<a class="el" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a> *source_chunk, THeapObjectSlot slot, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; target)</td></tr>
<tr class="separator:a16b185ed1b8262db434462d3e8ed074d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a0991ed9064350d361c8328c21339d1ad"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0991ed9064350d361c8328c21339d1ad">ResizeNewSpaceMode</a> = <a class="el" href="classv8_1_1internal_1_1Heap.html#a6f82eea8ed7b7ed46e19979091da00df">Heap::ResizeNewSpaceMode</a></td></tr>
<tr class="separator:a0991ed9064350d361c8328c21339d1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5baec12608267c330286a39281ddf7af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5baec12608267c330286a39281ddf7af">ComputeEvacuationHeuristics</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> area_size, <a class="el" href="classint.html">int</a> *target_fragmentation_percent, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> *max_evacuated_bytes)</td></tr>
<tr class="separator:a5baec12608267c330286a39281ddf7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf2bc94ab3ef1e83c8e7f8df722f1896"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#adf2bc94ab3ef1e83c8e7f8df722f1896">RecordObjectStats</a> ()</td></tr>
<tr class="separator:adf2bc94ab3ef1e83c8e7f8df722f1896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1bd78a56ac02e2696341af641334a6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa1bd78a56ac02e2696341af641334a6b">Finish</a> ()</td></tr>
<tr class="separator:aa1bd78a56ac02e2696341af641334a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26199027fc8ec567b87add6be727214c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a26199027fc8ec567b87add6be727214c">SweepArrayBufferExtensions</a> ()</td></tr>
<tr class="separator:a26199027fc8ec567b87add6be727214c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16935f51d75fd467f80fae7c7d960e5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a16935f51d75fd467f80fae7c7d960e5e">MarkLiveObjects</a> ()</td></tr>
<tr class="separator:a16935f51d75fd467f80fae7c7d960e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d88c9886e76b0365ad7e70af83b280"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a12d88c9886e76b0365ad7e70af83b280">MarkObject</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; host, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; obj, <a class="el" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267">MarkingHelper::WorklistTarget</a> target_worklist)</td></tr>
<tr class="separator:a12d88c9886e76b0365ad7e70af83b280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff3035e5f30676d376dfe540f5cb6ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4ff3035e5f30676d376dfe540f5cb6ea">MarkRootObject</a> (<a class="el" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; obj, <a class="el" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267">MarkingHelper::WorklistTarget</a> target_worklist)</td></tr>
<tr class="separator:a4ff3035e5f30676d376dfe540f5cb6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a158db1a522505fb3dd824882108797bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a158db1a522505fb3dd824882108797bb">MarkRoots</a> (<a class="el" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> *root_visitor)</td></tr>
<tr class="separator:a158db1a522505fb3dd824882108797bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedafe750c7420c9b300b28d35551732"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#acedafe750c7420c9b300b28d35551732">MarkRootsFromConservativeStack</a> (<a class="el" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> *root_visitor)</td></tr>
<tr class="separator:acedafe750c7420c9b300b28d35551732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8160c925310ee4a1b68a3ce930c2edb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac8160c925310ee4a1b68a3ce930c2edb">MarkObjectsFromClientHeaps</a> ()</td></tr>
<tr class="separator:ac8160c925310ee4a1b68a3ce930c2edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e6080b49b981420d6462957e003821"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab6e6080b49b981420d6462957e003821">MarkObjectsFromClientHeap</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *client)</td></tr>
<tr class="separator:ab6e6080b49b981420d6462957e003821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcccd5bf69efe4a16b2f462192b42d77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#adcccd5bf69efe4a16b2f462192b42d77">PinPreciseRootsIfNeeded</a> ()</td></tr>
<tr class="separator:adcccd5bf69efe4a16b2f462192b42d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a7b97f14aca94f87fa000d330fb3d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a50a7b97f14aca94f87fa000d330fb3d7">UpdatePointersInClientHeaps</a> ()</td></tr>
<tr class="separator:a50a7b97f14aca94f87fa000d330fb3d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe392e124b1967c0510c4eaaaad062e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aabe392e124b1967c0510c4eaaaad062e">UpdatePointersInClientHeap</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *client)</td></tr>
<tr class="separator:aabe392e124b1967c0510c4eaaaad062e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8698e5fa48a17826dcf8640f7725bbce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8698e5fa48a17826dcf8640f7725bbce">UpdatePointersInPointerTables</a> ()</td></tr>
<tr class="separator:a8698e5fa48a17826dcf8640f7725bbce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14908aaa211b8c1bbafb7e4496736114"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14908aaa211b8c1bbafb7e4496736114">MarkTransitiveClosure</a> ()</td></tr>
<tr class="separator:a14908aaa211b8c1bbafb7e4496736114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab744335a59a10dfc63766f57720f8a8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab744335a59a10dfc63766f57720f8a8b">VerifyEphemeronMarking</a> ()</td></tr>
<tr class="separator:ab744335a59a10dfc63766f57720f8a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf362cecdae97f4d77f1b446496fcbe6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf362cecdae97f4d77f1b446496fcbe6">ProcessTopOptimizedFrame</a> (<a class="el" href="classv8_1_1internal_1_1ObjectVisitor.html">ObjectVisitor</a> *visitor, <a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:aaf362cecdae97f4d77f1b446496fcbe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab610702a8f54d8e17897592b3047103c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">EphemeronResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">ApplyEphemeronSemantics</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; <a class="el" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; <a class="el" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)</td></tr>
<tr class="separator:ab610702a8f54d8e17897592b3047103c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f84b58f91bd059cec89f8b1a061775"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a68f84b58f91bd059cec89f8b1a061775">ProcessEphemeron</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; <a class="el" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; <a class="el" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)</td></tr>
<tr class="separator:a68f84b58f91bd059cec89f8b1a061775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29754ded838631a20e64ff72c4ebc7b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a29754ded838631a20e64ff72c4ebc7b5">MarkTransitiveClosureUntilFixpoint</a> ()</td></tr>
<tr class="separator:a29754ded838631a20e64ff72c4ebc7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5735ec944913ace7e63d14f47ba872"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aab5735ec944913ace7e63d14f47ba872">MarkTransitiveClosureLinear</a> ()</td></tr>
<tr class="separator:aab5735ec944913ace7e63d14f47ba872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22174d94a0be4a06c478e30787da2835"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a22174d94a0be4a06c478e30787da2835">ProcessEphemerons</a> ()</td></tr>
<tr class="separator:a22174d94a0be4a06c478e30787da2835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35f5f312b9c6ccc1965b9cba1ae14fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa35f5f312b9c6ccc1965b9cba1ae14fc">PerformWrapperTracing</a> ()</td></tr>
<tr class="separator:aa35f5f312b9c6ccc1965b9cba1ae14fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29e4cf8c7be9c6a3e843b5695b16fb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac29e4cf8c7be9c6a3e843b5695b16fb3">RetainMaps</a> ()</td></tr>
<tr class="separator:ac29e4cf8c7be9c6a3e843b5695b16fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129119a903f3c2057d4a02d0ed5d0e7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a129119a903f3c2057d4a02d0ed5d0e7e">ClearNonLiveReferences</a> ()</td></tr>
<tr class="separator:a129119a903f3c2057d4a02d0ed5d0e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f4d0e2e67b039d30d737212e64b71fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f4d0e2e67b039d30d737212e64b71fa">MarkDependentCodeForDeoptimization</a> ()</td></tr>
<tr class="separator:a5f4d0e2e67b039d30d737212e64b71fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f6c6946b314cbd396fedd9a8d3b1887"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2f6c6946b314cbd396fedd9a8d3b1887">SpecialClearMapSlot</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt; host, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; dead_target, <a class="el" href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">HeapObjectSlot</a> slot)</td></tr>
<tr class="separator:a2f6c6946b314cbd396fedd9a8d3b1887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112747cd949c517326fef486c68a39f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a112747cd949c517326fef486c68a39f6">ClearPotentialSimpleMapTransition</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; dead_target)</td></tr>
<tr class="separator:a112747cd949c517326fef486c68a39f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e68bee93758940e2d106f7819cce9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a03e68bee93758940e2d106f7819cce9a">ClearPotentialSimpleMapTransition</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; map, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; dead_target)</td></tr>
<tr class="separator:a03e68bee93758940e2d106f7819cce9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3c91189f1c5ba073f1b8835017f358"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#afe3c91189f1c5ba073f1b8835017f358">FlushBytecodeFromSFI</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt; shared_info)</td></tr>
<tr class="separator:afe3c91189f1c5ba073f1b8835017f358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d909e79588ddfce09dd94ffa673417b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2d909e79588ddfce09dd94ffa673417b">ProcessOldCodeCandidates</a> ()</td></tr>
<tr class="separator:a2d909e79588ddfce09dd94ffa673417b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac98eb6a98516e575832b222b6312ce5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac98eb6a98516e575832b222b6312ce5c">ProcessOldBytecodeSFI</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt; flushing_candidate)</td></tr>
<tr class="separator:ac98eb6a98516e575832b222b6312ce5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34de0569d3f17ed9938be62ab5cda04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ad34de0569d3f17ed9938be62ab5cda04">ProcessOldBaselineSFI</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt; flushing_candidate)</td></tr>
<tr class="separator:ad34de0569d3f17ed9938be62ab5cda04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4672c902176abf0363018f4b29435209"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4672c902176abf0363018f4b29435209">FlushSFI</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt; sfi, <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> bytecode_already_decompiled)</td></tr>
<tr class="separator:a4672c902176abf0363018f4b29435209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e4a47ecc544481e5d1d8217817a392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90e4a47ecc544481e5d1d8217817a392">ProcessFlushedBaselineCandidates</a> ()</td></tr>
<tr class="separator:a90e4a47ecc544481e5d1d8217817a392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12dba7c5c1e1e2e5c8b30809005605b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af12dba7c5c1e1e2e5c8b30809005605b">ClearFlushedJsFunctions</a> ()</td></tr>
<tr class="separator:af12dba7c5c1e1e2e5c8b30809005605b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae633babe09a8fa47c416b37fba6410"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#acae633babe09a8fa47c416b37fba6410">ClearFullMapTransitions</a> ()</td></tr>
<tr class="separator:acae633babe09a8fa47c416b37fba6410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e8a1a84a4a8174d41df38622577ddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a71e8a1a84a4a8174d41df38622577ddb">TrimDescriptorArray</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; map, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; descriptors)</td></tr>
<tr class="separator:a71e8a1a84a4a8174d41df38622577ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242069ae8205f32e03cf726bffa280b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a242069ae8205f32e03cf726bffa280b9">TrimEnumCache</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; map, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; descriptors)</td></tr>
<tr class="separator:a242069ae8205f32e03cf726bffa280b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a22eaa8eafd6ae1bcfb066edd7acc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a05a22eaa8eafd6ae1bcfb066edd7acc1">CompactTransitionArray</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt; map, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt; transitions, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; descriptors)</td></tr>
<tr class="separator:a05a22eaa8eafd6ae1bcfb066edd7acc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859d6252de36904e629ec0cd26408902"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a859d6252de36904e629ec0cd26408902">TransitionArrayNeedsCompaction</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt; transitions, <a class="el" href="classint.html">int</a> num_transitions)</td></tr>
<tr class="separator:a859d6252de36904e629ec0cd26408902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67923b4c8c39c7b225af81c264d2ee46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a67923b4c8c39c7b225af81c264d2ee46">WeakenStrongDescriptorArrays</a> ()</td></tr>
<tr class="separator:a67923b4c8c39c7b225af81c264d2ee46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8683f1e2a840f0b54efff9b4a3d30e6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8683f1e2a840f0b54efff9b4a3d30e6a">ClearWeakCollections</a> ()</td></tr>
<tr class="separator:a8683f1e2a840f0b54efff9b4a3d30e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c690a1124b34af7925738d838255de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4c690a1124b34af7925738d838255de0">ClearTrivialWeakReferences</a> ()</td></tr>
<tr class="separator:a4c690a1124b34af7925738d838255de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a20caf915889d8ba10e3bd9bbc3778"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a94a20caf915889d8ba10e3bd9bbc3778">ClearTrustedWeakReferences</a> ()</td></tr>
<tr class="separator:a94a20caf915889d8ba10e3bd9bbc3778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5024e51f8944c9ad34e7f962490285"><td class="memTemplParams" colspan="2">template&lt;typename TObjectAndSlot , typename TMaybeSlot &gt; </td></tr>
<tr class="memitem:a6c5024e51f8944c9ad34e7f962490285"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a6c5024e51f8944c9ad34e7f962490285">ClearWeakReferences</a> (<a class="el" href="classv8_1_1internal_1_1WeakObjects.html#a7f664d7faebac274df585c5063ead655">WeakObjects::WeakObjectWorklist</a>&lt; TObjectAndSlot &gt;::<a class="el" href="classv8_1_1Local.html">Local</a> &amp;worklist, <a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="namespacev8_1_1internal.html#ad79ecfc717a11290d821ed1f220434f6">HeapObjectReference</a> &gt; cleared_weak_ref)</td></tr>
<tr class="separator:a6c5024e51f8944c9ad34e7f962490285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d1737f64ec1c402f115889a75d1cbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8d1737f64ec1c402f115889a75d1cbf">FilterNonTrivialWeakReferences</a> ()</td></tr>
<tr class="separator:ae8d1737f64ec1c402f115889a75d1cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f8058df74c7f0a2611b5af24a75f4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab9f8058df74c7f0a2611b5af24a75f4c">ClearNonTrivialWeakReferences</a> ()</td></tr>
<tr class="separator:ab9f8058df74c7f0a2611b5af24a75f4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de8db3fd9c732c14070a08203daa811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9de8db3fd9c732c14070a08203daa811">ClearJSWeakRefs</a> ()</td></tr>
<tr class="separator:a9de8db3fd9c732c14070a08203daa811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a5a2e6ceb32614eacab77deaa104fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a10a5a2e6ceb32614eacab77deaa104fe">Sweep</a> ()</td></tr>
<tr class="separator:a10a5a2e6ceb32614eacab77deaa104fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc475c535877a5a4773b74c0a06c78a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a> (<a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *<a class="el" href="flag-definitions_8h.html#a1d8cf0775c94df78b63812966a84395c">space</a>)</td></tr>
<tr class="separator:a4dc475c535877a5a4773b74c0a06c78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5937c57f10e0293505055fc348ddde5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af5937c57f10e0293505055fc348ddde5">EvacuatePrologue</a> ()</td></tr>
<tr class="separator:af5937c57f10e0293505055fc348ddde5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa457554fa770421e38516be33c3cd201"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa457554fa770421e38516be33c3cd201">EvacuateEpilogue</a> ()</td></tr>
<tr class="separator:aa457554fa770421e38516be33c3cd201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa553d7a0b23e5ce515c7dd3289ae84fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa553d7a0b23e5ce515c7dd3289ae84fa">Evacuate</a> ()</td></tr>
<tr class="separator:aa553d7a0b23e5ce515c7dd3289ae84fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819031ab4fbcb232c34b4ae3cd9b6b31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a819031ab4fbcb232c34b4ae3cd9b6b31">EvacuatePagesInParallel</a> ()</td></tr>
<tr class="separator:a819031ab4fbcb232c34b4ae3cd9b6b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10156273473177e162f6a5cb30b1b7e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a10156273473177e162f6a5cb30b1b7e8">UpdatePointersAfterEvacuation</a> ()</td></tr>
<tr class="separator:a10156273473177e162f6a5cb30b1b7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07545bc19d80a27a63c760d875601c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae07545bc19d80a27a63c760d875601c2">ReleaseEvacuationCandidates</a> ()</td></tr>
<tr class="separator:ae07545bc19d80a27a63c760d875601c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd86ee72dfc32e6d1e18f4c5e4a050d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">ReleasePage</a> (<a class="el" href="classv8_1_1internal_1_1PagedSpaceBase.html">PagedSpaceBase</a> *<a class="el" href="flag-definitions_8h.html#a1d8cf0775c94df78b63812966a84395c">space</a>, <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *page)</td></tr>
<tr class="separator:a5fd86ee72dfc32e6d1e18f4c5e4a050d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22086e39ee1c3864010dac3a10135834"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a22086e39ee1c3864010dac3a10135834">PostProcessAbortedEvacuationCandidates</a> ()</td></tr>
<tr class="separator:a22086e39ee1c3864010dac3a10135834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c89184f88696445ac02aee44aa43de2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0c89184f88696445ac02aee44aa43de2">ReportAbortedEvacuationCandidateDueToOOM</a> (<a class="el" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> failed_start, <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *page)</td></tr>
<tr class="separator:a0c89184f88696445ac02aee44aa43de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c05858a7577a61d236de24903278946"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">ReportAbortedEvacuationCandidateDueToFlags</a> (<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *page, <a class="el" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a> *chunk)</td></tr>
<tr class="separator:a8c05858a7577a61d236de24903278946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e736fa08fd40551bc05dc8ed6f691a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9e736fa08fd40551bc05dc8ed6f691a6">NumberOfParallelEphemeronVisitingTasks</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> elements)</td></tr>
<tr class="separator:a9e736fa08fd40551bc05dc8ed6f691a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5044d30e7d0db55493414748d740aaa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa5044d30e7d0db55493414748d740aaa">RightTrimDescriptorArray</a> (<a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; array, <a class="el" href="classint.html">int</a> descriptors_to_trim)</td></tr>
<tr class="separator:aa5044d30e7d0db55493414748d740aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11314378dd877e87d1ee7cd836c4c0f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a11314378dd877e87d1ee7cd836c4c0f0">StartSweepNewSpace</a> ()</td></tr>
<tr class="separator:a11314378dd877e87d1ee7cd836c4c0f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f47d0348b13ca89bea5f71604fa8f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a> (<a class="el" href="classv8_1_1internal_1_1LargeObjectSpace.html">LargeObjectSpace</a> *<a class="el" href="flag-definitions_8h.html#a1d8cf0775c94df78b63812966a84395c">space</a>)</td></tr>
<tr class="separator:a14f47d0348b13ca89bea5f71604fa8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b8e9f090e9c7641574ed9829b4fee1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14b8e9f090e9c7641574ed9829b4fee1">ResetAndRelinkBlackAllocatedPage</a> (<a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *, <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *)</td></tr>
<tr class="separator:a14b8e9f090e9c7641574ed9829b4fee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae03601e565734a2538c3452310efcf8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a></td></tr>
<tr class="separator:ae03601e565734a2538c3452310efcf8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e6250572f864eaa8bd93c57ae34215a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2e6250572f864eaa8bd93c57ae34215a">mutex_</a></td></tr>
<tr class="separator:a2e6250572f864eaa8bd93c57ae34215a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2b8f54a92b2195012b62dfdf64aa9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1Semaphore.html">base::Semaphore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aec2b8f54a92b2195012b62dfdf64aa9b">page_parallel_job_semaphore_</a> {0}</td></tr>
<tr class="separator:aec2b8f54a92b2195012b62dfdf64aa9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76317965f702101c902adbdee2503103"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a76317965f702101c902adbdee2503103">uses_shared_heap_</a></td></tr>
<tr class="separator:a76317965f702101c902adbdee2503103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56657163fc1e11db075fbc35242ca3ea"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a56657163fc1e11db075fbc35242ca3ea">is_shared_space_isolate_</a></td></tr>
<tr class="separator:a56657163fc1e11db075fbc35242ca3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade96b53880b218eba9217ef4f296dcdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:ade96b53880b218eba9217ef4f296dcdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d1f44cfde0bb0390ea138370a4b591"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a40d1f44cfde0bb0390ea138370a4b591">black_allocation_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:a40d1f44cfde0bb0390ea138370a4b591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf16e5a4b1908c7abfc22383d37980f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2bf16e5a4b1908c7abfc22383d37980f">have_code_to_deoptimize_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:a2bf16e5a4b1908c7abfc22383d37980f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba2df1d2e1c47234008d809d596228c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">parallel_marking_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:a8ba2df1d2e1c47234008d809d596228c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84cbdfc60879f899e3aca799e53e5e42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html">MarkingWorklists</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a></td></tr>
<tr class="separator:a84cbdfc60879f899e3aca799e53e5e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa3dd4e8cf79ce7342fd16773ecfb8a"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html#a941d07bdea68cc187975415adc4dac79">MarkingWorklists::Local</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a></td></tr>
<tr class="separator:a7aa3dd4e8cf79ce7342fd16773ecfb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcc37fc5a17ba03b80c55849b314fec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1WeakObjects.html">WeakObjects</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a></td></tr>
<tr class="separator:a0fcc37fc5a17ba03b80c55849b314fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61342980b0507790efb15034d83162f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1MainMarkingVisitor.html">MainMarkingVisitor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">marking_visitor_</a></td></tr>
<tr class="separator:af61342980b0507790efb15034d83162f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a10b022d9f335231b5ea7dbbdbaa51"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">WeakObjects::Local</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a></td></tr>
<tr class="separator:ab7a10b022d9f335231b5ea7dbbdbaa51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d01cfcaa46efe4b24412d3eba66ca0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1NativeContextInferrer.html">NativeContextInferrer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a38d01cfcaa46efe4b24412d3eba66ca0">native_context_inferrer_</a></td></tr>
<tr class="separator:a38d01cfcaa46efe4b24412d3eba66ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adebad6550fadebad8005f173c10359c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1NativeContextStats.html">NativeContextStats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">native_context_stats_</a></td></tr>
<tr class="separator:adebad6550fadebad8005f173c10359c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a549e40a15f698fff626af735208769ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1GlobalHandleVector.html">GlobalHandleVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a549e40a15f698fff626af735208769ae">strong_descriptor_arrays_</a></td></tr>
<tr class="separator:a549e40a15f698fff626af735208769ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512d50cdd47b6006d66ac9456259e69b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a512d50cdd47b6006d66ac9456259e69b">strong_descriptor_arrays_mutex_</a></td></tr>
<tr class="separator:a512d50cdd47b6006d66ac9456259e69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57e6e0473e2cf52591357fcbeb4ebfca"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a></td></tr>
<tr class="separator:a57e6e0473e2cf52591357fcbeb4ebfca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8bdf9288a13d36c8c4c482145a20238"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a></td></tr>
<tr class="separator:af8bdf9288a13d36c8c4c482145a20238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90654b662fce79c4d158e494a7660987"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a></td></tr>
<tr class="separator:a90654b662fce79c4d158e494a7660987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dab80ef7a34c59ce69e9828d602bb9f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; <a class="el" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a>, <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a></td></tr>
<tr class="separator:a4dab80ef7a34c59ce69e9828d602bb9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a4e5f537a84e8ed02f47c747e10f89"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">aborted_evacuation_candidates_due_to_flags_</a></td></tr>
<tr class="separator:a07a4e5f537a84e8ed02f47c747e10f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e1364ab937f14cf763b58e79567d74"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1LargePageMetadata.html">LargePageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#af2e1364ab937f14cf763b58e79567d74">promoted_large_pages_</a></td></tr>
<tr class="separator:af2e1364ab937f14cf763b58e79567d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e20b7391f846e5f4c429eda5bf5cbe"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a></td></tr>
<tr class="separator:a18e20b7391f846e5f4c429eda5bf5cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081b322601a4f48341bab12890a37b11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a28865ed3db2b1d0816122def6a86c92e">KeyToValues</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a></td></tr>
<tr class="separator:a081b322601a4f48341bab12890a37b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b2700c2f0bdd026ead1656ef7416c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MarkingState.html">MarkingState</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a></td></tr>
<tr class="separator:a93b2700c2f0bdd026ead1656ef7416c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae21b5cab72b362b1b379c2f3bda5f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1NonAtomicMarkingState.html">NonAtomicMarkingState</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a></td></tr>
<tr class="separator:afae21b5cab72b362b1b379c2f3bda5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac461786105da85b3815ffc21717d883d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1Sweeper.html">Sweeper</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a></td></tr>
<tr class="separator:ac461786105da85b3815ffc21717d883d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97165101e46c49ad2629345f1cb48da5"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a97165101e46c49ad2629345f1cb48da5">epoch_</a> = 0</td></tr>
<tr class="separator:a97165101e46c49ad2629345f1cb48da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ccbff2b71c818ffeab6970aad6510f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet</a>&lt; <a class="el" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925b">CodeFlushMode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a25ccbff2b71c818ffeab6970aad6510f">code_flush_mode_</a></td></tr>
<tr class="separator:a25ccbff2b71c818ffeab6970aad6510f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa333a0a067ea24b0545c99392cc77848"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a></td></tr>
<tr class="separator:aa333a0a067ea24b0545c99392cc77848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c9a5589f6ebd3fd2eb5869923fe8e54"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:a1c9a5589f6ebd3fd2eb5869923fe8e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813f065fd20e706f633a1f94da96f839"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">in_conservative_stack_scanning_</a> = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td></tr>
<tr class="separator:a813f065fd20e706f633a1f94da96f839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ad52a278306d82bfecdf2ee279d56967e"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ad52a278306d82bfecdf2ee279d56967e">kEphemeronChunkSize</a> = 8 * <a class="el" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a></td></tr>
<tr class="separator:ad52a278306d82bfecdf2ee279d56967e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aaf862d3efb6e48b15fe21d283eebc6c5"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf862d3efb6e48b15fe21d283eebc6c5">Evacuator</a></td></tr>
<tr class="separator:aaf862d3efb6e48b15fe21d283eebc6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aac51e6e68df5e4add0792032864173"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9aac51e6e68df5e4add0792032864173">RecordMigratedSlotVisitor</a></td></tr>
<tr class="separator:a9aac51e6e68df5e4add0792032864173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a89e89941e2601a090655513f208c65"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0a89e89941e2601a090655513f208c65">RootMarkingVisitor</a></td></tr>
<tr class="separator:a0a89e89941e2601a090655513f208c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03cb76c44646ccae2a33eb05bcdf0dc5"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a03cb76c44646ccae2a33eb05bcdf0dc5">PrecisePagePinningVisitor</a></td></tr>
<tr class="separator:a03cb76c44646ccae2a33eb05bcdf0dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00057">57</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a0991ed9064350d361c8328c21339d1ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0991ed9064350d361c8328c21339d1ad">&#9670;&nbsp;</a></span>ResizeNewSpaceMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classv8_1_1internal_1_1Heap.html#a6f82eea8ed7b7ed46e19979091da00df">v8::internal::MarkCompactCollector::ResizeNewSpaceMode</a> =  <a class="el" href="classv8_1_1internal_1_1Heap.html#a6f82eea8ed7b7ed46e19979091da00df">Heap::ResizeNewSpaceMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00195">195</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a85c44c012f24399a6d96a1191d92e4fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c44c012f24399a6d96a1191d92e4fb">&#9670;&nbsp;</a></span>CallOrigin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">v8::internal::MarkCompactCollector::CallOrigin</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a85c44c012f24399a6d96a1191d92e4fba207a015d266ec0bfad7ac80475bed3ff"></a>kIncrementalMarkingStep&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7"></a>kAtomicGC&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00072">72</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                        {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    kIncrementalMarkingStep,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    kAtomicGC,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  };</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf4a3c7fbd042b3a90c2c1e4f00cac88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4a3c7fbd042b3a90c2c1e4f00cac88">&#9670;&nbsp;</a></span>EphemeronResult</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">v8::internal::MarkCompactCollector::EphemeronResult</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e"></a>kUnresolved&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2"></a>kMarkedValue&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b"></a>kResolved&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00077">77</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                             {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Both key and value are still unmarked.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1compiler.html#aaf22dd277d797ea2a57d496631f034f6a8fae96c2c16a6e5bffe0ababb3ede10e">kUnresolved</a>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// Value got marked because key was already marked.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    kMarkedValue,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// Value is already marked or always live in this GC.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    kResolved,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  };</div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_aaf22dd277d797ea2a57d496631f034f6a8fae96c2c16a6e5bffe0ababb3ede10e"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#aaf22dd277d797ea2a57d496631f034f6a8fae96c2c16a6e5bffe0ababb3ede10e">v8::internal::compiler::UsePositionHintType::kUnresolved</a></div><div class="ttdeci">@ kUnresolved</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7aa03799336160dde3614472c712abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7aa03799336160dde3614472c712abe">&#9670;&nbsp;</a></span>MarkingWorklistProcessingMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abe">v8::internal::MarkCompactCollector::MarkingWorklistProcessingMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8"></a>kDefault&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7"></a>kProcessRememberedEphemerons&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00067">67</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                           {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a37a9b036b2bb53802e6b5d0842ca0fada6867faeaa475fda467e48267db2bb8a8">kDefault</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    kProcessRememberedEphemerons</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  };</div>
<div class="ttc" id="anamespacev8_1_1base_html_a37a9b036b2bb53802e6b5d0842ca0fada6867faeaa475fda467e48267db2bb8a8"><div class="ttname"><a href="namespacev8_1_1base.html#a37a9b036b2bb53802e6b5d0842ca0fada6867faeaa475fda467e48267db2bb8a8">v8::base::AbortMode::kDefault</a></div><div class="ttdeci">@ kDefault</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeffa934d2a7a740c62b6b7521f0c3897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeffa934d2a7a740c62b6b7521f0c3897">&#9670;&nbsp;</a></span>StartCompactionMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">v8::internal::MarkCompactCollector::StartCompactionMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aeffa934d2a7a740c62b6b7521f0c3897a4461e3132c6a68cc061f851d6b53fc15"></a>kIncremental&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71"></a>kAtomic&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00062">62</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                 {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    kIncremental,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="namespacecppgc_1_1internal.html#ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71">kAtomic</a>,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  };</div>
<div class="ttc" id="anamespacecppgc_1_1internal_html_ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71"><div class="ttname"><a href="namespacecppgc_1_1internal.html#ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71">cppgc::internal::AccessMode::kAtomic</a></div><div class="ttdeci">@ kAtomic</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af7e1a054489f11045c46e33fd3c17c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e1a054489f11045c46e33fd3c17c97">&#9670;&nbsp;</a></span>MarkCompactCollector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::MarkCompactCollector::MarkCompactCollector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00282">282</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>(<a class="code" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      state_(<a class="code" href="namespacev8.html#af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8">IDLE</a>),</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a76317965f702101c902adbdee2503103">uses_shared_heap_</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a8766ebe269e544125eaf0e70146ee2dc">has_shared_space</a>()),</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a56657163fc1e11db075fbc35242ca3ea">is_shared_space_isolate_</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a24109659c4260d0c6f281510b6091015">is_shared_space_isolate</a>()),</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a7bfaafb912d7be87fd7043b7629f7675">marking_state</a>()),</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a81880e557d80731da98aebef763044e0">non_atomic_marking_state</a>()),</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aad499bc7154a594f5a3e7036d683cdfa">sweeper</a>()) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a7bfaafb912d7be87fd7043b7629f7675"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a7bfaafb912d7be87fd7043b7629f7675">v8::internal::Heap::marking_state</a></div><div class="ttdeci">MarkingState * marking_state()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01677">heap.h:1677</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a81880e557d80731da98aebef763044e0"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a81880e557d80731da98aebef763044e0">v8::internal::Heap::non_atomic_marking_state</a></div><div class="ttdeci">NonAtomicMarkingState * non_atomic_marking_state()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01679">heap.h:1679</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aad499bc7154a594f5a3e7036d683cdfa"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aad499bc7154a594f5a3e7036d683cdfa">v8::internal::Heap::sweeper</a></div><div class="ttdeci">Sweeper * sweeper()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00864">heap.h:864</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae5160ad63bc51ff7b36e8f247be48f63"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">v8::internal::Heap::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00061">heap-inl.h:61</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a24109659c4260d0c6f281510b6091015"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a24109659c4260d0c6f281510b6091015">v8::internal::Isolate::is_shared_space_isolate</a></div><div class="ttdeci">bool is_shared_space_isolate() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l02332">isolate.h:2332</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a8766ebe269e544125eaf0e70146ee2dc"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a8766ebe269e544125eaf0e70146ee2dc">v8::internal::Isolate::has_shared_space</a></div><div class="ttdeci">bool has_shared_space() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l02343">isolate.h:2343</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a56657163fc1e11db075fbc35242ca3ea"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a56657163fc1e11db075fbc35242ca3ea">v8::internal::MarkCompactCollector::is_shared_space_isolate_</a></div><div class="ttdeci">const bool is_shared_space_isolate_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00415">mark-compact.h:415</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a76317965f702101c902adbdee2503103"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a76317965f702101c902adbdee2503103">v8::internal::MarkCompactCollector::uses_shared_heap_</a></div><div class="ttdeci">const bool uses_shared_heap_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00414">mark-compact.h:414</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a93b2700c2f0bdd026ead1656ef7416c6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">v8::internal::MarkCompactCollector::marking_state_</a></div><div class="ttdeci">MarkingState *const marking_state_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00454">mark-compact.h:454</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac461786105da85b3815ffc21717d883d"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">v8::internal::MarkCompactCollector::sweeper_</a></div><div class="ttdeci">Sweeper *const sweeper_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00456">mark-compact.h:456</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ae03601e565734a2538c3452310efcf8a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">v8::internal::MarkCompactCollector::heap_</a></div><div class="ttdeci">Heap *const heap_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00396">mark-compact.h:396</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_afae21b5cab72b362b1b379c2f3bda5f8"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">v8::internal::MarkCompactCollector::non_atomic_marking_state_</a></div><div class="ttdeci">NonAtomicMarkingState *const non_atomic_marking_state_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00455">mark-compact.h:455</a></div></div>
<div class="ttc" id="anamespaceheap_html"><div class="ttname"><a href="namespaceheap.html">heap</a></div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2platform_2platform_8h_source.html#l00072">platform.h:72</a></div></div>
<div class="ttc" id="anamespacev8_html_af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8"><div class="ttname"><a href="namespacev8.html#af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8">v8::IDLE</a></div><div class="ttdeci">@ IDLE</div><div class="ttdef"><b>Definition:</b> <a href="v8-unwinder_8h_source.html#l00045">v8-unwinder.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62f2fdb072e51e33c943ff1835035d9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62f2fdb072e51e33c943ff1835035d9a">&#9670;&nbsp;</a></span>~MarkCompactCollector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::MarkCompactCollector::~MarkCompactCollector </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a325b77c4c0ed550f8eb2c317f8d5ebd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a325b77c4c0ed550f8eb2c317f8d5ebd3">&#9670;&nbsp;</a></span>AddEvacuationCandidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::AddEvacuationCandidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00307">307</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                                                 {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!p-&gt;Chunk()-&gt;NeverEvacuate());</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!p-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation_candidates) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="stringliteral">&quot;Evacuation candidate: Free bytes: %6zu. Free Lists length: %4d.\n&quot;</span>,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        p-&gt;area_size() - p-&gt;allocated_bytes(), p-&gt;ComputeFreeListsLength());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  p-&gt;MarkEvacuationCandidate();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>.push_back(p);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a57e6e0473e2cf52591357fcbeb4ebfca"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">v8::internal::MarkCompactCollector::evacuation_candidates_</a></div><div class="ttdeci">std::vector&lt; PageMetadata * &gt; evacuation_candidates_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00438">mark-compact.h:438</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">v8::internal::MemoryChunk::BLACK_ALLOCATED</a></div><div class="ttdeci">@ BLACK_ALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00086">memory-chunk.h:86</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ada9f491dce0173d9e92b0dfaeaf8b64c"><div class="ttname"><a href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">v8::internal::PrintIsolate</a></div><div class="ttdeci">void PrintIsolate(void *isolate, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="utils_2utils_8cc_source.html#l00061">utils.cc:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00101">v8::internal::MemoryChunkMetadata::allocated_bytes()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00065">v8::internal::MemoryChunkMetadata::area_size()</a>, <a class="el" href="memory-chunk_8h_source.html#l00086">v8::internal::MemoryChunk::BLACK_ALLOCATED</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="mutable-page-metadata_8cc_source.html#l00194">v8::internal::MutablePageMetadata::ComputeFreeListsLength()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="mark-compact_8h_source.html#l00438">evacuation_candidates_</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="page-metadata-inl_8h_source.html#l00042">v8::internal::PageMetadata::MarkEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00284">v8::internal::MemoryChunk::NeverEvacuate()</a>, <a class="el" href="utils_2utils_8cc_source.html#l00061">v8::internal::PrintIsolate()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00609">CollectEvacuationCandidates()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4e2eab3d2c459df2d12cbdf972b1a48d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2eab3d2c459df2d12cbdf972b1a48d">&#9670;&nbsp;</a></span>AddTransitionArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::AddTransitionArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt;&#160;</td>
          <td class="paramname"><em>array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact-inl_8h_source.html#l00104">104</a> of file <a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                                           {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;transition_arrays_local.Push(array);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a5c26fb846b8fa0a693ab2d751fc7b1c9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">v8::internal::MarkCompactCollector::local_weak_objects</a></div><div class="ttdeci">WeakObjects::Local * local_weak_objects()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00181">mark-compact.h:181</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00181">local_weak_objects()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a4e2eab3d2c459df2d12cbdf972b1a48d_cgraph.svg" width="484" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab610702a8f54d8e17897592b3047103c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab610702a8f54d8e17897592b3047103c">&#9670;&nbsp;</a></span>ApplyEphemeronSemantics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">MarkCompactCollector::EphemeronResult</a> v8::internal::MarkCompactCollector::ApplyEphemeronSemantics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02286">2286</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                                                                        {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="comment">// Objects in the shared heap are prohibited from being used as keys in</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="comment">// WeakMaps and WeakSets and therefore cannot be ephemeron keys, because that</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// would enable thread local -&gt; shared heap edges.</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>));</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="comment">// Usually values that should not be marked are not added to the ephemeron</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="comment">// worklist. However, minor collection during incremental marking may promote</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="comment">// strings from the younger generation into the shared heap. This</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="comment">// ShouldMarkObject call catches those cases.</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> target_worklist = <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordflow">if</span> (!target_worklist) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="comment">// The value doesn&#39;t need to be marked in this GC, so no need to track</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="comment">// ephemeron further.</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b">EphemeronResult::kResolved</a>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  }</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>)) {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a0e9d1ac5aa056d7bf0087bce379e3b7c">MarkingHelper::TryMarkAndPush</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get(),</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                                      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, target_worklist.value(),</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                                      <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">EphemeronResult::kMarkedValue</a>;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b">EphemeronResult::kResolved</a>;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    }</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#a13d4cff573da17af5b1532566911dfe9">IsMarked</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b">EphemeronResult::kResolved</a>;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e">EphemeronResult::kUnresolved</a>;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  }</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a7125239f9673b20fca00902b11d24726"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">v8::internal::HeapLayout::InWritableSharedSpace</a></div><div class="ttdeci">static bool InWritableSharedSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-layout-inl_8h_source.html#l00067">heap-layout-inl.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a7aa3dd4e8cf79ce7342fd16773ecfb8a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">v8::internal::MarkCompactCollector::local_marking_worklists_</a></div><div class="ttdeci">std::unique_ptr&lt; MarkingWorklists::Local &gt; local_marking_worklists_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00425">mark-compact.h:425</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b">v8::internal::MarkCompactCollector::EphemeronResult::kResolved</a></div><div class="ttdeci">@ kResolved</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e">v8::internal::MarkCompactCollector::EphemeronResult::kUnresolved</a></div><div class="ttdeci">@ kUnresolved</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">v8::internal::MarkCompactCollector::EphemeronResult::kMarkedValue</a></div><div class="ttdeci">@ kMarkedValue</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingStateBase_html_a13d4cff573da17af5b1532566911dfe9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingStateBase.html#a13d4cff573da17af5b1532566911dfe9">v8::internal::MarkingStateBase::IsMarked</a></div><div class="ttdeci">bool IsMarked(const Tagged&lt; HeapObject &gt; obj) const</div><div class="ttdef"><b>Definition:</b> <a href="marking-state-inl_8h_source.html#l00018">marking-state-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67a51b6314a9bc8a8c44c5fe14149e6c"><div class="ttname"><a href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">v8::internal::key</a></div><div class="ttdeci">int32_t key</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l01408">external-reference.cc:1408</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac1a33b5fd9af1653d346746cdb5c1ac0"><div class="ttname"><a href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">v8::internal::value</a></div><div class="ttdeci">return value</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00912">map-inl.h:912</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a0e9d1ac5aa056d7bf0087bce379e3b7c"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a0e9d1ac5aa056d7bf0087bce379e3b7c">v8::internal::MarkingHelper::TryMarkAndPush</a></div><div class="ttdeci">static bool TryMarkAndPush(Heap *heap, MarkingWorklists::Local *marking_worklist, MarkingState *marking_state, WorklistTarget target_worklis, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00350">marking-inl.h:350</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a526aa3d8b3fa085271b2f23137766544"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">v8::internal::MarkingHelper::IsMarkedOrAlwaysLive</a></div><div class="ttdeci">static bool IsMarkedOrAlwaysLive(Heap *heap, MarkingStateT *marking_state, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00330">marking-inl.h:330</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_ac5e90f6e0c7ddb83975856969a4ad03f"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">v8::internal::MarkingHelper::ShouldMarkObject</a></div><div class="ttdeci">static std::optional&lt; WorklistTarget &gt; ShouldMarkObject(Heap *heap, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00278">marking-inl.h:278</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="external-reference_8cc_source.html#l01408">v8::internal::key</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>

</div>
</div>
<a id="af12dba7c5c1e1e2e5c8b30809005605b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af12dba7c5c1e1e2e5c8b30809005605b">&#9670;&nbsp;</a></span>ClearFlushedJsFunctions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearFlushedJsFunctions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03535">3535</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                                                   {</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode ||</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;         <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.flushed_js_functions.IsEmpty());</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  Tagged&lt;JSFunction&gt; flushed_js_function;</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;flushed_js_functions_local.Pop(</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;      &amp;flushed_js_function)) {</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="keyword">auto</span> gc_notify_updated_slot = [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> object, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;                                     <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> target) {</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    };</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    flushed_js_function-&gt;ResetIfCodeFlushed(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;                                            gc_notify_updated_slot);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  }</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a0fcc37fc5a17ba03b80c55849b314fec"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">v8::internal::MarkCompactCollector::weak_objects_</a></div><div class="ttdeci">WeakObjects weak_objects_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00427">mark-compact.h:427</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a48f19e21a6973a04ac052c06f045ac10"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">v8::internal::MarkCompactCollector::RecordSlot</a></div><div class="ttdeci">static void RecordSlot(Tagged&lt; HeapObject &gt; object, THeapObjectSlot slot, Tagged&lt; HeapObject &gt; target)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact-inl_8h_source.html#l00060">mark-compact-inl.h:60</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0bc0ebcec45817212856f7d5e021224c"><div class="ttname"><a href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">v8::internal::ObjectSlot</a></div><div class="ttdeci">SlotTraits::TObjectSlot ObjectSlot</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01237">globals.h:1237</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5297fd2c72981b2220e6b9a831570fb3"><div class="ttname"><a href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdeci">Tagged&lt; Object &gt;</div><div class="ttdef"><b>Definition:</b> <a href="js-objects-inl_8h_source.html#l00162">js-objects-inl.h:162</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a57f5ecf71b9a2757b0555b2be4c640b8"><div class="ttname"><a href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">v8::internal::Tagged&lt; HeapObject &gt;</a></div><div class="ttdeci">kInterpreterTrampolineOffset Tagged&lt; HeapObject &gt;</div><div class="ttdef"><b>Definition:</b> <a href="shared-function-info-inl_8h_source.html#l00117">shared-function-info-inl.h:117</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

</div>
</div>
<a id="acae633babe09a8fa47c416b37fba6410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae633babe09a8fa47c416b37fba6410">&#9670;&nbsp;</a></span>ClearFullMapTransitions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearFullMapTransitions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03580">3580</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;                                                   {</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  Tagged&lt;TransitionArray&gt; array;</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  ReadOnlyRoots roots(isolate);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;transition_arrays_local.Pop(&amp;array)) {</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;    <span class="keywordtype">int</span> num_transitions = array-&gt;number_of_transitions();</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    <span class="keywordflow">if</span> (num_transitions &gt; 0) {</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        Tagged&lt;Map&gt; map;</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        <span class="comment">// The array might contain &quot;undefined&quot; elements because it&#39;s not yet</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        <span class="comment">// filled. Allow it.</span></div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        <span class="keywordflow">if</span> (array-&gt;GetTargetIfExists(0, isolate, &amp;map)) {</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!map.is_null());  <span class="comment">// Weak pointers aren&#39;t cleared yet.</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">constructor_or_back_pointer</a> =</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;              map-&gt;constructor_or_back_pointer();</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">IsSmi</a>(<a class="code" href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">constructor_or_back_pointer</a>)) {</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(isolate-&gt;has_active_deserializer());</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">constructor_or_back_pointer</a>,</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1Smi.html#ad0e5f2cc37fd6c47148dda7839ba4892">Smi::uninitialized_deserialization_value</a>());</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;          }</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;          Tagged&lt;Map&gt; parent = Cast&lt;Map&gt;(map-&gt;constructor_or_back_pointer());</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> parent_is_alive = <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;              <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, parent);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> descriptors =</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;              parent_is_alive ? parent-&gt;instance_descriptors(isolate)</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                              : <a class="code" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a>();</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;          <span class="keywordtype">bool</span> descriptors_owner_died =</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;              <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a05a22eaa8eafd6ae1bcfb066edd7acc1">CompactTransitionArray</a>(parent, array, descriptors);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;          <span class="keywordflow">if</span> (descriptors_owner_died) {</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a71e8a1a84a4a8174d41df38622577ddb">TrimDescriptorArray</a>(parent, descriptors);</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;          }</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        }</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      }</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  }</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a05a22eaa8eafd6ae1bcfb066edd7acc1"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a05a22eaa8eafd6ae1bcfb066edd7acc1">v8::internal::MarkCompactCollector::CompactTransitionArray</a></div><div class="ttdeci">bool CompactTransitionArray(Tagged&lt; Map &gt; map, Tagged&lt; TransitionArray &gt; transitions, Tagged&lt; DescriptorArray &gt; descriptors)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03651">mark-compact.cc:3651</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a71e8a1a84a4a8174d41df38622577ddb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a71e8a1a84a4a8174d41df38622577ddb">v8::internal::MarkCompactCollector::TrimDescriptorArray</a></div><div class="ttdeci">void TrimDescriptorArray(Tagged&lt; Map &gt; map, Tagged&lt; DescriptorArray &gt; descriptors)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03769">mark-compact.cc:3769</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_ad0e5f2cc37fd6c47148dda7839ba4892"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#ad0e5f2cc37fd6c47148dda7839ba4892">v8::internal::Smi::uninitialized_deserialization_value</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; uninitialized_deserialization_value()</div><div class="ttdef"><b>Definition:</b> <a href="smi_8h_source.html#l00114">smi.h:114</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a403f10ce1c7dc18ea5f622a1aaa56285"><div class="ttname"><a href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">v8::internal::Tagged&lt; DescriptorArray &gt;</a></div><div class="ttdeci">Tagged&lt; DescriptorArray &gt;</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00052">map-inl.h:52</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac299e59759eecb4621f6bad64d5db952"><div class="ttname"><a href="namespacev8_1_1internal.html#ac299e59759eecb4621f6bad64d5db952">v8::internal::IsSmi</a></div><div class="ttdeci">constexpr bool IsSmi(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00666">objects.h:666</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae3cd5ae1226a4707d6e6834191b97c92"><div class="ttname"><a href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">v8::internal::constructor_or_back_pointer</a></div><div class="ttdeci">constructor_or_back_pointer</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00889">map-inl.h:889</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="map-inl_8h_source.html#l00889">v8::internal::constructor_or_back_pointer</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="execution_2isolate_8h_source.html#l00942">v8::internal::Isolate::has_active_deserializer()</a>, <a class="el" href="tagged_8h_source.html#l00502">v8::internal::Tagged&lt; HeapObject &gt;::is_null()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, <a class="el" href="objects_8h_source.html#l00666">v8::internal::IsSmi()</a>, and <a class="el" href="map-inl_8h_source.html#l00052">v8::internal::Tagged&lt; DescriptorArray &gt;</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410_cgraph.svg" width="100%" height="481"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9de8db3fd9c732c14070a08203daa811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9de8db3fd9c732c14070a08203daa811">&#9670;&nbsp;</a></span>ClearJSWeakRefs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearJSWeakRefs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03938">3938</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;                                           {</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_JS_WEAK_REFERENCES);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  Tagged&lt;JSWeakRef&gt; weak_ref;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;js_weak_refs_local.Pop(&amp;weak_ref)) {</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> target = Cast&lt;HeapObject&gt;(weak_ref-&gt;target());</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, target)) {</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      weak_ref-&gt;set_target(ReadOnlyRoots(isolate).undefined_value());</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <span class="comment">// The value of the JSWeakRef is alive.</span></div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot = weak_ref-&gt;RawField(JSWeakRef::kTargetOffset);</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(weak_ref, slot, target);</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    }</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  }</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;  Tagged&lt;WeakCell&gt; weak_cell;</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_cells_local.Pop(&amp;weak_cell)) {</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="keyword">auto</span> gc_notify_updated_slot = [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> object, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                                     <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> target) {</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(target)) {</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      }</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    };</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> target = Cast&lt;HeapObject&gt;(weak_cell-&gt;target());</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, target)) {</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1Object.html#a3fa7e2f730543261b565d9f664e50d69">Object::CanBeHeldWeakly</a>(target));</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;      <span class="comment">// The value of the WeakCell is dead.</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;      Tagged&lt;JSFinalizationRegistry&gt; finalization_registry =</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;          Cast&lt;JSFinalizationRegistry&gt;(weak_cell-&gt;finalization_registry());</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      <span class="keywordflow">if</span> (!finalization_registry-&gt;scheduled_for_cleanup()) {</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a1a0c76c9c449dfc8e225855b9417a4ed">EnqueueDirtyJSFinalizationRegistry</a>(finalization_registry,</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;                                                  gc_notify_updated_slot);</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;      }</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      <span class="comment">// We&#39;re modifying the pointers in WeakCell and JSFinalizationRegistry</span></div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <span class="comment">// during GC; thus we need to record the slots it writes. The normal write</span></div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      <span class="comment">// barrier is not enough, since it&#39;s disabled before GC.</span></div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;      weak_cell-&gt;Nullify(isolate, gc_notify_updated_slot);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(finalization_registry-&gt;NeedsCleanup());</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(finalization_registry-&gt;scheduled_for_cleanup());</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <span class="comment">// The value of the WeakCell is alive.</span></div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot = weak_cell-&gt;RawField(WeakCell::kTargetOffset);</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(weak_cell, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    }</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160; </div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> unregister_token = weak_cell-&gt;unregister_token();</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, unregister_token)) {</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1Object.html#a3fa7e2f730543261b565d9f664e50d69">Object::CanBeHeldWeakly</a>(unregister_token));</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;      <span class="comment">// The unregister token is dead. Remove any corresponding entries in the</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;      <span class="comment">// key map. Multiple WeakCell with the same token will have all their</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;      <span class="comment">// unregister_token field set to undefined when processing the first</span></div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;      <span class="comment">// WeakCell. Like above, we&#39;re modifying pointers during GC, so record the</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;      <span class="comment">// slots.</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;      Tagged&lt;JSFinalizationRegistry&gt; finalization_registry =</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;          Cast&lt;JSFinalizationRegistry&gt;(weak_cell-&gt;finalization_registry());</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;      finalization_registry-&gt;RemoveUnregisterToken(</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;          unregister_token, isolate,</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;          <a class="code" href="classv8_1_1internal_1_1JSFinalizationRegistry.html#adc9713e6adaaa4c89bf5e814c6c8d9f7a8317217427808991ad5756a7e7528643">JSFinalizationRegistry::kKeepMatchedCellsInRegistry</a>,</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;          gc_notify_updated_slot);</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      <span class="comment">// The unregister_token is alive.</span></div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot = weak_cell-&gt;RawField(WeakCell::kUnregisterTokenOffset);</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(weak_cell, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    }</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  }</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a72b166a99a37b8b2f1c8af535e70f8a4">PostFinalizationRegistryCleanupTaskIfNeeded</a>();</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a1a0c76c9c449dfc8e225855b9417a4ed"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a1a0c76c9c449dfc8e225855b9417a4ed">v8::internal::Heap::EnqueueDirtyJSFinalizationRegistry</a></div><div class="ttdeci">void EnqueueDirtyJSFinalizationRegistry(Tagged&lt; JSFinalizationRegistry &gt; finalization_registry, std::function&lt; void(Tagged&lt; HeapObject &gt; object, ObjectSlot slot, Tagged&lt; Object &gt; target)&gt; gc_notify_updated_slot)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l07050">heap.cc:7050</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a72b166a99a37b8b2f1c8af535e70f8a4"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a72b166a99a37b8b2f1c8af535e70f8a4">v8::internal::Heap::PostFinalizationRegistryCleanupTaskIfNeeded</a></div><div class="ttdeci">void PostFinalizationRegistryCleanupTaskIfNeeded()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l07039">heap.cc:7039</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_abdd7e3821604a14452281640366cc9bb"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">v8::internal::Heap::tracer</a></div><div class="ttdeci">GCTracer * tracer()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00843">heap.h:843</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSFinalizationRegistry_html_adc9713e6adaaa4c89bf5e814c6c8d9f7a8317217427808991ad5756a7e7528643"><div class="ttname"><a href="classv8_1_1internal_1_1JSFinalizationRegistry.html#adc9713e6adaaa4c89bf5e814c6c8d9f7a8317217427808991ad5756a7e7528643">v8::internal::JSFinalizationRegistry::kKeepMatchedCellsInRegistry</a></div><div class="ttdeci">@ kKeepMatchedCellsInRegistry</div><div class="ttdef"><b>Definition:</b> <a href="js-weak-refs_8h_source.html#l00049">js-weak-refs.h:48</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Object_html_a3fa7e2f730543261b565d9f664e50d69"><div class="ttname"><a href="classv8_1_1internal_1_1Object.html#a3fa7e2f730543261b565d9f664e50d69">v8::internal::Object::CanBeHeldWeakly</a></div><div class="ttdeci">requires(std::is_convertible_v&lt; HandleType&lt; T &gt;, DirectHandle&lt; T &gt;&gt;) static inline typename HandleType&lt; Object &gt; static requires(std::is_convertible_v&lt; HandleType&lt; Object &gt;, DirectHandle&lt; Object &gt;&gt;) static typename HandleType&lt; Object &gt; bool CanBeHeldWeakly(Tagged&lt; Object &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="objects-inl_8h_source.html#l02004">objects-inl.h:2004</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a5565074f0fda27fbaa5cace7ea4a4108"><div class="ttname"><a href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a></div><div class="ttdeci">#define TRACE_GC(tracer, scope_id)</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00035">gc-tracer.h:35</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0786c89c1004cb964dc034b138b263fd"><div class="ttname"><a href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">v8::internal::IsHeapObject</a></div><div class="ttdeci">constexpr bool IsHeapObject(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00670">objects.h:670</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_ab368d545a9f0cdd6db20243117cc8944"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">v8::internal::MarkingHelper::IsUnmarkedAndNotAlwaysLive</a></div><div class="ttdeci">static bool IsUnmarkedAndNotAlwaysLive(Heap *heap, MarkingStateT *marking_state, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00340">marking-inl.h:340</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="instance-type-inl_8h_source.html#l00313">v8::internal::InstanceTypeChecker::IsHeapObject()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, and <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811_cgraph.svg" width="447" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a129119a903f3c2057d4a02d0ed5d0e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129119a903f3c2057d4a02d0ed5d0e7e">&#9670;&nbsp;</a></span>ClearNonLiveReferences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearNonLiveReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02922">2922</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                                                  {</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="keywordflow">if</span> (isolate-&gt;OwnsStringTables()) {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;             GCTracer::Scope::MC_CLEAR_STRING_FORWARDING_TABLE);</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="comment">// Clear string forwarding table. Live strings are transitioned to</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="comment">// ThinStrings/ExternalStrings in the cleanup process, if this is a GC</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="comment">// without stack.</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="comment">// Clearing the string forwarding table must happen before clearing the</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="comment">// string table, as entries in the forwarding table can keep internalized</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="comment">// strings alive.</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    FullStringForwardingTableCleaner forwarding_table_cleaner(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() ||</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.transition_strings_during_gc_with_stack) {</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      forwarding_table_cleaner.TransitionStrings();</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      forwarding_table_cleaner.ProcessFullWithStack();</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  }</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  {</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="comment">// Clear Isolate::topmost_script_having_context slot if it&#39;s not alive.</span></div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> maybe_caller_context =</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        isolate-&gt;topmost_script_having_context();</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">if</span> (maybe_caller_context.IsHeapObject() &amp;&amp;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, Cast&lt;HeapObject&gt;(maybe_caller_context))) {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      isolate-&gt;clear_topmost_script_having_context();</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    }</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  }</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160; </div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  std::unique_ptr&lt;JobHandle&gt; clear_string_table_job_handle;</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <span class="keyword">auto</span> job_item = std::make_unique&lt;ClearStringTableJobItem&gt;(isolate);</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <a class="code" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;ClearStringTableJob started&quot;</span>, trace_id,</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                            <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate() &amp;&amp;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        isolate-&gt;shared_struct_type_registry()) {</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="keyword">auto</span> registry_job_item =</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;          std::make_unique&lt;ClearSharedStructTypeRegistryJobItem&gt;(isolate);</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      job-&gt;Add(std::move(registry_job_item));</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    }</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    clear_string_table_job_handle = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>, std::move(job));</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_weak_ref_clearing &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    clear_string_table_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  }</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_EXTERNAL_STRING_TABLE);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    ExternalStringTableCleanerVisitor&lt;ExternalStringTableCleaningMode::kAll&gt;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        external_visitor(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a05dd2031222f6f74fe86e1e31452031b">external_string_table_</a>.<a class="code" href="classv8_1_1internal_1_1Heap_1_1ExternalStringTable.html#ad58f00e9f7ff69db380d0fe5560f3d21">IterateAll</a>(&amp;external_visitor);</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a05dd2031222f6f74fe86e1e31452031b">external_string_table_</a>.<a class="code" href="classv8_1_1internal_1_1Heap_1_1ExternalStringTable.html#a653b979077953650437e44b27c0365d5">CleanUpAll</a>();</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  {</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_WEAK_GLOBAL_HANDLES);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="comment">// We depend on `IterateWeakRootsForPhantomHandles()` being called before</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="comment">// `ProcessOldCodeCandidates()` in order to identify flushed bytecode in the</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="comment">// CPU profiler.</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    isolate-&gt;global_handles()-&gt;IterateWeakRootsForPhantomHandles(</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">IsUnmarkedHeapObject</a>);</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    isolate-&gt;traced_handles()-&gt;ResetDeadNodes(&amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">IsUnmarkedHeapObject</a>);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160; </div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      isolate-&gt;global_safepoint()-&gt;IterateClientIsolates([](Isolate* client) {</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        client-&gt;global_handles()-&gt;IterateWeakRootsForPhantomHandles(</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;            &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">IsUnmarkedSharedHeapObject</a>);</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="comment">// No need to reset traced handles since they are always strong.</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      });</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  }</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_FLUSHABLE_BYTECODE);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <span class="comment">// `ProcessFlushedBaselineCandidates()` must be called after</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="comment">// `ProcessOldCodeCandidates()` so that we correctly set the code object on</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="comment">// the JSFunction after flushing.</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2d909e79588ddfce09dd94ffa673417b">ProcessOldCodeCandidates</a>();</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="preprocessor">#ifndef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <span class="comment">// With leaptiering this is done during sweeping.</span></div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90e4a47ecc544481e5d1d8217817a392">ProcessFlushedBaselineCandidates</a>();</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// !V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  }</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_JS_DISPATCH_TABLE);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    JSDispatchTable* jdt = <a class="code" href="classv8_1_1internal_1_1IsolateGroup.html#a3ca6c5d3f2b884f5866595543d2e0fd7">IsolateGroup::current</a>()-&gt;js_dispatch_table();</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    Tagged&lt;Code&gt; compile_lazy =</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">builtins</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Builtins.html#a2260f6f209a0b9af26f64d5cf774018b">code</a>(Builtin::kCompileLazy);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    jdt-&gt;Sweep(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;js_dispatch_table_space(), isolate-&gt;counters(),</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;               [&amp;](JSDispatchEntry&amp; entry) {</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                 Tagged&lt;Code&gt; code = entry.GetCode();</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;                 if (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                         heap_, marking_state_, code)) {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                   <span class="comment">// Baseline flushing: if the Code object is no longer alive,</span></div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                   <span class="comment">// it must have been flushed and so we replace it with the</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                   <span class="comment">// CompileLazy builtin. Once we use leaptiering on all</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;                   <span class="comment">// platforms, we can probably simplify the other code related</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;                   <span class="comment">// to baseline flushing.</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160; </div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                   <span class="comment">// Currently, we can also see optimized code here. This</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                   <span class="comment">// happens when a FeedbackCell for which no JSFunctions</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                   <span class="comment">// remain references optimized code. However, in that case we</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                   <span class="comment">// probably do want to delete the optimized code, so that is</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                   <span class="comment">// working as intended. It does mean, however, that we cannot</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;                   <span class="comment">// DCHECK here that we only see baseline code.</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;                   DCHECK(code-&gt;kind() == CodeKind::FOR_TESTING ||</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;                          code-&gt;kind() == CodeKind::BASELINE ||</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                          code-&gt;kind() == CodeKind::MAGLEV ||</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                          code-&gt;kind() == CodeKind::TURBOFAN_JS);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;                   entry.SetCodeAndEntrypointPointer(</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                       compile_lazy.ptr(), compile_lazy-&gt;instruction_start());</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                 }</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;               });</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  }</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <span class="comment">// TODO(olivf, 42204201): If we make the bytecode accessible from the dispatch</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <span class="comment">// table this could also be implemented during JSDispatchTable::Sweep.</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_FLUSHED_JS_FUNCTIONS);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af12dba7c5c1e1e2e5c8b30809005605b">ClearFlushedJsFunctions</a>();</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  }</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  {</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_WEAK_LISTS);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="comment">// Process the weak references.</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    MarkCompactWeakObjectRetainer mark_compact_object_retainer(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>,</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;                                                               <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a138e7c8eb416809cbda8fc2fbbc28b17">ProcessAllWeakReferences</a>(&amp;mark_compact_object_retainer);</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  }</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  {</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_MAPS);</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <span class="comment">// ClearFullMapTransitions must be called before weak references are</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="comment">// cleared.</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#acae633babe09a8fa47c416b37fba6410">ClearFullMapTransitions</a>();</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <span class="comment">// Weaken recorded strong DescriptorArray objects. This phase can</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <span class="comment">// potentially move everywhere after `ClearFullMapTransitions()`.</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a67923b4c8c39c7b225af81c264d2ee46">WeakenStrongDescriptorArrays</a>();</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="comment">// Start two parallel jobs: one for clearing trivial weak references and one</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// for filtering out non-trivial weak references that will not be cleared.</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">// Both jobs read the values of weak references and the corresponding</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="comment">// mark bits. They cannot start before the following methods have finished,</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="comment">// because these may change the values of weak references and/or mark more</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="comment">// objects, thus creating data races:</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="comment">//   - ProcessOldCodeCandidates</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <span class="comment">//   - ProcessAllWeakReferences</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="comment">//   - ClearFullMapTransitions</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="comment">//   - WeakenStrongDescriptorArrays</span></div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <span class="comment">// The two jobs could be merged but it&#39;s convenient to keep them separate,</span></div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="comment">// as they are joined at different times. The filtering job must be joined</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <span class="comment">// before proceeding to the actual clearing of non-trivial weak references,</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="comment">// whereas the job for clearing trivial weak references can be joined at the</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="comment">// end of this method.</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  std::unique_ptr&lt;JobHandle&gt; clear_trivial_weakrefs_job_handle;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  {</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="keyword">auto</span> job_item = std::make_unique&lt;ClearTrivialWeakRefJobItem&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <a class="code" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;ClearTrivialWeakRefJob started&quot;</span>, trace_id,</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;                            <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    clear_trivial_weakrefs_job_handle = <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>, std::move(job));</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  }</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  std::unique_ptr&lt;JobHandle&gt; filter_non_trivial_weakrefs_job_handle;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  {</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <span class="keyword">auto</span> job_item = std::make_unique&lt;FilterNonTrivialWeakRefJobItem&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <a class="code" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;FilterNonTrivialWeakRefJob started&quot;</span>, trace_id,</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;                            <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    filter_non_trivial_weakrefs_job_handle =</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(<a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>,</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;                                            std::move(job));</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  }</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_weak_ref_clearing &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    clear_trivial_weakrefs_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    filter_non_trivial_weakrefs_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  }</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160; </div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="preprocessor">#ifdef V8_COMPRESS_POINTERS</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  {</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_EXTERNAL_POINTER_TABLE);</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="comment">// External pointer table sweeping needs to happen before evacuating live</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="comment">// objects as it may perform table compaction, which requires objects to</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="comment">// still be at the same location as during marking.</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="comment">// Note we explicitly do NOT run SweepAndCompact on</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="comment">// read_only_external_pointer_space since these entries are all immortal by</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="comment">// definition.</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    isolate-&gt;external_pointer_table().EvacuateAndSweepAndCompact(</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        isolate-&gt;heap()-&gt;old_external_pointer_space(),</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        isolate-&gt;heap()-&gt;young_external_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    isolate-&gt;heap()-&gt;young_external_pointer_space()-&gt;AssertEmpty();</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <span class="keywordflow">if</span> (isolate-&gt;owns_shareable_data()) {</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      isolate-&gt;shared_external_pointer_table().SweepAndCompact(</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;          isolate-&gt;shared_external_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    isolate-&gt;cpp_heap_pointer_table().SweepAndCompact(</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        isolate-&gt;heap()-&gt;cpp_heap_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  }</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  {</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_TRUSTED_POINTER_TABLE);</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    isolate-&gt;trusted_pointer_table().Sweep(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;trusted_pointer_space(),</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                                           isolate-&gt;counters());</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    <span class="keywordflow">if</span> (isolate-&gt;owns_shareable_data()) {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      isolate-&gt;shared_trusted_pointer_table().Sweep(</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;          isolate-&gt;shared_trusted_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  }</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160; </div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_CODE_POINTER_TABLE);</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <a class="code" href="classv8_1_1internal_1_1IsolateGroup.html#a3ca6c5d3f2b884f5866595543d2e0fd7">IsolateGroup::current</a>()-&gt;code_pointer_table()-&gt;Sweep(</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;code_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  }</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160; </div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;             GCTracer::Scope::MC_SWEEP_WASM_CODE_POINTER_TABLE);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">wasm::GetProcessWideWasmCodePointerTable</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#aee92d168ffa2e3a975289b9e785d10cd">SweepSegments</a>();</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  }</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160; </div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  {</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;             GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_JOIN_FILTER_JOB);</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    filter_non_trivial_weakrefs_job_handle-&gt;Join();</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  }</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_WEAKNESS_HANDLING);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab9f8058df74c7f0a2611b5af24a75f4c">ClearNonTrivialWeakReferences</a>();</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8683f1e2a840f0b54efff9b4a3d30e6a">ClearWeakCollections</a>();</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9de8db3fd9c732c14070a08203daa811">ClearJSWeakRefs</a>();</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  }</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160; </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <a class="code" href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), WeakCodeClearEvent());</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160; </div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  {</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="comment">// This method may be called from within a DisallowDeoptimizations scope.</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <span class="comment">// Temporarily allow deopts for marking code for deopt. This is not doing</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="comment">// the deopt yet and the actual deopts will be bailed out on later if the</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="comment">// current safepoint is not safe for deopts.</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="comment">// TODO(357636610): Reconsider whether the DisallowDeoptimization scopes are</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="comment">// truly needed.</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    AllowDeoptimization allow_deoptimization(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f4d0e2e67b039d30d737212e64b71fa">MarkDependentCodeForDeoptimization</a>();</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;  }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  {</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_JOIN_JOB);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    clear_string_table_job_handle-&gt;Join();</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    clear_trivial_weakrefs_job_handle-&gt;Join();</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160; </div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <span class="comment">// TODO(333906585): Consider adjusting the dchecks that happen on clearing</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <span class="comment">// and move this phase into MarkingBarrier::DeactivateAll.</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae8c724166308f15dfcf3e1a02b7c2819">DeactivateMajorGCInProgressFlag</a>();</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  }</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160; </div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.transition_arrays.IsEmpty());</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.weak_references_trivial.IsEmpty());</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.weak_references_non_trivial.IsEmpty());</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.weak_references_non_trivial_unmarked.IsEmpty());</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.weak_objects_in_code.IsEmpty());</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.js_weak_refs.IsEmpty());</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.weak_cells.IsEmpty());</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.code_flushing_candidates.IsEmpty());</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.flushed_js_functions.IsEmpty());</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="preprocessor">#ifndef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.baseline_flushing_candidates.IsEmpty());</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// !V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1Platform_html_a5a62780772e38f1f00317fce609ec0d4"><div class="ttname"><a href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">v8::Platform::CreateJob</a></div><div class="ttdeci">std::unique_ptr&lt; JobHandle &gt; CreateJob(TaskPriority priority, std::unique_ptr&lt; JobTask &gt; job_task, const SourceLocation &amp;location=SourceLocation::Current())</div><div class="ttdoc">Creates and returns a JobHandle associated with a Job.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l01310">v8-platform.h:1310</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Builtins_html_a2260f6f209a0b9af26f64d5cf774018b"><div class="ttname"><a href="classv8_1_1internal_1_1Builtins.html#a2260f6f209a0b9af26f64d5cf774018b">v8::internal::Builtins::code</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Tagged&lt; Code &gt; code(Builtin builtin)</div><div class="ttdef"><b>Definition:</b> <a href="builtins_8cc_source.html#l00149">builtins.cc:149</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_1_1ExternalStringTable_html_a653b979077953650437e44b27c0365d5"><div class="ttname"><a href="classv8_1_1internal_1_1Heap_1_1ExternalStringTable.html#a653b979077953650437e44b27c0365d5">v8::internal::Heap::ExternalStringTable::CleanUpAll</a></div><div class="ttdeci">void CleanUpAll()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l06908">heap.cc:6908</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_1_1ExternalStringTable_html_ad58f00e9f7ff69db380d0fe5560f3d21"><div class="ttname"><a href="classv8_1_1internal_1_1Heap_1_1ExternalStringTable.html#ad58f00e9f7ff69db380d0fe5560f3d21">v8::internal::Heap::ExternalStringTable::IterateAll</a></div><div class="ttdeci">void IterateAll(RootVisitor *v)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l02981">heap.cc:2981</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a05dd2031222f6f74fe86e1e31452031b"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a05dd2031222f6f74fe86e1e31452031b">v8::internal::Heap::external_string_table_</a></div><div class="ttdeci">ExternalStringTable external_string_table_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02429">heap.h:2429</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a138e7c8eb416809cbda8fc2fbbc28b17"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a138e7c8eb416809cbda8fc2fbbc28b17">v8::internal::Heap::ProcessAllWeakReferences</a></div><div class="ttdeci">void ProcessAllWeakReferences(WeakObjectRetainer *retainer)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03013">heap.cc:3013</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae4625769d6915289a7acd2c41144b9c3"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">v8::internal::Heap::IsGCWithStack</a></div><div class="ttdeci">bool IsGCWithStack() const</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l00531">heap.cc:531</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae8c724166308f15dfcf3e1a02b7c2819"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae8c724166308f15dfcf3e1a02b7c2819">v8::internal::Heap::DeactivateMajorGCInProgressFlag</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void DeactivateMajorGCInProgressFlag()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03756">heap.cc:3756</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IsolateGroup_html_a3ca6c5d3f2b884f5866595543d2e0fd7"><div class="ttname"><a href="classv8_1_1internal_1_1IsolateGroup.html#a3ca6c5d3f2b884f5866595543d2e0fd7">v8::internal::IsolateGroup::current</a></div><div class="ttdeci">static IsolateGroup * current()</div><div class="ttdef"><b>Definition:</b> <a href="isolate-group_8h_source.html#l00181">isolate-group.h:181</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a6cb0edf57f829ea37a9a48a3e6bc007d"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a6cb0edf57f829ea37a9a48a3e6bc007d">v8::internal::Isolate::builtins</a></div><div class="ttdeci">Builtins * builtins()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01458">isolate.h:1458</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a2d909e79588ddfce09dd94ffa673417b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a2d909e79588ddfce09dd94ffa673417b">v8::internal::MarkCompactCollector::ProcessOldCodeCandidates</a></div><div class="ttdeci">void ProcessOldCodeCandidates()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03402">mark-compact.cc:3402</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a45dbe9fb4c2e4b5ebdf19806b2de88fe"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">v8::internal::MarkCompactCollector::IsUnmarkedSharedHeapObject</a></div><div class="ttdeci">static bool IsUnmarkedSharedHeapObject(Heap *heap, FullObjectSlot p)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01841">mark-compact.cc:1841</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a5f4d0e2e67b039d30d737212e64b71fa"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f4d0e2e67b039d30d737212e64b71fa">v8::internal::MarkCompactCollector::MarkDependentCodeForDeoptimization</a></div><div class="ttdeci">void MarkDependentCodeForDeoptimization()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03217">mark-compact.cc:3217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a67923b4c8c39c7b225af81c264d2ee46"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a67923b4c8c39c7b225af81c264d2ee46">v8::internal::MarkCompactCollector::WeakenStrongDescriptorArrays</a></div><div class="ttdeci">void WeakenStrongDescriptorArrays()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03754">mark-compact.cc:3754</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a8683f1e2a840f0b54efff9b4a3d30e6a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a8683f1e2a840f0b54efff9b4a3d30e6a">v8::internal::MarkCompactCollector::ClearWeakCollections</a></div><div class="ttdeci">void ClearWeakCollections()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03809">mark-compact.cc:3809</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a90e4a47ecc544481e5d1d8217817a392"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a90e4a47ecc544481e5d1d8217817a392">v8::internal::MarkCompactCollector::ProcessFlushedBaselineCandidates</a></div><div class="ttdeci">void ProcessFlushedBaselineCandidates()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03552">mark-compact.cc:3552</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a9de8db3fd9c732c14070a08203daa811"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a9de8db3fd9c732c14070a08203daa811">v8::internal::MarkCompactCollector::ClearJSWeakRefs</a></div><div class="ttdeci">void ClearJSWeakRefs()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03938">mark-compact.cc:3938</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa709baf43b9629ff0df85d2700caa88b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">v8::internal::MarkCompactCollector::UseBackgroundThreadsInCycle</a></div><div class="ttdeci">bool UseBackgroundThreadsInCycle() const</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00183">mark-compact.h:183</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab9f8058df74c7f0a2611b5af24a75f4c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab9f8058df74c7f0a2611b5af24a75f4c">v8::internal::MarkCompactCollector::ClearNonTrivialWeakReferences</a></div><div class="ttdeci">void ClearNonTrivialWeakReferences()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03915">mark-compact.cc:3915</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac134d900ab0dbca461ef7cb20318c4ba"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">v8::internal::MarkCompactCollector::IsUnmarkedHeapObject</a></div><div class="ttdeci">static bool IsUnmarkedHeapObject(Heap *heap, FullObjectSlot p)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01832">mark-compact.cc:1832</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_acae633babe09a8fa47c416b37fba6410"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#acae633babe09a8fa47c416b37fba6410">v8::internal::MarkCompactCollector::ClearFullMapTransitions</a></div><div class="ttdeci">void ClearFullMapTransitions()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03580">mark-compact.cc:3580</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ae19c3ac5994087b78c51c64221e1771c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">v8::internal::MarkCompactCollector::heap</a></div><div class="ttdeci">Heap * heap()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00189">mark-compact.h:189</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af12dba7c5c1e1e2e5c8b30809005605b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af12dba7c5c1e1e2e5c8b30809005605b">v8::internal::MarkCompactCollector::ClearFlushedJsFunctions</a></div><div class="ttdeci">void ClearFlushedJsFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03535">mark-compact.cc:3535</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a5eb1d47c492fa1e85e7d7c31dd5cf2bb"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">v8::internal::V8::GetCurrentPlatform</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE v8::Platform * GetCurrentPlatform()</div><div class="ttdef"><b>Definition:</b> <a href="v8_8cc_source.html#l00282">v8.cc:282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_aee92d168ffa2e3a975289b9e785d10cd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#aee92d168ffa2e3a975289b9e785d10cd">v8::internal::wasm::WasmCodePointerTable::SweepSegments</a></div><div class="ttdeci">void SweepSegments(size_t threshold=2 *kEntriesPerSegment)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-pointer-table_8cc_source.html#l00057">wasm-code-pointer-table.cc:57</a></div></div>
<div class="ttc" id="acode-events_8h_html_ad6ec92ea4475dc9e407f0963df52df64"><div class="ttname"><a href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a></div><div class="ttdeci">#define PROFILE(the_isolate, Call)</div><div class="ttdef"><b>Definition:</b> <a href="code-events_8h_source.html#l00059">code-events.h:59</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a17375713518e1833362b491ef9c163cc"><div class="ttname"><a href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_NOTE_WITH_FLOW(note, bind_id, flow_flags)</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00098">gc-tracer.h:98</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adbb89ce490c56aae60c8221f47b9f088"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
<div class="ttc" id="anamespacev8_html_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209"><div class="ttname"><a href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::TaskPriority::kUserBlocking</a></div><div class="ttdeci">@ kUserBlocking</div><div class="ttdoc">User blocking tasks are highest priority tasks that block the execution thread (e....</div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_af086bb0f8b985835cc9f35cfe856155f"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a></div><div class="ttdeci">#define TRACE_EVENT_FLAG_FLOW_OUT</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00830">trace-event-no-perfetto.h:830</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate-inl_8h_source.html#l00063">v8::internal::Isolate::clear_topmost_script_having_context()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="v8-platform_8h_source.html#l01310">v8::Platform::CreateJob()</a>, <a class="el" href="debug-interface_8cc_source.html#l00800">v8::debug::GetCurrentPlatform()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01431">v8::internal::Isolate::global_handles()</a>, <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="tagged-impl_8h_source.html#l00122">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::IsHeapObject()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>, <a class="el" href="global-handles_8cc_source.html#l00712">v8::internal::GlobalHandles::IterateWeakRootsForPhantomHandles()</a>, <a class="el" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::kUserBlocking</a>, <a class="el" href="execution_2isolate_8h_source.html#l02361">v8::internal::Isolate::OwnsStringTables()</a>, <a class="el" href="mark-compact_8cc_source.html#l02683">v8::internal::FullStringForwardingTableCleaner::ProcessFullWithStack()</a>, <a class="el" href="traced-handles_8cc_source.html#l00320">v8::internal::TracedHandles::ResetDeadNodes()</a>, <a class="el" href="execution_2isolate_8h_source.html#l00806">v8::internal::Isolate::shared_struct_type_registry()</a>, <a class="el" href="execution_2isolate_8h_source.html#l00823">v8::internal::Isolate::topmost_script_having_context()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00830">TRACE_EVENT_FLAG_FLOW_OUT</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="gc-tracer_8h_source.html#l00098">TRACE_GC_NOTE_WITH_FLOW</a>, <a class="el" href="execution_2isolate_8h_source.html#l01433">v8::internal::Isolate::traced_handles()</a>, <a class="el" href="mark-compact_8cc_source.html#l02664">v8::internal::FullStringForwardingTableCleaner::TransitionStrings()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab9f8058df74c7f0a2611b5af24a75f4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f8058df74c7f0a2611b5af24a75f4c">&#9670;&nbsp;</a></span>ClearNonTrivialWeakReferences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearNonTrivialWeakReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03915">3915</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                                                         {</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;           GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_NON_TRIVIAL);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ace58b122ce17abc7ea987b863574310a">HeapObjectAndSlot</a> slot;</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code" href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">ClearedValue</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_references_non_trivial_unmarked_local.Pop(</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      &amp;slot)) {</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="comment">// The slot may not have been overwritten since it was filtered, so we can</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    <span class="comment">// directly read its value.</span></div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = (*slot.slot).GetHeapObjectAssumeWeak();</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!IsWeakCell(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a91ac1680dc7f626bd8675e14ac660240">HeapLayout::InReadOnlySpace</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.black_allocated_pages,</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;                   !<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#ac9879fed71642d70a0509695654ff874">HeapLayout::InBlackAllocatedPage</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#a13d4cff573da17af5b1532566911dfe9">IsMarked</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkingVisitorBase.html#a8ee1d72c4c9542c38144e805f83299f6">MainMarkingVisitor::IsTrivialWeakReferenceValue</a>(slot.heap_object,</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;                                                            <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2f6c6946b314cbd396fedd9a8d3b1887">SpecialClearMapSlot</a>(slot.heap_object, Cast&lt;Map&gt;(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>), slot.slot)) {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;      slot.slot.store(cleared_weak_ref);</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    }</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;  }</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a91ac1680dc7f626bd8675e14ac660240"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a91ac1680dc7f626bd8675e14ac660240">v8::internal::HeapLayout::InReadOnlySpace</a></div><div class="ttdeci">static bool InReadOnlySpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-layout-inl_8h_source.html#l00020">heap-layout-inl.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_ac9879fed71642d70a0509695654ff874"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#ac9879fed71642d70a0509695654ff874">v8::internal::HeapLayout::InBlackAllocatedPage</a></div><div class="ttdeci">static bool InBlackAllocatedPage(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-layout-inl_8h_source.html#l00089">heap-layout-inl.h:89</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a2f6c6946b314cbd396fedd9a8d3b1887"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a2f6c6946b314cbd396fedd9a8d3b1887">v8::internal::MarkCompactCollector::SpecialClearMapSlot</a></div><div class="ttdeci">bool SpecialClearMapSlot(Tagged&lt; HeapObject &gt; host, Tagged&lt; Map &gt; dead_target, HeapObjectSlot slot)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03269">mark-compact.cc:3269</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingVisitorBase_html_a8ee1d72c4c9542c38144e805f83299f6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingVisitorBase.html#a8ee1d72c4c9542c38144e805f83299f6">v8::internal::MarkingVisitorBase::IsTrivialWeakReferenceValue</a></div><div class="ttdeci">static constexpr bool IsTrivialWeakReferenceValue(Tagged&lt; HeapObject &gt; host, Tagged&lt; HeapObject &gt; heap_object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-visitor-inl_8h_source.html#l00090">marking-visitor-inl.h:90</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa2b1520107e1a7067d5db8226721c882"><div class="ttname"><a href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">v8::internal::ClearedValue</a></div><div class="ttdeci">Tagged&lt; ClearedWeakValue &gt; ClearedValue(PtrComprCageBase cage_base)</div><div class="ttdef"><b>Definition:</b> <a href="maybe-object-inl_8h_source.html#l00020">maybe-object-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ace58b122ce17abc7ea987b863574310a"><div class="ttname"><a href="namespacev8_1_1internal.html#ace58b122ce17abc7ea987b863574310a">v8::internal::HeapObjectAndSlot</a></div><div class="ttdeci">detail::HeapObjectAndSlotPOD&lt; HeapObjectSlot &gt; HeapObjectAndSlot</div><div class="ttdef"><b>Definition:</b> <a href="weak-object-worklists_8h_source.html#l00033">weak-object-worklists.h:33</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00492">logging.h:492</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="maybe-object-inl_8h_source.html#l00020">v8::internal::ClearedValue()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00028">v8::internal::detail::HeapObjectAndSlotPOD&lt; TSlotType &gt;::heap_object</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00029">v8::internal::detail::HeapObjectAndSlotPOD&lt; TSlotType &gt;::slot</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a112747cd949c517326fef486c68a39f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112747cd949c517326fef486c68a39f6">&#9670;&nbsp;</a></span>ClearPotentialSimpleMapTransition() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearPotentialSimpleMapTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>dead_target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03237">3237</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                             {</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(dead_target));</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> potential_parent = dead_target-&gt;constructor_or_back_pointer();</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <span class="keywordflow">if</span> (IsMap(potential_parent)) {</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    Tagged&lt;Map&gt; parent = Cast&lt;Map&gt;(potential_parent);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#af2248a427f8ff8f81e68a2a87758e145">DisallowGarbageCollection</a> no_gc_obviously;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                                            parent) &amp;&amp;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        TransitionsAccessor(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), parent)</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            .HasSimpleTransitionTo(dead_target)) {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a112747cd949c517326fef486c68a39f6">ClearPotentialSimpleMapTransition</a>(parent, dead_target);</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    }</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  }</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a112747cd949c517326fef486c68a39f6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a112747cd949c517326fef486c68a39f6">v8::internal::MarkCompactCollector::ClearPotentialSimpleMapTransition</a></div><div class="ttdeci">void ClearPotentialSimpleMapTransition(Tagged&lt; Map &gt; dead_target)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03237">mark-compact.cc:3237</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingStateBase_html_aaf1662a3d84f030521524b6bc605785e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">v8::internal::MarkingStateBase::IsUnmarked</a></div><div class="ttdeci">bool IsUnmarked(const Tagged&lt; HeapObject &gt; obj) const</div><div class="ttdef"><b>Definition:</b> <a href="marking-state-inl_8h_source.html#l00024">marking-state-inl.h:24</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af2248a427f8ff8f81e68a2a87758e145"><div class="ttname"><a href="namespacev8_1_1internal.html#af2248a427f8ff8f81e68a2a87758e145">v8::internal::DisallowGarbageCollection</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; false, SAFEPOINTS_ASSERT, HEAP_ALLOCATION_ASSERT &gt; DisallowGarbageCollection</div><div class="ttdef"><b>Definition:</b> <a href="assert-scope_8h_source.html#l00239">assert-scope.h:241</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="transitions_8cc_source.html#l00029">v8::internal::TransitionsAccessor::HasSimpleTransitionTo()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6_cgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a03e68bee93758940e2d106f7819cce9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e68bee93758940e2d106f7819cce9a">&#9670;&nbsp;</a></span>ClearPotentialSimpleMapTransition() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearPotentialSimpleMapTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>dead_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03253">3253</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                                              {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!map-&gt;is_prototype_map());</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!dead_target-&gt;is_prototype_map());</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(map-&gt;raw_transitions(), <a class="code" href="namespacev8_1_1internal.html#a96a98d1219c08bac1c5c91ba9dacd1d4">MakeWeak</a>(dead_target));</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  <span class="comment">// Take ownership of the descriptor array.</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;  <span class="keywordtype">int</span> number_of_own_descriptors = map-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> descriptors =</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      map-&gt;instance_descriptors(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  <span class="keywordflow">if</span> (descriptors == dead_target-&gt;instance_descriptors(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()) &amp;&amp;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      number_of_own_descriptors &gt; 0) {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a71e8a1a84a4a8174d41df38622577ddb">TrimDescriptorArray</a>(map, descriptors);</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(descriptors-&gt;number_of_descriptors() == number_of_own_descriptors);</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  }</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_html_a96a98d1219c08bac1c5c91ba9dacd1d4"><div class="ttname"><a href="namespacev8_1_1internal.html#a96a98d1219c08bac1c5c91ba9dacd1d4">v8::internal::MakeWeak</a></div><div class="ttdeci">Tagged&lt; MaybeWeak&lt; T &gt; &gt; MakeWeak(Tagged&lt; T &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="tagged_8h_source.html#l00893">tagged.h:893</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, and <a class="el" href="api_8cc_source.html#l00653">v8::api_internal::MakeWeak()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a03e68bee93758940e2d106f7819cce9a_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4c690a1124b34af7925738d838255de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c690a1124b34af7925738d838255de0">&#9670;&nbsp;</a></span>ClearTrivialWeakReferences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearTrivialWeakReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03875">3875</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;                                                      {</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code" href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">ClearedValue</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  ClearWeakReferences&lt;HeapObjectAndSlot, MaybeObjectSlot&gt;(</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_references_trivial_local, cleared_weak_ref);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="maybe-object-inl_8h_source.html#l00020">v8::internal::ClearedValue()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a4c690a1124b34af7925738d838255de0_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a94a20caf915889d8ba10e3bd9bbc3778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94a20caf915889d8ba10e3bd9bbc3778">&#9670;&nbsp;</a></span>ClearTrustedWeakReferences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearTrustedWeakReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03881">3881</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;                                                      {</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code" href="namespacev8_1_1internal.html#aaae66fce459a82ed75641e4543500b4d">ClearedTrustedValue</a>();</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  ClearWeakReferences&lt;TrustedObjectAndSlot, ProtectedMaybeObjectSlot&gt;(</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_references_trusted_local, cleared_weak_ref);</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_html_aaae66fce459a82ed75641e4543500b4d"><div class="ttname"><a href="namespacev8_1_1internal.html#aaae66fce459a82ed75641e4543500b4d">v8::internal::ClearedTrustedValue</a></div><div class="ttdeci">Tagged&lt; ClearedWeakValue &gt; ClearedTrustedValue()</div><div class="ttdef"><b>Definition:</b> <a href="maybe-object-inl_8h_source.html#l00036">maybe-object-inl.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="maybe-object-inl_8h_source.html#l00036">v8::internal::ClearedTrustedValue()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a94a20caf915889d8ba10e3bd9bbc3778_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a8683f1e2a840f0b54efff9b4a3d30e6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8683f1e2a840f0b54efff9b4a3d30e6a">&#9670;&nbsp;</a></span>ClearWeakCollections()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearWeakCollections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03809">3809</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;                                                {</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_CLEAR_WEAK_COLLECTIONS);</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  Tagged&lt;EphemeronHashTable&gt; table;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;ephemeron_hash_tables_local.Pop(&amp;table)) {</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keywordflow">for</span> (InternalIndex <a class="code" href="namespacev8_1_1internal.html">i</a> : table-&gt;IterateEntries()) {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a> = Cast&lt;HeapObject&gt;(table-&gt;KeyAt(<a class="code" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;<span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = table-&gt;ValueAt(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object = Cast&lt;HeapObject&gt;(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160; </div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;          <a class="code" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;                            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>),</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;                        <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, heap_object));</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;        }</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;      }</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;              <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>)) {</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;        table-&gt;RemoveEntry(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;      }</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    }</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  }</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <span class="keyword">auto</span>* table_map = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aa9f43334d731d1a0692665bbb1920242">ephemeron_remembered_set</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1EphemeronRememberedSet.html#a8d68560e40252101787ea8c9f9316c89">tables</a>();</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = table_map-&gt;begin(); it != table_map-&gt;end();) {</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, it-&gt;first)) {</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      it = table_map-&gt;erase(it);</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      ++it;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  }</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronRememberedSet_html_a8d68560e40252101787ea8c9f9316c89"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronRememberedSet.html#a8d68560e40252101787ea8c9f9316c89">v8::internal::EphemeronRememberedSet::tables</a></div><div class="ttdeci">TableMap * tables()</div><div class="ttdef"><b>Definition:</b> <a href="ephemeron-remembered-set_8h_source.html#l00037">ephemeron-remembered-set.h:37</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aa9f43334d731d1a0692665bbb1920242"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aa9f43334d731d1a0692665bbb1920242">v8::internal::Heap::ephemeron_remembered_set</a></div><div class="ttdeci">EphemeronRememberedSet * ephemeron_remembered_set()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00404">heap.h:404</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>, <a class="el" href="instance-type-inl_8h_source.html#l00313">v8::internal::InstanceTypeChecker::IsHeapObject()</a>, <a class="el" href="external-reference_8cc_source.html#l01408">v8::internal::key</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a_cgraph.svg" width="479" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6c5024e51f8944c9ad34e7f962490285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c5024e51f8944c9ad34e7f962490285">&#9670;&nbsp;</a></span>ClearWeakReferences()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TObjectAndSlot , typename TMaybeSlot &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ClearWeakReferences </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1WeakObjects.html#a7f664d7faebac274df585c5063ead655">WeakObjects::WeakObjectWorklist</a>&lt; TObjectAndSlot &gt;::<a class="el" href="classv8_1_1Local.html">Local</a> &amp;&#160;</td>
          <td class="paramname"><em>worklist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="namespacev8_1_1internal.html#ad79ecfc717a11290d821ed1f220434f6">HeapObjectReference</a> &gt;&#160;</td>
          <td class="paramname"><em>cleared_weak_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03846">3846</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;                                                  {</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  TObjectAndSlot slot;</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  <span class="keywordflow">while</span> (worklist.Pop(&amp;slot)) {</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    <span class="comment">// The slot could have been overwritten, so we have to treat it</span></div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <span class="comment">// as [Protected]MaybeObjectSlot.</span></div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    TMaybeSlot location(slot.slot);</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    <span class="keywordflow">if</span> (location.load().GetHeapObjectIfWeak(&amp;<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!IsWeakCell(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;      <span class="comment">// Values in RO space have already been filtered, but a non-RO value may</span></div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <span class="comment">// have been overwritten by a RO value since marking.</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                                              <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;        <span class="comment">// The value of the weak reference is alive.</span></div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(slot.heap_object, slot.slot, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkingVisitorBase.html#a8ee1d72c4c9542c38144e805f83299f6">MainMarkingVisitor::IsTrivialWeakReferenceValue</a>(slot.heap_object,</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                                                               <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        <span class="comment">// The value of the weak reference is non-live.</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        <span class="comment">// This is a non-atomic store, which is fine as long as we only have a</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        <span class="comment">// single clearing job.</span></div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        location.store(cleared_weak_ref);</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;      }</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    }</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  }</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="worklist_8h_source.html#l00402">heap::base::Worklist&lt; EntryType, MinSegmentSize &gt;::Local::Pop()</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a6c5024e51f8944c9ad34e7f962490285_cgraph.svg" width="444" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a00b443b2076c56d087e7c0decad77074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b443b2076c56d087e7c0decad77074">&#9670;&nbsp;</a></span>code_flush_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet</a>&lt;<a class="el" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925b">CodeFlushMode</a>&gt; v8::internal::MarkCompactCollector::code_flush_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00170">170</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                     {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a25ccbff2b71c818ffeab6970aad6510f">code_flush_mode_</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a25ccbff2b71c818ffeab6970aad6510f"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a25ccbff2b71c818ffeab6970aad6510f">v8::internal::MarkCompactCollector::code_flush_mode_</a></div><div class="ttdeci">base::EnumSet&lt; CodeFlushMode &gt; code_flush_mode_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00469">mark-compact.h:469</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00469">code_flush_mode_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, and <a class="el" href="concurrent-marking_8cc_source.html#l00647">v8::internal::ConcurrentMarking::TryScheduleJob()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a3cf7f62c683dbc4b89a6f71b7d60cc37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf7f62c683dbc4b89a6f71b7d60cc37">&#9670;&nbsp;</a></span>CollectEvacuationCandidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::CollectEvacuationCandidates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00609">609</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                                                        {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a> || <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a> ||</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">SHARED_SPACE</a> ||</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">TRUSTED_SPACE</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">int</span> number_of_pages = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;CountTotalPages();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordtype">size_t</span> area_size = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;AreaSize();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> in_standard_path =</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      !(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.manual_evacuation_candidates_selection ||</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction ||</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Those variables will only be initialized if |in_standard_path|, and are not</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// used otherwise.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordtype">size_t</span> max_evacuated_bytes;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordtype">int</span> target_fragmentation_percent;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordtype">size_t</span> free_bytes_threshold;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordflow">if</span> (in_standard_path) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// We use two conditions to decide whether a page qualifies as an evacuation</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// candidate, or not:</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// * Target fragmentation: How fragmented is a page, i.e., how is the ratio</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">//   between live bytes and capacity of this page (= area).</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// * Evacuation quota: A global quota determining how much bytes should be</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">//   compacted.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5baec12608267c330286a39281ddf7af">ComputeEvacuationHeuristics</a>(area_size, &amp;target_fragmentation_percent,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                &amp;max_evacuated_bytes);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    free_bytes_threshold = target_fragmentation_percent * (area_size / 100);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// Pairs of (live_bytes_in_page, page).</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keyword">using</span> LiveBytesPagePair = std::pair&lt;size_t, PageMetadata*&gt;;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  std::vector&lt;LiveBytesPagePair&gt; pages;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  pages.reserve(number_of_pages);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>());</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">for</span> (PageMetadata* p : *<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;NeverEvacuate() || !chunk-&gt;CanAllocate()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;IsPinned()) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!chunk-&gt;IsFlagSet(</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// Invariant: Evacuation candidates are just created when marking is</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// started. This means that sweeping has finished. Furthermore, at the end</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// of a GC all evacuation candidates are cleared and their slot buffers are</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// released.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!chunk-&gt;IsEvacuationCandidate());</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a>(p-&gt;slot_set&lt;<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">OLD_TO_OLD</a>&gt;());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a>(p-&gt;typed_slot_set&lt;<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">OLD_TO_OLD</a>&gt;());</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(p-&gt;area_size() == area_size);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (in_standard_path) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="comment">// Only the pages with at more than |free_bytes_threshold| free bytes are</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="comment">// considered for evacuation.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">if</span> (area_size - p-&gt;allocated_bytes() &gt;= free_bytes_threshold) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        pages.push_back(std::make_pair(p-&gt;allocated_bytes(), p));</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      pages.push_back(std::make_pair(p-&gt;allocated_bytes(), p));</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordtype">int</span> candidate_count = 0;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordtype">size_t</span> total_live_bytes = 0;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> reduce_memory = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.manual_evacuation_candidates_selection) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; pages.size(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      PageMetadata* p = pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].second;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;              <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>)) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        candidate_count++;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        total_live_bytes += pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].first;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        chunk-&gt;ClearFlagSlow(</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(p);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">double</span> fraction = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code" href="classv8_1_1base_1_1RandomNumberGenerator.html#a3cb661fd70f4322d36792f98acd6ca7e">NextDouble</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">size_t</span> pages_to_mark_count =</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(fraction * (pages.size() + 1));</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">for</span> (uint64_t <a class="code" href="namespacev8_1_1internal.html">i</a> : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code" href="classv8_1_1base_1_1RandomNumberGenerator.html#a4090ec844e0f1cc4150db68cf69c6c7d">NextSample</a>(</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;             pages.size(), pages_to_mark_count)) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      candidate_count++;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      total_live_bytes += pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].first;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(pages[<a class="code" href="namespacev8_1_1internal.html">i</a>].second);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; pages.size(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      PageMetadata* p = pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].second;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html">i</a> % 2 == 0) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        candidate_count++;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        total_live_bytes += pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].first;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(p);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// The following approach determines the pages that should be evacuated.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// Sort pages from the most free to the least free, then select</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// the first n pages for evacuation such that:</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">// - the total size of evacuated objects does not exceed the specified</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// limit.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// - fragmentation of (n+1)-th page does not exceed the specified limit.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="namespacev8_1_1base.html#ae8575343c68d7ad91cf7aaf24cd6643f">std::sort</a>(pages.begin(), pages.end(),</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;              [](<span class="keyword">const</span> LiveBytesPagePair&amp; a, <span class="keyword">const</span> LiveBytesPagePair&amp; b) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                return a.first &lt; b.first;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;              });</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; pages.size(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordtype">size_t</span> live_bytes = pages[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>].first;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(area_size, live_bytes);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc ||</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;          ((total_live_bytes + live_bytes) &lt;= max_evacuated_bytes)) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        candidate_count++;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        total_live_bytes += live_bytes;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation_verbose) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                     <span class="stringliteral">&quot;compaction-selection-page: space=%s free_bytes_page=%zu &quot;</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                     <span class="stringliteral">&quot;fragmentation_limit_kb=%zu &quot;</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                     <span class="stringliteral">&quot;fragmentation_limit_percent=%d sum_compaction_kb=%zu &quot;</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                     <span class="stringliteral">&quot;compaction_limit_kb=%zu\n&quot;</span>,</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                     <a class="code" href="namespacev8_1_1internal.html#a5571bf7a3fbdb542683ee282eefb035c">ToString</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity()), (area_size - live_bytes) / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                     free_bytes_threshold / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>, target_fragmentation_percent,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                     total_live_bytes / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>, max_evacuated_bytes / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// How many pages we will allocated for the evacuated objects</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// in the worst case: ceil(total_live_bytes / area_size)</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordtype">int</span> estimated_new_pages =</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((total_live_bytes + area_size - 1) / area_size);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(estimated_new_pages, candidate_count);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordtype">int</span> estimated_released_pages = candidate_count - estimated_new_pages;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// Avoid (compact -&gt; expand) cycles.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> ((estimated_released_pages == 0) &amp;&amp; !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      candidate_count = 0;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; candidate_count; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(pages[<a class="code" href="namespacev8_1_1internal.html">i</a>].second);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                 <span class="stringliteral">&quot;compaction-selection: space=%s reduce_memory=%d pages=%d &quot;</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                 <span class="stringliteral">&quot;total_live_bytes=%zu\n&quot;</span>,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                 <a class="code" href="namespacev8_1_1internal.html#a5571bf7a3fbdb542683ee282eefb035c">ToString</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity()), reduce_memory, candidate_count,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                 total_live_bytes / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1base_1_1RandomNumberGenerator_html_a3cb661fd70f4322d36792f98acd6ca7e"><div class="ttname"><a href="classv8_1_1base_1_1RandomNumberGenerator.html#a3cb661fd70f4322d36792f98acd6ca7e">v8::base::RandomNumberGenerator::NextDouble</a></div><div class="ttdeci">double NextDouble() V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="random-number-generator_8cc_source.html#l00114">random-number-generator.cc:114</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1RandomNumberGenerator_html_a4090ec844e0f1cc4150db68cf69c6c7d"><div class="ttname"><a href="classv8_1_1base_1_1RandomNumberGenerator.html#a4090ec844e0f1cc4150db68cf69c6c7d">v8::base::RandomNumberGenerator::NextSample</a></div><div class="ttdeci">std::vector&lt; uint64_t &gt; NextSample(uint64_t max, size_t n) V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="random-number-generator_8cc_source.html#l00144">random-number-generator.cc:144</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_afd52b490b8d03599fbf5510d6f54b117"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">v8::internal::Heap::ShouldReduceMemory</a></div><div class="ttdeci">bool ShouldReduceMemory() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01671">heap.h:1671</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_af9cf39c5ddba566eeed46a1f5064a561"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">v8::internal::Isolate::fuzzer_rng</a></div><div class="ttdeci">base::RandomNumberGenerator * fuzzer_rng()</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l06431">isolate.cc:6431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a325b77c4c0ed550f8eb2c317f8d5ebd3"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">v8::internal::MarkCompactCollector::AddEvacuationCandidate</a></div><div class="ttdeci">void AddEvacuationCandidate(PageMetadata *p)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00307">mark-compact.cc:307</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a5baec12608267c330286a39281ddf7af"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a5baec12608267c330286a39281ddf7af">v8::internal::MarkCompactCollector::ComputeEvacuationHeuristics</a></div><div class="ttdeci">void ComputeEvacuationHeuristics(size_t area_size, int *target_fragmentation_percent, size_t *max_evacuated_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00561">mark-compact.cc:561</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">v8::internal::MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a></div><div class="ttdeci">@ FORCE_EVACUATION_CANDIDATE_FOR_TESTING</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00104">memory-chunk.h:104</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a01bad92ed163322fda20e965bec9e19e"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">v8::internal::Sweeper::sweeping_in_progress</a></div><div class="ttdeci">bool sweeping_in_progress() const</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8h_source.html#l00114">sweeper.h:114</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a087fd0337c14e102a4a2abccd41a39ad"><div class="ttname"><a href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available space</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l02215">flag-definitions.h:2213</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ae8575343c68d7ad91cf7aaf24cd6643f"><div class="ttname"><a href="namespacev8_1_1base.html#ae8575343c68d7ad91cf7aaf24cd6643f">v8::base::sort</a></div><div class="ttdeci">void sort(C &amp;container)</div><div class="ttdef"><b>Definition:</b> <a href="container-utils_8h_source.html#l00111">container-utils.h:111</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5571bf7a3fbdb542683ee282eefb035c"><div class="ttname"><a href="namespacev8_1_1internal.html#a5571bf7a3fbdb542683ee282eefb035c">v8::internal::ToString</a></div><div class="ttdeci">constexpr const char * ToString(DeoptimizeKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00872">globals.h:872</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a93b2e7c72fa0878021b495b6f3cec820"><div class="ttname"><a href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">v8::internal::KB</a></div><div class="ttdeci">constexpr int KB</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00055">v8-internal.h:55</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">v8::internal::CODE_SPACE</a></div><div class="ttdeci">@ CODE_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01303">globals.h:1303</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">v8::internal::SHARED_SPACE</a></div><div class="ttdeci">@ SHARED_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01304">globals.h:1304</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">v8::internal::TRUSTED_SPACE</a></div><div class="ttdeci">@ TRUSTED_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01305">globals.h:1305</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">v8::internal::OLD_SPACE</a></div><div class="ttdeci">@ OLD_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01302">globals.h:1302</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">v8::internal::OLD_TO_OLD</a></div><div class="ttdeci">@ OLD_TO_OLD</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00033">mutable-page-metadata.h:33</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a7bf1ad59490562f507223cd6ca2cc6fa"><div class="ttname"><a href="src_2base_2logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a></div><div class="ttdeci">#define CHECK_NULL(val)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8cc_source.html#l00307">AddEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00287">v8::internal::MemoryChunk::CanAllocate()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="memory-chunk_8cc_source.html#l00189">v8::internal::MemoryChunk::ClearFlagSlow()</a>, <a class="el" href="common_2globals_8h_source.html#l01303">v8::internal::CODE_SPACE</a>, <a class="el" href="mark-compact_8cc_source.html#l00561">ComputeEvacuationHeuristics()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00487">DCHECK_GE</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00489">DCHECK_LE</a>, <a class="el" href="memory-chunk_8h_source.html#l00104">v8::internal::MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>, <a class="el" href="isolate_8cc_source.html#l06431">v8::internal::Isolate::fuzzer_rng()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="json-stringifier_8cc_source.html#l00548">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00319">v8::internal::MemoryChunk::IsPinned()</a>, <a class="el" href="v8-internal_8h_source.html#l00055">v8::internal::KB</a>, <a class="el" href="memory-chunk_8h_source.html#l00284">v8::internal::MemoryChunk::NeverEvacuate()</a>, <a class="el" href="random-number-generator_8cc_source.html#l00114">v8::base::RandomNumberGenerator::NextDouble()</a>, <a class="el" href="random-number-generator_8cc_source.html#l00144">v8::base::RandomNumberGenerator::NextSample()</a>, <a class="el" href="common_2globals_8h_source.html#l01302">v8::internal::OLD_SPACE</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00033">v8::internal::OLD_TO_OLD</a>, <a class="el" href="utils_2utils_8cc_source.html#l00061">v8::internal::PrintIsolate()</a>, <a class="el" href="common_2globals_8h_source.html#l01304">v8::internal::SHARED_SPACE</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01671">v8::internal::Heap::ShouldReduceMemory()</a>, <a class="el" href="container-utils_8h_source.html#l00111">v8::base::sort()</a>, <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>, <a class="el" href="mark-compact_8h_source.html#l00456">sweeper_</a>, <a class="el" href="sweeper_8h_source.html#l00114">v8::internal::Sweeper::sweeping_in_progress()</a>, <a class="el" href="common_2globals_8h_source.html#l00872">v8::internal::ToString()</a>, <a class="el" href="common_2globals_8h_source.html#l01305">v8::internal::TRUSTED_SPACE</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00331">StartCompaction()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a82db441b928fc8abc959d3d4c7c18906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82db441b928fc8abc959d3d4c7c18906">&#9670;&nbsp;</a></span>CollectGarbage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::CollectGarbage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00488">488</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                          {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Make sure that Prepare() has been called. The individual steps below will</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// update the state as they proceed.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(state_ == PREPARE_GC);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">MaybeEnableBackgroundThreadsInCycle</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">CallOrigin::kAtomicGC</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a16935f51d75fd467f80fae7c7d960e5e">MarkLiveObjects</a>();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    cpp_heap-&gt;ProcessCrossThreadWeakness();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// This will walk dead object graphs and so requires that all references are</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// still intact.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adf2bc94ab3ef1e83c8e7f8df722f1896">RecordObjectStats</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a129119a903f3c2057d4a02d0ed5d0e7e">ClearNonLiveReferences</a>();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">VerifyMarking</a>();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    cpp_heap-&gt;FinishMarkingAndProcessWeakness();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abee2b61d93cc55561134df8f2ebb3401">memory_measurement</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryMeasurement.html#a2b16af443017f8c53573e169987d6d93">FinishProcessing</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">native_context_stats_</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a10a5a2e6ceb32614eacab77deaa104fe">Sweep</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa553d7a0b23e5ce515c7dd3289ae84fa">Evacuate</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa1bd78a56ac02e2696341af641334a6b">Finish</a>();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_a8298280d36073a63d9787cd1167aaefa"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">v8::internal::CppHeap::From</a></div><div class="ttdeci">static CppHeap * From(v8::CppHeap *heap)</div><div class="ttdef"><b>Definition:</b> <a href="cpp-heap_8h_source.html#l00103">cpp-heap.h:103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a88c7a4389455ee71c26b5855a6a6ab82"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">v8::internal::Heap::cpp_heap_</a></div><div class="ttdeci">v8::CppHeap * cpp_heap_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02370">heap.h:2370</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_abee2b61d93cc55561134df8f2ebb3401"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#abee2b61d93cc55561134df8f2ebb3401">v8::internal::Heap::memory_measurement</a></div><div class="ttdeci">MemoryMeasurement * memory_measurement()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02115">heap.h:2115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a10a5a2e6ceb32614eacab77deaa104fe"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a10a5a2e6ceb32614eacab77deaa104fe">v8::internal::MarkCompactCollector::Sweep</a></div><div class="ttdeci">void Sweep()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06162">mark-compact.cc:6162</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a129119a903f3c2057d4a02d0ed5d0e7e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a129119a903f3c2057d4a02d0ed5d0e7e">v8::internal::MarkCompactCollector::ClearNonLiveReferences</a></div><div class="ttdeci">void ClearNonLiveReferences()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02922">mark-compact.cc:2922</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a16935f51d75fd467f80fae7c7d960e5e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a16935f51d75fd467f80fae7c7d960e5e">v8::internal::MarkCompactCollector::MarkLiveObjects</a></div><div class="ttdeci">void MarkLiveObjects()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02477">mark-compact.cc:2477</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a17e6e45984b6757652c6611c22c17cff"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">v8::internal::MarkCompactCollector::VerifyMarking</a></div><div class="ttdeci">void VerifyMarking()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00814">mark-compact.cc:814</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">v8::internal::MarkCompactCollector::CallOrigin::kAtomicGC</a></div><div class="ttdeci">@ kAtomicGC</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a927eebc2a596cab74de9a052a849d0ea"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">v8::internal::MarkCompactCollector::MaybeEnableBackgroundThreadsInCycle</a></div><div class="ttdeci">void MaybeEnableBackgroundThreadsInCycle(CallOrigin origin)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00466">mark-compact.cc:466</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa1bd78a56ac02e2696341af641334a6b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa1bd78a56ac02e2696341af641334a6b">v8::internal::MarkCompactCollector::Finish</a></div><div class="ttdeci">void Finish()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00849">mark-compact.cc:849</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa553d7a0b23e5ce515c7dd3289ae84fa"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa553d7a0b23e5ce515c7dd3289ae84fa">v8::internal::MarkCompactCollector::Evacuate</a></div><div class="ttdeci">void Evacuate()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05054">mark-compact.cc:5054</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_adebad6550fadebad8005f173c10359c6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">v8::internal::MarkCompactCollector::native_context_stats_</a></div><div class="ttdeci">NativeContextStats native_context_stats_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00432">mark-compact.h:432</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_adf2bc94ab3ef1e83c8e7f8df722f1896"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#adf2bc94ab3ef1e83c8e7f8df722f1896">v8::internal::MarkCompactCollector::RecordObjectStats</a></div><div class="ttdeci">void RecordObjectStats()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02380">mark-compact.cc:2380</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryMeasurement_html_a2b16af443017f8c53573e169987d6d93"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryMeasurement.html#a2b16af443017f8c53573e169987d6d93">v8::internal::MemoryMeasurement::FinishProcessing</a></div><div class="ttdeci">void FinishProcessing(const NativeContextStats &amp;stats)</div><div class="ttdef"><b>Definition:</b> <a href="memory-measurement_8cc_source.html#l00234">memory-measurement.cc:234</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8cc_source.html#l02922">ClearNonLiveReferences()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02370">v8::internal::Heap::cpp_heap_</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="mark-compact_8cc_source.html#l05054">Evacuate()</a>, <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, <a class="el" href="memory-measurement_8cc_source.html#l00234">v8::internal::MemoryMeasurement::FinishProcessing()</a>, <a class="el" href="cpp-heap_8h_source.html#l00103">v8::internal::CppHeap::From()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">kAtomicGC</a>, <a class="el" href="mark-compact_8cc_source.html#l02477">MarkLiveObjects()</a>, <a class="el" href="mark-compact_8cc_source.html#l00466">MaybeEnableBackgroundThreadsInCycle()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02115">v8::internal::Heap::memory_measurement()</a>, <a class="el" href="mark-compact_8h_source.html#l00432">native_context_stats_</a>, <a class="el" href="mark-compact_8cc_source.html#l02380">RecordObjectStats()</a>, <a class="el" href="mark-compact_8cc_source.html#l06162">Sweep()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00814">VerifyMarking()</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap_8cc_source.html#l02733">v8::internal::Heap::MarkCompact()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a05a22eaa8eafd6ae1bcfb066edd7acc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05a22eaa8eafd6ae1bcfb066edd7acc1">&#9670;&nbsp;</a></span>CompactTransitionArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::CompactTransitionArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt;&#160;</td>
          <td class="paramname"><em>transitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt;&#160;</td>
          <td class="paramname"><em>descriptors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03651">3651</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                                         {</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!map-&gt;is_prototype_map());</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <span class="keywordtype">int</span> num_transitions = transitions-&gt;number_of_transitions();</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a859d6252de36904e629ec0cd26408902">TransitionArrayNeedsCompaction</a>(transitions, num_transitions)) {</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  }</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  ReadOnlyRoots roots(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;  <span class="keywordtype">bool</span> descriptors_owner_died = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;  <span class="keywordtype">int</span> transition_index = 0;</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;  <span class="comment">// Compact all live transitions to the left.</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_transitions; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    Tagged&lt;Map&gt; target = transitions-&gt;GetTarget(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(target-&gt;constructor_or_back_pointer(), map);</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160; </div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, target)) {</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      <span class="keywordflow">if</span> (!descriptors.is_null() &amp;&amp;</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;          target-&gt;instance_descriptors(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()) == descriptors) {</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!target-&gt;is_prototype_map());</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        descriptors_owner_died = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      }</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    }</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html">i</a> != transition_index) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;      Tagged&lt;Name&gt; <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a> = transitions-&gt;GetKey(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;      transitions-&gt;SetKey(transition_index, <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">HeapObjectSlot</a> key_slot = transitions-&gt;GetKeySlot(transition_index);</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(transitions, key_slot, <a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      Tagged&lt;MaybeObject&gt; raw_target = transitions-&gt;GetRawTarget(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;      transitions-&gt;SetRawTarget(transition_index, raw_target);</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">HeapObjectSlot</a> target_slot = transitions-&gt;GetTargetSlot(transition_index);</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(transitions, target_slot, raw_target.GetHeapObject());</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    }</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    transition_index++;</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  }</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <span class="comment">// If there are no transitions to be cleared, return.</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  <span class="keywordflow">if</span> (transition_index == num_transitions) {</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!descriptors_owner_died);</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  }</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  <span class="comment">// Note that we never eliminate a transition array, though we might right-trim</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  <span class="comment">// such that number_of_transitions() == 0. If this assumption changes,</span></div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  <span class="comment">// TransitionArray::Insert() will need to deal with the case that a transition</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="comment">// array disappeared during GC.</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  <span class="keywordtype">int</span> old_capacity_in_entries = transitions-&gt;Capacity();</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  <span class="keywordflow">if</span> (transition_index &lt; old_capacity_in_entries) {</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordtype">int</span> old_capacity = transitions-&gt;length();</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    static_assert(<a class="code" href="classv8_1_1internal_1_1TransitionArray.html#a4e1011740332650975335363489c1d9f">TransitionArray::kEntryKeyIndex</a> == 0);</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1TransitionArray.html#a1921e0066146c0dd4219d05e660e636b">TransitionArray::ToKeyIndex</a>(old_capacity_in_entries),</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;              old_capacity);</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    <span class="keywordtype">int</span> new_capacity = <a class="code" href="classv8_1_1internal_1_1TransitionArray.html#a1921e0066146c0dd4219d05e660e636b">TransitionArray::ToKeyIndex</a>(transition_index);</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ab5eb8c07e5ff4c9cc6e8559c6d24468c">RightTrimArray</a>(transitions, new_capacity, old_capacity);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;    transitions-&gt;SetNumberOfTransitions(transition_index);</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  }</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="keywordflow">return</span> descriptors_owner_died;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ab5eb8c07e5ff4c9cc6e8559c6d24468c"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ab5eb8c07e5ff4c9cc6e8559c6d24468c">v8::internal::Heap::RightTrimArray</a></div><div class="ttdeci">void RightTrimArray(Tagged&lt; Array &gt; object, int new_capacity, int old_capacity)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03592">heap.cc:3592</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a859d6252de36904e629ec0cd26408902"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a859d6252de36904e629ec0cd26408902">v8::internal::MarkCompactCollector::TransitionArrayNeedsCompaction</a></div><div class="ttdeci">bool TransitionArrayNeedsCompaction(Tagged&lt; TransitionArray &gt; transitions, int num_transitions)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03618">mark-compact.cc:3618</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionArray_html_a1921e0066146c0dd4219d05e660e636b"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionArray.html#a1921e0066146c0dd4219d05e660e636b">v8::internal::TransitionArray::ToKeyIndex</a></div><div class="ttdeci">static int ToKeyIndex(int transition_number)</div><div class="ttdef"><b>Definition:</b> <a href="transitions_8h_source.html#l00361">transitions.h:361</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionArray_html_a4e1011740332650975335363489c1d9f"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionArray.html#a4e1011740332650975335363489c1d9f">v8::internal::TransitionArray::kEntryKeyIndex</a></div><div class="ttdeci">static const int kEntryKeyIndex</div><div class="ttdef"><b>Definition:</b> <a href="transitions_8h_source.html#l00356">transitions.h:356</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5f8b754678e24836a51be62e3f8c3682"><div class="ttname"><a href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">v8::internal::HeapObjectSlot</a></div><div class="ttdeci">SlotTraits::THeapObjectSlot HeapObjectSlot</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01247">globals.h:1247</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="tagged-impl-inl_8h_source.html#l00048">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::GetHeapObject()</a>, <a class="el" href="json-stringifier_8cc_source.html#l00548">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a>, <a class="el" href="tagged_8h_source.html#l00502">v8::internal::Tagged&lt; HeapObject &gt;::is_null()</a>, and <a class="el" href="external-reference_8cc_source.html#l01408">v8::internal::key</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1_cgraph.svg" width="100%" height="394"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5baec12608267c330286a39281ddf7af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5baec12608267c330286a39281ddf7af">&#9670;&nbsp;</a></span>ComputeEvacuationHeuristics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ComputeEvacuationHeuristics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>area_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a> *&#160;</td>
          <td class="paramname"><em>target_fragmentation_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> *&#160;</td>
          <td class="paramname"><em>max_evacuated_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00561">561</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                 {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// For memory reducing and optimize for memory mode we directly define both</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// constants.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercentForReduceMemory = 20;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytesForReduceMemory = 12 * <a class="code" href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">MB</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercentForOptimizeMemory = 20;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytesForOptimizeMemory = 6 * <a class="code" href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">MB</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// For regular mode (which is latency critical) we define less aggressive</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// defaults to start and switch to a trace-based (using compaction speed)</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// approach as soon as we have enough samples.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercent = 70;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytes = 4 * <a class="code" href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">MB</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// Time to take for a single area (=payload of page). Used as soon as there</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// exist enough compaction speed samples.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> kTargetMsPerArea = .5;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>()) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    *target_fragmentation_percent = kTargetFragmentationPercentForReduceMemory;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    *max_evacuated_bytes = kMaxEvacuatedBytesForReduceMemory;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2128865e219ddb70695e23563141da9">ShouldOptimizeForMemoryUsage</a>()) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    *target_fragmentation_percent =</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        kTargetFragmentationPercentForOptimizeMemory;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    *max_evacuated_bytes = kMaxEvacuatedBytesForOptimizeMemory;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keyword">const</span> std::optional&lt;double&gt; estimated_compaction_speed =</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GCTracer.html#ad7d2f16e123b5303b24858b22ddde30f">CompactionSpeedInBytesPerMillisecond</a>();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (estimated_compaction_speed.has_value()) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="comment">// Estimate the target fragmentation based on traced compaction speed</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="comment">// and a goal for a single page.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> estimated_ms_per_area =</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          1 + area_size / *estimated_compaction_speed;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      *target_fragmentation_percent = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          100 - 100 * kTargetMsPerArea / estimated_ms_per_area);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (*target_fragmentation_percent &lt;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          kTargetFragmentationPercentForReduceMemory) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        *target_fragmentation_percent =</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            kTargetFragmentationPercentForReduceMemory;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      *target_fragmentation_percent = kTargetFragmentationPercent;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    *max_evacuated_bytes = kMaxEvacuatedBytes;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_ad7d2f16e123b5303b24858b22ddde30f"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#ad7d2f16e123b5303b24858b22ddde30f">v8::internal::GCTracer::CompactionSpeedInBytesPerMillisecond</a></div><div class="ttdeci">std::optional&lt; double &gt; CompactionSpeedInBytesPerMillisecond() const</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8cc_source.html#l01353">gc-tracer.cc:1353</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad2128865e219ddb70695e23563141da9"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad2128865e219ddb70695e23563141da9">v8::internal::Heap::ShouldOptimizeForMemoryUsage</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool ShouldOptimizeForMemoryUsage()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03898">heap.cc:3898</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af46551c5713d2a3a1be4dca973e521e0"><div class="ttname"><a href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">v8::internal::MB</a></div><div class="ttdeci">constexpr int MB</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00056">v8-internal.h:56</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="gc-tracer_8cc_source.html#l01353">v8::internal::GCTracer::CompactionSpeedInBytesPerMillisecond()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="v8-internal_8h_source.html#l00056">v8::internal::MB</a>, <a class="el" href="heap_8cc_source.html#l03898">v8::internal::Heap::ShouldOptimizeForMemoryUsage()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01671">v8::internal::Heap::ShouldReduceMemory()</a>, and <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00609">CollectEvacuationCandidates()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab77b1f17c1aaf49a93ba2e394fd11984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab77b1f17c1aaf49a93ba2e394fd11984">&#9670;&nbsp;</a></span>epoch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned v8::internal::MarkCompactCollector::epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00168">168</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a97165101e46c49ad2629345f1cb48da5">epoch_</a>; }</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a97165101e46c49ad2629345f1cb48da5"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a97165101e46c49ad2629345f1cb48da5">v8::internal::MarkCompactCollector::epoch_</a></div><div class="ttdeci">unsigned epoch_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00463">mark-compact.h:463</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00463">epoch_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00647">v8::internal::ConcurrentMarking::TryScheduleJob()</a>, and <a class="el" href="marking-barrier_8cc_source.html#l00143">v8::internal::MarkingBarrier::Write()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa553d7a0b23e5ce515c7dd3289ae84fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa553d7a0b23e5ce515c7dd3289ae84fa">&#9670;&nbsp;</a></span>Evacuate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::Evacuate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05054">5054</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;                                    {</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE);</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160; </div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  {</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_PROLOGUE);</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af5937c57f10e0293505055fc348ddde5">EvacuatePrologue</a>();</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  }</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160; </div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  {</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_COPY);</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a819031ab4fbcb232c34b4ae3cd9b6b31">EvacuatePagesInParallel</a>();</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;  }</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160; </div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a10156273473177e162f6a5cb30b1b7e8">UpdatePointersAfterEvacuation</a>();</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160; </div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;  {</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_CLEAN_UP);</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160; </div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;    <span class="keywordflow">for</span> (PageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> owner_identity = p-&gt;owner_identity();</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;      <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(owner_identity);</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>)) {</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;        chunk-&gt;ClearFlagNonExecutable(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>);</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;        <span class="comment">// The in-sandbox page flags may be corrupted, so we currently need</span></div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;        <span class="comment">// this check here to make sure that this doesn&#39;t lead to further</span></div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;        <span class="comment">// confusion about the state of MemoryChunkMetadata objects.</span></div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;        <span class="comment">// TODO(377724745): if we move (some of) the flags into the trusted</span></div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;        <span class="comment">// MemoryChunkMetadata object, then this wouldn&#39;t be necessary.</span></div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;        <a class="code" href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a>(<a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>, owner_identity);</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#afe45a9e97df960e8895bffde73c4f7d2">AddPage</a>(<a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>, p);</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;        <span class="comment">// Sweep non-promoted pages to add them back to the free list.</span></div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>, owner_identity);</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, p-&gt;live_bytes());</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;        PagedNewSpace* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a> = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>();</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;ShouldReleaseEmptyPage()) {</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">ReleasePage</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;paged_space(), p);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#aca5b4d1317e28419219a4ef8982efc72">SweepEmptyNewSpacePage</a>(p);</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;        }</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;      }</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;    }</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a>.clear();</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160; </div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    <span class="keywordflow">for</span> (LargePageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af2e1364ab937f14cf763b58e79567d74">promoted_large_pages_</a>) {</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>));</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;      chunk-&gt;ClearFlagNonExecutable(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>);</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = p-&gt;GetObject();</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkBit.html#aeb6b550934b84cc75caeb8458ec4ddcb">MarkBit::From</a>(<span class="keywordtype">object</span>).<a class="code" href="classv8_1_1internal_1_1MarkBit.html#a049af8353d54d6548c03b84daa9f616b">Clear</a>();</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;        p-&gt;SetLiveBytes(0);</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;      }</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;      p-&gt;marking_progress_tracker().ResetIfEnabled();</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;    }</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af2e1364ab937f14cf763b58e79567d74">promoted_large_pages_</a>.clear();</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160; </div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;    <span class="keywordflow">for</span> (PageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>)) {</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#afe45a9e97df960e8895bffde73c4f7d2">AddPage</a>(p-&gt;owner_identity(), p);</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        chunk-&gt;ClearFlagSlow(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>);</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;      }</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    }</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;  }</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160; </div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;  {</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_EPILOGUE);</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa457554fa770421e38516be33c3cd201">EvacuateEpilogue</a>();</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;  }</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160; </div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;<span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap &amp;&amp; !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>()) {</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    EvacuationVerifier verifier(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;    verifier.Run();</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;  }</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;}</div>
<div class="ttc" id="acheck_8h_html_a6e67d209c0a0c9c55b7b563275f63bdd"><div class="ttname"><a href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a></div><div class="ttdeci">#define SBXCHECK_EQ(lhs, rhs)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00055">check.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_acdb258ef166633d7ea0912d882109e30"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">v8::internal::Heap::paged_new_space</a></div><div class="ttdeci">PagedNewSpace * paged_new_space() const</div><div class="ttdef"><b>Definition:</b> <a href="heap-inl_8h_source.html#l00426">heap-inl.h:426</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkBit_html_a049af8353d54d6548c03b84daa9f616b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkBit.html#a049af8353d54d6548c03b84daa9f616b">v8::internal::MarkBit::Clear</a></div><div class="ttdeci">bool Clear()</div><div class="ttdef"><b>Definition:</b> <a href="marking_8h_source.html#l00085">marking.h:85</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkBit_html_aeb6b550934b84cc75caeb8458ec4ddcb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkBit.html#aeb6b550934b84cc75caeb8458ec4ddcb">v8::internal::MarkBit::From</a></div><div class="ttdeci">static V8_ALLOW_UNUSED MarkBit From(Address)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00268">marking-inl.h:268</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a10156273473177e162f6a5cb30b1b7e8"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a10156273473177e162f6a5cb30b1b7e8">v8::internal::MarkCompactCollector::UpdatePointersAfterEvacuation</a></div><div class="ttdeci">void UpdatePointersAfterEvacuation()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05613">mark-compact.cc:5613</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a5fd86ee72dfc32e6d1e18f4c5e4a050d"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">v8::internal::MarkCompactCollector::ReleasePage</a></div><div class="ttdeci">void ReleasePage(PagedSpaceBase *space, PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05974">mark-compact.cc:5974</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a819031ab4fbcb232c34b4ae3cd9b6b31"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a819031ab4fbcb232c34b4ae3cd9b6b31">v8::internal::MarkCompactCollector::EvacuatePagesInParallel</a></div><div class="ttdeci">void EvacuatePagesInParallel()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04933">mark-compact.cc:4933</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a90654b662fce79c4d158e494a7660987"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">v8::internal::MarkCompactCollector::new_space_evacuation_pages_</a></div><div class="ttdeci">std::vector&lt; PageMetadata * &gt; new_space_evacuation_pages_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00441">mark-compact.h:441</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa457554fa770421e38516be33c3cd201"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa457554fa770421e38516be33c3cd201">v8::internal::MarkCompactCollector::EvacuateEpilogue</a></div><div class="ttdeci">void EvacuateEpilogue()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04454">mark-compact.cc:4454</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af2e1364ab937f14cf763b58e79567d74"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af2e1364ab937f14cf763b58e79567d74">v8::internal::MarkCompactCollector::promoted_large_pages_</a></div><div class="ttdeci">std::vector&lt; LargePageMetadata * &gt; promoted_large_pages_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00445">mark-compact.h:445</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af5937c57f10e0293505055fc348ddde5"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af5937c57f10e0293505055fc348ddde5">v8::internal::MarkCompactCollector::EvacuatePrologue</a></div><div class="ttdeci">void EvacuatePrologue()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04429">mark-compact.cc:4429</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af8bdf9288a13d36c8c4c482145a20238"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">v8::internal::MarkCompactCollector::old_space_evacuation_pages_</a></div><div class="ttdeci">std::vector&lt; PageMetadata * &gt; old_space_evacuation_pages_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00440">mark-compact.h:440</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">v8::internal::MemoryChunk::PAGE_NEW_OLD_PROMOTION</a></div><div class="ttdeci">@ PAGE_NEW_OLD_PROMOTION</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00097">memory-chunk.h:97</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">v8::internal::MemoryChunk::COMPACTION_WAS_ABORTED</a></div><div class="ttdeci">@ COMPACTION_WAS_ABORTED</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00115">memory-chunk.h:115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_aca5b4d1317e28419219a4ef8982efc72"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#aca5b4d1317e28419219a4ef8982efc72">v8::internal::Sweeper::SweepEmptyNewSpacePage</a></div><div class="ttdeci">void SweepEmptyNewSpacePage(PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l01550">sweeper.cc:1550</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_afe45a9e97df960e8895bffde73c4f7d2"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#afe45a9e97df960e8895bffde73c4f7d2">v8::internal::Sweeper::AddPage</a></div><div class="ttdeci">void AddPage(AllocationSpace space, PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l01385">sweeper.cc:1385</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fef"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">v8::internal::AllocationSpace</a></div><div class="ttdeci">AllocationSpace</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01298">globals.h:1298</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">v8::internal::NEW_SPACE</a></div><div class="ttdeci">@ NEW_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01300">globals.h:1300</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00293">macros.h:293</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk_8h_source.html#l00243">v8::internal::MemoryChunk::ClearFlagNonExecutable()</a>, <a class="el" href="memory-chunk_8cc_source.html#l00189">v8::internal::MemoryChunk::ClearFlagSlow()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="common_2globals_8h_source.html#l01300">v8::internal::NEW_SPACE</a>, <a class="el" href="common_2globals_8h_source.html#l01302">v8::internal::OLD_SPACE</a>, <a class="el" href="check_8h_source.html#l00055">SBXCHECK_EQ</a>, <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00293">USE</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa_cgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa457554fa770421e38516be33c3cd201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa457554fa770421e38516be33c3cd201">&#9670;&nbsp;</a></span>EvacuateEpilogue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::EvacuateEpilogue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04454">4454</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;                                            {</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a>.clear();</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">aborted_evacuation_candidates_due_to_flags_</a>.clear();</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160; </div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;  <span class="comment">// New space.</span></div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()-&gt;Size());</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;  }</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  <span class="comment">// Old generation. Deallocate evacuated candidate pages.</span></div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae07545bc19d80a27a63c760d875601c2">ReleaseEvacuationCandidates</a>();</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160; </div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;  VerifyRememberedSetsAfterEvacuation(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a8abe18f92f4794f8ba70937917325140"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">v8::internal::Heap::new_space</a></div><div class="ttdeci">NewSpace * new_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00770">heap.h:770</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a07a4e5f537a84e8ed02f47c747e10f89"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">v8::internal::MarkCompactCollector::aborted_evacuation_candidates_due_to_flags_</a></div><div class="ttdeci">std::vector&lt; PageMetadata * &gt; aborted_evacuation_candidates_due_to_flags_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00444">mark-compact.h:444</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a4dab80ef7a34c59ce69e9828d602bb9f"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">v8::internal::MarkCompactCollector::aborted_evacuation_candidates_due_to_oom_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; Address, PageMetadata * &gt; &gt; aborted_evacuation_candidates_due_to_oom_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00443">mark-compact.h:443</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ae07545bc19d80a27a63c760d875601c2"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ae07545bc19d80a27a63c760d875601c2">v8::internal::MarkCompactCollector::ReleaseEvacuationCandidates</a></div><div class="ttdeci">void ReleaseEvacuationCandidates()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05962">mark-compact.cc:5962</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5"><div class="ttname"><a href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">v8::internal::GarbageCollector::MARK_COMPACTOR</a></div><div class="ttdeci">@ MARK_COMPACTOR</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>.</p>

</div>
</div>
<a id="a819031ab4fbcb232c34b4ae3cd9b6b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a819031ab4fbcb232c34b4ae3cd9b6b31">&#9670;&nbsp;</a></span>EvacuatePagesInParallel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::EvacuatePagesInParallel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04933">4933</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;                                                   {</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;  std::vector&lt;std::pair&lt;ParallelWorkItem, MutablePageMetadata*&gt;&gt;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;      evacuation_items;</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;  intptr_t live_bytes = 0;</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160; </div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adcccd5bf69efe4a16b2f462192b42d77">PinPreciseRootsIfNeeded</a>();</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160; </div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;  <span class="comment">// Evacuation of new space pages cannot be aborted, so it needs to run</span></div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;  <span class="comment">// before old space evacuation.</span></div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;  <span class="keywordtype">bool</span> force_page_promotion =</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() &amp;&amp; !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack;</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;  <span class="keywordflow">for</span> (PageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    intptr_t live_bytes_on_page = page-&gt;live_bytes();</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, live_bytes_on_page);</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;    live_bytes += live_bytes_on_page;</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a06d1c585f64ca4267edf4dd4f4e55cce">MemoryReductionMode</a> memory_reduction_mode =</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>() ? MemoryReductionMode::kShouldReduceMemory</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                                    : MemoryReductionMode::kNone;</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a1c549e86327fe563e6aeb70af865fb4c">ShouldMovePage</a>(page, live_bytes_on_page, memory_reduction_mode) ||</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        force_page_promotion || page-&gt;Chunk()-&gt;IsQuarantined()) {</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;      <a class="code" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#ab08bf909e4b9d6b8aa72af4c17767896">EvacuateNewToOldSpacePageVisitor::Move</a>(page);</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;      page-&gt;Chunk()-&gt;SetFlagNonExecutable(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>(), page-&gt;owner());</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="comment">// The move added page-&gt;allocated_bytes to the old space, but we are</span></div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;      <span class="comment">// going to sweep the page and add page-&gt;live_byte_count.</span></div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1PagedSpaceBase.html#a1697e447747302fed8259e89b12a4651">DecreaseAllocatedBytes</a>(page-&gt;allocated_bytes(), page);</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;    }</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;    evacuation_items.emplace_back(ParallelWorkItem{}, page);</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160; </div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>()) {</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack) {</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;      <span class="keywordflow">for</span> (PageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">ReportAbortedEvacuationCandidateDueToFlags</a>(page, page-&gt;Chunk());</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;      }</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_code_space_with_stack ||</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;               <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a44b6ca4cd581c053d46bab9d0b67943c">InFastCCall</a>()) {</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;      <span class="comment">// For fast C calls we cannot patch the return address in the native stack</span></div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;      <span class="comment">// frame if we would relocate InstructionStream objects.</span></div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;      <span class="keywordflow">for</span> (PageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;        <span class="keywordflow">if</span> (page-&gt;owner_identity() != <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">ReportAbortedEvacuationCandidateDueToFlags</a>(page, page-&gt;Chunk());</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;      }</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;    }</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    <span class="comment">// There should always be a stack when we are in a fast c call.</span></div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a44b6ca4cd581c053d46bab9d0b67943c">InFastCCall</a>());</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;  }</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160; </div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random) {</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    <span class="comment">// Stress aborting of evacuation by aborting ~10% of evacuation candidates</span></div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;    <span class="comment">// when stress testing.</span></div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> kFraction = 0.05;</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160; </div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;    <span class="keywordflow">for</span> (PageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code" href="classv8_1_1base_1_1RandomNumberGenerator.html#a3cb661fd70f4322d36792f98acd6ca7e">NextDouble</a>() &lt; kFraction) {</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">ReportAbortedEvacuationCandidateDueToFlags</a>(page, page-&gt;Chunk());</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      }</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    }</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;  }</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160; </div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;  <span class="keywordflow">for</span> (PageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;    MemoryChunk* chunk = page-&gt;Chunk();</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160; </div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;    live_bytes += page-&gt;live_bytes();</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    evacuation_items.emplace_back(ParallelWorkItem{}, page);</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;  }</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160; </div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;  <span class="comment">// Promote young generation large objects.</span></div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_lo_space = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>()) {</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = new_lo_space-&gt;begin(); it != new_lo_space-&gt;end();) {</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;      LargePageMetadata* current = *(it++);</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = current-&gt;GetObject();</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;      <span class="comment">// The black-allocated flag was already cleared in SweepLargeSpace().</span></div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.black_allocated_pages,</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;                     !<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#ac9879fed71642d70a0509695654ff874">HeapLayout::InBlackAllocatedPage</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#a13d4cff573da17af5b1532566911dfe9">IsMarked</a>(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2f135c51e5752f90638521eee547129">lo_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1OldLargeObjectSpace.html#a70a9bca669df225ca07123ffc66c5757">PromoteNewLargeObject</a>(current);</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;        current-&gt;Chunk()-&gt;SetFlagNonExecutable(</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b">MemoryChunk::PAGE_NEW_OLD_PROMOTION</a>);</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af2e1364ab937f14cf763b58e79567d74">promoted_large_pages_</a>.push_back(current);</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;        evacuation_items.emplace_back(ParallelWorkItem{}, current);</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;      }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;    }</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    new_lo_space-&gt;set_objects_size(0);</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;  }</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160; </div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> pages_count = evacuation_items.size();</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;  <span class="keywordtype">size_t</span> wanted_num_tasks = 0;</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;  <span class="keywordflow">if</span> (!evacuation_items.empty()) {</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;                 <span class="stringliteral">&quot;MarkCompactCollector::EvacuatePagesInParallel&quot;</span>, <span class="stringliteral">&quot;pages&quot;</span>,</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;                 evacuation_items.size());</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160; </div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    wanted_num_tasks = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#aea90dbf5b664542f92e8f0e7a13cfc01">CreateAndExecuteEvacuationTasks</a>(</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <span class="keyword">this</span>, std::move(evacuation_items));</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;  }</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160; </div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> aborted_pages = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a22086e39ee1c3864010dac3a10135834">PostProcessAbortedEvacuationCandidates</a>();</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160; </div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation) {</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a8401873f434983f85f97f0b3ded61cd9">TraceEvacuation</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), pages_count, wanted_num_tasks, live_bytes,</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;                    aborted_pages);</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;  }</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_ab08bf909e4b9d6b8aa72af4c17767896"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#ab08bf909e4b9d6b8aa72af4c17767896">v8::internal::EvacuateNewToOldSpacePageVisitor::Move</a></div><div class="ttdeci">static void Move(PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01763">mark-compact.cc:1763</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a2dd38bcac0a916cc4eeedd9d14044882"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">v8::internal::Heap::new_lo_space</a></div><div class="ttdeci">NewLargeObjectSpace * new_lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00780">heap.h:780</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a8d7b791efdd8818bc3dcd98ce920b06c"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">v8::internal::Heap::old_space</a></div><div class="ttdeci">OldSpace * old_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00773">heap.h:773</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad2f135c51e5752f90638521eee547129"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad2f135c51e5752f90638521eee547129">v8::internal::Heap::lo_space</a></div><div class="ttdeci">OldLargeObjectSpace * lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00777">heap.h:777</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a44b6ca4cd581c053d46bab9d0b67943c"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a44b6ca4cd581c053d46bab9d0b67943c">v8::internal::Isolate::InFastCCall</a></div><div class="ttdeci">bool InFastCCall() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate-inl_8h_source.html#l00194">isolate-inl.h:194</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a22086e39ee1c3864010dac3a10135834"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a22086e39ee1c3864010dac3a10135834">v8::internal::MarkCompactCollector::PostProcessAbortedEvacuationCandidates</a></div><div class="ttdeci">size_t PostProcessAbortedEvacuationCandidates()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05926">mark-compact.cc:5926</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a8c05858a7577a61d236de24903278946"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">v8::internal::MarkCompactCollector::ReportAbortedEvacuationCandidateDueToFlags</a></div><div class="ttdeci">void ReportAbortedEvacuationCandidateDueToFlags(PageMetadata *page, MemoryChunk *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05879">mark-compact.cc:5879</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_adcccd5bf69efe4a16b2f462192b42d77"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#adcccd5bf69efe4a16b2f462192b42d77">v8::internal::MarkCompactCollector::PinPreciseRootsIfNeeded</a></div><div class="ttdeci">void PinPreciseRootsIfNeeded()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04909">mark-compact.cc:4909</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1OldLargeObjectSpace_html_a70a9bca669df225ca07123ffc66c5757"><div class="ttname"><a href="classv8_1_1internal_1_1OldLargeObjectSpace.html#a70a9bca669df225ca07123ffc66c5757">v8::internal::OldLargeObjectSpace::PromoteNewLargeObject</a></div><div class="ttdeci">void PromoteNewLargeObject(LargePageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="large-spaces_8cc_source.html#l00182">large-spaces.cc:182</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedSpaceBase_html_a1697e447747302fed8259e89b12a4651"><div class="ttname"><a href="classv8_1_1internal_1_1PagedSpaceBase.html#a1697e447747302fed8259e89b12a4651">v8::internal::PagedSpaceBase::DecreaseAllocatedBytes</a></div><div class="ttdeci">void DecreaseAllocatedBytes(size_t bytes, PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="paged-spaces_8h_source.html#l00189">paged-spaces.h:189</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a06d1c585f64ca4267edf4dd4f4e55cce"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a06d1c585f64ca4267edf4dd4f4e55cce">v8::internal::anonymous_namespace{mark-compact.cc}::MemoryReductionMode</a></div><div class="ttdeci">MemoryReductionMode</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04802">mark-compact.cc:4802</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a1c549e86327fe563e6aeb70af865fb4c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a1c549e86327fe563e6aeb70af865fb4c">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldMovePage</a></div><div class="ttdeci">bool ShouldMovePage(PageMetadata *p, intptr_t live_bytes, MemoryReductionMode memory_reduction_mode)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04811">mark-compact.cc:4811</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a8401873f434983f85f97f0b3ded61cd9"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a8401873f434983f85f97f0b3ded61cd9">v8::internal::anonymous_namespace{mark-compact.cc}::TraceEvacuation</a></div><div class="ttdeci">void TraceEvacuation(Isolate *isolate, size_t pages_count, size_t wanted_num_tasks, size_t live_bytes, size_t aborted_pages)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04831">mark-compact.cc:4831</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_aea90dbf5b664542f92e8f0e7a13cfc01"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#aea90dbf5b664542f92e8f0e7a13cfc01">v8::internal::anonymous_namespace{mark-compact.cc}::CreateAndExecuteEvacuationTasks</a></div><div class="ttdeci">size_t CreateAndExecuteEvacuationTasks(Heap *heap, MarkCompactCollector *collector, std::vector&lt; std::pair&lt; ParallelWorkItem, MutablePageMetadata * &gt;&gt; evacuation_items)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04770">mark-compact.cc:4770</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a97689377430b094caec680dd7dd230fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a></div><div class="ttdeci">#define TRACE_DISABLED_BY_DEFAULT(name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00025">trace-event-no-perfetto.h:25</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_ac437f27e15925a9bd53c69692a6c85fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a></div><div class="ttdeci">#define TRACE_EVENT1(category_group, name, arg1_name, arg1_val)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00037">trace-event-no-perfetto.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="common_2globals_8h_source.html#l01303">v8::internal::CODE_SPACE</a>, <a class="el" href="mark-compact_8cc_source.html#l04770">v8::internal::anonymous_namespace{mark-compact.cc}::CreateAndExecuteEvacuationTasks()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00488">DCHECK_LT</a>, <a class="el" href="large-page-metadata_8h_source.html#l00037">v8::internal::LargePageMetadata::GetObject()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="memory-chunk_8h_source.html#l00240">v8::internal::MemoryChunk::SetFlagNonExecutable()</a>, <a class="el" href="mark-compact_8cc_source.html#l04811">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldMovePage()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00025">TRACE_DISABLED_BY_DEFAULT</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>, <a class="el" href="mark-compact_8cc_source.html#l04831">v8::internal::anonymous_namespace{mark-compact.cc}::TraceEvacuation()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="af5937c57f10e0293505055fc348ddde5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5937c57f10e0293505055fc348ddde5">&#9670;&nbsp;</a></span>EvacuatePrologue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::EvacuatePrologue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04429">4429</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;                                            {</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;  <span class="comment">// New space.</span></div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;  <span class="keywordflow">if</span> (NewSpace* new_space = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a>.empty());</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    std::copy_if(new_space-&gt;begin(), new_space-&gt;end(),</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;                 std::back_inserter(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a90654b662fce79c4d158e494a7660987">new_space_evacuation_pages_</a>),</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;                 [](PageMetadata* p) { return p-&gt;live_bytes() &gt; 0; });</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;      <a class="code" href="classv8_1_1internal_1_1SemiSpaceNewSpace.html#a6a1e4d7add6a528eb4e3f406327e8ebf">SemiSpaceNewSpace::From</a>(new_space)-&gt;<a class="code" href="classv8_1_1internal_1_1SemiSpaceNewSpace.html#a0d9dea5f329c0ab598b5cc85f6f28600">SwapSemiSpaces</a>();</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    }</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;  }</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160; </div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;  <span class="comment">// Large new space.</span></div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  <span class="keywordflow">if</span> (NewLargeObjectSpace* new_lo_space = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>()) {</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;    new_lo_space-&gt;Flip();</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    new_lo_space-&gt;ResetPendingObject();</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;  }</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160; </div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  <span class="comment">// Old space.</span></div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>.empty());</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a> = std::move(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>);</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>.clear();</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>.empty());</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1SemiSpaceNewSpace_html_a0d9dea5f329c0ab598b5cc85f6f28600"><div class="ttname"><a href="classv8_1_1internal_1_1SemiSpaceNewSpace.html#a0d9dea5f329c0ab598b5cc85f6f28600">v8::internal::SemiSpaceNewSpace::SwapSemiSpaces</a></div><div class="ttdeci">void SwapSemiSpaces()</div><div class="ttdef"><b>Definition:</b> <a href="new-spaces_8cc_source.html#l00707">new-spaces.cc:707</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SemiSpaceNewSpace_html_a6a1e4d7add6a528eb4e3f406327e8ebf"><div class="ttname"><a href="classv8_1_1internal_1_1SemiSpaceNewSpace.html#a6a1e4d7add6a528eb4e3f406327e8ebf">v8::internal::SemiSpaceNewSpace::From</a></div><div class="ttdeci">static SemiSpaceNewSpace * From(NewSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="new-spaces_8h_source.html#l00259">new-spaces.h:259</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

</div>
</div>
<a id="ae8d1737f64ec1c402f115889a75d1cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d1737f64ec1c402f115889a75d1cbf">&#9670;&nbsp;</a></span>FilterNonTrivialWeakReferences()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::FilterNonTrivialWeakReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03887">3887</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;                                                          {</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ace58b122ce17abc7ea987b863574310a">HeapObjectAndSlot</a> slot;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_references_non_trivial_local.Pop(&amp;slot)) {</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    <span class="comment">// The slot could have been overwritten, so we have to treat it</span></div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="comment">// as MaybeObjectSlot.</span></div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> location(slot.slot);</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    <span class="keywordflow">if</span> ((*location).GetHeapObjectIfWeak(&amp;<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!IsWeakCell(<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <span class="comment">// Values in RO space have already been filtered, but a non-RO value may</span></div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      <span class="comment">// have been overwritten by a RO value since marking.</span></div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                                              <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>)) {</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        <span class="comment">// The value of the weak reference is alive.</span></div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(slot.heap_object, <a class="code" href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">HeapObjectSlot</a>(location), <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkingVisitorBase.html#a8ee1d72c4c9542c38144e805f83299f6">MainMarkingVisitor::IsTrivialWeakReferenceValue</a>(</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            slot.heap_object, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>));</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <span class="comment">// The value is non-live, defer the actual clearing.</span></div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;        <span class="comment">// This is non-atomic, which is fine as long as we only have a single</span></div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;        <span class="comment">// filtering job.</span></div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a>-&gt;weak_references_non_trivial_unmarked_local.Push(</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;            slot);</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      }</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    }</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;  }</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7a10b022d9f335231b5ea7dbbdbaa51"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">v8::internal::MarkCompactCollector::local_weak_objects_</a></div><div class="ttdeci">std::unique_ptr&lt; WeakObjects::Local &gt; local_weak_objects_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00430">mark-compact.h:430</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5c81bf980e0cdd16e6f80a806701fd76"><div class="ttname"><a href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">v8::internal::MaybeObjectSlot</a></div><div class="ttdeci">SlotTraits::TMaybeObjectSlot MaybeObjectSlot</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01242">globals.h:1242</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00028">v8::internal::detail::HeapObjectAndSlotPOD&lt; TSlotType &gt;::heap_object</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00029">v8::internal::detail::HeapObjectAndSlotPOD&lt; TSlotType &gt;::slot</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>

</div>
</div>
<a id="aa1bd78a56ac02e2696341af641334a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1bd78a56ac02e2696341af641334a6b">&#9670;&nbsp;</a></span>Finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::Finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00849">849</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                  {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a374de26e99dae0ad5f32c1cbeab58285">GetTraceIdForFlowEvent</a>(GCTracer::Scope::MC_SWEEP),</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a> | <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// Delay releasing empty new space pages and dead new large object pages</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// until after pointer updating is done because dead old space objects may</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// have slots pointing to these pages and will need to be updated.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms,</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                   <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>.empty());</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>.empty()) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      GCTracer::Scope sweep_scope(</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_NEW, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">for</span> (PageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="comment">// Sweeping empty pages already relinks them to the freelist.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#aca5b4d1317e28419219a4ef8982efc72">SweepEmptyNewSpacePage</a>(p);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>.clear();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>()) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_NEW_LO);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>());</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;VerifyCountersBeforeConcurrentSweeping(</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_REBALANCE);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a4f77b61e4d779f97f1305eb1b7339bc4">ResizeNewSpace</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_FINISH);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a71a5010a2dde4bbad050c4947dc450e2">allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1HeapAllocator.html#a021e4a3fc4d7ff340e494fa638d848ef">new_space_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MainAllocator.html#af63591da1398980234236b7168175772">IsLabValid</a>());</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1NewSpace.html#a6666d02587ff04156b91f1e56dbedbd7">GarbageCollectionEpilogue</a>();</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keyword">auto</span>* isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">global_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalHandles.html#a286951f39aa659e819fdcbcf31cd7d9d">ClearListOfYoungNodes</a>();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a26199027fc8ec567b87add6be727214c">SweepArrayBufferExtensions</a>();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">marking_visitor_</a>.reset();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.reset();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a>.<a class="code" href="classv8_1_1internal_1_1MarkingWorklists.html#ad043c0f34b550badabc3d15a17c52943">ReleaseContextWorklists</a>();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">native_context_stats_</a>.<a class="code" href="classv8_1_1internal_1_1NativeContextStats.html#af295a45eb3605b4771e84ae2aa4a7f48">Clear</a>();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.clear();</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.current_ephemerons.IsEmpty());</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a>-&gt;next_ephemerons_local.Publish();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a>.reset();</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.next_ephemerons.<a class="code" href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">Clear</a>();</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a18ffd1567b5bf06adae1fff80f4207d0">StartMajorSweeperTasks</a>();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Release empty pages now, when the pointer-update phase is done.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">for</span> (MutablePageMetadata* page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a>) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">memory_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a44f020919cc4a6c1859943003e577424">Free</a>(<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5">MemoryAllocator::FreeMode::kImmediately</a>,</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                                    page);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a>.clear();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// Shrink pages if possible after processing and filtering slots.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a2f28540a451fde6740ec4100c5e186ea">ShrinkPagesToObjectSizes</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2f135c51e5752f90638521eee547129">lo_space</a>());</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(state_ == SWEEP_SPACES || state_ == RELOCATE_OBJECTS);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  state_ = <a class="code" href="namespacev8.html#af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8">IDLE</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2bf16e5a4b1908c7abfc22383d37980f">have_code_to_deoptimize_</a>) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// Some code objects were marked for deoptimization during the GC.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Deoptimizer.html#a7cbb81963c0529cc90612511d408db06">Deoptimizer::DeoptimizeMarkedCode</a>(isolate);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2bf16e5a4b1908c7abfc22383d37980f">have_code_to_deoptimize_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Deoptimizer_html_a7cbb81963c0529cc90612511d408db06"><div class="ttname"><a href="classv8_1_1internal_1_1Deoptimizer.html#a7cbb81963c0529cc90612511d408db06">v8::internal::Deoptimizer::DeoptimizeMarkedCode</a></div><div class="ttdeci">static void DeoptimizeMarkedCode(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="deoptimizer_8cc_source.html#l00405">deoptimizer.cc:405</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandles_html_a286951f39aa659e819fdcbcf31cd7d9d"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandles.html#a286951f39aa659e819fdcbcf31cd7d9d">v8::internal::GlobalHandles::ClearListOfYoungNodes</a></div><div class="ttdeci">void ClearListOfYoungNodes()</div><div class="ttdef"><b>Definition:</b> <a href="global-handles_8cc_source.html#l00821">global-handles.cc:821</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapAllocator_html_a021e4a3fc4d7ff340e494fa638d848ef"><div class="ttname"><a href="classv8_1_1internal_1_1HeapAllocator.html#a021e4a3fc4d7ff340e494fa638d848ef">v8::internal::HeapAllocator::new_space_allocator</a></div><div class="ttdeci">MainAllocator * new_space_allocator()</div><div class="ttdef"><b>Definition:</b> <a href="heap-allocator_8h_source.html#l00127">heap-allocator.h:127</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a4f77b61e4d779f97f1305eb1b7339bc4"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a4f77b61e4d779f97f1305eb1b7339bc4">v8::internal::Heap::ResizeNewSpace</a></div><div class="ttdeci">void ResizeNewSpace()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03987">heap.cc:3987</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a71a5010a2dde4bbad050c4947dc450e2"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a71a5010a2dde4bbad050c4947dc450e2">v8::internal::Heap::allocator</a></div><div class="ttdeci">HeapAllocator * allocator()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01696">heap.h:1696</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a9564c4573a66c20043a7602155074b57"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">v8::internal::Heap::memory_allocator</a></div><div class="ttdeci">MemoryAllocator * memory_allocator()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00846">heap.h:846</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a2714e74bceacf9555c6a02745a0319e2"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a2714e74bceacf9555c6a02745a0319e2">v8::internal::Isolate::global_handles</a></div><div class="ttdeci">GlobalHandles * global_handles() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01431">isolate.h:1431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_af63591da1398980234236b7168175772"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#af63591da1398980234236b7168175772">v8::internal::MainAllocator::IsLabValid</a></div><div class="ttdeci">bool IsLabValid() const</div><div class="ttdef"><b>Definition:</b> <a href="main-allocator_8h_source.html#l00253">main-allocator.h:253</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a081b322601a4f48341bab12890a37b11"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">v8::internal::MarkCompactCollector::key_to_values_</a></div><div class="ttdeci">KeyToValues key_to_values_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00452">mark-compact.h:452</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a14f47d0348b13ca89bea5f71604fa8f9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">v8::internal::MarkCompactCollector::SweepLargeSpace</a></div><div class="ttdeci">void SweepLargeSpace(LargeObjectSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06120">mark-compact.cc:6120</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a18e20b7391f846e5f4c429eda5bf5cbe"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">v8::internal::MarkCompactCollector::queued_pages_to_be_freed_</a></div><div class="ttdeci">std::vector&lt; MutablePageMetadata * &gt; queued_pages_to_be_freed_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00449">mark-compact.h:449</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a26199027fc8ec567b87add6be727214c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a26199027fc8ec567b87add6be727214c">v8::internal::MarkCompactCollector::SweepArrayBufferExtensions</a></div><div class="ttdeci">void SweepArrayBufferExtensions()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00935">mark-compact.cc:935</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a2bf16e5a4b1908c7abfc22383d37980f"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a2bf16e5a4b1908c7abfc22383d37980f">v8::internal::MarkCompactCollector::have_code_to_deoptimize_</a></div><div class="ttdeci">bool have_code_to_deoptimize_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00421">mark-compact.h:421</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a84cbdfc60879f899e3aca799e53e5e42"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">v8::internal::MarkCompactCollector::marking_worklists_</a></div><div class="ttdeci">MarkingWorklists marking_worklists_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00424">mark-compact.h:424</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa333a0a067ea24b0545c99392cc77848"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">v8::internal::MarkCompactCollector::empty_new_space_pages_to_be_swept_</a></div><div class="ttdeci">std::vector&lt; PageMetadata * &gt; empty_new_space_pages_to_be_swept_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00471">mark-compact.h:471</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af61342980b0507790efb15034d83162f"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">v8::internal::MarkCompactCollector::marking_visitor_</a></div><div class="ttdeci">std::unique_ptr&lt; MainMarkingVisitor &gt; marking_visitor_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00429">mark-compact.h:429</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_ad043c0f34b550badabc3d15a17c52943"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#ad043c0f34b550badabc3d15a17c52943">v8::internal::MarkingWorklists::ReleaseContextWorklists</a></div><div class="ttdeci">void ReleaseContextWorklists()</div><div class="ttdef"><b>Definition:</b> <a href="marking-worklist_8cc_source.html#l00051">marking-worklist.cc:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5">v8::internal::MemoryAllocator::FreeMode::kImmediately</a></div><div class="ttdeci">@ kImmediately</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a44f020919cc4a6c1859943003e577424"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a44f020919cc4a6c1859943003e577424">v8::internal::MemoryAllocator::Free</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Free(MemoryAllocator::FreeMode mode, MutablePageMetadata *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="memory-allocator_8cc_source.html#l00344">memory-allocator.cc:344</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextStats_html_af295a45eb3605b4771e84ae2aa4a7f48"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextStats.html#af295a45eb3605b4771e84ae2aa4a7f48">v8::internal::NativeContextStats::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="memory-measurement_8cc_source.html#l00375">memory-measurement.cc:375</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NewSpace_html_a6666d02587ff04156b91f1e56dbedbd7"><div class="ttname"><a href="classv8_1_1internal_1_1NewSpace.html#a6666d02587ff04156b91f1e56dbedbd7">v8::internal::NewSpace::GarbageCollectionEpilogue</a></div><div class="ttdeci">virtual void GarbageCollectionEpilogue()=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a18ffd1567b5bf06adae1fff80f4207d0"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a18ffd1567b5bf06adae1fff80f4207d0">v8::internal::Sweeper::StartMajorSweeperTasks</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void StartMajorSweeperTasks()</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l00769">sweeper.cc:769</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a374de26e99dae0ad5f32c1cbeab58285"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a374de26e99dae0ad5f32c1cbeab58285">v8::internal::Sweeper::GetTraceIdForFlowEvent</a></div><div class="ttdeci">uint64_t GetTraceIdForFlowEvent(GCTracer::Scope::ScopeId scope_id) const</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l01615">sweeper.cc:1615</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjects_html_a0557b5c72151038a6d73b9d5aa6804eb"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">v8::internal::WeakObjects::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="weak-object-worklists_8cc_source.html#l00036">weak-object-worklists.cc:36</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a44d6debe5f608aa9654172245625ef38"><div class="ttname"><a href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_EPOCH_WITH_FLOW(tracer, scope_id, thread_kind, bind_id, flow_flags)</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00084">gc-tracer.h:84</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a2f28540a451fde6740ec4100c5e186ea"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a2f28540a451fde6740ec4100c5e186ea">v8::internal::anonymous_namespace{mark-compact.cc}::ShrinkPagesToObjectSizes</a></div><div class="ttdeci">void ShrinkPagesToObjectSizes(Heap *heap, OldLargeObjectSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00834">mark-compact.cc:834</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07"><div class="ttname"><a href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">v8::internal::ThreadKind::kMain</a></div><div class="ttdeci">@ kMain</div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_afd116bac8e67a7eafb2b21a62f0a383f"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a></div><div class="ttdeci">#define TRACE_EVENT_FLAG_FLOW_IN</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00829">trace-event-no-perfetto.h:829</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l01696">v8::internal::Heap::allocator()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="memory-measurement_8cc_source.html#l00375">v8::internal::NativeContextStats::Clear()</a>, <a class="el" href="weak-object-worklists_8cc_source.html#l00036">v8::internal::WeakObjects::Clear()</a>, <a class="el" href="global-handles_8cc_source.html#l00821">v8::internal::GlobalHandles::ClearListOfYoungNodes()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="deoptimizer_8cc_source.html#l00405">v8::internal::Deoptimizer::DeoptimizeMarkedCode()</a>, <a class="el" href="mark-compact_8h_source.html#l00471">empty_new_space_pages_to_be_swept_</a>, <a class="el" href="memory-allocator_8cc_source.html#l00344">v8::internal::MemoryAllocator::Free()</a>, <a class="el" href="classv8_1_1internal_1_1NewSpace.html#a6666d02587ff04156b91f1e56dbedbd7">v8::internal::NewSpace::GarbageCollectionEpilogue()</a>, <a class="el" href="sweeper_8cc_source.html#l01615">v8::internal::Sweeper::GetTraceIdForFlowEvent()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01431">v8::internal::Isolate::global_handles()</a>, <a class="el" href="mark-compact_8h_source.html#l00421">have_code_to_deoptimize_</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="v8-unwinder_8h_source.html#l00045">v8::IDLE</a>, <a class="el" href="main-allocator_8h_source.html#l00253">v8::internal::MainAllocator::IsLabValid()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="mark-compact_8h_source.html#l00452">key_to_values_</a>, <a class="el" href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5">v8::internal::MemoryAllocator::kImmediately</a>, <a class="el" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">v8::internal::kMain</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00777">v8::internal::Heap::lo_space()</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="mark-compact_8h_source.html#l00430">local_weak_objects_</a>, <a class="el" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">v8::internal::MARK_COMPACTOR</a>, <a class="el" href="mark-compact_8h_source.html#l00429">marking_visitor_</a>, <a class="el" href="mark-compact_8h_source.html#l00424">marking_worklists_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00846">v8::internal::Heap::memory_allocator()</a>, <a class="el" href="mark-compact_8h_source.html#l00432">native_context_stats_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00780">v8::internal::Heap::new_lo_space()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00770">v8::internal::Heap::new_space()</a>, <a class="el" href="heap-allocator_8h_source.html#l00127">v8::internal::HeapAllocator::new_space_allocator()</a>, <a class="el" href="mark-compact_8h_source.html#l00449">queued_pages_to_be_freed_</a>, <a class="el" href="marking-worklist_8cc_source.html#l00051">v8::internal::MarkingWorklists::ReleaseContextWorklists()</a>, <a class="el" href="heap_8cc_source.html#l03987">v8::internal::Heap::ResizeNewSpace()</a>, <a class="el" href="mark-compact_8cc_source.html#l00834">v8::internal::anonymous_namespace{mark-compact.cc}::ShrinkPagesToObjectSizes()</a>, <a class="el" href="sweeper_8cc_source.html#l00769">v8::internal::Sweeper::StartMajorSweeperTasks()</a>, <a class="el" href="mark-compact_8cc_source.html#l00935">SweepArrayBufferExtensions()</a>, <a class="el" href="sweeper_8cc_source.html#l01550">v8::internal::Sweeper::SweepEmptyNewSpacePage()</a>, <a class="el" href="mark-compact_8h_source.html#l00456">sweeper_</a>, <a class="el" href="mark-compact_8cc_source.html#l06120">SweepLargeSpace()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00829">TRACE_EVENT_FLAG_FLOW_IN</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00830">TRACE_EVENT_FLAG_FLOW_OUT</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="gc-tracer_8h_source.html#l00084">TRACE_GC_EPOCH_WITH_FLOW</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="mark-compact_8h_source.html#l00427">weak_objects_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9d6f060a09240e70ae531c260c99650b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d6f060a09240e70ae531c260c99650b">&#9670;&nbsp;</a></span>FinishConcurrentMarking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::FinishConcurrentMarking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00799">799</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                                                   {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// FinishConcurrentMarking is called for both, concurrent and parallel,</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// marking. It is safe to call this function when tasks are already finished.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a884b7ca1bb9c41508d91ca620cdd29a9">garbage_collector</a>(),</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_marking || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_marking) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a43f88ef394ce90569543e44ab0381cf8">Join</a>();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a3f1743cd46ce9240e4ffbb5098de064b">FlushMemoryChunkData</a>();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a8eaf129f2de29cd9b015ed61b31babc5">FlushNativeContexts</a>(&amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">native_context_stats_</a>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    cpp_heap-&gt;FinishConcurrentMarkingIfNeeded();</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a3f1743cd46ce9240e4ffbb5098de064b"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a3f1743cd46ce9240e4ffbb5098de064b">v8::internal::ConcurrentMarking::FlushMemoryChunkData</a></div><div class="ttdeci">void FlushMemoryChunkData()</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8cc_source.html#l00853">concurrent-marking.cc:853</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a43f88ef394ce90569543e44ab0381cf8"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a43f88ef394ce90569543e44ab0381cf8">v8::internal::ConcurrentMarking::Join</a></div><div class="ttdeci">void Join()</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8cc_source.html#l00796">concurrent-marking.cc:796</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a884b7ca1bb9c41508d91ca620cdd29a9"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a884b7ca1bb9c41508d91ca620cdd29a9">v8::internal::ConcurrentMarking::garbage_collector</a></div><div class="ttdeci">GarbageCollector garbage_collector() const</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8h_source.html#l00081">concurrent-marking.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a8eaf129f2de29cd9b015ed61b31babc5"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a8eaf129f2de29cd9b015ed61b31babc5">v8::internal::ConcurrentMarking::FlushNativeContexts</a></div><div class="ttdeci">void FlushNativeContexts(NativeContextStats *main_stats)</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8cc_source.html#l00845">concurrent-marking.cc:845</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aaac51e78398da9ba59e847682b3a62fa"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">v8::internal::Heap::concurrent_marking</a></div><div class="ttdeci">ConcurrentMarking * concurrent_marking() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01125">heap.h:1125</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l01125">v8::internal::Heap::concurrent_marking()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02370">v8::internal::Heap::cpp_heap_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00853">v8::internal::ConcurrentMarking::FlushMemoryChunkData()</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00845">v8::internal::ConcurrentMarking::FlushNativeContexts()</a>, <a class="el" href="cpp-heap_8h_source.html#l00103">v8::internal::CppHeap::From()</a>, <a class="el" href="concurrent-marking_8h_source.html#l00081">v8::internal::ConcurrentMarking::garbage_collector()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00796">v8::internal::ConcurrentMarking::Join()</a>, <a class="el" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">v8::internal::MARK_COMPACTOR</a>, <a class="el" href="mark-compact_8h_source.html#l00432">native_context_stats_</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="afe3c91189f1c5ba073f1b8835017f358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3c91189f1c5ba073f1b8835017f358">&#9670;&nbsp;</a></span>FlushBytecodeFromSFI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::FlushBytecodeFromSFI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>shared_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03303">3303</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;                                            {</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(shared_info-&gt;HasBytecodeArray());</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <span class="comment">// Retain objects required for uncompiled data.</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;  Tagged&lt;String&gt; inferred_name = shared_info-&gt;inferred_name();</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="keywordtype">int</span> start_position = shared_info-&gt;StartPosition();</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordtype">int</span> end_position = shared_info-&gt;EndPosition();</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160; </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  shared_info-&gt;DiscardCompiledMetadata(</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;      [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;         <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="comment">// The size of the bytecode array should always be larger than an</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  <span class="comment">// UncompiledData object.</span></div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;  static_assert(<a class="code" href="classv8_1_1internal_1_1BytecodeArray.html#aecc5b608691b8af5c7a46f12b5e0e7bb">BytecodeArray::SizeFor</a>(0) &gt;=</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;                UncompiledDataWithoutPreparseData::kSize);</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <span class="comment">// Replace the bytecode with an uncompiled data object.</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  Tagged&lt;BytecodeArray&gt; bytecode_array =</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      shared_info-&gt;GetBytecodeArray(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(shared_info));</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  <span class="comment">// Zap the old entry in the trusted pointer table.</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  TrustedPointerTable&amp; table = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;trusted_pointer_table();</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  IndirectPointerSlot self_indirect_pointer_slot =</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      bytecode_array-&gt;RawIndirectPointerField(</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;          BytecodeArray::kSelfIndirectPointerOffset,</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;          kBytecodeArrayIndirectPointerTag);</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;  table.Zap(self_indirect_pointer_slot.Relaxed_LoadHandle());</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160; </div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> compiled_data = bytecode_array;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> compiled_data_start = compiled_data.address();</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  <span class="keywordtype">int</span> compiled_data_size = <a class="code" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(compiled_data-&gt;Size());</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  MutablePageMetadata* chunk =</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#a27e674b7d22c1799418a7fe14898e338">MutablePageMetadata::FromAddress</a>(compiled_data_start);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="comment">// Clear any recorded slots for the compiled data as being invalid.</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_NEW_BACKGROUND&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;      <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_OLD&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;      <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;      <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  <span class="comment">// Swap the map, using set_map_after_allocation to avoid verify heap checks</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;  <span class="comment">// which are not necessary since we are doing this during the GC atomic pause.</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;  compiled_data-&gt;set_map_after_allocation(</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      ReadOnlyRoots(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>).uncompiled_data_without_preparse_data_map(),</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75">SKIP_WRITE_BARRIER</a>);</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160; </div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;  <span class="comment">// Create a filler object for any left over space in the bytecode array.</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afea8da4813bd01742ab9297c08f06985">IsLargeObject</a>(compiled_data)) {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> aligned_filler_offset =</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <a class="code" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(UncompiledDataWithoutPreparseData::kSize);</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a4e77c4c4c45f64cd073d9e29b9d7fb91">CreateFillerObjectAt</a>(compiled_data.address() + aligned_filler_offset,</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                                compiled_data_size - aligned_filler_offset);</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  }</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160; </div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;  <span class="comment">// Initialize the uncompiled data.</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  Tagged&lt;UncompiledData&gt; uncompiled_data = Cast&lt;UncompiledData&gt;(compiled_data);</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160; </div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  uncompiled_data-&gt;InitAfterBytecodeFlush(</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), inferred_name, start_position, end_position,</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;         <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160; </div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;  <span class="comment">// Mark the uncompiled data as black, and ensure all fields have already been</span></div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <span class="comment">// marked.</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>,</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;                                             inferred_name));</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ada9b37f4e5abfa1ad3569dcfabea4ff1">MarkingHelper::GetLivenessMode</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, uncompiled_data) ==</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;      <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a4dc8cca289e4f7a300b90ed820cf9f0ba45867a604ddff7bf65264f5ddd2629f2">MarkingHelper::LivenessMode::kMarkbit</a>) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">TryMarkAndAccountLiveBytes</a>(uncompiled_data);</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  }</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160; </div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  <span class="comment">// Mark the new entry in the trusted pointer table as alive.</span></div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  TrustedPointerTable::Space* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a> = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;trusted_pointer_space();</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  table.Mark(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, self_indirect_pointer_slot.Relaxed_LoadHandle());</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160; </div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  shared_info-&gt;set_uncompiled_data(uncompiled_data);</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!shared_info-&gt;is_compiled());</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;}</div>
<div class="ttc" id="aclassheap_1_1base_1_1BasicSlotSet_html_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4"><div class="ttname"><a href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">heap::base::BasicSlotSet&lt; kTaggedSize &gt;::FREE_EMPTY_BUCKETS</a></div><div class="ttdeci">@ FREE_EMPTY_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="basic-slot-set_8h_source.html#l00043">basic-slot-set.h:43</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1BytecodeArray_html_aecc5b608691b8af5c7a46f12b5e0e7bb"><div class="ttname"><a href="classv8_1_1internal_1_1BytecodeArray.html#aecc5b608691b8af5c7a46f12b5e0e7bb">v8::internal::BytecodeArray::SizeFor</a></div><div class="ttdeci">static constexpr int SizeFor(int length)</div><div class="ttdef"><b>Definition:</b> <a href="bytecode-array_8h_source.html#l00062">bytecode-array.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a4e77c4c4c45f64cd073d9e29b9d7fb91"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a4e77c4c4c45f64cd073d9e29b9d7fb91">v8::internal::Heap::CreateFillerObjectAt</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void CreateFillerObjectAt(Address addr, int size, ClearFreedMemoryMode clear_memory_mode=ClearFreedMemoryMode::kDontClearFreedMemory)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03348">heap.cc:3348</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_afea8da4813bd01742ab9297c08f06985"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#afea8da4813bd01742ab9297c08f06985">v8::internal::Heap::IsLargeObject</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE bool IsLargeObject(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03427">heap.cc:3427</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingStateBase_html_a25369a80f635ffb368937574c7a4e6a6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">v8::internal::MarkingStateBase::TryMarkAndAccountLiveBytes</a></div><div class="ttdeci">bool TryMarkAndAccountLiveBytes(Tagged&lt; HeapObject &gt; obj)</div><div class="ttdef"><b>Definition:</b> <a href="marking-state-inl_8h_source.html#l00036">marking-state-inl.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a27e674b7d22c1799418a7fe14898e338"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a27e674b7d22c1799418a7fe14898e338">v8::internal::MutablePageMetadata::FromAddress</a></div><div class="ttdeci">static MutablePageMetadata * FromAddress(Address a)</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata-inl_8h_source.html#l00019">mutable-page-metadata-inl.h:19</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_ada344e3a620e580d3b149474dd995124"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">v8::internal::RememberedSet::RemoveRange</a></div><div class="ttdeci">static void RemoveRange(MutablePageMetadata *chunk, Address start, Address end, SlotSet::EmptyBucketMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set_8h_source.html#l00170">remembered-set.h:170</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a76f936b13cc7401de647c23963eda5c1"><div class="ttname"><a href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a></div><div class="ttdeci">#define ALIGN_TO_ALLOCATION_ALIGNMENT(value)</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01811">globals.h:1811</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75"><div class="ttname"><a href="namespacev8_1_1internal.html#a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75">v8::internal::SKIP_WRITE_BARRIER</a></div><div class="ttdeci">@ SKIP_WRITE_BARRIER</div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00052">objects.h:52</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab4955debfb9384e59e3d4e9fcab5b0a0"><div class="ttname"><a href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">v8::internal::Address</a></div><div class="ttdeci">uintptr_t Address</div><div class="ttdef"><b>Definition:</b> <a href="memcopy_8h_source.html#l00022">memcopy.h:22</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a4dc8cca289e4f7a300b90ed820cf9f0ba45867a604ddff7bf65264f5ddd2629f2"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a4dc8cca289e4f7a300b90ed820cf9f0ba45867a604ddff7bf65264f5ddd2629f2">v8::internal::MarkingHelper::LivenessMode::kMarkbit</a></div><div class="ttdeci">@ kMarkbit</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_ada9b37f4e5abfa1ad3569dcfabea4ff1"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#ada9b37f4e5abfa1ad3569dcfabea4ff1">v8::internal::MarkingHelper::GetLivenessMode</a></div><div class="ttdeci">static LivenessMode GetLivenessMode(Heap *heap, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="marking-inl_8h_source.html#l00304">marking-inl.h:304</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tagged_8h_source.html#l00525">v8::internal::Tagged&lt; HeapObject &gt;::address()</a>, <a class="el" href="common_2globals_8h_source.html#l01811">ALIGN_TO_ALLOCATION_ALIGNMENT</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="slots-inl_8h_source.html#l00409">v8::internal::IndirectPointerSlot::Relaxed_LoadHandle()</a>, <a class="el" href="objects_8h_source.html#l00052">v8::internal::SKIP_WRITE_BARRIER</a>, and <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>.</p>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358_cgraph.svg" width="100%" height="520"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4672c902176abf0363018f4b29435209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4672c902176abf0363018f4b29435209">&#9670;&nbsp;</a></span>FlushSFI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::FlushSFI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td>
          <td class="paramname"><em>bytecode_already_decompiled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03517">3517</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                                                                      {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  <span class="comment">// If baseline code flushing is disabled we should only flush bytecode</span></div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  <span class="comment">// from functions that don&#39;t have baseline data.</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code || !sfi-&gt;HasBaselineCode());</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160; </div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;  <span class="keywordflow">if</span> (bytecode_already_decompiled) {</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    sfi-&gt;DiscardCompiledMetadata(</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;           <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    <span class="comment">// If the BytecodeArray is dead, flush it, which will replace the field</span></div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    <span class="comment">// with an uncompiled data object.</span></div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afe3c91189f1c5ba073f1b8835017f358">FlushBytecodeFromSFI</a>(sfi);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  }</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_afe3c91189f1c5ba073f1b8835017f358"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#afe3c91189f1c5ba073f1b8835017f358">v8::internal::MarkCompactCollector::FlushBytecodeFromSFI</a></div><div class="ttdeci">void FlushBytecodeFromSFI(Tagged&lt; SharedFunctionInfo &gt; shared_info)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03303">mark-compact.cc:3303</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

</div>
</div>
<a id="ae19c3ac5994087b78c51c64221e1771c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19c3ac5994087b78c51c64221e1771c">&#9670;&nbsp;</a></span>heap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a>* v8::internal::MarkCompactCollector::heap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00189">189</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l01074">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::CheckForSharedObject()</a>, <a class="el" href="mark-compact_8cc_source.html#l01004">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::MarkObject()</a>, <a class="el" href="mark-compact-inl_8h_source.html#l00122">v8::internal::RootMarkingVisitor::MarkObjectByPointer()</a>, <a class="el" href="mark-compact_8cc_source.html#l00466">MaybeEnableBackgroundThreadsInCycle()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0aefdd8b8b50a471f4ab14827b26c4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aefdd8b8b50a471f4ab14827b26c4ad">&#9670;&nbsp;</a></span>is_compacting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::is_compacting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00147">147</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a>; }</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ade96b53880b218eba9217ef4f296dcdf"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">v8::internal::MarkCompactCollector::compacting_</a></div><div class="ttdeci">bool compacting_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00419">mark-compact.h:419</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00419">compacting_</a>.</p>

</div>
</div>
<a id="a5f0477b3276f6b872199164ffc981999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f0477b3276f6b872199164ffc981999">&#9670;&nbsp;</a></span>IsOnEvacuationCandidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::IsOnEvacuationCandidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="namespacev8_1_1internal.html#aa8509f8e21058aabbc6caa5f6425bd13">MaybeObject</a> &gt;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00119">119</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                                                      {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a1c9e126ddfcab88ef54ab6a899ece138">MemoryChunk::FromAddress</a>(obj.ptr())-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">IsEvacuationCandidate</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a1c9e126ddfcab88ef54ab6a899ece138"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a1c9e126ddfcab88ef54ab6a899ece138">v8::internal::MemoryChunk::FromAddress</a></div><div class="ttdeci">static MemoryChunk * FromAddress(Address addr)</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00185">memory-chunk.h:185</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a31917793e4e1f003c57c07b8dd2422fa"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">v8::internal::MemoryChunk::IsEvacuationCandidate</a></div><div class="ttdeci">bool IsEvacuationCandidate() const</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00291">memory-chunk.h:291</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk_8h_source.html#l00185">v8::internal::MemoryChunk::FromAddress()</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, and <a class="el" href="tagged-impl_8h_source.html#l00110">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::ptr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="scavenger_8cc_source.html#l00148">v8::internal::IterateAndScavengePromotedObjectsVisitor::HandleSlot()</a>, <a class="el" href="main-allocator_8cc_source.html#l00822">v8::internal::PagedSpaceAllocatorPolicy::TryAllocationFromFreeList()</a>, and <a class="el" href="mark-compact_8cc_source.html#l01695">v8::internal::EvacuateNewSpaceVisitor::TryEvacuateWithoutCopy()</a>.</p>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999_cgraph.svg" width="100%" height="427"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999_icgraph.svg" width="100%" height="498"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac134d900ab0dbca461ef7cb20318c4ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac134d900ab0dbca461ef7cb20318c4ba">&#9670;&nbsp;</a></span>IsUnmarkedHeapObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::IsUnmarkedHeapObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a>&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01832">1832</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                                                                            {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> o = *p;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(o)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object = Cast&lt;HeapObject&gt;(o);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <a class="code" href="namespaceheap.html">heap</a>, <a class="code" href="namespaceheap.html">heap</a>-&gt;non_atomic_marking_state(), heap_object);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="objects_8h_source.html#l00670">v8::internal::IsHeapObject()</a>, and <a class="el" href="marking-inl_8h_source.html#l00340">v8::internal::MarkingHelper::IsUnmarkedAndNotAlwaysLive()</a>.</p>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba_cgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a45dbe9fb4c2e4b5ebdf19806b2de88fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45dbe9fb4c2e4b5ebdf19806b2de88fe">&#9670;&nbsp;</a></span>IsUnmarkedSharedHeapObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::IsUnmarkedSharedHeapObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a>&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01841">1841</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                                                                        {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> o = *p;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(o)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object = Cast&lt;HeapObject&gt;(o);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  Heap* shared_space_heap =</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      client_heap-&gt;isolate()-&gt;shared_space_isolate()-&gt;heap();</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      shared_space_heap, shared_space_heap-&gt;non_atomic_marking_state(),</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      heap_object);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="heap-layout-inl_8h_source.html#l00067">v8::internal::HeapLayout::InWritableSharedSpace()</a>, <a class="el" href="objects_8h_source.html#l00670">v8::internal::IsHeapObject()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="marking-inl_8h_source.html#l00340">v8::internal::MarkingHelper::IsUnmarkedAndNotAlwaysLive()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01679">v8::internal::Heap::non_atomic_marking_state()</a>, and <a class="el" href="execution_2isolate_8h_source.html#l02335">v8::internal::Isolate::shared_space_isolate()</a>.</p>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9a770c9f4b80f0ac788fe5e0f1596713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a770c9f4b80f0ac788fe5e0f1596713">&#9670;&nbsp;</a></span>local_marking_worklists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html#a941d07bdea68cc187975415adc4dac79">MarkingWorklists::Local</a>* v8::internal::MarkCompactCollector::local_marking_worklists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00176">176</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                         {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>.</p>

<p class="reference">Referenced by <a class="el" href="concurrent-marking_8cc_source.html#l00743">v8::internal::ConcurrentMarking::RescheduleJobIfNeeded()</a>, <a class="el" href="incremental-marking_8cc_source.html#l00721">v8::internal::IncrementalMarking::ShouldFinalize()</a>, <a class="el" href="incremental-marking_8cc_source.html#l00240">v8::internal::IncrementalMarking::StartMarkingMajor()</a>, and <a class="el" href="concurrent-marking_8cc_source.html#l00647">v8::internal::ConcurrentMarking::TryScheduleJob()</a>.</p>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a9a770c9f4b80f0ac788fe5e0f1596713_icgraph.svg" width="100%" height="588"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5c26fb846b8fa0a693ab2d751fc7b1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c26fb846b8fa0a693ab2d751fc7b1c9">&#9670;&nbsp;</a></span>local_weak_objects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">WeakObjects::Local</a>* v8::internal::MarkCompactCollector::local_weak_objects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00181">181</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a>.get(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00430">local_weak_objects_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact-inl_8h_source.html#l00104">AddTransitionArray()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00296">TearDown()</a>.</p>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9_icgraph.svg" width="484" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5f4d0e2e67b039d30d737212e64b71fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f4d0e2e67b039d30d737212e64b71fa">&#9670;&nbsp;</a></span>MarkDependentCodeForDeoptimization()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkDependentCodeForDeoptimization </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03217">3217</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                                                              {</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  HeapObjectAndCode weak_object_in_code;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;weak_objects_in_code_local.Pop(</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;      &amp;weak_object_in_code)) {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = weak_object_in_code.heap_object;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    Tagged&lt;Code&gt; <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = weak_object_in_code.code;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, <span class="keywordtype">object</span>) &amp;&amp;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        !<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;embedded_objects_cleared()) {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;marked_for_deoptimization()) {</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;SetMarkedForDeoptimization(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;                                         LazyDeoptimizeReason::kWeakObjects);</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2bf16e5a4b1908c7abfc22383d37980f">have_code_to_deoptimize_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      }</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;ClearEmbeddedObjectsAndJSDispatchHandles(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;embedded_objects_cleared());</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    }</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;  }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;}</div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00039">v8::internal::HeapObjectAndCode::code</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="weak-object-worklists_8h_source.html#l00038">v8::internal::HeapObjectAndCode::heap_object</a>.</p>

</div>
</div>
<a id="a1c709cbcdf524f1f21d6780173a377b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c709cbcdf524f1f21d6780173a377b4">&#9670;&nbsp;</a></span>marking_worklists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html">MarkingWorklists</a>* v8::internal::MarkCompactCollector::marking_worklists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00174">174</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{ <span class="keywordflow">return</span> &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00424">marking_worklists_</a>.</p>

<p class="reference">Referenced by <a class="el" href="marking-barrier_8cc_source.html#l00345">v8::internal::MarkingBarrier::Activate()</a>, <a class="el" href="marking-barrier_8cc_source.html#l00355">v8::internal::MarkingBarrier::ActivateShared()</a>, and <a class="el" href="concurrent-marking_8cc_source.html#l00647">v8::internal::ConcurrentMarking::TryScheduleJob()</a>.</p>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a1c709cbcdf524f1f21d6780173a377b4_icgraph.svg" width="100%" height="536"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a16935f51d75fd467f80fae7c7d960e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16935f51d75fd467f80fae7c7d960e5e">&#9670;&nbsp;</a></span>MarkLiveObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkLiveObjects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02477">2477</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                                           {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <a class="code" href="gc-tracer_8h.html#ab1b9d31a6993723e2ab2a57d5d18ef5a">TRACE_GC_ARG1</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                <span class="stringliteral">&quot;UseBackgroundThreads&quot;</span>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>());</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> was_marked_incrementally =</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">IsStopped</a>();</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <span class="keywordflow">if</span> (was_marked_incrementally) {</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <span class="keyword">auto</span>* incremental_marking = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>();</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <a class="code" href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a>(</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_FINISH_INCREMENTAL,</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        incremental_marking-&gt;current_trace_id(), <a class="code" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(incremental_marking-&gt;IsMajorMarking());</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    incremental_marking-&gt;Stop();</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkingBarrier.html#a0961df883ba76c25aeba52b810d55f54">MarkingBarrier::PublishAll</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  }</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160; </div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(state_ == PREPARE_GC);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  state_ = MARK_LIVE_OBJECTS;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>) {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        -&gt;<a class="code" href="classv8_1_1internal_1_1CppHeap.html#a9171e6283279c509a9e40d2be7d9960e">EnterFinalPause</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aa99fdd8be93666d20d90c1d5067aefbc">embedder_stack_state_</a>);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  }</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0a89e89941e2601a090655513f208c65">RootMarkingVisitor</a> root_visitor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  {</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_ROOTS);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a158db1a522505fb3dd824882108797bb">MarkRoots</a>(&amp;root_visitor);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  }</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_CLIENT_HEAPS);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac8160c925310ee4a1b68a3ce930c2edb">MarkObjectsFromClientHeaps</a>();</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160; </div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_RETAIN_MAPS);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac29e4cf8c7be9c6a3e843b5695b16fb3">RetainMaps</a>();</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_marking &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_FULL_CLOSURE_PARALLEL);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">parallel_marking_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>, <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14908aaa211b8c1bbafb7e4496736114">MarkTransitiveClosure</a>();</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;               GCTracer::Scope::MC_MARK_FULL_CLOSURE_PARALLEL_JOIN);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">FinishConcurrentMarking</a>();</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">parallel_marking_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  }</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  {</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_ROOTS);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#acedafe750c7420c9b300b28d35551732">MarkRootsFromConservativeStack</a>(&amp;root_visitor);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  }</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  {</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_FULL_CLOSURE_SERIAL);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="comment">// Complete the transitive closure single-threaded to avoid races with</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="comment">// multiple threads when processing weak maps and embedder heaps.</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">IsStopped</a>());</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a24145cfb85d15c42c670288e26308822">cpp_heap</a>())) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="comment">// Lock the process-global mutex here and mark cross-thread roots again.</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="comment">// This is done as late as possible to keep locking durations short.</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      cpp_heap-&gt;EnterProcessGlobalAtomicPause();</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    }</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14908aaa211b8c1bbafb7e4496736114">MarkTransitiveClosure</a>();</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsEmpty());</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get()));</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab744335a59a10dfc63766f57720f8a8b">VerifyEphemeronMarking</a>();</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  }</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160; </div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="keywordflow">if</span> (was_marked_incrementally) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="comment">// Disable the marking barrier after concurrent/parallel marking has</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="comment">// finished as it will reset page flags that share the same bitmap as</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="comment">// the evacuation candidate bit.</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkingBarrier.html#ad7b8156049672e805f8bfd48a300936c">MarkingBarrier::DeactivateAll</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a25a5f2cf26f80f049dbbe6ea6046b754">traced_handles</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1TracedHandles.html#a4f33ad5439a15d4844bc3d8ce48e5f48">SetIsMarking</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  }</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160; </div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a97165101e46c49ad2629345f1cb48da5">epoch_</a>++;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a06980681d462120291c2047124cd6a3a"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">v8::internal::ConcurrentMarking::IsStopped</a></div><div class="ttdeci">bool IsStopped()</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8cc_source.html#l00828">concurrent-marking.cc:828</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_aaf8d90cff77b3890a4de513377521ce4"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">v8::internal::ConcurrentMarking::RescheduleJobIfNeeded</a></div><div class="ttdeci">void RescheduleJobIfNeeded(GarbageCollector garbage_collector, TaskPriority priority=TaskPriority::kUserVisible)</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8cc_source.html#l00743">concurrent-marking.cc:743</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_a9171e6283279c509a9e40d2be7d9960e"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#a9171e6283279c509a9e40d2be7d9960e">v8::internal::CppHeap::EnterFinalPause</a></div><div class="ttdeci">void EnterFinalPause(cppgc::EmbedderStackState stack_state)</div><div class="ttdef"><b>Definition:</b> <a href="cpp-heap_8cc_source.html#l00890">cpp-heap.cc:890</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a24145cfb85d15c42c670288e26308822"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a24145cfb85d15c42c670288e26308822">v8::internal::Heap::cpp_heap</a></div><div class="ttdeci">v8::CppHeap * cpp_heap() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01167">heap.h:1167</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aa99fdd8be93666d20d90c1d5067aefbc"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aa99fdd8be93666d20d90c1d5067aefbc">v8::internal::Heap::embedder_stack_state_</a></div><div class="ttdeci">StackState embedder_stack_state_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02374">heap.h:2374</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aca549fb459876aff6e5a580c807d1607"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">v8::internal::Heap::incremental_marking</a></div><div class="ttdeci">IncrementalMarking * incremental_marking() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01117">heap.h:1117</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_a421afcfedbad9dba889295ea646625fa"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">v8::internal::IncrementalMarking::IsStopped</a></div><div class="ttdeci">bool IsStopped() const</div><div class="ttdef"><b>Definition:</b> <a href="incremental-marking_8h_source.html#l00070">incremental-marking.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a25a5f2cf26f80f049dbbe6ea6046b754"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a25a5f2cf26f80f049dbbe6ea6046b754">v8::internal::Isolate::traced_handles</a></div><div class="ttdeci">TracedHandles * traced_handles()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01433">isolate.h:1433</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a0a89e89941e2601a090655513f208c65"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a0a89e89941e2601a090655513f208c65">v8::internal::MarkCompactCollector::RootMarkingVisitor</a></div><div class="ttdeci">friend class RootMarkingVisitor</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00479">mark-compact.h:479</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a14908aaa211b8c1bbafb7e4496736114"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a14908aaa211b8c1bbafb7e4496736114">v8::internal::MarkCompactCollector::MarkTransitiveClosure</a></div><div class="ttdeci">void MarkTransitiveClosure()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02346">mark-compact.cc:2346</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a158db1a522505fb3dd824882108797bb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a158db1a522505fb3dd824882108797bb">v8::internal::MarkCompactCollector::MarkRoots</a></div><div class="ttdeci">void MarkRoots(RootVisitor *root_visitor)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01854">mark-compact.cc:1854</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a8ba2df1d2e1c47234008d809d596228c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">v8::internal::MarkCompactCollector::parallel_marking_</a></div><div class="ttdeci">bool parallel_marking_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00422">mark-compact.h:422</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a9d6f060a09240e70ae531c260c99650b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">v8::internal::MarkCompactCollector::FinishConcurrentMarking</a></div><div class="ttdeci">void FinishConcurrentMarking()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00799">mark-compact.cc:799</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab744335a59a10dfc63766f57720f8a8b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab744335a59a10dfc63766f57720f8a8b">v8::internal::MarkCompactCollector::VerifyEphemeronMarking</a></div><div class="ttdeci">void VerifyEphemeronMarking()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02320">mark-compact.cc:2320</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac29e4cf8c7be9c6a3e843b5695b16fb3"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac29e4cf8c7be9c6a3e843b5695b16fb3">v8::internal::MarkCompactCollector::RetainMaps</a></div><div class="ttdeci">void RetainMaps()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02428">mark-compact.cc:2428</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac8160c925310ee4a1b68a3ce930c2edb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac8160c925310ee4a1b68a3ce930c2edb">v8::internal::MarkCompactCollector::MarkObjectsFromClientHeaps</a></div><div class="ttdeci">void MarkObjectsFromClientHeaps()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01909">mark-compact.cc:1909</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_acedafe750c7420c9b300b28d35551732"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#acedafe750c7420c9b300b28d35551732">v8::internal::MarkCompactCollector::MarkRootsFromConservativeStack</a></div><div class="ttdeci">void MarkRootsFromConservativeStack(RootVisitor *root_visitor)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l01887">mark-compact.cc:1887</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_a0961df883ba76c25aeba52b810d55f54"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#a0961df883ba76c25aeba52b810d55f54">v8::internal::MarkingBarrier::PublishAll</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void PublishAll(Heap *heap)</div><div class="ttdef"><b>Definition:</b> <a href="marking-barrier_8cc_source.html#l00414">marking-barrier.cc:414</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_ad7b8156049672e805f8bfd48a300936c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#ad7b8156049672e805f8bfd48a300936c">v8::internal::MarkingBarrier::DeactivateAll</a></div><div class="ttdeci">static void DeactivateAll(Heap *heap)</div><div class="ttdef"><b>Definition:</b> <a href="marking-barrier_8cc_source.html#l00363">marking-barrier.cc:363</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TracedHandles_html_a4f33ad5439a15d4844bc3d8ce48e5f48"><div class="ttname"><a href="classv8_1_1internal_1_1TracedHandles.html#a4f33ad5439a15d4844bc3d8ce48e5f48">v8::internal::TracedHandles::SetIsMarking</a></div><div class="ttdeci">void SetIsMarking(bool)</div><div class="ttdef"><b>Definition:</b> <a href="traced-handles_8cc_source.html#l00249">traced-handles.cc:249</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a4b6fc205b8b8bbe4275672c2a66c5b94"><div class="ttname"><a href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_WITH_FLOW(tracer, scope_id, bind_id, flow_flags)</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00052">gc-tracer.h:52</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_ab1b9d31a6993723e2ab2a57d5d18ef5a"><div class="ttname"><a href="gc-tracer_8h.html#ab1b9d31a6993723e2ab2a57d5d18ef5a">TRACE_GC_ARG1</a></div><div class="ttdeci">#define TRACE_GC_ARG1(tracer, scope_id, arg0_name, arg0_value)</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00043">gc-tracer.h:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9702f1cf0153510561af900313494b5e"><div class="ttname"><a href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">v8::internal::IsCppHeapMarkingFinished</a></div><div class="ttdeci">bool IsCppHeapMarkingFinished(Heap *heap, MarkingWorklists::Local *local_marking_worklists)</div><div class="ttdef"><b>Definition:</b> <a href="mark-sweep-utilities_8cc_source.html#l00140">mark-sweep-utilities.cc:140</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="mark-sweep-utilities_8cc_source.html#l00140">v8::internal::IsCppHeapMarkingFinished()</a>, <a class="el" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::kUserBlocking</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00829">TRACE_EVENT_FLAG_FLOW_IN</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="gc-tracer_8h_source.html#l00043">TRACE_GC_ARG1</a>, <a class="el" href="gc-tracer_8h_source.html#l00052">TRACE_GC_WITH_FLOW</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a12d88c9886e76b0365ad7e70af83b280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d88c9886e76b0365ad7e70af83b280">&#9670;&nbsp;</a></span>MarkObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267">MarkingHelper::WorklistTarget</a>&#160;</td>
          <td class="paramname"><em>target_worklist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact-inl_8h_source.html#l00028">28</a> of file <a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                                 {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1ReadOnlyHeap.html#a27e42af8000235aeb8fc6695f6296aca">ReadOnlyHeap::Contains</a>(obj) || <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">Contains</a>(obj));</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a0e9d1ac5aa056d7bf0087bce379e3b7c">MarkingHelper::TryMarkAndPush</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get(),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, target_worklist, obj);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a49599076f26bcf5567b86d2dc86cc7b2"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">v8::internal::Heap::Contains</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool Contains(Tagged&lt; HeapObject &gt; value) const</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l04481">heap.cc:4481</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ReadOnlyHeap_html_a27e42af8000235aeb8fc6695f6296aca"><div class="ttname"><a href="classv8_1_1internal_1_1ReadOnlyHeap.html#a27e42af8000235aeb8fc6695f6296aca">v8::internal::ReadOnlyHeap::Contains</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE bool Contains(Address address)</div><div class="ttdef"><b>Definition:</b> <a href="read-only-heap_8cc_source.html#l00207">read-only-heap.cc:207</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="read-only-heap_8cc_source.html#l00207">v8::internal::ReadOnlyHeap::Contains()</a>, <a class="el" href="heap_8cc_source.html#l04481">v8::internal::Heap::Contains()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="mark-compact_8h_source.html#l00454">marking_state_</a>, and <a class="el" href="marking-inl_8h_source.html#l00350">v8::internal::MarkingHelper::TryMarkAndPush()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l01004">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::MarkObject()</a>.</p>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab6e6080b49b981420d6462957e003821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e6080b49b981420d6462957e003821">&#9670;&nbsp;</a></span>MarkObjectsFromClientHeap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkObjectsFromClientHeap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01919">1919</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                                                                    {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// There is no OLD_TO_SHARED remembered set for the young generation. We</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">// therefore need to iterate each object and check whether it points into the</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="comment">// shared heap. As an optimization and to avoid a second heap iteration in the</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="comment">// &quot;update pointers&quot; phase, all pointers into the shared heap are recorded in</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">// the OLD_TO_SHARED remembered set as well.</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  SharedHeapObjectVisitor visitor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  PtrComprCageBase cage_base(client);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  Heap* client_heap = client-&gt;heap();</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="comment">// Finish sweeping quarantined pages for Scavenger&#39;s new space in order to</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">// iterate objects in it.</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  client_heap-&gt;EnsureQuarantinedPagesSweepingCompleted();</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="comment">// Finish sweeping for new space in order to iterate objects in it.</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  client_heap-&gt;sweeper()-&gt;FinishMinorJobs();</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// Finish sweeping for old generation in order to iterate OLD_TO_SHARED.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  client_heap-&gt;sweeper()-&gt;FinishMajorJobs();</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_space = client_heap-&gt;new_space()) {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!client_heap-&gt;allocator()-&gt;new_space_allocator()-&gt;IsLabValid());</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">for</span> (PageMetadata* page : *new_space) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> obj : HeapObjectRange(page)) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        visitor.Visit(obj);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordflow">if</span> (client_heap-&gt;new_lo_space()) {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    std::unique_ptr&lt;ObjectIterator&gt; iterator =</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        client_heap-&gt;new_lo_space()-&gt;GetObjectIterator(client_heap);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> obj = iterator-&gt;Next(); !obj.is_null();</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;         obj = iterator-&gt;Next()) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      visitor.Visit(obj);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// In the old generation we can simply use the OLD_TO_SHARED remembered set to</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// find all incoming pointers into the shared heap.</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  OldGenerationMemoryChunkIterator chunk_iterator(client_heap);</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">// Tracking OLD_TO_SHARED requires the write barrier.</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.disable_write_barriers);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">for</span> (MutablePageMetadata* chunk = chunk_iterator.next(); chunk;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;       chunk = chunk_iterator.next()) {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> slot_count = <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;OLD_TO_SHARED&gt;::Iterate</a>(</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        chunk,</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        [collector = <span class="keyword">this</span>, cage_base](<a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;          Tagged&lt;MaybeObject&gt; obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;          <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_object) &amp;&amp;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;              <a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            <span class="comment">// If the object points to the black allocated shared page, don&#39;t</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <span class="comment">// mark the object, but still keep the slot.</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            if (MarkingHelper::ShouldMarkObject(collector-&gt;heap(),</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                                                heap_object)) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;              collector-&gt;MarkRootObject(</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                  Root::kClientHeap, heap_object,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                  MarkingHelper::WorklistTarget::kRegular);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;          }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        },</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span> (slot_count == 0) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      chunk-&gt;ReleaseSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    }</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160; </div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> typed_slot_count = <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#a948ca4aacbb909303ffd8d7b78ceb9be">RememberedSet&lt;OLD_TO_SHARED&gt;::IterateTyped</a>(</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        chunk,</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        [collector = <span class="keyword">this</span>, client_heap](<a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">SlotType</a> slot_type, <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> slot) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object =</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;              <a class="code" href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a4b52de1f32d1c5e37149e76eb8b3d387">UpdateTypedSlotHelper::GetTargetObject</a>(client_heap, slot_type,</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                                                     slot);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            <span class="comment">// If the object points to the black allocated shared page, don&#39;t</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="comment">// mark the object, but still keep the slot.</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector-&gt;heap(),</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                                                heap_object)) {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;              collector-&gt;MarkRootObject(</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                  Root::kClientHeap, heap_object,</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                  <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          }</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        });</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="keywordflow">if</span> (typed_slot_count == 0) {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      chunk-&gt;ReleaseTypedSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    }</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> protected_slot_count =</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Iterate</a>(</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            chunk,</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            [collector = <span class="keyword">this</span>](<a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;              <a class="code" href="namespacev8_1_1internal.html#a69c3bdc8841db30ac59806f44663d229">ProtectedPointerSlot</a> protected_slot(slot.address());</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;              Tagged&lt;MaybeObject&gt; obj = protected_slot.Relaxed_Load();</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;              <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;              <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_object) &amp;&amp;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                <span class="comment">// If the object points to the black allocated shared page,</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                <span class="comment">// don&#39;t mark the object, but still keep the slot.</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector-&gt;heap(),</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                                                    heap_object)) {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                  collector-&gt;MarkRootObject(</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                      Root::kClientHeap, heap_object,</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                      <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;              }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            },</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span> (protected_slot_count == 0) {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      chunk-&gt;ReleaseSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31">TRUSTED_TO_SHARED_TRUSTED</a>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#ab2246faa71151b0796765b988d046828">IsSharedExternalPointerType</a>(<a class="code" href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbca592a1b13d5f6454340f5d3e2be0f0909">kExternalStringResourceTag</a>));</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#ab2246faa71151b0796765b988d046828">IsSharedExternalPointerType</a>(<a class="code" href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbca9ffc9bd9f1613f7fdb6e42f391828ff7">kExternalStringResourceDataTag</a>));</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">// All ExternalString resources are stored in the shared external pointer</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// table. Mark entries from client heaps.</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  ExternalPointerTable&amp; shared_table = client-&gt;shared_external_pointer_table();</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  ExternalPointerTable::Space* shared_space =</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      client-&gt;shared_external_pointer_space();</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  MarkExternalPointerFromExternalStringTable external_string_visitor(</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      &amp;shared_table, shared_space);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  client_heap-&gt;external_string_table_.IterateAll(&amp;external_string_visitor);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_a948ca4aacbb909303ffd8d7b78ceb9be"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#a948ca4aacbb909303ffd8d7b78ceb9be">v8::internal::RememberedSet::IterateTyped</a></div><div class="ttdeci">static int IterateTyped(MutablePageMetadata *chunk, Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set_8h_source.html#l00280">remembered-set.h:280</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_af1f20aa96b6a02882a1fe0ce5e8b1da3"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">v8::internal::RememberedSet::Iterate</a></div><div class="ttdeci">static int Iterate(MutablePageMetadata *chunk, Callback callback, SlotSet::EmptyBucketMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set_8h_source.html#l00198">remembered-set.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdateTypedSlotHelper_html_a4b52de1f32d1c5e37149e76eb8b3d387"><div class="ttname"><a href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a4b52de1f32d1c5e37149e76eb8b3d387">v8::internal::UpdateTypedSlotHelper::GetTargetObject</a></div><div class="ttdeci">static Tagged&lt; HeapObject &gt; GetTargetObject(Heap *heap, SlotType slot_type, Address addr)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set-inl_8h_source.html#l00069">remembered-set-inl.h:69</a></div></div>
<div class="ttc" id="anamespaceheap_1_1base_html_af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a"><div class="ttname"><a href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">heap::base::REMOVE_SLOT</a></div><div class="ttdeci">@ REMOVE_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="basic-slot-set_8h_source.html#l00022">basic-slot-set.h:22</a></div></div>
<div class="ttc" id="anamespaceheap_1_1base_html_af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40"><div class="ttname"><a href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">heap::base::KEEP_SLOT</a></div><div class="ttdeci">@ KEEP_SLOT</div><div class="ttdef"><b>Definition:</b> <a href="basic-slot-set_8h_source.html#l00022">basic-slot-set.h:22</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a69c3bdc8841db30ac59806f44663d229"><div class="ttname"><a href="namespacev8_1_1internal.html#a69c3bdc8841db30ac59806f44663d229">v8::internal::ProtectedPointerSlot</a></div><div class="ttdeci">SlotTraits::TProtectedPointerSlot ProtectedPointerSlot</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01266">globals.h:1266</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa5178998e7ae493acf744bc92b1fbdbca592a1b13d5f6454340f5d3e2be0f0909"><div class="ttname"><a href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbca592a1b13d5f6454340f5d3e2be0f0909">v8::internal::kExternalStringResourceTag</a></div><div class="ttdeci">@ kExternalStringResourceTag</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00566">v8-internal.h:566</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa5178998e7ae493acf744bc92b1fbdbca9ffc9bd9f1613f7fdb6e42f391828ff7"><div class="ttname"><a href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbca9ffc9bd9f1613f7fdb6e42f391828ff7">v8::internal::kExternalStringResourceDataTag</a></div><div class="ttdeci">@ kExternalStringResourceDataTag</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00567">v8-internal.h:567</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab2246faa71151b0796765b988d046828"><div class="ttname"><a href="namespacev8_1_1internal.html#ab2246faa71151b0796765b988d046828">v8::internal::IsSharedExternalPointerType</a></div><div class="ttdeci">static constexpr bool IsSharedExternalPointerType(ExternalPointerTagRange tag_range)</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00683">v8-internal.h:683</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31">v8::internal::TRUSTED_TO_SHARED_TRUSTED</a></div><div class="ttdeci">@ TRUSTED_TO_SHARED_TRUSTED</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00037">mutable-page-metadata.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">v8::internal::OLD_TO_SHARED</a></div><div class="ttdeci">@ OLD_TO_SHARED</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00034">mutable-page-metadata.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">v8::internal::SlotType</a></div><div class="ttdeci">SlotType</div><div class="ttdef"><b>Definition:</b> <a href="slot-set_8h_source.html#l00232">slot-set.h:232</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">v8::internal::MarkingHelper::WorklistTarget::kRegular</a></div><div class="ttdeci">@ kRegular</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l01696">v8::internal::Heap::allocator()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="heap_8cc_source.html#l07548">v8::internal::Heap::EnsureQuarantinedPagesSweepingCompleted()</a>, <a class="el" href="sweeper_8cc_source.html#l00857">v8::internal::Sweeper::FinishMajorJobs()</a>, <a class="el" href="sweeper_8cc_source.html#l00927">v8::internal::Sweeper::FinishMinorJobs()</a>, <a class="el" href="basic-slot-set_8h_source.html#l00043">heap::base::BasicSlotSet&lt; kTaggedSize &gt;::FREE_EMPTY_BUCKETS</a>, <a class="el" href="tagged-impl-inl_8h_source.html#l00048">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::GetHeapObject()</a>, <a class="el" href="large-spaces_8cc_source.html#l00293">v8::internal::LargeObjectSpace::GetObjectIterator()</a>, <a class="el" href="remembered-set-inl_8h_source.html#l00069">v8::internal::UpdateTypedSlotHelper::GetTargetObject()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="heap-layout-inl_8h_source.html#l00067">v8::internal::HeapLayout::InWritableSharedSpace()</a>, <a class="el" href="tagged_8h_source.html#l00502">v8::internal::Tagged&lt; HeapObject &gt;::is_null()</a>, <a class="el" href="main-allocator_8h_source.html#l00253">v8::internal::MainAllocator::IsLabValid()</a>, <a class="el" href="remembered-set_8h_source.html#l00198">v8::internal::RememberedSet&lt; type &gt;::Iterate()</a>, <a class="el" href="remembered-set_8h_source.html#l00280">v8::internal::RememberedSet&lt; type &gt;::IterateTyped()</a>, <a class="el" href="basic-slot-set_8h_source.html#l00022">heap::base::KEEP_SLOT</a>, <a class="el" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">v8::internal::MarkingHelper::kRegular</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00780">v8::internal::Heap::new_lo_space()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00770">v8::internal::Heap::new_space()</a>, <a class="el" href="heap-allocator_8h_source.html#l00127">v8::internal::HeapAllocator::new_space_allocator()</a>, <a class="el" href="spaces-inl_8h_source.html#l00068">v8::internal::OldGenerationMemoryChunkIterator::next()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00034">v8::internal::OLD_TO_SHARED</a>, <a class="el" href="slots-inl_8h_source.html#l00082">v8::internal::FullObjectSlot::Relaxed_Load()</a>, <a class="el" href="slots-inl_8h_source.html#l00141">v8::internal::FullMaybeObjectSlot::Relaxed_Load()</a>, <a class="el" href="basic-slot-set_8h_source.html#l00022">heap::base::REMOVE_SLOT</a>, <a class="el" href="marking-inl_8h_source.html#l00278">v8::internal::MarkingHelper::ShouldMarkObject()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00864">v8::internal::Heap::sweeper()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00037">v8::internal::TRUSTED_TO_SHARED_TRUSTED</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="heap-visitor-inl_8h_source.html#l00093">v8::internal::HeapVisitor&lt; ConcreteVisitor &gt;::Visit()</a>.</p>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ab6e6080b49b981420d6462957e003821_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac8160c925310ee4a1b68a3ce930c2edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8160c925310ee4a1b68a3ce930c2edb">&#9670;&nbsp;</a></span>MarkObjectsFromClientHeaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkObjectsFromClientHeaps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01909">1909</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                                      {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (!isolate-&gt;is_shared_space_isolate()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6bcede2c3a0b688eca7679947e4704d4">global_safepoint</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalSafepoint.html#a32122b662818cfca794f899a8acac219">IterateClientIsolates</a>(</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      [collector = <span class="keyword">this</span>](Isolate* client) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        collector-&gt;MarkObjectsFromClientHeap(client);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      });</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalSafepoint_html_a32122b662818cfca794f899a8acac219"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalSafepoint.html#a32122b662818cfca794f899a8acac219">v8::internal::GlobalSafepoint::IterateClientIsolates</a></div><div class="ttdeci">void IterateClientIsolates(Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="safepoint_8h_source.html#l00190">safepoint.h:190</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a6bcede2c3a0b688eca7679947e4704d4"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a6bcede2c3a0b688eca7679947e4704d4">v8::internal::Isolate::global_safepoint</a></div><div class="ttdeci">GlobalSafepoint * global_safepoint() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l02345">isolate.h:2345</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, and <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>.</p>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb_cgraph.svg" width="100%" height="525"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4ff3035e5f30676d376dfe540f5cb6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff3035e5f30676d376dfe540f5cb6ea">&#9670;&nbsp;</a></span>MarkRootObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkRootObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a>&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267">MarkingHelper::WorklistTarget</a>&#160;</td>
          <td class="paramname"><em>target_worklist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact-inl_8h_source.html#l00036">36</a> of file <a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                                 {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1ReadOnlyHeap.html#a27e42af8000235aeb8fc6695f6296aca">ReadOnlyHeap::Contains</a>(obj) || <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">Contains</a>(obj));</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a0e9d1ac5aa056d7bf0087bce379e3b7c">MarkingHelper::TryMarkAndPush</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get(),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, target_worklist, obj);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">in_conservative_stack_scanning_</a>)) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(root, Root::kStackRoots);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    MemoryChunk* chunk = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(obj);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;IsEvacuationCandidate()) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!chunk-&gt;InYoungGeneration());</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8c05858a7577a61d236de24903278946">ReportAbortedEvacuationCandidateDueToFlags</a>(</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;          <a class="code" href="classv8_1_1internal_1_1PageMetadata.html#a08ed4b4b38b8a49836598d6a447e30f5">PageMetadata::cast</a>(chunk-&gt;Metadata()), chunk);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chunk-&gt;InYoungGeneration() &amp;&amp; !chunk-&gt;IsLargePage()) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(chunk-&gt;IsToPage());</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">if</span> (!chunk-&gt;IsQuarantined()) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        chunk-&gt;SetFlagNonExecutable(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a0ad4434a83e99cc953d26989c7caa7d4">MemoryChunk::IS_QUARANTINED</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a813f065fd20e706f633a1f94da96f839"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">v8::internal::MarkCompactCollector::in_conservative_stack_scanning_</a></div><div class="ttdeci">bool in_conservative_stack_scanning_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00475">mark-compact.h:475</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a0481ad8f68cb1d4a794d588d80cc8f54"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">v8::internal::MemoryChunk::FromHeapObject</a></div><div class="ttdeci">static MemoryChunk * FromHeapObject(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00190">memory-chunk.h:190</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a0ad4434a83e99cc953d26989c7caa7d4"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a0ad4434a83e99cc953d26989c7caa7d4">v8::internal::MemoryChunk::IS_QUARANTINED</a></div><div class="ttdeci">@ IS_QUARANTINED</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00140">memory-chunk.h:140</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageMetadata_html_a08ed4b4b38b8a49836598d6a447e30f5"><div class="ttname"><a href="classv8_1_1internal_1_1PageMetadata.html#a08ed4b4b38b8a49836598d6a447e30f5">v8::internal::PageMetadata::cast</a></div><div class="ttdeci">static PageMetadata * cast(MemoryChunkMetadata *metadata)</div><div class="ttdef"><b>Definition:</b> <a href="page-metadata_8h_source.html#l00035">page-metadata.h:35</a></div></div>
<div class="ttc" id="av8config_8h_html_a67bd29db07c711b0fb11ff1c324ebb60"><div class="ttname"><a href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a></div><div class="ttdeci">#define V8_UNLIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00660">v8config.h:660</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="page-metadata_8h_source.html#l00035">v8::internal::PageMetadata::cast()</a>, <a class="el" href="read-only-heap_8cc_source.html#l00207">v8::internal::ReadOnlyHeap::Contains()</a>, <a class="el" href="heap_8cc_source.html#l04481">v8::internal::Heap::Contains()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="memory-chunk_8h_source.html#l00190">v8::internal::MemoryChunk::FromHeapObject()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="mark-compact_8h_source.html#l00475">in_conservative_stack_scanning_</a>, <a class="el" href="memory-chunk_8h_source.html#l00208">v8::internal::MemoryChunk::InYoungGeneration()</a>, <a class="el" href="memory-chunk_8h_source.html#l00140">v8::internal::MemoryChunk::IS_QUARANTINED</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00314">v8::internal::MemoryChunk::IsLargePage()</a>, <a class="el" href="memory-chunk_8h_source.html#l00324">v8::internal::MemoryChunk::IsQuarantined()</a>, <a class="el" href="memory-chunk_8h_source.html#l00310">v8::internal::MemoryChunk::IsToPage()</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="mark-compact_8h_source.html#l00454">marking_state_</a>, <a class="el" href="memory-chunk-inl_8h_source.html#l00017">v8::internal::MemoryChunk::Metadata()</a>, <a class="el" href="mark-compact_8cc_source.html#l05879">ReportAbortedEvacuationCandidateDueToFlags()</a>, <a class="el" href="memory-chunk_8h_source.html#l00240">v8::internal::MemoryChunk::SetFlagNonExecutable()</a>, <a class="el" href="marking-inl_8h_source.html#l00350">v8::internal::MarkingHelper::TryMarkAndPush()</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l01074">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::CheckForSharedObject()</a>, and <a class="el" href="mark-compact-inl_8h_source.html#l00122">v8::internal::RootMarkingVisitor::MarkObjectByPointer()</a>.</p>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea_icgraph.svg" width="100%" height="569"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a158db1a522505fb3dd824882108797bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a158db1a522505fb3dd824882108797bb">&#9670;&nbsp;</a></span>MarkRoots()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkRoots </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> *&#160;</td>
          <td class="paramname"><em>root_visitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01854">1854</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                                                              {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="comment">// Mark the heap roots including global variables, stack variables,</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// etc., and all objects reachable from them.</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a888246e231dc6514e84cbad718195f2e">IterateRoots</a>(</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      root_visitor,</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      base::EnumSet&lt;SkipRoot&gt;{<a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">SkipRoot::kWeak</a>, <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155">SkipRoot::kTracedHandles</a>,</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                              <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">SkipRoot::kConservativeStack</a>,</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                              <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">SkipRoot::kReadOnlyBuiltins</a>});</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="comment">// Custom marking for top optimized frame.</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  CustomRootBodyMarkingVisitor custom_root_body_visitor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf362cecdae97f4d77f1b446496fcbe6">ProcessTopOptimizedFrame</a>(&amp;custom_root_body_visitor, isolate);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    ClientRootVisitor&lt;&gt; client_root_visitor(root_visitor);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    ClientObjectVisitor&lt;&gt; client_custom_root_body_visitor(</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        &amp;custom_root_body_visitor);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        [<span class="keyword">this</span>, &amp;client_root_visitor,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;         &amp;client_custom_root_body_visitor](Isolate* client) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;          client-&gt;heap()-&gt;IterateRoots(</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;              &amp;client_root_visitor,</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;              base::EnumSet&lt;SkipRoot&gt;{<a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">SkipRoot::kWeak</a>,</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                                      <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">SkipRoot::kConservativeStack</a>,</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                                      <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">SkipRoot::kReadOnlyBuiltins</a>});</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf362cecdae97f4d77f1b446496fcbe6">ProcessTopOptimizedFrame</a>(&amp;client_custom_root_body_visitor, client);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        });</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  }</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a888246e231dc6514e84cbad718195f2e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a888246e231dc6514e84cbad718195f2e">v8::internal::Heap::IterateRoots</a></div><div class="ttdeci">void IterateRoots(RootVisitor *v, base::EnumSet&lt; SkipRoot &gt; options, IterateRootsMode roots_mode=IterateRootsMode::kMainIsolate)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l04808">heap.cc:4808</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaf362cecdae97f4d77f1b446496fcbe6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf362cecdae97f4d77f1b446496fcbe6">v8::internal::MarkCompactCollector::ProcessTopOptimizedFrame</a></div><div class="ttdeci">void ProcessTopOptimizedFrame(ObjectVisitor *visitor, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02359">mark-compact.cc:2359</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">v8::internal::SkipRoot::kReadOnlyBuiltins</a></div><div class="ttdeci">@ kReadOnlyBuiltins</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">v8::internal::SkipRoot::kConservativeStack</a></div><div class="ttdeci">@ kConservativeStack</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155">v8::internal::SkipRoot::kTracedHandles</a></div><div class="ttdeci">@ kTracedHandles</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">v8::internal::SkipRoot::kWeak</a></div><div class="ttdeci">@ kWeak</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>, <a class="el" href="heap_8cc_source.html#l04808">v8::internal::Heap::IterateRoots()</a>, <a class="el" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">v8::internal::kConservativeStack</a>, <a class="el" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">v8::internal::kReadOnlyBuiltins</a>, <a class="el" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155">v8::internal::kTracedHandles</a>, <a class="el" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">v8::internal::kWeak</a>, and <a class="el" href="mark-compact_8cc_source.html#l02359">ProcessTopOptimizedFrame()</a>.</p>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="acedafe750c7420c9b300b28d35551732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedafe750c7420c9b300b28d35551732">&#9670;&nbsp;</a></span>MarkRootsFromConservativeStack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkRootsFromConservativeStack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> *&#160;</td>
          <td class="paramname"><em>root_visitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l01887">1887</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                               {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::CONSERVATIVE_STACK_SCANNING);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">in_conservative_stack_scanning_</a>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">in_conservative_stack_scanning_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a905002cc9f6743a32fc5456088997ff7">IterateConservativeStackRoots</a>(root_visitor,</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                                       <a class="code" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d">Heap::IterateRootsMode::kMainIsolate</a>);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    ClientRootVisitor&lt;&gt; client_root_visitor(root_visitor);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="comment">// For client isolates, use the stack marker to conservatively scan the</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// stack.</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        [v = &amp;client_root_visitor](Isolate* client) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;          client-&gt;heap()-&gt;IterateConservativeStackRoots(</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;              v, <a class="code" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0">Heap::IterateRootsMode::kClientIsolate</a>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        });</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a813f065fd20e706f633a1f94da96f839">in_conservative_stack_scanning_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d">v8::internal::Heap::IterateRootsMode::kMainIsolate</a></div><div class="ttdeci">@ kMainIsolate</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0">v8::internal::Heap::IterateRootsMode::kClientIsolate</a></div><div class="ttdeci">@ kClientIsolate</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a905002cc9f6743a32fc5456088997ff7"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a905002cc9f6743a32fc5456088997ff7">v8::internal::Heap::IterateConservativeStackRoots</a></div><div class="ttdeci">void IterateConservativeStackRoots(RootVisitor *root_visitor, IterateRootsMode roots_mode=IterateRootsMode::kMainIsolate)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l04987">heap.cc:4987</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="mark-compact_8h_source.html#l00475">in_conservative_stack_scanning_</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>, <a class="el" href="heap_8cc_source.html#l04987">v8::internal::Heap::IterateConservativeStackRoots()</a>, <a class="el" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0">v8::internal::Heap::kClientIsolate</a>, <a class="el" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d">v8::internal::Heap::kMainIsolate</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, and <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>.</p>
<div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a14908aaa211b8c1bbafb7e4496736114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14908aaa211b8c1bbafb7e4496736114">&#9670;&nbsp;</a></span>MarkTransitiveClosure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkTransitiveClosure </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02346">2346</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                                                 {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="comment">// Incremental marking might leave ephemerons in main task&#39;s local</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// buffer, flush it into global pool.</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a29754ded838631a20e64ff72c4ebc7b5">MarkTransitiveClosureUntilFixpoint</a>()) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="comment">// Fixpoint iteration needed too many iterations and was cancelled. Use the</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="comment">// guaranteed linear algorithm. But only in the final single-thread marking</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="comment">// phase.</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">parallel_marking_</a>) <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aab5735ec944913ace7e63d14f47ba872">MarkTransitiveClosureLinear</a>();</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a29754ded838631a20e64ff72c4ebc7b5"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a29754ded838631a20e64ff72c4ebc7b5">v8::internal::MarkCompactCollector::MarkTransitiveClosureUntilFixpoint</a></div><div class="ttdeci">bool MarkTransitiveClosureUntilFixpoint()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02058">mark-compact.cc:2058</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aab5735ec944913ace7e63d14f47ba872"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aab5735ec944913ace7e63d14f47ba872">v8::internal::MarkCompactCollector::MarkTransitiveClosureLinear</a></div><div class="ttdeci">void MarkTransitiveClosureLinear()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02128">mark-compact.cc:2128</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjects_1_1Local_html_ad05233ba4265300887d0800ff7d7f3f9"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">v8::internal::WeakObjects::Local::Publish</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Publish()</div><div class="ttdef"><b>Definition:</b> <a href="weak-object-worklists_8cc_source.html#l00030">weak-object-worklists.cc:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab5735ec944913ace7e63d14f47ba872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5735ec944913ace7e63d14f47ba872">&#9670;&nbsp;</a></span>MarkTransitiveClosureLinear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MarkTransitiveClosureLinear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02128">2128</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                                                       {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;           GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_LINEAR);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="comment">// This phase doesn&#39;t support parallel marking.</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">IsStopped</a>());</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.empty());</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="comment">// Update visitor to directly add new ephemerons to key_to_values_.</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">marking_visitor_</a>-&gt;SetKeyToValues(&amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160; </div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  Ephemeron ephemeron;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">ApplyEphemeronSemantics</a>(ephemeron.key, ephemeron.value) ==</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e">EphemeronResult::kUnresolved</a>) {</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.try_emplace(ephemeron.key).first;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      it-&gt;second.push_back(ephemeron.value);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  }</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordtype">bool</span> work_to_do;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa35f5f312b9c6ccc1965b9cba1ae14fc">PerformWrapperTracing</a>();</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;               GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_MARKING);</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="comment">// Drain marking worklist but:</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <span class="comment">// (1) push all new ephemerons directly into key_to_values_.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="comment">// (2) look up all traced objects in key_to_values_.</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0af0fd7aa4d838723848a5c082e43412">ProcessMarkingWorklist</a>&lt;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;          <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7">MarkingWorklistProcessingMode::kProcessRememberedEphemerons</a>&gt;(</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;          <a class="code" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>(), SIZE_MAX);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    }</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="comment">// Do NOT drain marking worklist here, otherwise the current checks</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="comment">// for work_to_do are not sufficient for determining if another iteration</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="comment">// is necessary.</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    work_to_do =</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsEmpty() ||</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        !<a class="code" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get());</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  } <span class="keywordflow">while</span> (work_to_do);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsEmpty());</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.current_ephemerons.IsEmpty());</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.next_ephemerons.IsEmpty());</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="comment">// Flush local ephemerons for main task to global pool.</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;ephemeron_hash_tables_local.<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_a1330af8b50fc0206f46945ea8d6922cf"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a></div><div class="ttdeci">static constexpr TimeDelta Max()</div><div class="ttdef"><b>Definition:</b> <a href="time_8h_source.html#l00218">time.h:218</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a0af0fd7aa4d838723848a5c082e43412"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a0af0fd7aa4d838723848a5c082e43412">v8::internal::MarkCompactCollector::ProcessMarkingWorklist</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; ProcessMarkingWorklist(v8::base::TimeDelta max_duration, size_t max_bytes_to_process)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02200">mark-compact.cc:2200</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa35f5f312b9c6ccc1965b9cba1ae14fc"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa35f5f312b9c6ccc1965b9cba1ae14fc">v8::internal::MarkCompactCollector::PerformWrapperTracing</a></div><div class="ttdeci">void PerformWrapperTracing()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02185">mark-compact.cc:2185</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab610702a8f54d8e17897592b3047103c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">v8::internal::MarkCompactCollector::ApplyEphemeronSemantics</a></div><div class="ttdeci">EphemeronResult ApplyEphemeronSemantics(Tagged&lt; HeapObject &gt; key, Tagged&lt; HeapObject &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02286">mark-compact.cc:2286</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7">v8::internal::MarkCompactCollector::MarkingWorklistProcessingMode::kProcessRememberedEphemerons</a></div><div class="ttdeci">@ kProcessRememberedEphemerons</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="mark-sweep-utilities_8cc_source.html#l00140">v8::internal::IsCppHeapMarkingFinished()</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00017">v8::internal::Ephemeron::key</a>, <a class="el" href="time_8h_source.html#l00218">v8::base::TimeDelta::Max()</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, and <a class="el" href="weak-object-worklists_8h_source.html#l00018">v8::internal::Ephemeron::value</a>.</p>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872_cgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a29754ded838631a20e64ff72c4ebc7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29754ded838631a20e64ff72c4ebc7b5">&#9670;&nbsp;</a></span>MarkTransitiveClosureUntilFixpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::MarkTransitiveClosureUntilFixpoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02058">2058</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                                                              {</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="keywordtype">int</span> iterations = 0;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="keywordtype">int</span> max_iterations = <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.ephemeron_fixpoint_iterations;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordtype">bool</span> another_ephemeron_iteration_main_thread;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">if</span> (iterations &gt;= max_iterations) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="comment">// Give up fixpoint iteration and switch to linear algorithm.</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    }</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160; </div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa35f5f312b9c6ccc1965b9cba1ae14fc">PerformWrapperTracing</a>();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="comment">// Move ephemerons from next_ephemerons into current_ephemerons to</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="comment">// drain them in this iteration.</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.current_ephemerons.Merge(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.next_ephemerons);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#adad9b09397a5d864fbfc58c3ac91ccda">set_another_ephemeron_iteration</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    {</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;               GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_MARKING);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      another_ephemeron_iteration_main_thread = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a22174d94a0be4a06c478e30787da2835">ProcessEphemerons</a>();</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160; </div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.IsLocalEmpty());</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    ++iterations;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  } <span class="keywordflow">while</span> (another_ephemeron_iteration_main_thread ||</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;           <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#aece67b16f36fe0fcea37a7bd7de858f6">another_ephemeron_iteration</a>() ||</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;           !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsEmpty() ||</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;           !<a class="code" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get()));</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160; </div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_adad9b09397a5d864fbfc58c3ac91ccda"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#adad9b09397a5d864fbfc58c3ac91ccda">v8::internal::ConcurrentMarking::set_another_ephemeron_iteration</a></div><div class="ttdeci">void set_another_ephemeron_iteration(bool another_ephemeron_iteration)</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8h_source.html#l00074">concurrent-marking.h:74</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_aece67b16f36fe0fcea37a7bd7de858f6"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#aece67b16f36fe0fcea37a7bd7de858f6">v8::internal::ConcurrentMarking::another_ephemeron_iteration</a></div><div class="ttdeci">bool another_ephemeron_iteration()</div><div class="ttdef"><b>Definition:</b> <a href="concurrent-marking_8h_source.html#l00077">concurrent-marking.h:77</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a22174d94a0be4a06c478e30787da2835"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a22174d94a0be4a06c478e30787da2835">v8::internal::MarkCompactCollector::ProcessEphemerons</a></div><div class="ttdeci">bool ProcessEphemerons()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02098">mark-compact.cc:2098</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="mark-sweep-utilities_8cc_source.html#l00140">v8::internal::IsCppHeapMarkingFinished()</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a927eebc2a596cab74de9a052a849d0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927eebc2a596cab74de9a052a849d0ea">&#9670;&nbsp;</a></span>MaybeEnableBackgroundThreadsInCycle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::MaybeEnableBackgroundThreadsInCycle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">CallOrigin</a>&#160;</td>
          <td class="paramname"><em>origin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00466">466</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                       {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_marking &amp;&amp; !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a>) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// With --parallel_pause_for_gc_in_background we force background threads in</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">// the atomic pause.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> force_background_threads =</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_pause_for_gc_in_background &amp;&amp;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        origin == <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">CallOrigin::kAtomicGC</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a> =</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        force_background_threads || <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">ShouldUseBackgroundThreads</a>();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        cpp_heap-&gt;ReEnableConcurrentMarking();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac434b6b237146b5964c6b76d7a8ad2c6"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">v8::internal::Heap::ShouldUseBackgroundThreads</a></div><div class="ttdeci">bool ShouldUseBackgroundThreads() const</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l00454">heap.cc:454</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a1c9a5589f6ebd3fd2eb5869923fe8e54"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">v8::internal::MarkCompactCollector::use_background_threads_in_cycle_</a></div><div class="ttdeci">bool use_background_threads_in_cycle_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00473">mark-compact.h:473</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l01125">v8::internal::Heap::concurrent_marking()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02370">v8::internal::Heap::cpp_heap_</a>, <a class="el" href="cpp-heap_8h_source.html#l00103">v8::internal::CppHeap::From()</a>, <a class="el" href="mark-compact_8h_source.html#l00189">heap()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">kAtomicGC</a>, <a class="el" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">v8::internal::MARK_COMPACTOR</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00743">v8::internal::ConcurrentMarking::RescheduleJobIfNeeded()</a>, <a class="el" href="heap_8cc_source.html#l00454">v8::internal::Heap::ShouldUseBackgroundThreads()</a>, <a class="el" href="mark-compact_8h_source.html#l00473">use_background_threads_in_cycle_</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>, and <a class="el" href="incremental-marking_8cc_source.html#l00747">v8::internal::IncrementalMarking::Step()</a>.</p>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea_icgraph.svg" width="100%" height="510"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9e736fa08fd40551bc05dc8ed6f691a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e736fa08fd40551bc05dc8ed6f691a6">&#9670;&nbsp;</a></span>NumberOfParallelEphemeronVisitingTasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> v8::internal::MarkCompactCollector::NumberOfParallelEphemeronVisitingTasks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>elements</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa35f5f312b9c6ccc1965b9cba1ae14fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35f5f312b9c6ccc1965b9cba1ae14fc">&#9670;&nbsp;</a></span>PerformWrapperTracing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::PerformWrapperTracing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02185">2185</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                                                 {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordflow">if</span> (!cpp_heap) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_EMBEDDER_TRACING);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  cpp_heap-&gt;AdvanceMarking(<a class="code" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>(), SIZE_MAX);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="time_8h_source.html#l00218">v8::base::TimeDelta::Max()</a>, and <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>.</p>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="adcccd5bf69efe4a16b2f462192b42d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcccd5bf69efe4a16b2f462192b42d77">&#9670;&nbsp;</a></span>PinPreciseRootsIfNeeded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::PinPreciseRootsIfNeeded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04909">4909</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;                                                   {</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8dda200b2e8be21825a3ced86867afe2">ShouldUsePrecisePinningForMajorGC</a>()) {</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;  }</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160; </div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_PIN_PAGES);</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160; </div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a03cb76c44646ccae2a33eb05bcdf0dc5">PrecisePagePinningVisitor</a> root_visitor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160; </div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;  <span class="comment">// Mark the heap roots including global variables, stack variables,</span></div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;  <span class="comment">// etc., and all objects reachable from them.</span></div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9239c3dcfd5357b3597bbde97924923a">IterateRootsForPrecisePinning</a>(&amp;root_visitor);</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160; </div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;  <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    ClientRootVisitor&lt;&gt; client_root_visitor(&amp;root_visitor);</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;    isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;        [&amp;client_root_visitor](Isolate* client) {</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;          client-&gt;heap()-&gt;IterateRootsForPrecisePinning(&amp;client_root_visitor);</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        });</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;  }</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a8dda200b2e8be21825a3ced86867afe2"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a8dda200b2e8be21825a3ced86867afe2">v8::internal::Heap::ShouldUsePrecisePinningForMajorGC</a></div><div class="ttdeci">bool ShouldUsePrecisePinningForMajorGC() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00400">heap.h:400</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a9239c3dcfd5357b3597bbde97924923a"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a9239c3dcfd5357b3597bbde97924923a">v8::internal::Heap::IterateRootsForPrecisePinning</a></div><div class="ttdeci">void IterateRootsForPrecisePinning(RootVisitor *visitor)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l05025">heap.cc:5025</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a03cb76c44646ccae2a33eb05bcdf0dc5"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a03cb76c44646ccae2a33eb05bcdf0dc5">v8::internal::MarkCompactCollector::PrecisePagePinningVisitor</a></div><div class="ttdeci">friend class PrecisePagePinningVisitor</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00480">mark-compact.h:480</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>, and <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>.</p>
<div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77_cgraph.svg" width="100%" height="552"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a22086e39ee1c3864010dac3a10135834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22086e39ee1c3864010dac3a10135834">&#9670;&nbsp;</a></span>PostProcessAbortedEvacuationCandidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::MarkCompactCollector::PostProcessAbortedEvacuationCandidates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05926">5926</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;                                                                    {</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> start_and_page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a>) {</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;    PageMetadata* page = start_and_page.second;</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;    MemoryChunk* chunk = page-&gt;Chunk();</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>));</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;    chunk-&gt;SetFlagSlow(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>);</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;  }</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> start_and_page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a>) {</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a58b90c1c7c35b855c401793183c9c13f">ReRecordPage</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, start_and_page.first, start_and_page.second);</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;  }</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> page : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">aborted_evacuation_candidates_due_to_flags_</a>) {</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a58b90c1c7c35b855c401793183c9c13f">ReRecordPage</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, page-&gt;area_start(), page);</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;  }</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> aborted_pages =</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a>.size() +</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">aborted_evacuation_candidates_due_to_flags_</a>.size();</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;  <span class="keywordtype">size_t</span> aborted_pages_verified = 0;</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;  <span class="keywordflow">for</span> (PageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;    MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;    <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>)) {</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;      <span class="comment">// Only clear EVACUATION_CANDIDATE flag after all slots were re-recorded</span></div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;      <span class="comment">// on all aborted pages. Necessary since repopulating</span></div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;      <span class="comment">// OLD_TO_OLD still requires the EVACUATION_CANDIDATE flag. After clearing</span></div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;      <span class="comment">// the evacuation candidate flag the page is again in a regular state.</span></div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;      p-&gt;ClearEvacuationCandidate();</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;      aborted_pages_verified++;</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(chunk-&gt;IsEvacuationCandidate());</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;    }</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;  }</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(aborted_pages_verified, aborted_pages);</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(aborted_pages_verified);</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;  <span class="keywordflow">return</span> aborted_pages;</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a58b90c1c7c35b855c401793183c9c13f"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a58b90c1c7c35b855c401793183c9c13f">v8::internal::anonymous_namespace{mark-compact.cc}::ReRecordPage</a></div><div class="ttdeci">void ReRecordPage(Heap *heap, Address failed_start, PageMetadata *page)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05891">mark-compact.cc:5891</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="mark-compact_8cc_source.html#l05891">v8::internal::anonymous_namespace{mark-compact.cc}::ReRecordPage()</a>, <a class="el" href="memory-chunk_8cc_source.html#l00180">v8::internal::MemoryChunk::SetFlagSlow()</a>, and <a class="el" href="src_2base_2macros_8h_source.html#l00293">USE</a>.</p>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a88bb504c9d7b76a16ab2f067e907574c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88bb504c9d7b76a16ab2f067e907574c">&#9670;&nbsp;</a></span>Prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::Prepare </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00765">765</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                   {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(state_ == <a class="code" href="namespacev8.html#af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8">IDLE</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  state_ = PREPARE_GC;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>());</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">IsMarking</a>(),</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                 <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">IsMajorMarking</a>());</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">IsMarking</a>()) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">StartCompaction</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">StartCompactionMode::kAtomic</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a222eabb25bd3b1513f83bc63e6043bf3">StartMarking</a>();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_EMBEDDER_PROLOGUE);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="comment">// `StartMarking()` immediately starts marking which requires V8 worklists</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="comment">// to be set up.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>)-&gt;<a class="code" href="classv8_1_1internal_1_1CppHeap.html#ae67d52cdcb6ee95629fe16a51437588c">StartMarking</a>();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_space = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    new_space-&gt;GarbageCollectionPrologue();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a3498d35123e49efe70dd0921c5dda802">use_new_space</a>()) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> original_top = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a71a5010a2dde4bbad050c4947dc450e2">allocator</a>()</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                               -&gt;<a class="code" href="classv8_1_1internal_1_1HeapAllocator.html#a021e4a3fc4d7ff340e494fa638d848ef">new_space_allocator</a>()</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                               -&gt;<a class="code" href="classv8_1_1internal_1_1MainAllocator.html#af8c189b36b71592dd9f3b3b98c636de9">GetOriginalTopAndLimit</a>()</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                               .first;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a71a5010a2dde4bbad050c4947dc450e2">allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1HeapAllocator.html#a021e4a3fc4d7ff340e494fa638d848ef">new_space_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MainAllocator.html#affcbea59347c2fdd71bfdf184be65197">top</a>(), original_top);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_ae67d52cdcb6ee95629fe16a51437588c"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#ae67d52cdcb6ee95629fe16a51437588c">v8::internal::CppHeap::StartMarking</a></div><div class="ttdeci">void StartMarking()</div><div class="ttdef"><b>Definition:</b> <a href="cpp-heap_8cc_source.html#l00833">cpp-heap.cc:833</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a3498d35123e49efe70dd0921c5dda802"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a3498d35123e49efe70dd0921c5dda802">v8::internal::Heap::use_new_space</a></div><div class="ttdeci">bool use_new_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01699">heap.h:1699</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_a36f76d27a7a670a4b270804cef79cea1"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">v8::internal::IncrementalMarking::IsMarking</a></div><div class="ttdeci">bool IsMarking() const</div><div class="ttdef"><b>Definition:</b> <a href="incremental-marking_8h_source.html#l00071">incremental-marking.h:71</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_af7648dd98be368a6b882111f2c62441c"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">v8::internal::IncrementalMarking::IsMajorMarking</a></div><div class="ttdeci">bool IsMajorMarking() const</div><div class="ttdef"><b>Definition:</b> <a href="incremental-marking_8h_source.html#l00066">incremental-marking.h:66</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_af8c189b36b71592dd9f3b3b98c636de9"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#af8c189b36b71592dd9f3b3b98c636de9">v8::internal::MainAllocator::GetOriginalTopAndLimit</a></div><div class="ttdeci">std::pair&lt; Address, Address &gt; GetOriginalTopAndLimit() const</div><div class="ttdef"><b>Definition:</b> <a href="main-allocator_8h_source.html#l00187">main-allocator.h:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_affcbea59347c2fdd71bfdf184be65197"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#affcbea59347c2fdd71bfdf184be65197">v8::internal::MainAllocator::top</a></div><div class="ttdeci">Address top() const</div><div class="ttdef"><b>Definition:</b> <a href="main-allocator_8h_source.html#l00174">main-allocator.h:174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a222eabb25bd3b1513f83bc63e6043bf3"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a222eabb25bd3b1513f83bc63e6043bf3">v8::internal::MarkCompactCollector::StartMarking</a></div><div class="ttdeci">void StartMarking(std::shared_ptr&lt;::heap::base::IncrementalMarkingSchedule &gt; schedule={})</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00406">mark-compact.cc:406</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7e6a8160a88f451d394d7135403f3ae"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">v8::internal::MarkCompactCollector::StartCompaction</a></div><div class="ttdeci">bool StartCompaction(StartCompactionMode mode)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00331">mark-compact.cc:331</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">v8::internal::MarkCompactCollector::StartCompactionMode::kAtomic</a></div><div class="ttdeci">@ kAtomic</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l01696">v8::internal::Heap::allocator()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02370">v8::internal::Heap::cpp_heap_</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="cpp-heap_8h_source.html#l00103">v8::internal::CppHeap::From()</a>, <a class="el" href="main-allocator_8h_source.html#l00187">v8::internal::MainAllocator::GetOriginalTopAndLimit()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="v8-unwinder_8h_source.html#l00045">v8::IDLE</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01117">v8::internal::Heap::incremental_marking()</a>, <a class="el" href="incremental-marking_8h_source.html#l00066">v8::internal::IncrementalMarking::IsMajorMarking()</a>, <a class="el" href="incremental-marking_8h_source.html#l00071">v8::internal::IncrementalMarking::IsMarking()</a>, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">kAtomic</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00770">v8::internal::Heap::new_space()</a>, <a class="el" href="heap-allocator_8h_source.html#l00127">v8::internal::HeapAllocator::new_space_allocator()</a>, <a class="el" href="mark-compact_8cc_source.html#l00331">StartCompaction()</a>, <a class="el" href="cpp-heap_8cc_source.html#l00833">v8::internal::CppHeap::StartMarking()</a>, <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, <a class="el" href="mark-compact_8h_source.html#l00456">sweeper_</a>, <a class="el" href="sweeper_8h_source.html#l00114">v8::internal::Sweeper::sweeping_in_progress()</a>, <a class="el" href="main-allocator_8h_source.html#l00174">v8::internal::MainAllocator::top()</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>, and <a class="el" href="src_2heap_2heap_8h_source.html#l01699">v8::internal::Heap::use_new_space()</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap_8cc_source.html#l02733">v8::internal::Heap::MarkCompact()</a>.</p>
<div id="dynsection-56" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-57" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a68f84b58f91bd059cec89f8b1a061775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68f84b58f91bd059cec89f8b1a061775">&#9670;&nbsp;</a></span>ProcessEphemeron()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::ProcessEphemeron </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02273">2273</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                                                                      {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">EphemeronResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">ApplyEphemeronSemantics</a>(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> == <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e">EphemeronResult::kUnresolved</a>) {</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.Push(Ephemeron{<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>});</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  }</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160; </div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> == <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">EphemeronResult::kMarkedValue</a>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaf4a3c7fbd042b3a90c2c1e4f00cac88"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88">v8::internal::MarkCompactCollector::EphemeronResult</a></div><div class="ttdeci">EphemeronResult</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00077">mark-compact.h:77</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="external-reference_8cc_source.html#l01408">v8::internal::key</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>

</div>
</div>
<a id="a22174d94a0be4a06c478e30787da2835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22174d94a0be4a06c478e30787da2835">&#9670;&nbsp;</a></span>ProcessEphemerons()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::ProcessEphemerons </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02098">2098</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                                             {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  Ephemeron ephemeron;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordtype">bool</span> another_ephemeron_iteration = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="comment">// Drain current_ephemerons and push ephemerons where key and value are still</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">// unreachable into next_ephemerons.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a68f84b58f91bd059cec89f8b1a061775">ProcessEphemeron</a>(ephemeron.key, ephemeron.value)) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      another_ephemeron_iteration = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="comment">// Drain marking worklist and push discovered ephemerons into</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="comment">// next_ephemerons.</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordtype">size_t</span> objects_processed;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  std::tie(<a class="code" href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">std::ignore</a>, objects_processed) =</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0af0fd7aa4d838723848a5c082e43412">ProcessMarkingWorklist</a>(<a class="code" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>(), SIZE_MAX);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">// As soon as a single object was processed and potentially marked another</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// object we need another iteration. Otherwise we might miss to apply</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="comment">// ephemeron semantics on it.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="keywordflow">if</span> (objects_processed &gt; 0) another_ephemeron_iteration = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160; </div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="comment">// Flush local ephemerons for main task to global pool.</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;ephemeron_hash_tables_local.<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">return</span> another_ephemeron_iteration;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a68f84b58f91bd059cec89f8b1a061775"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a68f84b58f91bd059cec89f8b1a061775">v8::internal::MarkCompactCollector::ProcessEphemeron</a></div><div class="ttdeci">bool ProcessEphemeron(Tagged&lt; HeapObject &gt; key, Tagged&lt; HeapObject &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02273">mark-compact.cc:2273</a></div></div>
<div class="ttc" id="anamespacewasm_html_a1159abdb217149e8db975f0037d4bfe7"><div class="ttname"><a href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">wasm::ignore</a></div><div class="ttdeci">void ignore(T)</div><div class="ttdef"><b>Definition:</b> <a href="c-api_8cc_source.html#l00237">c-api.cc:237</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="c-api_8cc_source.html#l00237">wasm::ignore()</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00017">v8::internal::Ephemeron::key</a>, <a class="el" href="time_8h_source.html#l00218">v8::base::TimeDelta::Max()</a>, and <a class="el" href="weak-object-worklists_8h_source.html#l00018">v8::internal::Ephemeron::value</a>.</p>
<div id="dynsection-58" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835_cgraph.svg" width="100%" height="372"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a90e4a47ecc544481e5d1d8217817a392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e4a47ecc544481e5d1d8217817a392">&#9670;&nbsp;</a></span>ProcessFlushedBaselineCandidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ProcessFlushedBaselineCandidates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03552">3552</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                                                            {</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code ||</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;         <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.baseline_flushing_candidates.IsEmpty());</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  Tagged&lt;JSFunction&gt; flushed_js_function;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;baseline_flushing_candidates_local.Pop(</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      &amp;flushed_js_function)) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keyword">auto</span> gc_notify_updated_slot = [](<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> object, <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot,</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                                     <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> target) {</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    };</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    flushed_js_function-&gt;ResetIfCodeFlushed(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;                                            gc_notify_updated_slot);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160; </div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="preprocessor">#ifndef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    <span class="comment">// Record the code slot that has been updated either to CompileLazy,</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <span class="comment">// InterpreterEntryTrampoline or baseline code.</span></div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    <span class="comment">// This is only necessary when the sandbox is not enabled. If it is, the</span></div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="comment">// Code objects are referenced through a pointer table indirection and so</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    <span class="comment">// remembered slots are not necessary as the Code object will update its</span></div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <span class="comment">// entry in the pointer table when it is relocated.</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot = flushed_js_function-&gt;RawField(JSFunction::kCodeOffset);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(flushed_js_function, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  }</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

</div>
</div>
<a id="a0af0fd7aa4d838723848a5c082e43412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0af0fd7aa4d838723848a5c082e43412">&#9670;&nbsp;</a></span>ProcessMarkingWorklist()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;MarkCompactCollector::MarkingWorklistProcessingMode mode&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> &gt; v8::internal::MarkCompactCollector::ProcessMarkingWorklist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1TimeDelta.html">v8::base::TimeDelta</a>&#160;</td>
          <td class="paramname"><em>max_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>max_bytes_to_process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02200">2200</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                                                               {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> object;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keywordtype">size_t</span> bytes_processed = 0;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="keywordtype">size_t</span> objects_processed = 0;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordtype">bool</span> is_per_context_mode = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsPerContextMode();</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> start = <a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a>();</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  PtrComprCageBase cage_base(isolate);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8ba2df1d2e1c47234008d809d596228c">parallel_marking_</a> &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aaac51e78398da9ba59e847682b3a62fa">concurrent_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>, <a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">TaskPriority::kUserBlocking</a>);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  }</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;Pop(&amp;<span class="keywordtype">object</span>) ||</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;         <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;PopOnHold(&amp;<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="comment">// The marking worklist should never contain filler objects.</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#abbf68b3bf1ca62b0645f031cdc769188">IsFreeSpaceOrFiller</a>(<span class="keywordtype">object</span>, cage_base));</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1HeapLayout.html#a91ac1680dc7f626bd8675e14ac660240">HeapLayout::InReadOnlySpace</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code" href="classv8_1_1internal_1_1HeapUtils.html#a0ca292749d64b1e6459e456cedc515b1">HeapUtils::GetOwnerHeap</a>(<span class="keywordtype">object</span>), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">Contains</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(<span class="keywordtype">object</span>)));</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">if</span> constexpr (<a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a> ==</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7">MarkingWorklistProcessingMode::kProcessRememberedEphemerons</a>) {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.find(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="keywordflow">if</span> (it != <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.end()) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> : it-&gt;second) {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> target_worklist =</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;              <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;          <span class="keywordflow">if</span> (target_worklist) {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a12d88c9886e76b0365ad7e70af83b280">MarkObject</a>(<span class="keywordtype">object</span>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>, target_worklist.value());</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;          }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        }</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>.erase(it);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      }</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    }</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    Tagged&lt;Map&gt; map = <span class="keywordtype">object</span>-&gt;map(cage_base);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (is_per_context_mode) {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> context;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a38d01cfcaa46efe4b24412d3eba66ca0">native_context_inferrer_</a>.<a class="code" href="classv8_1_1internal_1_1NativeContextInferrer.html#a25a195accfb5080cb345588b4d0eae39">Infer</a>(cage_base, map, <span class="keywordtype">object</span>, &amp;context)) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;SwitchToContext(context);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> visited_size = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">marking_visitor_</a>-&gt;Visit(map, <span class="keywordtype">object</span>);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordflow">if</span> (visited_size) {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(<span class="keywordtype">object</span>)-&gt;<a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#a04ea75362eb0f4229d1f0e20704bf762">IncrementLiveBytesAtomically</a>(</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;          <a class="code" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(visited_size));</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="keywordflow">if</span> (is_per_context_mode) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adebad6550fadebad8005f173c10359c6">native_context_stats_</a>.<a class="code" href="classv8_1_1internal_1_1NativeContextStats.html#aa5379cd60bbd4871363334edcf7ef566">IncrementSize</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;Context(),</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                                          map, <span class="keywordtype">object</span>, visited_size);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    bytes_processed += visited_size;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    objects_processed++;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    static_assert(<a class="code" href="namespacev8_1_1base_1_1bits.html#af9eb752b538fa8a66badab8f26e0e000">base::bits::IsPowerOfTwo</a>(<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a83d32f2ce33023f3050bedde123689c1">kDeadlineCheckInterval</a>),</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                  <span class="stringliteral">&quot;kDeadlineCheckInterval must be power of 2&quot;</span>);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">// The below check is an optimized version of</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="comment">// `(objects_processed % kDeadlineCheckInterval) == 0`</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">if</span> ((objects_processed &amp; (<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a83d32f2ce33023f3050bedde123689c1">kDeadlineCheckInterval</a> -1)) == 0 &amp;&amp;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        ((<a class="code" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a>() - start) &gt; max_duration)) {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">if</span> (bytes_processed &gt;= max_bytes_to_process) {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">return</span> std::make_pair(bytes_processed, objects_processed);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeTicks_html_ab0886bf0e84f1e1fcdc101021c2c0775"><div class="ttname"><a href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a></div><div class="ttdeci">static TimeTicks Now()</div><div class="ttdef"><b>Definition:</b> <a href="time_8cc_source.html#l00736">time.cc:736</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapUtils_html_a0ca292749d64b1e6459e456cedc515b1"><div class="ttname"><a href="classv8_1_1internal_1_1HeapUtils.html#a0ca292749d64b1e6459e456cedc515b1">v8::internal::HeapUtils::GetOwnerHeap</a></div><div class="ttdeci">static Heap * GetOwnerHeap(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="heap-utils-inl_8h_source.html#l00016">heap-utils-inl.h:16</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a12d88c9886e76b0365ad7e70af83b280"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a12d88c9886e76b0365ad7e70af83b280">v8::internal::MarkCompactCollector::MarkObject</a></div><div class="ttdeci">void MarkObject(Tagged&lt; HeapObject &gt; host, Tagged&lt; HeapObject &gt; obj, MarkingHelper::WorklistTarget target_worklist)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact-inl_8h_source.html#l00028">mark-compact-inl.h:28</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a38d01cfcaa46efe4b24412d3eba66ca0"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a38d01cfcaa46efe4b24412d3eba66ca0">v8::internal::MarkCompactCollector::native_context_inferrer_</a></div><div class="ttdeci">NativeContextInferrer native_context_inferrer_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00431">mark-compact.h:431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a04ea75362eb0f4229d1f0e20704bf762"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a04ea75362eb0f4229d1f0e20704bf762">v8::internal::MutablePageMetadata::IncrementLiveBytesAtomically</a></div><div class="ttdeci">void IncrementLiveBytesAtomically(intptr_t diff)</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00266">mutable-page-metadata.h:266</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_afd76b7261895b2043b1715d180858d29"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">v8::internal::MutablePageMetadata::FromHeapObject</a></div><div class="ttdeci">static MutablePageMetadata * FromHeapObject(Tagged&lt; HeapObject &gt; o)</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata-inl_8h_source.html#l00024">mutable-page-metadata-inl.h:24</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextInferrer_html_a25a195accfb5080cb345588b4d0eae39"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextInferrer.html#a25a195accfb5080cb345588b4d0eae39">v8::internal::NativeContextInferrer::Infer</a></div><div class="ttdeci">bool Infer(PtrComprCageBase cage_base, Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; object, Address *native_context)</div><div class="ttdef"><b>Definition:</b> <a href="memory-measurement-inl_8h_source.html#l00021">memory-measurement-inl.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextStats_html_aa5379cd60bbd4871363334edcf7ef566"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextStats.html#aa5379cd60bbd4871363334edcf7ef566">v8::internal::NativeContextStats::IncrementSize</a></div><div class="ttdeci">void IncrementSize(Address context, Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; object, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="memory-measurement-inl_8h_source.html#l00038">memory-measurement-inl.h:38</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_adaf90f045d5cd2710edd625b8685472a"><div class="ttname"><a href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available threshold for starting incremental marking immediately in percent of available Use a single schedule for determining a marking schedule between JS and C objects schedules the minor GC task with kUserVisible priority max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats TracingFlags::gc_stats track native contexts that are expected to be garbage collected verify heap pointers before and after GC memory reducer runs GC with ReduceMemoryFootprint flag Maximum number of memory reducer GCs scheduled Old gen GC speed is computed directly from gc tracer counters Perform compaction on full GCs based on V8 s default heuristics Perform compaction on every full GC Perform code space compaction when finalizing a full GC with stack Stress GC compaction to flush out bugs with moving objects flush of baseline code when it has not been executed recently Use time base code flushing instead of age Use a progress bar to scan large objects in increments when incremental marking is active force incremental marking for small heaps and run it more often Release pooled large pages after X seconds prints number of allocations and enables analysis mode for gc fuzz e g stress stress scavenge force scavenge at random points between and reclaim otherwise unreachable unmodified wrapper objects when possible discard the memory pool before invoking the GC on memory pressure or last resort GCs Delay before memory reducer start virtual randomize memory reservations by ignoring any hints passed when allocating pages use incremental marking for CppHeap cppheap_concurrent_marking c value for membalancer A special constant to balance between memory and space tradeoff The smaller the more memory it uses enable use of SSE4 instructions if available enable use of SAHF instruction if enable use of AVX VNNI instructions if available enable use of POPCNT instruction if available force all emitted branches to be in long mode(MIPS/PPC only)&quot;) DEFINE_BOOL(partial_constant_pool</div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1bits_html_af9eb752b538fa8a66badab8f26e0e000"><div class="ttname"><a href="namespacev8_1_1base_1_1bits.html#af9eb752b538fa8a66badab8f26e0e000">v8::base::bits::IsPowerOfTwo</a></div><div class="ttdeci">constexpr bool IsPowerOfTwo(T value) requires(std</div><div class="ttdef"><b>Definition:</b> <a href="bits_8h_source.html#l00187">bits.h:187</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1InstanceTypeChecker_html_abbf68b3bf1ca62b0645f031cdc769188"><div class="ttname"><a href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#abbf68b3bf1ca62b0645f031cdc769188">v8::internal::InstanceTypeChecker::IsFreeSpaceOrFiller</a></div><div class="ttdeci">constexpr bool IsFreeSpaceOrFiller(InstanceType instance_type)</div><div class="ttdef"><b>Definition:</b> <a href="instance-type-inl_8h_source.html#l00520">instance-type-inl.h:520</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a83d32f2ce33023f3050bedde123689c1"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a83d32f2ce33023f3050bedde123689c1">v8::internal::anonymous_namespace{mark-compact.cc}::kDeadlineCheckInterval</a></div><div class="ttdeci">constexpr size_t kDeadlineCheckInterval</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02195">mark-compact.cc:2195</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="common_2globals_8h_source.html#l01811">ALIGN_TO_ALLOCATION_ALIGNMENT</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="instance-type-inl_8h_source.html#l00520">v8::internal::InstanceTypeChecker::IsFreeSpaceOrFiller()</a>, <a class="el" href="instance-type-inl_8h_source.html#l00313">v8::internal::InstanceTypeChecker::IsHeapObject()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, <a class="el" href="bits_8h_source.html#l00187">v8::base::bits::IsPowerOfTwo()</a>, <a class="el" href="mark-compact_8cc_source.html#l02195">v8::internal::anonymous_namespace{mark-compact.cc}::kDeadlineCheckInterval</a>, <a class="el" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::kUserBlocking</a>, <a class="el" href="traced-handles_8cc_source.html#l00793">v8::internal::anonymous_namespace{traced-handles.cc}::MarkObject()</a>, <a class="el" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode()</a>, <a class="el" href="time_8cc_source.html#l00736">v8::base::TimeTicks::Now()</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="incremental-marking_8cc_source.html#l00747">v8::internal::IncrementalMarking::Step()</a>.</p>
<div id="dynsection-59" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-60" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412_icgraph.svg" width="100%" height="461"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad34de0569d3f17ed9938be62ab5cda04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34de0569d3f17ed9938be62ab5cda04">&#9670;&nbsp;</a></span>ProcessOldBaselineSFI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::ProcessOldBaselineSFI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>flushing_candidate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03462">3462</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                                                   {</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  Tagged&lt;Code&gt; baseline_code = flushing_candidate-&gt;baseline_code(<a class="code" href="namespacev8.html#aee4e677b8d8a86416617b3330778b98a">kAcquireLoad</a>);</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <span class="comment">// Safe to do a relaxed load here since the Code was acquire-loaded.</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  Tagged&lt;InstructionStream&gt; baseline_istream =</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      baseline_code-&gt;instruction_stream(baseline_code-&gt;code_cage_base(),</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;                                        <a class="code" href="namespacev8.html#a65227471e4ee0ccd275854a995f12a62">kRelaxedLoad</a>);</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> baseline_bytecode_or_interpreter_data =</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      baseline_code-&gt;bytecode_or_interpreter_data();</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160; </div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  <span class="comment">// During flushing a BytecodeArray is transformed into an UncompiledData</span></div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <span class="comment">// in place. Seeing an UncompiledData here implies that another</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="comment">// SharedFunctionInfo had a reference to the same BytecodeArray and</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="comment">// flushed it before processing this candidate. This can happen when using</span></div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="comment">// CloneSharedFunctionInfo().</span></div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> bytecode_already_decompiled =</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      IsUncompiledData(baseline_bytecode_or_interpreter_data, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="keywordtype">bool</span> is_bytecode_live = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="keywordflow">if</span> (!bytecode_already_decompiled) {</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    Tagged&lt;BytecodeArray&gt; bytecode =</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;        flushing_candidate-&gt;GetBytecodeArray(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    is_bytecode_live = <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>, bytecode);</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  }</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;                                          baseline_istream)) {</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <span class="comment">// Currently baseline code holds bytecode array strongly and it is</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="comment">// always ensured that bytecode is live if baseline code is live. Hence</span></div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="comment">// baseline code can safely load bytecode array without any additional</span></div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="comment">// checks. In future if this changes we need to update these checks to</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    <span class="comment">// flush code if the bytecode is not live and also update baseline code</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="comment">// to bailout if there is no bytecode.</span></div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(is_bytecode_live);</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160; </div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="comment">// Regardless of whether the Code is a Code or</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="comment">// the InstructionStream itself, if the InstructionStream is live then</span></div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;    <span class="comment">// the Code has to be live and will have been marked via</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    <span class="comment">// the owning JSFunction.</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                                               baseline_code));</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_bytecode_live || bytecode_already_decompiled) {</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <span class="comment">// Reset the function_data field to the BytecodeArray, InterpreterData,</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <span class="comment">// or UncompiledData found on the baseline code. We can skip this step</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    <span class="comment">// if the BytecodeArray is not live and not already decompiled, because</span></div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    <span class="comment">// FlushBytecodeFromSFI below will set the function_data field.</span></div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    flushing_candidate-&gt;FlushBaselineCode();</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  }</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160; </div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  <span class="keywordflow">if</span> (!is_bytecode_live) {</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4672c902176abf0363018f4b29435209">FlushSFI</a>(flushing_candidate, bytecode_already_decompiled);</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  }</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  <span class="keywordflow">return</span> is_bytecode_live;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a4672c902176abf0363018f4b29435209"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a4672c902176abf0363018f4b29435209">v8::internal::MarkCompactCollector::FlushSFI</a></div><div class="ttdeci">void FlushSFI(Tagged&lt; SharedFunctionInfo &gt; sfi, bool bytecode_already_decompiled)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03517">mark-compact.cc:3517</a></div></div>
<div class="ttc" id="anamespacev8_html_a65227471e4ee0ccd275854a995f12a62"><div class="ttname"><a href="namespacev8.html#a65227471e4ee0ccd275854a995f12a62">v8::kRelaxedLoad</a></div><div class="ttdeci">static constexpr RelaxedLoadTag kRelaxedLoad</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02943">globals.h:2943</a></div></div>
<div class="ttc" id="anamespacev8_html_aee4e677b8d8a86416617b3330778b98a"><div class="ttname"><a href="namespacev8.html#aee4e677b8d8a86416617b3330778b98a">v8::kAcquireLoad</a></div><div class="ttdeci">static constexpr AcquireLoadTag kAcquireLoad</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l02942">globals.h:2942</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="common_2globals_8h_source.html#l02942">v8::kAcquireLoad</a>, and <a class="el" href="common_2globals_8h_source.html#l02943">v8::kRelaxedLoad</a>.</p>

</div>
</div>
<a id="ac98eb6a98516e575832b222b6312ce5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac98eb6a98516e575832b222b6312ce5c">&#9670;&nbsp;</a></span>ProcessOldBytecodeSFI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::ProcessOldBytecodeSFI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1SharedFunctionInfo.html">SharedFunctionInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>flushing_candidate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03438">3438</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                                                   {</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <span class="comment">// During flushing a BytecodeArray is transformed into an UncompiledData</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  <span class="comment">// in place. Seeing an UncompiledData here implies that another</span></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="comment">// SharedFunctionInfo had a reference to the same BytecodeArray and</span></div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  <span class="comment">// flushed it before processing this candidate. This can happen when using</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;  <span class="comment">// CloneSharedFunctionInfo().</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160; </div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> bytecode_already_decompiled =</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      flushing_candidate-&gt;HasUncompiledData(isolate);</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <span class="keywordflow">if</span> (!bytecode_already_decompiled) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="comment">// Check if the bytecode is still live.</span></div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    Tagged&lt;BytecodeArray&gt; bytecode =</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        flushing_candidate-&gt;GetBytecodeArray(isolate);</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a526aa3d8b3fa085271b2f23137766544">MarkingHelper::IsMarkedOrAlwaysLive</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;                                            bytecode)) {</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    }</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  }</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4672c902176abf0363018f4b29435209">FlushSFI</a>(flushing_candidate, bytecode_already_decompiled);</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>.</p>
<div id="dynsection-61" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c_cgraph.svg" width="451" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2d909e79588ddfce09dd94ffa673417b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d909e79588ddfce09dd94ffa673417b">&#9670;&nbsp;</a></span>ProcessOldCodeCandidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ProcessOldCodeCandidates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03402">3402</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;                                                    {</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code ||</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;         <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.code_flushing_candidates.IsEmpty());</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  Tagged&lt;SharedFunctionInfo&gt; flushing_candidate;</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordtype">int</span> number_of_flushed_sfis = 0;</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;code_flushing_candidates_local.Pop(</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;      &amp;flushing_candidate)) {</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <span class="keywordtype">bool</span> is_bytecode_live;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code &amp;&amp; flushing_candidate-&gt;HasBaselineCode()) {</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;      is_bytecode_live = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ad34de0569d3f17ed9938be62ab5cda04">ProcessOldBaselineSFI</a>(flushing_candidate);</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      is_bytecode_live = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac98eb6a98516e575832b222b6312ce5c">ProcessOldBytecodeSFI</a>(flushing_candidate);</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    }</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160; </div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <span class="keywordflow">if</span> (!is_bytecode_live) number_of_flushed_sfis++;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160; </div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="comment">// Now record the data slots, which have been updated to an uncompiled</span></div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <span class="comment">// data, Baseline code or BytecodeArray which is still alive.</span></div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;<span class="preprocessor">#ifndef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    <span class="comment">// If the sandbox is enabled, the slot contains an indirect pointer which</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <span class="comment">// does not need to be updated during mark-compact (because the pointer in</span></div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="comment">// the pointer table will be updated), so no action is needed here.</span></div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a> slot = flushing_candidate-&gt;RawField(</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;        SharedFunctionInfo::kTrustedFunctionDataOffset);</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(*slot)) {</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(flushing_candidate, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    }</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;  }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_flush_code) {</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), <span class="stringliteral">&quot;%d flushed SharedFunctionInfo(s)\n&quot;</span>,</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                 number_of_flushed_sfis);</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  }</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac98eb6a98516e575832b222b6312ce5c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac98eb6a98516e575832b222b6312ce5c">v8::internal::MarkCompactCollector::ProcessOldBytecodeSFI</a></div><div class="ttdeci">bool ProcessOldBytecodeSFI(Tagged&lt; SharedFunctionInfo &gt; flushing_candidate)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03438">mark-compact.cc:3438</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ad34de0569d3f17ed9938be62ab5cda04"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ad34de0569d3f17ed9938be62ab5cda04">v8::internal::MarkCompactCollector::ProcessOldBaselineSFI</a></div><div class="ttdeci">bool ProcessOldBaselineSFI(Tagged&lt; SharedFunctionInfo &gt; flushing_candidate)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03462">mark-compact.cc:3462</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="instance-type-inl_8h_source.html#l00313">v8::internal::InstanceTypeChecker::IsHeapObject()</a>, <a class="el" href="utils_2utils_8cc_source.html#l00061">v8::internal::PrintIsolate()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-62" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b_cgraph.svg" width="100%" height="400"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="adb22d7642cc47c49db3b6f5041b129b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb22d7642cc47c49db3b6f5041b129b9">&#9670;&nbsp;</a></span>ProcessRelocInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">MarkCompactCollector::RecordRelocSlotInfo</a> v8::internal::MarkCompactCollector::ProcessRelocInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *&#160;</td>
          <td class="paramname"><em>rinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04020">4020</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;                                                                  {</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;  RecordRelocSlotInfo <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;  <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">RelocInfo::Mode</a> rmode = rinfo-&gt;rmode();</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> addr;</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">SlotType</a> slot_type;</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160; </div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;  <span class="keywordflow">if</span> (rinfo-&gt;IsInConstantPool()) {</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    addr = rinfo-&gt;constant_pool_entry_address();</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160; </div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#a4826de2c62c03505c8cef4fdd868a2a4">RelocInfo::IsCodeTargetMode</a>(rmode)) {</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a84e830d99ff0fc2ffca020ebcd53bc7e">SlotType::kConstPoolCodeEntry</a>;</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#a4ccd6874ce735e6bc6a0cae35f22bd5b">RelocInfo::IsCompressedEmbeddedObject</a>(rmode)) {</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a2069d81a5ee55f945623794c77b46f51">SlotType::kConstPoolEmbeddedObjectCompressed</a>;</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#ad2c46d09a8c7ae01c317b23aa491e645">RelocInfo::IsFullEmbeddedObject</a>(rmode));</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a8d47775a6a406ff857c7be2d08e80ddf">SlotType::kConstPoolEmbeddedObjectFull</a>;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    }</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    addr = rinfo-&gt;pc();</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160; </div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#a4826de2c62c03505c8cef4fdd868a2a4">RelocInfo::IsCodeTargetMode</a>(rmode)) {</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a246718b5f20f9d5f30e4b5aa19e03e97">SlotType::kCodeEntry</a>;</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#ad2c46d09a8c7ae01c317b23aa491e645">RelocInfo::IsFullEmbeddedObject</a>(rmode)) {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1ac737f9c74c47a8cb4929be46ace358a6">SlotType::kEmbeddedObjectFull</a>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1RelocInfo.html#a4ccd6874ce735e6bc6a0cae35f22bd5b">RelocInfo::IsCompressedEmbeddedObject</a>(rmode));</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      slot_type = <a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1af54ee7a8ad2a1189f6a0fa3a8a965abb">SlotType::kEmbeddedObjectCompressed</a>;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    }</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  }</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160; </div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  MemoryChunk* <span class="keyword">const</span> source_chunk = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(host);</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  MutablePageMetadata* <span class="keyword">const</span> source_page_metadata =</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#acaa892e234b2fe3170fa488f5a9a3767">MutablePageMetadata::cast</a>(source_chunk-&gt;Metadata());</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;  <span class="keyword">const</span> <a class="code" href="classuintptr__t.html">uintptr_t</a> offset = source_chunk-&gt;Offset(addr);</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(offset, <span class="keyword">static_cast&lt;</span><a class="code" href="classuintptr__t.html">uintptr_t</a><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1TypedSlots.html#a0707d5403da240a6561a9262a7785c83">TypedSlotSet::kMaxOffset</a>));</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.page_metadata = source_page_metadata;</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.slot_type = slot_type;</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.offset = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(offset);</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160; </div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;}</div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_acaa892e234b2fe3170fa488f5a9a3767"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#acaa892e234b2fe3170fa488f5a9a3767">v8::internal::MutablePageMetadata::cast</a></div><div class="ttdeci">static MutablePageMetadata * cast(MemoryChunkMetadata *metadata)</div><div class="ttdef"><b>Definition:</b> <a href="mutable-page-metadata_8h_source.html#l00079">mutable-page-metadata.h:79</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a4826de2c62c03505c8cef4fdd868a2a4"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a4826de2c62c03505c8cef4fdd868a2a4">v8::internal::RelocInfo::IsCodeTargetMode</a></div><div class="ttdeci">static constexpr bool IsCodeTargetMode(Mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="reloc-info_8h_source.html#l00198">reloc-info.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a4ccd6874ce735e6bc6a0cae35f22bd5b"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a4ccd6874ce735e6bc6a0cae35f22bd5b">v8::internal::RelocInfo::IsCompressedEmbeddedObject</a></div><div class="ttdeci">static constexpr bool IsCompressedEmbeddedObject(Mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="reloc-info_8h_source.html#l00207">reloc-info.h:207</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2c46d09a8c7ae01c317b23aa491e645"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2c46d09a8c7ae01c317b23aa491e645">v8::internal::RelocInfo::IsFullEmbeddedObject</a></div><div class="ttdeci">static constexpr bool IsFullEmbeddedObject(Mode mode)</div><div class="ttdef"><b>Definition:</b> <a href="reloc-info_8h_source.html#l00204">reloc-info.h:204</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">v8::internal::RelocInfo::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition:</b> <a href="reloc-info_8h_source.html#l00106">reloc-info.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TypedSlots_html_a0707d5403da240a6561a9262a7785c83"><div class="ttname"><a href="classv8_1_1internal_1_1TypedSlots.html#a0707d5403da240a6561a9262a7785c83">v8::internal::TypedSlots::kMaxOffset</a></div><div class="ttdeci">static const int kMaxOffset</div><div class="ttdef"><b>Definition:</b> <a href="slot-set_8h_source.html#l00275">slot-set.h:275</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1a2069d81a5ee55f945623794c77b46f51"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a2069d81a5ee55f945623794c77b46f51">v8::internal::SlotType::kConstPoolEmbeddedObjectCompressed</a></div><div class="ttdeci">@ kConstPoolEmbeddedObjectCompressed</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1a246718b5f20f9d5f30e4b5aa19e03e97"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a246718b5f20f9d5f30e4b5aa19e03e97">v8::internal::SlotType::kCodeEntry</a></div><div class="ttdeci">@ kCodeEntry</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1a84e830d99ff0fc2ffca020ebcd53bc7e"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a84e830d99ff0fc2ffca020ebcd53bc7e">v8::internal::SlotType::kConstPoolCodeEntry</a></div><div class="ttdeci">@ kConstPoolCodeEntry</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1a8d47775a6a406ff857c7be2d08e80ddf"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1a8d47775a6a406ff857c7be2d08e80ddf">v8::internal::SlotType::kConstPoolEmbeddedObjectFull</a></div><div class="ttdeci">@ kConstPoolEmbeddedObjectFull</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1ac737f9c74c47a8cb4929be46ace358a6"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1ac737f9c74c47a8cb4929be46ace358a6">v8::internal::SlotType::kEmbeddedObjectFull</a></div><div class="ttdeci">@ kEmbeddedObjectFull</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1af54ee7a8ad2a1189f6a0fa3a8a965abb"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1af54ee7a8ad2a1189f6a0fa3a8a965abb">v8::internal::SlotType::kEmbeddedObjectCompressed</a></div><div class="ttdeci">@ kEmbeddedObjectCompressed</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="assembler-arm-inl_8h_source.html#l00089">v8::internal::RelocInfo::constant_pool_entry_address()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00488">DCHECK_LT</a>, <a class="el" href="assembler-riscv_8cc_source.html#l00200">v8::internal::RelocInfo::IsInConstantPool()</a>, <a class="el" href="wasm-compiler_8h_source.html#l00090">v8::internal::compiler::kCodeEntry</a>, <a class="el" href="memory-chunk-inl_8h_source.html#l00017">v8::internal::MemoryChunk::Metadata()</a>, <a class="el" href="memory-chunk_8h_source.html#l00363">v8::internal::MemoryChunk::Offset()</a>, <a class="el" href="reloc-info_8h_source.html#l00276">v8::internal::RelocInfo::pc()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, and <a class="el" href="reloc-info_8h_source.html#l00277">v8::internal::RelocInfo::rmode()</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap-write-barrier_8cc_source.html#l00327">v8::internal::WriteBarrier::GenerationalBarrierForCodeSlow()</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00196">v8::internal::ConcurrentMarkingVisitor::RecordRelocSlot()</a>, <a class="el" href="marking-barrier_8cc_source.html#l00199">v8::internal::MarkingBarrier::RecordRelocSlot()</a>, and <a class="el" href="heap-write-barrier_8cc_source.html#l00095">v8::internal::WriteBarrier::SharedSlow()</a>.</p>
<div id="dynsection-63" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-64" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9_icgraph.svg" width="100%" height="510"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aaf362cecdae97f4d77f1b446496fcbe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf362cecdae97f4d77f1b446496fcbe6">&#9670;&nbsp;</a></span>ProcessTopOptimizedFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ProcessTopOptimizedFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1ObjectVisitor.html">ObjectVisitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02359">2359</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                                                                      {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="keywordflow">for</span> (StackFrameIterator it(isolate, isolate-&gt;thread_local_top()); !it.done();</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;       it.Advance()) {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">if</span> (it.frame()-&gt;is_unoptimized_js()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="keywordflow">if</span> (it.frame()-&gt;is_optimized_js()) {</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      Tagged&lt;GcSafeCode&gt; lookup_result = it.frame()-&gt;GcSafeLookupCode();</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">if</span> (!lookup_result-&gt;has_instruction_stream()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <span class="keywordflow">if</span> (!lookup_result-&gt;CanDeoptAt(isolate,</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                                     it.frame()-&gt;maybe_unauthenticated_pc())) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        Tagged&lt;InstructionStream&gt; istream = UncheckedCast&lt;InstructionStream&gt;(</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            lookup_result-&gt;raw_instruction_stream());</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        PtrComprCageBase cage_base(isolate);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <a class="code" href="classv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor.html#a3dc621f70c59e9b883069ff79ec147c2">InstructionStream::BodyDescriptor::IterateBody</a>(istream-&gt;map(cage_base),</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                                       istream, visitor);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  }</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor_html_a3dc621f70c59e9b883069ff79ec147c2"><div class="ttname"><a href="classv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor.html#a3dc621f70c59e9b883069ff79ec147c2">v8::internal::InstructionStream::BodyDescriptor::IterateBody</a></div><div class="ttdeci">static void IterateBody(Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; obj, ObjectVisitor *v)</div><div class="ttdef"><b>Definition:</b> <a href="objects-body-descriptors-inl_8h_source.html#l01322">objects-body-descriptors-inl.h:1322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="frames_8h_source.html#l01642">v8::internal::StackFrameIteratorBase::done()</a>, and <a class="el" href="execution_2isolate_8h_source.html#l01346">v8::internal::Isolate::thread_local_top()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l01854">MarkRoots()</a>.</p>
<div id="dynsection-65" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6_cgraph.svg" width="508" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-66" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6_icgraph.svg" width="522" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adf2bc94ab3ef1e83c8e7f8df722f1896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf2bc94ab3ef1e83c8e7f8df722f1896">&#9670;&nbsp;</a></span>RecordObjectStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RecordObjectStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02380">2380</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                                             {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a>(!<a class="code" href="structv8_1_1internal_1_1TracingFlags.html#a6ae2ff9ff9df795354e7f9bcda063268">TracingFlags::is_gc_stats_enabled</a>())) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="comment">// Cannot run during bootstrapping due to incomplete objects.</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#afdec8e47c6d178bfb42aa203999cb707">bootstrapper</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Bootstrapper.html#a2ed96a283695ebb5718bfa6922f489d1">IsActive</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="gc-tracer_8h.html#af107f5a2136b9fcf104fc8c23a5bdfaa">TRACE_GC_CATEGORIES</a>, <span class="stringliteral">&quot;V8.GC_OBJECT_DUMP_STATISTICS&quot;</span>);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#affa42c4fc2313750c08caf4556f44790">CreateObjectStats</a>();</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  ObjectStatsCollector collector(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a10cd06f973b444ae6d2613032f05549e">live_object_stats_</a>.get(),</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                                 <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a3e00be60e3534f7fd22e1371474510ab">dead_object_stats_</a>.get());</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  collector.Collect();</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="structv8_1_1internal_1_1TracingFlags.html#a2b550a4619e10cd8ccffb3bcb49922c1">TracingFlags::gc_stats</a>.load(std::memory_order_relaxed) &amp;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                  <a class="code" href="classv8_1_1tracing_1_1TracingCategoryObserver.html#aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30">v8::tracing::TracingCategoryObserver::ENABLED_BY_TRACING</a>)) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    std::stringstream live, dead;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a10cd06f973b444ae6d2613032f05549e">live_object_stats_</a>-&gt;Dump(live);</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a3e00be60e3534f7fd22e1371474510ab">dead_object_stats_</a>-&gt;Dump(dead);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a9caa02a30959b26112c2dcc35ed3727e">TRACE_EVENT_INSTANT2</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc_stats&quot;</span>),</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                         <span class="stringliteral">&quot;V8.GC_Objects_Stats&quot;</span>, <a class="code" href="trace-event-no-perfetto_8h.html#a8b5bca924ef796a311bb5ba5c8d7f57d">TRACE_EVENT_SCOPE_THREAD</a>,</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                         <span class="stringliteral">&quot;live&quot;</span>, <a class="code" href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a>(live.str().c_str()), <span class="stringliteral">&quot;dead&quot;</span>,</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                         <a class="code" href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a>(dead.str().c_str()));</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_gc_object_stats) {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a10cd06f973b444ae6d2613032f05549e">live_object_stats_</a>-&gt;PrintJSON(<span class="stringliteral">&quot;live&quot;</span>);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a3e00be60e3534f7fd22e1371474510ab">dead_object_stats_</a>-&gt;PrintJSON(<span class="stringliteral">&quot;dead&quot;</span>);</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a10cd06f973b444ae6d2613032f05549e">live_object_stats_</a>-&gt;CheckpointObjectStats();</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a3e00be60e3534f7fd22e1371474510ab">dead_object_stats_</a>-&gt;ClearObjectStats();</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Bootstrapper_html_a2ed96a283695ebb5718bfa6922f489d1"><div class="ttname"><a href="classv8_1_1internal_1_1Bootstrapper.html#a2ed96a283695ebb5718bfa6922f489d1">v8::internal::Bootstrapper::IsActive</a></div><div class="ttdeci">bool IsActive() const</div><div class="ttdef"><b>Definition:</b> <a href="bootstrapper_8h_source.html#l00088">bootstrapper.h:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a10cd06f973b444ae6d2613032f05549e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a10cd06f973b444ae6d2613032f05549e">v8::internal::Heap::live_object_stats_</a></div><div class="ttdeci">std::unique_ptr&lt; ObjectStats &gt; live_object_stats_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02341">heap.h:2341</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a3e00be60e3534f7fd22e1371474510ab"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a3e00be60e3534f7fd22e1371474510ab">v8::internal::Heap::dead_object_stats_</a></div><div class="ttdeci">std::unique_ptr&lt; ObjectStats &gt; dead_object_stats_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02342">heap.h:2342</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_affa42c4fc2313750c08caf4556f44790"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#affa42c4fc2313750c08caf4556f44790">v8::internal::Heap::CreateObjectStats</a></div><div class="ttdeci">void CreateObjectStats()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l07279">heap.cc:7279</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_afdec8e47c6d178bfb42aa203999cb707"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#afdec8e47c6d178bfb42aa203999cb707">v8::internal::Isolate::bootstrapper</a></div><div class="ttdeci">Bootstrapper * bootstrapper()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01193">isolate.h:1193</a></div></div>
<div class="ttc" id="aclassv8_1_1tracing_1_1TracingCategoryObserver_html_aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30"><div class="ttname"><a href="classv8_1_1tracing_1_1TracingCategoryObserver.html#aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30">v8::tracing::TracingCategoryObserver::ENABLED_BY_TRACING</a></div><div class="ttdeci">@ ENABLED_BY_TRACING</div><div class="ttdef"><b>Definition:</b> <a href="tracing-category-observer_8h_source.html#l00023">tracing-category-observer.h:23</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_af107f5a2136b9fcf104fc8c23a5bdfaa"><div class="ttname"><a href="gc-tracer_8h.html#af107f5a2136b9fcf104fc8c23a5bdfaa">TRACE_GC_CATEGORIES</a></div><div class="ttdeci">#define TRACE_GC_CATEGORIES</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8h_source.html#l00029">gc-tracer.h:29</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1TracingFlags_html_a2b550a4619e10cd8ccffb3bcb49922c1"><div class="ttname"><a href="structv8_1_1internal_1_1TracingFlags.html#a2b550a4619e10cd8ccffb3bcb49922c1">v8::internal::TracingFlags::gc_stats</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE std::atomic_uint gc_stats</div><div class="ttdef"><b>Definition:</b> <a href="tracing-flags_8h_source.html#l00022">tracing-flags.h:22</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1TracingFlags_html_a6ae2ff9ff9df795354e7f9bcda063268"><div class="ttname"><a href="structv8_1_1internal_1_1TracingFlags.html#a6ae2ff9ff9df795354e7f9bcda063268">v8::internal::TracingFlags::is_gc_stats_enabled</a></div><div class="ttdeci">static bool is_gc_stats_enabled()</div><div class="ttdef"><b>Definition:</b> <a href="tracing-flags_8h_source.html#l00036">tracing-flags.h:36</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a8b5bca924ef796a311bb5ba5c8d7f57d"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a8b5bca924ef796a311bb5ba5c8d7f57d">TRACE_EVENT_SCOPE_THREAD</a></div><div class="ttdeci">#define TRACE_EVENT_SCOPE_THREAD</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00857">trace-event-no-perfetto.h:857</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a9caa02a30959b26112c2dcc35ed3727e"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a9caa02a30959b26112c2dcc35ed3727e">TRACE_EVENT_INSTANT2</a></div><div class="ttdeci">#define TRACE_EVENT_INSTANT2(category_group, name, scope, arg1_name, arg1_val, arg2_name, arg2_val)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00064">trace-event-no-perfetto.h:64</a></div></div>
<div class="ttc" id="atracing_2trace-event_8h_html_a3e7918f87c057008134f23473b59c341"><div class="ttname"><a href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a></div><div class="ttdeci">#define TRACE_STR_COPY(str)</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00050">trace-event.h:50</a></div></div>
<div class="ttc" id="av8config_8h_html_a4f489f1b838163ab33f251c9e470d938"><div class="ttname"><a href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a></div><div class="ttdeci">#define V8_LIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00661">v8config.h:661</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="object-stats_8cc_source.html#l01201">v8::internal::ObjectStatsCollector::Collect()</a>, <a class="el" href="tracing-category-observer_8h_source.html#l00023">v8::tracing::TracingCategoryObserver::ENABLED_BY_TRACING</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00025">TRACE_DISABLED_BY_DEFAULT</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00064">TRACE_EVENT_INSTANT2</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00857">TRACE_EVENT_SCOPE_THREAD</a>, <a class="el" href="gc-tracer_8h_source.html#l00029">TRACE_GC_CATEGORIES</a>, <a class="el" href="tracing_2trace-event_8h_source.html#l00050">TRACE_STR_COPY</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, <a class="el" href="v8config_8h_source.html#l00661">V8_LIKELY</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-67" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-68" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-68-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-68-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-68-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae4455c0b37942d5616bb57730157eb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4455c0b37942d5616bb57730157eb6a">&#9670;&nbsp;</a></span>RecordRelocSlot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RecordRelocSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *&#160;</td>
          <td class="paramname"><em>rinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04065">4065</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                                                                      {</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac97a73ff845731485fa3556291425f39">ShouldRecordRelocSlot</a>(host, rinfo, target)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  RecordRelocSlotInfo info = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#adb22d7642cc47c49db3b6f5041b129b9">ProcessRelocInfo</a>(host, rinfo, target);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <span class="comment">// Access to TypeSlots need to be protected, since LocalHeaps might</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;  <span class="comment">// publish code in the background thread.</span></div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  std::optional&lt;base::MutexGuard&gt; opt_guard;</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_sparkplug) {</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;    opt_guard.emplace(info.page_metadata-&gt;mutex());</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  }</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#a485fac2341c3c73c9caab6584c5d5d72">RememberedSet&lt;OLD_TO_OLD&gt;::InsertTyped</a>(info.page_metadata, info.slot_type,</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                                         info.offset);</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac97a73ff845731485fa3556291425f39"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac97a73ff845731485fa3556291425f39">v8::internal::MarkCompactCollector::ShouldRecordRelocSlot</a></div><div class="ttdeci">static bool ShouldRecordRelocSlot(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo, Tagged&lt; HeapObject &gt; target)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04009">mark-compact.cc:4009</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_adb22d7642cc47c49db3b6f5041b129b9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#adb22d7642cc47c49db3b6f5041b129b9">v8::internal::MarkCompactCollector::ProcessRelocInfo</a></div><div class="ttdeci">static RecordRelocSlotInfo ProcessRelocInfo(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo, Tagged&lt; HeapObject &gt; target)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04020">mark-compact.cc:4020</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_a485fac2341c3c73c9caab6584c5d5d72"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#a485fac2341c3c73c9caab6584c5d5d72">v8::internal::RememberedSet::InsertTyped</a></div><div class="ttdeci">static void InsertTyped(MutablePageMetadata *memory_chunk, SlotType slot_type, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set_8h_source.html#l00243">remembered-set.h:243</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutable-page-metadata_8h_source.html#l00102">v8::internal::MutablePageMetadata::mutex()</a>, <a class="el" href="mark-compact_8h_source.html#l00126">v8::internal::MarkCompactCollector::RecordRelocSlotInfo::offset</a>, <a class="el" href="mark-compact_8h_source.html#l00124">v8::internal::MarkCompactCollector::RecordRelocSlotInfo::page_metadata</a>, <a class="el" href="mark-compact_8h_source.html#l00125">v8::internal::MarkCompactCollector::RecordRelocSlotInfo::slot_type</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l01302">v8::internal::RecordMigratedSlotVisitor::VisitCodeTarget()</a>, <a class="el" href="mark-compact_8cc_source.html#l01314">v8::internal::RecordMigratedSlotVisitor::VisitEmbeddedPointer()</a>, and <a class="el" href="marking-barrier_8cc_source.html#l00107">v8::internal::MarkingBarrier::Write()</a>.</p>
<div id="dynsection-69" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-69-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-69-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-69-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a_cgraph.svg" width="442" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-70" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-70-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-70-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-70-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a_icgraph.svg" width="495" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a16b185ed1b8262db434462d3e8ed074d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b185ed1b8262db434462d3e8ed074d">&#9670;&nbsp;</a></span>RecordSlot() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename THeapObjectSlot &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RecordSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a> *&#160;</td>
          <td class="paramname"><em>source_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">THeapObjectSlot&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact-inl_8h_source.html#l00071">71</a> of file <a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                                                 {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  MemoryChunk* target_chunk = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(target);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (target_chunk-&gt;IsEvacuationCandidate()) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    MutablePageMetadata* source_page =</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#acaa892e234b2fe3170fa488f5a9a3767">MutablePageMetadata::cast</a>(source_chunk-&gt;Metadata());</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (target_chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93">MemoryChunk::IS_EXECUTABLE</a>)) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="comment">// TODO(377724745): currently needed because flags are untrusted.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#a741cb77b6f267fbe178b0a59d98a32c4">InsideSandbox</a>(target_chunk-&gt;address()));</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      RememberedSet&lt;TRUSTED_TO_CODE&gt;::Insert&lt;AccessMode::ATOMIC&gt;(</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;          source_page, source_chunk-&gt;Offset(slot.address()));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source_chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>) &amp;&amp;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;               target_chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>)) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="comment">// TODO(377724745): currently needed because flags are untrusted.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#a741cb77b6f267fbe178b0a59d98a32c4">InsideSandbox</a>(target_chunk-&gt;address()));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::Insert&lt;AccessMode::ATOMIC&gt;(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          source_page, source_chunk-&gt;Offset(slot.address()));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a4f489f1b838163ab33f251c9e470d938">V8_LIKELY</a>(!target_chunk-&gt;InWritableSharedSpace()) ||</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;               source_page-&gt;heap()-&gt;isolate()-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(source_page-&gt;heap(), target_chunk-&gt;GetHeap());</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      RememberedSet&lt;OLD_TO_OLD&gt;::Insert&lt;AccessMode::ATOMIC&gt;(</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          source_page, source_chunk-&gt;Offset(slot.address()));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment">// DCHECK here that we only don&#39;t record in case of local-&gt;shared</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// references in a client GC.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!source_page-&gt;heap()-&gt;isolate()-&gt;is_shared_space_isolate());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(target_chunk-&gt;GetHeap()-&gt;isolate()-&gt;is_shared_space_isolate());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(target_chunk-&gt;InWritableSharedSpace());</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="ttc" id="acheck_8h_html_aee78f6fbdf206be23e949191f9408e4b"><div class="ttname"><a href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a></div><div class="ttdeci">#define SBXCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="check_8h_source.html#l00054">check.h:54</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">v8::internal::MemoryChunk::IS_TRUSTED</a></div><div class="ttdeci">@ IS_TRUSTED</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00134">memory-chunk.h:134</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93">v8::internal::MemoryChunk::IS_EXECUTABLE</a></div><div class="ttdeci">@ IS_EXECUTABLE</div><div class="ttdef"><b>Definition:</b> <a href="memory-chunk_8h_source.html#l00129">memory-chunk.h:129</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a741cb77b6f267fbe178b0a59d98a32c4"><div class="ttname"><a href="namespacev8_1_1internal.html#a741cb77b6f267fbe178b0a59d98a32c4">v8::internal::InsideSandbox</a></div><div class="ttdeci">bool InsideSandbox(uintptr_t address)</div><div class="ttdef"><b>Definition:</b> <a href="sandbox_8h_source.html#l00334">sandbox.h:334</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk_8h_source.html#l00171">v8::internal::MemoryChunk::address()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00079">v8::internal::MutablePageMetadata::cast()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="memory-chunk_8h_source.html#l00190">v8::internal::MemoryChunk::FromHeapObject()</a>, <a class="el" href="memory-chunk-inl_8h_source.html#l00040">v8::internal::MemoryChunk::GetHeap()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00069">v8::internal::MemoryChunkMetadata::heap()</a>, <a class="el" href="sandbox_8h_source.html#l00334">v8::internal::InsideSandbox()</a>, <a class="el" href="memory-chunk_8h_source.html#l00204">v8::internal::MemoryChunk::InWritableSharedSpace()</a>, <a class="el" href="memory-chunk_8h_source.html#l00129">v8::internal::MemoryChunk::IS_EXECUTABLE</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00134">v8::internal::MemoryChunk::IS_TRUSTED</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="memory-chunk-inl_8h_source.html#l00017">v8::internal::MemoryChunk::Metadata()</a>, <a class="el" href="memory-chunk_8h_source.html#l00363">v8::internal::MemoryChunk::Offset()</a>, <a class="el" href="check_8h_source.html#l00054">SBXCHECK</a>, and <a class="el" href="v8config_8h_source.html#l00661">V8_LIKELY</a>.</p>
<div id="dynsection-71" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-71-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-71-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-71-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a16b185ed1b8262db434462d3e8ed074d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a48f19e21a6973a04ac052c06f045ac10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f19e21a6973a04ac052c06f045ac10">&#9670;&nbsp;</a></span>RecordSlot() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename THeapObjectSlot &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RecordSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">THeapObjectSlot&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact-inl_8h_source.html#l00060">60</a> of file <a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                                 {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  MemoryChunk* source_page = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (!source_page-&gt;ShouldSkipEvacuationSlotRecording()) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a48f19e21a6973a04ac052c06f045ac10">RecordSlot</a>(source_page, slot, target);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk_8h_source.html#l00190">v8::internal::MemoryChunk::FromHeapObject()</a>, and <a class="el" href="memory-chunk_8h_source.html#l00296">v8::internal::MemoryChunk::ShouldSkipEvacuationSlotRecording()</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap-write-barrier_8cc_source.html#l00404">v8::internal::anonymous_namespace{heap-write-barrier.cc}::ForRangeImpl()</a>, <a class="el" href="marking-barrier-inl_8h_source.html#l00114">v8::internal::MarkingBarrier::MarkRange()</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00184">v8::internal::ConcurrentMarkingVisitor::RecordSlot()</a>, <a class="el" href="mark-compact_8cc_source.html#l00269">v8::internal::MainMarkingVisitor::RecordSlot()</a>, <a class="el" href="heap-visitor_8cc_source.html#l00108">v8::internal::WeakListVisitor&lt; Context &gt;::VisitLiveObject()</a>, <a class="el" href="heap-visitor_8cc_source.html#l00029">v8::internal::VisitWeakList()</a>, and <a class="el" href="marking-barrier-inl_8h_source.html#l00021">v8::internal::MarkingBarrier::Write()</a>.</p>
<div id="dynsection-72" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-72-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-72-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-72-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10_cgraph.svg" width="518" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-73" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-73-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-73-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-73-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a268c6d19f21e9b35d477806a33960d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a268c6d19f21e9b35d477806a33960d64">&#9670;&nbsp;</a></span>RecordStrongDescriptorArraysForWeakening()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RecordStrongDescriptorArraysForWeakening </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1GlobalHandleVector.html">GlobalHandleVector</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt;&#160;</td>
          <td class="paramname"><em>strong_descriptor_arrays</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03747">3747</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;                                                                  {</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">IsMajorMarking</a>());</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a512d50cdd47b6006d66ac9456259e69b">strong_descriptor_arrays_mutex_</a>);</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a549e40a15f698fff626af735208769ae">strong_descriptor_arrays_</a>.push_back(std::move(strong_descriptor_arrays));</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a512d50cdd47b6006d66ac9456259e69b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a512d50cdd47b6006d66ac9456259e69b">v8::internal::MarkCompactCollector::strong_descriptor_arrays_mutex_</a></div><div class="ttdeci">base::Mutex strong_descriptor_arrays_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00435">mark-compact.h:435</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a549e40a15f698fff626af735208769ae"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a549e40a15f698fff626af735208769ae">v8::internal::MarkCompactCollector::strong_descriptor_arrays_</a></div><div class="ttdeci">std::vector&lt; GlobalHandleVector&lt; DescriptorArray &gt; &gt; strong_descriptor_arrays_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00434">mark-compact.h:434</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40b71b3558e4b5297d51003612578a81"><div class="ttname"><a href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">v8::base::MutexGuard</a></div><div class="ttdeci">LockGuard&lt; Mutex &gt; MutexGuard</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00219">mutex.h:219</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap_8cc_source.html#l06132">v8::internal::Heap::WeakenDescriptorArrays()</a>.</p>
<div id="dynsection-74" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-74-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-74-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-74-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a268c6d19f21e9b35d477806a33960d64_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae07545bc19d80a27a63c760d875601c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07545bc19d80a27a63c760d875601c2">&#9670;&nbsp;</a></span>ReleaseEvacuationCandidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ReleaseEvacuationCandidates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05962">5962</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;                                                       {</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;  <span class="keywordflow">for</span> (PageMetadata* p : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>) {</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;    <span class="keywordflow">if</span> (!p-&gt;Chunk()-&gt;IsEvacuationCandidate()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;    PagedSpace* <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a> = <span class="keyword">static_cast&lt;</span>PagedSpace*<span class="keyword">&gt;</span>(p-&gt;owner());</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;    p-&gt;SetLiveBytes(0);</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">ReleasePage</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, p);</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;  }</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af8bdf9288a13d36c8c4c482145a20238">old_space_evacuation_pages_</a>.clear();</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, and <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>.</p>

</div>
</div>
<a id="a5fd86ee72dfc32e6d1e18f4c5e4a050d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fd86ee72dfc32e6d1e18f4c5e4a050d">&#9670;&nbsp;</a></span>ReleasePage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ReleasePage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PagedSpaceBase.html">PagedSpaceBase</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05974">5974</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;                                                           {</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;RemovePageFromSpace(page);</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160; </div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity()) {</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">SHARED_SPACE</a>: {</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;      <span class="comment">// Old-to-new slots in old objects may be overwritten with references to</span></div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;      <span class="comment">// shared objects. Postpone releasing empty pages so that updating</span></div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;      <span class="comment">// old-to-new slots in dead old objects may access the dead shared</span></div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;      <span class="comment">// objects.</span></div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a>.push_back(page);</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;    }</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160; </div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>:</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>: {</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">memory_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a44f020919cc4a6c1859943003e577424">Free</a>(<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba7d701dccd8f3f5f8a6dfcd5f2c488795">MemoryAllocator::FreeMode::kPool</a>, page);</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;    }</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160; </div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;    <span class="keywordflow">default</span>: {</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">memory_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a44f020919cc4a6c1859943003e577424">Free</a>(<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5">MemoryAllocator::FreeMode::kImmediately</a>,</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;                                       page);</div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;    }</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;  }</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a1c5f0a0deae321ce11d19b7be506ed8ba7d701dccd8f3f5f8a6dfcd5f2c488795"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba7d701dccd8f3f5f8a6dfcd5f2c488795">v8::internal::MemoryAllocator::FreeMode::kPool</a></div><div class="ttdeci">@ kPool</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h.html#a761e4e5929b1553283fd6a532822bb17">heap()</a>, <a class="el" href="common_2globals_8h_source.html#l01300">v8::internal::NEW_SPACE</a>, <a class="el" href="common_2globals_8h_source.html#l01302">v8::internal::OLD_SPACE</a>, <a class="el" href="common_2globals_8h_source.html#l01304">v8::internal::SHARED_SPACE</a>, and <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>.</p>
<div id="dynsection-75" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-75-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-75-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-75-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d_cgraph.svg" width="308" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8c05858a7577a61d236de24903278946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c05858a7577a61d236de24903278946">&#9670;&nbsp;</a></span>ReportAbortedEvacuationCandidateDueToFlags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ReportAbortedEvacuationCandidateDueToFlags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05879">5879</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;                                            {</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(page-&gt;Chunk(), chunk);</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;  <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>)) {</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  }</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  chunk-&gt;SetFlagSlow(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc">MemoryChunk::COMPACTION_WAS_ABORTED</a>);</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a07a4e5f537a84e8ed02f47c747e10f89">aborted_evacuation_candidates_due_to_flags_</a>.push_back(page);</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, and <a class="el" href="memory-chunk_8cc_source.html#l00180">v8::internal::MemoryChunk::SetFlagSlow()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact-inl_8h_source.html#l00036">MarkRootObject()</a>.</p>
<div id="dynsection-76" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-76-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-76-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-76-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946_cgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-77" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-77-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-77-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-77-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946_icgraph.svg" width="100%" height="569"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0c89184f88696445ac02aee44aa43de2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c89184f88696445ac02aee44aa43de2">&#9670;&nbsp;</a></span>ReportAbortedEvacuationCandidateDueToOOM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ReportAbortedEvacuationCandidateDueToOOM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a>&#160;</td>
          <td class="paramname"><em>failed_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05872">5872</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;                                              {</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a2e6250572f864eaa8bd93c57ae34215a">mutex_</a>);</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dab80ef7a34c59ce69e9828d602bb9f">aborted_evacuation_candidates_due_to_oom_</a>.push_back(</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;      std::make_pair(failed_start, page));</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a2e6250572f864eaa8bd93c57ae34215a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a2e6250572f864eaa8bd93c57ae34215a">v8::internal::MarkCompactCollector::mutex_</a></div><div class="ttdeci">base::Mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00398">mark-compact.h:398</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14b8e9f090e9c7641574ed9829b4fee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b8e9f090e9c7641574ed9829b4fee1">&#9670;&nbsp;</a></span>ResetAndRelinkBlackAllocatedPage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::ResetAndRelinkBlackAllocatedPage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l06035">6035</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;                                           {</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(page-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(page-&gt;live_bytes(), 0);</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(page-&gt;allocated_bytes(), 0);</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(page-&gt;marking_bitmap()-&gt;IsClean());</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;  std::optional&lt;RwxMemoryWriteScope&gt; scope;</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;  <span class="keywordflow">if</span> (page-&gt;Chunk()-&gt;InCodeSpace()) {</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;    scope.emplace(<span class="stringliteral">&quot;For writing flags.&quot;</span>);</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;  }</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;  page-&gt;Chunk()-&gt;ClearFlagUnlocked(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>);</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;IncreaseAllocatedBytes(page-&gt;allocated_bytes(), page);</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;RelinkFreeListCategories(page);</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00101">v8::internal::MemoryChunkMetadata::allocated_bytes()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="memory-chunk_8h_source.html#l00227">v8::internal::MemoryChunk::ClearFlagUnlocked()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00487">DCHECK_GE</a>, <a class="el" href="memory-chunk_8h_source.html#l00280">v8::internal::MemoryChunk::InCodeSpace()</a>, <a class="el" href="marking_8cc_source.html#l00132">v8::internal::MarkingBitmap::IsClean()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00256">v8::internal::MutablePageMetadata::live_bytes()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00246">v8::internal::MutablePageMetadata::marking_bitmap()</a>, and <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>.</p>
<div id="dynsection-78" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-78-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-78-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-78-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac29e4cf8c7be9c6a3e843b5695b16fb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29e4cf8c7be9c6a3e843b5695b16fb3">&#9670;&nbsp;</a></span>RetainMaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RetainMaps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02428">2428</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                                      {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <span class="comment">// Retaining maps increases the chances of reusing map transitions at some</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="comment">// memory cost, hence disable it when trying to reduce memory footprint more</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <span class="comment">// aggressively.</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> should_retain_maps =</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>() &amp;&amp; <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.retain_maps_for_n_gc != 0;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="keywordflow">for</span> (Tagged&lt;WeakArrayList&gt; retained_maps : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad64f79b03a11d91fadac7e6c6ed6d973">FindAllRetainedMaps</a>()) {</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, retained_maps-&gt;length() % 2);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; retained_maps-&gt;length(); <a class="code" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      Tagged&lt;MaybeObject&gt; <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> = retained_maps-&gt;Get(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> map_heap_object;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>.GetHeapObjectIfWeak(&amp;map_heap_object)) {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      }</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="keywordtype">int</span> age = retained_maps-&gt;Get(<a class="code" href="namespacev8_1_1internal.html">i</a> + 1).ToSmi().value();</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keywordtype">int</span> new_age;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      Tagged&lt;Map&gt; map = Cast&lt;Map&gt;(map_heap_object);</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keywordflow">if</span> (should_retain_maps &amp;&amp; <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                                    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, map)) {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a149d8c397d9b5e24f9f059e879b85ac2">ShouldRetainMap</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, map, age)) {</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, map)) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a0e9d1ac5aa056d7bf0087bce379e3b7c">MarkingHelper::TryMarkAndPush</a>(</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>,</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>, map);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;          }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> <a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a> = map-&gt;prototype();</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">if</span> (age &gt; 0 &amp;&amp; <a class="code" href="namespacev8_1_1internal.html#a0786c89c1004cb964dc034b138b263fd">IsHeapObject</a>(<a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>) &amp;&amp;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            <a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>, Cast&lt;HeapObject&gt;(<a class="code" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>))) {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;          <span class="comment">// The prototype is not marked, age the map.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;          new_age = age - 1;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;          <span class="comment">// The prototype and the constructor are marked, this map keeps only</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;          <span class="comment">// transition tree alive, not JSObjects. Do not age the map.</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;          new_age = age;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        new_age = <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.retain_maps_for_n_gc;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <span class="comment">// Compact the array and update the age.</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <span class="keywordflow">if</span> (new_age != age) {</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        retained_maps-&gt;Set(<a class="code" href="namespacev8_1_1internal.html">i</a> + 1, <a class="code" href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">Smi::FromInt</a>(new_age));</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      }</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    }</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  }</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad64f79b03a11d91fadac7e6c6ed6d973"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad64f79b03a11d91fadac7e6c6ed6d973">v8::internal::Heap::FindAllRetainedMaps</a></div><div class="ttdeci">std::vector&lt; Tagged&lt; WeakArrayList &gt; &gt; FindAllRetainedMaps()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l07214">heap.cc:7214</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_afe7f07102d90ccce48cbe677c88a0645"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#afe7f07102d90ccce48cbe677c88a0645">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; FromInt(int value)</div><div class="ttdef"><b>Definition:</b> <a href="smi_8h_source.html#l00038">smi.h:38</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a149d8c397d9b5e24f9f059e879b85ac2"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a149d8c397d9b5e24f9f059e879b85ac2">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldRetainMap</a></div><div class="ttdeci">bool ShouldRetainMap(Heap *heap, MarkingState *marking_state, Tagged&lt; Map &gt; map, int age)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l02409">mark-compact.cc:2409</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af2d9fec01057be7bdab90bb4682717b0"><div class="ttname"><a href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">v8::internal::prototype</a></div><div class="ttdeci">kInstanceDescriptorsOffset kTransitionsOrPrototypeInfoOffset prototype</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00069">map-inl.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="instance-type-inl_8h_source.html#l00313">v8::internal::InstanceTypeChecker::IsHeapObject()</a>, <a class="el" href="v8-console_8cc_source.html#l00218">v8_inspector::anonymous_namespace{v8-console.cc}::kRegular</a>, <a class="el" href="map-inl_8h_source.html#l00069">v8::internal::prototype</a>, <a class="el" href="mark-compact_8cc_source.html#l02409">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldRetainMap()</a>, <a class="el" href="tagged-impl-inl_8h_source.html#l00024">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::ToSmi()</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>
<div id="dynsection-79" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-79-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-79-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-79-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3_cgraph.svg" width="100%" height="418"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa5044d30e7d0db55493414748d740aaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5044d30e7d0db55493414748d740aaa">&#9670;&nbsp;</a></span>RightTrimDescriptorArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::RightTrimDescriptorArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt;&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>descriptors_to_trim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03711">3711</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;                                                            {</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  <span class="keywordtype">int</span> old_nof_all_descriptors = array-&gt;number_of_all_descriptors();</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <span class="keywordtype">int</span> new_nof_all_descriptors = old_nof_all_descriptors - descriptors_to_trim;</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, descriptors_to_trim);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(0, new_nof_all_descriptors);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> start = array-&gt;GetDescriptorSlot(new_nof_all_descriptors).address();</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = array-&gt;GetDescriptorSlot(old_nof_all_descriptors).address();</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  MutablePageMetadata* chunk = <a class="code" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(array);</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRange</a>(chunk, start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>,</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                                         <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_NEW_BACKGROUND&gt;::RemoveRange</a>(</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      chunk, start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>, <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRange</a>(chunk, start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>,</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;                                            <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#ada344e3a620e580d3b149474dd995124">RememberedSet&lt;OLD_TO_OLD&gt;::RemoveRange</a>(chunk, start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>,</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                                         <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="common_2globals_8h.html#a69541a836e89979350b2e7634e2d5a0a">V8_COMPRESS_POINTERS_8GB_BOOL</a>) {</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> aligned_start = <a class="code" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(start);</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> aligned_end = <a class="code" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(<a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">if</span> (aligned_start &lt; aligned_end) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a4e77c4c4c45f64cd073d9e29b9d7fb91">CreateFillerObjectAt</a>(</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;          aligned_start, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(aligned_end - aligned_start));</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    }</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1heap.html#abbe47cc01f1d548508ed123a8be3f4ca">heap::ShouldZapGarbage</a>()) {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> zap_end = std::min(aligned_start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>);</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a5b59223136254772ef018d90e009318d">MemsetTagged</a>(<a class="code" href="namespacev8_1_1internal.html#a0bc0ebcec45817212856f7d5e021224c">ObjectSlot</a>(start),</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;                   <a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#a82c1746016699f0092cef67ba2e71956">kZapValue</a>)),</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;                   (zap_end - start) &gt;&gt; <a class="code" href="namespacev8_1_1internal.html#a7b94dc2dd5250e9341c12941db8e9595">kTaggedSizeLog2</a>);</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    }</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a4e77c4c4c45f64cd073d9e29b9d7fb91">CreateFillerObjectAt</a>(start, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> - start));</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  }</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  array-&gt;set_number_of_all_descriptors(new_nof_all_descriptors);</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;}</div>
<div class="ttc" id="acommon_2globals_8h_html_a69541a836e89979350b2e7634e2d5a0a"><div class="ttname"><a href="common_2globals_8h.html#a69541a836e89979350b2e7634e2d5a0a">V8_COMPRESS_POINTERS_8GB_BOOL</a></div><div class="ttdeci">#define V8_COMPRESS_POINTERS_8GB_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00599">globals.h:599</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a51dcb90ae077172b12d63271c7e7ba0c"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">v8::internal::compiler::end</a></div><div class="ttdeci">Node::Uses::const_iterator end(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00711">node.h:711</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1heap_html_abbe47cc01f1d548508ed123a8be3f4ca"><div class="ttname"><a href="namespacev8_1_1internal_1_1heap.html#abbe47cc01f1d548508ed123a8be3f4ca">v8::internal::heap::ShouldZapGarbage</a></div><div class="ttdeci">bool ShouldZapGarbage()</div><div class="ttdef"><b>Definition:</b> <a href="zapping_8h_source.html#l00018">zapping.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5b59223136254772ef018d90e009318d"><div class="ttname"><a href="namespacev8_1_1internal.html#a5b59223136254772ef018d90e009318d">v8::internal::MemsetTagged</a></div><div class="ttdeci">void MemsetTagged(Tagged_t *start, Tagged&lt; MaybeObject &gt; value, size_t counter)</div><div class="ttdef"><b>Definition:</b> <a href="slots-inl_8h_source.html#l00497">slots-inl.h:497</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a7b94dc2dd5250e9341c12941db8e9595"><div class="ttname"><a href="namespacev8_1_1internal.html#a7b94dc2dd5250e9341c12941db8e9595">v8::internal::kTaggedSizeLog2</a></div><div class="ttdeci">constexpr int kTaggedSizeLog2</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00534">globals.h:534</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a82c1746016699f0092cef67ba2e71956"><div class="ttname"><a href="namespacev8_1_1internal.html#a82c1746016699f0092cef67ba2e71956">v8::internal::kZapValue</a></div><div class="ttdeci">constexpr uint32_t kZapValue</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00999">globals.h:999</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tagged_8h_source.html#l00525">v8::internal::Tagged&lt; HeapObject &gt;::address()</a>, <a class="el" href="common_2globals_8h_source.html#l01811">ALIGN_TO_ALLOCATION_ALIGNMENT</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00489">DCHECK_LE</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00488">DCHECK_LT</a>, <a class="el" href="node_8h_source.html#l00711">v8::internal::compiler::end()</a>, <a class="el" href="common_2globals_8h_source.html#l00534">v8::internal::kTaggedSizeLog2</a>, <a class="el" href="common_2globals_8h_source.html#l00999">v8::internal::kZapValue</a>, <a class="el" href="slots-inl_8h_source.html#l00497">v8::internal::MemsetTagged()</a>, <a class="el" href="zapping_8h_source.html#l00018">v8::internal::heap::ShouldZapGarbage()</a>, and <a class="el" href="common_2globals_8h_source.html#l00599">V8_COMPRESS_POINTERS_8GB_BOOL</a>.</p>
<div id="dynsection-80" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-80-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-80-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-80-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa_cgraph.svg" width="100%" height="574"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac97a73ff845731485fa3556291425f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97a73ff845731485fa3556291425f39">&#9670;&nbsp;</a></span>ShouldRecordRelocSlot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::ShouldRecordRelocSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1InstructionStream.html">InstructionStream</a> &gt;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a> *&#160;</td>
          <td class="paramname"><em>rinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l04009">4009</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;                                                                            {</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  MemoryChunk* source_chunk = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(host);</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;  MemoryChunk* target_chunk = <a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a0481ad8f68cb1d4a794d588d80cc8f54">MemoryChunk::FromHeapObject</a>(target);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  <span class="keywordflow">return</span> target_chunk-&gt;IsEvacuationCandidate() &amp;&amp;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;         !source_chunk-&gt;ShouldSkipEvacuationSlotRecording();</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, and <a class="el" href="memory-chunk_8h_source.html#l00296">v8::internal::MemoryChunk::ShouldSkipEvacuationSlotRecording()</a>.</p>

<p class="reference">Referenced by <a class="el" href="concurrent-marking_8cc_source.html#l00196">v8::internal::ConcurrentMarkingVisitor::RecordRelocSlot()</a>, and <a class="el" href="marking-barrier_8cc_source.html#l00199">v8::internal::MarkingBarrier::RecordRelocSlot()</a>.</p>
<div id="dynsection-81" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-81-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-81-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-81-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39_cgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-82" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-82-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-82-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-82-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a2f6c6946b314cbd396fedd9a8d3b1887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f6c6946b314cbd396fedd9a8d3b1887">&#9670;&nbsp;</a></span>SpecialClearMapSlot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::SpecialClearMapSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapObject.html">HeapObject</a> &gt;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>dead_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a5f8b754678e24836a51be62e3f8c3682">HeapObjectSlot</a>&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03269">3269</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;                                                                    {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a112747cd949c517326fef486c68a39f6">ClearPotentialSimpleMapTransition</a>(map);</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160; </div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  <span class="comment">// Special handling for clearing field type entries, identified by their host</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <span class="comment">// being a descriptor array.</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="comment">// TODO(olivf): This whole special handling of field-type clearing</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  <span class="comment">// could be replaced by eagerly triggering field type dependencies and</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  <span class="comment">// generalizing field types, as soon as a field-type map becomes</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  <span class="comment">// unstable.</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <span class="keywordflow">if</span> (IsDescriptorArray(host)) {</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <span class="comment">// We want to distinguish two cases:</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="comment">// 1. There are no instances of the descriptor owner&#39;s map left.</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="comment">// 2. The field type is not up to date because the stored object</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="comment">//    migrated away to a different map.</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="comment">// In case (1) it makes sense to clear the field type such that we</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <span class="comment">// can learn a new one should we ever start creating instances</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="comment">// again.</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <span class="comment">// In case (2) we must not re-learn a new field type. Doing so could</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <span class="comment">// lead us to learning a field type that is not consistent with</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <span class="comment">// still existing object&#39;s contents. To conservatively identify case</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <span class="comment">// (1) we check the stability of the dead map.</span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> location(slot);</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <span class="keywordflow">if</span> (map-&gt;is_stable() &amp;&amp; <a class="code" href="classv8_1_1internal_1_1FieldType.html#a83ff06a5c1e95cf1528eb7be762e8b22">FieldType::kFieldTypesCanBeClearedOnGC</a>) {</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      location.store(<a class="code" href="classv8_1_1internal_1_1FieldType.html#a850ca02db2d0bd0b2279e392a7b7a606">FieldType::None</a>());</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      location.store(<a class="code" href="classv8_1_1internal_1_1FieldType.html#a83b2eae94beaffcfdd7b2465521b3c17">FieldType::Any</a>());</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    }</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  }</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a83b2eae94beaffcfdd7b2465521b3c17"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a83b2eae94beaffcfdd7b2465521b3c17">v8::internal::FieldType::Any</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Tagged&lt; FieldType &gt; Any()</div><div class="ttdef"><b>Definition:</b> <a href="field-type_8cc_source.html#l00022">field-type.cc:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a83ff06a5c1e95cf1528eb7be762e8b22"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a83ff06a5c1e95cf1528eb7be762e8b22">v8::internal::FieldType::kFieldTypesCanBeClearedOnGC</a></div><div class="ttdeci">static constexpr bool kFieldTypesCanBeClearedOnGC</div><div class="ttdef"><b>Definition:</b> <a href="field-type_8h_source.html#l00021">field-type.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a850ca02db2d0bd0b2279e392a7b7a606"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a850ca02db2d0bd0b2279e392a7b7a606">v8::internal::FieldType::None</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Tagged&lt; FieldType &gt; None()</div><div class="ttdef"><b>Definition:</b> <a href="field-type_8cc_source.html#l00017">field-type.cc:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="v8-object_8h_source.html#l00143">v8::None</a>, and <a class="el" href="slots-inl_8h_source.html#l00137">v8::internal::FullMaybeObjectSlot::store()</a>.</p>
<div id="dynsection-83" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-83-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-83-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-83-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887_cgraph.svg" width="100%" height="361"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab7e6a8160a88f451d394d7135403f3ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7e6a8160a88f451d394d7135403f3ae">&#9670;&nbsp;</a></span>StartCompaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::StartCompaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">StartCompactionMode</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00331">331</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                                                   {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>.empty());</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// Bailouts for completely disabled compaction.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact ||</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      (<a class="code" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode</a> == <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">StartCompactionMode::kAtomic</a> &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() &amp;&amp;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;       !<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack) ||</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_experiment_less_compaction &amp;&amp;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;       !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>()) ||</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a10fb79c24c416de942fc05b82680b440">serializer_enabled</a>()) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Don&#39;t compact shared space when CSS is enabled, since there may be</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// DirectHandles on stacks of client isolates.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8c6699d1a91a5f1e8d7748d80b068c7c">ConservativeStackScanningModeForMajorGC</a>() !=</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;       <a class="code" href="classv8_1_1internal_1_1Heap.html#a6a1078397aea6722948012db089cd96caa60924e124da4d51bd4dc74c8f85b158">Heap::StackScanMode::kFull</a>) &amp;&amp;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>());</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a353eba8c85db23f30be40d7e297ded1d">trusted_space</a>());</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a939fb55411a48a11cd43f3de55ef5ff3">AllowsCodeCompaction</a>() &amp;&amp;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_code_space_with_stack)) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">code_space</a>());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a95616b4a1de76737188bb25ce12243d7">TraceFragmentation</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">code_space</a>());</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a> = !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a57e6e0473e2cf52591357fcbeb4ebfca">evacuation_candidates_</a>.empty();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ade96b53880b218eba9217ef4f296dcdf">compacting_</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a125e37c0ebec23dda96a152ac6881820"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">v8::internal::Heap::shared_space</a></div><div class="ttdeci">SharedSpace * shared_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00776">heap.h:776</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a353eba8c85db23f30be40d7e297ded1d"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a353eba8c85db23f30be40d7e297ded1d">v8::internal::Heap::trusted_space</a></div><div class="ttdeci">TrustedSpace * trusted_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00782">heap.h:782</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a36ef98ceb504120eae6a5b3d0dcf9fd4"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">v8::internal::Heap::code_space</a></div><div class="ttdeci">CodeSpace * code_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00775">heap.h:775</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a6a1078397aea6722948012db089cd96caa60924e124da4d51bd4dc74c8f85b158"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a6a1078397aea6722948012db089cd96caa60924e124da4d51bd4dc74c8f85b158">v8::internal::Heap::StackScanMode::kFull</a></div><div class="ttdeci">@ kFull</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a8c6699d1a91a5f1e8d7748d80b068c7c"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a8c6699d1a91a5f1e8d7748d80b068c7c">v8::internal::Heap::ConservativeStackScanningModeForMajorGC</a></div><div class="ttdeci">StackScanMode ConservativeStackScanningModeForMajorGC() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00387">heap.h:387</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a10fb79c24c416de942fc05b82680b440"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a10fb79c24c416de942fc05b82680b440">v8::internal::Isolate::serializer_enabled</a></div><div class="ttdeci">bool serializer_enabled() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01575">isolate.h:1575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a939fb55411a48a11cd43f3de55ef5ff3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a939fb55411a48a11cd43f3de55ef5ff3">v8::internal::Isolate::AllowsCodeCompaction</a></div><div class="ttdeci">bool AllowsCodeCompaction() const</div><div class="ttdef"><b>Definition:</b> <a href="isolate_8cc_source.html#l06244">isolate.cc:6244</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a3cf7f62c683dbc4b89a6f71b7d60cc37"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">v8::internal::MarkCompactCollector::CollectEvacuationCandidates</a></div><div class="ttdeci">void CollectEvacuationCandidates(PagedSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00609">mark-compact.cc:609</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a95616b4a1de76737188bb25ce12243d7"><div class="ttname"><a href="namespacev8_1_1internal.html#a95616b4a1de76737188bb25ce12243d7">v8::internal::TraceFragmentation</a></div><div class="ttdeci">static void TraceFragmentation(PagedSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00322">mark-compact.cc:322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="isolate_8cc_source.html#l06244">v8::internal::Isolate::AllowsCodeCompaction()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00775">v8::internal::Heap::code_space()</a>, <a class="el" href="mark-compact_8cc_source.html#l00609">CollectEvacuationCandidates()</a>, <a class="el" href="mark-compact_8h_source.html#l00419">compacting_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00387">v8::internal::Heap::ConservativeStackScanningModeForMajorGC()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="mark-compact_8h_source.html#l00438">evacuation_candidates_</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="heap_8cc_source.html#l00531">v8::internal::Heap::IsGCWithStack()</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">kAtomic</a>, <a class="el" href="classv8_1_1internal_1_1Heap.html#a6a1078397aea6722948012db089cd96caa60924e124da4d51bd4dc74c8f85b158">v8::internal::Heap::kFull</a>, <a class="el" href="flag-definitions_8h.html#adaf90f045d5cd2710edd625b8685472a">mode()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00773">v8::internal::Heap::old_space()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01575">v8::internal::Isolate::serializer_enabled()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00776">v8::internal::Heap::shared_space()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01671">v8::internal::Heap::ShouldReduceMemory()</a>, <a class="el" href="mark-compact_8cc_source.html#l00322">v8::internal::TraceFragmentation()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00782">v8::internal::Heap::trusted_space()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00765">Prepare()</a>, and <a class="el" href="incremental-marking_8cc_source.html#l00240">v8::internal::IncrementalMarking::StartMarkingMajor()</a>.</p>
<div id="dynsection-84" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-84-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-84-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-84-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-85" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-85-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-85-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-85-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a222eabb25bd3b1513f83bc63e6043bf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222eabb25bd3b1513f83bc63e6043bf3">&#9670;&nbsp;</a></span>StartMarking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::StartMarking </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt;::<a class="el" href="classheap_1_1base_1_1IncrementalMarkingSchedule.html">heap::base::IncrementalMarkingSchedule</a> &gt;&#160;</td>
          <td class="paramname"><em>schedule</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00406">406</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                                                {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// The state for background thread is saved here and maintained for the whole</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// GC cycle. Both CppHeap and regular V8 heap will refer to this flag.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a> = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">ShouldUseBackgroundThreads</a>();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ac689c784f01c1729d13aeb4dc389c398">Unmark</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#ifdef V8_COMPRESS_POINTERS</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;young_external_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;old_external_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;cpp_heap_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// CppHeap&#39;s marker must be initialized before the V8 marker to allow</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// exchanging of worklists.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a24145cfb85d15c42c670288e26308822">cpp_heap</a>())) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;tracer(), GCTracer::Scope::MC_MARK_EMBEDDER_PROLOGUE);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    cpp_heap-&gt;InitializeMarking(<a class="code" href="namespacecppgc_1_1internal.html#a9a435919d5a4a3ecfdfe20fb93896a60a94f16e44c50fb544fc2b1f177b913cbc">CppHeap::CollectionType::kMajor</a>, schedule);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  std::vector&lt;Address&gt; contexts =</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abee2b61d93cc55561134df8f2ebb3401">memory_measurement</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryMeasurement.html#a061d53ab3d6b57b6a76398a07172fdc0">StartProcessing</a>();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_per_context_marking_worklist) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    contexts.clear();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    HandleScope handle_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> context : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2046480742afeae3e40fc52ec9dd582">FindAllNativeContexts</a>()) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      contexts.push_back(context-&gt;ptr());</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GCTracer.html#a9f2350f20960172b968c227996c3974d">NotifyMarkingStart</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a25ccbff2b71c818ffeab6970aad6510f">code_flush_mode_</a> = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#add930103cc1c8f4e2b122d8a5086a7c7">GetCodeFlushMode</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a>.<a class="code" href="classv8_1_1internal_1_1MarkingWorklists.html#a03bdf39a61570cea166a4c86c4dc404a">CreateContextWorklists</a>(contexts);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">auto</span>* cpp_heap = <a class="code" href="classv8_1_1internal_1_1CppHeap.html#a8298280d36073a63d9787cd1167aaefa">CppHeap::From</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a88c7a4389455ee71c26b5855a6a6ab82">cpp_heap_</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a> = std::make_unique&lt;MarkingWorklists::Local&gt;(</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a>,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      cpp_heap ? cpp_heap-&gt;CreateCppMarkingStateForMutatorThread()</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;               : MarkingWorklists::Local::kNoCppMarkingState);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a> = std::make_unique&lt;WeakObjects::Local&gt;(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a13bc63346bb82388df996ca28b39f6d3">weak_objects</a>());</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#af61342980b0507790efb15034d83162f">marking_visitor_</a> = std::make_unique&lt;MainMarkingVisitor&gt;(</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>.get(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7a10b022d9f335231b5ea7dbbdbaa51">local_weak_objects_</a>.get(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab77b1f17c1aaf49a93ba2e394fd11984">epoch</a>(),</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a00b443b2076c56d087e7c0decad77074">code_flush_mode</a>(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a4b0a6b7b8b7d6daeff5de689c9008cbf">ShouldCurrentGCKeepAgesUnchanged</a>(),</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GCTracer.html#a52bba12f494cafdfa348e34457698eaf">CodeFlushingIncrease</a>());</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// This method evicts SFIs with flushed bytecode from the cache before</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// iterating the compilation cache as part of the root set. SFIs that get</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// flushed in this GC cycle will get evicted out of the cache in the next GC</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// cycle. The SFI will remain in the cache until then and may remain in the</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// cache even longer in case the SFI is re-compiled.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ad4c4bcd709b46ec7bb94b592e1421e06">compilation_cache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1CompilationCache.html#a6c6f1bec5e0eeb46801ff0f051fd381a">MarkCompactPrologue</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// Marking bits are cleared by the sweeper or unmarker (if sticky mark-bits</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// are enabled).</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    VerifyMarkbitsAreClean();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1CompilationCache_html_a6c6f1bec5e0eeb46801ff0f051fd381a"><div class="ttname"><a href="classv8_1_1internal_1_1CompilationCache.html#a6c6f1bec5e0eeb46801ff0f051fd381a">v8::internal::CompilationCache::MarkCompactPrologue</a></div><div class="ttdeci">void MarkCompactPrologue()</div><div class="ttdef"><b>Definition:</b> <a href="compilation-cache_8cc_source.html#l00345">compilation-cache.cc:345</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_a52bba12f494cafdfa348e34457698eaf"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#a52bba12f494cafdfa348e34457698eaf">v8::internal::GCTracer::CodeFlushingIncrease</a></div><div class="ttdeci">uint16_t CodeFlushingIncrease() const</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8cc_source.html#l00727">gc-tracer.cc:727</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_a9f2350f20960172b968c227996c3974d"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#a9f2350f20960172b968c227996c3974d">v8::internal::GCTracer::NotifyMarkingStart</a></div><div class="ttdeci">void NotifyMarkingStart()</div><div class="ttdef"><b>Definition:</b> <a href="gc-tracer_8cc_source.html#l00691">gc-tracer.cc:691</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a4b0a6b7b8b7d6daeff5de689c9008cbf"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a4b0a6b7b8b7d6daeff5de689c9008cbf">v8::internal::Heap::ShouldCurrentGCKeepAgesUnchanged</a></div><div class="ttdeci">bool ShouldCurrentGCKeepAgesUnchanged() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l01420">heap.h:1420</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac689c784f01c1729d13aeb4dc389c398"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac689c784f01c1729d13aeb4dc389c398">v8::internal::Heap::Unmark</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Unmark()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03726">heap.cc:3726</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad2046480742afeae3e40fc52ec9dd582"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad2046480742afeae3e40fc52ec9dd582">v8::internal::Heap::FindAllNativeContexts</a></div><div class="ttdeci">std::vector&lt; Handle&lt; NativeContext &gt; &gt; FindAllNativeContexts()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l07203">heap.cc:7203</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ad4c4bcd709b46ec7bb94b592e1421e06"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ad4c4bcd709b46ec7bb94b592e1421e06">v8::internal::Isolate::compilation_cache</a></div><div class="ttdeci">CompilationCache * compilation_cache()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01206">isolate.h:1206</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a00b443b2076c56d087e7c0decad77074"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a00b443b2076c56d087e7c0decad77074">v8::internal::MarkCompactCollector::code_flush_mode</a></div><div class="ttdeci">base::EnumSet&lt; CodeFlushMode &gt; code_flush_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00170">mark-compact.h:170</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a13bc63346bb82388df996ca28b39f6d3"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a13bc63346bb82388df996ca28b39f6d3">v8::internal::MarkCompactCollector::weak_objects</a></div><div class="ttdeci">WeakObjects * weak_objects()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00180">mark-compact.h:180</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab77b1f17c1aaf49a93ba2e394fd11984"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab77b1f17c1aaf49a93ba2e394fd11984">v8::internal::MarkCompactCollector::epoch</a></div><div class="ttdeci">unsigned epoch() const</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8h_source.html#l00168">mark-compact.h:168</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_a03bdf39a61570cea166a4c86c4dc404a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#a03bdf39a61570cea166a4c86c4dc404a">v8::internal::MarkingWorklists::CreateContextWorklists</a></div><div class="ttdeci">void CreateContextWorklists(const std::vector&lt; Address &gt; &amp;contexts)</div><div class="ttdef"><b>Definition:</b> <a href="marking-worklist_8cc_source.html#l00039">marking-worklist.cc:39</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryMeasurement_html_a061d53ab3d6b57b6a76398a07172fdc0"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryMeasurement.html#a061d53ab3d6b57b6a76398a07172fdc0">v8::internal::MemoryMeasurement::StartProcessing</a></div><div class="ttdeci">std::vector&lt; Address &gt; StartProcessing()</div><div class="ttdef"><b>Definition:</b> <a href="memory-measurement_8cc_source.html#l00217">memory-measurement.cc:217</a></div></div>
<div class="ttc" id="anamespacecppgc_1_1internal_html_a9a435919d5a4a3ecfdfe20fb93896a60a94f16e44c50fb544fc2b1f177b913cbc"><div class="ttname"><a href="namespacecppgc_1_1internal.html#a9a435919d5a4a3ecfdfe20fb93896a60a94f16e44c50fb544fc2b1f177b913cbc">cppgc::internal::CollectionType::kMajor</a></div><div class="ttdeci">@ kMajor</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_add930103cc1c8f4e2b122d8a5086a7c7"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#add930103cc1c8f4e2b122d8a5086a7c7">v8::internal::anonymous_namespace{mark-compact.cc}::GetCodeFlushMode</a></div><div class="ttdeci">base::EnumSet&lt; CodeFlushMode &gt; GetCodeFlushMode(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l00372">mark-compact.cc:372</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00170">code_flush_mode()</a>, <a class="el" href="mark-compact_8h_source.html#l00469">code_flush_mode_</a>, <a class="el" href="gc-tracer_8cc_source.html#l00727">v8::internal::GCTracer::CodeFlushingIncrease()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01206">v8::internal::Isolate::compilation_cache()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01167">v8::internal::Heap::cpp_heap()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02370">v8::internal::Heap::cpp_heap_</a>, <a class="el" href="marking-worklist_8cc_source.html#l00039">v8::internal::MarkingWorklists::CreateContextWorklists()</a>, <a class="el" href="mark-compact_8h_source.html#l00168">epoch()</a>, <a class="el" href="heap_8cc_source.html#l07203">v8::internal::Heap::FindAllNativeContexts()</a>, <a class="el" href="cpp-heap_8h_source.html#l00103">v8::internal::CppHeap::From()</a>, <a class="el" href="mark-compact_8cc_source.html#l00372">v8::internal::anonymous_namespace{mark-compact.cc}::GetCodeFlushMode()</a>, <a class="el" href="mark-compact_8h_source.html#l00189">heap()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="heap-inl_8h_source.html#l00061">v8::internal::Heap::isolate()</a>, <a class="el" href="namespacecppgc_1_1internal.html#a9a435919d5a4a3ecfdfe20fb93896a60a94f16e44c50fb544fc2b1f177b913cbc">cppgc::internal::kMajor</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="mark-compact_8h_source.html#l00430">local_weak_objects_</a>, <a class="el" href="compilation-cache_8cc_source.html#l00345">v8::internal::CompilationCache::MarkCompactPrologue()</a>, <a class="el" href="mark-compact_8h_source.html#l00429">marking_visitor_</a>, <a class="el" href="mark-compact_8h_source.html#l00424">marking_worklists_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02115">v8::internal::Heap::memory_measurement()</a>, <a class="el" href="gc-tracer_8cc_source.html#l00691">v8::internal::GCTracer::NotifyMarkingStart()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01420">v8::internal::Heap::ShouldCurrentGCKeepAgesUnchanged()</a>, <a class="el" href="heap_8cc_source.html#l00454">v8::internal::Heap::ShouldUseBackgroundThreads()</a>, <a class="el" href="memory-measurement_8cc_source.html#l00217">v8::internal::MemoryMeasurement::StartProcessing()</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>, <a class="el" href="heap_8cc_source.html#l03726">v8::internal::Heap::Unmark()</a>, <a class="el" href="mark-compact_8h_source.html#l00473">use_background_threads_in_cycle_</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="mark-compact_8h_source.html#l00180">weak_objects()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00765">Prepare()</a>, and <a class="el" href="incremental-marking_8cc_source.html#l00240">v8::internal::IncrementalMarking::StartMarkingMajor()</a>.</p>
<div id="dynsection-86" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-86-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-86-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-86-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-87" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-87-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-87-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-87-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a11314378dd877e87d1ee7cd836c4c0f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11314378dd877e87d1ee7cd836c4c0f0">&#9670;&nbsp;</a></span>StartSweepNewSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::StartSweepNewSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l06001">6001</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;                                              {</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;  PagedSpaceForNewSpace* paged_space = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1PagedNewSpace.html#ad0dd111dc068ebfadba6491a35652691">paged_space</a>();</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;  paged_space-&gt;<a class="code" href="classv8_1_1internal_1_1PagedSpaceBase.html#a940645ec1f2d133497dafeefaf5409e9">ClearAllocatorState</a>();</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160; </div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;  <span class="keywordtype">int</span> will_be_swept = 0;</div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160; </div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a13bcd3b454833566a96155d9af581dfb">StartResizeNewSpace</a>();</div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160; </div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>.empty());</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = paged_space-&gt;begin(); it != paged_space-&gt;end();) {</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;    PageMetadata* p = *(it++);</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!p-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160; </div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;    <span class="keywordflow">if</span> (p-&gt;live_bytes() &gt; 0) {</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      <span class="comment">// Non-empty pages will be evacuated/promoted.</span></div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;    }</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160; </div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;    <span class="keywordflow">if</span> (paged_space-&gt;ShouldReleaseEmptyPage()) {</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">ReleasePage</a>(paged_space, p);</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa333a0a067ea24b0545c99392cc77848">empty_new_space_pages_to_be_swept_</a>.push_back(p);</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    }</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;    will_be_swept++;</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;  }</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160; </div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;                 <span class="stringliteral">&quot;sweeping: space=%s initialized_for_sweeping=%d&quot;</span>,</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;                 <a class="code" href="namespacev8_1_1internal.html#a5571bf7a3fbdb542683ee282eefb035c">ToString</a>(paged_space-&gt;identity()), will_be_swept);</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;  }</div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a13bcd3b454833566a96155d9af581dfb"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a13bcd3b454833566a96155d9af581dfb">v8::internal::Heap::StartResizeNewSpace</a></div><div class="ttdeci">void StartResizeNewSpace()</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03977">heap.cc:3977</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedNewSpace_html_ad0dd111dc068ebfadba6491a35652691"><div class="ttname"><a href="classv8_1_1internal_1_1PagedNewSpace.html#ad0dd111dc068ebfadba6491a35652691">v8::internal::PagedNewSpace::paged_space</a></div><div class="ttdeci">PagedSpaceForNewSpace * paged_space()</div><div class="ttdef"><b>Definition:</b> <a href="new-spaces_8h_source.html#l00718">new-spaces.h:718</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedSpaceBase_html_a940645ec1f2d133497dafeefaf5409e9"><div class="ttname"><a href="classv8_1_1internal_1_1PagedSpaceBase.html#a940645ec1f2d133497dafeefaf5409e9">v8::internal::PagedSpaceBase::ClearAllocatorState</a></div><div class="ttdeci">void ClearAllocatorState()</div><div class="ttdef"><b>Definition:</b> <a href="paged-spaces_8h_source.html#l00151">paged-spaces.h:151</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="paged-spaces_8h_source.html#l00276">v8::internal::PagedSpaceBase::begin()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="paged-spaces_8h_source.html#l00151">v8::internal::PagedSpaceBase::ClearAllocatorState()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="paged-spaces_8h_source.html#l00277">v8::internal::PagedSpaceBase::end()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00256">v8::internal::MutablePageMetadata::live_bytes()</a>, <a class="el" href="utils_2utils_8cc_source.html#l00061">v8::internal::PrintIsolate()</a>, <a class="el" href="new-spaces_8cc_source.html#l00920">v8::internal::PagedSpaceForNewSpace::ShouldReleaseEmptyPage()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00115">v8::internal::MutablePageMetadata::SweepingDone()</a>, <a class="el" href="data-view-ops_8h_source.html#l00032">ToString()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-88" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-88-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-88-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-88-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4dc475c535877a5a4773b74c0a06c78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc475c535877a5a4773b74c0a06c78a">&#9670;&nbsp;</a></span>StartSweepSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::StartSweepSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l06050">6050</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;                                                            {</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>, <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity());</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;ClearAllocatorState();</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160; </div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;  <span class="keywordtype">int</span> will_be_swept = 0;</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;  <span class="keywordtype">bool</span> unused_page_present = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160; </div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;  Sweeper* sweeper = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aad499bc7154a594f5a3e7036d683cdfa">sweeper</a>();</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160; </div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;  <span class="comment">// Loop needs to support deletion if live bytes == 0 for a page.</span></div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;begin(); it != <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;end();) {</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;    PageMetadata* p = *(it++);</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160; </div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;    <span class="keywordflow">if</span> (p-&gt;Chunk()-&gt;IsEvacuationCandidate()) {</div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!p-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>, <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity());</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;      <span class="comment">// Will be processed in Evacuate.</span></div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;    }</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160; </div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;    <span class="comment">// If the page is black, just reset the flag and don&#39;t add the page to the</span></div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;    <span class="comment">// sweeper.</span></div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;    <span class="keywordflow">if</span> (p-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>)) {</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14b8e9f090e9c7641574ed9829b4fee1">ResetAndRelinkBlackAllocatedPage</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, p);</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;    }</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160; </div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;    <span class="comment">// One unused page is kept, all further are released before sweeping them.</span></div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;    <span class="keywordflow">if</span> (p-&gt;live_bytes() == 0) {</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;      <span class="keywordflow">if</span> (unused_page_present) {</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), <span class="stringliteral">&quot;sweeping: released page: %p&quot;</span>,</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(p));</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;        }</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5fd86ee72dfc32e6d1e18f4c5e4a050d">ReleasePage</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>, p);</div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;      }</div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;      unused_page_present = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;    }</div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160; </div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;    sweeper-&gt;AddPage(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity(), p);</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;    will_be_swept++;</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;  }</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160; </div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits &amp;&amp; <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>) {</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;    <span class="keyword">static_cast&lt;</span>StickySpace*<span class="keyword">&gt;</span>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>)-&gt;set_old_objects_size(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;Size());</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;  }</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160; </div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;                 <span class="stringliteral">&quot;sweeping: space=%s initialized_for_sweeping=%d&quot;</span>,</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;                 <a class="code" href="namespacev8_1_1internal.html#a5571bf7a3fbdb542683ee282eefb035c">ToString</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity()), will_be_swept);</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;  }</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a14b8e9f090e9c7641574ed9829b4fee1"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a14b8e9f090e9c7641574ed9829b4fee1">v8::internal::MarkCompactCollector::ResetAndRelinkBlackAllocatedPage</a></div><div class="ttdeci">void ResetAndRelinkBlackAllocatedPage(PagedSpace *, PageMetadata *)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06035">mark-compact.cc:6035</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sweeper_8cc_source.html#l01385">v8::internal::Sweeper::AddPage()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="memory-chunk_8h_source.html#l00291">v8::internal::MemoryChunk::IsEvacuationCandidate()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00256">v8::internal::MutablePageMetadata::live_bytes()</a>, <a class="el" href="common_2globals_8h_source.html#l01300">v8::internal::NEW_SPACE</a>, <a class="el" href="common_2globals_8h_source.html#l01302">v8::internal::OLD_SPACE</a>, <a class="el" href="utils_2utils_8cc_source.html#l00061">v8::internal::PrintIsolate()</a>, <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00115">v8::internal::MutablePageMetadata::SweepingDone()</a>, <a class="el" href="data-view-ops_8h_source.html#l00032">ToString()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-89" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-89-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-89-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-89-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a10a5a2e6ceb32614eacab77deaa104fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a5a2e6ceb32614eacab77deaa104fe">&#9670;&nbsp;</a></span>Sweep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::Sweep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l06162">6162</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;                                 {</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>());</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a>.empty());</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160; </div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a6e459e73319c624a5f3ae42017a86215">InitializeMajorSweeping</a>();</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160; </div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;  <a class="code" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>,</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a374de26e99dae0ad5f32c1cbeab58285">GetTraceIdForFlowEvent</a>(GCTracer::Scope::MC_SWEEP),</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;      <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;  state_ = SWEEP_SPACES;</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160; </div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;  {</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_LO,</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2f135c51e5752f90638521eee547129">lo_space</a>());</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;  }</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;  {</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;    GCTracer::Scope sweep_scope(</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_CODE_LO, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a5764a451d0ae89d86f93771f9bf7ab9b">code_lo_space</a>());</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;  }</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()) {</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;                                GCTracer::Scope::MC_SWEEP_SHARED_LO,</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ada935ffa58e146493f1455e2f0ade73b">shared_lo_space</a>());</div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;  }</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;  {</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_OLD,</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>());</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;  }</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;  {</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_CODE,</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">code_space</a>());</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;  }</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()) {</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;    GCTracer::Scope sweep_scope(</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_SHARED, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>());</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;  }</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;  {</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;    GCTracer::Scope sweep_scope(</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_TRUSTED, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a353eba8c85db23f30be40d7e297ded1d">trusted_space</a>());</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;  }</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a704ff577490f91d8180ed8de83fa7745">shared_trusted_space</a>()) {</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;    GCTracer::Scope sweep_scope(</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_SHARED, <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">StartSweepSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a704ff577490f91d8180ed8de83fa7745">shared_trusted_space</a>());</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;  }</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  {</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;                                GCTracer::Scope::MC_SWEEP_TRUSTED_LO,</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a14f47d0348b13ca89bea5f71604fa8f9">SweepLargeSpace</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2af5297111d0e83b963f308d5b5e1d52">trusted_lo_space</a>());</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;  }</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()) {</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;    GCTracer::Scope sweep_scope(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_SWEEP_NEW,</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a11314378dd877e87d1ee7cd836c4c0f0">StartSweepNewSpace</a>();</div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;  }</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160; </div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac461786105da85b3815ffc21717d883d">sweeper_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Sweeper.html#a5692acb1f35332f5ef482d954efa8b1f">StartMajorSweeping</a>();</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a2af5297111d0e83b963f308d5b5e1d52"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a2af5297111d0e83b963f308d5b5e1d52">v8::internal::Heap::trusted_lo_space</a></div><div class="ttdeci">TrustedLargeObjectSpace * trusted_lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00786">heap.h:786</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a5764a451d0ae89d86f93771f9bf7ab9b"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a5764a451d0ae89d86f93771f9bf7ab9b">v8::internal::Heap::code_lo_space</a></div><div class="ttdeci">CodeLargeObjectSpace * code_lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00778">heap.h:778</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a704ff577490f91d8180ed8de83fa7745"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a704ff577490f91d8180ed8de83fa7745">v8::internal::Heap::shared_trusted_space</a></div><div class="ttdeci">SharedTrustedSpace * shared_trusted_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00783">heap.h:783</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ada935ffa58e146493f1455e2f0ade73b"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ada935ffa58e146493f1455e2f0ade73b">v8::internal::Heap::shared_lo_space</a></div><div class="ttdeci">SharedLargeObjectSpace * shared_lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00779">heap.h:779</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a11314378dd877e87d1ee7cd836c4c0f0"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a11314378dd877e87d1ee7cd836c4c0f0">v8::internal::MarkCompactCollector::StartSweepNewSpace</a></div><div class="ttdeci">void StartSweepNewSpace()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06001">mark-compact.cc:6001</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a4dc475c535877a5a4773b74c0a06c78a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a4dc475c535877a5a4773b74c0a06c78a">v8::internal::MarkCompactCollector::StartSweepSpace</a></div><div class="ttdeci">void StartSweepSpace(PagedSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06050">mark-compact.cc:6050</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a5692acb1f35332f5ef482d954efa8b1f"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a5692acb1f35332f5ef482d954efa8b1f">v8::internal::Sweeper::StartMajorSweeping</a></div><div class="ttdeci">void StartMajorSweeping()</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l00719">sweeper.cc:719</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a6e459e73319c624a5f3ae42017a86215"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a6e459e73319c624a5f3ae42017a86215">v8::internal::Sweeper::InitializeMajorSweeping</a></div><div class="ttdeci">void InitializeMajorSweeping()</div><div class="ttdef"><b>Definition:</b> <a href="sweeper_8cc_source.html#l00696">sweeper.cc:696</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00830">TRACE_EVENT_FLAG_FLOW_OUT</a>, <a class="el" href="gc-tracer_8h_source.html#l00084">TRACE_GC_EPOCH_WITH_FLOW</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-90" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-90-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-90-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-90-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a26199027fc8ec567b87add6be727214c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26199027fc8ec567b87add6be727214c">&#9670;&nbsp;</a></span>SweepArrayBufferExtensions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::SweepArrayBufferExtensions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00935">935</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                                      {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()-&gt;Size() == 0);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2dd38bcac0a916cc4eeedd9d14044882">new_lo_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1LargeObjectSpace.html#a2bffda9f3fd2a5766480a0b4f2c77a82">Size</a>() == 0);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aad4ced219dceeeabe3f688dcc3b7736a">array_buffer_sweeper</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a5fd86b603aaa53c5799679544e8b479f">RequestSweep</a>(</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158">ArrayBufferSweeper::SweepingType::kFull</a>,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9">ArrayBufferSweeper::TreatAllYoungAsPromoted::kYes</a>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a5fd86b603aaa53c5799679544e8b479f"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a5fd86b603aaa53c5799679544e8b479f">v8::internal::ArrayBufferSweeper::RequestSweep</a></div><div class="ttdeci">void RequestSweep(SweepingType sweeping_type, TreatAllYoungAsPromoted treat_all_young_as_promoted)</div><div class="ttdef"><b>Definition:</b> <a href="array-buffer-sweeper_8cc_source.html#l00282">array-buffer-sweeper.cc:282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158">v8::internal::ArrayBufferSweeper::SweepingType::kFull</a></div><div class="ttdeci">@ kFull</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9">v8::internal::ArrayBufferSweeper::TreatAllYoungAsPromoted::kYes</a></div><div class="ttdeci">@ kYes</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aad4ced219dceeeabe3f688dcc3b7736a"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aad4ced219dceeeabe3f688dcc3b7736a">v8::internal::Heap::array_buffer_sweeper</a></div><div class="ttdeci">ArrayBufferSweeper * array_buffer_sweeper()</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00866">heap.h:866</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LargeObjectSpace_html_a2bffda9f3fd2a5766480a0b4f2c77a82"><div class="ttname"><a href="classv8_1_1internal_1_1LargeObjectSpace.html#a2bffda9f3fd2a5766480a0b4f2c77a82">v8::internal::LargeObjectSpace::Size</a></div><div class="ttdeci">size_t Size() const override</div><div class="ttdef"><b>Definition:</b> <a href="large-spaces_8h_source.html#l00046">large-spaces.h:46</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2heap_2heap_8h_source.html#l00866">v8::internal::Heap::array_buffer_sweeper()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158">v8::internal::ArrayBufferSweeper::kFull</a>, <a class="el" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9">v8::internal::ArrayBufferSweeper::kYes</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00780">v8::internal::Heap::new_lo_space()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00770">v8::internal::Heap::new_space()</a>, <a class="el" href="array-buffer-sweeper_8cc_source.html#l00282">v8::internal::ArrayBufferSweeper::RequestSweep()</a>, and <a class="el" href="large-spaces_8h_source.html#l00046">v8::internal::LargeObjectSpace::Size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>
<div id="dynsection-91" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-91-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-91-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-91-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-92" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-92-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-92-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-92-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a14f47d0348b13ca89bea5f71604fa8f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14f47d0348b13ca89bea5f71604fa8f9">&#9670;&nbsp;</a></span>SweepLargeSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::SweepLargeSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1LargeObjectSpace.html">LargeObjectSpace</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l06120">6120</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;                                                                  {</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;  PtrComprCageBase cage_base(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;  <span class="keywordtype">size_t</span> surviving_object_size = 0;</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> postpone_freeing = <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a43d5122de51691bc0e40341d9be42cd4">ShouldPostponeFreeingEmptyPages</a>(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>);</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> add_to_pool =</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.large_page_pool &amp;&amp; <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;identity() == <a class="code" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa6f564dbff22ad6da21740d3143349d93">NEW_LO_SPACE</a>;</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(add_to_pool, !postpone_freeing);</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;  std::vector&lt;LargePageMetadata*&gt; pages_to_pool;</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;  <span class="keywordflow">if</span> (add_to_pool) {</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;    pages_to_pool.reserve(<a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;memory_chunk_list().size());</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;  }</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;begin(); it != <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;end();) {</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;    LargePageMetadata* current = *(it++);</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!current-&gt;Chunk()-&gt;IsFlagSet(<a class="code" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = current-&gt;GetObject();</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a93b2700c2f0bdd026ead1656ef7416c6">marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#a13d4cff573da17af5b1532566911dfe9">IsMarked</a>(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;      <span class="comment">// Object is dead and page can be released.</span></div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;      <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;RemovePage(current);</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;      <span class="keywordflow">if</span> (postpone_freeing) {</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a18e20b7391f846e5f4c429eda5bf5cbe">queued_pages_to_be_freed_</a>.push_back(current);</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (add_to_pool) {</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;        pages_to_pool.push_back(current);</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">memory_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a44f020919cc4a6c1859943003e577424">Free</a>(<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5">MemoryAllocator::FreeMode::kImmediately</a>,</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;                                        current);</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;      }</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;    }</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkBit.html#aeb6b550934b84cc75caeb8458ec4ddcb">MarkBit::From</a>(<span class="keywordtype">object</span>).<a class="code" href="classv8_1_1internal_1_1MarkBit.html#a049af8353d54d6548c03b84daa9f616b">Clear</a>();</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;      current-&gt;SetLiveBytes(0);</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;    }</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    current-&gt;marking_progress_tracker().ResetIfEnabled();</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;    surviving_object_size += <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keywordtype">object</span>-&gt;Size(cage_base));</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;  }</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;  <a class="code" href="flag-definitions_8h.html#a087fd0337c14e102a4a2abccd41a39ad">space</a>-&gt;set_objects_size(surviving_object_size);</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160; </div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;  <span class="keywordflow">if</span> (add_to_pool &amp;&amp; !pages_to_pool.empty()) {</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae19c3ac5994087b78c51c64221e1771c">heap</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a9564c4573a66c20043a7602155074b57">memory_allocator</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MemoryAllocator.html#a92b1c064289b87fbe7e25514b46d0e4f">FreeLargePagesPooled</a>(std::move(pages_to_pool));</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;  }</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a92b1c064289b87fbe7e25514b46d0e4f"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a92b1c064289b87fbe7e25514b46d0e4f">v8::internal::MemoryAllocator::FreeLargePagesPooled</a></div><div class="ttdeci">void FreeLargePagesPooled(std::vector&lt; LargePageMetadata * &gt; pages)</div><div class="ttdef"><b>Definition:</b> <a href="memory-allocator_8cc_source.html#l00370">memory-allocator.cc:370</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a43d5122de51691bc0e40341d9be42cd4"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a43d5122de51691bc0e40341d9be42cd4">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldPostponeFreeingEmptyPages</a></div><div class="ttdeci">bool ShouldPostponeFreeingEmptyPages(LargeObjectSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l06107">mark-compact.cc:6107</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa6f564dbff22ad6da21740d3143349d93"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa6f564dbff22ad6da21740d3143349d93">v8::internal::NEW_LO_SPACE</a></div><div class="ttdeci">@ NEW_LO_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l01309">globals.h:1309</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="large-page-metadata_8h_source.html#l00037">v8::internal::LargePageMetadata::GetObject()</a>, <a class="el" href="flag-definitions_8h.html#a761e4e5929b1553283fd6a532822bb17">heap()</a>, <a class="el" href="memory-chunk_8h_source.html#l00198">v8::internal::MemoryChunk::IsFlagSet()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00185">v8::internal::MutablePageMetadata::marking_progress_tracker()</a>, <a class="el" href="common_2globals_8h_source.html#l01309">v8::internal::NEW_LO_SPACE</a>, <a class="el" href="marking-progress-tracker_8h_source.html#l00051">v8::internal::MarkingProgressTracker::ResetIfEnabled()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00260">v8::internal::MutablePageMetadata::SetLiveBytes()</a>, <a class="el" href="mark-compact_8cc_source.html#l06107">v8::internal::anonymous_namespace{mark-compact.cc}::ShouldPostponeFreeingEmptyPages()</a>, <a class="el" href="flag-definitions_8h_source.html#l02213">space</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>
<div id="dynsection-93" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-93-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-93-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-93-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-94" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-94-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-94-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-94-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac79654a97e006616402d89dcec98eac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac79654a97e006616402d89dcec98eac7">&#9670;&nbsp;</a></span>TearDown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::TearDown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00296">296</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                    {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">IsMajorMarking</a>()) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;Publish();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ab6f9aac6bf996ce2f9945e0ff998c58a">main_thread_local_heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1LocalHeap.html#a2e77f2b0e778003862ff3351ded8e80a">marking_barrier</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingBarrier.html#a2d768331ca216e2dc7f88961d5f1f5fc">PublishIfNeeded</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Marking barriers of LocalHeaps will be published in their destructors.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a84cbdfc60879f899e3aca799e53e5e42">marking_worklists_</a>.<a class="code" href="classv8_1_1internal_1_1MarkingWorklists.html#a89010874238d7f05fc609afa7119ef40">Clear</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a13bc63346bb82388df996ca28b39f6d3">weak_objects</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">Clear</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ab6f9aac6bf996ce2f9945e0ff998c58a"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ab6f9aac6bf996ce2f9945e0ff998c58a">v8::internal::Heap::main_thread_local_heap_</a></div><div class="ttdeci">LocalHeap * main_thread_local_heap_</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l02256">heap.h:2256</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LocalHeap_html_a2e77f2b0e778003862ff3351ded8e80a"><div class="ttname"><a href="classv8_1_1internal_1_1LocalHeap.html#a2e77f2b0e778003862ff3351ded8e80a">v8::internal::LocalHeap::marking_barrier</a></div><div class="ttdeci">MarkingBarrier * marking_barrier()</div><div class="ttdef"><b>Definition:</b> <a href="local-heap_8h_source.html#l00130">local-heap.h:130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_a2d768331ca216e2dc7f88961d5f1f5fc"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#a2d768331ca216e2dc7f88961d5f1f5fc">v8::internal::MarkingBarrier::PublishIfNeeded</a></div><div class="ttdeci">void PublishIfNeeded()</div><div class="ttdef"><b>Definition:</b> <a href="marking-barrier_8cc_source.html#l00439">marking-barrier.cc:439</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_a89010874238d7f05fc609afa7119ef40"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#a89010874238d7f05fc609afa7119ef40">v8::internal::MarkingWorklists::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition:</b> <a href="marking-worklist_8cc_source.html#l00024">marking-worklist.cc:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="marking-worklist_8cc_source.html#l00024">v8::internal::MarkingWorklists::Clear()</a>, <a class="el" href="weak-object-worklists_8cc_source.html#l00036">v8::internal::WeakObjects::Clear()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01117">v8::internal::Heap::incremental_marking()</a>, <a class="el" href="incremental-marking_8h_source.html#l00066">v8::internal::IncrementalMarking::IsMajorMarking()</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="mark-compact_8h_source.html#l00181">local_weak_objects()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l02256">v8::internal::Heap::main_thread_local_heap_</a>, <a class="el" href="local-heap_8h_source.html#l00130">v8::internal::LocalHeap::marking_barrier()</a>, <a class="el" href="mark-compact_8h_source.html#l00424">marking_worklists_</a>, <a class="el" href="weak-object-worklists_8cc_source.html#l00030">v8::internal::WeakObjects::Local::Publish()</a>, <a class="el" href="marking-barrier_8cc_source.html#l00439">v8::internal::MarkingBarrier::PublishIfNeeded()</a>, and <a class="el" href="mark-compact_8h_source.html#l00180">weak_objects()</a>.</p>
<div id="dynsection-95" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-95-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-95-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-95-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_ac79654a97e006616402d89dcec98eac7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a859d6252de36904e629ec0cd26408902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a859d6252de36904e629ec0cd26408902">&#9670;&nbsp;</a></span>TransitionArrayNeedsCompaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::TransitionArrayNeedsCompaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1TransitionArray.html">TransitionArray</a> &gt;&#160;</td>
          <td class="paramname"><em>transitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>num_transitions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03618">3618</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                                                              {</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  ReadOnlyRoots roots(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; num_transitions; ++<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>) {</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    Tagged&lt;MaybeObject&gt; raw_target = transitions-&gt;GetRawTarget(<a class="code" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    <span class="keywordflow">if</span> (raw_target.IsSmi()) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      <span class="comment">// This target is still being deserialized,</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#ac61ec4fa9a19159b6bbdf78952645d1c">has_active_deserializer</a>());</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(raw_target.ToSmi(), <a class="code" href="classv8_1_1internal_1_1Smi.html#ad0e5f2cc37fd6c47148dda7839ba4892">Smi::uninitialized_deserialization_value</a>());</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      <span class="comment">// Targets can only be dead iff this array is fully deserialized.</span></div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_transitions; ++j) {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;            !transitions-&gt;GetRawTarget(j).IsSmi(),</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            !<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(transitions-&gt;GetTarget(j)));</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      }</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structv8_1_1internal_1_1MarkingHelper.html#ab368d545a9f0cdd6db20243117cc8944">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;                   <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#afae21b5cab72b362b1b379c2f3bda5f8">non_atomic_marking_state_</a>,</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;                   <a class="code" href="classv8_1_1internal_1_1TransitionsAccessor.html#a61f504e1bde73d0c277db02987c00fd9">TransitionsAccessor::GetTargetFromRaw</a>(raw_target))) {</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <span class="comment">// Targets can only be dead iff this array is fully deserialized.</span></div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_transitions; ++j) {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!transitions-&gt;GetRawTarget(j).IsSmi());</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      }</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    }</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  }</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ac61ec4fa9a19159b6bbdf78952645d1c"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ac61ec4fa9a19159b6bbdf78952645d1c">v8::internal::Isolate::has_active_deserializer</a></div><div class="ttdeci">bool has_active_deserializer() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l00942">isolate.h:942</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a61f504e1bde73d0c277db02987c00fd9"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a61f504e1bde73d0c277db02987c00fd9">v8::internal::TransitionsAccessor::GetTargetFromRaw</a></div><div class="ttdeci">static Tagged&lt; Map &gt; GetTargetFromRaw(Tagged&lt; MaybeObject &gt; raw)</div><div class="ttdef"><b>Definition:</b> <a href="transitions-inl_8h_source.html#l00187">transitions-inl.h:187</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="json-stringifier_8cc_source.html#l00548">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a>, <a class="el" href="tagged_8h_source.html#l00508">v8::internal::Tagged&lt; HeapObject &gt;::IsSmi()</a>, and <a class="el" href="tagged-impl-inl_8h_source.html#l00024">v8::internal::TaggedImpl&lt; kRefType, StorageType &gt;::ToSmi()</a>.</p>
<div id="dynsection-96" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-96-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-96-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-96-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902_cgraph.svg" width="464" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a71e8a1a84a4a8174d41df38622577ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e8a1a84a4a8174d41df38622577ddb">&#9670;&nbsp;</a></span>TrimDescriptorArray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::TrimDescriptorArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt;&#160;</td>
          <td class="paramname"><em>descriptors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03769">3769</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;                                                          {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="keywordtype">int</span> number_of_own_descriptors = map-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  <span class="keywordflow">if</span> (number_of_own_descriptors == 0) {</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(descriptors == ReadOnlyRoots(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>).empty_descriptor_array());</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  }</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  <span class="keywordtype">int</span> to_trim =</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;      descriptors-&gt;number_of_all_descriptors() - number_of_own_descriptors;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="keywordflow">if</span> (to_trim &gt; 0) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    descriptors-&gt;set_number_of_descriptors(number_of_own_descriptors);</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa5044d30e7d0db55493414748d740aaa">RightTrimDescriptorArray</a>(descriptors, to_trim);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160; </div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a242069ae8205f32e03cf726bffa280b9">TrimEnumCache</a>(map, descriptors);</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    descriptors-&gt;Sort();</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  }</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(descriptors-&gt;number_of_descriptors() == number_of_own_descriptors);</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  map-&gt;set_owns_descriptors(<span class="keyword">true</span>);</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a242069ae8205f32e03cf726bffa280b9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a242069ae8205f32e03cf726bffa280b9">v8::internal::MarkCompactCollector::TrimEnumCache</a></div><div class="ttdeci">void TrimEnumCache(Tagged&lt; Map &gt; map, Tagged&lt; DescriptorArray &gt; descriptors)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03789">mark-compact.cc:3789</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa5044d30e7d0db55493414748d740aaa"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa5044d30e7d0db55493414748d740aaa">v8::internal::MarkCompactCollector::RightTrimDescriptorArray</a></div><div class="ttdeci">void RightTrimDescriptorArray(Tagged&lt; DescriptorArray &gt; array, int descriptors_to_trim)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l03711">mark-compact.cc:3711</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>.</p>

</div>
</div>
<a id="a242069ae8205f32e03cf726bffa280b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242069ae8205f32e03cf726bffa280b9">&#9670;&nbsp;</a></span>TrimEnumCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::TrimEnumCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1Map.html">Map</a> &gt;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Tagged.html">Tagged</a>&lt; <a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a> &gt;&#160;</td>
          <td class="paramname"><em>descriptors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03789">3789</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                                                                              {</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <span class="keywordtype">int</span> live_enum = map-&gt;EnumLength();</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <span class="keywordflow">if</span> (live_enum == <a class="code" href="namespacev8_1_1internal.html#a7fabf69c19f19fafd8f7b6c73fc6a3ee">kInvalidEnumCacheSentinel</a>) {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    live_enum = map-&gt;NumberOfEnumerableProperties();</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  }</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="keywordflow">if</span> (live_enum == 0) <span class="keywordflow">return</span> descriptors-&gt;ClearEnumCache();</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  Tagged&lt;EnumCache&gt; enum_cache = descriptors-&gt;enum_cache();</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160; </div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a5aa5f5d8cabe2dbba29d92ffdf16e9fc">Tagged&lt;FixedArray&gt;</a> keys = enum_cache-&gt;keys();</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  <span class="keywordtype">int</span> keys_length = keys-&gt;length();</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="keywordflow">if</span> (live_enum &gt;= keys_length) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ab5eb8c07e5ff4c9cc6e8559c6d24468c">RightTrimArray</a>(keys, live_enum, keys_length);</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160; </div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a5aa5f5d8cabe2dbba29d92ffdf16e9fc">Tagged&lt;FixedArray&gt;</a> indices = enum_cache-&gt;indices();</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="keywordtype">int</span> indices_length = indices-&gt;length();</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="keywordflow">if</span> (live_enum &gt;= indices_length) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ab5eb8c07e5ff4c9cc6e8559c6d24468c">RightTrimArray</a>(indices, live_enum, indices_length);</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5aa5f5d8cabe2dbba29d92ffdf16e9fc"><div class="ttname"><a href="namespacev8_1_1internal.html#a5aa5f5d8cabe2dbba29d92ffdf16e9fc">v8::internal::Tagged&lt; FixedArray &gt;</a></div><div class="ttdeci">kStaticElementsTemplateOffset kInstancePropertiesTemplateOffset Tagged&lt; FixedArray &gt;</div><div class="ttdef"><b>Definition:</b> <a href="literal-objects-inl_8h_source.html#l00106">literal-objects-inl.h:106</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a7fabf69c19f19fafd8f7b6c73fc6a3ee"><div class="ttname"><a href="namespacev8_1_1internal.html#a7fabf69c19f19fafd8f7b6c73fc6a3ee">v8::internal::kInvalidEnumCacheSentinel</a></div><div class="ttdeci">static const int kInvalidEnumCacheSentinel</div><div class="ttdef"><b>Definition:</b> <a href="property-details_8h_source.html#l00248">property-details.h:248</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="property-details_8h_source.html#l00248">v8::internal::kInvalidEnumCacheSentinel</a>.</p>

</div>
</div>
<a id="a10156273473177e162f6a5cb30b1b7e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10156273473177e162f6a5cb30b1b7e8">&#9670;&nbsp;</a></span>UpdatePointersAfterEvacuation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::UpdatePointersAfterEvacuation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05613">5613</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;                                                         {</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;  <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS);</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160; </div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;  {</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_TO_NEW_ROOTS);</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;    <span class="comment">// The external string table is updated at the end.</span></div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;    PointersUpdatingVisitor updating_visitor(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a065f31941b8c3f83d4cb37864fe9bd9b">IterateRootsIncludingClients</a>(</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;        &amp;updating_visitor,</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;        base::EnumSet&lt;SkipRoot&gt;{<a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885acd83ee2bd0fc454cf6eeff81ea783a04">SkipRoot::kExternalStringTable</a>,</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">SkipRoot::kConservativeStack</a>,</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;                                <a class="code" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">SkipRoot::kReadOnlyBuiltins</a>});</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;  }</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160; </div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;  {</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_CLIENT_HEAPS);</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a50a7b97f14aca94f87fa000d330fb3d7">UpdatePointersInClientHeaps</a>();</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;  }</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160; </div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;  {</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_SLOTS_MAIN);</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;    std::vector&lt;std::unique_ptr&lt;UpdatingItem&gt;&gt; updating_items;</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160; </div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>());</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">code_space</a>());</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()) {</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>());</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;    }</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad2f135c51e5752f90638521eee547129">lo_space</a>());</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a5764a451d0ae89d86f93771f9bf7ab9b">code_lo_space</a>());</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ada935ffa58e146493f1455e2f0ade73b">shared_lo_space</a>()) {</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items,</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;                                        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ada935ffa58e146493f1455e2f0ade73b">shared_lo_space</a>());</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;    }</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a353eba8c85db23f30be40d7e297ded1d">trusted_space</a>());</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items,</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;                                      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a2af5297111d0e83b963f308d5b5e1d52">trusted_lo_space</a>());</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a704ff577490f91d8180ed8de83fa7745">shared_trusted_space</a>()) {</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items,</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;                                        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a704ff577490f91d8180ed8de83fa7745">shared_trusted_space</a>());</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    }</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ac6a94f142432fdb1ca6715c6ba49b9dd">shared_trusted_lo_space</a>()) {</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">CollectRememberedSetUpdatingItems</a>(&amp;updating_items,</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;                                        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ac6a94f142432fdb1ca6715c6ba49b9dd">shared_trusted_lo_space</a>());</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    }</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160; </div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;    <span class="comment">// Iterating to space may require a valid body descriptor for e.g.</span></div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;    <span class="comment">// WasmStruct which races with updating a slot in Map. Since to space is</span></div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;    <span class="comment">// empty after a full GC, such races can&#39;t happen.</span></div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>(), <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8abe18f92f4794f8ba70937917325140">new_space</a>()-&gt;Size() == 0);</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160; </div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    updating_items.push_back(</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;        std::make_unique&lt;EphemeronTableUpdatingItem&gt;(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>));</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160; </div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;    <span class="keyword">auto</span> pointers_updating_job = std::make_unique&lt;PointersUpdatingJob&gt;(</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), <span class="keyword">this</span>, std::move(updating_items));</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;    <a class="code" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;PointersUpdatingJob started&quot;</span>,</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;                            pointers_updating_job-&gt;trace_id(),</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;                            <a class="code" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;        -&gt;<a class="code" href="classv8_1_1Platform.html#a5a62780772e38f1f00317fce609ec0d4">CreateJob</a>(<a class="code" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::TaskPriority::kUserBlocking</a>,</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;                    std::move(pointers_updating_job))</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;        -&gt;Join();</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;  }</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160; </div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;  {</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_WEAK);</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;    <span class="comment">// Update pointers from external string table.</span></div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ad5389324ddf98758e5034523b9861a7e">UpdateReferencesInExternalStringTable</a>(</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;        &amp;<a class="code" href="namespacev8_1_1internal.html#a08ab6d4992ef16c0af0e8cecdd074f84">UpdateReferenceInExternalStringTableEntry</a>);</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160; </div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;    <span class="comment">// Update pointers in string forwarding table.</span></div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;    <span class="comment">// When GC was performed without a stack, the table was cleared and this</span></div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;    <span class="comment">// does nothing. In the case this was a GC with stack, we need to update</span></div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;    <span class="comment">// the entries for evacuated objects.</span></div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;    <span class="comment">// All entries are objects in shared space (unless</span></div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;    <span class="comment">// --always-use-forwarding-table), so we only need to update pointers during</span></div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;    <span class="comment">// a shared GC.</span></div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a1d9bb224427c1714f358560957771946">OwnsStringTables</a>() ||</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;        <a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.always_use_string_forwarding_table)) {</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#acf580d271e1ea0e447b6bb1e361878d0">string_forwarding_table</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1StringForwardingTable.html#ac6e2fa7bf0cfc813632d909019374a54">UpdateAfterFullEvacuation</a>();</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    }</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160; </div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;    EvacuationWeakObjectRetainer evacuation_object_retainer;</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a132ff2665961ba28fb59a6e2e0edf9bc">ProcessWeakListRoots</a>(&amp;evacuation_object_retainer);</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;  }</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;  {</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(),</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_POINTER_TABLES);</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a8698e5fa48a17826dcf8640f7725bbce">UpdatePointersInPointerTables</a>();</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;  }</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160; </div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;  <span class="comment">// Flush the inner_pointer_to_code_cache which may now have stale contents.</span></div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a99949749b070698fd4b2dab6a5bcf27d">inner_pointer_to_code_cache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1InnerPointerToCodeCache.html#a9a529de6174a47e94e76191e20e59830">Flush</a>();</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a065f31941b8c3f83d4cb37864fe9bd9b"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a065f31941b8c3f83d4cb37864fe9bd9b">v8::internal::Heap::IterateRootsIncludingClients</a></div><div class="ttdeci">void IterateRootsIncludingClients(RootVisitor *v, base::EnumSet&lt; SkipRoot &gt; options)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l04948">heap.cc:4948</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a132ff2665961ba28fb59a6e2e0edf9bc"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a132ff2665961ba28fb59a6e2e0edf9bc">v8::internal::Heap::ProcessWeakListRoots</a></div><div class="ttdeci">void ProcessWeakListRoots(WeakObjectRetainer *retainer)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03046">heap.cc:3046</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac6a94f142432fdb1ca6715c6ba49b9dd"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac6a94f142432fdb1ca6715c6ba49b9dd">v8::internal::Heap::shared_trusted_lo_space</a></div><div class="ttdeci">SharedTrustedLargeObjectSpace * shared_trusted_lo_space() const</div><div class="ttdef"><b>Definition:</b> <a href="src_2heap_2heap_8h_source.html#l00789">heap.h:789</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad5389324ddf98758e5034523b9861a7e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad5389324ddf98758e5034523b9861a7e">v8::internal::Heap::UpdateReferencesInExternalStringTable</a></div><div class="ttdeci">void UpdateReferencesInExternalStringTable(ExternalStringTableUpdaterCallback updater_func)</div><div class="ttdef"><b>Definition:</b> <a href="heap_8cc_source.html#l03008">heap.cc:3008</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InnerPointerToCodeCache_html_a9a529de6174a47e94e76191e20e59830"><div class="ttname"><a href="classv8_1_1internal_1_1InnerPointerToCodeCache.html#a9a529de6174a47e94e76191e20e59830">v8::internal::InnerPointerToCodeCache::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdef"><b>Definition:</b> <a href="frames-inl_8h_source.html#l00041">frames-inl.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a1d9bb224427c1714f358560957771946"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a1d9bb224427c1714f358560957771946">v8::internal::Isolate::OwnsStringTables</a></div><div class="ttdeci">bool OwnsStringTables() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l02361">isolate.h:2361</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a99949749b070698fd4b2dab6a5bcf27d"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a99949749b070698fd4b2dab6a5bcf27d">v8::internal::Isolate::inner_pointer_to_code_cache</a></div><div class="ttdeci">InnerPointerToCodeCache * inner_pointer_to_code_cache()</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l01419">isolate.h:1419</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_acf580d271e1ea0e447b6bb1e361878d0"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#acf580d271e1ea0e447b6bb1e361878d0">v8::internal::Isolate::string_forwarding_table</a></div><div class="ttdeci">StringForwardingTable * string_forwarding_table() const</div><div class="ttdef"><b>Definition:</b> <a href="execution_2isolate_8h_source.html#l00800">isolate.h:800</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a50a7b97f14aca94f87fa000d330fb3d7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a50a7b97f14aca94f87fa000d330fb3d7">v8::internal::MarkCompactCollector::UpdatePointersInClientHeaps</a></div><div class="ttdeci">void UpdatePointersInClientHeaps()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05714">mark-compact.cc:5714</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a8698e5fa48a17826dcf8640f7725bbce"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a8698e5fa48a17826dcf8640f7725bbce">v8::internal::MarkCompactCollector::UpdatePointersInPointerTables</a></div><div class="ttdeci">void UpdatePointersInPointerTables()</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05780">mark-compact.cc:5780</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_html_ac6e2fa7bf0cfc813632d909019374a54"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable.html#ac6e2fa7bf0cfc813632d909019374a54">v8::internal::StringForwardingTable::UpdateAfterFullEvacuation</a></div><div class="ttdeci">void UpdateAfterFullEvacuation()</div><div class="ttdef"><b>Definition:</b> <a href="string-forwarding-table_8cc_source.html#l00375">string-forwarding-table.cc:375</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a5a7f4ec403000a5c1f0f0f70502e1774"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a5a7f4ec403000a5c1f0f0f70502e1774">v8::internal::anonymous_namespace{mark-compact.cc}::CollectRememberedSetUpdatingItems</a></div><div class="ttdeci">void CollectRememberedSetUpdatingItems(std::vector&lt; std::unique_ptr&lt; UpdatingItem &gt;&gt; *items, IterateableSpace *space)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05553">mark-compact.cc:5553</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a08ab6d4992ef16c0af0e8cecdd074f84"><div class="ttname"><a href="namespacev8_1_1internal.html#a08ab6d4992ef16c0af0e8cecdd074f84">v8::internal::UpdateReferenceInExternalStringTableEntry</a></div><div class="ttdeci">static Tagged&lt; String &gt; UpdateReferenceInExternalStringTableEntry(Heap *heap, FullObjectSlot p)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04407">mark-compact.cc:4407</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885acd83ee2bd0fc454cf6eeff81ea783a04"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885acd83ee2bd0fc454cf6eeff81ea783a04">v8::internal::SkipRoot::kExternalStringTable</a></div><div class="ttdeci">@ kExternalStringTable</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8cc_source.html#l05553">v8::internal::anonymous_namespace{mark-compact.cc}::CollectRememberedSetUpdatingItems()</a>, <a class="el" href="v8-platform_8h_source.html#l01310">v8::Platform::CreateJob()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00492">DCHECK_IMPLIES</a>, <a class="el" href="debug-interface_8cc_source.html#l00800">v8::debug::GetCurrentPlatform()</a>, <a class="el" href="namespacev8.html#a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209">v8::kUserBlocking</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00830">TRACE_EVENT_FLAG_FLOW_OUT</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="gc-tracer_8h_source.html#l00098">TRACE_GC_NOTE_WITH_FLOW</a>, <a class="el" href="mark-compact_8cc_source.html#l04407">v8::internal::UpdateReferenceInExternalStringTableEntry()</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>
<div id="dynsection-97" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-97-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-97-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-97-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8_cgraph.svg" width="100%" height="574"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aabe392e124b1967c0510c4eaaaad062e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe392e124b1967c0510c4eaaaad062e">&#9670;&nbsp;</a></span>UpdatePointersInClientHeap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::UpdatePointersInClientHeap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05722">5722</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;                                                                     {</div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;  PtrComprCageBase cage_base(client);</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;  MemoryChunkIterator chunk_iterator(client-&gt;heap());</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160; </div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;  <span class="keywordflow">while</span> (chunk_iterator.HasNext()) {</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;    MutablePageMetadata* page = chunk_iterator.Next();</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;    MemoryChunk* chunk = page-&gt;Chunk();</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160; </div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> slot_count = <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;OLD_TO_SHARED&gt;::Iterate</a>(</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;        page,</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;        [cage_base](<a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a8e179782425b7be1054e814f897f2f32">UpdateOldToSharedSlot</a>(cage_base, slot);</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;        },</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;        <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160; </div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    <span class="keywordflow">if</span> (slot_count == 0 || chunk-&gt;InYoungGeneration()) {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;      page-&gt;ReleaseSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;    }</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160; </div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;    <span class="keyword">const</span> PtrComprCageBase unused_cage_base(<a class="code" href="namespacev8_1_1internal.html#acf6bafb5b8483a580f375393c413ee02">kNullAddress</a>);</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160; </div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> protected_slot_count =</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;        <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Iterate</a>(</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;            page,</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;            [unused_cage_base](<a class="code" href="namespacev8_1_1internal.html#a5c81bf980e0cdd16e6f80a806701fd76">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;              <a class="code" href="namespacev8_1_1internal.html#a69c3bdc8841db30ac59806f44663d229">ProtectedPointerSlot</a> protected_slot(slot.address());</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a8e179782425b7be1054e814f897f2f32">UpdateOldToSharedSlot</a>(unused_cage_base, protected_slot);</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;            },</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;            <a class="code" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;    <span class="keywordflow">if</span> (protected_slot_count == 0) {</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;      page-&gt;ReleaseSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31">TRUSTED_TO_SHARED_TRUSTED</a>);</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    }</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160; </div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;    <span class="keywordflow">if</span> (!chunk-&gt;executable()) {</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(page-&gt;typed_slot_set&lt;<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>&gt;());</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    }</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160; </div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    WritableJitPage jit_page = <a class="code" href="classv8_1_1internal_1_1ThreadIsolation.html#a3dea4a5ba1f46f7a9f0f26ae04b68082">ThreadIsolation::LookupWritableJitPage</a>(</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;        page-&gt;area_start(), page-&gt;area_size());</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> typed_slot_count = <a class="code" href="classv8_1_1internal_1_1RememberedSet.html#a948ca4aacbb909303ffd8d7b78ceb9be">RememberedSet&lt;OLD_TO_SHARED&gt;::IterateTyped</a>(</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;        page, [<span class="keyword">this</span>, &amp;jit_page](<a class="code" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">SlotType</a> slot_type, <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> slot) {</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;          <span class="comment">// Using UpdateStrongSlot is OK here, because there are no weak</span></div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;          <span class="comment">// typed slots.</span></div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;          PtrComprCageBase cage_base = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;          WritableJitAllocation jit_allocation =</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;              jit_page.LookupAllocationContaining(slot);</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a257a5b7025d9a06e70d70ac4c8a8af9d">UpdateTypedSlotHelper::UpdateTypedSlot</a>(</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;              jit_allocation, <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>, slot_type, slot,</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;              [cage_base](FullMaybeObjectSlot slot) {</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#ae2720d5d6d34c434f5882ea31fc87f83">UpdateStrongOldToSharedSlot</a>(cage_base, slot);</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;              });</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        });</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;    <span class="keywordflow">if</span> (typed_slot_count == 0 || chunk-&gt;InYoungGeneration())</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;      page-&gt;ReleaseTypedSlotSet(<a class="code" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;  }</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a3dea4a5ba1f46f7a9f0f26ae04b68082"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a3dea4a5ba1f46f7a9f0f26ae04b68082">v8::internal::ThreadIsolation::LookupWritableJitPage</a></div><div class="ttdeci">static WritableJitPage LookupWritableJitPage(Address addr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8cc_source.html#l00168">code-memory-access.cc:168</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdateTypedSlotHelper_html_a257a5b7025d9a06e70d70ac4c8a8af9d"><div class="ttname"><a href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a257a5b7025d9a06e70d70ac4c8a8af9d">v8::internal::UpdateTypedSlotHelper::UpdateTypedSlot</a></div><div class="ttdeci">static SlotCallbackResult UpdateTypedSlot(WritableJitAllocation &amp;jit_allocation, Heap *heap, SlotType slot_type, Address addr, Callback callback)</div><div class="ttdef"><b>Definition:</b> <a href="remembered-set-inl_8h_source.html#l00019">remembered-set-inl.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_a8e179782425b7be1054e814f897f2f32"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#a8e179782425b7be1054e814f897f2f32">v8::internal::anonymous_namespace{mark-compact.cc}::UpdateOldToSharedSlot</a></div><div class="ttdeci">static SlotCallbackResult UpdateOldToSharedSlot(PtrComprCageBase cage_base, TSlot slot)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04238">mark-compact.cc:4238</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_html_ae2720d5d6d34c434f5882ea31fc87f83"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03.html#ae2720d5d6d34c434f5882ea31fc87f83">v8::internal::anonymous_namespace{mark-compact.cc}::UpdateStrongOldToSharedSlot</a></div><div class="ttdeci">static SlotCallbackResult UpdateStrongOldToSharedSlot(PtrComprCageBase cage_base, FullMaybeObjectSlot slot)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l04273">mark-compact.cc:4273</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acf6bafb5b8483a580f375393c413ee02"><div class="ttname"><a href="namespacev8_1_1internal.html#acf6bafb5b8483a580f375393c413ee02">v8::internal::kNullAddress</a></div><div class="ttdeci">static constexpr Address kNullAddress</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00053">v8-internal.h:53</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2209830df6b59d1ec1fdf66b9352924f"><div class="ttname"><a href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a></div><div class="ttdeci">#define DCHECK_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00490">logging.h:490</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="slots_8h_source.html#l00078">v8::internal::SlotBase&lt; Subclass, Data, SlotDataAlignment &gt;::address()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00065">v8::internal::MemoryChunkMetadata::area_size()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00060">v8::internal::MemoryChunkMetadata::area_start()</a>, <a class="el" href="memory-chunk-metadata_8h_source.html#l00123">v8::internal::MemoryChunkMetadata::Chunk()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00490">DCHECK_NULL</a>, <a class="el" href="memory-chunk_8h_source.html#l00302">v8::internal::MemoryChunk::executable()</a>, <a class="el" href="spaces-inl_8h_source.html#l00116">v8::internal::MemoryChunkIterator::HasNext()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="memory-chunk_8h_source.html#l00208">v8::internal::MemoryChunk::InYoungGeneration()</a>, <a class="el" href="virtual-address-space_8h_source.html#l00019">v8::base::kNullAddress</a>, <a class="el" href="code-memory-access-inl_8h_source.html#l00271">v8::internal::WritableJitPage::LookupAllocationContaining()</a>, <a class="el" href="spaces-inl_8h_source.html#l00128">v8::internal::MemoryChunkIterator::Next()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00034">v8::internal::OLD_TO_SHARED</a>, <a class="el" href="mutable-page-metadata_8cc_source.html#l00156">v8::internal::MutablePageMetadata::ReleaseSlotSet()</a>, <a class="el" href="mutable-page-metadata_8cc_source.html#l00177">v8::internal::MutablePageMetadata::ReleaseTypedSlotSet()</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00037">v8::internal::TRUSTED_TO_SHARED_TRUSTED</a>, <a class="el" href="mutable-page-metadata_8h_source.html#l00133">v8::internal::MutablePageMetadata::typed_slot_set()</a>, <a class="el" href="mark-compact_8cc_source.html#l04238">v8::internal::anonymous_namespace{mark-compact.cc}::UpdateOldToSharedSlot()</a>, and <a class="el" href="mark-compact_8cc_source.html#l04273">v8::internal::anonymous_namespace{mark-compact.cc}::UpdateStrongOldToSharedSlot()</a>.</p>
<div id="dynsection-98" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-98-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-98-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-98-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a50a7b97f14aca94f87fa000d330fb3d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a7b97f14aca94f87fa000d330fb3d7">&#9670;&nbsp;</a></span>UpdatePointersInClientHeaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::UpdatePointersInClientHeaps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05714">5714</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;                                                       {</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;  Isolate* <span class="keyword">const</span> isolate = <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;  <span class="keywordflow">if</span> (!isolate-&gt;is_shared_space_isolate()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160; </div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;  isolate-&gt;<a class="code" href="classv8_1_1internal_1_1Isolate.html#a6bcede2c3a0b688eca7679947e4704d4">global_safepoint</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1GlobalSafepoint.html#a32122b662818cfca794f899a8acac219">IterateClientIsolates</a>(</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      [<span class="keyword">this</span>](Isolate* client) { <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aabe392e124b1967c0510c4eaaaad062e">UpdatePointersInClientHeap</a>(client); });</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aabe392e124b1967c0510c4eaaaad062e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aabe392e124b1967c0510c4eaaaad062e">v8::internal::MarkCompactCollector::UpdatePointersInClientHeap</a></div><div class="ttdeci">void UpdatePointersInClientHeap(Isolate *client)</div><div class="ttdef"><b>Definition:</b> <a href="mark-compact_8cc_source.html#l05722">mark-compact.cc:5722</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l02345">v8::internal::Isolate::global_safepoint()</a>, <a class="el" href="execution_2isolate_8h_source.html#l02332">v8::internal::Isolate::is_shared_space_isolate()</a>, <a class="el" href="factory_8h_source.html#l01293">v8::internal::Factory::isolate()</a>, and <a class="el" href="safepoint_8h_source.html#l00190">v8::internal::GlobalSafepoint::IterateClientIsolates()</a>.</p>
<div id="dynsection-99" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-99-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-99-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-99-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7_cgraph.svg" width="100%" height="503"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a8698e5fa48a17826dcf8640f7725bbce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8698e5fa48a17826dcf8640f7725bbce">&#9670;&nbsp;</a></span>UpdatePointersInPointerTables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::UpdatePointersInPointerTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l05780">5780</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;                                                         {</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;<span class="preprocessor">#if defined(V8_ENABLE_SANDBOX) || defined(V8_ENABLE_LEAPTIERING)</span></div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;  <span class="comment">// Process an entry of a pointer table, returning either the relocated object</span></div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;  <span class="comment">// or a null pointer if the object wasn&#39;t relocated.</span></div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;  <span class="keyword">auto</span> process_entry = [&amp;](<a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> content) -&gt; Tagged&lt;ExposedTrustedObject&gt; {</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_obj = Cast&lt;HeapObject&gt;(<a class="code" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a>(content));</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;    MapWord map_word = heap_obj-&gt;map_word(<a class="code" href="namespacev8.html#a65227471e4ee0ccd275854a995f12a62">kRelaxedLoad</a>);</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    <span class="keywordflow">if</span> (!map_word.IsForwardingAddress()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> relocated_object =</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;        map_word.ToForwardingAddress(heap_obj);</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsExposedTrustedObject(relocated_object));</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <span class="keywordflow">return</span> Cast&lt;ExposedTrustedObject&gt;(relocated_object);</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;  };</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// defined(V8_ENABLE_SANDBOX) || defined(V8_ENABLE_LEAPTIERING)</span></div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160; </div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;  TrustedPointerTable* <span class="keyword">const</span> tpt = &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;trusted_pointer_table();</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;  tpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;trusted_pointer_space(),</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;      [&amp;](<a class="code" href="namespacev8_1_1internal.html#a0a296b86b75a4d9bc50eacf78b049527">TrustedPointerHandle</a> <a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a>, <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> content) {</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;        if (!relocated_object.is_null()) {</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;          auto instance_type = relocated_object-&gt;map()-&gt;instance_type();</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;          bool shared = HeapLayout::InAnySharedSpace(relocated_object);</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;          auto tag = IndirectPointerTagFromInstanceType(instance_type, shared);</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;          tpt-&gt;Set(handle, relocated_object.ptr(), tag);</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;        }</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;      });</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160; </div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;  TrustedPointerTable* <span class="keyword">const</span> stpt =</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;      &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;shared_trusted_pointer_table();</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;  stpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;shared_trusted_pointer_space(),</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;      [&amp;](<a class="code" href="namespacev8_1_1internal.html#a0a296b86b75a4d9bc50eacf78b049527">TrustedPointerHandle</a> <a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a>, <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> content) {</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;        if (!relocated_object.is_null()) {</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;          auto instance_type = relocated_object-&gt;map()-&gt;instance_type();</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;          bool shared = HeapLayout::InAnySharedSpace(relocated_object);</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;          auto tag = IndirectPointerTagFromInstanceType(instance_type, shared);</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;          DCHECK(IsSharedTrustedPointerType(tag));</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;          stpt-&gt;Set(handle, relocated_object.ptr(), tag);</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;        }</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;      });</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160; </div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;  CodePointerTable* <span class="keyword">const</span> cpt = <a class="code" href="classv8_1_1internal_1_1IsolateGroup.html#a3ca6c5d3f2b884f5866595543d2e0fd7">IsolateGroup::current</a>()-&gt;code_pointer_table();</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;  cpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;code_pointer_space(),</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;      [&amp;](<a class="code" href="namespacev8_1_1internal.html#a39897e02b04b4fcb3d49a8adf67b75b0">CodePointerHandle</a> <a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a>, <a class="code" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a> content) {</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;        if (!relocated_object.is_null()) {</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;          cpt-&gt;SetCodeObject(handle, relocated_object.address());</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;        }</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;      });</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160; </div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;  JSDispatchTable* <span class="keyword">const</span> jdt = <a class="code" href="classv8_1_1internal_1_1IsolateGroup.html#a3ca6c5d3f2b884f5866595543d2e0fd7">IsolateGroup::current</a>()-&gt;js_dispatch_table();</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;  <span class="keyword">const</span> EmbeddedData&amp; embedded_data = <a class="code" href="classv8_1_1internal_1_1EmbeddedData.html#a5f046101e1ed7d746979f87acbcb60e5">EmbeddedData::FromBlob</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;  jdt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;js_dispatch_table_space(), [&amp;](<a class="code" href="namespacev8_1_1internal.html#ae8f086a5ae078a9752085a6b967a135c">JSDispatchHandle</a> <a class="code" href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">handle</a>) {</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;        Address code_address = jdt-&gt;GetCodeAddress(handle);</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;        Address entrypoint_address = jdt-&gt;GetEntrypoint(handle);</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;        Tagged&lt;TrustedObject&gt; relocated_code = process_entry(code_address);</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;        bool code_object_was_relocated = !relocated_code.is_null();</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;        Tagged&lt;Code&gt; code = Cast&lt;Code&gt;(code_object_was_relocated</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;                                           ? relocated_code</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;                                           : Tagged&lt;Object&gt;(code_address));</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;        bool instruction_stream_was_relocated =</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;            code-&gt;instruction_start() != entrypoint_address;</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;        if (code_object_was_relocated || instruction_stream_was_relocated) {</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;          Address old_entrypoint = jdt-&gt;GetEntrypoint(handle);</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;          <span class="comment">// Ensure tiering trampolines are not overwritten here.</span></div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;          Address new_entrypoint = ([&amp;]() {</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;#define CASE(name, ...)                                                       \</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;  if (old_entrypoint == embedded_data.InstructionStartOf(Builtin::k##name)) { \</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;    return old_entrypoint;                                                    \</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;  }</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;            BUILTIN_LIST_BASE_TIERING(CASE)</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;#undef CASE</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;            return code-&gt;instruction_start();</div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;          })();</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;          jdt-&gt;SetCodeAndEntrypointNoWriteBarrier(handle, code, new_entrypoint);</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;          CHECK_IMPLIES(jdt-&gt;IsTieringRequested(handle),</div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;                        old_entrypoint == new_entrypoint);</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;        }</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;      });</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1EmbeddedData_html_a5f046101e1ed7d746979f87acbcb60e5"><div class="ttname"><a href="classv8_1_1internal_1_1EmbeddedData.html#a5f046101e1ed7d746979f87acbcb60e5">v8::internal::EmbeddedData::FromBlob</a></div><div class="ttdeci">static EmbeddedData FromBlob()</div><div class="ttdef"><b>Definition:</b> <a href="embedded-data_8h_source.html#l00062">embedded-data.h:62</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0a296b86b75a4d9bc50eacf78b049527"><div class="ttname"><a href="namespacev8_1_1internal.html#a0a296b86b75a4d9bc50eacf78b049527">v8::internal::TrustedPointerHandle</a></div><div class="ttdeci">IndirectPointerHandle TrustedPointerHandle</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00755">v8-internal.h:755</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a39897e02b04b4fcb3d49a8adf67b75b0"><div class="ttname"><a href="namespacev8_1_1internal.html#a39897e02b04b4fcb3d49a8adf67b75b0">v8::internal::CodePointerHandle</a></div><div class="ttdeci">IndirectPointerHandle CodePointerHandle</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00793">v8-internal.h:793</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a8c89f00da07e125218128b9fbf0a321c"><div class="ttname"><a href="namespacev8_1_1internal.html#a8c89f00da07e125218128b9fbf0a321c">v8::internal::handle</a></div><div class="ttdeci">IndirectHandle&lt; T &gt; handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="handles-inl_8h_source.html#l00072">handles-inl.h:72</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae8f086a5ae078a9752085a6b967a135c"><div class="ttname"><a href="namespacev8_1_1internal.html#ae8f086a5ae078a9752085a6b967a135c">v8::internal::JSDispatchHandle</a></div><div class="ttdeci">base::StrongAlias&lt; JSDispatchHandleAliasTag, uint32_t &gt; JSDispatchHandle</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00548">globals.h:548</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="handles-inl_8h_source.html#l00072">v8::internal::handle()</a>, <a class="el" href="objects-inl_8h_source.html#l01270">v8::internal::MapWord::IsForwardingAddress()</a>, <a class="el" href="common_2globals_8h_source.html#l02943">v8::kRelaxedLoad</a>, and <a class="el" href="objects-inl_8h_source.html#l01297">v8::internal::MapWord::ToForwardingAddress()</a>.</p>
<div id="dynsection-100" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-100-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-100-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-100-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce_cgraph.svg" width="100%" height="506"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa709baf43b9629ff0df85d2700caa88b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa709baf43b9629ff0df85d2700caa88b">&#9670;&nbsp;</a></span>UseBackgroundThreadsInCycle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::UseBackgroundThreadsInCycle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00183">183</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                           {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a1c9a5589f6ebd3fd2eb5869923fe8e54">use_background_threads_in_cycle_</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00473">use_background_threads_in_cycle_</a>.</p>

<p class="reference">Referenced by <a class="el" href="concurrent-marking_8cc_source.html#l00796">v8::internal::ConcurrentMarking::Join()</a>, <a class="el" href="concurrent-marking_8cc_source.html#l00743">v8::internal::ConcurrentMarking::RescheduleJobIfNeeded()</a>, <a class="el" href="cpp-heap_8cc_source.html#l00704">v8::internal::CppHeap::SelectMarkingType()</a>, and <a class="el" href="concurrent-marking_8cc_source.html#l00647">v8::internal::ConcurrentMarking::TryScheduleJob()</a>.</p>
<div id="dynsection-101" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-101-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-101-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-101-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab744335a59a10dfc63766f57720f8a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab744335a59a10dfc63766f57720f8a8b">&#9670;&nbsp;</a></span>VerifyEphemeronMarking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::VerifyEphemeronMarking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l02320">2320</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                                                  {</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    Ephemeron ephemeron;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="comment">// In the fixpoint iteration all unresolved ephemerons are in</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="comment">// `next_ephemerons_`.</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.current_ephemerons.Merge(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>.next_ephemerons);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5c26fb846b8fa0a693ab2d751fc7b1c9">local_weak_objects</a>()-&gt;current_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">ApplyEphemeronSemantics</a>(ephemeron.key, ephemeron.value),</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;               <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">EphemeronResult::kMarkedValue</a>);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="comment">// In the linear-time algorithm ephemerons are kept in `key_to_values_`.</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, values] : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a081b322601a4f48341bab12890a37b11">key_to_values_</a>) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a> : values) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab610702a8f54d8e17897592b3047103c">ApplyEphemeronSemantics</a>(<a class="code" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, <a class="code" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>),</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                 <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2">EphemeronResult::kMarkedValue</a>);</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      }</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    }</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  }</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;}</div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aa958a8a4e5dda3abaa031977268ae60e"><div class="ttname"><a href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a></div><div class="ttdeci">#define CHECK_NE(lhs, rhs)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2base_2logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>, <a class="el" href="external-reference_8cc_source.html#l01408">v8::internal::key</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00017">v8::internal::Ephemeron::key</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, <a class="el" href="weak-object-worklists_8h_source.html#l00018">v8::internal::Ephemeron::value</a>, and <a class="el" href="map-inl_8h_source.html#l00912">v8::internal::value</a>.</p>

</div>
</div>
<a id="a17e6e45984b6757652c6611c22c17cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17e6e45984b6757652c6611c22c17cff">&#9670;&nbsp;</a></span>VerifyMarking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::VerifyMarking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l00814">814</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                                         {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7aa3dd4e8cf79ce7342fd16773ecfb8a">local_marking_worklists_</a>-&gt;IsEmpty());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#aca549fb459876aff6e5a580c807d1607">incremental_marking</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">IsStopped</a>());</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#abdd7e3821604a14452281640366cc9bb">tracer</a>(), GCTracer::Scope::MC_MARK_VERIFY);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    FullMarkingVerifier verifier(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    verifier.Run();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a8d7b791efdd8818bc3dcd98ce920b06c">old_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a36ef98ceb504120eae6a5b3d0dcf9fd4">code_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()) <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a125e37c0ebec23dda96a152ac6881820">shared_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#a353eba8c85db23f30be40d7e297ded1d">trusted_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>())</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1PagedNewSpace.html#ad0dd111dc068ebfadba6491a35652691">paged_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00775">v8::internal::Heap::code_space()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="mark-compact_8h_source.html#l00396">heap_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l01117">v8::internal::Heap::incremental_marking()</a>, <a class="el" href="incremental-marking_8h_source.html#l00070">v8::internal::IncrementalMarking::IsStopped()</a>, <a class="el" href="mark-compact_8h_source.html#l00425">local_marking_worklists_</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00773">v8::internal::Heap::old_space()</a>, <a class="el" href="heap-inl_8h_source.html#l00426">v8::internal::Heap::paged_new_space()</a>, <a class="el" href="new-spaces_8h_source.html#l00718">v8::internal::PagedNewSpace::paged_space()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00776">v8::internal::Heap::shared_space()</a>, <a class="el" href="gc-tracer_8h_source.html#l00035">TRACE_GC</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00843">v8::internal::Heap::tracer()</a>, <a class="el" href="src_2heap_2heap_8h_source.html#l00782">v8::internal::Heap::trusted_space()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>.</p>
<div id="dynsection-102" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-102-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-102-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-102-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-103" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-103-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-103-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-103-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a13bc63346bb82388df996ca28b39f6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13bc63346bb82388df996ca28b39f6d3">&#9670;&nbsp;</a></span>weak_objects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1WeakObjects.html">WeakObjects</a>* v8::internal::MarkCompactCollector::weak_objects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00180">180</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{ <span class="keywordflow">return</span> &amp;<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0fcc37fc5a17ba03b80c55849b314fec">weak_objects_</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mark-compact_8h_source.html#l00427">weak_objects_</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00296">TearDown()</a>.</p>
<div id="dynsection-104" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-104-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-104-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-104-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3_icgraph.svg" width="100%" height="412"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a67923b4c8c39c7b225af81c264d2ee46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67923b4c8c39c7b225af81c264d2ee46">&#9670;&nbsp;</a></span>WeakenStrongDescriptorArrays()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void v8::internal::MarkCompactCollector::WeakenStrongDescriptorArrays </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8cc_source.html#l03754">3754</a> of file <a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;                                                        {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  Tagged&lt;Map&gt; descriptor_array_map =</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      ReadOnlyRoots(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()).descriptor_array_map();</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; vec : <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a549e40a15f698fff626af735208769ae">strong_descriptor_arrays_</a>) {</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = vec.begin(); it != vec.end(); ++it) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> raw = it.raw();</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(IsStrongDescriptorArray(raw));</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;      raw-&gt;set_map_safe_transition_no_write_barrier(<a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae03601e565734a2538c3452310efcf8a">heap_</a>-&gt;<a class="code" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;                                                    descriptor_array_map);</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(raw-&gt;raw_gc_state(<a class="code" href="namespacev8.html#a65227471e4ee0ccd275854a995f12a62">kRelaxedLoad</a>), 0);</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    }</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  }</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MarkCompactCollector.html#a549e40a15f698fff626af735208769ae">strong_descriptor_arrays_</a>.clear();</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00481">DCHECK</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, and <a class="el" href="common_2globals_8h_source.html#l02943">v8::kRelaxedLoad</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="aaf862d3efb6e48b15fe21d283eebc6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf862d3efb6e48b15fe21d283eebc6c5">&#9670;&nbsp;</a></span>Evacuator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1Evacuator.html">Evacuator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00477">477</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a03cb76c44646ccae2a33eb05bcdf0dc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03cb76c44646ccae2a33eb05bcdf0dc5">&#9670;&nbsp;</a></span>PrecisePagePinningVisitor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1PrecisePagePinningVisitor.html">PrecisePagePinningVisitor</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00480">480</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a9aac51e6e68df5e4add0792032864173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aac51e6e68df5e4add0792032864173">&#9670;&nbsp;</a></span>RecordMigratedSlotVisitor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00478">478</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a0a89e89941e2601a090655513f208c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a89e89941e2601a090655513f208c65">&#9670;&nbsp;</a></span>RootMarkingVisitor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1RootMarkingVisitor.html">RootMarkingVisitor</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00479">479</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a07a4e5f537a84e8ed02f47c747e10f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a4e5f537a84e8ed02f47c747e10f89">&#9670;&nbsp;</a></span>aborted_evacuation_candidates_due_to_flags_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; v8::internal::MarkCompactCollector::aborted_evacuation_candidates_due_to_flags_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00444">444</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a4dab80ef7a34c59ce69e9828d602bb9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dab80ef7a34c59ce69e9828d602bb9f">&#9670;&nbsp;</a></span>aborted_evacuation_candidates_due_to_oom_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;<a class="el" href="namespacev8_1_1internal.html#ab4955debfb9384e59e3d4e9fcab5b0a0">Address</a>, <a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; &gt; v8::internal::MarkCompactCollector::aborted_evacuation_candidates_due_to_oom_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00443">443</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a40d1f44cfde0bb0390ea138370a4b591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40d1f44cfde0bb0390ea138370a4b591">&#9670;&nbsp;</a></span>black_allocation_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::black_allocation_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00420">420</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a25ccbff2b71c818ffeab6970aad6510f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ccbff2b71c818ffeab6970aad6510f">&#9670;&nbsp;</a></span>code_flush_mode_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet</a>&lt;<a class="el" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925b">CodeFlushMode</a>&gt; v8::internal::MarkCompactCollector::code_flush_mode_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00469">469</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8h_source.html#l00170">code_flush_mode()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>.</p>

</div>
</div>
<a id="ade96b53880b218eba9217ef4f296dcdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade96b53880b218eba9217ef4f296dcdf">&#9670;&nbsp;</a></span>compacting_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::compacting_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00419">419</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8h_source.html#l00147">is_compacting()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00331">StartCompaction()</a>.</p>

</div>
</div>
<a id="aa333a0a067ea24b0545c99392cc77848"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa333a0a067ea24b0545c99392cc77848">&#9670;&nbsp;</a></span>empty_new_space_pages_to_be_swept_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; v8::internal::MarkCompactCollector::empty_new_space_pages_to_be_swept_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00471">471</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>

</div>
</div>
<a id="a97165101e46c49ad2629345f1cb48da5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97165101e46c49ad2629345f1cb48da5">&#9670;&nbsp;</a></span>epoch_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned v8::internal::MarkCompactCollector::epoch_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00463">463</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8h_source.html#l00168">epoch()</a>.</p>

</div>
</div>
<a id="a57e6e0473e2cf52591357fcbeb4ebfca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57e6e0473e2cf52591357fcbeb4ebfca">&#9670;&nbsp;</a></span>evacuation_candidates_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; v8::internal::MarkCompactCollector::evacuation_candidates_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00438">438</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00307">AddEvacuationCandidate()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00331">StartCompaction()</a>.</p>

</div>
</div>
<a id="a2bf16e5a4b1908c7abfc22383d37980f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf16e5a4b1908c7abfc22383d37980f">&#9670;&nbsp;</a></span>have_code_to_deoptimize_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::have_code_to_deoptimize_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00421">421</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>

</div>
</div>
<a id="ae03601e565734a2538c3452310efcf8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03601e565734a2538c3452310efcf8a">&#9670;&nbsp;</a></span>heap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1Heap.html">Heap</a>* const v8::internal::MarkCompactCollector::heap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00396">396</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00307">AddEvacuationCandidate()</a>, <a class="el" href="mark-compact_8cc_source.html#l00609">CollectEvacuationCandidates()</a>, <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>, <a class="el" href="mark-compact_8cc_source.html#l00561">ComputeEvacuationHeuristics()</a>, <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, <a class="el" href="mark-compact_8cc_source.html#l00799">FinishConcurrentMarking()</a>, <a class="el" href="mark-compact_8h_source.html#l00189">heap()</a>, <a class="el" href="mark-compact-inl_8h_source.html#l00028">MarkObject()</a>, <a class="el" href="mark-compact_8cc_source.html#l01909">MarkObjectsFromClientHeaps()</a>, <a class="el" href="mark-compact-inl_8h_source.html#l00036">MarkRootObject()</a>, <a class="el" href="mark-compact_8cc_source.html#l01854">MarkRoots()</a>, <a class="el" href="mark-compact_8cc_source.html#l01887">MarkRootsFromConservativeStack()</a>, <a class="el" href="mark-compact_8cc_source.html#l00466">MaybeEnableBackgroundThreadsInCycle()</a>, <a class="el" href="mark-compact_8cc_source.html#l00765">Prepare()</a>, <a class="el" href="mark-compact_8cc_source.html#l00331">StartCompaction()</a>, <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, <a class="el" href="mark-compact_8cc_source.html#l00935">SweepArrayBufferExtensions()</a>, <a class="el" href="mark-compact_8cc_source.html#l00296">TearDown()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00814">VerifyMarking()</a>.</p>

</div>
</div>
<a id="a813f065fd20e706f633a1f94da96f839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a813f065fd20e706f633a1f94da96f839">&#9670;&nbsp;</a></span>in_conservative_stack_scanning_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::in_conservative_stack_scanning_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00475">475</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact-inl_8h_source.html#l00036">MarkRootObject()</a>, and <a class="el" href="mark-compact_8cc_source.html#l01887">MarkRootsFromConservativeStack()</a>.</p>

</div>
</div>
<a id="a56657163fc1e11db075fbc35242ca3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56657163fc1e11db075fbc35242ca3ea">&#9670;&nbsp;</a></span>is_shared_space_isolate_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::is_shared_space_isolate_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00415">415</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="ad52a278306d82bfecdf2ee279d56967e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52a278306d82bfecdf2ee279d56967e">&#9670;&nbsp;</a></span>kEphemeronChunkSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classint.html">int</a> v8::internal::MarkCompactCollector::kEphemeronChunkSize = 8 * <a class="el" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00384">384</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a081b322601a4f48341bab12890a37b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a081b322601a4f48341bab12890a37b11">&#9670;&nbsp;</a></span>key_to_values_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a28865ed3db2b1d0816122def6a86c92e">KeyToValues</a> v8::internal::MarkCompactCollector::key_to_values_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00452">452</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>

</div>
</div>
<a id="a7aa3dd4e8cf79ce7342fd16773ecfb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aa3dd4e8cf79ce7342fd16773ecfb8a">&#9670;&nbsp;</a></span>local_marking_worklists_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html#a941d07bdea68cc187975415adc4dac79">MarkingWorklists::Local</a>&gt; v8::internal::MarkCompactCollector::local_marking_worklists_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00425">425</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, <a class="el" href="mark-compact_8h_source.html#l00176">local_marking_worklists()</a>, <a class="el" href="mark-compact-inl_8h_source.html#l00028">MarkObject()</a>, <a class="el" href="mark-compact-inl_8h_source.html#l00036">MarkRootObject()</a>, <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, <a class="el" href="mark-compact_8cc_source.html#l00296">TearDown()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00814">VerifyMarking()</a>.</p>

</div>
</div>
<a id="ab7a10b022d9f335231b5ea7dbbdbaa51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a10b022d9f335231b5ea7dbbdbaa51">&#9670;&nbsp;</a></span>local_weak_objects_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">WeakObjects::Local</a>&gt; v8::internal::MarkCompactCollector::local_weak_objects_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00430">430</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, <a class="el" href="mark-compact_8h_source.html#l00181">local_weak_objects()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>.</p>

</div>
</div>
<a id="a93b2700c2f0bdd026ead1656ef7416c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93b2700c2f0bdd026ead1656ef7416c6">&#9670;&nbsp;</a></span>marking_state_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MarkingState.html">MarkingState</a>* const v8::internal::MarkCompactCollector::marking_state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00454">454</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact-inl_8h_source.html#l00028">MarkObject()</a>, and <a class="el" href="mark-compact-inl_8h_source.html#l00036">MarkRootObject()</a>.</p>

</div>
</div>
<a id="af61342980b0507790efb15034d83162f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61342980b0507790efb15034d83162f">&#9670;&nbsp;</a></span>marking_visitor_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classv8_1_1internal_1_1MainMarkingVisitor.html">MainMarkingVisitor</a>&gt; v8::internal::MarkCompactCollector::marking_visitor_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00429">429</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>.</p>

</div>
</div>
<a id="a84cbdfc60879f899e3aca799e53e5e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84cbdfc60879f899e3aca799e53e5e42">&#9670;&nbsp;</a></span>marking_worklists_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MarkingWorklists.html">MarkingWorklists</a> v8::internal::MarkCompactCollector::marking_worklists_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00424">424</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, <a class="el" href="mark-compact_8h_source.html#l00174">marking_worklists()</a>, <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00296">TearDown()</a>.</p>

</div>
</div>
<a id="a2e6250572f864eaa8bd93c57ae34215a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e6250572f864eaa8bd93c57ae34215a">&#9670;&nbsp;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> v8::internal::MarkCompactCollector::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00398">398</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a38d01cfcaa46efe4b24412d3eba66ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d01cfcaa46efe4b24412d3eba66ca0">&#9670;&nbsp;</a></span>native_context_inferrer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1NativeContextInferrer.html">NativeContextInferrer</a> v8::internal::MarkCompactCollector::native_context_inferrer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00431">431</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="adebad6550fadebad8005f173c10359c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adebad6550fadebad8005f173c10359c6">&#9670;&nbsp;</a></span>native_context_stats_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1NativeContextStats.html">NativeContextStats</a> v8::internal::MarkCompactCollector::native_context_stats_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00432">432</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00488">CollectGarbage()</a>, <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00799">FinishConcurrentMarking()</a>.</p>

</div>
</div>
<a id="a90654b662fce79c4d158e494a7660987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90654b662fce79c4d158e494a7660987">&#9670;&nbsp;</a></span>new_space_evacuation_pages_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; v8::internal::MarkCompactCollector::new_space_evacuation_pages_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00441">441</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="afae21b5cab72b362b1b379c2f3bda5f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afae21b5cab72b362b1b379c2f3bda5f8">&#9670;&nbsp;</a></span>non_atomic_marking_state_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1NonAtomicMarkingState.html">NonAtomicMarkingState</a>* const v8::internal::MarkCompactCollector::non_atomic_marking_state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00455">455</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="af8bdf9288a13d36c8c4c482145a20238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8bdf9288a13d36c8c4c482145a20238">&#9670;&nbsp;</a></span>old_space_evacuation_pages_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>*&gt; v8::internal::MarkCompactCollector::old_space_evacuation_pages_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00440">440</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="aec2b8f54a92b2195012b62dfdf64aa9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2b8f54a92b2195012b62dfdf64aa9b">&#9670;&nbsp;</a></span>page_parallel_job_semaphore_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1Semaphore.html">base::Semaphore</a> v8::internal::MarkCompactCollector::page_parallel_job_semaphore_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00399">399</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a8ba2df1d2e1c47234008d809d596228c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba2df1d2e1c47234008d809d596228c">&#9670;&nbsp;</a></span>parallel_marking_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::parallel_marking_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00422">422</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="af2e1364ab937f14cf763b58e79567d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e1364ab937f14cf763b58e79567d74">&#9670;&nbsp;</a></span>promoted_large_pages_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1LargePageMetadata.html">LargePageMetadata</a>*&gt; v8::internal::MarkCompactCollector::promoted_large_pages_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00445">445</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a18e20b7391f846e5f4c429eda5bf5cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e20b7391f846e5f4c429eda5bf5cbe">&#9670;&nbsp;</a></span>queued_pages_to_be_freed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>*&gt; v8::internal::MarkCompactCollector::queued_pages_to_be_freed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00449">449</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>.</p>

</div>
</div>
<a id="a549e40a15f698fff626af735208769ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a549e40a15f698fff626af735208769ae">&#9670;&nbsp;</a></span>strong_descriptor_arrays_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classv8_1_1internal_1_1GlobalHandleVector.html">GlobalHandleVector</a>&lt;<a class="el" href="classv8_1_1internal_1_1DescriptorArray.html">DescriptorArray</a>&gt; &gt; v8::internal::MarkCompactCollector::strong_descriptor_arrays_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00434">434</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a512d50cdd47b6006d66ac9456259e69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512d50cdd47b6006d66ac9456259e69b">&#9670;&nbsp;</a></span>strong_descriptor_arrays_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> v8::internal::MarkCompactCollector::strong_descriptor_arrays_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00435">435</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="ac461786105da85b3815ffc21717d883d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac461786105da85b3815ffc21717d883d">&#9670;&nbsp;</a></span>sweeper_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1Sweeper.html">Sweeper</a>* const v8::internal::MarkCompactCollector::sweeper_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00456">456</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00609">CollectEvacuationCandidates()</a>, <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, and <a class="el" href="mark-compact_8cc_source.html#l00765">Prepare()</a>.</p>

</div>
</div>
<a id="a1c9a5589f6ebd3fd2eb5869923fe8e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c9a5589f6ebd3fd2eb5869923fe8e54">&#9670;&nbsp;</a></span>use_background_threads_in_cycle_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::use_background_threads_in_cycle_ = <a class="el" href="flag-definitions_8h.html#a3a9beadc89284d3f78a7d4945b1b4d8c">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00473">473</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00466">MaybeEnableBackgroundThreadsInCycle()</a>, <a class="el" href="mark-compact_8cc_source.html#l00406">StartMarking()</a>, and <a class="el" href="mark-compact_8h_source.html#l00183">UseBackgroundThreadsInCycle()</a>.</p>

</div>
</div>
<a id="a76317965f702101c902adbdee2503103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76317965f702101c902adbdee2503103">&#9670;&nbsp;</a></span>uses_shared_heap_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::MarkCompactCollector::uses_shared_heap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00414">414</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

</div>
</div>
<a id="a0fcc37fc5a17ba03b80c55849b314fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcc37fc5a17ba03b80c55849b314fec">&#9670;&nbsp;</a></span>weak_objects_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1WeakObjects.html">WeakObjects</a> v8::internal::MarkCompactCollector::weak_objects_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mark-compact_8h_source.html#l00427">427</a> of file <a class="el" href="mark-compact_8h_source.html">mark-compact.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="mark-compact_8cc_source.html#l00849">Finish()</a>, and <a class="el" href="mark-compact_8h_source.html#l00180">weak_objects()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/V8SourceCode/src/heap/<a class="el" href="mark-compact_8h_source.html">mark-compact.h</a></li>
<li>/mnt/V8SourceCode/src/heap/<a class="el" href="mark-compact-inl_8h_source.html">mark-compact-inl.h</a></li>
<li>/mnt/V8SourceCode/src/heap/<a class="el" href="mark-compact_8cc_source.html">mark-compact.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacev8.html">v8</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:04:38 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
