<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/builtins/builtins-microtask-queue-gen.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('builtins-microtask-queue-gen_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">builtins-microtask-queue-gen.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="builtins-microtask-queue-gen_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2018 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="api_8h.html">src/api/api.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="builtins-utils-gen_8h.html">src/builtins/builtins-utils-gen.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="code-stub-assembler-inl_8h.html">src/codegen/code-stub-assembler-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="microtask-queue_8h.html">src/execution/microtask-queue.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="js-weak-refs_8h.html">src/objects/js-weak-refs.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="microtask-inl_8h.html">src/objects/microtask-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="promise_8h.html">src/objects/promise.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="smi-inl_8h.html">src/objects/smi-inl.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="define-code-stub-assembler-macros_8inc.html">src/codegen/define-code-stub-assembler-macros.inc</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> compiler::ScopedExceptionHandler;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html">   21</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html">MicrotaskQueueBuiltinsAssembler</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html">CodeStubAssembler</a> {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a72ab6e4c705a6546da5e5d5e05460536">   23</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a72ab6e4c705a6546da5e5d5e05460536">MicrotaskQueueBuiltinsAssembler</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerState.html">compiler::CodeAssemblerState</a>* <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a69e5efc92edbc414a2841fd6d35a5219">state</a>)</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      : <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html">CodeStubAssembler</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a69e5efc92edbc414a2841fd6d35a5219">state</a>) {}</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2ffd4bf94463060a397fb17435d42f9c">GetMicrotaskQueue</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a5746eea6f6113a256e31abc14919d424">GetMicrotaskRingBuffer</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7c6215225682c787e3842e1718e15106">GetMicrotaskQueueCapacity</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ac4c7a133c88da7f7f0db4a44951c175b">GetMicrotaskQueueSize</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a94e41cd2b4cee4153b7db7e9e9cbb0d5">SetMicrotaskQueueSize</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                             <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_size);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#acbdd94449a2c7f65bda0754d2e028685">GetMicrotaskQueueStart</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad0820458200f34e01b5182f513b6b5bc">SetMicrotaskQueueStart</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                              <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_start);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a86a68f31116a626213a507100c6fccfa">CalculateRingBufferOffset</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                           <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> start,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                           <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">PrepareForContext</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> microtask_context, <a class="code" href="classv8_1_1internal_1_1Label.html">Label</a>* bailout);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a764b69cd40a9548884d56477977d365d">RunSingleMicrotask</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> current_context,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                          <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Microtask&gt;</a> microtask);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7cf60844ebd99f7d2594eb8d0a278c54">IncrementFinishedMicrotaskCount</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4846655838f682a45449fffac1017d1d">GetCurrentContext</a>();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#adea29b76e16d33e03ebed97d18a29144">GetEnteredContextCount</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2f0b8c32e998dae030d392648c5cb079">EnterContext</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> saved_entered_context_count);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cc">PromiseHookType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                          <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">RunPromiseHook</a>(<a class="code" href="classv8_1_1internal_1_1Runtime.html#abc83b23b198d9aa173abb13a25a7b670">Runtime::FunctionId</a> <span class="keywordtype">id</span>, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Uint32T&gt;</a> promiseHookFlags);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">void</span> SetupContinuationPreservedEmbedderData(<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Microtask&gt;</a> microtask);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">void</span> ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;};</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2ffd4bf94463060a397fb17435d42f9c">   62</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2ffd4bf94463060a397fb17435d42f9c">MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueue</a>(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  CSA_DCHECK(<span class="keyword">this</span>, IsNativeContext(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#af1116461187a85e09e9aaae4a08409a2">LoadExternalPointerFromObject</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                       NativeContext::kMicrotaskQueueOffset,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                       <a class="code" href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbcadb107393d8231b09429602079bba05ab">kNativeContextMicrotaskQueueTag</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a5746eea6f6113a256e31abc14919d424">   70</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a5746eea6f6113a256e31abc14919d424">MicrotaskQueueBuiltinsAssembler::GetMicrotaskRingBuffer</a>(</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> Load&lt;RawPtrT&gt;(microtask_queue,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#a5bf8a7c6832ef7c777b39ab4e2f78ce9">MicrotaskQueue::kRingBufferOffset</a>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7c6215225682c787e3842e1718e15106">   76</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7c6215225682c787e3842e1718e15106">MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueCapacity</a>(</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">return</span> Load&lt;IntPtrT&gt;(microtask_queue,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#a8ff1a71729da40796fd6032be51e5c87">MicrotaskQueue::kCapacityOffset</a>));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ac4c7a133c88da7f7f0db4a44951c175b">   82</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ac4c7a133c88da7f7f0db4a44951c175b">MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueSize</a>(</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> Load&lt;IntPtrT&gt;(microtask_queue,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#a63f461f64c753251175926ec789e64c0">MicrotaskQueue::kSizeOffset</a>));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a94e41cd2b4cee4153b7db7e9e9cbb0d5">   88</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a94e41cd2b4cee4153b7db7e9e9cbb0d5">MicrotaskQueueBuiltinsAssembler::SetMicrotaskQueueSize</a>(</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_size) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">StoreNoWriteBarrier</a>(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), microtask_queue,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#a63f461f64c753251175926ec789e64c0">MicrotaskQueue::kSizeOffset</a>), new_size);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#acbdd94449a2c7f65bda0754d2e028685">   94</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#acbdd94449a2c7f65bda0754d2e028685">MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueStart</a>(</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> Load&lt;IntPtrT&gt;(microtask_queue,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                       <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#af2873ba916dfe4147898ff7d37e07683">MicrotaskQueue::kStartOffset</a>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad0820458200f34e01b5182f513b6b5bc">  100</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad0820458200f34e01b5182f513b6b5bc">MicrotaskQueueBuiltinsAssembler::SetMicrotaskQueueStart</a>(</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_start) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">StoreNoWriteBarrier</a>(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), microtask_queue,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#af2873ba916dfe4147898ff7d37e07683">MicrotaskQueue::kStartOffset</a>), new_start);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a86a68f31116a626213a507100c6fccfa">  106</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a86a68f31116a626213a507100c6fccfa">MicrotaskQueueBuiltinsAssembler::CalculateRingBufferOffset</a>(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> start, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#afc3b4443234afca2fef5a597f0c4bd51">TimesSystemPointerSize</a>(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a6360863dbbe4b8dc691848d6857ffdc8">WordAnd</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#aedf6c1a529f8bdb09035246dcafa6f2c">IntPtrAdd</a>(start, <a class="code" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>), <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af609974610e1e5d17933cbea7b7406a0">IntPtrSub</a>(capacity, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(1))));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">  112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">MicrotaskQueueBuiltinsAssembler::PrepareForContext</a>(</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a>* bailout) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  CSA_DCHECK(<span class="keyword">this</span>, IsNativeContext(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// Skip the microtask execution if the associated context is shutdown.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a8a01c32bf239277c6063f52ad3f80a21">GotoIf</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ac22594b3cd1cf757f1f19f18609d2ae9">WordEqual</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2ffd4bf94463060a397fb17435d42f9c">GetMicrotaskQueue</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>), <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(0)),</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         bailout);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2f0b8c32e998dae030d392648c5cb079">EnterContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordtype">void</span> MicrotaskQueueBuiltinsAssembler::SetupContinuationPreservedEmbedderData(</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Microtask&gt;</a> microtask) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> continuation_preserved_embedder_data = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      microtask, Microtask::kContinuationPreservedEmbedderDataOffset);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Label.html">Label</a> continuation_preserved_data_done(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// The isolate&#39;s continuation preserved embedder data is cleared at the start</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// of RunMicrotasks and after each microtask, so it only needs to be set if</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// it&#39;s not undefined.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a8a01c32bf239277c6063f52ad3f80a21">GotoIf</a>(IsUndefined(continuation_preserved_embedder_data),</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         &amp;continuation_preserved_data_done);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a9ea7ea13f24ebec0e20de3a5e98a7daf">SetContinuationPreservedEmbedderData</a>(continuation_preserved_embedder_data);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;continuation_preserved_data_done);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  BIND(&amp;continuation_preserved_data_done);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">void</span> MicrotaskQueueBuiltinsAssembler::ClearContinuationPreservedEmbedderData() {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a9ea7ea13f24ebec0e20de3a5e98a7daf">SetContinuationPreservedEmbedderData</a>(<a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a764b69cd40a9548884d56477977d365d">  145</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a764b69cd40a9548884d56477977d365d">MicrotaskQueueBuiltinsAssembler::RunSingleMicrotask</a>(</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> current_context, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Microtask&gt;</a> microtask) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  CSA_DCHECK(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a55c0dba588ac64780b7cb51f308c21c2">TaggedIsNotSmi</a>(microtask));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  CSA_DCHECK(<span class="keyword">this</span>, Word32BinaryNot(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a7c0545175c8cfc7402114b8ca9070ff8">IsExecutionTerminating</a>()));</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abd5a129506a9f5a0272c4f79db72f384">StoreRoot</a>(RootIndex::kCurrentMicrotask, microtask);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> saved_entered_context_count = <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#adea29b76e16d33e03ebed97d18a29144">GetEnteredContextCount</a>();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Map&gt;</a> microtask_map = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#acdf36726dbd1197b5f1b0645cf1a636b">LoadMap</a>(microtask);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Uint16T&gt;</a> microtask_type = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#aa1beb64388886b41be188c5e03b53536">LoadMapInstanceType</a>(microtask_map);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  TVARIABLE(<a class="code" href="classv8_1_1internal_1_1Object.html">Object</a>, var_exception);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a> if_exception(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">Label::kDeferred</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a> is_callable(<span class="keyword">this</span>), is_callback(<span class="keyword">this</span>),</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      is_promise_fulfill_reaction_job(<span class="keyword">this</span>),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      is_promise_reject_reaction_job(<span class="keyword">this</span>),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      is_promise_resolve_thenable_job(<span class="keyword">this</span>),</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      is_unreachable(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">Label::kDeferred</a>), done(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">int32_t</a> case_values[] = {CALLABLE_TASK_TYPE, CALLBACK_TASK_TYPE,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                           PROMISE_FULFILL_REACTION_JOB_TASK_TYPE,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                           PROMISE_REJECT_REACTION_JOB_TASK_TYPE,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                           PROMISE_RESOLVE_THENABLE_JOB_TASK_TYPE};</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a>* case_labels[] = {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      &amp;is_callable, &amp;is_callback, &amp;is_promise_fulfill_reaction_job,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      &amp;is_promise_reject_reaction_job, &amp;is_promise_resolve_thenable_job};</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  static_assert(<a class="code" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(case_values) == <a class="code" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(case_labels), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a9d1ac278e0b5bb21cd0787fc0ff3b34d">Switch</a>(microtask_type, &amp;is_unreachable, case_values, case_labels,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         <a class="code" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(case_labels));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  BIND(&amp;is_callable);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// Enter the context of the {microtask}.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> microtask_context =</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        LoadObjectField&lt;Context&gt;(microtask, CallableTask::kContextOffset);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;NativeContext&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a> = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#ab135e9c2e7bbd26096b2b8d92e79f718">LoadNativeContext</a>(microtask_context);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">PrepareForContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>, &amp;done);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    SetupContinuationPreservedEmbedderData(microtask);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;JSReceiver&gt;</a> callable =</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        LoadObjectField&lt;JSReceiver&gt;(microtask, CallableTask::kCallableOffset);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">ScopedExceptionHandler</a> handler(<span class="keyword">this</span>, &amp;if_exception, &amp;var_exception);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a9e0ee17e41fa94f83ef6e03943c10f08">Call</a>(microtask_context, callable, <a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(saved_entered_context_count);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(current_context);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  BIND(&amp;is_callback);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> microtask_callback =</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, CallbackTask::kCallbackOffset);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> microtask_data =</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, CallbackTask::kDataOffset);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    SetupContinuationPreservedEmbedderData(microtask);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// If this turns out to become a bottleneck because of the calls</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// to C++ via CEntry, we can choose to speed them up using a</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// similar mechanism that we use for the CallApiFunction stub,</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// except that calling the MicrotaskCallback is even easier, since</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// it doesn&#39;t accept any tagged parameters, doesn&#39;t return a value</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// and ignores exceptions.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// But from our current measurements it doesn&#39;t seem to be a</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// serious performance problem, even if the microtask is full</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// of CallHandlerTasks (which is not a realistic use case anyways).</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">ScopedExceptionHandler</a> handler(<span class="keyword">this</span>, &amp;if_exception, &amp;var_exception);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab4aa43570c8a9ae0c9618dfcf590a662">CallRuntime</a>(Runtime::kRunMicrotaskCallback, current_context,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                  microtask_callback, microtask_data);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  BIND(&amp;is_promise_resolve_thenable_job);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Enter the context of the {microtask}.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> microtask_context = LoadObjectField&lt;Context&gt;(</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        microtask, PromiseResolveThenableJobTask::kContextOffset);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;NativeContext&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a> = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#ab135e9c2e7bbd26096b2b8d92e79f718">LoadNativeContext</a>(microtask_context);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">PrepareForContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>, &amp;done);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> promise_to_resolve = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        microtask, PromiseResolveThenableJobTask::kPromiseToResolveOffset);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> then =</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, PromiseResolveThenableJobTask::kThenOffset);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> thenable = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        microtask, PromiseResolveThenableJobTask::kThenableOffset);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    SetupContinuationPreservedEmbedderData(microtask);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6">PromiseHookType::kBefore</a>, microtask_context,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                   <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(promise_to_resolve));</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">ScopedExceptionHandler</a> handler(<span class="keyword">this</span>, &amp;if_exception, &amp;var_exception);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ace2184f798a5689b1a8e3fc20a1da7a3">CallBuiltin</a>(Builtin::kPromiseResolveThenableJob, <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                  promise_to_resolve, thenable, then);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4">PromiseHookType::kAfter</a>, microtask_context,</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                   <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(promise_to_resolve));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(saved_entered_context_count);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(current_context);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  BIND(&amp;is_promise_fulfill_reaction_job);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// Enter the context of the {microtask}.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> microtask_context = LoadObjectField&lt;Context&gt;(</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        microtask, PromiseReactionJobTask::kContextOffset);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;NativeContext&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a> = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#ab135e9c2e7bbd26096b2b8d92e79f718">LoadNativeContext</a>(microtask_context);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">PrepareForContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>, &amp;done);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> argument =</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, PromiseReactionJobTask::kArgumentOffset);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> job_handler =</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, PromiseReactionJobTask::kHandlerOffset);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability = <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        microtask, PromiseReactionJobTask::kPromiseOrCapabilityOffset));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    SetupContinuationPreservedEmbedderData(microtask);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// Run the promise before/debug hook if enabled.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6">PromiseHookType::kBefore</a>, microtask_context,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                       promise_or_capability);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">ScopedExceptionHandler</a> handler(<span class="keyword">this</span>, &amp;if_exception, &amp;var_exception);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ace2184f798a5689b1a8e3fc20a1da7a3">CallBuiltin</a>(Builtin::kPromiseFulfillReactionJob, microtask_context,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                  argument, job_handler, promise_or_capability);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// Run the promise after/debug hook if enabled.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4">PromiseHookType::kAfter</a>, microtask_context,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                       promise_or_capability);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(saved_entered_context_count);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(current_context);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  BIND(&amp;is_promise_reject_reaction_job);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// Enter the context of the {microtask}.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> microtask_context = LoadObjectField&lt;Context&gt;(</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        microtask, PromiseReactionJobTask::kContextOffset);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;NativeContext&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a> = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#ab135e9c2e7bbd26096b2b8d92e79f718">LoadNativeContext</a>(microtask_context);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">PrepareForContext</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>, &amp;done);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> argument =</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, PromiseReactionJobTask::kArgumentOffset);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Object&gt;</a> job_handler =</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(microtask, PromiseReactionJobTask::kHandlerOffset);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability = <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        microtask, PromiseReactionJobTask::kPromiseOrCapabilityOffset));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    SetupContinuationPreservedEmbedderData(microtask);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Run the promise before/debug hook if enabled.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6">PromiseHookType::kBefore</a>, microtask_context,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                       promise_or_capability);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">ScopedExceptionHandler</a> handler(<span class="keyword">this</span>, &amp;if_exception, &amp;var_exception);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ace2184f798a5689b1a8e3fc20a1da7a3">CallBuiltin</a>(Builtin::kPromiseRejectReactionJob, microtask_context,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                  argument, job_handler, promise_or_capability);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// Run the promise after/debug hook if enabled.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">RunAllPromiseHooks</a>(<a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4">PromiseHookType::kAfter</a>, microtask_context,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                       promise_or_capability);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    ClearContinuationPreservedEmbedderData();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_CONTINUATION_PRESERVED_EMBEDDER_DATA</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(saved_entered_context_count);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(current_context);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  BIND(&amp;is_unreachable);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab100334005245e62990aff6d03b73642">Unreachable</a>();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  BIND(&amp;if_exception);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// Report unhandled exceptions from microtasks.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab4aa43570c8a9ae0c9618dfcf590a662">CallRuntime</a>(Runtime::kReportMessageFromMicrotask, <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4846655838f682a45449fffac1017d1d">GetCurrentContext</a>(),</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                var_exception.value());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">RewindEnteredContext</a>(saved_entered_context_count);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">SetCurrentContext</a>(current_context);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  BIND(&amp;done);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7cf60844ebd99f7d2594eb8d0a278c54">  367</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7cf60844ebd99f7d2594eb8d0a278c54">MicrotaskQueueBuiltinsAssembler::IncrementFinishedMicrotaskCount</a>(</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="structv8_1_1internal_1_1count.html">count</a> = Load&lt;IntPtrT&gt;(</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      microtask_queue,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#aa28d21c02a3a37061f02527e86ef46a6">MicrotaskQueue::kFinishedMicrotaskCountOffset</a>));</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_count = <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#aedf6c1a529f8bdb09035246dcafa6f2c">IntPtrAdd</a>(<a class="code" href="structv8_1_1internal_1_1count.html">count</a>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(1));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">StoreNoWriteBarrier</a>(</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), microtask_queue,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#aa28d21c02a3a37061f02527e86ef46a6">MicrotaskQueue::kFinishedMicrotaskCountOffset</a>), new_count);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4846655838f682a45449fffac1017d1d">  378</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4846655838f682a45449fffac1017d1d">MicrotaskQueueBuiltinsAssembler::GetCurrentContext</a>() {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keyword">auto</span> ref = <a class="code" href="classv8_1_1internal_1_1ExternalReference.html#af4f8bd08709c2b99f51c5dea884e63af">ExternalReference::Create</a>(kContextAddress, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">isolate</a>());</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// TODO(delphick): Add a checked cast. For now this is not possible as context</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// can actually be Tagged&lt;Smi&gt;(0).</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1TNode.html#aef7e09b0f9e153327c5c1eb4dd516e6e">TNode&lt;Context&gt;::UncheckedCast</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a50255ba534b8052d460e2792bb35749f">LoadFullTagged</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ref)));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">  385</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">MicrotaskQueueBuiltinsAssembler::SetCurrentContext</a>(</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keyword">auto</span> ref = <a class="code" href="classv8_1_1internal_1_1ExternalReference.html#af4f8bd08709c2b99f51c5dea884e63af">ExternalReference::Create</a>(kContextAddress, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">isolate</a>());</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a7741c7024e35c716faafeb49df79fc07">StoreFullTaggedNoWriteBarrier</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ref), context);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#adea29b76e16d33e03ebed97d18a29144">  391</a></span>&#160;<a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#adea29b76e16d33e03ebed97d18a29144">MicrotaskQueueBuiltinsAssembler::GetEnteredContextCount</a>() {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keyword">auto</span> ref = ExternalReference::handle_scope_implementer_address(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">isolate</a>());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> hsi = Load&lt;RawPtrT&gt;(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ref));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keyword">using</span> ContextStack = <a class="code" href="classv8_1_1internal_1_1DetachableVector.html">DetachableVector&lt;Context&gt;</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> size_offset =</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">HandleScopeImplementer::kEnteredContextsOffset</a> +</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                     ContextStack::kSizeOffset);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">return</span> Load&lt;IntPtrT&gt;(hsi, size_offset);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2f0b8c32e998dae030d392648c5cb079">  402</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2f0b8c32e998dae030d392648c5cb079">MicrotaskQueueBuiltinsAssembler::EnterContext</a>(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  CSA_DCHECK(<span class="keyword">this</span>, IsNativeContext(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keyword">auto</span> ref = ExternalReference::handle_scope_implementer_address(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">isolate</a>());</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> hsi = Load&lt;RawPtrT&gt;(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ref));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keyword">using</span> ContextStack = <a class="code" href="classv8_1_1internal_1_1DetachableVector.html">DetachableVector&lt;Context&gt;</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity_offset =</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">HandleScopeImplementer::kEnteredContextsOffset</a> +</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                     ContextStack::kCapacityOffset);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> size_offset =</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">HandleScopeImplementer::kEnteredContextsOffset</a> +</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                     ContextStack::kSizeOffset);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity = Load&lt;IntPtrT&gt;(hsi, capacity_offset);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = Load&lt;IntPtrT&gt;(hsi, size_offset);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a> if_append(<span class="keyword">this</span>), if_grow(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">Label::kDeferred</a>), done(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af6bca81dd22983166233dfe61d630c86">Branch</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ac22594b3cd1cf757f1f19f18609d2ae9">WordEqual</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, capacity), &amp;if_grow, &amp;if_append);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  BIND(&amp;if_append);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> data_offset =</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">HandleScopeImplementer::kEnteredContextsOffset</a> +</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                       ContextStack::kDataOffset);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> data = Load&lt;RawPtrT&gt;(hsi, data_offset);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a7741c7024e35c716faafeb49df79fc07">StoreFullTaggedNoWriteBarrier</a>(data, <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#afc3b4443234afca2fef5a597f0c4bd51">TimesSystemPointerSize</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>),</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                  <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_size = <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#aedf6c1a529f8bdb09035246dcafa6f2c">IntPtrAdd</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(1));</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">StoreNoWriteBarrier</a>(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), hsi, size_offset,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        new_size);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  BIND(&amp;if_grow);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;ExternalReference&gt;</a> <span class="keyword">function</span> =</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ExternalReference::call_enter_context_function());</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae6996ccca417bdc98dc45debc6071c1b">CallCFunction</a>(<span class="keyword">function</span>, <a class="code" href="classv8_1_1internal_1_1MachineType.html#aea718e82fd1e2c5ffaeef1cc6d699b0e">MachineType::Int32</a>(),</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                  std::make_pair(<a class="code" href="classv8_1_1internal_1_1MachineType.html#ad6506fbd408bfcf98bdb82c4df37c299">MachineType::Pointer</a>(), hsi),</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                  std::make_pair(<a class="code" href="classv8_1_1internal_1_1MachineType.html#ad6506fbd408bfcf98bdb82c4df37c299">MachineType::Pointer</a>(),</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                 <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ac1cab0a4625aa2e0352d229d547f0e50">BitcastTaggedToWord</a>(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>)));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  BIND(&amp;done);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">  451</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">MicrotaskQueueBuiltinsAssembler::RewindEnteredContext</a>(</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> saved_entered_context_count) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">auto</span> ref = ExternalReference::handle_scope_implementer_address(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">isolate</a>());</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> hsi = Load&lt;RawPtrT&gt;(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">ExternalConstant</a>(ref));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keyword">using</span> ContextStack = <a class="code" href="classv8_1_1internal_1_1DetachableVector.html">DetachableVector&lt;Context&gt;</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> size_offset =</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">HandleScopeImplementer::kEnteredContextsOffset</a> +</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                     ContextStack::kSizeOffset);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#a186f91782e6bd63105cf92242b870b34">DEBUG_BOOL</a>) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = Load&lt;IntPtrT&gt;(hsi, size_offset);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    CSA_CHECK(<span class="keyword">this</span>, <a class="code" href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a66eeba75666d87336c4b2f8bdf5a7ba1">IntPtrLessThan</a>(<a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">IntPtrConstant</a>(0), <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>));</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    CSA_CHECK(<span class="keyword">this</span>, <a class="code" href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a47bc491234bbb1c66a4a683163f6d989">IntPtrLessThanOrEqual</a>(saved_entered_context_count, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>));</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">StoreNoWriteBarrier</a>(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), hsi, size_offset,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                      saved_entered_context_count);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">  471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">MicrotaskQueueBuiltinsAssembler::RunAllPromiseHooks</a>(</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cc">PromiseHookType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Uint32T&gt;</a> promiseHookFlags = <a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#aee575916630cbf26addcc9b5fbb73fb6">PromiseHookFlags</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_JAVASCRIPT_PROMISE_HOOKS</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a> hook(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">Label::kDeferred</a>), done_hook(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af6bca81dd22983166233dfe61d630c86">Branch</a>(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#af2e32f28b3b7c75d5be667a7f713c555">NeedsAnyPromiseHooks</a>(promiseHookFlags), &amp;hook, &amp;done_hook);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  BIND(&amp;hook);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6">PromiseHookType::kBefore</a>:</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_JAVASCRIPT_PROMISE_HOOKS</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        RunContextPromiseHookBefore(context, <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(promise_or_capability),</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                    promiseHookFlags);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">RunPromiseHook</a>(Runtime::kPromiseHookBefore, context,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                       promise_or_capability, promiseHookFlags);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4">PromiseHookType::kAfter</a>:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_JAVASCRIPT_PROMISE_HOOKS</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        RunContextPromiseHookAfter(context, <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(promise_or_capability),</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                   promiseHookFlags);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">RunPromiseHook</a>(Runtime::kPromiseHookAfter, context,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                       promise_or_capability, promiseHookFlags);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_JAVASCRIPT_PROMISE_HOOKS</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done_hook);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  BIND(&amp;done_hook);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">  508</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">MicrotaskQueueBuiltinsAssembler::RunPromiseHook</a>(</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="classv8_1_1internal_1_1Runtime.html#abc83b23b198d9aa173abb13a25a7b670">Runtime::FunctionId</a> <span class="keywordtype">id</span>, <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> context,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise_or_capability,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Uint32T&gt;</a> promiseHookFlags) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">Label</a> hook(<span class="keyword">this</span>, <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">Label::kDeferred</a>), done_hook(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af6bca81dd22983166233dfe61d630c86">Branch</a>(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#acac1b1b21730d0323fd68f67e91d625c">IsIsolatePromiseHookEnabledOrDebugIsActiveOrHasAsyncEventDelegate</a>(</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      promiseHookFlags), &amp;hook, &amp;done_hook);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  BIND(&amp;hook);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// Get to the underlying JSPromise instance.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;HeapObject&gt;</a> promise = Select&lt;HeapObject&gt;(</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        IsPromiseCapability(promise_or_capability),</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        [=, <span class="keyword">this</span>] {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(<a class="code" href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">LoadObjectField</a>(promise_or_capability,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                      PromiseCapability::kPromiseOffset));</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        },</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        [=] { <span class="keywordflow">return</span> promise_or_capability; });</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a8a01c32bf239277c6063f52ad3f80a21">GotoIf</a>(IsUndefined(promise), &amp;done_hook);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab4aa43570c8a9ae0c9618dfcf590a662">CallRuntime</a>(<span class="keywordtype">id</span>, context, promise);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">Goto</a>(&amp;done_hook);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  BIND(&amp;done_hook);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a7919505496554e679853c0517e710bb7">  533</a></span>&#160;<a class="code" href="namespacev8_1_1internal.html#aa08f0baec77802dea6f34f2cad6a3409">TF_BUILTIN</a>(EnqueueMicrotask, <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html">MicrotaskQueueBuiltinsAssembler</a>) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keyword">auto</span> microtask = Parameter&lt;Microtask&gt;(Descriptor::kMicrotask);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keyword">auto</span> context = Parameter&lt;Context&gt;(Descriptor::kContext);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;NativeContext&gt;</a> <a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a> = LoadNativeContext(context);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_queue = GetMicrotaskQueue(<a class="code" href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">native_context</a>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Do not store the microtask if MicrotaskQueue is not available, that may</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// happen when the context shutdown.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Label.html">Label</a> if_shutdown(<span class="keyword">this</span>, Label::kDeferred);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  GotoIf(WordEqual(microtask_queue, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(0)), &amp;if_shutdown);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> ring_buffer = GetMicrotaskRingBuffer(microtask_queue);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity = GetMicrotaskQueueCapacity(microtask_queue);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = GetMicrotaskQueueSize(microtask_queue);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> start = GetMicrotaskQueueStart(microtask_queue);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Label.html">Label</a> if_grow(<span class="keyword">this</span>, Label::kDeferred);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  GotoIf(IntPtrEqual(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, capacity), &amp;if_grow);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// |microtask_queue| has an unused slot to store |microtask|.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    StoreNoWriteBarrier(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), ring_buffer,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        CalculateRingBufferOffset(capacity, start, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>),</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        BitcastTaggedToWord(microtask));</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    StoreNoWriteBarrier(<a class="code" href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">MachineType::PointerRepresentation</a>(), microtask_queue,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(<a class="code" href="classv8_1_1internal_1_1MicrotaskQueue.html#a63f461f64c753251175926ec789e64c0">MicrotaskQueue::kSizeOffset</a>),</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                        <a class="code" href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a660a476dedf770682c81b591e345aab6">IntPtrAdd</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(1)));</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    Return(<a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// |microtask_queue| has no space to store |microtask|. Fall back to C++</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// implementation to grow the buffer.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  BIND(&amp;if_grow);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;ExternalReference&gt;</a> isolate_constant =</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        ExternalConstant(<a class="code" href="classv8_1_1internal_1_1ExternalReference.html#a63661ded158298264566073c3712fdeb">ExternalReference::isolate_address</a>());</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;ExternalReference&gt;</a> <span class="keyword">function</span> =</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        ExternalConstant(ExternalReference::call_enqueue_microtask_function());</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    CallCFunction(<span class="keyword">function</span>, <a class="code" href="classv8_1_1internal_1_1MachineType.html#a567d397b03e783edbbfbba00dcbe646f">MachineType::AnyTagged</a>(),</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                  std::make_pair(<a class="code" href="classv8_1_1internal_1_1MachineType.html#ad6506fbd408bfcf98bdb82c4df37c299">MachineType::Pointer</a>(), isolate_constant),</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                  std::make_pair(<a class="code" href="classv8_1_1internal_1_1MachineType.html#a0c678fa099e6bd799211b1ff14d18e92">MachineType::IntPtr</a>(), microtask_queue),</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                  std::make_pair(<a class="code" href="classv8_1_1internal_1_1MachineType.html#a567d397b03e783edbbfbba00dcbe646f">MachineType::AnyTagged</a>(), microtask));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    Return(<a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  Bind(&amp;if_shutdown);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  Return(<a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal.html#a41b901407d87c699c7c9955542f3943a">  582</a></span>&#160;<a class="code" href="namespacev8_1_1internal.html#aa08f0baec77802dea6f34f2cad6a3409">TF_BUILTIN</a>(RunMicrotasks, <a class="code" href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html">MicrotaskQueueBuiltinsAssembler</a>) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// Load the current context from the isolate.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Context&gt;</a> current_context = GetCurrentContext();</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">auto</span> microtask_queue =</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      UncheckedParameter&lt;RawPtrT&gt;(Descriptor::kMicrotaskQueue);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="classv8_1_1internal_1_1Label.html">Label</a> loop(<span class="keyword">this</span>), done(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  Goto(&amp;loop);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  BIND(&amp;loop);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = GetMicrotaskQueueSize(microtask_queue);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// Exit if the queue is empty.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  GotoIf(WordEqual(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(0)), &amp;done);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> ring_buffer = GetMicrotaskRingBuffer(microtask_queue);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> capacity = GetMicrotaskQueueCapacity(microtask_queue);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> start = GetMicrotaskQueueStart(microtask_queue);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> offset =</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      CalculateRingBufferOffset(capacity, start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(0));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;RawPtrT&gt;</a> microtask_pointer = Load&lt;RawPtrT&gt;(ring_buffer, offset);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;Microtask&gt;</a> microtask = <a class="code" href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a>(BitcastWordToTagged(microtask_pointer));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_size = IntPtrSub(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(1));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <a class="code" href="classv8_1_1internal_1_1TNode.html">TNode&lt;IntPtrT&gt;</a> new_start = WordAnd(<a class="code" href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a660a476dedf770682c81b591e345aab6">IntPtrAdd</a>(start, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(1)),</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                     IntPtrSub(capacity, <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">IntPtrConstant</a>(1)));</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Remove |microtask| from |ring_buffer| before running it, since its</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// invocation may add another microtask into |ring_buffer|.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  SetMicrotaskQueueSize(microtask_queue, new_size);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  SetMicrotaskQueueStart(microtask_queue, new_start);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  RunSingleMicrotask(current_context, microtask);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  IncrementFinishedMicrotaskCount(microtask_queue);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  Goto(&amp;loop);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  BIND(&amp;done);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// Reset the &quot;current microtask&quot; on the isolate.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    StoreRoot(RootIndex::kCurrentMicrotask, <a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    Return(<a class="code" href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">UndefinedConstant</a>());</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="undef-code-stub-assembler-macros_8inc.html">src/codegen/undef-code-stub-assembler-macros.inc</a>&quot;</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="aapi_8h_html"><div class="ttname"><a href="api_8h.html">api.h</a></div></div>
<div class="ttc" id="abuiltins-utils-gen_8h_html"><div class="ttname"><a href="builtins-utils-gen_8h.html">builtins-utils-gen.h</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html">v8::internal::CodeStubAssembler</a></div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8h_source.html#l00069">code-stub-assembler.h:71</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_a55c0dba588ac64780b7cb51f308c21c2"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#a55c0dba588ac64780b7cb51f308c21c2">v8::internal::CodeStubAssembler::TaggedIsNotSmi</a></div><div class="ttdeci">TNode&lt; BoolT &gt; TaggedIsNotSmi(TNode&lt; MaybeObject &gt; a)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l01353">code-stub-assembler.cc:1353</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_a7c0545175c8cfc7402114b8ca9070ff8"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#a7c0545175c8cfc7402114b8ca9070ff8">v8::internal::CodeStubAssembler::IsExecutionTerminating</a></div><div class="ttdeci">TNode&lt; BoolT &gt; IsExecutionTerminating()</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l07708">code-stub-assembler.cc:7708</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_a8132f506f4ebbee6c3a67449f21b3d82"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#a8132f506f4ebbee6c3a67449f21b3d82">v8::internal::CodeStubAssembler::LoadObjectField</a></div><div class="ttdeci">TNode&lt; T &gt; LoadObjectField(TNode&lt; HeapObject &gt; object, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8h_source.html#l01191">code-stub-assembler.h:1191</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_a9e0ee17e41fa94f83ef6e03943c10f08"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#a9e0ee17e41fa94f83ef6e03943c10f08">v8::internal::CodeStubAssembler::Call</a></div><div class="ttdeci">TNode&lt; JSAny &gt; Call(TNode&lt; Context &gt; context, TNode&lt; TCallable &gt; callable, ConvertReceiverMode mode, TNode&lt; JSAny &gt; receiver, TArgs... args)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler-inl_8h_source.html#l00023">code-stub-assembler-inl.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_a9ea7ea13f24ebec0e20de3a5e98a7daf"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#a9ea7ea13f24ebec0e20de3a5e98a7daf">v8::internal::CodeStubAssembler::SetContinuationPreservedEmbedderData</a></div><div class="ttdeci">void SetContinuationPreservedEmbedderData(TNode&lt; Object &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l07720">code-stub-assembler.cc:7720</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_aa1beb64388886b41be188c5e03b53536"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#aa1beb64388886b41be188c5e03b53536">v8::internal::CodeStubAssembler::LoadMapInstanceType</a></div><div class="ttdeci">TNode&lt; Uint16T &gt; LoadMapInstanceType(TNode&lt; Map &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l02423">code-stub-assembler.cc:2423</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_ab135e9c2e7bbd26096b2b8d92e79f718"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#ab135e9c2e7bbd26096b2b8d92e79f718">v8::internal::CodeStubAssembler::LoadNativeContext</a></div><div class="ttdeci">TNode&lt; NativeContext &gt; LoadNativeContext(TNode&lt; Context &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l03542">code-stub-assembler.cc:3542</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_acac1b1b21730d0323fd68f67e91d625c"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#acac1b1b21730d0323fd68f67e91d625c">v8::internal::CodeStubAssembler::IsIsolatePromiseHookEnabledOrDebugIsActiveOrHasAsyncEventDelegate</a></div><div class="ttdeci">TNode&lt; BoolT &gt; IsIsolatePromiseHookEnabledOrDebugIsActiveOrHasAsyncEventDelegate()</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8h_source.html#l04297">code-stub-assembler.h:4297</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_acdf36726dbd1197b5f1b0645cf1a636b"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#acdf36726dbd1197b5f1b0645cf1a636b">v8::internal::CodeStubAssembler::LoadMap</a></div><div class="ttdeci">TNode&lt; Map &gt; LoadMap(TNode&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l02211">code-stub-assembler.cc:2211</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_aee575916630cbf26addcc9b5fbb73fb6"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#aee575916630cbf26addcc9b5fbb73fb6">v8::internal::CodeStubAssembler::PromiseHookFlags</a></div><div class="ttdeci">TNode&lt; Uint32T &gt; PromiseHookFlags()</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l17822">code-stub-assembler.cc:17822</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_af1116461187a85e09e9aaae4a08409a2"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#af1116461187a85e09e9aaae4a08409a2">v8::internal::CodeStubAssembler::LoadExternalPointerFromObject</a></div><div class="ttdeci">TNode&lt; RawPtrT &gt; LoadExternalPointerFromObject(TNode&lt; HeapObject &gt; object, int offset, ExternalPointerTagRange tag_range)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8h_source.html#l00953">code-stub-assembler.h:953</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_af2e32f28b3b7c75d5be667a7f713c555"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#af2e32f28b3b7c75d5be667a7f713c555">v8::internal::CodeStubAssembler::NeedsAnyPromiseHooks</a></div><div class="ttdeci">TNode&lt; BoolT &gt; NeedsAnyPromiseHooks()</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8h_source.html#l04303">code-stub-assembler.h:4303</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeStubAssembler_html_afc3b4443234afca2fef5a597f0c4bd51"><div class="ttname"><a href="classv8_1_1internal_1_1CodeStubAssembler.html#afc3b4443234afca2fef5a597f0c4bd51">v8::internal::CodeStubAssembler::TimesSystemPointerSize</a></div><div class="ttdeci">TNode&lt; WordT &gt; TimesSystemPointerSize(TNode&lt; WordT &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="code-stub-assembler_8cc_source.html#l07485">code-stub-assembler.cc:7485</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DetachableVector_html"><div class="ttname"><a href="classv8_1_1internal_1_1DetachableVector.html">v8::internal::DetachableVector</a></div><div class="ttdef"><b>Definition:</b> <a href="detachable-vector_8h_source.html#l00049">detachable-vector.h:49</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalReference_html_a63661ded158298264566073c3712fdeb"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalReference.html#a63661ded158298264566073c3712fdeb">v8::internal::ExternalReference::isolate_address</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE ExternalReference isolate_address()</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l00282">external-reference.cc:282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalReference_html_af4f8bd08709c2b99f51c5dea884e63af"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalReference.html#af4f8bd08709c2b99f51c5dea884e63af">v8::internal::ExternalReference::Create</a></div><div class="ttdeci">static ExternalReference Create(const SCTableReference &amp;table_ref)</div><div class="ttdef"><b>Definition:</b> <a href="external-reference_8cc_source.html#l00420">external-reference.cc:420</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScopeImplementer_html_a597b1511ae14d3838b5e1237ac307dfd"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScopeImplementer.html#a597b1511ae14d3838b5e1237ac307dfd">v8::internal::HandleScopeImplementer::kEnteredContextsOffset</a></div><div class="ttdeci">static const size_t kEnteredContextsOffset</div><div class="ttdef"><b>Definition:</b> <a href="api_8h_source.html#l00390">api.h:390</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Label_html"><div class="ttname"><a href="classv8_1_1internal_1_1Label.html">v8::internal::Label</a></div><div class="ttdef"><b>Definition:</b> <a href="label_8h_source.html#l00019">label.h:19</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MachineType_html_a0c678fa099e6bd799211b1ff14d18e92"><div class="ttname"><a href="classv8_1_1internal_1_1MachineType.html#a0c678fa099e6bd799211b1ff14d18e92">v8::internal::MachineType::IntPtr</a></div><div class="ttdeci">constexpr static MachineType IntPtr()</div><div class="ttdef"><b>Definition:</b> <a href="machine-type_8h_source.html#l00176">machine-type.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MachineType_html_a567d397b03e783edbbfbba00dcbe646f"><div class="ttname"><a href="classv8_1_1internal_1_1MachineType.html#a567d397b03e783edbbfbba00dcbe646f">v8::internal::MachineType::AnyTagged</a></div><div class="ttdeci">constexpr static MachineType AnyTagged()</div><div class="ttdef"><b>Definition:</b> <a href="machine-type_8h_source.html#l00250">machine-type.h:250</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MachineType_html_aba018b7917005c2607051556a2f85ffe"><div class="ttname"><a href="classv8_1_1internal_1_1MachineType.html#aba018b7917005c2607051556a2f85ffe">v8::internal::MachineType::PointerRepresentation</a></div><div class="ttdeci">constexpr static MachineRepresentation PointerRepresentation()</div><div class="ttdef"><b>Definition:</b> <a href="machine-type_8h_source.html#l00169">machine-type.h:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MachineType_html_ad6506fbd408bfcf98bdb82c4df37c299"><div class="ttname"><a href="classv8_1_1internal_1_1MachineType.html#ad6506fbd408bfcf98bdb82c4df37c299">v8::internal::MachineType::Pointer</a></div><div class="ttdeci">constexpr static MachineType Pointer()</div><div class="ttdef"><b>Definition:</b> <a href="machine-type_8h_source.html#l00236">machine-type.h:236</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MachineType_html_aea718e82fd1e2c5ffaeef1cc6d699b0e"><div class="ttname"><a href="classv8_1_1internal_1_1MachineType.html#aea718e82fd1e2c5ffaeef1cc6d699b0e">v8::internal::MachineType::Int32</a></div><div class="ttdeci">constexpr static MachineType Int32()</div><div class="ttdef"><b>Definition:</b> <a href="machine-type_8h_source.html#l00192">machine-type.h:192</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html">v8::internal::MicrotaskQueueBuiltinsAssembler</a></div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00021">builtins-microtask-queue-gen.cc:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a02a324615e6a92a1bbd4dcd0c702bb68"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a02a324615e6a92a1bbd4dcd0c702bb68">v8::internal::MicrotaskQueueBuiltinsAssembler::RunPromiseHook</a></div><div class="ttdeci">void RunPromiseHook(Runtime::FunctionId id, TNode&lt; Context &gt; context, TNode&lt; HeapObject &gt; promise_or_capability, TNode&lt; Uint32T &gt; promiseHookFlags)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00508">builtins-microtask-queue-gen.cc:508</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a2f0b8c32e998dae030d392648c5cb079"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2f0b8c32e998dae030d392648c5cb079">v8::internal::MicrotaskQueueBuiltinsAssembler::EnterContext</a></div><div class="ttdeci">void EnterContext(TNode&lt; Context &gt; native_context)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00402">builtins-microtask-queue-gen.cc:402</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a2ffd4bf94463060a397fb17435d42f9c"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a2ffd4bf94463060a397fb17435d42f9c">v8::internal::MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueue</a></div><div class="ttdeci">TNode&lt; RawPtrT &gt; GetMicrotaskQueue(TNode&lt; Context &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00062">builtins-microtask-queue-gen.cc:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a4846655838f682a45449fffac1017d1d"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4846655838f682a45449fffac1017d1d">v8::internal::MicrotaskQueueBuiltinsAssembler::GetCurrentContext</a></div><div class="ttdeci">TNode&lt; Context &gt; GetCurrentContext()</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00378">builtins-microtask-queue-gen.cc:378</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a4da90292b19445faa2553b0634729f8e"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a4da90292b19445faa2553b0634729f8e">v8::internal::MicrotaskQueueBuiltinsAssembler::PrepareForContext</a></div><div class="ttdeci">void PrepareForContext(TNode&lt; Context &gt; microtask_context, Label *bailout)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00112">builtins-microtask-queue-gen.cc:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a5746eea6f6113a256e31abc14919d424"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a5746eea6f6113a256e31abc14919d424">v8::internal::MicrotaskQueueBuiltinsAssembler::GetMicrotaskRingBuffer</a></div><div class="ttdeci">TNode&lt; RawPtrT &gt; GetMicrotaskRingBuffer(TNode&lt; RawPtrT &gt; microtask_queue)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00070">builtins-microtask-queue-gen.cc:70</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a6f2b49e04904ffd0e3b07af62859a585"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a6f2b49e04904ffd0e3b07af62859a585">v8::internal::MicrotaskQueueBuiltinsAssembler::RewindEnteredContext</a></div><div class="ttdeci">void RewindEnteredContext(TNode&lt; IntPtrT &gt; saved_entered_context_count)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00451">builtins-microtask-queue-gen.cc:451</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a72ab6e4c705a6546da5e5d5e05460536"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a72ab6e4c705a6546da5e5d5e05460536">v8::internal::MicrotaskQueueBuiltinsAssembler::MicrotaskQueueBuiltinsAssembler</a></div><div class="ttdeci">MicrotaskQueueBuiltinsAssembler(compiler::CodeAssemblerState *state)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00023">builtins-microtask-queue-gen.cc:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a764b69cd40a9548884d56477977d365d"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a764b69cd40a9548884d56477977d365d">v8::internal::MicrotaskQueueBuiltinsAssembler::RunSingleMicrotask</a></div><div class="ttdeci">void RunSingleMicrotask(TNode&lt; Context &gt; current_context, TNode&lt; Microtask &gt; microtask)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00145">builtins-microtask-queue-gen.cc:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a7c6215225682c787e3842e1718e15106"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7c6215225682c787e3842e1718e15106">v8::internal::MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueCapacity</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; GetMicrotaskQueueCapacity(TNode&lt; RawPtrT &gt; microtask_queue)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00076">builtins-microtask-queue-gen.cc:76</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a7cf60844ebd99f7d2594eb8d0a278c54"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a7cf60844ebd99f7d2594eb8d0a278c54">v8::internal::MicrotaskQueueBuiltinsAssembler::IncrementFinishedMicrotaskCount</a></div><div class="ttdeci">void IncrementFinishedMicrotaskCount(TNode&lt; RawPtrT &gt; microtask_queue)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00367">builtins-microtask-queue-gen.cc:367</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a86a68f31116a626213a507100c6fccfa"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a86a68f31116a626213a507100c6fccfa">v8::internal::MicrotaskQueueBuiltinsAssembler::CalculateRingBufferOffset</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; CalculateRingBufferOffset(TNode&lt; IntPtrT &gt; capacity, TNode&lt; IntPtrT &gt; start, TNode&lt; IntPtrT &gt; index)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00106">builtins-microtask-queue-gen.cc:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_a94e41cd2b4cee4153b7db7e9e9cbb0d5"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#a94e41cd2b4cee4153b7db7e9e9cbb0d5">v8::internal::MicrotaskQueueBuiltinsAssembler::SetMicrotaskQueueSize</a></div><div class="ttdeci">void SetMicrotaskQueueSize(TNode&lt; RawPtrT &gt; microtask_queue, TNode&lt; IntPtrT &gt; new_size)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00088">builtins-microtask-queue-gen.cc:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_ac4c7a133c88da7f7f0db4a44951c175b"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ac4c7a133c88da7f7f0db4a44951c175b">v8::internal::MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueSize</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; GetMicrotaskQueueSize(TNode&lt; RawPtrT &gt; microtask_queue)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00082">builtins-microtask-queue-gen.cc:82</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_acbdd94449a2c7f65bda0754d2e028685"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#acbdd94449a2c7f65bda0754d2e028685">v8::internal::MicrotaskQueueBuiltinsAssembler::GetMicrotaskQueueStart</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; GetMicrotaskQueueStart(TNode&lt; RawPtrT &gt; microtask_queue)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00094">builtins-microtask-queue-gen.cc:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_ad0820458200f34e01b5182f513b6b5bc"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad0820458200f34e01b5182f513b6b5bc">v8::internal::MicrotaskQueueBuiltinsAssembler::SetMicrotaskQueueStart</a></div><div class="ttdeci">void SetMicrotaskQueueStart(TNode&lt; RawPtrT &gt; microtask_queue, TNode&lt; IntPtrT &gt; new_start)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00100">builtins-microtask-queue-gen.cc:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_ad81ce95598ff322005e9b5f8cd937b8b"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#ad81ce95598ff322005e9b5f8cd937b8b">v8::internal::MicrotaskQueueBuiltinsAssembler::SetCurrentContext</a></div><div class="ttdeci">void SetCurrentContext(TNode&lt; Context &gt; context)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00385">builtins-microtask-queue-gen.cc:385</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_adea29b76e16d33e03ebed97d18a29144"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#adea29b76e16d33e03ebed97d18a29144">v8::internal::MicrotaskQueueBuiltinsAssembler::GetEnteredContextCount</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; GetEnteredContextCount()</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00391">builtins-microtask-queue-gen.cc:391</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler_html_af83aa69f277e065876300d6ecbfe1267"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueueBuiltinsAssembler.html#af83aa69f277e065876300d6ecbfe1267">v8::internal::MicrotaskQueueBuiltinsAssembler::RunAllPromiseHooks</a></div><div class="ttdeci">void RunAllPromiseHooks(PromiseHookType type, TNode&lt; Context &gt; context, TNode&lt; HeapObject &gt; promise_or_capability)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-microtask-queue-gen_8cc_source.html#l00471">builtins-microtask-queue-gen.cc:471</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueue_html_a5bf8a7c6832ef7c777b39ab4e2f78ce9"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueue.html#a5bf8a7c6832ef7c777b39ab4e2f78ce9">v8::internal::MicrotaskQueue::kRingBufferOffset</a></div><div class="ttdeci">static const size_t kRingBufferOffset</div><div class="ttdef"><b>Definition:</b> <a href="microtask-queue_8h_source.html#l00110">microtask-queue.h:110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueue_html_a63f461f64c753251175926ec789e64c0"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueue.html#a63f461f64c753251175926ec789e64c0">v8::internal::MicrotaskQueue::kSizeOffset</a></div><div class="ttdeci">static const size_t kSizeOffset</div><div class="ttdef"><b>Definition:</b> <a href="microtask-queue_8h_source.html#l00112">microtask-queue.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueue_html_a8ff1a71729da40796fd6032be51e5c87"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueue.html#a8ff1a71729da40796fd6032be51e5c87">v8::internal::MicrotaskQueue::kCapacityOffset</a></div><div class="ttdeci">static const size_t kCapacityOffset</div><div class="ttdef"><b>Definition:</b> <a href="microtask-queue_8h_source.html#l00111">microtask-queue.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueue_html_aa28d21c02a3a37061f02527e86ef46a6"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueue.html#aa28d21c02a3a37061f02527e86ef46a6">v8::internal::MicrotaskQueue::kFinishedMicrotaskCountOffset</a></div><div class="ttdeci">static const size_t kFinishedMicrotaskCountOffset</div><div class="ttdef"><b>Definition:</b> <a href="microtask-queue_8h_source.html#l00114">microtask-queue.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MicrotaskQueue_html_af2873ba916dfe4147898ff7d37e07683"><div class="ttname"><a href="classv8_1_1internal_1_1MicrotaskQueue.html#af2873ba916dfe4147898ff7d37e07683">v8::internal::MicrotaskQueue::kStartOffset</a></div><div class="ttdeci">static const size_t kStartOffset</div><div class="ttdef"><b>Definition:</b> <a href="microtask-queue_8h_source.html#l00113">microtask-queue.h:113</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Object_html"><div class="ttname"><a href="classv8_1_1internal_1_1Object.html">v8::internal::Object</a></div><div class="ttdef"><b>Definition:</b> <a href="objects_8h_source.html#l00129">objects.h:129</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Runtime_html_abc83b23b198d9aa173abb13a25a7b670"><div class="ttname"><a href="classv8_1_1internal_1_1Runtime.html#abc83b23b198d9aa173abb13a25a7b670">v8::internal::Runtime::FunctionId</a></div><div class="ttdeci">FunctionId</div><div class="ttdef"><b>Definition:</b> <a href="runtime_8h_source.html#l00915">runtime.h:915</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TNode_html"><div class="ttname"><a href="classv8_1_1internal_1_1TNode.html">v8::internal::TNode</a></div><div class="ttdef"><b>Definition:</b> <a href="tnode_8h_source.html#l00391">tnode.h:391</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TNode_html_aef7e09b0f9e153327c5c1eb4dd516e6e"><div class="ttname"><a href="classv8_1_1internal_1_1TNode.html#aef7e09b0f9e153327c5c1eb4dd516e6e">v8::internal::TNode::UncheckedCast</a></div><div class="ttdeci">static TNode UncheckedCast(compiler::Node *node)</div><div class="ttdef"><b>Definition:</b> <a href="tnode_8h_source.html#l00413">tnode.h:413</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel_html"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html">v8::internal::compiler::CodeAssemblerLabel</a></div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01754">code-assembler.h:1754</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel_html_a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerLabel.html#a6e335095f60e3a1a59fca4e47527eb93aa9252d9400c909f6793ac645ed9491d0">v8::internal::compiler::CodeAssemblerLabel::kDeferred</a></div><div class="ttdeci">@ kDeferred</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01756">code-assembler.h:1756</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssemblerState_html"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssemblerState.html">v8::internal::compiler::CodeAssemblerState</a></div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01877">code-assembler.h:1877</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a24b1bfe286ec10b56edc3a8bca1f939f"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a24b1bfe286ec10b56edc3a8bca1f939f">v8::internal::compiler::CodeAssembler::IntPtrConstant</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; IntPtrConstant(intptr_t value)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l00313">code-assembler.cc:313</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a4d458686853d53d8773487bb2cc36c61"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a4d458686853d53d8773487bb2cc36c61">v8::internal::compiler::CodeAssembler::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01669">code-assembler.cc:1669</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a50255ba534b8052d460e2792bb35749f"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a50255ba534b8052d460e2792bb35749f">v8::internal::compiler::CodeAssembler::LoadFullTagged</a></div><div class="ttdeci">TNode&lt; Object &gt; LoadFullTagged(Node *base)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l00862">code-assembler.cc:862</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a6360863dbbe4b8dc691848d6857ffdc8"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a6360863dbbe4b8dc691848d6857ffdc8">v8::internal::compiler::CodeAssembler::WordAnd</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; WordAnd(TNode&lt; IntPtrT &gt; left, TNode&lt; IntPtrT &gt; right)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01097">code-assembler.h:1097</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a69e5efc92edbc414a2841fd6d35a5219"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a69e5efc92edbc414a2841fd6d35a5219">v8::internal::compiler::CodeAssembler::state</a></div><div class="ttdeci">CodeAssemblerState * state()</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01581">code-assembler.h:1581</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a7741c7024e35c716faafeb49df79fc07"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a7741c7024e35c716faafeb49df79fc07">v8::internal::compiler::CodeAssembler::StoreFullTaggedNoWriteBarrier</a></div><div class="ttdeci">void StoreFullTaggedNoWriteBarrier(TNode&lt; RawPtrT &gt; base, TNode&lt; Object &gt; tagged_value)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01061">code-assembler.cc:1061</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a8a01c32bf239277c6063f52ad3f80a21"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a8a01c32bf239277c6063f52ad3f80a21">v8::internal::compiler::CodeAssembler::GotoIf</a></div><div class="ttdeci">void GotoIf(TNode&lt; IntegralT &gt; condition, Label *true_label, GotoHint goto_hint=GotoHint::kNone)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01561">code-assembler.cc:1561</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_a9d1ac278e0b5bb21cd0787fc0ff3b34d"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#a9d1ac278e0b5bb21cd0787fc0ff3b34d">v8::internal::compiler::CodeAssembler::Switch</a></div><div class="ttdeci">void Switch(Node *index, Label *default_label, const int32_t *case_values, Label **case_labels, size_t case_count)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01647">code-assembler.cc:1647</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ab100334005245e62990aff6d03b73642"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab100334005245e62990aff6d03b73642">v8::internal::compiler::CodeAssembler::Unreachable</a></div><div class="ttdeci">void Unreachable()</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l00659">code-assembler.cc:659</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ab4aa43570c8a9ae0c9618dfcf590a662"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ab4aa43570c8a9ae0c9618dfcf590a662">v8::internal::compiler::CodeAssembler::CallRuntime</a></div><div class="ttdeci">TNode&lt; T &gt; CallRuntime(Runtime::FunctionId function, TNode&lt; Object &gt; context, TArgs... args)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01308">code-assembler.h:1308</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_abcdff5a83d05bdd19d62feaeefdd5709"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abcdff5a83d05bdd19d62feaeefdd5709">v8::internal::compiler::CodeAssembler::ExternalConstant</a></div><div class="ttdeci">TNode&lt; ExternalReference &gt; ExternalConstant(ExternalReference address)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l00397">code-assembler.cc:397</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_abd5a129506a9f5a0272c4f79db72f384"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#abd5a129506a9f5a0272c4f79db72f384">v8::internal::compiler::CodeAssembler::StoreRoot</a></div><div class="ttdeci">void StoreRoot(RootIndex root_index, TNode&lt; Object &gt; value)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01157">code-assembler.cc:1157</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ac1cab0a4625aa2e0352d229d547f0e50"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ac1cab0a4625aa2e0352d229d547f0e50">v8::internal::compiler::CodeAssembler::BitcastTaggedToWord</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; BitcastTaggedToWord(TNode&lt; Smi &gt; node)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01270">code-assembler.h:1270</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ac22594b3cd1cf757f1f19f18609d2ae9"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ac22594b3cd1cf757f1f19f18609d2ae9">v8::internal::compiler::CodeAssembler::WordEqual</a></div><div class="ttdeci">TNode&lt; BoolT &gt; WordEqual(TNode&lt; WordT &gt; left, TNode&lt; WordT &gt; right)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ace2184f798a5689b1a8e3fc20a1da7a3"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ace2184f798a5689b1a8e3fc20a1da7a3">v8::internal::compiler::CodeAssembler::CallBuiltin</a></div><div class="ttdeci">TNode&lt; T &gt; CallBuiltin(Builtin id, TNode&lt; Object &gt; context, TArgs... args)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01347">code-assembler.h:1347</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ae1fa6d3d694b68f55e037aaffc918adb"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae1fa6d3d694b68f55e037aaffc918adb">v8::internal::compiler::CodeAssembler::Goto</a></div><div class="ttdeci">void Goto(Label *label)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01556">code-assembler.cc:1556</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_ae6996ccca417bdc98dc45debc6071c1b"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#ae6996ccca417bdc98dc45debc6071c1b">v8::internal::compiler::CodeAssembler::CallCFunction</a></div><div class="ttdeci">Node * CallCFunction(Node *function, std::optional&lt; MachineType &gt; return_type, CArgs... cargs)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01543">code-assembler.h:1543</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_aedf6c1a529f8bdb09035246dcafa6f2c"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#aedf6c1a529f8bdb09035246dcafa6f2c">v8::internal::compiler::CodeAssembler::IntPtrAdd</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; IntPtrAdd(TNode&lt; IntPtrT &gt; left, TNode&lt; IntPtrT &gt; right)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01206">code-assembler.h:1206</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_af609974610e1e5d17933cbea7b7406a0"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af609974610e1e5d17933cbea7b7406a0">v8::internal::compiler::CodeAssembler::IntPtrSub</a></div><div class="ttdeci">TNode&lt; IntPtrT &gt; IntPtrSub(TNode&lt; IntPtrT &gt; left, TNode&lt; IntPtrT &gt; right)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01210">code-assembler.h:1210</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_af6bca81dd22983166233dfe61d630c86"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af6bca81dd22983166233dfe61d630c86">v8::internal::compiler::CodeAssembler::Branch</a></div><div class="ttdeci">void Branch(TNode&lt; IntegralT &gt; condition, Label *true_label, Label *false_label, BranchHint branch_hint=BranchHint::kNone)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01587">code-assembler.cc:1587</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1CodeAssembler_html_af7b8ce0236c4ed3e289c6aa041049517"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1CodeAssembler.html#af7b8ce0236c4ed3e289c6aa041049517">v8::internal::compiler::CodeAssembler::StoreNoWriteBarrier</a></div><div class="ttdeci">void StoreNoWriteBarrier(MachineRepresentation rep, Node *base, Node *value)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8cc_source.html#l01032">code-assembler.cc:1032</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler_html"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1ScopedExceptionHandler.html">v8::internal::compiler::ScopedExceptionHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l01936">code-assembler.h:1936</a></div></div>
<div class="ttc" id="acode-assembler_8h_html_ae136073caafb9c8accbe10a81e4d1c64"><div class="ttname"><a href="code-assembler_8h.html#ae136073caafb9c8accbe10a81e4d1c64">CAST</a></div><div class="ttdeci">#define CAST(x)</div><div class="ttdef"><b>Definition:</b> <a href="code-assembler_8h_source.html#l00569">code-assembler.h:569</a></div></div>
<div class="ttc" id="acode-stub-assembler-inl_8h_html"><div class="ttname"><a href="code-stub-assembler-inl_8h.html">code-stub-assembler-inl.h</a></div></div>
<div class="ttc" id="adefine-code-stub-assembler-macros_8inc_html"><div class="ttname"><a href="define-code-stub-assembler-macros_8inc.html">define-code-stub-assembler-macros.inc</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a186f91782e6bd63105cf92242b870b34"><div class="ttname"><a href="flag-definitions_8h.html#a186f91782e6bd63105cf92242b870b34">DEBUG_BOOL</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data DEBUG_BOOL</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l01478">flag-definitions.h:1478</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a3df0b28b666e942ffb9d7d04acdb9715"><div class="ttname"><a href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space size(in Mbytes)&quot;)     DEFINE_INT(random_gc_interval</div></div>
<div class="ttc" id="ajs-weak-refs_8h_html"><div class="ttname"><a href="js-weak-refs_8h.html">js-weak-refs.h</a></div></div>
<div class="ttc" id="amicrotask-inl_8h_html"><div class="ttname"><a href="microtask-inl_8h.html">microtask-inl.h</a></div></div>
<div class="ttc" id="amicrotask-queue_8h_html"><div class="ttname"><a href="microtask-queue_8h.html">microtask-queue.h</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_ab0275d47f9778d486eafe88b18c5851d"><div class="ttname"><a href="namespaceunibrow.html#ab0275d47f9778d486eafe88b18c5851d">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="unicode_8cc_source.html#l00042">unicode.cc:42</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler_html_a47bc491234bbb1c66a4a683163f6d989"><div class="ttname"><a href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a47bc491234bbb1c66a4a683163f6d989">v8::internal::TorqueRuntimeMacroShims::CodeStubAssembler::IntPtrLessThanOrEqual</a></div><div class="ttdeci">bool IntPtrLessThanOrEqual(intptr_t a, intptr_t b)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-macro-shims_8h_source.html#l00028">runtime-macro-shims.h:28</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler_html_a660a476dedf770682c81b591e345aab6"><div class="ttname"><a href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a660a476dedf770682c81b591e345aab6">v8::internal::TorqueRuntimeMacroShims::CodeStubAssembler::IntPtrAdd</a></div><div class="ttdeci">intptr_t IntPtrAdd(intptr_t a, intptr_t b)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-macro-shims_8h_source.html#l00025">runtime-macro-shims.h:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler_html_a66eeba75666d87336c4b2f8bdf5a7ba1"><div class="ttname"><a href="namespacev8_1_1internal_1_1TorqueRuntimeMacroShims_1_1CodeStubAssembler.html#a66eeba75666d87336c4b2f8bdf5a7ba1">v8::internal::TorqueRuntimeMacroShims::CodeStubAssembler::IntPtrLessThan</a></div><div class="ttdeci">bool IntPtrLessThan(intptr_t a, intptr_t b)</div><div class="ttdef"><b>Definition:</b> <a href="runtime-macro-shims_8h_source.html#l00027">runtime-macro-shims.h:27</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils_html_a315055e92c176ba783a671462cc6a8b2"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler_1_1js__node__wrapper__utils.html#a315055e92c176ba783a671462cc6a8b2">v8::internal::compiler::js_node_wrapper_utils::UndefinedConstant</a></div><div class="ttdeci">TNode&lt; Oddball &gt; UndefinedConstant(JSGraph *jsgraph)</div><div class="ttdef"><b>Definition:</b> <a href="js-operator_8cc_source.html#l00046">js-operator.cc:46</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a364c1534fdf1073625e22f3283e46994"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a364c1534fdf1073625e22f3283e46994">v8::internal::compiler::IntPtrConstant</a></div><div class="ttdeci">static const Operator * IntPtrConstant(CommonOperatorBuilder *common, intptr_t value)</div><div class="ttdef"><b>Definition:</b> <a href="basic-block-instrumentor_8cc_source.html#l00044">basic-block-instrumentor.cc:44</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="heap-snapshot-generator_8cc_source.html#l01698">heap-snapshot-generator.cc:1698</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00453">wasm-objects-inl.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa08f0baec77802dea6f34f2cad6a3409"><div class="ttname"><a href="namespacev8_1_1internal.html#aa08f0baec77802dea6f34f2cad6a3409">v8::internal::TF_BUILTIN</a></div><div class="ttdeci">TF_BUILTIN(ArrayPrototypePop, CodeStubAssembler)</div><div class="ttdef"><b>Definition:</b> <a href="builtins-array-gen_8cc_source.html#l00270">builtins-array-gen.cc:270</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa5178998e7ae493acf744bc92b1fbdbcadb107393d8231b09429602079bba05ab"><div class="ttname"><a href="namespacev8_1_1internal.html#aa5178998e7ae493acf744bc92b1fbdbcadb107393d8231b09429602079bba05ab">v8::internal::kNativeContextMicrotaskQueueTag</a></div><div class="ttdeci">@ kNativeContextMicrotaskQueueTag</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00572">v8-internal.h:572</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afe601ad9b4b4c61d8a6a700e7db12c2a"><div class="ttname"><a href="namespacev8_1_1internal.html#afe601ad9b4b4c61d8a6a700e7db12c2a">v8::internal::native_context</a></div><div class="ttdeci">!IsContextMap !IsContextMap native_context</div><div class="ttdef"><b>Definition:</b> <a href="map-inl_8h_source.html#l00896">map-inl.h:896</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="anamespacev8_html_afe9d9e16c02074ac8482a8f09e19d5cc"><div class="ttname"><a href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cc">v8::PromiseHookType</a></div><div class="ttdeci">PromiseHookType</div><div class="ttdoc">PromiseHook with type kInit is called when a new promise is created.</div><div class="ttdef"><b>Definition:</b> <a href="v8-promise_8h_source.html#l00141">v8-promise.h:141</a></div></div>
<div class="ttc" id="anamespacev8_html_afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6"><div class="ttname"><a href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5cca4e9eada02e7312ba2311abb8453451c6">v8::PromiseHookType::kBefore</a></div><div class="ttdeci">@ kBefore</div></div>
<div class="ttc" id="anamespacev8_html_afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4"><div class="ttname"><a href="namespacev8.html#afe9d9e16c02074ac8482a8f09e19d5ccac8c795f4a70925da9b965f3fd2c5a5a4">v8::PromiseHookType::kAfter</a></div><div class="ttdeci">@ kAfter</div></div>
<div class="ttc" id="apromise_8h_html"><div class="ttname"><a href="promise_8h.html">promise.h</a></div></div>
<div class="ttc" id="asmi-inl_8h_html"><div class="ttname"><a href="smi-inl_8h.html">smi-inl.h</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ac55fdd6aa61539c49b1b1f5d38a0ed73"><div class="ttname"><a href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a></div><div class="ttdeci">#define arraysize(array)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00067">macros.h:67</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1count_html"><div class="ttname"><a href="structv8_1_1internal_1_1count.html">v8::internal::count</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-fast-api-calls_8h_source.html#l00511">v8-fast-api-calls.h:511</a></div></div>
<div class="ttc" id="aundef-code-stub-assembler-macros_8inc_html"><div class="ttname"><a href="undef-code-stub-assembler-macros_8inc.html">undef-code-stub-assembler-macros.inc</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_7f13f49e0ad4d2bfc08d4089289b14d0.html">builtins</a></li><li class="navelem"><a class="el" href="builtins-microtask-queue-gen_8cc.html">builtins-microtask-queue-gen.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 15:50:53 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
