<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/bigint/tostring.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tostring_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tostring.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tostring_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2021 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bigint-internal_8h.html">src/bigint/bigint-internal.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="digit-arithmetic_8h.html">src/bigint/digit-arithmetic.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="div-helpers_8h.html">src/bigint/div-helpers.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">src/bigint/util.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vector-arithmetic_8h.html">src/bigint/vector-arithmetic.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">namespace </span>bigint {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html">   17</a></span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// Lookup table for the maximum number of bits required per character of a</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// base-N string representation of a number. To increase accuracy, the array</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// value is the actual value multiplied by 32. To generate this table:</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// for (var i = 0; i &lt;= 36; i++) { print(Math.ceil(Math.log2(i) * 32) + &quot;,&quot;); }</span></div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">   23</a></span>&#160;constexpr uint8_t <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">kMaxBitsPerChar</a>[] = {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    0,   0,   32,  51,  64,  75,  83,  90,  96,  <span class="comment">// 0..8</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    102, 107, 111, 115, 119, 122, 126, 128,      <span class="comment">// 9..16</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    131, 134, 136, 139, 141, 143, 145, 147,      <span class="comment">// 17..24</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    149, 151, 153, 154, 156, 158, 159, 160,      <span class="comment">// 25..32</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    162, 163, 165, 166,                          <span class="comment">// 33..36</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;};</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8d7e229040026e0fc0f3b277ed62d01a">   31</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8d7e229040026e0fc0f3b277ed62d01a">kBitsPerCharTableShift</a> = 5;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">   32</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">kBitsPerCharTableMultiplier</a> = 1u &lt;&lt; <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8d7e229040026e0fc0f3b277ed62d01a">kBitsPerCharTableShift</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">   34</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[] = <span class="stringliteral">&quot;0123456789abcdefghijklmnopqrstuvwxyz&quot;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Raises {base} to the power of {exponent}. Does not check for overflow.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8bf133c1da0a744c6d95b6e89240a12f">   37</a></span>&#160;<a class="code" href="classuintptr__t.html">digit_t</a> <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8bf133c1da0a744c6d95b6e89240a12f">digit_pow</a>(<a class="code" href="classuintptr__t.html">digit_t</a> base, <a class="code" href="classuintptr__t.html">digit_t</a> exponent) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classuintptr__t.html">digit_t</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = 1ull;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">while</span> (exponent &gt; 0) {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">if</span> (exponent &amp; 1) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> *= base;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    exponent &gt;&gt;= 1;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    base *= base;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// Compile-time version of the above.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8ef791f1d978c7e973bf9d0836c5010a">   50</a></span>&#160;constexpr <a class="code" href="classuintptr__t.html">digit_t</a> <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8ef791f1d978c7e973bf9d0836c5010a">digit_pow_rec</a>(<a class="code" href="classuintptr__t.html">digit_t</a> base, <a class="code" href="classuintptr__t.html">digit_t</a> exponent) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">return</span> exponent == 1 ? base : base * <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8ef791f1d978c7e973bf9d0836c5010a">digit_pow_rec</a>(base, exponent - 1);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// A variant of ToStringFormatter::BasecaseLast, specialized for a radix</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// known at compile-time.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> radix&gt;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a6e396aea637425e4f073027ff41107d8">   57</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a6e396aea637425e4f073027ff41107d8">BasecaseFixedLast</a>(<a class="code" href="classuintptr__t.html">digit_t</a> chunk, <span class="keywordtype">char</span>* out) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">while</span> (chunk != 0) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(*(out - 1) == <a class="code" href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">kStringZapValue</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (radix &lt;= 10) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      *(--out) = <span class="charliteral">&#39;0&#39;</span> + (chunk % radix);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      *(--out) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[chunk % radix];</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    chunk /= radix;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// By making {radix} a compile-time constant and computing {chunk_divisor}</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// as another compile-time constant from it, we allow the compiler to emit</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// an optimized instruction sequence based on multiplications with &quot;magic&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// numbers (modular multiplicative inverses) instead of actual divisions.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// The price we pay is having to work on half digits; the technique doesn&#39;t</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// work with twodigit_t-by-digit_t divisions.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// Includes an equivalent of ToStringFormatter::BasecaseMiddle, accordingly</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// specialized for a radix known at compile time.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">template</span> &lt;digit_t radix&gt;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#ad8899c1a905210d3c2cccdce5db6e43b">   79</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#ad8899c1a905210d3c2cccdce5db6e43b">DivideByMagic</a>(<a class="code" href="classv8_1_1bigint_1_1RWDigits.html">RWDigits</a> rest, <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> input, <span class="keywordtype">char</span>* output) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  constexpr uint8_t max_bits_per_char = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">kMaxBitsPerChar</a>[radix];</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  constexpr <span class="keywordtype">int</span> chunk_chars =</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">kHalfDigitBits</a> * <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">kBitsPerCharTableMultiplier</a> / max_bits_per_char;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  constexpr <a class="code" href="classuintptr__t.html">digit_t</a> chunk_divisor = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8ef791f1d978c7e973bf9d0836c5010a">digit_pow_rec</a>(radix, chunk_chars);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classuintptr__t.html">digit_t</a> remainder = 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = input.<a class="code" href="classv8_1_1bigint_1_1Digits.html#acb996e60d50dcd932cb15fc4131cfadb">len</a>() - 1; <a class="code" href="namespacev8_1_1internal.html">i</a> &gt;= 0; <a class="code" href="namespacev8_1_1internal.html">i</a>--) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> d = input[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> upper = (remainder &lt;&lt; <a class="code" href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">kHalfDigitBits</a>) | (d &gt;&gt; <a class="code" href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">kHalfDigitBits</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> u_result = upper / chunk_divisor;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    remainder = upper % chunk_divisor;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> lower = (remainder &lt;&lt; <a class="code" href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">kHalfDigitBits</a>) | (d &amp; <a class="code" href="namespacev8_1_1bigint.html#a67f11b3e9e9c3b3101a9edacaebc8262">kHalfDigitMask</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> l_result = lower / chunk_divisor;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    remainder = lower % chunk_divisor;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    rest[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>] = (u_result &lt;&lt; <a class="code" href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">kHalfDigitBits</a>) | l_result;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// {remainder} is now the current chunk to be written out.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; chunk_chars; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(*(output - 1) == <a class="code" href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">kStringZapValue</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (radix &lt;= 10) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      *(--output) = <span class="charliteral">&#39;0&#39;</span> + (remainder % radix);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      *(--output) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[remainder % radix];</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    remainder /= radix;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(remainder == 0);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">class </span>RecursionLevel;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// The classic algorithm must check for interrupt requests if no faster</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// algorithm is available.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#if V8_ADVANCED_BIGINT_ALGORITHMS</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#define MAYBE_INTERRUPT(code) ((void)0)</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="tostring_8cc.html#a3fa209130b4fef8aa381222ce2f69412">  116</a></span>&#160;<span class="preprocessor">#define MAYBE_INTERRUPT(code) code</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html">  119</a></span>&#160;<span class="keyword">class </span><a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html">ToStringFormatter</a> {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ad85b332f3156c92b48e950a2bbb3dae0">  121</a></span>&#160;  <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ad85b332f3156c92b48e950a2bbb3dae0">ToStringFormatter</a>(<a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, <span class="keywordtype">int</span> radix, <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>, <span class="keywordtype">char</span>* out,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    uint32_t chars_available, <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>* processor)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      : digits_(<a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>),</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        radix_(radix),</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        sign_(<a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>),</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        out_start_(out),</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        out_end_(out + chars_available),</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        out_(out_end_),</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        processor_(processor) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    digits_.Normalize();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(chars_available &gt;= <a class="code" href="namespacev8_1_1bigint.html#a066cfb8ab735b5197b71ee354e64a57a">ToStringResultLength</a>(digits_, radix_, sign_));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordtype">void</span> Start();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">int</span> Finish();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1627adf858230af29d7c14f0040e21e1">  137</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1627adf858230af29d7c14f0040e21e1">Classic</a>() {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (digits_.len() == 0) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      *(--out_) = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (digits_.len() == 1) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      out_ = BasecaseLast(digits_[0], out_);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// {rest} holds the part of the BigInt that we haven&#39;t looked at yet.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// Not to be confused with &quot;remainder&quot;!</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classv8_1_1bigint_1_1ScratchDigits.html">ScratchDigits</a> rest(digits_.len());</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// In the first round, divide the input, allocating a new BigInt for</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// the result == rest; from then on divide the rest in-place.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> dividend = digits_;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (radix_ == 10) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment">// Faster but costs binary size, so we optimize the most common case.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        out_ = DivideByMagic&lt;10&gt;(rest, dividend, out_);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="tostring_8cc.html#a3fa209130b4fef8aa381222ce2f69412">MAYBE_INTERRUPT</a>(processor_-&gt;AddWorkEstimate(rest.<a class="code" href="classv8_1_1bigint_1_1Digits.html#acb996e60d50dcd932cb15fc4131cfadb">len</a>() * 2));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="classuintptr__t.html">digit_t</a> chunk;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        processor_-&gt;DivideSingle(rest, &amp;chunk, dividend, chunk_divisor_);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        out_ = BasecaseMiddle(chunk, out_);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// Assume that a division is about ten times as expensive as a</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">// multiplication.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="tostring_8cc.html#a3fa209130b4fef8aa381222ce2f69412">MAYBE_INTERRUPT</a>(processor_-&gt;AddWorkEstimate(rest.<a class="code" href="classv8_1_1bigint_1_1Digits.html#acb996e60d50dcd932cb15fc4131cfadb">len</a>() * 10));</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <a class="code" href="tostring_8cc.html#a3fa209130b4fef8aa381222ce2f69412">MAYBE_INTERRUPT</a>(<span class="keywordflow">if</span> (processor_-&gt;should_terminate()) <span class="keywordflow">return</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      rest.<a class="code" href="classv8_1_1bigint_1_1Digits.html#af35ab6f90efd8f9ab0d2b14068ff0120">Normalize</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      dividend = rest;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    } <span class="keywordflow">while</span> (rest.<a class="code" href="classv8_1_1bigint_1_1Digits.html#acb996e60d50dcd932cb15fc4131cfadb">len</a>() &gt; 1);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    out_ = BasecaseLast(rest[0], out_);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">void</span> BasePowerOfTwo();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1e1351a004576fc440d361f34282786b">  174</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1e1351a004576fc440d361f34282786b">Fast</a>();</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a9eb4b1037aecec42942ab18d71b4cac6">  175</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a9eb4b1037aecec42942ab18d71b4cac6">FillWithZeros</a>(RecursionLevel* level, <span class="keywordtype">char</span>* prev_cursor, <span class="keywordtype">char</span>* out,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                      <span class="keywordtype">bool</span> is_last_on_level);</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#aa3edbbf374d191456bbda3dd4f46d8a7">  177</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#aa3edbbf374d191456bbda3dd4f46d8a7">ProcessLevel</a>(RecursionLevel* level, <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> chunk, <span class="keywordtype">char</span>* out,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                     <span class="keywordtype">bool</span> is_last_on_level);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// When processing the last (most significant) digit, don&#39;t write leading</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// zeros.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a4f9f000e8380897e835ca63c4595182e">  183</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a4f9f000e8380897e835ca63c4595182e">BasecaseLast</a>(<a class="code" href="classuintptr__t.html">digit_t</a> digit, <span class="keywordtype">char</span>* out) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (radix_ == 10) <span class="keywordflow">return</span> BasecaseFixedLast&lt;10&gt;(digit, out);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(*(out - 1) == <a class="code" href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">kStringZapValue</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      *(--out) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[digit % radix_];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      digit /= radix_;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    } <span class="keywordflow">while</span> (digit &gt; 0);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// When processing a middle (non-most significant) digit, always write the</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// same number of characters (as many &#39;0&#39; as necessary).</span></div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ac8974aba5269a32aa3f8ee0608e05edf">  195</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ac8974aba5269a32aa3f8ee0608e05edf">BasecaseMiddle</a>(<a class="code" href="classuintptr__t.html">digit_t</a> digit, <span class="keywordtype">char</span>* out) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; chunk_chars_; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(*(out - 1) == <a class="code" href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">kStringZapValue</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      *(--out) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[digit % radix_];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      digit /= radix_;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(digit == 0);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ade574c3c28f839de2dc8cf39e5604f75">  205</a></span>&#160;  <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ade574c3c28f839de2dc8cf39e5604f75">digits_</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a79a49eec7597415a7af4533eb24bec92">  206</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a79a49eec7597415a7af4533eb24bec92">radix_</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#aa0b1b0a61a782f3bdfe3a158048a8799">  207</a></span>&#160;  <span class="keywordtype">int</span> max_bits_per_char_ = 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a6664d76333fb4bbdf5c411fadf18ddad">  208</a></span>&#160;  <span class="keywordtype">int</span> chunk_chars_ = 0;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a8a8fdbf011e75115fb7c42b030171fc8">  209</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a8a8fdbf011e75115fb7c42b030171fc8">sign_</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#af9d738018dbc47652c6d50e301ead473">  210</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#af9d738018dbc47652c6d50e301ead473">out_start_</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a52cd3b6dfb276a919e423b46dc4fd35f">  211</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a52cd3b6dfb276a919e423b46dc4fd35f">out_end_</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a980c3b0c630710339d31debb3966fd1e">  212</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a980c3b0c630710339d31debb3966fd1e">out_</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ad09868a0551510d1c8f6420b4f99b37d">  213</a></span>&#160;  <a class="code" href="classuintptr__t.html">digit_t</a> chunk_divisor_ = 0;</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a0031c1f15c0e8853bc4c802197e4a879">  214</a></span>&#160;  <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>* <a class="code" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a0031c1f15c0e8853bc4c802197e4a879">processor_</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;};</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">#undef MAYBE_INTERRUPT</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// Prepares data for {Classic}. Not needed for {BasePowerOfTwo}.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#afb0748d0386eadf9d555f8147954568c">  220</a></span>&#160;<span class="keywordtype">void</span> ToStringFormatter::Start() {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  max_bits_per_char_ = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">kMaxBitsPerChar</a>[radix_];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  chunk_chars_ = <a class="code" href="namespacev8_1_1bigint.html#a4879833909bc4b7a5117ec7d35362977">kDigitBits</a> * <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">kBitsPerCharTableMultiplier</a> / max_bits_per_char_;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  chunk_divisor_ = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8bf133c1da0a744c6d95b6e89240a12f">digit_pow</a>(radix_, chunk_chars_);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// By construction of chunk_chars_, there can&#39;t have been overflow.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(chunk_divisor_ != 0);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a6ea5f4db90a294a4ec93280d569d0175">  228</a></span>&#160;<span class="keywordtype">int</span> ToStringFormatter::Finish() {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(out_ &gt;= out_start_);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(out_ &lt; out_end_);  <span class="comment">// At least one character was written.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">while</span> (out_ &lt; out_end_ &amp;&amp; *out_ == <span class="charliteral">&#39;0&#39;</span>) out_++;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (sign_) *(--out_) = <span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordtype">int</span> excess = 0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (out_ &gt; out_start_) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">size_t</span> actual_length = out_end_ - out_;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    excess = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(out_ - out_start_);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    std::memmove(out_start_, out_, actual_length);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> excess;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a08bd92eb78e22691169086ae933be56c">  242</a></span>&#160;<span class="keywordtype">void</span> ToStringFormatter::BasePowerOfTwo() {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> bits_per_char = <a class="code" href="namespacev8_1_1bigint.html#a81ab25ec816094fb071ae04acce2bed5">CountTrailingZeros</a>(radix_);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> char_mask = radix_ - 1;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="classuintptr__t.html">digit_t</a> digit = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// Keeps track of how many unprocessed bits there are in {digit}.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">int</span> available_bits = 0;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; digits_.len() - 1; <a class="code" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="classuintptr__t.html">digit_t</a> new_digit = digits_[<a class="code" href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">i</a>];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Take any leftover bits from the last iteration into account.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">int</span> current = (digit | (new_digit &lt;&lt; available_bits)) &amp; char_mask;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    *(--out_) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[current];</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">int</span> consumed_bits = bits_per_char - available_bits;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    digit = new_digit &gt;&gt; consumed_bits;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    available_bits = <a class="code" href="namespacev8_1_1bigint.html#a4879833909bc4b7a5117ec7d35362977">kDigitBits</a> - consumed_bits;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">while</span> (available_bits &gt;= bits_per_char) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      *(--out_) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[digit &amp; char_mask];</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      digit &gt;&gt;= bits_per_char;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      available_bits -= bits_per_char;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// Take any leftover bits from the last iteration into account.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classuintptr__t.html">digit_t</a> msd = digits_.msd();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">int</span> current = (digit | (msd &lt;&lt; available_bits)) &amp; char_mask;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  *(--out_) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[current];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  digit = msd &gt;&gt; (bits_per_char - available_bits);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">while</span> (digit != 0) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    *(--out_) = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">kConversionChars</a>[digit &amp; char_mask];</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    digit &gt;&gt;= bits_per_char;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#if V8_ADVANCED_BIGINT_ALGORITHMS</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// &quot;Fast&quot; divide-and-conquer conversion to string. The basic idea is to</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// recursively cut the BigInt in half (using a division with remainder,</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// the divisor being ~half as large (in bits) as the current dividend).</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">// As preparation, we build up a linked list of metadata for each recursion</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">// level. We do this bottom-up, i.e. start with the level that will produce</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">// two halves that are register-sized and bail out to the base case.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// Each higher level (executed earlier, prepared later) uses a divisor that is</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// the square of the previously-created &quot;next&quot; level&#39;s divisor. Preparation</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">// terminates when the current divisor is at least half as large as the bigint.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">// We also precompute each level&#39;s divisor&#39;s inverse, so we can use</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">// Barrett division later.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">// Example: say we want to format 1234567890123, and we can fit two decimal</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// digits into a register for the base case.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//              1234567890123</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">//                    ↓</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">//               %100000000 (a)              // RecursionLevel 2,</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">//             /            \                // is_toplevel_ == true.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">//         12345            67890123</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">//           ↓                  ↓</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">//    (e) %10000             %10000 (b)      // RecursionLevel 1</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">//        /    \            /      \</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//       1     2345      6789      0123</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">//       ↓   (f) ↓         ↓ (d)     ↓</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// (g) %100    %100      %100      %100 (c)  // RecursionLevel 0</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">//     / \     /   \     /   \     /   \</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">//    00 01   23   45   67   89   01   23</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">//        ↓    ↓    ↓    ↓    ↓    ↓    ↓    // Base case.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//       &quot;1&quot; &quot;23&quot; &quot;45&quot; &quot;67&quot; &quot;89&quot; &quot;01&quot; &quot;23&quot;</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// We start building RecursionLevels in order 0 -&gt; 1 -&gt; 2, performing the</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// squarings 100² = 10000 and 10000² = 100000000 each only once. Execution</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// then happens in order (a) through (g); lower-level divisors are used</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// repeatedly. We build the string from right to left.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// Note that we can skip the division at (g) and fall through directly.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">// Also, note that there are two chunks with value 1: one of them must produce</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">// a leading &quot;0&quot; in its string representation, the other must not.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">// In this example, {base_divisor} is 100 and {base_char_count} is 2.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// TODO(jkummerow): Investigate whether it is beneficial to build one or two</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">// fewer RecursionLevels, and use the topmost level for more than one division.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">class </span>RecursionLevel {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">static</span> RecursionLevel* CreateLevels(<a class="code" href="classuintptr__t.html">digit_t</a> base_divisor, <span class="keywordtype">int</span> base_char_count,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                      <span class="keywordtype">int</span> target_bit_length,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                      <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>* processor);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  ~RecursionLevel() { <span class="keyword">delete</span> next_; }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">void</span> ComputeInverse(<a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>* proc, <span class="keywordtype">int</span> dividend_length = 0);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> GetInverse(<span class="keywordtype">int</span> dividend_length);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span>ToStringFormatter;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  RecursionLevel(<a class="code" href="classuintptr__t.html">digit_t</a> base_divisor, <span class="keywordtype">int</span> base_char_count)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      : char_count_(base_char_count), divisor_(1) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    divisor_[0] = base_divisor;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keyword">explicit</span> RecursionLevel(RecursionLevel* next)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      : char_count_(next-&gt;char_count_ * 2),</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        next_(next),</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        divisor_(next-&gt;divisor_.len() * 2) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    next-&gt;is_toplevel_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">void</span> LeftShiftDivisor() {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    leading_zero_shift_ = <a class="code" href="namespacev8_1_1bigint.html#a4f79403ec3dff005a0f3416fed64df08">CountLeadingZeros</a>(divisor_.msd());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="namespacev8_1_1bigint.html#a39b5dc64b28f16fefab160e2e895138b">LeftShift</a>(divisor_, divisor_, leading_zero_shift_);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordtype">int</span> leading_zero_shift_{0};</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// The number of characters generated by *each half* of this level.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordtype">int</span> char_count_;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordtype">bool</span> is_toplevel_{<span class="keyword">true</span>};</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  RecursionLevel* next_{<span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  ScratchDigits divisor_;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  std::unique_ptr&lt;Storage&gt; inverse_storage_;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  Digits inverse_;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;RecursionLevel* RecursionLevel::CreateLevels(<a class="code" href="namespacev8_1_1bigint.html#ace92444bdf902d27d9c7207c57867eb4">digit_t</a> base_divisor,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                             <span class="keywordtype">int</span> base_char_count,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                             <span class="keywordtype">int</span> target_bit_length,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                             ProcessorImpl* processor) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  RecursionLevel* level = <span class="keyword">new</span> RecursionLevel(base_divisor, base_char_count);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// We can stop creating levels when the next level&#39;s divisor, which is the</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// square of the current level&#39;s divisor, would be strictly bigger (in terms</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// of its numeric value) than the input we&#39;re formatting. Since computing that</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// next divisor is expensive, we want to predict the necessity based on bit</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// lengths. Bit lengths are an imperfect predictor of numeric value, so we</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// have to be careful:</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// - since we can&#39;t estimate which one of two numbers of equal bit length</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">//   is bigger, we have to aim for a strictly bigger bit length.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// - when squaring, the bit length sometimes doubles (e.g. 0b11² == 0b1001),</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">//   but usually we &quot;lose&quot; a bit (e.g. 0b10² == 0b100).</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="namespacev8_1_1bigint.html#a35ef3611f2f99b8d635d59b23cf0a3cd">BitLength</a>(level-&gt;divisor_) * 2 - 1 &lt;= target_bit_length) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    RecursionLevel* prev = level;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    level = <span class="keyword">new</span> RecursionLevel(prev);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    processor-&gt;Multiply(level-&gt;divisor_, prev-&gt;divisor_, prev-&gt;divisor_);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (processor-&gt;should_terminate()) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keyword">delete</span> level;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    level-&gt;divisor_.Normalize();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// Left-shifting the divisor must only happen after it&#39;s been used to</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// compute the next divisor.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    prev-&gt;LeftShiftDivisor();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    prev-&gt;ComputeInverse(processor);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  level-&gt;LeftShiftDivisor();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// Not calling info-&gt;ComputeInverse here so that it can take the input&#39;s</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// length into account to save some effort on inverse generation.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">return</span> level;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// The top level might get by with a smaller inverse than we could maximally</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">// compute, so the caller should provide the dividend length.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="keywordtype">void</span> RecursionLevel::ComputeInverse(ProcessorImpl* processor,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                    <span class="keywordtype">int</span> dividend_length) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">int</span> inverse_len = divisor_.len();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (dividend_length != 0) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    inverse_len = dividend_length - divisor_.len();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(inverse_len &lt;= divisor_.len());</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordtype">int</span> scratch_len = <a class="code" href="namespacev8_1_1bigint.html#ae170201b4be9f3d1bfecb1e68dc714f8">InvertScratchSpace</a>(inverse_len);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  ScratchDigits scratch(scratch_len);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  Storage* inv_storage = <span class="keyword">new</span> Storage(inverse_len + 1);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  inverse_storage_.reset(inv_storage);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  RWDigits inverse_initializer(inv_storage-&gt;get(), inverse_len + 1);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  Digits input(divisor_, divisor_.len() - inverse_len, inverse_len);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  processor-&gt;Invert(inverse_initializer, input, scratch);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  inverse_initializer.TrimOne();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  inverse_ = inverse_initializer;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;Digits RecursionLevel::GetInverse(<span class="keywordtype">int</span> dividend_length) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(inverse_.len() != 0);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordtype">int</span> inverse_len = dividend_length - divisor_.len();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// If the bits in memory are reliable, then we always have enough digits</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// in the inverse available. This is a Release-mode CHECK because malicious</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// concurrent heap mutation can throw off the decisions made by the recursive</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// procedure, and this is a good bottleneck to catch them.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(inverse_len &lt;= inverse_.len());</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">return</span> inverse_ + (inverse_.len() - inverse_len);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="keywordtype">void</span> ToStringFormatter::Fast() {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// As a sandbox proofing measure, we round up here. Using {BitLength(digits_)}</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// would be technically optimal, but vulnerable to a malicious worker that</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// uses an in-sandbox corruption primitive to concurrently toggle the MSD bits</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// between the invocations of {CreateLevels} and {ProcessLevel}.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">int</span> target_bit_length = digits_.len() * <a class="code" href="namespacev8_1_1bigint.html#a4879833909bc4b7a5117ec7d35362977">kDigitBits</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  std::unique_ptr&lt;RecursionLevel&gt; recursion_levels(RecursionLevel::CreateLevels(</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      chunk_divisor_, chunk_chars_, target_bit_length, processor_));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (processor_-&gt;should_terminate()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  out_ = ProcessLevel(recursion_levels.get(), digits_, out_, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">// Writes &#39;0&#39; characters right-to-left, starting at {out}-1, until the distance</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">// from {right_boundary} to {out} equals the number of characters that {level}</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">// is supposed to produce.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="keywordtype">char</span>* ToStringFormatter::FillWithZeros(RecursionLevel* level,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                       <span class="keywordtype">char</span>* right_boundary, <span class="keywordtype">char</span>* out,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                       <span class="keywordtype">bool</span> is_last_on_level) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Fill up with zeros up to the character count expected to be generated</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// on this level; unless this is the left edge of the result.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">if</span> (is_last_on_level) <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordtype">int</span> chunk_chars = level == <span class="keyword">nullptr</span> ? chunk_chars_ : level-&gt;char_count_ * 2;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = right_boundary - chunk_chars;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(out &gt;= <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">while</span> (out &gt; <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    *(--out) = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="keywordtype">char</span>* ToStringFormatter::ProcessLevel(RecursionLevel* level, Digits chunk,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                      <span class="keywordtype">char</span>* out, <span class="keywordtype">bool</span> is_last_on_level) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// Step 0: if only one digit is left, bail out to the base case.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  Digits normalized = chunk;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  normalized.Normalize();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (normalized.len() &lt;= 1) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordtype">char</span>* right_boundary = out;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> (normalized.len() == 1) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      out = BasecaseLast(normalized[0], out);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">return</span> FillWithZeros(level, right_boundary, out, is_last_on_level);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// Step 1: If the chunk is guaranteed to remain smaller than the divisor</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// even after left-shifting, fall through to the next level immediately.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">if</span> (normalized.len() &lt; level-&gt;divisor_.len()) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordtype">char</span>* right_boundary = out;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    out = ProcessLevel(level-&gt;next_, chunk, out, is_last_on_level);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> FillWithZeros(level, right_boundary, out, is_last_on_level);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// Step 2: Prepare the chunk.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">bool</span> allow_inplace_modification = chunk.digits() != digits_.digits();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  Digits original_chunk = chunk;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  ShiftedDigits chunk_shifted(chunk, level-&gt;leading_zero_shift_,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                              allow_inplace_modification);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  chunk = chunk_shifted;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  chunk.Normalize();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// Check (now precisely) if the chunk is smaller than the divisor.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordtype">int</span> comparison = <a class="code" href="namespacev8_1_1bigint.html#a3f5783b42cb7b4ac89502447815b6fc5">Compare</a>(chunk, level-&gt;divisor_);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (comparison &lt;= 0) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">char</span>* right_boundary = out;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (comparison &lt; 0) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// If the chunk is strictly smaller than the divisor, we can process</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// it directly on the next level as the right half, and know that the</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// left half is all &#39;0&#39;.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// In case we shifted {chunk} in-place, we must undo that</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// before the call...</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      chunk_shifted.Reset();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// ...and otherwise undo the {chunk = chunk_shifted} assignment above.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      chunk = original_chunk;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      out = ProcessLevel(level-&gt;next_, chunk, out, is_last_on_level);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(comparison == 0);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="comment">// If the chunk is equal to the divisor, we know that the right half</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="comment">// is all &#39;0&#39;, and the left half is &#39;...0001&#39;.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">// Handling this case specially is an optimization; we could also</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// fall through to the generic &quot;chunk &gt; divisor&quot; path below.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      out = FillWithZeros(level-&gt;next_, right_boundary, out, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      *(--out) = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// In both cases, make sure the left half is fully written.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">return</span> FillWithZeros(level, right_boundary, out, is_last_on_level);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// Step 3: Allocate space for the results.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// Allocate one extra digit so the next level can left-shift in-place.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  ScratchDigits right(level-&gt;divisor_.len() + 1);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// Allocate one extra digit because DivideBarrett requires it.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  ScratchDigits left(chunk.len() - level-&gt;divisor_.len() + 1);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Step 4: Divide to split {chunk} into {left} and {right}.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordtype">int</span> inverse_len = chunk.len() - level-&gt;divisor_.len();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> (inverse_len == 0) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    processor_-&gt;DivideSchoolbook(left, right, chunk, level-&gt;divisor_);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (level-&gt;divisor_.len() == 1) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    processor_-&gt;DivideSingle(left, right.digits(), chunk, level-&gt;divisor_[0]);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html">i</a> = 1; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; right.len(); <a class="code" href="namespacev8_1_1internal.html">i</a>++) right[<a class="code" href="namespacev8_1_1internal.html">i</a>] = 0;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    ScratchDigits scratch(<a class="code" href="namespacev8_1_1bigint.html#ae2eb54500405505d5629cef062772f0e">DivideBarrettScratchSpace</a>(chunk.len()));</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// The top level only computes its inverse when {chunk.len()} is</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// available. Other levels have precomputed theirs.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (level-&gt;is_toplevel_) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      level-&gt;ComputeInverse(processor_, chunk.len());</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">if</span> (processor_-&gt;should_terminate()) <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    Digits inverse = level-&gt;GetInverse(chunk.len());</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    processor_-&gt;DivideBarrett(left, right, chunk, level-&gt;divisor_, inverse,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                              scratch);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (processor_-&gt;should_terminate()) <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="namespacev8_1_1bigint.html#ab9c5e659bb3ce2f1a908813f6ef15883">RightShift</a>(right, right, level-&gt;leading_zero_shift_);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  Digits left_test = left;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  left_test.Normalize();</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(left_test.len() &lt;= level-&gt;divisor_.len());</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// Step 5: Recurse.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordtype">char</span>* end_of_right_part = ProcessLevel(level-&gt;next_, right, out, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">if</span> (processor_-&gt;should_terminate()) <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">// The recursive calls are required and hence designed to write exactly as</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// many characters as their level is responsible for.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(end_of_right_part == out - level-&gt;char_count_);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(end_of_right_part);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// We intentionally don&#39;t use {end_of_right_part} here to be prepared for</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// potential future multi-threaded execution.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">return</span> ProcessLevel(level-&gt;next_, left, out - level-&gt;char_count_,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                      is_last_on_level);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ADVANCED_BIGINT_ALGORITHMS</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1ProcessorImpl.html#a46c0192fba5a87f3fe0adcaaedff1e93">  558</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html#a46c0192fba5a87f3fe0adcaaedff1e93">ProcessorImpl::ToString</a>(<span class="keywordtype">char</span>* out, uint32_t* out_length, <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                             <span class="keywordtype">int</span> radix, <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> use_fast_algorithm = <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>.len() &gt;= <a class="code" href="namespacev8_1_1bigint.html#aed9a0a5253df83039e8952bf1248589c">kToStringFastThreshold</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html#af230f9ee1424643adcf2a19b49c22e75">ToStringImpl</a>(out, out_length, <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, radix, <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>, use_fast_algorithm);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">// Factored out so that tests can call it.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1ProcessorImpl.html#af230f9ee1424643adcf2a19b49c22e75">  565</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html#af230f9ee1424643adcf2a19b49c22e75">ProcessorImpl::ToStringImpl</a>(<span class="keywordtype">char</span>* out, uint32_t* out_length, <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                 <span class="keywordtype">int</span> radix, <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>, <span class="keywordtype">bool</span> fast) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">for</span> (uint32_t <a class="code" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code" href="namespacev8_1_1internal.html">i</a> &lt; *out_length; <a class="code" href="namespacev8_1_1internal.html">i</a>++) out[<a class="code" href="namespacev8_1_1internal.html">i</a>] = <a class="code" href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">kStringZapValue</a>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  ToStringFormatter formatter(<a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, radix, <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>, out, *out_length, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1bigint.html#ab08f818dd30d8d7c39790af0c5f44d44">IsPowerOfTwo</a>(radix)) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    formatter.BasePowerOfTwo();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#if V8_ADVANCED_BIGINT_ALGORITHMS</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fast) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    formatter.Start();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    formatter.Fast();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html#a3c5bed87f4cb200ae5fd127c99b57a76">should_terminate</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(fast);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ADVANCED_BIGINT_ALGORITHMS</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    formatter.Start();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    formatter.Classic();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordtype">int</span> excess = formatter.Finish();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  *out_length -= excess;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  memset(out + *out_length, 0, excess);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classv8_1_1bigint_1_1Processor.html#aaa697967611ba4db1e89ae8b5f165455">  590</a></span>&#160;<a class="code" href="namespacev8_1_1bigint.html#a4cc6705682dcd70f37d42be24d7ae04e">Status</a> <a class="code" href="classv8_1_1bigint_1_1Processor.html#aaa697967611ba4db1e89ae8b5f165455">Processor::ToString</a>(<span class="keywordtype">char</span>* out, uint32_t* out_length, <a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, <span class="keywordtype">int</span> radix,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                           <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>* <a class="code" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="classv8_1_1bigint_1_1ProcessorImpl.html">ProcessorImpl</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>-&gt;ToString(out, out_length, <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, radix, <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>-&gt;get_and_clear_status();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="namespacev8_1_1bigint.html#a066cfb8ab735b5197b71ee354e64a57a">  597</a></span>&#160;uint32_t <a class="code" href="namespacev8_1_1bigint.html#a066cfb8ab735b5197b71ee354e64a57a">ToStringResultLength</a>(<a class="code" href="classv8_1_1bigint_1_1Digits.html">Digits</a> <a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>, <span class="keywordtype">int</span> radix, <span class="keywordtype">bool</span> <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keyword">const</span> uint32_t bit_length = <a class="code" href="namespacev8_1_1bigint.html#a35ef3611f2f99b8d635d59b23cf0a3cd">BitLength</a>(<a class="code" href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  uint32_t <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1bigint.html#ab08f818dd30d8d7c39790af0c5f44d44">IsPowerOfTwo</a>(radix)) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keyword">const</span> uint32_t bits_per_char = <a class="code" href="namespacev8_1_1bigint.html#a81ab25ec816094fb071ae04acce2bed5">CountTrailingZeros</a>(radix);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="util_8h.html#a9f18e36014e8bde6ef0df8bdf2198a07">DIV_CEIL</a>(bit_length, bits_per_char) + <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// Maximum number of bits we can represent with one character.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keyword">const</span> uint8_t max_bits_per_char = <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">kMaxBitsPerChar</a>[radix];</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// For estimating the result length, we have to be pessimistic and work with</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// the minimum number of bits one character can represent.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keyword">const</span> uint8_t min_bits_per_char = max_bits_per_char - 1;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// Perform the following computation with uint64_t to avoid overflows.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    uint64_t chars_required = bit_length;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    chars_required *= <a class="code" href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">kBitsPerCharTableMultiplier</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    chars_required = <a class="code" href="util_8h.html#a9f18e36014e8bde6ef0df8bdf2198a07">DIV_CEIL</a>(chars_required, min_bits_per_char);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(chars_required &lt;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;           <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(std::numeric_limits&lt;uint32_t&gt;::max()));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(chars_required);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">sign</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}  <span class="comment">// namespace bigint</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="abigint-internal_8h_html"><div class="ttname"><a href="bigint-internal_8h.html">bigint-internal.h</a></div></div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1Digits_html"><div class="ttname"><a href="classv8_1_1bigint_1_1Digits.html">v8::bigint::Digits</a></div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00057">bigint.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1Digits_html_acb996e60d50dcd932cb15fc4131cfadb"><div class="ttname"><a href="classv8_1_1bigint_1_1Digits.html#acb996e60d50dcd932cb15fc4131cfadb">v8::bigint::Digits::len</a></div><div class="ttdeci">int len()</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00113">bigint.h:113</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1Digits_html_af35ab6f90efd8f9ab0d2b14068ff0120"><div class="ttname"><a href="classv8_1_1bigint_1_1Digits.html#af35ab6f90efd8f9ab0d2b14068ff0120">v8::bigint::Digits::Normalize</a></div><div class="ttdeci">void Normalize()</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00104">bigint.h:104</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1ProcessorImpl_html"><div class="ttname"><a href="classv8_1_1bigint_1_1ProcessorImpl.html">v8::bigint::ProcessorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00027">bigint-internal.h:27</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1ProcessorImpl_html_a3c5bed87f4cb200ae5fd127c99b57a76"><div class="ttname"><a href="classv8_1_1bigint_1_1ProcessorImpl.html#a3c5bed87f4cb200ae5fd127c99b57a76">v8::bigint::ProcessorImpl::should_terminate</a></div><div class="ttdeci">bool should_terminate()</div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00077">bigint-internal.h:77</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1ProcessorImpl_html_a46c0192fba5a87f3fe0adcaaedff1e93"><div class="ttname"><a href="classv8_1_1bigint_1_1ProcessorImpl.html#a46c0192fba5a87f3fe0adcaaedff1e93">v8::bigint::ProcessorImpl::ToString</a></div><div class="ttdeci">void ToString(char *out, uint32_t *out_length, Digits X, int radix, bool sign)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00558">tostring.cc:558</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1ProcessorImpl_html_af230f9ee1424643adcf2a19b49c22e75"><div class="ttname"><a href="classv8_1_1bigint_1_1ProcessorImpl.html#af230f9ee1424643adcf2a19b49c22e75">v8::bigint::ProcessorImpl::ToStringImpl</a></div><div class="ttdeci">void ToStringImpl(char *out, uint32_t *out_length, Digits X, int radix, bool sign, bool use_fast_algorithm)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00565">tostring.cc:565</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1Processor_html_aaa697967611ba4db1e89ae8b5f165455"><div class="ttname"><a href="classv8_1_1bigint_1_1Processor.html#aaa697967611ba4db1e89ae8b5f165455">v8::bigint::Processor::ToString</a></div><div class="ttdeci">Status ToString(char *out, uint32_t *out_length, Digits X, int radix, bool sign)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00590">tostring.cc:590</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1RWDigits_html"><div class="ttname"><a href="classv8_1_1bigint_1_1RWDigits.html">v8::bigint::RWDigits</a></div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00138">bigint.h:138</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1ScratchDigits_html"><div class="ttname"><a href="classv8_1_1bigint_1_1ScratchDigits.html">v8::bigint::ScratchDigits</a></div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00143">bigint-internal.h:143</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter</a></div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00119">tostring.cc:119</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a0031c1f15c0e8853bc4c802197e4a879"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a0031c1f15c0e8853bc4c802197e4a879">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::processor_</a></div><div class="ttdeci">ProcessorImpl * processor_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00214">tostring.cc:214</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a1627adf858230af29d7c14f0040e21e1"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1627adf858230af29d7c14f0040e21e1">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::Classic</a></div><div class="ttdeci">void Classic()</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00137">tostring.cc:137</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a1e1351a004576fc440d361f34282786b"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a1e1351a004576fc440d361f34282786b">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::Fast</a></div><div class="ttdeci">void Fast()</div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a4f9f000e8380897e835ca63c4595182e"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a4f9f000e8380897e835ca63c4595182e">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::BasecaseLast</a></div><div class="ttdeci">char * BasecaseLast(digit_t digit, char *out)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00183">tostring.cc:183</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a52cd3b6dfb276a919e423b46dc4fd35f"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a52cd3b6dfb276a919e423b46dc4fd35f">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::out_end_</a></div><div class="ttdeci">char * out_end_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00211">tostring.cc:211</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a79a49eec7597415a7af4533eb24bec92"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a79a49eec7597415a7af4533eb24bec92">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::radix_</a></div><div class="ttdeci">int radix_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00206">tostring.cc:206</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a8a8fdbf011e75115fb7c42b030171fc8"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a8a8fdbf011e75115fb7c42b030171fc8">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::sign_</a></div><div class="ttdeci">bool sign_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00209">tostring.cc:209</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a980c3b0c630710339d31debb3966fd1e"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a980c3b0c630710339d31debb3966fd1e">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::out_</a></div><div class="ttdeci">char * out_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00212">tostring.cc:212</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_a9eb4b1037aecec42942ab18d71b4cac6"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#a9eb4b1037aecec42942ab18d71b4cac6">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::FillWithZeros</a></div><div class="ttdeci">char * FillWithZeros(RecursionLevel *level, char *prev_cursor, char *out, bool is_last_on_level)</div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_aa3edbbf374d191456bbda3dd4f46d8a7"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#aa3edbbf374d191456bbda3dd4f46d8a7">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::ProcessLevel</a></div><div class="ttdeci">char * ProcessLevel(RecursionLevel *level, Digits chunk, char *out, bool is_last_on_level)</div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_ac8974aba5269a32aa3f8ee0608e05edf"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ac8974aba5269a32aa3f8ee0608e05edf">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::BasecaseMiddle</a></div><div class="ttdeci">char * BasecaseMiddle(digit_t digit, char *out)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00195">tostring.cc:195</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_ad85b332f3156c92b48e950a2bbb3dae0"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ad85b332f3156c92b48e950a2bbb3dae0">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::ToStringFormatter</a></div><div class="ttdeci">ToStringFormatter(Digits X, int radix, bool sign, char *out, uint32_t chars_available, ProcessorImpl *processor)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00121">tostring.cc:121</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_ade574c3c28f839de2dc8cf39e5604f75"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#ade574c3c28f839de2dc8cf39e5604f75">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::digits_</a></div><div class="ttdeci">Digits digits_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00205">tostring.cc:205</a></div></div>
<div class="ttc" id="aclassv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter_html_af9d738018dbc47652c6d50e301ead473"><div class="ttname"><a href="classv8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_1_1ToStringFormatter.html#af9d738018dbc47652c6d50e301ead473">v8::bigint::anonymous_namespace{tostring.cc}::ToStringFormatter::out_start_</a></div><div class="ttdeci">char * out_start_</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00210">tostring.cc:210</a></div></div>
<div class="ttc" id="adigit-arithmetic_8h_html"><div class="ttname"><a href="digit-arithmetic_8h.html">digit-arithmetic.h</a></div></div>
<div class="ttc" id="adiv-helpers_8h_html"><div class="ttname"><a href="div-helpers_8h.html">div-helpers.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_acef733af0cd52e464ef990347581e777"><div class="ttname"><a href="flag-definitions_8h.html#acef733af0cd52e464ef990347581e777">X</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space Collect garbage after Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed threshold for starting incremental marking via a task in percent of available threshold for starting incremental marking immediately in percent of available Use a single schedule for determining a marking schedule between JS and C objects schedules the minor GC task with kUserVisible priority max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats TracingFlags::gc_stats track native contexts that are expected to be garbage collected verify heap pointers before and after GC memory reducer runs GC with ReduceMemoryFootprint flag Maximum number of memory reducer GCs scheduled Old gen GC speed is computed directly from gc tracer counters Perform compaction on full GCs based on V8 s default heuristics Perform compaction on every full GC Perform code space compaction when finalizing a full GC with stack Stress GC compaction to flush out bugs with moving objects flush of baseline code when it has not been executed recently Use time base code flushing instead of age Use a progress bar to scan large objects in increments when incremental marking is active force incremental marking for small heaps and run it more often Release pooled large pages after X seconds prints number of allocations and enables analysis mode for gc fuzz e g stress stress scavenge force scavenge at random points between and X(inclusive) &quot; &quot;percent of the new space capacity&quot;) DEFINE_BOOL( reclaim_unmodified_wrappers</div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a1bba5f18cf1f210c893290cd87b1564c"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a1bba5f18cf1f210c893290cd87b1564c">v8::bigint::anonymous_namespace{tostring.cc}::kMaxBitsPerChar</a></div><div class="ttdeci">constexpr uint8_t kMaxBitsPerChar[]</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00023">tostring.cc:23</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a4963db33636e97b878f19e32dd7d5d4f"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a4963db33636e97b878f19e32dd7d5d4f">v8::bigint::anonymous_namespace{tostring.cc}::kConversionChars</a></div><div class="ttdeci">static const char kConversionChars[]</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00034">tostring.cc:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a6e396aea637425e4f073027ff41107d8"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a6e396aea637425e4f073027ff41107d8">v8::bigint::anonymous_namespace{tostring.cc}::BasecaseFixedLast</a></div><div class="ttdeci">char * BasecaseFixedLast(digit_t chunk, char *out)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00057">tostring.cc:57</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a8bf133c1da0a744c6d95b6e89240a12f"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8bf133c1da0a744c6d95b6e89240a12f">v8::bigint::anonymous_namespace{tostring.cc}::digit_pow</a></div><div class="ttdeci">digit_t digit_pow(digit_t base, digit_t exponent)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00037">tostring.cc:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a8d7e229040026e0fc0f3b277ed62d01a"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8d7e229040026e0fc0f3b277ed62d01a">v8::bigint::anonymous_namespace{tostring.cc}::kBitsPerCharTableShift</a></div><div class="ttdeci">static const int kBitsPerCharTableShift</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00031">tostring.cc:31</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a8e6e83b6357fa94d4e0c30a97368c850"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8e6e83b6357fa94d4e0c30a97368c850">v8::bigint::anonymous_namespace{tostring.cc}::kBitsPerCharTableMultiplier</a></div><div class="ttdeci">static const size_t kBitsPerCharTableMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00032">tostring.cc:32</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_a8ef791f1d978c7e973bf9d0836c5010a"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#a8ef791f1d978c7e973bf9d0836c5010a">v8::bigint::anonymous_namespace{tostring.cc}::digit_pow_rec</a></div><div class="ttdeci">constexpr digit_t digit_pow_rec(digit_t base, digit_t exponent)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00050">tostring.cc:50</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03_html_ad8899c1a905210d3c2cccdce5db6e43b"><div class="ttname"><a href="namespacev8_1_1bigint_1_1anonymous__namespace_02tostring_8cc_03.html#ad8899c1a905210d3c2cccdce5db6e43b">v8::bigint::anonymous_namespace{tostring.cc}::DivideByMagic</a></div><div class="ttdeci">char * DivideByMagic(RWDigits rest, Digits input, char *output)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00079">tostring.cc:79</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a066cfb8ab735b5197b71ee354e64a57a"><div class="ttname"><a href="namespacev8_1_1bigint.html#a066cfb8ab735b5197b71ee354e64a57a">v8::bigint::ToStringResultLength</a></div><div class="ttdeci">uint32_t ToStringResultLength(Digits X, int radix, bool sign)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00597">tostring.cc:597</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a35ef3611f2f99b8d635d59b23cf0a3cd"><div class="ttname"><a href="namespacev8_1_1bigint.html#a35ef3611f2f99b8d635d59b23cf0a3cd">v8::bigint::BitLength</a></div><div class="ttdeci">constexpr int BitLength(int n)</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00065">util.h:65</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a39b5dc64b28f16fefab160e2e895138b"><div class="ttname"><a href="namespacev8_1_1bigint.html#a39b5dc64b28f16fefab160e2e895138b">v8::bigint::LeftShift</a></div><div class="ttdeci">void LeftShift(RWDigits Z, Digits X, digit_t shift)</div><div class="ttdef"><b>Definition:</b> <a href="bitwise_8cc_source.html#l00136">bitwise.cc:136</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a3f5783b42cb7b4ac89502447815b6fc5"><div class="ttname"><a href="namespacev8_1_1bigint.html#a3f5783b42cb7b4ac89502447815b6fc5">v8::bigint::Compare</a></div><div class="ttdeci">int Compare(Digits A, Digits B)</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00224">bigint.h:224</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a4121e0c5972746cf583cb4ad81280f99"><div class="ttname"><a href="namespacev8_1_1bigint.html#a4121e0c5972746cf583cb4ad81280f99">v8::bigint::kHalfDigitBits</a></div><div class="ttdeci">static constexpr int kHalfDigitBits</div><div class="ttdef"><b>Definition:</b> <a href="digit-arithmetic_8h_source.html#l00016">digit-arithmetic.h:16</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a4879833909bc4b7a5117ec7d35362977"><div class="ttname"><a href="namespacev8_1_1bigint.html#a4879833909bc4b7a5117ec7d35362977">v8::bigint::kDigitBits</a></div><div class="ttdeci">static constexpr int kDigitBits</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00051">bigint.h:51</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a4cc6705682dcd70f37d42be24d7ae04e"><div class="ttname"><a href="namespacev8_1_1bigint.html#a4cc6705682dcd70f37d42be24d7ae04e">v8::bigint::Status</a></div><div class="ttdeci">Status</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00283">bigint.h:283</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a4f79403ec3dff005a0f3416fed64df08"><div class="ttname"><a href="namespacev8_1_1bigint.html#a4f79403ec3dff005a0f3416fed64df08">v8::bigint::CountLeadingZeros</a></div><div class="ttdeci">constexpr int CountLeadingZeros(T value) requires(std</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00030">util.h:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a5757a9a976e85d7caf294fb78c834204"><div class="ttname"><a href="namespacev8_1_1bigint.html#a5757a9a976e85d7caf294fb78c834204">v8::bigint::kStringZapValue</a></div><div class="ttdeci">constexpr char kStringZapValue</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00355">bigint.h:355</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a67f11b3e9e9c3b3101a9edacaebc8262"><div class="ttname"><a href="namespacev8_1_1bigint.html#a67f11b3e9e9c3b3101a9edacaebc8262">v8::bigint::kHalfDigitMask</a></div><div class="ttdeci">static constexpr digit_t kHalfDigitMask</div><div class="ttdef"><b>Definition:</b> <a href="digit-arithmetic_8h_source.html#l00018">digit-arithmetic.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a81ab25ec816094fb071ae04acce2bed5"><div class="ttname"><a href="namespacev8_1_1bigint.html#a81ab25ec816094fb071ae04acce2bed5">v8::bigint::CountTrailingZeros</a></div><div class="ttdeci">constexpr int CountTrailingZeros(uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00054">util.h:54</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_ab08f818dd30d8d7c39790af0c5f44d44"><div class="ttname"><a href="namespacev8_1_1bigint.html#ab08f818dd30d8d7c39790af0c5f44d44">v8::bigint::IsPowerOfTwo</a></div><div class="ttdeci">constexpr bool IsPowerOfTwo(int value)</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00069">util.h:69</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_ab9c5e659bb3ce2f1a908813f6ef15883"><div class="ttname"><a href="namespacev8_1_1bigint.html#ab9c5e659bb3ce2f1a908813f6ef15883">v8::bigint::RightShift</a></div><div class="ttdeci">void RightShift(RWDigits Z, Digits X, digit_t shift, const RightShiftState &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="bitwise_8cc_source.html#l00195">bitwise.cc:195</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_ace92444bdf902d27d9c7207c57867eb4"><div class="ttname"><a href="namespacev8_1_1bigint.html#ace92444bdf902d27d9c7207c57867eb4">v8::bigint::digit_t</a></div><div class="ttdeci">uintptr_t digit_t</div><div class="ttdef"><b>Definition:</b> <a href="bigint_2bigint_8h_source.html#l00034">bigint.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_ae170201b4be9f3d1bfecb1e68dc714f8"><div class="ttname"><a href="namespacev8_1_1bigint.html#ae170201b4be9f3d1bfecb1e68dc714f8">v8::bigint::InvertScratchSpace</a></div><div class="ttdeci">constexpr int InvertScratchSpace(int n)</div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00112">bigint-internal.h:112</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_ae2eb54500405505d5629cef062772f0e"><div class="ttname"><a href="namespacev8_1_1bigint.html#ae2eb54500405505d5629cef062772f0e">v8::bigint::DivideBarrettScratchSpace</a></div><div class="ttdeci">constexpr int DivideBarrettScratchSpace(int n)</div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00104">bigint-internal.h:104</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_aed9a0a5253df83039e8952bf1248589c"><div class="ttname"><a href="namespacev8_1_1bigint.html#aed9a0a5253df83039e8952bf1248589c">v8::bigint::kToStringFastThreshold</a></div><div class="ttdeci">constexpr int kToStringFastThreshold</div><div class="ttdef"><b>Definition:</b> <a href="bigint-internal_8h_source.html#l00024">bigint-internal.h:24</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_html_ad86b3cf21e19e97ce484f32b894d548c"><div class="ttname"><a href="namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03.html#ad86b3cf21e19e97ce484f32b894d548c">v8::internal::anonymous_namespace{json-stringifier.cc}::i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json-stringifier_8cc_source.html#l00548">json-stringifier.cc:548</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a51dcb90ae077172b12d63271c7e7ba0c"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">v8::internal::compiler::end</a></div><div class="ttdeci">Node::Uses::const_iterator end(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00711">node.h:711</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00020">api-arguments-inl.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673"><div class="ttname"><a href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21aaf5a2237d200c52e37871fb2d6dc4673">v8::internal::sign</a></div><div class="ttdeci">@ sign</div><div class="ttdef"><b>Definition:</b> <a href="assembler-ia32_8h_source.html#l00081">assembler-ia32.h:81</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="anamespacewasm_html_aca75bd987d7d40b886a5efad94f4053c"><div class="ttname"><a href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">wasm::impl</a></div><div class="ttdeci">auto impl(C *x) -&gt; typename implement&lt; C &gt;::type *</div><div class="ttdef"><b>Definition:</b> <a href="c-api_8cc_source.html#l00243">c-api.cc:243</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00481">logging.h:481</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00293">macros.h:293</a></div></div>
<div class="ttc" id="atostring_8cc_html_a3fa209130b4fef8aa381222ce2f69412"><div class="ttname"><a href="tostring_8cc.html#a3fa209130b4fef8aa381222ce2f69412">MAYBE_INTERRUPT</a></div><div class="ttdeci">#define MAYBE_INTERRUPT(code)</div><div class="ttdef"><b>Definition:</b> <a href="tostring_8cc_source.html#l00116">tostring.cc:116</a></div></div>
<div class="ttc" id="autil_8h_html"><div class="ttname"><a href="util_8h.html">util.h</a></div></div>
<div class="ttc" id="autil_8h_html_a9f18e36014e8bde6ef0df8bdf2198a07"><div class="ttname"><a href="util_8h.html#a9f18e36014e8bde6ef0df8bdf2198a07">DIV_CEIL</a></div><div class="ttdeci">#define DIV_CEIL(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00019">util.h:19</a></div></div>
<div class="ttc" id="avector-arithmetic_8h_html"><div class="ttname"><a href="vector-arithmetic_8h.html">vector-arithmetic.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_ed79359305bd2054ee55d66aebe67f22.html">bigint</a></li><li class="navelem"><a class="el" href="tostring_8cc.html">tostring.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 15:50:49 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
