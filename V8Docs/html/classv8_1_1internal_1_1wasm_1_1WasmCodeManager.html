<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: v8::internal::wasm::WasmCodeManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">v8::internal::wasm::WasmCodeManager Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for v8::internal::wasm::WasmCodeManager:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08c0531d703317ba61ae16c19a505f7a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a08c0531d703317ba61ae16c19a505f7a">WasmCodeManager</a> ()</td></tr>
<tr class="separator:a08c0531d703317ba61ae16c19a505f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadbca7de431a7ea35794d4fdd2dfed19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aadbca7de431a7ea35794d4fdd2dfed19">WasmCodeManager</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a> &amp;)=delete</td></tr>
<tr class="separator:aadbca7de431a7ea35794d4fdd2dfed19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341cd2685f87e88063caaf2fb51eb63d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a341cd2685f87e88063caaf2fb51eb63d">operator=</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a> &amp;)=delete</td></tr>
<tr class="separator:a341cd2685f87e88063caaf2fb51eb63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af407c29783d5ce7ad5d29928a54adca5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#af407c29783d5ce7ad5d29928a54adca5">~WasmCodeManager</a> ()</td></tr>
<tr class="separator:af407c29783d5ce7ad5d29928a54adca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65237f5b80dae7a92d86f131b6df4461"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">LookupNativeModule</a> (<a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> pc) const</td></tr>
<tr class="separator:a65237f5b80dae7a92d86f131b6df4461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b17776c8a4fe19718f2b1931544253f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> pc) const</td></tr>
<tr class="separator:a8b17776c8a4fe19718f2b1931544253f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589a55d2b33354d07415b1a22cb00d89"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *, <a class="el" href="classv8_1_1internal_1_1SafepointEntry.html">SafepointEntry</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a589a55d2b33354d07415b1a22cb00d89">LookupCodeAndSafepoint</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> pc)</td></tr>
<tr class="separator:a589a55d2b33354d07415b1a22cb00d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c5ecc61ab174d77400fa3082e73537"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">FlushCodeLookupCache</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:aa5c5ecc61ab174d77400fa3082e73537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17eb91621a85bc775b4d7a740029f00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab17eb91621a85bc775b4d7a740029f00">committed_code_space</a> () const</td></tr>
<tr class="separator:ab17eb91621a85bc775b4d7a740029f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0fcb42a940eb11201694e507b09fa04c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a0fcb42a940eb11201694e507b09fa04c">EstimateLiftoffCodeSize</a> (<a class="el" href="classint.html">int</a> body_size)</td></tr>
<tr class="separator:a0fcb42a940eb11201694e507b09fa04c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6cfe5d63b1c5f3b54fdb34ed91c863"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">EstimateNativeModuleCodeSize</a> (const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> *)</td></tr>
<tr class="separator:a5b6cfe5d63b1c5f3b54fdb34ed91c863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fbaa24f3a0fc9f3abd82032f97e2b53"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a1fbaa24f3a0fc9f3abd82032f97e2b53">EstimateNativeModuleCodeSize</a> (<a class="el" href="classint.html">int</a> num_functions, <a class="el" href="classint.html">int</a> code_section_length)</td></tr>
<tr class="separator:a1fbaa24f3a0fc9f3abd82032f97e2b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329950b560b30699bd218b9622eedda7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a329950b560b30699bd218b9622eedda7">EstimateNativeModuleMetaDataSize</a> (const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> *)</td></tr>
<tr class="separator:a329950b560b30699bd218b9622eedda7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efdc870dd21f075b3c408101c23feeb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">HasMemoryProtectionKeySupport</a> ()</td></tr>
<tr class="separator:a3efdc870dd21f075b3c408101c23feeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930893209d531231682fce4cbef728ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">MemoryProtectionKeysEnabled</a> ()</td></tr>
<tr class="separator:a930893209d531231682fce4cbef728ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2241851e1074b022606031a831966b17"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a2241851e1074b022606031a831966b17">MemoryProtectionKeyWritable</a> ()</td></tr>
<tr class="separator:a2241851e1074b022606031a831966b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8cbd92108ae1c153f66f40609aed5783"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8cbd92108ae1c153f66f40609aed5783">NewNativeModule</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> code_size_estimate, std::shared_ptr&lt; const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> &gt; module)</td></tr>
<tr class="separator:a8cbd92108ae1c153f66f40609aed5783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed36ebeb931a4b5b5cd1097891d60c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="v8config_8h.html#a63258e4bf5dc9fb8c78f881c8405d83b">V8_WARN_UNUSED_RESULT</a> <a class="el" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a7ed36ebeb931a4b5b5cd1097891d60c1">TryAllocate</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> <a class="el" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>)</td></tr>
<tr class="separator:a7ed36ebeb931a4b5b5cd1097891d60c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4da2816276e107b3a3e54d32e08691a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ad4da2816276e107b3a3e54d32e08691a">Commit</a> (<a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>)</td></tr>
<tr class="separator:ad4da2816276e107b3a3e54d32e08691a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b32b6ad2137dab896d869457d0d21e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a1b32b6ad2137dab896d869457d0d21e7">Decommit</a> (<a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>)</td></tr>
<tr class="separator:a1b32b6ad2137dab896d869457d0d21e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ace0686f32545957a6b0948813db9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a27ace0686f32545957a6b0948813db9a">FreeNativeModule</a> (<a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; <a class="el" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> &gt; owned_code, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> committed_size)</td></tr>
<tr class="separator:a27ace0686f32545957a6b0948813db9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf8b899ee355da1fbb00c3471867d762"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aaf8b899ee355da1fbb00c3471867d762">AssignRange</a> (<a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *)</td></tr>
<tr class="separator:aaf8b899ee355da1fbb00c3471867d762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be288a7720a1f7bdf64f5060b7c782a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a2be288a7720a1f7bdf64f5060b7c782a">LookupCode</a> (<a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> pc) const</td></tr>
<tr class="separator:a2be288a7720a1f7bdf64f5060b7c782a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a102c2c6b55ae7094aaac669c22150174"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a></td></tr>
<tr class="separator:a102c2c6b55ae7094aaac669c22150174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8657534718f35b1a258f6e93d2ee07cd"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a> {0}</td></tr>
<tr class="separator:a8657534718f35b1a258f6e93d2ee07cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5690c15d56eb42cffb868c23ac92f424"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5690c15d56eb42cffb868c23ac92f424">critical_committed_code_space_</a></td></tr>
<tr class="separator:a5690c15d56eb42cffb868c23ac92f424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4964601ddec44dd9566edc193900a11b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">native_modules_mutex_</a></td></tr>
<tr class="separator:a4964601ddec44dd9566edc193900a11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a282904997b2ddd09190c6b70245e1596"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>, std::pair&lt; <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a></td></tr>
<tr class="separator:a282904997b2ddd09190c6b70245e1596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a058cd97298c26c958e790365aa0153b9"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">next_code_space_hint_</a></td></tr>
<tr class="separator:a058cd97298c26c958e790365aa0153b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a6f5398d6af0cd323486b07d55a75b3b4"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a6f5398d6af0cd323486b07d55a75b3b4">WasmCodeAllocator</a></td></tr>
<tr class="separator:a6f5398d6af0cd323486b07d55a75b3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcf2e34d98d65c16197a4f27b1f6a780"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#adcf2e34d98d65c16197a4f27b1f6a780">WasmCodeLookupCache</a></td></tr>
<tr class="separator:adcf2e34d98d65c16197a4f27b1f6a780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c3f3090b503421e6e68ca9d396b62f"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ae8c3f3090b503421e6e68ca9d396b62f">WasmEngine</a></td></tr>
<tr class="separator:ae8c3f3090b503421e6e68ca9d396b62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a558c8e718b18b385d961367381b8652f"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a558c8e718b18b385d961367381b8652f">WasmImportWrapperCache</a></td></tr>
<tr class="separator:a558c8e718b18b385d961367381b8652f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01170">1170</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a08c0531d703317ba61ae16c19a505f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c0531d703317ba61ae16c19a505f7a">&#9670;&nbsp;</a></span>WasmCodeManager() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmCodeManager::WasmCodeManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02179">2179</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_committed_code_mb * <a class="code" href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">MB</a>),</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5690c15d56eb42cffb868c23ac92f424">critical_committed_code_space_</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a> / 2),</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">next_code_space_hint_</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;          <a class="code" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>()-&gt;<a class="code" href="namespacev8_1_1internal.html#a604a6dd52477843a9531577e32877ca5">GetRandomMmapAddr</a>())) {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="comment">// Check that --wasm-max-code-space-size-mb is not set bigger than the default</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="comment">// value. Otherwise we run into DCHECKs or other crashes later.</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a>(<a class="code" href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">kDefaultMaxWasmCodeSpaceSizeMb</a>,</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;           <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a058cd97298c26c958e790365aa0153b9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">v8::internal::wasm::WasmCodeManager::next_code_space_hint_</a></div><div class="ttdeci">std::atomic&lt; Address &gt; next_code_space_hint_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01271">wasm-code-manager.h:1271</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a102c2c6b55ae7094aaac669c22150174"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">v8::internal::wasm::WasmCodeManager::max_committed_code_space_</a></div><div class="ttdeci">const size_t max_committed_code_space_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01246">wasm-code-manager.h:1246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a5690c15d56eb42cffb868c23ac92f424"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5690c15d56eb42cffb868c23ac92f424">v8::internal::wasm::WasmCodeManager::critical_committed_code_space_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; critical_committed_code_space_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01253">wasm-code-manager.h:1253</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adcd4ca657f5fbce4e3e61f860761470a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">v8::internal::wasm::Address</a></div><div class="ttdeci">uintptr_t Address</div><div class="ttdef"><b>Definition:</b> <a href="wasm-external-refs_8h_source.html#l00025">wasm-external-refs.h:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a1b38d6a01927e639b91b6a039899ac1a"><div class="ttname"><a href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">v8::internal::GetPlatformPageAllocator</a></div><div class="ttdeci">v8::PageAllocator * GetPlatformPageAllocator()</div><div class="ttdef"><b>Definition:</b> <a href="utils_2allocation_8cc_source.html#l00067">allocation.cc:67</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a55676947d895fd4cdd273e53dff16694"><div class="ttname"><a href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">v8::internal::kDefaultMaxWasmCodeSpaceSizeMb</a></div><div class="ttdeci">constexpr uint32_t kDefaultMaxWasmCodeSpaceSizeMb</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00453">globals.h:453</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604a6dd52477843a9531577e32877ca5"><div class="ttname"><a href="namespacev8_1_1internal.html#a604a6dd52477843a9531577e32877ca5">v8::internal::GetRandomMmapAddr</a></div><div class="ttdeci">void * GetRandomMmapAddr()</div><div class="ttdef"><b>Definition:</b> <a href="utils_2allocation_8cc_source.html#l00161">allocation.cc:161</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af46551c5713d2a3a1be4dca973e521e0"><div class="ttname"><a href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">v8::internal::MB</a></div><div class="ttdeci">constexpr int MB</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00056">v8-internal.h:56</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a1c7c9b7f14b9a33ea69cbe4578016a19"><div class="ttname"><a href="src_2base_2logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(lhs, rhs)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a>, <a class="el" href="common_2globals_8h_source.html#l00453">v8::internal::kDefaultMaxWasmCodeSpaceSizeMb</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

</div>
</div>
<a id="aadbca7de431a7ea35794d4fdd2dfed19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadbca7de431a7ea35794d4fdd2dfed19">&#9670;&nbsp;</a></span>WasmCodeManager() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmCodeManager::WasmCodeManager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af407c29783d5ce7ad5d29928a54adca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af407c29783d5ce7ad5d29928a54adca5">&#9670;&nbsp;</a></span>~WasmCodeManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmCodeManager::~WasmCodeManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02190">2190</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                                  {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="comment">// No more committed code space.</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.load());</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a8657534718f35b1a258f6e93d2ee07cd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">v8::internal::wasm::WasmCodeManager::total_committed_code_space_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; total_committed_code_space_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01248">wasm-code-manager.h:1248</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, and <a class="el" href="wasm-code-manager_8h_source.html#l01248">total_committed_code_space_</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aaf8b899ee355da1fbb00c3471867d762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf8b899ee355da1fbb00c3471867d762">&#9670;&nbsp;</a></span>AssignRange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmCodeManager::AssignRange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>&#160;</td>
          <td class="paramname"><em>region</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td>
          <td class="paramname"><em>native_module</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02260">2260</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                                               {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">native_modules_mutex_</a>);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.insert(std::make_pair(</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      region.begin(), std::make_pair(region.end(), native_module)));</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a282904997b2ddd09190c6b70245e1596"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">v8::internal::wasm::WasmCodeManager::lookup_map_</a></div><div class="ttdeci">std::map&lt; Address, std::pair&lt; Address, NativeModule * &gt; &gt; lookup_map_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01260">wasm-code-manager.h:1260</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a4964601ddec44dd9566edc193900a11b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">v8::internal::wasm::WasmCodeManager::native_modules_mutex_</a></div><div class="ttdeci">base::Mutex native_modules_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01255">wasm-code-manager.h:1255</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40b71b3558e4b5297d51003612578a81"><div class="ttname"><a href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">v8::base::MutexGuard</a></div><div class="ttdeci">LockGuard&lt; Mutex &gt; MutexGuard</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00219">mutex.h:219</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="address-region_8h_source.html#l00033">v8::base::AddressRegion::begin()</a>, <a class="el" href="address-region_8h_source.html#l00034">v8::base::AddressRegion::end()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01260">lookup_map_</a>, and <a class="el" href="wasm-code-manager_8h_source.html#l01255">native_modules_mutex_</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_aaf8b899ee355da1fbb00c3471867d762_cgraph.svg" width="526" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad4da2816276e107b3a3e54d32e08691a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4da2816276e107b3a3e54d32e08691a">&#9670;&nbsp;</a></span>Commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmCodeManager::Commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>&#160;</td>
          <td class="paramname"><em>region</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02203">2203</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                                                     {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.begin(), <a class="code" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.size(), <a class="code" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="comment">// Reserve the size. Use CAS loop to avoid overflow on</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="comment">// {total_committed_code_space_}.</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordtype">size_t</span> old_value = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.load();</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a>, old_value);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">if</span> (region.size() &gt; <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a> - old_value) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="keyword">auto</span> oom_detail = <a class="code" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{}</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;trying to commit &quot;</span> &lt;&lt; region.size()</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;, already committed &quot;</span> &lt;&lt; old_value;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                                  <span class="stringliteral">&quot;Exceeding maximum wasm committed code space&quot;</span>,</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                                  oom_detail.PrintToArray().data());</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.compare_exchange_weak(</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            old_value, old_value + region.size())) {</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Setting rwx permissions for 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;             region.begin(), region.end());</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="keywordtype">bool</span> success = <a class="code" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>()-&gt;<a class="code" href="classv8_1_1PageAllocator.html#aa05bfd415492374b712dd1d3f6f4a1f9">RecommitPages</a>(</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region.begin()), region.size(),</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <a class="code" href="classv8_1_1PageAllocator.html#a88f74b164fe97e053259f67a95758415adc8515d6a0f879ed482ce27eca7301fe">PageAllocator::kReadWriteExecute</a>);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(!success)) {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keyword">auto</span> oom_detail = <a class="code" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{} &lt;&lt; <span class="stringliteral">&quot;region size: &quot;</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                                              &lt;&lt; region.size();</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Commit wasm code space&quot;</span>,</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                                oom_detail.PrintToArray().data());</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  }</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1PageAllocator_html_a88f74b164fe97e053259f67a95758415adc8515d6a0f879ed482ce27eca7301fe"><div class="ttname"><a href="classv8_1_1PageAllocator.html#a88f74b164fe97e053259f67a95758415adc8515d6a0f879ed482ce27eca7301fe">v8::PageAllocator::kReadWriteExecute</a></div><div class="ttdeci">@ kReadWriteExecute</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00490">v8-platform.h:490</a></div></div>
<div class="ttc" id="aclassv8_1_1PageAllocator_html_aa05bfd415492374b712dd1d3f6f4a1f9"><div class="ttname"><a href="classv8_1_1PageAllocator.html#aa05bfd415492374b712dd1d3f6f4a1f9">v8::PageAllocator::RecommitPages</a></div><div class="ttdeci">virtual bool RecommitPages(void *address, size_t length, Permission permissions)</div><div class="ttdoc">Recommits discarded pages in the given range with given permissions.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00577">v8-platform.h:577</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a977b087d4ee58955efe72b33136a4e94"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(Isolate *isolate, const char *location, const OOMDetails &amp;details=kNoOOMDetails)</div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a8a96976677371a5201af88b56be08915"><div class="ttname"><a href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">v8::base::FormattedString</a></div><div class="ttdeci">FormattedString() -&gt; FormattedString&lt;&gt;</div><div class="ttdef"><b>Definition:</b> <a href="string-format_8h_source.html#l00176">string-format.h:176</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6a5f128ae031000011e13ca7534dfc91"><div class="ttname"><a href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">v8::internal::CommitPageSize</a></div><div class="ttdeci">size_t CommitPageSize()</div><div class="ttdef"><b>Definition:</b> <a href="utils_2allocation_8cc_source.html#l00159">allocation.cc:159</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00403">macros.h:403</a></div></div>
<div class="ttc" id="av8config_8h_html_a67bd29db07c711b0fb11ff1c324ebb60"><div class="ttname"><a href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a></div><div class="ttdeci">#define V8_UNLIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00660">v8config.h:660</a></div></div>
<div class="ttc" id="awasm-code-manager_8cc_html_a999acc4125a715214037c81dd456611d"><div class="ttname"><a href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a></div><div class="ttdeci">#define TRACE_HEAP(...)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l00063">wasm-code-manager.cc:63</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="address-region_8h_source.html#l00033">v8::base::AddressRegion::begin()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00159">v8::internal::CommitPageSize()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00487">DCHECK_GE</a>, <a class="el" href="address-region_8h_source.html#l00034">v8::base::AddressRegion::end()</a>, <a class="el" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00067">v8::internal::GetPlatformPageAllocator()</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00403">IsAligned()</a>, <a class="el" href="v8-platform_8h_source.html#l00490">v8::PageAllocator::kReadWriteExecute</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01246">max_committed_code_space_</a>, <a class="el" href="v8-platform_8h_source.html#l00577">v8::PageAllocator::RecommitPages()</a>, <a class="el" href="address-region_8h_source.html#l00036">v8::base::AddressRegion::size()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01248">total_committed_code_space_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00063">TRACE_HEAP</a>, <a class="el" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE()</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_ad4da2816276e107b3a3e54d32e08691a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab17eb91621a85bc775b4d7a740029f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab17eb91621a85bc775b4d7a740029f00">&#9670;&nbsp;</a></span>committed_code_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::committed_code_space </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01193">1193</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                                      {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.load();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01820">v8::internal::wasm::WasmEngine::AddPotentiallyDeadCode()</a>, and <a class="el" href="memory-measurement_8cc_source.html#l00234">v8::internal::MemoryMeasurement::FinishProcessing()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_ab17eb91621a85bc775b4d7a740029f00_icgraph.svg" width="100%" height="400"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1b32b6ad2137dab896d869457d0d21e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b32b6ad2137dab896d869457d0d21e7">&#9670;&nbsp;</a></span>Decommit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmCodeManager::Decommit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>&#160;</td>
          <td class="paramname"><em>region</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02241">2241</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                                                       {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <a class="code" href="namespacecppgc.html#ae7d41c486a869bec62aa1b8c9c55c142">PageAllocator</a>* allocator = <a class="code" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>();</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.begin(), allocator-&gt;CommitPageSize()));</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.size(), allocator-&gt;CommitPageSize()));</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  [[maybe_unused]] <span class="keywordtype">size_t</span> old_committed =</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.fetch_sub(region.size());</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(region.size(), old_committed);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Decommitting system pages 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;             region.begin(), region.end());</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(!allocator-&gt;DecommitPages(</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region.begin()), region.size()))) {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="comment">// Decommit can fail in near-OOM situations.</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keyword">auto</span> oom_detail = <a class="code" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{} &lt;&lt; <span class="stringliteral">&quot;region size: &quot;</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                                              &lt;&lt; region.size();</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Decommit Wasm code space&quot;</span>,</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                                oom_detail.PrintToArray().data());</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;}</div>
<div class="ttc" id="anamespacecppgc_html_ae7d41c486a869bec62aa1b8c9c55c142"><div class="ttname"><a href="namespacecppgc.html#ae7d41c486a869bec62aa1b8c9c55c142">cppgc::PageAllocator</a></div><div class="ttdeci">v8::PageAllocator PageAllocator</div><div class="ttdef"><b>Definition:</b> <a href="include_2cppgc_2platform_8h_source.html#l00022">platform.h:22</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="address-region_8h_source.html#l00033">v8::base::AddressRegion::begin()</a>, <a class="el" href="classv8_1_1PageAllocator.html#ad817d87004151e3824997415f2dc57e9">v8::PageAllocator::CommitPageSize()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00489">DCHECK_LE</a>, <a class="el" href="classv8_1_1PageAllocator.html#a8926cd902754e8d1788e6c172c3a72c2">v8::PageAllocator::DecommitPages()</a>, <a class="el" href="address-region_8h_source.html#l00034">v8::base::AddressRegion::end()</a>, <a class="el" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00067">v8::internal::GetPlatformPageAllocator()</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00403">IsAligned()</a>, <a class="el" href="address-region_8h_source.html#l00036">v8::base::AddressRegion::size()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01248">total_committed_code_space_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00063">TRACE_HEAP</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a1b32b6ad2137dab896d869457d0d21e7_cgraph.svg" width="510" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0fcb42a940eb11201694e507b09fa04c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcb42a940eb11201694e507b09fa04c">&#9670;&nbsp;</a></span>EstimateLiftoffCodeSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::EstimateLiftoffCodeSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>body_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02380">2380</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                                                             {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#aec9c68fab0e549d2a7e8c7c55f76508f">kLiftoffFunctionOverhead</a> + <a class="code" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2 +</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;         body_size * <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#ae77bb61bd9be7313c88b369cec892fe4">kLiftoffCodeSizeMultiplier</a>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_ae77bb61bd9be7313c88b369cec892fe4"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#ae77bb61bd9be7313c88b369cec892fe4">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffCodeSizeMultiplier</a></div><div class="ttdeci">constexpr size_t kLiftoffCodeSizeMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02375">wasm-code-manager.cc:2375</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_aec9c68fab0e549d2a7e8c7c55f76508f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#aec9c68fab0e549d2a7e8c7c55f76508f">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffFunctionOverhead</a></div><div class="ttdeci">constexpr size_t kLiftoffFunctionOverhead</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02374">wasm-code-manager.cc:2374</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a52434390901f205f6bdb0402a183aef3"><div class="ttname"><a href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">v8::internal::kCodeAlignment</a></div><div class="ttdeci">constexpr intptr_t kCodeAlignment</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00958">globals.h:958</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="common_2globals_8h_source.html#l00958">v8::internal::kCodeAlignment</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02375">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffCodeSizeMultiplier</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02374">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffFunctionOverhead</a>.</p>

<p class="reference">Referenced by <a class="el" href="liftoff-compiler_8cc_source.html#l10519">v8::internal::wasm::anonymous_namespace{liftoff-compiler.cc}::NewLiftoffAssemblerBuffer()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a0fcb42a940eb11201694e507b09fa04c_icgraph.svg" width="100%" height="410"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5b6cfe5d63b1c5f3b54fdb34ed91c863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6cfe5d63b1c5f3b54fdb34ed91c863">&#9670;&nbsp;</a></span>EstimateNativeModuleCodeSize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02386">2386</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                                                                             {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <span class="keywordtype">int</span> code_section_length = 0;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="keywordflow">if</span> (module-&gt;num_declared_functions &gt; 0) {</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;functions.size(),</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;              module-&gt;num_imported_functions + module-&gt;num_declared_functions);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keyword">auto</span>* first_fn = &amp;module-&gt;functions[module-&gt;num_imported_functions];</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keyword">auto</span>* last_fn = &amp;module-&gt;functions.back();</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    code_section_length =</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(last_fn-&gt;code.end_offset() - first_fn-&gt;code.offset());</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">EstimateNativeModuleCodeSize</a>(module-&gt;num_declared_functions,</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                                      code_section_length);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a5b6cfe5d63b1c5f3b54fdb34ed91c863"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5b6cfe5d63b1c5f3b54fdb34ed91c863">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleCodeSize(const WasmModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02386">wasm-code-manager.cc:2386</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-module_8h_source.html#l00714">v8::internal::wasm::WasmModule::functions</a>, <a class="el" href="wasm-module_8h_source.html#l00684">v8::internal::wasm::WasmModule::num_declared_functions</a>, and <a class="el" href="wasm-module_8h_source.html#l00681">v8::internal::wasm::WasmModule::num_imported_functions</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-serialization_8cc_source.html#l01091">v8::internal::wasm::DeserializeNativeModule()</a>, <a class="el" href="module-compiler_8cc_source.html#l02378">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetOrCompileNewNativeModule()</a>, <a class="el" href="wasm-objects_8cc_source.html#l03313">v8::internal::AsmWasmData::New()</a>, <a class="el" href="module-compiler_8cc_source.html#l03387">v8::internal::wasm::AsyncStreamingProcessor::OnFinishedStream()</a>, <a class="el" href="module-compiler_8cc_source.html#l03275">v8::internal::wasm::AsyncStreamingProcessor::ProcessCodeSectionHeader()</a>, and <a class="el" href="module-compiler_8cc_source.html#l03044">v8::internal::wasm::AsyncCompileJob::DecodeModule::RunInBackground()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a5b6cfe5d63b1c5f3b54fdb34ed91c863_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1fbaa24f3a0fc9f3abd82032f97e2b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fbaa24f3a0fc9f3abd82032f97e2b53">&#9670;&nbsp;</a></span>EstimateNativeModuleCodeSize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>num_functions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>code_section_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02401">2401</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                                                                              {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="comment">// It can happen that even without any functions we still have a code section</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="comment">// of size 1, defining 0 function bodies. Still report 0 overall in this case.</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="keywordflow">if</span> (num_functions == 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160; </div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <span class="comment">// The size for the jump table and far jump table is added later, per code</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="comment">// space (see {OverheadPerCodeSpace}). We still need to add the overhead for</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="comment">// the lazy compile table once, though. There are configurations where we do</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="comment">// not need it (non-asm.js, no dynamic tiering and no lazy compilation), but</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="comment">// we ignore this here as most of the time we will need it.</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> lazy_compile_table_size =</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a52670982950dc90851cb4a1de6e97781">JumpTableAssembler::SizeForNumberOfLazyFunctions</a>(num_functions);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> overhead_per_function_turbofan =</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#a93d8640192430c5aa311574383d61852">kTurbofanFunctionOverhead</a> + <a class="code" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordtype">size_t</span> size_of_turbofan = overhead_per_function_turbofan * num_functions +</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                            <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#ac6aa19bf8c4fd80552e4c824e68487e7">kTurbofanCodeSizeMultiplier</a> * code_section_length;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> overhead_per_function_liftoff =</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#aec9c68fab0e549d2a7e8c7c55f76508f">kLiftoffFunctionOverhead</a> + <a class="code" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="comment">// Note: For asm.js we do not have Liftoff support, but this corner case is</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="comment">// being ignored here.</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  <span class="keywordtype">size_t</span> size_of_liftoff =</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.liftoff ? overhead_per_function_liftoff * num_functions +</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                             <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#ae77bb61bd9be7313c88b369cec892fe4">kLiftoffCodeSizeMultiplier</a> * code_section_length</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                       : 0;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <span class="comment">// Expect that typically not more than half of the functions are actually</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <span class="comment">// compiled.</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_lazy_compilation) size_of_liftoff /= 2;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="comment">// With dynamic tiering we don&#39;t expect to compile more than 25% with</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="comment">// TurboFan. If there is no liftoff though then all code will get generated</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="comment">// by TurboFan.</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.liftoff &amp;&amp; <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_dynamic_tiering) size_of_turbofan /= 4;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">return</span> lazy_compile_table_size + size_of_liftoff + size_of_turbofan;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a52670982950dc90851cb4a1de6e97781"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a52670982950dc90851cb4a1de6e97781">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfLazyFunctions</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfLazyFunctions(uint32_t slot_count)</div><div class="ttdef"><b>Definition:</b> <a href="jump-table-assembler_8h_source.html#l00111">jump-table-assembler.h:111</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_a93d8640192430c5aa311574383d61852"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#a93d8640192430c5aa311574383d61852">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kTurbofanFunctionOverhead</a></div><div class="ttdeci">constexpr size_t kTurbofanFunctionOverhead</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02372">wasm-code-manager.cc:2372</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_ac6aa19bf8c4fd80552e4c824e68487e7"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#ac6aa19bf8c4fd80552e4c824e68487e7">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kTurbofanCodeSizeMultiplier</a></div><div class="ttdeci">constexpr size_t kTurbofanCodeSizeMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02373">wasm-code-manager.cc:2373</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="common_2globals_8h_source.html#l00958">v8::internal::kCodeAlignment</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02375">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffCodeSizeMultiplier</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02374">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kLiftoffFunctionOverhead</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02373">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kTurbofanCodeSizeMultiplier</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02372">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::kTurbofanFunctionOverhead</a>, <a class="el" href="jump-table-assembler_8h_source.html#l00111">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfLazyFunctions()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a1fbaa24f3a0fc9f3abd82032f97e2b53_cgraph.svg" width="522" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a329950b560b30699bd218b9622eedda7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329950b560b30699bd218b9622eedda7">&#9670;&nbsp;</a></span>EstimateNativeModuleMetaDataSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02441">2441</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                              {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <span class="keywordtype">size_t</span> wasm_module_estimate = module-&gt;EstimateStoredSize();</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  uint32_t num_wasm_functions = module-&gt;num_declared_functions;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <span class="comment">// TODO(wasm): Include wire bytes size.</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <span class="keywordtype">size_t</span> native_module_estimate =</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      <span class="keyword">sizeof</span>(NativeModule) +                      <span class="comment">// NativeModule struct</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      (<span class="keyword">sizeof</span>(WasmCode*) * num_wasm_functions) +  <span class="comment">// code table size</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      (<span class="keyword">sizeof</span>(WasmCode) * num_wasm_functions);    <span class="comment">// code object size</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="keywordtype">size_t</span> jump_table_size = RoundUp&lt;kCodeAlignment&gt;(</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">JumpTableAssembler::SizeForNumberOfSlots</a>(num_wasm_functions));</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="keywordtype">size_t</span> far_jump_table_size =</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      RoundUp&lt;kCodeAlignment&gt;(<a class="code" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">JumpTableAssembler::SizeForNumberOfFarJumpSlots</a>(</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(),</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;          <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#a20eca43d1fce6cfb2a372f61af3c754f">NumWasmFunctionsInFarJumpTable</a>(num_wasm_functions)));</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <span class="keywordflow">return</span> wasm_module_estimate + native_module_estimate + jump_table_size +</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;         far_jump_table_size;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1BuiltinLookup_html_a934b529bc9c9104095b6c98ffaba9697"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">v8::internal::wasm::BuiltinLookup::BuiltinCount</a></div><div class="ttdeci">static constexpr int BuiltinCount()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-builtin-list_8h_source.html#l00203">wasm-builtin-list.h:203</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a5515cdbbc42cf3c78581ea13768f74bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfSlots</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfSlots(uint32_t slot_count)</div><div class="ttdef"><b>Definition:</b> <a href="jump-table-assembler_8h_source.html#l00080">jump-table-assembler.h:80</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a87add92ae969554c1b14d8ff3e8d7cd2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfFarJumpSlots</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfFarJumpSlots(int num_runtime_slots, int num_function_slots)</div><div class="ttdef"><b>Definition:</b> <a href="jump-table-assembler_8h_source.html#l00099">jump-table-assembler.h:99</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_a20eca43d1fce6cfb2a372f61af3c754f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#a20eca43d1fce6cfb2a372f61af3c754f">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::NumWasmFunctionsInFarJumpTable</a></div><div class="ttdeci">int NumWasmFunctionsInFarJumpTable(uint32_t num_declared_functions)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l00697">wasm-code-manager.cc:697</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-builtin-list_8h_source.html#l00203">v8::internal::wasm::BuiltinLookup::BuiltinCount()</a>, <a class="el" href="wasm-module_8cc_source.html#l00722">v8::internal::wasm::WasmModule::EstimateStoredSize()</a>, <a class="el" href="wasm-module_8h_source.html#l00684">v8::internal::wasm::WasmModule::num_declared_functions</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00697">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::NumWasmFunctionsInFarJumpTable()</a>, <a class="el" href="jump-table-assembler_8h_source.html#l00099">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfFarJumpSlots()</a>, and <a class="el" href="jump-table-assembler_8h_source.html#l00080">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfSlots()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00953">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::CreateWasmScript()</a>, <a class="el" href="wasm-objects_8cc_source.html#l03313">v8::internal::AsmWasmData::New()</a>, and <a class="el" href="wasm-objects_8cc_source.html#l00113">v8::internal::WasmModuleObject::New()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a329950b560b30699bd218b9622eedda7_cgraph.svg" width="100%" height="591"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a329950b560b30699bd218b9622eedda7_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa5c5ecc61ab174d77400fa3082e73537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c5ecc61ab174d77400fa3082e73537">&#9670;&nbsp;</a></span>FlushCodeLookupCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmCodeManager::FlushCodeLookupCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l03025">3025</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;                                                           {</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <span class="keywordflow">return</span> isolate-&gt;wasm_code_look_up_cache()-&gt;Flush();</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01691">v8::internal::wasm::WasmEngine::FreeNativeModule()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01787">v8::internal::wasm::WasmEngine::ReportLiveCodeFromStackForGC()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_aa5c5ecc61ab174d77400fa3082e73537_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a27ace0686f32545957a6b0948813db9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ace0686f32545957a6b0948813db9a">&#9670;&nbsp;</a></span>FreeNativeModule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmCodeManager::FreeNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; <a class="el" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> &gt;&#160;</td>
          <td class="paramname"><em>owned_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>committed_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02934">2934</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;                                                                       {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">native_modules_mutex_</a>);</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code_space : owned_code_space) {</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(code_space.IsReserved());</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;VMem Release: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot; (%zu)\n&quot;</span>,</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;               code_space.address(), code_space.end(), code_space.size());</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160; </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">CanRegisterUnwindInfoForNonABICompliantCodeRange</a>()) {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">win64_unwindinfo::UnregisterNonABICompliantCodeRange</a>(</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(code_space.address()));</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    }</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.erase(code_space.address());</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <a class="code" href="classv8_1_1internal_1_1ThreadIsolation.html#a6a523c13e4e0f1cd5dc4a57a754a616a">ThreadIsolation::UnregisterJitPage</a>(code_space.address(), code_space.size());</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    code_space.Free();</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!code_space.IsReserved());</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  }</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160; </div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(committed_size, <a class="code" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  [[maybe_unused]] <span class="keywordtype">size_t</span> old_committed =</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.fetch_sub(committed_size);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(committed_size, old_committed);</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a6a523c13e4e0f1cd5dc4a57a754a616a"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a6a523c13e4e0f1cd5dc4a57a754a616a">v8::internal::ThreadIsolation::UnregisterJitPage</a></div><div class="ttdeci">static void UnregisterJitPage(Address address, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8cc_source.html#l00430">code-memory-access.cc:430</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a2af86e498cb6c3f31bc898c6b40d287e"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">v8::internal::win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a></div><div class="ttdeci">bool CanRegisterUnwindInfoForNonABICompliantCodeRange()</div><div class="ttdef"><b>Definition:</b> <a href="unwinding-info-win64_8cc_source.html#l00030">unwinding-info-win64.cc:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a70f996f40a6b9c963c47bb920970d841"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">v8::internal::win64_unwindinfo::UnregisterNonABICompliantCodeRange</a></div><div class="ttdeci">void UnregisterNonABICompliantCodeRange(void *start)</div><div class="ttdef"><b>Definition:</b> <a href="unwinding-info-win64_8cc_source.html#l00575">unwinding-info-win64.cc:575</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="unwinding-info-win64_8cc_source.html#l00030">v8::internal::win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00159">v8::internal::CommitPageSize()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00489">DCHECK_LE</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00403">IsAligned()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01260">lookup_map_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01255">native_modules_mutex_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01248">total_committed_code_space_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00063">TRACE_HEAP</a>, <a class="el" href="code-memory-access_8cc_source.html#l00430">v8::internal::ThreadIsolation::UnregisterJitPage()</a>, and <a class="el" href="unwinding-info-win64_8cc_source.html#l00575">v8::internal::win64_unwindinfo::UnregisterNonABICompliantCodeRange()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l00640">v8::internal::wasm::WasmCodeAllocator::~WasmCodeAllocator()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a27ace0686f32545957a6b0948813db9a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a27ace0686f32545957a6b0948813db9a_icgraph.svg" width="470" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3efdc870dd21f075b3c408101c23feeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efdc870dd21f075b3c408101c23feeb">&#9670;&nbsp;</a></span>HasMemoryProtectionKeySupport()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmCodeManager::HasMemoryProtectionKeySupport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02465">2465</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                                                    {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1RwxMemoryWriteScope.html#a9771bab10900e92154b51ae8884ebd47">RwxMemoryWriteScope::IsSupported</a>();</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1RwxMemoryWriteScope_html_a9771bab10900e92154b51ae8884ebd47"><div class="ttname"><a href="classv8_1_1internal_1_1RwxMemoryWriteScope.html#a9771bab10900e92154b51ae8884ebd47">v8::internal::RwxMemoryWriteScope::IsSupported</a></div><div class="ttdeci">static bool IsSupported()</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access-inl_8h_source.html#l00373">code-memory-access-inl.h:373</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="code-memory-access-inl_8h_source.html#l00373">v8::internal::RwxMemoryWriteScope::IsSupported()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02474">MemoryProtectionKeysEnabled()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01543">v8::internal::wasm::WasmEngine::NewNativeModule()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a3efdc870dd21f075b3c408101c23feeb_cgraph.svg" width="527" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a3efdc870dd21f075b3c408101c23feeb_icgraph.svg" width="100%" height="436"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a2be288a7720a1f7bdf64f5060b7c782a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be288a7720a1f7bdf64f5060b7c782a">&#9670;&nbsp;</a></span>LookupCode() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * v8::internal::wasm::WasmCodeManager::LookupCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&#160;</td>
          <td class="paramname"><em>pc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02976">2976</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;                                                      {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  NativeModule* candidate = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">LookupNativeModule</a>(pc);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <span class="keywordflow">if</span> (candidate) <span class="keywordflow">return</span> candidate-&gt;Lookup(pc);</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a14ee1f266c89689eb799afe5f843dc41">Lookup</a>(pc);</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a65237f5b80dae7a92d86f131b6df4461"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">v8::internal::wasm::WasmCodeManager::LookupNativeModule</a></div><div class="ttdeci">NativeModule * LookupNativeModule(Address pc) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02961">wasm-code-manager.cc:2961</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a14ee1f266c89689eb799afe5f843dc41"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a14ee1f266c89689eb799afe5f843dc41">v8::internal::wasm::WasmImportWrapperCache::Lookup</a></div><div class="ttdeci">WasmCode * Lookup(Address pc) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00407">wasm-import-wrapper-cache.cc:407</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a36345041662f17bb39d27709c1cb78ac"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">v8::internal::wasm::GetWasmImportWrapperCache</a></div><div class="ttdeci">WasmImportWrapperCache * GetWasmImportWrapperCache()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02135">wasm-engine.cc:2135</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l02135">v8::internal::wasm::GetWasmImportWrapperCache()</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00407">v8::internal::wasm::WasmImportWrapperCache::Lookup()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02026">v8::internal::wasm::NativeModule::Lookup()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02961">LookupNativeModule()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a2be288a7720a1f7bdf64f5060b7c782a_cgraph.svg" width="100%" height="537"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a8b17776c8a4fe19718f2b1931544253f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b17776c8a4fe19718f2b1931544253f">&#9670;&nbsp;</a></span>LookupCode() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * v8::internal::wasm::WasmCodeManager::LookupCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&#160;</td>
          <td class="paramname"><em>pc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02982">2982</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;                                                                        {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="comment">// Since kNullAddress is used as a sentinel value, we should not try</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <span class="comment">// to look it up in the cache</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="keywordflow">if</span> (pc == <a class="code" href="namespacev8_1_1internal.html#acf6bafb5b8483a580f375393c413ee02">kNullAddress</a>) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="comment">// If &#39;isolate&#39; is nullptr, do not use a cache. This can happen when</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  <span class="comment">// called from function V8NameConverter::NameOfAddress</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  <span class="keywordflow">if</span> (isolate) {</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">return</span> isolate-&gt;wasm_code_look_up_cache()-&gt;GetCacheEntry(pc)-&gt;code;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    wasm::WasmCodeRefScope code_ref_scope;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a>(pc);</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  }</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a8b17776c8a4fe19718f2b1931544253f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">v8::internal::wasm::WasmCodeManager::LookupCode</a></div><div class="ttdeci">WasmCode * LookupCode(Isolate *isolate, Address pc) const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02982">wasm-code-manager.cc:2982</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acf6bafb5b8483a580f375393c413ee02"><div class="ttname"><a href="namespacev8_1_1internal.html#acf6bafb5b8483a580f375393c413ee02">v8::internal::kNullAddress</a></div><div class="ttdeci">static constexpr Address kNullAddress</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00053">v8-internal.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="v8-internal_8h_source.html#l00053">v8::internal::kNullAddress</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l01384">v8::internal::wasm::FeedbackMaker::AddCallIndirectCandidate()</a>, <a class="el" href="deoptimizer_8cc_source.html#l00602">v8::internal::Deoptimizer::Deoptimizer()</a>, <a class="el" href="deoptimizer_8cc_source.html#l00547">v8::internal::Deoptimizer::EnsureValidReturnAddress()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l03068">v8::internal::wasm::WasmCodeLookupCache::GetCacheEntry()</a>, <a class="el" href="frames_8cc_source.html#l00240">v8::internal::anonymous_namespace{frames.cc}::GetStateForFastCCallCallerFP()</a>, <a class="el" href="frames_8cc_source.html#l02239">v8::internal::CommonFrame::HasTaggedOutgoingParams()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01762">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::ReportLiveCodeFromFrameForGC()</a>, and <a class="el" href="isolate_8cc_source.html#l02254">v8::internal::Isolate::UnwindAndFindHandler()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8b17776c8a4fe19718f2b1931544253f_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a589a55d2b33354d07415b1a22cb00d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a589a55d2b33354d07415b1a22cb00d89">&#9670;&nbsp;</a></span>LookupCodeAndSafepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *, <a class="el" href="classv8_1_1internal_1_1SafepointEntry.html">SafepointEntry</a> &gt; v8::internal::wasm::WasmCodeManager::LookupCodeAndSafepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&#160;</td>
          <td class="paramname"><em>pc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02996">2996</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                                  {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keyword">auto</span>* entry = isolate-&gt;wasm_code_look_up_cache()-&gt;GetCacheEntry(pc);</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;  WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> = entry-&gt;code;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="comment">// For protected instructions we usually do not emit a safepoint because the</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <span class="comment">// frame will be unwound anyway. The exception is debugging code, where the</span></div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;  <span class="comment">// frame might be inspected if &quot;pause on exception&quot; is set.</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <span class="comment">// For those instructions, we thus need to explicitly return an empty</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="comment">// safepoint; using any previously registered safepoint can lead to crashes</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <span class="comment">// when we try to visit spill slots that do not hold tagged values at this</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  <span class="comment">// point.</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  <span class="comment">// Evaluate this condition only on demand (the fast path does not need it).</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  <span class="keyword">auto</span> expect_safepoint = [<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>, pc]() {</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_protected_instruction = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;IsProtectedInstruction(</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        pc - WasmFrameConstants::kProtectedInstructionReturnAddressOffset);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="keywordflow">return</span> !is_protected_instruction || <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;for_debugging();</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  };</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="keywordflow">if</span> (!entry-&gt;safepoint_entry.is_initialized() &amp;&amp; expect_safepoint()) {</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    entry-&gt;safepoint_entry = SafepointTable{<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>}.TryFindEntry(pc);</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(entry-&gt;safepoint_entry.is_initialized());</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expect_safepoint()) {</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(entry-&gt;safepoint_entry, SafepointTable{code}.TryFindEntry(pc));</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!entry-&gt;safepoint_entry.is_initialized());</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  }</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="keywordflow">return</span> std::make_pair(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>, entry-&gt;safepoint_entry);</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;}</div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00491">logging.h:491</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00491">DCHECK_NOT_NULL</a>, and <a class="el" href="safepoint-table_8cc_source.html#l00063">v8::internal::SafepointTable::TryFindEntry()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a589a55d2b33354d07415b1a22cb00d89_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a65237f5b80dae7a92d86f131b6df4461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65237f5b80dae7a92d86f131b6df4461">&#9670;&nbsp;</a></span>LookupNativeModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> * v8::internal::wasm::WasmCodeManager::LookupNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&#160;</td>
          <td class="paramname"><em>pc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02961">2961</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;                                                                  {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">native_modules_mutex_</a>);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.empty()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160; </div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <span class="keyword">auto</span> iter = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.upper_bound(pc);</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="keywordflow">if</span> (iter == <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.begin()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  --iter;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> region_start = iter-&gt;first;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> region_end = iter-&gt;second.first;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  NativeModule* candidate = iter-&gt;second.second;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160; </div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(candidate);</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <span class="keywordflow">return</span> region_start &lt;= pc &amp;&amp; pc &lt; region_end ? candidate : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00491">DCHECK_NOT_NULL</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01260">lookup_map_</a>, and <a class="el" href="wasm-code-manager_8h_source.html#l01255">native_modules_mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02976">LookupCode()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a65237f5b80dae7a92d86f131b6df4461_icgraph.svg" width="563" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a930893209d531231682fce4cbef728ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930893209d531231682fce4cbef728ed">&#9670;&nbsp;</a></span>MemoryProtectionKeysEnabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmCodeManager::MemoryProtectionKeysEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02474">2474</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                                                  {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">HasMemoryProtectionKeySupport</a>();</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a3efdc870dd21f075b3c408101c23feeb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">v8::internal::wasm::WasmCodeManager::HasMemoryProtectionKeySupport</a></div><div class="ttdeci">static bool HasMemoryProtectionKeySupport()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02465">wasm-code-manager.cc:2465</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-code-manager_8cc_source.html#l02465">HasMemoryProtectionKeySupport()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02267">TryAllocate()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a930893209d531231682fce4cbef728ed_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a930893209d531231682fce4cbef728ed_icgraph.svg" width="100%" height="410"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a2241851e1074b022606031a831966b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2241851e1074b022606031a831966b17">&#9670;&nbsp;</a></span>MemoryProtectionKeyWritable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmCodeManager::MemoryProtectionKeyWritable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02479">2479</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                                  {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">return</span> RwxMemoryWriteScope::IsPKUWritable();</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cbd92108ae1c153f66f40609aed5783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cbd92108ae1c153f66f40609aed5783">&#9670;&nbsp;</a></span>NewNativeModule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; v8::internal::wasm::WasmCodeManager::NewNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>&#160;</td>
          <td class="paramname"><em>detected_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>code_size_estimate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> &gt;&#160;</td>
          <td class="paramname"><em>module</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02487">2487</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                                                                       {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    VirtualMemory code_space;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    std::shared_ptr&lt;NativeModule&gt; ret;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="keyword">new</span> NativeModule(enabled_features, detected_features, compile_imports,</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                     std::move(code_space), std::move(module),</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                     isolate-&gt;async_counters(), &amp;ret);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="comment">// The constructor initialized the shared_ptr.</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(ret);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;New NativeModule (wasm-jitless) %p\n&quot;</span>, ret.get());</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.load() &gt;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5690c15d56eb42cffb868c23ac92f424">critical_committed_code_space_</a>.load()) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="comment">// Flush Liftoff code and record the flushed code size.</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_liftoff_code) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab84991e9216741ff8c932c1a64d5aced">FlushLiftoffCode</a>();</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    }</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    (<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1Isolate.html">v8::Isolate</a>*<span class="keyword">&gt;</span>(isolate))</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        -&gt;MemoryPressureNotification(<a class="code" href="namespacev8.html#ae0e9a25bf51e518585f555806e7dc7b9a5a20548c220f372fc701cae6de94040b">MemoryPressureLevel::kCritical</a>);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordtype">size_t</span> committed = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8657534718f35b1a258f6e93d2ee07cd">total_committed_code_space_</a>.load();</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a>, committed);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a5690c15d56eb42cffb868c23ac92f424">critical_committed_code_space_</a>.store(</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        committed + (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a102c2c6b55ae7094aaac669c22150174">max_committed_code_space_</a> - committed) / 2);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160; </div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="comment">// On 32-bit platforms where no far jumps are needed between code spaces, use</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// a reduced code size estimate. This saves some precious address space at the</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// cost of needing more code spaces, but those are cheaper if they do not</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="comment">// result in more far jumps.</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// For now it is the case that far jumps are only needed on 64-bit platforms,</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="comment">// so those two conditions can be interchanged. Think about which logic to use</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="comment">// once those diverge.</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  static_assert(<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a> ==</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                (<a class="code" href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">kSystemPointerSize</a> == <a class="code" href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">kInt64Size</a>));</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="keywordflow">if</span> constexpr (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a>) {</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    code_size_estimate /= 2;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160; </div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="keywordtype">size_t</span> code_vmem_size = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#af740a9a06db337429beba5125b64f657">ReservationSizeForWasmCode</a>(</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      code_size_estimate, module-&gt;num_declared_functions, 0);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(code_vmem_size == 0, module-&gt;num_declared_functions == 0);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160; </div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="comment">// The &#39;--wasm-max-initial-code-space-reservation&#39; testing flag can be used to</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="comment">// reduce the maximum size of the initial code space reservation (in MB).</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_initial_code_space_reservation &gt; 0) {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordtype">size_t</span> flag_max_bytes =</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_initial_code_space_reservation) *</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#af46551c5713d2a3a1be4dca973e521e0">MB</a>;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> (flag_max_bytes &lt; code_vmem_size) code_vmem_size = flag_max_bytes;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="comment">// Try up to two times; getting rid of dead JSArrayBuffer allocations might</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="comment">// require two GCs because the first GC maybe incremental and may have</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="comment">// floating garbage.</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> kAllocationRetries = 2;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  VirtualMemory code_space;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  base::AddressRegion code_space_region;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordflow">if</span> (code_vmem_size != 0) {</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> retries = 0;; ++retries) {</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      code_space = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a7ed36ebeb931a4b5b5cd1097891d60c1">TryAllocate</a>(code_vmem_size);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="keywordflow">if</span> (code_space.IsReserved()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      <span class="keywordflow">if</span> (retries == kAllocationRetries) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        <span class="keyword">auto</span> oom_detail = <a class="code" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{}</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;NewNativeModule cannot allocate code space of &quot;</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                          &lt;&lt; code_vmem_size &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <a class="code" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(isolate, <span class="stringliteral">&quot;Allocate initial wasm code space&quot;</span>,</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                                    oom_detail.PrintToArray().data());</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;      <span class="comment">// Run one GC, then try the allocation again.</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      isolate-&gt;heap()-&gt;MemoryPressureNotification(</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;          <a class="code" href="namespacev8.html#ae0e9a25bf51e518585f555806e7dc7b9a5a20548c220f372fc701cae6de94040b">MemoryPressureLevel::kCritical</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    code_space_region = code_space.region();</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(code_vmem_size, code_space.size());</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160; </div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  std::shared_ptr&lt;NativeModule&gt; ret;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keyword">new</span> NativeModule(enabled_features, detected_features,</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                   std::move(compile_imports),</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                   std::move(code_space), std::move(module),</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                   isolate-&gt;async_counters(), &amp;ret);</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="comment">// The constructor initialized the shared_ptr.</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(ret);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;New NativeModule %p: Mem: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;,+%zu\n&quot;</span>, ret.get(),</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;             code_space_region.begin(), code_space_region.size());</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160; </div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a4964601ddec44dd9566edc193900a11b">native_modules_mutex_</a>);</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a282904997b2ddd09190c6b70245e1596">lookup_map_</a>.insert(</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      std::make_pair(code_space_region.begin(),</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                     std::make_pair(code_space_region.end(), ret.get())));</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1Isolate.html">v8::Isolate</a></div><div class="ttdoc">Isolate represents an isolated instance of the V8 engine.</div><div class="ttdef"><b>Definition:</b> <a href="v8-isolate_8h_source.html#l00285">v8-isolate.h:285</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a1c38ae4d35483f2b9c6e5634c7bf4bd6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">v8::internal::wasm::NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a></div><div class="ttdeci">static constexpr bool kNeedsFarJumpsBetweenCodeSpaces</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l00621">wasm-code-manager.h:621</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a7ed36ebeb931a4b5b5cd1097891d60c1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a7ed36ebeb931a4b5b5cd1097891d60c1">v8::internal::wasm::WasmCodeManager::TryAllocate</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT VirtualMemory TryAllocate(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02267">wasm-code-manager.cc:2267</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ab84991e9216741ff8c932c1a64d5aced"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab84991e9216741ff8c932c1a64d5aced">v8::internal::wasm::WasmEngine::FlushLiftoffCode</a></div><div class="ttdeci">void FlushLiftoffCode()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01090">wasm-engine.cc:1090</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_html_af740a9a06db337429beba5125b64f657"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03.html#af740a9a06db337429beba5125b64f657">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::ReservationSizeForWasmCode</a></div><div class="ttdeci">size_t ReservationSizeForWasmCode(size_t needed_size, int num_declared_functions, size_t total_reserved_so_far)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l00730">wasm-code-manager.cc:730</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abc12fc3b25ebfb54c20b8479642acb94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">v8::internal::wasm::GetWasmEngine</a></div><div class="ttdeci">WasmEngine * GetWasmEngine()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02125">wasm-engine.cc:2125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a191fd08d000c1fc6a1c0d14655f1b711"><div class="ttname"><a href="namespacev8_1_1internal.html#a191fd08d000c1fc6a1c0d14655f1b711">v8::internal::kInt64Size</a></div><div class="ttdeci">constexpr int kInt64Size</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00403">globals.h:403</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a72cbfdfeabb9a401f279f7b80bcff67a"><div class="ttname"><a href="namespacev8_1_1internal.html#a72cbfdfeabb9a401f279f7b80bcff67a">v8::internal::kSystemPointerSize</a></div><div class="ttdeci">constexpr int kSystemPointerSize</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00411">globals.h:411</a></div></div>
<div class="ttc" id="anamespacev8_html_ae0e9a25bf51e518585f555806e7dc7b9a5a20548c220f372fc701cae6de94040b"><div class="ttname"><a href="namespacev8.html#ae0e9a25bf51e518585f555806e7dc7b9a5a20548c220f372fc701cae6de94040b">v8::MemoryPressureLevel::kCritical</a></div><div class="ttdeci">@ kCritical</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l01197">v8::internal::Isolate::async_counters()</a>, <a class="el" href="address-region_8h_source.html#l00033">v8::base::AddressRegion::begin()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01253">critical_committed_code_space_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00487">DCHECK_GE</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00489">DCHECK_LE</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00491">DCHECK_NOT_NULL</a>, <a class="el" href="address-region_8h_source.html#l00034">v8::base::AddressRegion::end()</a>, <a class="el" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01090">v8::internal::wasm::WasmEngine::FlushLiftoffCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02125">v8::internal::wasm::GetWasmEngine()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00236">v8::internal::VirtualMemory::IsReserved()</a>, <a class="el" href="namespacev8.html#ae0e9a25bf51e518585f555806e7dc7b9a5a20548c220f372fc701cae6de94040b">v8::kCritical</a>, <a class="el" href="common_2globals_8h_source.html#l00403">v8::internal::kInt64Size</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00621">v8::internal::wasm::NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a>, <a class="el" href="common_2globals_8h_source.html#l00411">v8::internal::kSystemPointerSize</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01260">lookup_map_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01246">max_committed_code_space_</a>, <a class="el" href="v8-internal_8h_source.html#l00056">v8::internal::MB</a>, <a class="el" href="heap_8cc_source.html#l04330">v8::internal::Heap::MemoryPressureNotification()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01255">native_modules_mutex_</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00243">v8::internal::VirtualMemory::region()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00730">v8::internal::wasm::anonymous_namespace{wasm-code-manager.cc}::ReservationSizeForWasmCode()</a>, <a class="el" href="address-region_8h_source.html#l00036">v8::base::AddressRegion::size()</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00263">v8::internal::VirtualMemory::size()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01248">total_committed_code_space_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00063">TRACE_HEAP</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02267">TryAllocate()</a>, <a class="el" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01543">v8::internal::wasm::WasmEngine::NewNativeModule()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8cbd92108ae1c153f66f40609aed5783_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8cbd92108ae1c153f66f40609aed5783_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a341cd2685f87e88063caaf2fb51eb63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341cd2685f87e88063caaf2fb51eb63d">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a>&amp; v8::internal::wasm::WasmCodeManager::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ed36ebeb931a4b5b5cd1097891d60c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed36ebeb931a4b5b5cd1097891d60c1">&#9670;&nbsp;</a></span>TryAllocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> v8::internal::wasm::WasmCodeManager::TryAllocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8cc_source.html#l02267">2267</a> of file <a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                                                      {</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <a class="code" href="classv8_1_1PageAllocator.html">v8::PageAllocator</a>* page_allocator = <a class="code" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>();</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, 0);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordtype">size_t</span> allocate_page_size = page_allocator-&gt;<a class="code" href="classv8_1_1PageAllocator.html#a92c2f6dbb3afa6c47dafd4c12ab4641f">AllocatePageSize</a>();</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = <a class="code" href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, allocate_page_size);</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> hint =</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">next_code_space_hint_</a>.fetch_add(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, std::memory_order_relaxed);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// When we start exposing Wasm in jitless mode, then the jitless flag</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">// will have to determine whether we set kMapAsJittable or not.</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.jitless);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  VirtualMemory mem(page_allocator, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>,</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                    PageAllocator::AllocationHint().WithAddress(</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(hint)),</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                    allocate_page_size,</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                    PageAllocator::Permission::kNoAccessWillJitLater);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="keywordflow">if</span> (!mem.IsReserved()) {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="comment">// Try resetting {next_code_space_hint_}, which might fail if another thread</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="comment">// bumped it in the meantime.</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> bumped_hint = hint + <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">next_code_space_hint_</a>.compare_exchange_weak(bumped_hint, hint,</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                                                std::memory_order_relaxed);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  }</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;VMem alloc: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot; (%zu)\n&quot;</span>, mem.address(),</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;             mem.end(), mem.size());</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="keywordflow">if</span> (mem.address() != hint) {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="comment">// If the hint was ignored, just store the end of the new vmem area</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="comment">// unconditionally, potentially racing with other concurrent allocations (it</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="comment">// does not really matter which end pointer we keep in that case).</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a058cd97298c26c958e790365aa0153b9">next_code_space_hint_</a>.store(mem.end(), std::memory_order_relaxed);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="comment">// Don&#39;t pre-commit the code cage on Windows since it uses memory and it&#39;s not</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="comment">// required for recommit.</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="comment">// iOS cannot adjust page permissions for MAP_JIT&#39;d pages, they are set as RWX</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="comment">// at the start.</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="preprocessor">#if !defined(V8_OS_WIN) &amp;&amp; !defined(V8_OS_IOS)</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">MemoryProtectionKeysEnabled</a>()) {</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">ThreadIsolation::Enabled</a>()) {</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">ThreadIsolation::MakeExecutable</a>(mem.address(), mem.size()));</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(base::MemoryProtectionKey::SetPermissionsAndKey(</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;          mem.region(), <a class="code" href="classv8_1_1PageAllocator.html#a88f74b164fe97e053259f67a95758415adc8515d6a0f879ed482ce27eca7301fe">PageAllocator::kReadWriteExecute</a>,</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;          RwxMemoryWriteScope::memory_protection_key()));</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code" href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">SetPermissions</a>(<a class="code" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>(), mem.address(), mem.size(),</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                         <a class="code" href="classv8_1_1PageAllocator.html#a88f74b164fe97e053259f67a95758415adc8515d6a0f879ed482ce27eca7301fe">PageAllocator::kReadWriteExecute</a>));</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  page_allocator-&gt;<a class="code" href="classv8_1_1PageAllocator.html#ad0de847c922e25f63d82494d997f441d">DiscardSystemPages</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(mem.address()),</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                     mem.size());</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// !defined(V8_OS_WIN) &amp;&amp; !defined(V8_OS_IOS)</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160; </div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <a class="code" href="classv8_1_1internal_1_1ThreadIsolation.html#a9fff9d0a2fb22b0853a69400bea0f618">ThreadIsolation::RegisterJitPage</a>(mem.address(), mem.size());</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keywordflow">return</span> mem;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1PageAllocator_html"><div class="ttname"><a href="classv8_1_1PageAllocator.html">v8::PageAllocator</a></div><div class="ttdoc">A V8 memory page allocator.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00455">v8-platform.h:455</a></div></div>
<div class="ttc" id="aclassv8_1_1PageAllocator_html_a92c2f6dbb3afa6c47dafd4c12ab4641f"><div class="ttname"><a href="classv8_1_1PageAllocator.html#a92c2f6dbb3afa6c47dafd4c12ab4641f">v8::PageAllocator::AllocatePageSize</a></div><div class="ttdeci">virtual size_t AllocatePageSize()=0</div><div class="ttdoc">Gets the page granularity for AllocatePages and FreePages.</div></div>
<div class="ttc" id="aclassv8_1_1PageAllocator_html_ad0de847c922e25f63d82494d997f441d"><div class="ttname"><a href="classv8_1_1PageAllocator.html#ad0de847c922e25f63d82494d997f441d">v8::PageAllocator::DiscardSystemPages</a></div><div class="ttdeci">virtual bool DiscardSystemPages(void *address, size_t size)</div><div class="ttdoc">Frees memory in the given [address, address + size) range.</div><div class="ttdef"><b>Definition:</b> <a href="v8-platform_8h_source.html#l00590">v8-platform.h:590</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a42ebfac4aa3bcade2327daf0cf5efb7f"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">v8::internal::ThreadIsolation::Enabled</a></div><div class="ttdeci">static bool Enabled()</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8cc_source.html#l00042">code-memory-access.cc:42</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a9fff9d0a2fb22b0853a69400bea0f618"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a9fff9d0a2fb22b0853a69400bea0f618">v8::internal::ThreadIsolation::RegisterJitPage</a></div><div class="ttdeci">static void RegisterJitPage(Address address, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8cc_source.html#l00420">code-memory-access.cc:420</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ad690ad6c8189d648d7cc8ec987d882c1"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">v8::internal::ThreadIsolation::MakeExecutable</a></div><div class="ttdeci">static bool MakeExecutable(Address address, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="code-memory-access_8cc_source.html#l00474">code-memory-access.cc:474</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a930893209d531231682fce4cbef728ed"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">v8::internal::wasm::WasmCodeManager::MemoryProtectionKeysEnabled</a></div><div class="ttdeci">static bool MemoryProtectionKeysEnabled()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02474">wasm-code-manager.cc:2474</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a3df0b28b666e942ffb9d7d04acdb9715"><div class="ttname"><a href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space size(in Mbytes)&quot;)     DEFINE_INT(random_gc_interval</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0b20b06fc0f215d9b9eac890977a53e7"><div class="ttname"><a href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">v8::internal::SetPermissions</a></div><div class="ttdeci">bool SetPermissions(v8::PageAllocator *page_allocator, void *address, size_t size, PageAllocator::Permission access)</div><div class="ttdef"><b>Definition:</b> <a href="utils_2allocation_8cc_source.html#l00201">allocation.cc:201</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a5113f5db9eec9c30ecea57b8d4175f2d"><div class="ttname"><a href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a></div><div class="ttdeci">constexpr T RoundUp(T x, intptr_t m)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00387">macros.h:387</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2utils_2allocation_8h_source.html#l00249">v8::internal::VirtualMemory::address()</a>, <a class="el" href="classv8_1_1PageAllocator.html#a92c2f6dbb3afa6c47dafd4c12ab4641f">v8::PageAllocator::AllocatePageSize()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00124">CHECK</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00486">DCHECK_GT</a>, <a class="el" href="v8-platform_8h_source.html#l00590">v8::PageAllocator::DiscardSystemPages()</a>, <a class="el" href="code-memory-access_8cc_source.html#l00042">v8::internal::ThreadIsolation::Enabled()</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00254">v8::internal::VirtualMemory::end()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00067">v8::internal::GetPlatformPageAllocator()</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00236">v8::internal::VirtualMemory::IsReserved()</a>, <a class="el" href="v8-platform_8h_source.html#l00490">v8::PageAllocator::kReadWriteExecute</a>, <a class="el" href="code-memory-access_8cc_source.html#l00474">v8::internal::ThreadIsolation::MakeExecutable()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02474">MemoryProtectionKeysEnabled()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01271">next_code_space_hint_</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00243">v8::internal::VirtualMemory::region()</a>, <a class="el" href="code-memory-access_8cc_source.html#l00420">v8::internal::ThreadIsolation::RegisterJitPage()</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00387">RoundUp()</a>, <a class="el" href="utils_2allocation_8cc_source.html#l00201">v8::internal::SetPermissions()</a>, <a class="el" href="src_2utils_2allocation_8h_source.html#l00263">v8::internal::VirtualMemory::size()</a>, <a class="el" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00063">TRACE_HEAP</a>, <a class="el" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00059">v8::internal::wasm::WasmImportWrapperCache::LazyInitialize()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a7ed36ebeb931a4b5b5cd1097891d60c1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a7ed36ebeb931a4b5b5cd1097891d60c1_icgraph.svg" width="100%" height="520"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a6f5398d6af0cd323486b07d55a75b3b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5398d6af0cd323486b07d55a75b3b4">&#9670;&nbsp;</a></span>WasmCodeAllocator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html">WasmCodeAllocator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01224">1224</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

</div>
</div>
<a id="adcf2e34d98d65c16197a4f27b1f6a780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf2e34d98d65c16197a4f27b1f6a780">&#9670;&nbsp;</a></span>WasmCodeLookupCache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache.html">WasmCodeLookupCache</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01225">1225</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

</div>
</div>
<a id="ae8c3f3090b503421e6e68ca9d396b62f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8c3f3090b503421e6e68ca9d396b62f">&#9670;&nbsp;</a></span>WasmEngine</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01226">1226</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

</div>
</div>
<a id="a558c8e718b18b385d961367381b8652f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a558c8e718b18b385d961367381b8652f">&#9670;&nbsp;</a></span>WasmImportWrapperCache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html">WasmImportWrapperCache</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01227">1227</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5690c15d56eb42cffb868c23ac92f424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5690c15d56eb42cffb868c23ac92f424">&#9670;&nbsp;</a></span>critical_committed_code_space_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&gt; v8::internal::wasm::WasmCodeManager::critical_committed_code_space_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01253">1253</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>.</p>

</div>
</div>
<a id="a282904997b2ddd09190c6b70245e1596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a282904997b2ddd09190c6b70245e1596">&#9670;&nbsp;</a></span>lookup_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>, std::pair&lt;<a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>*&gt; &gt; v8::internal::wasm::WasmCodeManager::lookup_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01260">1260</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02260">AssignRange()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02934">FreeNativeModule()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02961">LookupNativeModule()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>.</p>

</div>
</div>
<a id="a102c2c6b55ae7094aaac669c22150174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102c2c6b55ae7094aaac669c22150174">&#9670;&nbsp;</a></span>max_committed_code_space_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmCodeManager::max_committed_code_space_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01246">1246</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02203">Commit()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>.</p>

</div>
</div>
<a id="a4964601ddec44dd9566edc193900a11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4964601ddec44dd9566edc193900a11b">&#9670;&nbsp;</a></span>native_modules_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> v8::internal::wasm::WasmCodeManager::native_modules_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01255">1255</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02260">AssignRange()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02934">FreeNativeModule()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02961">LookupNativeModule()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>.</p>

</div>
</div>
<a id="a058cd97298c26c958e790365aa0153b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a058cd97298c26c958e790365aa0153b9">&#9670;&nbsp;</a></span>next_code_space_hint_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&gt; v8::internal::wasm::WasmCodeManager::next_code_space_hint_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01271">1271</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02267">TryAllocate()</a>.</p>

</div>
</div>
<a id="a8657534718f35b1a258f6e93d2ee07cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8657534718f35b1a258f6e93d2ee07cd">&#9670;&nbsp;</a></span>total_committed_code_space_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&gt; v8::internal::wasm::WasmCodeManager::total_committed_code_space_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-code-manager_8h_source.html#l01248">1248</a> of file <a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02203">Commit()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02241">Decommit()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02934">FreeNativeModule()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02487">NewNativeModule()</a>, and <a class="el" href="wasm-code-manager_8cc_source.html#l02190">~WasmCodeManager()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/V8SourceCode/src/wasm/<a class="el" href="wasm-code-manager_8h_source.html">wasm-code-manager.h</a></li>
<li>/mnt/V8SourceCode/src/wasm/<a class="el" href="wasm-code-manager_8cc_source.html">wasm-code-manager.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacev8.html">v8</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal_1_1wasm.html">wasm</a></li><li class="navelem"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html">WasmCodeManager</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:15:27 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
