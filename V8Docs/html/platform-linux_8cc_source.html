<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: /mnt/V8SourceCode/src/base/platform/platform-linux.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('platform-linux_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">platform-linux.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="platform-linux_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Platform-specific code for Linux goes here. For the POSIX-compatible</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// parts, the implementation is in platform-posix.cc.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="platform-linux_8h.html">src/base/platform/platform-linux.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="semaphore_8h.html">semaphore.h</a>&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;sys/prctl.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;sys/syscall.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Ubuntu Dapper requires memory pages to be marked as</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// executable. Otherwise, OS raises an exception when executing code</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// in that page.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span>  <span class="comment">// open</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="strings_8h.html">strings.h</a>&gt;</span>   <span class="comment">// index</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;sys/mman.h&gt;</span>  <span class="comment">// mmap &amp; munmap &amp; mremap</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span>  <span class="comment">// open</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;sys/sysmacros.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span>  <span class="comment">// mmap &amp; munmap</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span>     <span class="comment">// sysconf</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="src_2base_2logging_8h.html">src/base/logging.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="base_2memory_8h.html">src/base/memory.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#undef MAP_TYPE</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="src_2base_2macros_8h.html">src/base/macros.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="platform-posix-time_8h.html">src/base/platform/platform-posix-time.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="platform-posix_8h.html">src/base/platform/platform-posix.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="src_2base_2platform_2platform_8h.html">src/base/platform/platform.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacev8.html">v8</a> {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">namespace </span>base {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;TimezoneCache* <a class="code" href="classv8_1_1base_1_1OS.html#ad481e6ce21d8194ec47b14e59e8aadaf">OS::CreateTimezoneCache</a>() {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> PosixDefaultTimezoneCache();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1base_1_1OS.html#a13338b78af444988376b9ea52903b1c4">OS::SignalCodeMovingGC</a>() {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// Support for ll_prof.py.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// The Linux profiler built into the kernel logs all mmap&#39;s with</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// PROT_EXEC so that analysis tools can properly attribute ticks. We</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// do a mmap with a name known by ll_prof.py and immediately munmap</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// it. This injects a GC marker into the stream of events generated</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// by the kernel and allows us to synchronize V8 code log and the</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// kernel log.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">long</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> = sysconf(_SC_PAGESIZE);  <span class="comment">// NOLINT(runtime/int)</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  FILE* f = fopen(OS::GetGCFakeMMapFile(), <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (f == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    OS::PrintError(<span class="stringliteral">&quot;Failed to open %s\n&quot;</span>, OS::GetGCFakeMMapFile());</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classv8_1_1base_1_1OS.html#a3abddefa2e7ad8ab0628e6b44fad5a6b">OS::Abort</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordtype">void</span>* addr = mmap(<a class="code" href="classv8_1_1base_1_1OS.html#a0dd812385ed06989631ba4146d2b649b">OS::GetRandomMmapAddr</a>(), <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, PROT_READ | PROT_EXEC,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    MAP_PRIVATE, fileno(f), 0);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(MAP_FAILED, addr);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classv8_1_1base_1_1OS.html#af49ddc64d9aed9c71565d48a80e9f54d">Free</a>(addr, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  fclose(f);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classv8_1_1base_1_1OS.html#aff9e48f701976b8f1ee442b905a305be">OS::AdjustSchedulingParams</a>() {}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classv8_1_1base_1_1OS.html#a1155ad2acb431858c7cc0ed6bbf40ec4">   79</a></span>&#160;<span class="keywordtype">void</span>* <a class="code" href="classv8_1_1base_1_1OS.html#a1155ad2acb431858c7cc0ed6bbf40ec4">OS::RemapShared</a>(<span class="keywordtype">void</span>* old_address, <span class="keywordtype">void</span>* new_address, <span class="keywordtype">size_t</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">void</span>* <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> =</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      mremap(old_address, 0, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, MREMAP_FIXED | MREMAP_MAYMOVE, new_address);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> == MAP_FAILED) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> == new_address);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;std::optional&lt;OS::MemoryRange&gt; <a class="code" href="classv8_1_1base_1_1OS.html#af4f55d86b418913f11eba29009fbd0f1">OS::GetFirstFreeMemoryRangeWithin</a>(</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classuintptr__t.html">OS::Address</a> boundary_start, <a class="code" href="classuintptr__t.html">OS::Address</a> boundary_end, <span class="keywordtype">size_t</span> minimum_size,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">size_t</span> alignment) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  std::optional&lt;OS::MemoryRange&gt; <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// This function assumes that the layout of the file is as follows:</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// hex_start_addr-hex_end_addr rwxp &lt;unused data&gt; [binary_file_name]</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// and the lines are arranged in increasing order of address.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// If we encounter an unexpected situation we abort scanning further entries.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  FILE* fp = fopen(<span class="stringliteral">&quot;/proc/self/maps&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> (fp == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Search for the gaps between existing virtual memory (vm) areas. If the gap</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// contains enough space for the requested-size range that is within the</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// boundary, push the overlapped memory range to the vector.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> gap_start = 0, gap_end = 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// This loop will terminate once the scanning hits an EOF or reaches the gap</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// at the higher address to the end of boundary.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> vm_start;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> vm_end;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">while</span> (fscanf(fp, <span class="stringliteral">&quot;%&quot;</span> <a class="code" href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot;-%&quot;</span> <a class="code" href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a>, &amp;vm_start, &amp;vm_end) == 2 &amp;&amp;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         gap_start &lt; boundary_end) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Visit the gap at the lower address to this vm.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    gap_end = vm_start;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Skip the gaps at the lower address to the start of boundary.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (gap_end &gt; boundary_start) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// The available area is the overlap of the gap and boundary. Push</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="comment">// the overlapped memory range to the vector if there is enough space.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keyword">const</span> <a class="code" href="classuintptr__t.html">uintptr_t</a> overlap_start =</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          <a class="code" href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(std::max(gap_start, boundary_start), alignment);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keyword">const</span> <a class="code" href="classuintptr__t.html">uintptr_t</a> overlap_end =</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          <a class="code" href="src_2base_2macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(std::min(gap_end, boundary_end), alignment);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">if</span> (overlap_start &lt; overlap_end &amp;&amp;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          overlap_end - overlap_start &gt;= minimum_size) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = {overlap_start, overlap_end};</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Continue to visit the next gap.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    gap_start = vm_end;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">int</span> c;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Skip characters until we reach the end of the line or EOF.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      c = getc(fp);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    } <span class="keywordflow">while</span> ((c != EOF) &amp;&amp; (c != <span class="charliteral">&#39;\n&#39;</span>));</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (c == EOF) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  fclose(fp);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">//  static</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structv8_1_1base_1_1MemoryRegion.html#abd20813104908d9ee6dcc047661a56a5">  143</a></span>&#160;std::optional&lt;MemoryRegion&gt; <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#abd20813104908d9ee6dcc047661a56a5">MemoryRegion::FromMapsLine</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* line) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a> region;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">unsigned</span> dev_major = 0, dev_minor = 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a3afaa66017b038b9da1bd205baa3aac5">inode</a> = 0;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordtype">int</span> path_index = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a> = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// The format is:</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// address           perms offset  dev   inode   pathname</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// 08048000-08056000 r-xp 00000000 03:0c 64593   /usr/sbin/gpm</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// The final %n term captures the offset in the input string, which is used</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// to determine the path name. It *does not* increment the return value.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// Refer to man 3 sscanf for details.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (sscanf(line,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;             <span class="stringliteral">&quot;%&quot;</span> <a class="code" href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot;-%&quot;</span> <a class="code" href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a> <span class="stringliteral">&quot; %4c %&quot;</span> <a class="code" href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;             <span class="stringliteral">&quot; %x:%x %&quot;</span> <a class="code" href="src_2base_2macros_8h.html#a5647046a5349ec401aa3ae0c65a1b755">V8PRIdPTR</a> <span class="stringliteral">&quot; %n&quot;</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;             &amp;region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a2b5da50c7a2bc052b635924f40d52352">start</a>, &amp;region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a408edd7c270a95c2e642c244d13f3c62">end</a>, region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">permissions</a>, &amp;<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;             &amp;dev_major, &amp;dev_minor, &amp;<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a3afaa66017b038b9da1bd205baa3aac5">inode</a>, &amp;path_index) &lt; 7) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">permissions</a>[4] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a3afaa66017b038b9da1bd205baa3aac5">inode</a> = <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a3afaa66017b038b9da1bd205baa3aac5">inode</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a> = <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#aaed18dccd5345d02d3ded2e9e9cba11c">dev</a> = makedev(dev_major, dev_minor);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">pathname</a>.assign(line + path_index);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">return</span> region;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html">  172</a></span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// Parses /proc/self/maps.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a14ae74eca1feee35f573559336191e84">  174</a></span>&#160;std::unique_ptr&lt;std::vector&lt;MemoryRegion&gt;&gt; <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a14ae74eca1feee35f573559336191e84">ParseProcSelfMaps</a>(</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    FILE* fp, std::function&lt;<span class="keywordtype">bool</span>(<span class="keyword">const</span> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a>&amp;)&gt; predicate,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">bool</span> early_stopping) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = std::make_unique&lt;std::vector&lt;MemoryRegion&gt;&gt;();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">if</span> (!fp) fp = fopen(<span class="stringliteral">&quot;/proc/self/maps&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Allocate enough room to be able to store a full file name.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// 55ac243aa000-55ac243ac000 r--p 00000000 fe:01 31594735 /usr/bin/head</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxLineLength = 2 * FILENAME_MAX;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  std::unique_ptr&lt;char[]&gt; line = std::make_unique&lt;char[]&gt;(kMaxLineLength);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// This loop will terminate once the scanning hits an EOF.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordtype">bool</span> error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    error = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// Read to the end of the line. Exit if the read fails.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (fgets(line.get(), kMaxLineLength, fp) == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (feof(fp)) error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">size_t</span> line_length = strlen(line.get());</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Empty line at the end.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (!line_length) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// Line was truncated.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (line.get()[line_length - 1] != <span class="charliteral">&#39;\n&#39;</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    line.get()[line_length - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    std::optional&lt;MemoryRegion&gt; region = <a class="code" href="structv8_1_1base_1_1MemoryRegion.html#abd20813104908d9ee6dcc047661a56a5">MemoryRegion::FromMapsLine</a>(line.get());</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (!region) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (predicate(*region)) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;push_back(std::move(*region));</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (early_stopping) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  fclose(fp);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (!error &amp;&amp; !<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>-&gt;empty()) <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a616a67882e36d6bdb7133fd8d727bbe6">  227</a></span>&#160;<a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a> <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a616a67882e36d6bdb7133fd8d727bbe6">FindEnclosingMapping</a>(<a class="code" href="classuintptr__t.html">uintptr_t</a> target_start, <span class="keywordtype">size_t</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a14ae74eca1feee35f573559336191e84">ParseProcSelfMaps</a>(</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a>&amp; region) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a2b5da50c7a2bc052b635924f40d52352">start</a> &lt;= target_start &amp;&amp; target_start + <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a> &lt; region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a408edd7c270a95c2e642c244d13f3c62">end</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      },</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keyword">true</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> (*<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>)[0];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="namespacev8_1_1base.html#a507858304e9a536b59777e512370d584">  242</a></span>&#160;std::vector&lt;OS::SharedLibraryAddress&gt; <a class="code" href="namespacev8_1_1base.html#a507858304e9a536b59777e512370d584">GetSharedLibraryAddresses</a>(FILE* fp) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">auto</span> regions = <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a14ae74eca1feee35f573559336191e84">ParseProcSelfMaps</a>(</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      fp,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      [](<span class="keyword">const</span> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a>&amp; region) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">permissions</a>[0] == <span class="charliteral">&#39;r&#39;</span> &amp;&amp; region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">permissions</a>[1] == <span class="charliteral">&#39;-&#39;</span> &amp;&amp;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">permissions</a>[2] == <span class="charliteral">&#39;x&#39;</span>) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          return true;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      },</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keyword">false</span>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (!regions) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  std::vector&lt;OS::SharedLibraryAddress&gt; <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structv8_1_1base_1_1MemoryRegion.html">MemoryRegion</a>&amp; region : *regions) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classuintptr__t.html">uintptr_t</a> start = region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a2b5da50c7a2bc052b635924f40d52352">start</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#ifdef V8_OS_ANDROID</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">pathname</a>.size() &lt; 4 ||</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">pathname</a>.compare(region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">pathname</a>.size() - 4, 4, <span class="stringliteral">&quot;.apk&quot;</span>) != 0) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="comment">// Only adjust {start} based on {offset} if the file isn&#39;t the APK,</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="comment">// since we load the library directly from the APK and don&#39;t want to</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="comment">// apply the offset of the .so in the APK as the libraries offset.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      start -= region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    start -= region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">offset</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.emplace_back(region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">pathname</a>, start, region.<a class="code" href="structv8_1_1base_1_1MemoryRegion.html#a408edd7c270a95c2e642c244d13f3c62">end</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;std::vector&lt;OS::SharedLibraryAddress&gt; <a class="code" href="classv8_1_1base_1_1OS.html#a9cf3746d7a51ec0026075a73469171bd">OS::GetSharedLibraryAddresses</a>() {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a507858304e9a536b59777e512370d584">return ::v8::base::GetSharedLibraryAddresses</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">// static</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classv8_1_1base_1_1OS.html#ac064118be94dda1784253656be03884e">OS::RemapPages</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* address, <span class="keywordtype">size_t</span> <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <span class="keywordtype">void</span>* new_address,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    MemoryPermission access) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classuintptr__t.html">uintptr_t</a> address_addr = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">uintptr_t</a><span class="keyword">&gt;</span>(address);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(address_addr, <a class="code" href="classv8_1_1base_1_1OS.html#a256fc9a746d9709bee086741843b3f2c">AllocatePageSize</a>()));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classuintptr__t.html">uintptr_t</a><span class="keyword">&gt;</span>(new_address), <a class="code" href="classv8_1_1base_1_1OS.html#a256fc9a746d9709bee086741843b3f2c">AllocatePageSize</a>()));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code" href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(<a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, <a class="code" href="classv8_1_1base_1_1OS.html#a256fc9a746d9709bee086741843b3f2c">AllocatePageSize</a>()));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  MemoryRegion enclosing_region = <a class="code" href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a616a67882e36d6bdb7133fd8d727bbe6">FindEnclosingMapping</a>(address_addr, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// Not found.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">if</span> (!enclosing_region.start) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// Anonymous mapping?</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">if</span> (enclosing_region.pathname.empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// Since the file is already in use for executable code, this is most likely</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// to fail due to sandboxing, e.g. if open() is blocked outright.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// In Chromium on Android, the sandbox allows openat() but prohibits</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// open(). However, the libc uses openat() in its open() wrapper, and the</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// SELinux restrictions allow us to read from the path we want to look at,</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// so we are in the clear.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// Note that this may not be allowed by the sandbox on Linux (and Chrome</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// OS). On these systems, consider using mremap() with the MREMAP_DONTUNMAP</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// flag. However, since we need it on non-anonymous mapping, this would only</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// be available starting with version 5.13.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">int</span> fd = open(enclosing_region.pathname.c_str(), O_RDONLY);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span> (fd == -1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Now we have a file descriptor to the same path the data we want to remap</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// comes from. But... is it the *same* file? This is not guaranteed (e.g. in</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// case of updates), so to avoid hard-to-track bugs, check that the</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// underlying file is the same using the device number and the inode. Inodes</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// are not unique across filesystems, and can be reused. The check works</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// here though, since we have the problems:</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// - Inode uniqueness: check device numbers.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// - Inode reuse: the initial file is still open, since we are running code</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">//   from it. So its inode cannot have been reused.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keyword">struct </span>stat stat_buf;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (fstat(fd, &amp;stat_buf)) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    close(fd);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// Not the same file.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span> (stat_buf.st_dev != enclosing_region.dev ||</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      stat_buf.st_ino != enclosing_region.inode) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    close(fd);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">size_t</span> offset_in_mapping = address_addr - enclosing_region.start;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">size_t</span> offset_in_file = enclosing_region.offset + offset_in_mapping;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">int</span> protection = <a class="code" href="namespacev8_1_1base.html#a17ca5a04ca6b2527ba088147ecde366e">GetProtectionFromMemoryPermission</a>(access);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordtype">void</span>* mapped_address = mmap(new_address, <a class="code" href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a>, protection,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                              MAP_FIXED | MAP_PRIVATE, fd, offset_in_file);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// mmap() keeps the file open.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  close(fd);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (mapped_address != new_address) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// Should not happen, MAP_FIXED should always map where we want.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}  <span class="comment">// namespace base</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="abase_2memory_8h_html"><div class="ttname"><a href="base_2memory_8h.html">memory.h</a></div></div>
<div class="ttc" id="aclassuintptr__t_html"><div class="ttname"><a href="classuintptr__t.html">uintptr_t</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a0dd812385ed06989631ba4146d2b649b"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a0dd812385ed06989631ba4146d2b649b">v8::base::OS::GetRandomMmapAddr</a></div><div class="ttdeci">static void * GetRandomMmapAddr()</div><div class="ttdef"><b>Definition:</b> <a href="platform-posix_8cc_source.html#l00354">platform-posix.cc:354</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a1155ad2acb431858c7cc0ed6bbf40ec4"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a1155ad2acb431858c7cc0ed6bbf40ec4">v8::base::OS::RemapShared</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT void * RemapShared(void *old_address, void *new_address, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8cc_source.html#l00079">platform-linux.cc:79</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a13338b78af444988376b9ea52903b1c4"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a13338b78af444988376b9ea52903b1c4">v8::base::OS::SignalCodeMovingGC</a></div><div class="ttdeci">static void SignalCodeMovingGC()</div><div class="ttdef"><b>Definition:</b> <a href="platform-aix_8cc_source.html#l00128">platform-aix.cc:128</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a256fc9a746d9709bee086741843b3f2c"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a256fc9a746d9709bee086741843b3f2c">v8::base::OS::AllocatePageSize</a></div><div class="ttdeci">static size_t AllocatePageSize()</div><div class="ttdef"><b>Definition:</b> <a href="platform-posix_8cc_source.html#l00330">platform-posix.cc:330</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a3abddefa2e7ad8ab0628e6b44fad5a6b"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a3abddefa2e7ad8ab0628e6b44fad5a6b">v8::base::OS::Abort</a></div><div class="ttdeci">static void Abort()</div><div class="ttdef"><b>Definition:</b> <a href="platform-posix_8cc_source.html#l00759">platform-posix.cc:759</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a9cf3746d7a51ec0026075a73469171bd"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a9cf3746d7a51ec0026075a73469171bd">v8::base::OS::GetSharedLibraryAddresses</a></div><div class="ttdeci">static std::vector&lt; SharedLibraryAddress &gt; GetSharedLibraryAddresses()</div><div class="ttdef"><b>Definition:</b> <a href="platform-aix_8cc_source.html#l00088">platform-aix.cc:88</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_ac064118be94dda1784253656be03884e"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#ac064118be94dda1784253656be03884e">v8::base::OS::RemapPages</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT bool RemapPages(const void *address, size_t size, void *new_address, MemoryPermission access)</div><div class="ttdef"><b>Definition:</b> <a href="platform-darwin_8cc_source.html#l00184">platform-darwin.cc:184</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_ad481e6ce21d8194ec47b14e59e8aadaf"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#ad481e6ce21d8194ec47b14e59e8aadaf">v8::base::OS::CreateTimezoneCache</a></div><div class="ttdeci">static TimezoneCache * CreateTimezoneCache()</div><div class="ttdef"><b>Definition:</b> <a href="platform-aix_8cc_source.html#l00082">platform-aix.cc:82</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_af49ddc64d9aed9c71565d48a80e9f54d"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#af49ddc64d9aed9c71565d48a80e9f54d">v8::base::OS::Free</a></div><div class="ttdeci">static void Free(void *address, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="platform-cygwin_8cc_source.html#l00150">platform-cygwin.cc:150</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_af4f55d86b418913f11eba29009fbd0f1"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#af4f55d86b418913f11eba29009fbd0f1">v8::base::OS::GetFirstFreeMemoryRangeWithin</a></div><div class="ttdeci">static std::optional&lt; MemoryRange &gt; GetFirstFreeMemoryRangeWithin(Address boundary_start, Address boundary_end, size_t minimum_size, size_t alignment)</div><div class="ttdef"><b>Definition:</b> <a href="platform-aix_8cc_source.html#l00132">platform-aix.cc:132</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_aff9e48f701976b8f1ee442b905a305be"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#aff9e48f701976b8f1ee442b905a305be">v8::base::OS::AdjustSchedulingParams</a></div><div class="ttdeci">static void AdjustSchedulingParams()</div><div class="ttdef"><b>Definition:</b> <a href="platform-aix_8cc_source.html#l00130">platform-aix.cc:130</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a3df0b28b666e942ffb9d7d04acdb9715"><div class="ttname"><a href="flag-definitions_8h.html#a3df0b28b666e942ffb9d7d04acdb9715">size</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enables Turboshaft s StaticAssert and CheckTurboshaftTypeOf operations Wasm code into JS functions via the JS to Wasm wrappers are still inlined in TurboFan For controlling whether to at see turbo inline js wasm calls enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information enable Turbolev features that we want to ship in the not too far future trace individual Turboshaft reduction steps trace intermediate Turboshaft reduction steps trace Turboshaft s if else to switch reducer invocation count threshold for early optimization Enables optimizations which favor memory size over execution speed Enables sampling allocation profiler with X as a sample interval min size of a semi the new space consists of two semi spaces max size of the preconfigured old space size(in Mbytes)&quot;)     DEFINE_INT(random_gc_interval</div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03_html_a14ae74eca1feee35f573559336191e84"><div class="ttname"><a href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a14ae74eca1feee35f573559336191e84">v8::base::anonymous_namespace{platform-linux.cc}::ParseProcSelfMaps</a></div><div class="ttdeci">std::unique_ptr&lt; std::vector&lt; MemoryRegion &gt; &gt; ParseProcSelfMaps(FILE *fp, std::function&lt; bool(const MemoryRegion &amp;)&gt; predicate, bool early_stopping)</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8cc_source.html#l00174">platform-linux.cc:174</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03_html_a616a67882e36d6bdb7133fd8d727bbe6"><div class="ttname"><a href="namespacev8_1_1base_1_1anonymous__namespace_02platform-linux_8cc_03.html#a616a67882e36d6bdb7133fd8d727bbe6">v8::base::anonymous_namespace{platform-linux.cc}::FindEnclosingMapping</a></div><div class="ttdeci">MemoryRegion FindEnclosingMapping(uintptr_t target_start, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8cc_source.html#l00227">platform-linux.cc:227</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a17ca5a04ca6b2527ba088147ecde366e"><div class="ttname"><a href="namespacev8_1_1base.html#a17ca5a04ca6b2527ba088147ecde366e">v8::base::GetProtectionFromMemoryPermission</a></div><div class="ttdeci">int GetProtectionFromMemoryPermission(OS::MemoryPermission access)</div><div class="ttdef"><b>Definition:</b> <a href="platform-posix_8cc_source.html#l00202">platform-posix.cc:202</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a507858304e9a536b59777e512370d584"><div class="ttname"><a href="namespacev8_1_1base.html#a507858304e9a536b59777e512370d584">v8::base::GetSharedLibraryAddresses</a></div><div class="ttdeci">std::vector&lt; OS::SharedLibraryAddress &gt; GetSharedLibraryAddresses(FILE *fp)</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8cc_source.html#l00242">platform-linux.cc:242</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdoc">This file provides additional API on top of the default one for making API calls, which come from emb...</div><div class="ttdef"><b>Definition:</b> <a href="api-arguments-inl_8h_source.html#l00019">api-arguments-inl.h:19</a></div></div>
<div class="ttc" id="aplatform-linux_8h_html"><div class="ttname"><a href="platform-linux_8h.html">platform-linux.h</a></div></div>
<div class="ttc" id="aplatform-posix-time_8h_html"><div class="ttname"><a href="platform-posix-time_8h.html">platform-posix-time.h</a></div></div>
<div class="ttc" id="aplatform-posix_8h_html"><div class="ttname"><a href="platform-posix_8h.html">platform-posix.h</a></div></div>
<div class="ttc" id="asemaphore_8h_html"><div class="ttname"><a href="semaphore_8h.html">semaphore.h</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html"><div class="ttname"><a href="src_2base_2logging_8h.html">logging.h</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00067">logging.h:67</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00481">logging.h:481</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html"><div class="ttname"><a href="src_2base_2macros_8h.html">macros.h</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a5113f5db9eec9c30ecea57b8d4175f2d"><div class="ttname"><a href="src_2base_2macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a></div><div class="ttdeci">constexpr T RoundUp(T x, intptr_t m)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00387">macros.h:387</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a5647046a5349ec401aa3ae0c65a1b755"><div class="ttname"><a href="src_2base_2macros_8h.html#a5647046a5349ec401aa3ae0c65a1b755">V8PRIdPTR</a></div><div class="ttdeci">#define V8PRIdPTR</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00332">macros.h:332</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_aa0de4a420e74c8df8076fc2aaf4af27a"><div class="ttname"><a href="src_2base_2macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a></div><div class="ttdeci">constexpr T RoundDown(T x, intptr_t m)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00371">macros.h:371</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="src_2base_2macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00403">macros.h:403</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_adafd98459092322383b0f5ebcc7c342f"><div class="ttname"><a href="src_2base_2macros_8h.html#adafd98459092322383b0f5ebcc7c342f">V8PRIxPTR</a></div><div class="ttdeci">#define V8PRIxPTR</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00331">macros.h:331</a></div></div>
<div class="ttc" id="asrc_2base_2platform_2platform_8h_html"><div class="ttname"><a href="src_2base_2platform_2platform_8h.html">platform.h</a></div></div>
<div class="ttc" id="astrings_8h_html"><div class="ttname"><a href="strings_8h.html">strings.h</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html">v8::base::MemoryRegion</a></div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00022">platform-linux.h:22</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_a2b5da50c7a2bc052b635924f40d52352"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#a2b5da50c7a2bc052b635924f40d52352">v8::base::MemoryRegion::start</a></div><div class="ttdeci">uintptr_t start</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00023">platform-linux.h:23</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_a3afaa66017b038b9da1bd205baa3aac5"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#a3afaa66017b038b9da1bd205baa3aac5">v8::base::MemoryRegion::inode</a></div><div class="ttdeci">ino_t inode</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00028">platform-linux.h:28</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_a408edd7c270a95c2e642c244d13f3c62"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#a408edd7c270a95c2e642c244d13f3c62">v8::base::MemoryRegion::end</a></div><div class="ttdeci">uintptr_t end</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00024">platform-linux.h:24</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_a5e7cb1c1810b39ffbe882baf2b947e76"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#a5e7cb1c1810b39ffbe882baf2b947e76">v8::base::MemoryRegion::pathname</a></div><div class="ttdeci">std::string pathname</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00029">platform-linux.h:29</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_a8aedf9290d65a5b1f33bf1fb43497d41"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#a8aedf9290d65a5b1f33bf1fb43497d41">v8::base::MemoryRegion::offset</a></div><div class="ttdeci">off_t offset</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00026">platform-linux.h:26</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_aaed18dccd5345d02d3ded2e9e9cba11c"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#aaed18dccd5345d02d3ded2e9e9cba11c">v8::base::MemoryRegion::dev</a></div><div class="ttdeci">dev_t dev</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00027">platform-linux.h:27</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_abd20813104908d9ee6dcc047661a56a5"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#abd20813104908d9ee6dcc047661a56a5">v8::base::MemoryRegion::FromMapsLine</a></div><div class="ttdeci">static std::optional&lt; MemoryRegion &gt; FromMapsLine(const char *line)</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8cc_source.html#l00143">platform-linux.cc:143</a></div></div>
<div class="ttc" id="astructv8_1_1base_1_1MemoryRegion_html_af835f64aebcb46c47ac40e5e9d159b14"><div class="ttname"><a href="structv8_1_1base_1_1MemoryRegion.html#af835f64aebcb46c47ac40e5e9d159b14">v8::base::MemoryRegion::permissions</a></div><div class="ttdeci">char permissions[5]</div><div class="ttdef"><b>Definition:</b> <a href="platform-linux_8h_source.html#l00025">platform-linux.h:25</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_19225156eb7ba052e31d1a736469917a.html">mnt</a></li><li class="navelem"><a class="el" href="dir_3536f6d353061322e9ef91134b76e9ed.html">V8SourceCode</a></li><li class="navelem"><a class="el" href="dir_fbd53c45610d490c9fb8d0716db4e3a3.html">src</a></li><li class="navelem"><a class="el" href="dir_15cd31420d7325e73dc6fd0ece2ba0c9.html">base</a></li><li class="navelem"><a class="el" href="dir_f5fc3cea0d66853614439fa4557b29a7.html">platform</a></li><li class="navelem"><a class="el" href="platform-linux_8cc.html">platform-linux.cc</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 15:50:40 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
