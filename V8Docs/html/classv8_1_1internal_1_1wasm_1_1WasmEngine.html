<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>V8 Project: v8::internal::wasm::WasmEngine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">V8 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classv8_1_1internal_1_1wasm_1_1WasmEngine.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classv8_1_1internal_1_1wasm_1_1WasmEngine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">v8::internal::wasm::WasmEngine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for v8::internal::wasm::WasmEngine:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo.html">CurrentGCInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo.html">IsolateInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine_1_1LogCodesTask.html">LogCodesTask</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo.html">NativeModuleInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a34ff6a2da3d8ef3b85ad087cc4316ebe"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> = std::unordered_map&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *, std::vector&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &gt;</td></tr>
<tr class="separator:a34ff6a2da3d8ef3b85ad087cc4316ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aee97c8a6e684e2b5b646159ee0c4ec73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aee97c8a6e684e2b5b646159ee0c4ec73">WasmEngine</a> ()</td></tr>
<tr class="separator:aee97c8a6e684e2b5b646159ee0c4ec73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2dd2ef9c0107b22840176b39516a80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9b2dd2ef9c0107b22840176b39516a80">WasmEngine</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a> &amp;)=delete</td></tr>
<tr class="separator:a9b2dd2ef9c0107b22840176b39516a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2608ebf20e9f161b6b3404100dd39a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abb2608ebf20e9f161b6b3404100dd39a">operator=</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a> &amp;)=delete</td></tr>
<tr class="separator:abb2608ebf20e9f161b6b3404100dd39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2a33b8b1886a22b78cfa5c01d6db7c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af2a33b8b1886a22b78cfa5c01d6db7c1">~WasmEngine</a> ()</td></tr>
<tr class="separator:af2a33b8b1886a22b78cfa5c01d6db7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad8e9ffbc98ee56a23ee1e76a115b34f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aad8e9ffbc98ee56a23ee1e76a115b34f">SyncValidate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt; bytes)</td></tr>
<tr class="separator:aad8e9ffbc98ee56a23ee1e76a115b34f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb16551c0447fba6c603b839a75ba21d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MaybeHandle.html">MaybeHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1AsmWasmData.html">AsmWasmData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#acb16551c0447fba6c603b839a75ba21d">SyncCompileTranslatedAsmJs</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *thrower, <a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt; bytes, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt; <a class="el" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>, <a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt; asm_js_offset_table_bytes, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapNumber.html">HeapNumber</a> &gt; uses_bitset, <a class="el" href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858b">LanguageMode</a> language_mode)</td></tr>
<tr class="separator:acb16551c0447fba6c603b839a75ba21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c943d125db63cdbe8ba21b5e1fd594"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab2c943d125db63cdbe8ba21b5e1fd594">FinalizeTranslatedAsmJs</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1AsmWasmData.html">AsmWasmData</a> &gt; asm_wasm_data, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt; <a class="el" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>)</td></tr>
<tr class="separator:ab2c943d125db63cdbe8ba21b5e1fd594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2610a2d8fa2c20a8569e4cb665d194"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3f2610a2d8fa2c20a8569e4cb665d194">SyncCompile</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *thrower, <a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt; bytes)</td></tr>
<tr class="separator:a3f2610a2d8fa2c20a8569e4cb665d194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0771f813d154e4af40da6689bbd5e50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmInstanceObject.html">WasmInstanceObject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af0771f813d154e4af40da6689bbd5e50">SyncInstantiate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *thrower, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt; module_object, <a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSReceiver.html">JSReceiver</a> &gt; imports, <a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSArrayBuffer.html">JSArrayBuffer</a> &gt; memory)</td></tr>
<tr class="separator:af0771f813d154e4af40da6689bbd5e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17c088fdbc894379d393baf814073f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa17c088fdbc894379d393baf814073f7">AsyncCompile</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt; resolver, <a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt; bytes, const char *api_method_name_for_errors)</td></tr>
<tr class="separator:aa17c088fdbc894379d393baf814073f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefbc53197e63d504193b408056d37721"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aefbc53197e63d504193b408056d37721">AsyncInstantiate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1InstantiationResultResolver.html">InstantiationResultResolver</a> &gt; resolver, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt; module_object, <a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSReceiver.html">JSReceiver</a> &gt; imports)</td></tr>
<tr class="separator:aefbc53197e63d504193b408056d37721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea968c225f6306c9b4e49d693ac436b"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html">StreamingDecoder</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aeea968c225f6306c9b4e49d693ac436b">StartStreamingCompilation</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt; context, const char *api_method_name, std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt; resolver)</td></tr>
<tr class="separator:aeea968c225f6306c9b4e49d693ac436b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a8d27da954c0e30d403ffa8fcb7bf5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a91a8d27da954c0e30d403ffa8fcb7bf5">CompileFunction</a> (<a class="el" href="classv8_1_1internal_1_1Counters.html">Counters</a> *counters, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *native_module, uint32_t function_index, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> <a class="el" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>)</td></tr>
<tr class="separator:a91a8d27da954c0e30d403ffa8fcb7bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d9f3495e9f458675c5ef14337bf2a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7d9f3495e9f458675c5ef14337bf2a1">EnterDebuggingForIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:aa7d9f3495e9f458675c5ef14337bf2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1735499d473116e5a4d0e94de8d92f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac1735499d473116e5a4d0e94de8d92f3">LeaveDebuggingForIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:ac1735499d473116e5a4d0e94de8d92f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f2628694fa52ace7df480260cd32f99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5f2628694fa52ace7df480260cd32f99">ImportNativeModule</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; shared_module, <a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const char &gt; source_url)</td></tr>
<tr class="separator:a5f2628694fa52ace7df480260cd32f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab84991e9216741ff8c932c1a64d5aced"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab84991e9216741ff8c932c1a64d5aced">FlushLiftoffCode</a> ()</td></tr>
<tr class="separator:ab84991e9216741ff8c932c1a64d5aced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370767746722805372a02e277c57ffbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a370767746722805372a02e277c57ffbb">GetLiftoffCodeSizeForTesting</a> ()</td></tr>
<tr class="separator:a370767746722805372a02e277c57ffbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92bf3bf6d5ba9b15735d9ae1a3643817"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1AccountingAllocator.html">AccountingAllocator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a92bf3bf6d5ba9b15735d9ae1a3643817">allocator</a> ()</td></tr>
<tr class="separator:a92bf3bf6d5ba9b15735d9ae1a3643817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b9e9de10bcec49ae84e995d61d66cd"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1CompilationStatistics.html">CompilationStatistics</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae8b9e9de10bcec49ae84e995d61d66cd">GetOrCreateTurboStatistics</a> ()</td></tr>
<tr class="separator:ae8b9e9de10bcec49ae84e995d61d66cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54471342125fa1a1edbfce3cbabc9ab6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a54471342125fa1a1edbfce3cbabc9ab6">DumpAndResetTurboStatistics</a> ()</td></tr>
<tr class="separator:a54471342125fa1a1edbfce3cbabc9ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af051e260505b417cdea6c8b0aa8b5871"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af051e260505b417cdea6c8b0aa8b5871">DumpTurboStatistics</a> ()</td></tr>
<tr class="separator:af051e260505b417cdea6c8b0aa8b5871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935fb8d614cf2741a9b6bb23671b0e76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1CodeTracer.html">CodeTracer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a935fb8d614cf2741a9b6bb23671b0e76">GetCodeTracer</a> ()</td></tr>
<tr class="separator:a935fb8d614cf2741a9b6bb23671b0e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8378f5ecdd236147a0b3c590c12899b8"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8378f5ecdd236147a0b3c590c12899b8">RemoveCompileJob</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> *job)</td></tr>
<tr class="separator:a8378f5ecdd236147a0b3c590c12899b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6afdb3fea4c987fb6d9d515c5faa630"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab6afdb3fea4c987fb6d9d515c5faa630">HasRunningCompileJob</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:ab6afdb3fea4c987fb6d9d515c5faa630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7c0c7f764d2f3c2c0038ef4a13d1f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9e7c0c7f764d2f3c2c0038ef4a13d1f9">DeleteCompileJobsOnContext</a> (<a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt; context)</td></tr>
<tr class="separator:a9e7c0c7f764d2f3c2c0038ef4a13d1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa103ab294ff94d0c588ea065e30e7038"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa103ab294ff94d0c588ea065e30e7038">DeleteCompileJobsOnIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:aa103ab294ff94d0c588ea065e30e7038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ca4a2df3e7f8a56c31571ade78372e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af7ca4a2df3e7f8a56c31571ade78372e">AddIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:af7ca4a2df3e7f8a56c31571ade78372e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb290a299b20f78b6b32641fc21325c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#adb290a299b20f78b6b32641fc21325c5">RemoveIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:adb290a299b20f78b6b32641fc21325c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1c94eee0072e6f73f9262078571a4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a2b1c94eee0072e6f73f9262078571a4f">LogCode</a> (<a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt;)</td></tr>
<tr class="separator:a2b1c94eee0072e6f73f9262078571a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4176e62a5efdce84668b7f54c67e0244"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4176e62a5efdce84668b7f54c67e0244">LogWrapperCode</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *)</td></tr>
<tr class="separator:a4176e62a5efdce84668b7f54c67e0244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b254189555e5f2910b7759e78cb241"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *)</td></tr>
<tr class="separator:a75b254189555e5f2910b7759e78cb241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a2af861380fd22a236025164b81737"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a80a2af861380fd22a236025164b81737">LogOutstandingCodesForIsolate</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *)</td></tr>
<tr class="separator:a80a2af861380fd22a236025164b81737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a8ec2f950e76dfa9e2ec483c15a372"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac7a8ec2f950e76dfa9e2ec483c15a372">NewNativeModule</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, std::shared_ptr&lt; const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> &gt; module, <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> code_size_estimate)</td></tr>
<tr class="separator:ac7a8ec2f950e76dfa9e2ec483c15a372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26391b903e117ed93787d080f0bc2fe4"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a26391b903e117ed93787d080f0bc2fe4">MaybeGetNativeModule</a> (<a class="el" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80">ModuleOrigin</a> origin, <a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt; wire_bytes, const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;compile_imports, <a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:a26391b903e117ed93787d080f0bc2fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae049eb40219a3e542bf2811e42ac1bb8"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae049eb40219a3e542bf2811e42ac1bb8">UpdateNativeModuleCache</a> (<a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> has_error, std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; native_module, <a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate)</td></tr>
<tr class="separator:ae049eb40219a3e542bf2811e42ac1bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d8b862532f9f18b75db0b33dfa2b4dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3d8b862532f9f18b75db0b33dfa2b4dd">GetStreamingCompilationOwnership</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> prefix_hash, const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;compile_imports)</td></tr>
<tr class="separator:a3d8b862532f9f18b75db0b33dfa2b4dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df42171758a2a5af30388a2b7e97de8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9df42171758a2a5af30388a2b7e97de8">StreamingCompilationFailed</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> prefix_hash, const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;compile_imports)</td></tr>
<tr class="separator:a9df42171758a2a5af30388a2b7e97de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf9cd2000af17e8d1f3ebbb9d4cd7c09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aaf9cd2000af17e8d1f3ebbb9d4cd7c09">FreeNativeModule</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *)</td></tr>
<tr class="separator:aaf9cd2000af17e8d1f3ebbb9d4cd7c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8fad47fa7de440c822c9e19d34208a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ac8fad47fa7de440c822c9e19d34208a0">ClearWeakScriptHandle</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, std::unique_ptr&lt; <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> * &gt; location)</td></tr>
<tr class="separator:ac8fad47fa7de440c822c9e19d34208a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af21252e29d47e802fb0fb84a6739ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6af21252e29d47e802fb0fb84a6739ad">SampleTopTierCodeSizeInAllIsolates</a> (const std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; &amp;)</td></tr>
<tr class="separator:a6af21252e29d47e802fb0fb84a6739ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7322f883d6ce700b7a38c40727a78787"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7322f883d6ce700b7a38c40727a78787">ReportLiveCodeForGC</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *, std::unordered_set&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;live_code)</td></tr>
<tr class="separator:a7322f883d6ce700b7a38c40727a78787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43921e4c5d6e746d3a75996e28361521"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a43921e4c5d6e746d3a75996e28361521">ReportLiveCodeFromStackForGC</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *)</td></tr>
<tr class="separator:a43921e4c5d6e746d3a75996e28361521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad160f95280e9e5005ea39a3f1cb65b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6ad160f95280e9e5005ea39a3f1cb65b">AddPotentiallyDeadCode</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *)</td></tr>
<tr class="separator:a6ad160f95280e9e5005ea39a3f1cb65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a5d3973fe4bb4cdbe9d00c815d2d94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a33a5d3973fe4bb4cdbe9d00c815d2d94">TriggerCodeGCForTesting</a> ()</td></tr>
<tr class="separator:a33a5d3973fe4bb4cdbe9d00c815d2d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7205b4150830ce82a81d687f9f0765af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7205b4150830ce82a81d687f9f0765af">FreeDeadCode</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> &amp;, std::vector&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;)</td></tr>
<tr class="separator:a7205b4150830ce82a81d687f9f0765af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf17922093194860a0bbc0beea92716"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aebf17922093194860a0bbc0beea92716">FreeDeadCodeLocked</a> (const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> &amp;, std::vector&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;)</td></tr>
<tr class="separator:aebf17922093194860a0bbc0beea92716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e0184f058142bc46a5b93f2f8061b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">GetOrCreateScript</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *, const std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; &amp;, <a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const char &gt; source_url)</td></tr>
<tr class="separator:a88e0184f058142bc46a5b93f2f8061b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e03dccdce1bc0ab3c0adaf5d7843c8c"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1OperationsBarrier.html">OperationsBarrier</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a2e03dccdce1bc0ab3c0adaf5d7843c8c">GetBarrierForBackgroundCompile</a> ()</td></tr>
<tr class="separator:a2e03dccdce1bc0ab3c0adaf5d7843c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82694f241e35d38f8f882c255e49e743"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">TypeCanonicalizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a82694f241e35d38f8f882c255e49e743">type_canonicalizer</a> ()</td></tr>
<tr class="separator:a82694f241e35d38f8f882c255e49e743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab054f27e8218b5a80d290c14d1c6db27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab054f27e8218b5a80d290c14d1c6db27">DecodeAllNameSections</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider.html">CanonicalTypeNamesProvider</a> *target)</td></tr>
<tr class="separator:ab054f27e8218b5a80d290c14d1c6db27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ef5a29aa357f79043a5f8631b18785"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors.html">compiler::WasmCallDescriptors</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ef5a29aa357f79043a5f8631b18785">call_descriptors</a> ()</td></tr>
<tr class="separator:ab5ef5a29aa357f79043a5f8631b18785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5fba3adb4605b6aa26dd5da626734d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5fba3adb4605b6aa26dd5da626734d6">EstimateCurrentMemoryConsumption</a> () const</td></tr>
<tr class="separator:ab5fba3adb4605b6aa26dd5da626734d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e34a8169c3a723824780c6ac126654"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a32e34a8169c3a723824780c6ac126654">PrintCurrentMemoryConsumptionEstimate</a> () const</td></tr>
<tr class="separator:a32e34a8169c3a723824780c6ac126654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5147b0f617e7f09fa772e669a5f84c58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5147b0f617e7f09fa772e669a5f84c58">GetDeoptsExecutedCount</a> () const</td></tr>
<tr class="separator:a5147b0f617e7f09fa772e669a5f84c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1be1c372613f35998f4b316e21ef7683"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a1be1c372613f35998f4b316e21ef7683">IncrementDeoptsExecutedCount</a> ()</td></tr>
<tr class="separator:a1be1c372613f35998f4b316e21ef7683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607eb9a1f2f1b6d542c11a0b030cd56f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a607eb9a1f2f1b6d542c11a0b030cd56f">NativeModuleCount</a> () const</td></tr>
<tr class="separator:a607eb9a1f2f1b6d542c11a0b030cd56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0dc3794ded31c3d4f26cb020d2ffe332"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0dc3794ded31c3d4f26cb020d2ffe332">InitializeOncePerProcess</a> ()</td></tr>
<tr class="separator:a0dc3794ded31c3d4f26cb020d2ffe332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bda543358e208aec76ae5da75d96eb2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3bda543358e208aec76ae5da75d96eb2">GlobalTearDown</a> ()</td></tr>
<tr class="separator:a3bda543358e208aec76ae5da75d96eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d3649a654e59febca437472b29ba82d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a9d3649a654e59febca437472b29ba82d">NewOrphanedGlobalHandle</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> **pointer)</td></tr>
<tr class="separator:a9d3649a654e59febca437472b29ba82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0f0f6a499ad560407b32ab5b81aaa3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3b0f0f6a499ad560407b32ab5b81aaa3">FreeAllOrphanedGlobalHandles</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> *start)</td></tr>
<tr class="separator:a3b0f0f6a499ad560407b32ab5b81aaa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031170af170d5bb164813d9c84467999"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a031170af170d5bb164813d9c84467999">GetNondeterminismAddr</a> ()</td></tr>
<tr class="separator:a031170af170d5bb164813d9c84467999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa14ec7df66897b46477fc275b9d47800"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa14ec7df66897b46477fc275b9d47800">had_nondeterminism</a> ()</td></tr>
<tr class="separator:aa14ec7df66897b46477fc275b9d47800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97fb0af7b57585ca92456077115b16a7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a97fb0af7b57585ca92456077115b16a7">set_had_nondeterminism</a> ()</td></tr>
<tr class="separator:a97fb0af7b57585ca92456077115b16a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b70b2a53d091016505e717012cb09dd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0b70b2a53d091016505e717012cb09dd">clear_nondeterminism</a> ()</td></tr>
<tr class="separator:a0b70b2a53d091016505e717012cb09dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8d959cfc3867745d04ace1ec94bb5209"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8d959cfc3867745d04ace1ec94bb5209">CreateAsyncCompileJob</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *isolate, <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled, <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports, <a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt; bytes, <a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt; context, const char *api_method_name, std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt; resolver, <a class="el" href="classint.html">int</a> compilation_id)</td></tr>
<tr class="separator:a8d959cfc3867745d04ace1ec94bb5209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7d7fff282f6e414ed462f4d7b0c8a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aae7d7fff282f6e414ed462f4d7b0c8a0">TriggerCodeGC_Locked</a> (<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> dead_code_limit)</td></tr>
<tr class="separator:aae7d7fff282f6e414ed462f4d7b0c8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef409600fd7f21493340e1b9372247ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aef409600fd7f21493340e1b9372247ea">TriggerGC</a> (int8_t gc_sequence_index)</td></tr>
<tr class="separator:aef409600fd7f21493340e1b9372247ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c99b313fb0dcd2dc0e032f8a945b55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad4c99b313fb0dcd2dc0e032f8a945b55">RemoveIsolateFromCurrentGC</a> (<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *)</td></tr>
<tr class="separator:ad4c99b313fb0dcd2dc0e032f8a945b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a560f639666a3676d954d73ef3324b99e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a560f639666a3676d954d73ef3324b99e">PotentiallyFinishCurrentGC</a> ()</td></tr>
<tr class="separator:a560f639666a3676d954d73ef3324b99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97284d3dcb8da7d6978f2fbcd45a503"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ae97284d3dcb8da7d6978f2fbcd45a503">EnableCodeLogging</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *)</td></tr>
<tr class="separator:ae97284d3dcb8da7d6978f2fbcd45a503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f23ad6a455e30455551d8122228bd82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a1f23ad6a455e30455551d8122228bd82">DisableCodeLogging</a> (<a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *)</td></tr>
<tr class="separator:a1f23ad6a455e30455551d8122228bd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5da025226f11c1a8371a2e1c24ca7663"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1AccountingAllocator.html">AccountingAllocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5da025226f11c1a8371a2e1c24ca7663">allocator_</a></td></tr>
<tr class="separator:a5da025226f11c1a8371a2e1c24ca7663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ecf5f37f1b52c347845f35cb19f3d9"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classint.html">int</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">next_compilation_id_</a> {0}</td></tr>
<tr class="separator:ab5ecf5f37f1b52c347845f35cb19f3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcca0bc03dc84027c94cdba6950a8bb"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classint.html">int</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4dcca0bc03dc84027c94cdba6950a8bb">deopts_executed_</a> {0}</td></tr>
<tr class="separator:a4dcca0bc03dc84027c94cdba6950a8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd72ebd08e53260ccaf49d8c2ab00353"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">TypeCanonicalizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afd72ebd08e53260ccaf49d8c2ab00353">type_canonicalizer_</a></td></tr>
<tr class="separator:afd72ebd08e53260ccaf49d8c2ab00353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab160110a4540fe336bc9834d389c6bc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors.html">compiler::WasmCallDescriptors</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab160110a4540fe336bc9834d389c6bc6">call_descriptors_</a></td></tr>
<tr class="separator:ab160110a4540fe336bc9834d389c6bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a372578a0d4f4dec77a0530fda00e4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a></td></tr>
<tr class="separator:a6a372578a0d4f4dec77a0530fda00e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7983ea4754315852b25c620f17514c3"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> *, std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a></td></tr>
<tr class="separator:aa7983ea4754315852b25c620f17514c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd8499b0e2af398339967dd5a3297f51"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1CompilationStatistics.html">CompilationStatistics</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a></td></tr>
<tr class="separator:abd8499b0e2af398339967dd5a3297f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72dc8534fb90f00e826c647469d1b3aa"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1CodeTracer.html">CodeTracer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72dc8534fb90f00e826c647469d1b3aa">code_tracer_</a></td></tr>
<tr class="separator:a72dc8534fb90f00e826c647469d1b3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ad51773362d235f993a28091ee23e1"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *, std::unique_ptr&lt; <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo.html">IsolateInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a></td></tr>
<tr class="separator:a72ad51773362d235f993a28091ee23e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f6343fe67074ef8fde62053ebc66c6"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *, std::unique_ptr&lt; <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo.html">NativeModuleInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a></td></tr>
<tr class="separator:a95f6343fe67074ef8fde62053ebc66c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e59070055e532fd16960fe100270492"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1OperationsBarrier.html">OperationsBarrier</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8e59070055e532fd16960fe100270492">operations_barrier_</a></td></tr>
<tr class="separator:a8e59070055e532fd16960fe100270492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a001b9bb450d4ae22f7902cf10a9cb8ed"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a> {0}</td></tr>
<tr class="separator:a001b9bb450d4ae22f7902cf10a9cb8ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c61216c29ea0d396e4abdaa72f76646"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a> = 0</td></tr>
<tr class="separator:a4c61216c29ea0d396e4abdaa72f76646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221bbbae4525dca3ae997a18988fdbc8"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a></td></tr>
<tr class="separator:a221bbbae4525dca3ae997a18988fdbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd5883d148b99bfe98e8d55417c54a4"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">num_code_gcs_triggered_</a> = 0</td></tr>
<tr class="separator:a5cd5883d148b99bfe98e8d55417c54a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6a7d8752e24482268ece80b48ad6aa"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo.html">CurrentGCInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a></td></tr>
<tr class="separator:a0c6a7d8752e24482268ece80b48ad6aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e69cc46cc9e267fa715a15b711b7e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html">NativeModuleCache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a></td></tr>
<tr class="separator:ad1e69cc46cc9e267fa715a15b711b7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a70430985b66280d5790dcc810f5994ce"><td class="memItemLeft" align="right" valign="top">static std::atomic&lt; int32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">had_nondeterminism_</a> {0}</td></tr>
<tr class="separator:a70430985b66280d5790dcc810f5994ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00162">162</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a34ff6a2da3d8ef3b85ad087cc4316ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ff6a2da3d8ef3b85ad087cc4316ebe">&#9670;&nbsp;</a></span>DeadCodeMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">v8::internal::wasm::WasmEngine::DeadCodeMap</a> =  std::unordered_map&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>*, std::vector&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>*&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00380">380</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aee97c8a6e684e2b5b646159ee0c4ec73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee97c8a6e684e2b5b646159ee0c4ec73">&#9670;&nbsp;</a></span>WasmEngine() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmEngine::WasmEngine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00543">543</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;: <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab160110a4540fe336bc9834d389c6bc6">call_descriptors_</a>(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5da025226f11c1a8371a2e1c24ca7663">allocator_</a>) {}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a5da025226f11c1a8371a2e1c24ca7663"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5da025226f11c1a8371a2e1c24ca7663">v8::internal::wasm::WasmEngine::allocator_</a></div><div class="ttdeci">AccountingAllocator allocator_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00481">wasm-engine.h:481</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ab160110a4540fe336bc9834d389c6bc6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab160110a4540fe336bc9834d389c6bc6">v8::internal::wasm::WasmEngine::call_descriptors_</a></div><div class="ttdeci">compiler::WasmCallDescriptors call_descriptors_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00495">wasm-engine.h:495</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73_icgraph.svg" width="100%" height="498"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9b2dd2ef9c0107b22840176b39516a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2dd2ef9c0107b22840176b39516a80">&#9670;&nbsp;</a></span>WasmEngine() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmEngine::WasmEngine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af2a33b8b1886a22b78cfa5c01d6db7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2a33b8b1886a22b78cfa5c01d6db7c1">&#9670;&nbsp;</a></span>~WasmEngine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v8::internal::wasm::WasmEngine::~WasmEngine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00545">545</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Synchronize on the GDB-remote thread, if running.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  gdb_server_.reset();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_offheap_memory_size)) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a32e34a8169c3a723824780c6ac126654">PrintCurrentMemoryConsumptionEstimate</a>();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// Free all modules that were kept alive for collecting PGO. This is to avoid</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// memory leaks.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">native_modules_kept_alive_for_pgo</a>)) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keyword">delete</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">native_modules_kept_alive_for_pgo</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8e59070055e532fd16960fe100270492">operations_barrier_</a>-&gt;CancelAndWait();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// All code should have been deleted already, but wrappers managed by the</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// WasmImportWrapperCache are placed in {potentially_dead_code_} when they</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// are no longer referenced, and we don&#39;t want to wait for the next</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// Wasm Code GC cycle to remove them from that set.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;DcheckRefCountIsOne();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// The actual instructions will get thrown out when the global</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// WasmImportWrapperCache&#39;s {code_allocator_} frees its memory region.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// Here we just pacify LSan.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keyword">delete</span> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// All AsyncCompileJobs have been canceled.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.empty());</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// All Isolates have been deregistered.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.empty());</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// All NativeModules did die.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.empty());</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// Native module cache does not leak.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a102c3cb3accdae6f764130d07b5729b5">empty</a>());</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_a102c3cb3accdae6f764130d07b5729b5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a102c3cb3accdae6f764130d07b5729b5">v8::internal::wasm::NativeModuleCache::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00130">wasm-engine.h:130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a221bbbae4525dca3ae997a18988fdbc8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">v8::internal::wasm::WasmEngine::potentially_dead_code_</a></div><div class="ttdeci">std::unordered_set&lt; WasmCode * &gt; potentially_dead_code_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00533">wasm-engine.h:533</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a32e34a8169c3a723824780c6ac126654"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a32e34a8169c3a723824780c6ac126654">v8::internal::wasm::WasmEngine::PrintCurrentMemoryConsumptionEstimate</a></div><div class="ttdeci">void PrintCurrentMemoryConsumptionEstimate() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02063">wasm-engine.cc:2063</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a72ad51773362d235f993a28091ee23e1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">v8::internal::wasm::WasmEngine::isolates_</a></div><div class="ttdeci">std::unordered_map&lt; Isolate *, std::unique_ptr&lt; IsolateInfo &gt; &gt; isolates_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00513">wasm-engine.h:513</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a8e59070055e532fd16960fe100270492"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8e59070055e532fd16960fe100270492">v8::internal::wasm::WasmEngine::operations_barrier_</a></div><div class="ttdeci">std::shared_ptr&lt; OperationsBarrier &gt; operations_barrier_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00519">wasm-engine.h:519</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a95f6343fe67074ef8fde62053ebc66c6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">v8::internal::wasm::WasmEngine::native_modules_</a></div><div class="ttdeci">std::unordered_map&lt; NativeModule *, std::unique_ptr&lt; NativeModuleInfo &gt; &gt; native_modules_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00517">wasm-engine.h:517</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aa7983ea4754315852b25c620f17514c3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">v8::internal::wasm::WasmEngine::async_compile_jobs_</a></div><div class="ttdeci">std::unordered_map&lt; AsyncCompileJob *, std::unique_ptr&lt; AsyncCompileJob &gt; &gt; async_compile_jobs_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00507">wasm-engine.h:507</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ad1e69cc46cc9e267fa715a15b711b7e0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">v8::internal::wasm::WasmEngine::native_module_cache_</a></div><div class="ttdeci">NativeModuleCache native_module_cache_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00540">wasm-engine.h:540</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_ae0e79c88adf5166f9befeb542c2acd8f"><div class="ttname"><a href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00546">flag-definitions.h:546</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_html_a01ea512b0721f1f5ced70d87c6ae028b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::native_modules_kept_alive_for_pgo</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; NativeModule &gt; &gt; * native_modules_kept_alive_for_pgo</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00291">wasm-engine.cc:291</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa6b3743bd5d773c552654f2a6c3efa4a"><div class="ttname"><a href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK</a></div><div class="ttdeci">DCHECK(IsNull(value)||IsNativeContext(value)||value==Smi::uninitialized_deserialization_value())</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="av8config_8h_html_a67bd29db07c711b0fb11ff1c324ebb60"><div class="ttname"><a href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a></div><div class="ttdeci">#define V8_UNLIKELY(condition)</div><div class="ttdef"><b>Definition:</b> <a href="v8config_8h_source.html#l00660">v8config.h:660</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8h_source.html#l00130">v8::internal::wasm::NativeModuleCache::empty()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00291">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::native_modules_kept_alive_for_pgo</a>, <a class="el" href="wasm-engine_8h_source.html#l00519">operations_barrier_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l02063">PrintCurrentMemoryConsumptionEstimate()</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_af2a33b8b1886a22b78cfa5c01d6db7c1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af7ca4a2df3e7f8a56c31571ade78372e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ca4a2df3e7f8a56c31571ade78372e">&#9670;&nbsp;</a></span>AddIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::AddIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01238">1238</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                                            {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> log_code = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">WasmCode::ShouldBeLogged</a>(isolate);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// Create the IsolateInfo.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// Create the IsolateInfo outside the mutex to reduce the size of the</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// critical section and to avoid lock-order-inversion issues.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keyword">auto</span> isolate_info = std::make_unique&lt;IsolateInfo&gt;(isolate, log_code);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.emplace(isolate, std::move(isolate_info));</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">if</span> (log_code) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// Log existing wrappers (which are shared across isolates).</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#ad49664eee6f5df0f367014a789b71d21">LogForIsolate</a>(isolate);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// Install sampling GC callback.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">// TODO(v8:7424): For now we sample module sizes in a GC callback. This will</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// bias samples towards apps with high memory pressure. We should switch to</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// using sampling based on regular intervals independent of the GC.</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keyword">auto</span> callback = [](<a class="code" href="classv8_1_1Isolate.html">v8::Isolate</a>* v8_isolate, <a class="code" href="namespacev8.html#ac109d6f27e0c0f9ef4e98bcf7a806cf2">v8::GCType</a> <a class="code" href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">type</a>,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                     <a class="code" href="namespacev8.html#a247c37a849f4d6c293b9b16e94e1944b">v8::GCCallbackFlags</a> <a class="code" href="namespacev8_1_1internal.html#a83b0c194e63513f61999805edd71b125">flags</a>, <span class="keywordtype">void</span>* data) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    Isolate* isolate = <span class="keyword">reinterpret_cast&lt;</span>Isolate*<span class="keyword">&gt;</span>(v8_isolate);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    Counters* counters = isolate-&gt;counters();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aee97c8a6e684e2b5b646159ee0c4ec73">WasmEngine</a>* engine = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;engine-&gt;mutex_);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, engine-&gt;isolates_.count(isolate));</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>* native_module : engine-&gt;isolates_[isolate]-&gt;native_modules) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        native_module-&gt;SampleCodeSize(counters);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// Also sample overall metadata size (this includes the metadata size of</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// individual NativeModules; we are summing that up twice, which could be</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// improved performance-wise).</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// The engine-wide metadata also includes global storage e.g. for the type</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// canonicalizer.</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    Histogram* metadata_histogram = counters-&gt;wasm_engine_metadata_size_kb();</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span> (metadata_histogram-&gt;Enabled()) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordtype">size_t</span> engine_meta_data = engine-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      metadata_histogram-&gt;AddSample(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(engine_meta_data / <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a>));</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  };</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  isolate-&gt;heap()-&gt;AddGCEpilogueCallback(callback, <a class="code" href="namespacev8.html#ac109d6f27e0c0f9ef4e98bcf7a806cf2aebba79261e5d8903a4a72805f0409db1">v8::kGCTypeMarkSweepCompact</a>,</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                                         <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">if</span> (gdb_server_) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    gdb_server_-&gt;AddIsolate(isolate);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1Isolate.html">v8::Isolate</a></div><div class="ttdoc">Isolate represents an isolated instance of the V8 engine.</div><div class="ttdef"><b>Definition:</b> <a href="v8-isolate_8h_source.html#l00285">v8-isolate.h:285</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_acb261693fa04ffc206a9289658201454"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">v8::internal::wasm::WasmCode::ShouldBeLogged</a></div><div class="ttdeci">static bool ShouldBeLogged(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l00245">wasm-code-manager.cc:245</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a6a372578a0d4f4dec77a0530fda00e4d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">v8::internal::wasm::WasmEngine::mutex_</a></div><div class="ttdeci">base::Mutex mutex_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00499">wasm-engine.h:499</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aee97c8a6e684e2b5b646159ee0c4ec73"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aee97c8a6e684e2b5b646159ee0c4ec73">v8::internal::wasm::WasmEngine::WasmEngine</a></div><div class="ttdeci">WasmEngine()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00543">wasm-engine.cc:543</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_ad49664eee6f5df0f367014a789b71d21"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#ad49664eee6f5df0f367014a789b71d21">v8::internal::wasm::WasmImportWrapperCache::LogForIsolate</a></div><div class="ttdeci">void LogForIsolate(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00170">wasm-import-wrapper-cache.cc:170</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40b71b3558e4b5297d51003612578a81"><div class="ttname"><a href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">v8::base::MutexGuard</a></div><div class="ttdeci">LockGuard&lt; Mutex &gt; MutexGuard</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00219">mutex.h:219</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1tracing_html_a96000282e12b2483531025283d63154d"><div class="ttname"><a href="namespacev8_1_1internal_1_1tracing.html#a96000282e12b2483531025283d63154d">v8::internal::tracing::type</a></div><div class="ttdeci">unsigned char * type</div><div class="ttdef"><b>Definition:</b> <a href="tracing_2trace-event_8h_source.html#l00457">trace-event.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a36345041662f17bb39d27709c1cb78ac"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">v8::internal::wasm::GetWasmImportWrapperCache</a></div><div class="ttdeci">WasmImportWrapperCache * GetWasmImportWrapperCache()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02135">wasm-engine.cc:2135</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abc12fc3b25ebfb54c20b8479642acb94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">v8::internal::wasm::GetWasmEngine</a></div><div class="ttdeci">WasmEngine * GetWasmEngine()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02125">wasm-engine.cc:2125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a83b0c194e63513f61999805edd71b125"><div class="ttname"><a href="namespacev8_1_1internal.html#a83b0c194e63513f61999805edd71b125">v8::internal::flags</a></div><div class="ttdeci">Flag flags[]</div><div class="ttdef"><b>Definition:</b> <a href="flags_8cc_source.html#l00292">flags.cc:292</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a93b2e7c72fa0878021b495b6f3cec820"><div class="ttname"><a href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">v8::internal::KB</a></div><div class="ttdeci">constexpr int KB</div><div class="ttdef"><b>Definition:</b> <a href="v8-internal_8h_source.html#l00055">v8-internal.h:55</a></div></div>
<div class="ttc" id="anamespacev8_html_a247c37a849f4d6c293b9b16e94e1944b"><div class="ttname"><a href="namespacev8.html#a247c37a849f4d6c293b9b16e94e1944b">v8::GCCallbackFlags</a></div><div class="ttdeci">GCCallbackFlags</div><div class="ttdoc">GCCallbackFlags is used to notify additional information about the GC callback.</div><div class="ttdef"><b>Definition:</b> <a href="v8-callbacks_8h_source.html#l00179">v8-callbacks.h:179</a></div></div>
<div class="ttc" id="anamespacev8_html_ac109d6f27e0c0f9ef4e98bcf7a806cf2"><div class="ttname"><a href="namespacev8.html#ac109d6f27e0c0f9ef4e98bcf7a806cf2">v8::GCType</a></div><div class="ttdeci">GCType</div><div class="ttdoc">Applications can register callback functions which will be called before and after certain garbage co...</div><div class="ttdef"><b>Definition:</b> <a href="v8-callbacks_8h_source.html#l00154">v8-callbacks.h:154</a></div></div>
<div class="ttc" id="anamespacev8_html_ac109d6f27e0c0f9ef4e98bcf7a806cf2aebba79261e5d8903a4a72805f0409db1"><div class="ttname"><a href="namespacev8.html#ac109d6f27e0c0f9ef4e98bcf7a806cf2aebba79261e5d8903a4a72805f0409db1">v8::kGCTypeMarkSweepCompact</a></div><div class="ttdeci">@ kGCTypeMarkSweepCompact</div><div class="ttdef"><b>Definition:</b> <a href="v8-callbacks_8h_source.html#l00157">v8-callbacks.h:157</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00484">logging.h:484</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="heap_8cc_source.html#l06446">v8::internal::Heap::AddGCEpilogueCallback()</a>, <a class="el" href="counters_8cc_source.html#l00050">v8::internal::Histogram::AddSample()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="counters_8h_source.html#l00164">v8::internal::Histogram::Enabled()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="flags_8cc_source.html#l00292">v8::internal::flags</a>, <a class="el" href="wasm-engine_8cc_source.html#l02125">v8::internal::wasm::GetWasmEngine()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02135">v8::internal::wasm::GetWasmImportWrapperCache()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01214">v8::internal::Isolate::heap()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="v8-internal_8h_source.html#l00055">v8::internal::KB</a>, <a class="el" href="v8-callbacks_8h_source.html#l00157">v8::kGCTypeMarkSweepCompact</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00170">v8::internal::wasm::WasmImportWrapperCache::LogForIsolate()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00245">v8::internal::wasm::WasmCode::ShouldBeLogged()</a>, and <a class="el" href="tracing_2trace-event_8h_source.html#l00457">v8::internal::tracing::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="isolate_8cc_source.html#l05520">v8::internal::Isolate::Init()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a6ad160f95280e9e5005ea39a3f1cb65b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ad160f95280e9e5005ea39a3f1cb65b">&#9670;&nbsp;</a></span>AddPotentiallyDeadCode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::AddPotentiallyDeadCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01820">1820</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                                                      {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;is_dying());  <span class="comment">// Caller just marked it as such.</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="keyword">auto</span> added = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>.insert(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(added.second);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(added);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a> += <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;instructions().size();</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_code_gc) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="comment">// Trigger a GC if 64kB plus 10% of committed code are potentially dead.</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordtype">size_t</span> dead_code_limit =</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_wasm_code_gc</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            ? 0</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            : 64 * <a class="code" href="namespacev8_1_1internal.html#a93b2e7c72fa0878021b495b6f3cec820">KB</a> + <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab17eb91621a85bc775b4d7a740029f00">committed_code_space</a>() / 10;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a> &gt; dead_code_limit) {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aae7d7fff282f6e414ed462f4d7b0c8a0">TriggerCodeGC_Locked</a>(dead_code_limit);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_ab17eb91621a85bc775b4d7a740029f00"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab17eb91621a85bc775b4d7a740029f00">v8::internal::wasm::WasmCodeManager::committed_code_space</a></div><div class="ttdeci">size_t committed_code_space() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8h_source.html#l01193">wasm-code-manager.h:1193</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a4c61216c29ea0d396e4abdaa72f76646"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">v8::internal::wasm::WasmEngine::new_potentially_dead_code_size_</a></div><div class="ttdeci">size_t new_potentially_dead_code_size_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00529">wasm-engine.h:529</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aae7d7fff282f6e414ed462f4d7b0c8a0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aae7d7fff282f6e414ed462f4d7b0c8a0">v8::internal::wasm::WasmEngine::TriggerCodeGC_Locked</a></div><div class="ttdeci">void TriggerCodeGC_Locked(size_t dead_code_limit)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01839">wasm-engine.cc:1839</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a55a717894f5d005ae86062dd4647a3b2"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">v8::internal::wasm::GetWasmCodeManager</a></div><div class="ttdeci">WasmCodeManager * GetWasmCodeManager()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02130">wasm-engine.cc:2130</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2macros_8h_source.html#l00293">macros.h:293</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-code-manager_8h_source.html#l01193">v8::internal::wasm::WasmCodeManager::committed_code_space()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02130">v8::internal::wasm::GetWasmCodeManager()</a>, <a class="el" href="v8-internal_8h_source.html#l00055">v8::internal::KB</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00529">new_potentially_dead_code_size_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>, <a class="el" href="src_2base_2macros_8h_source.html#l00293">USE</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l00571">v8::internal::wasm::WasmCode::DecRefOnPotentiallyDeadCode()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b_cgraph.svg" width="100%" height="577"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b_icgraph.svg" width="523" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a92bf3bf6d5ba9b15735d9ae1a3643817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92bf3bf6d5ba9b15735d9ae1a3643817">&#9670;&nbsp;</a></span>allocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1AccountingAllocator.html">AccountingAllocator</a>* v8::internal::wasm::WasmEngine::allocator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00246">246</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{ <span class="keywordflow">return</span> &amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5da025226f11c1a8371a2e1c24ca7663">allocator_</a>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="function-compiler_8cc_source.html#l00028">v8::internal::wasm::WasmCompilationUnit::ExecuteCompilation()</a>, <a class="el" href="wasm-debug_8cc_source.html#l00903">v8::internal::anonymous_namespace{wasm-debug.cc}::FindNextBreakablePosition()</a>, <a class="el" href="api_8cc_source.html#l10274">v8::Isolate::GetHeapStatistics()</a>, <a class="el" href="wasm-debug_8cc_source.html#l01182">v8::internal::WasmScript::GetPossibleBreakpoints()</a>, <a class="el" href="module-compiler_8cc_source.html#l02586">v8::internal::wasm::ValidateFunctionsStreamingJob::Run()</a>, and <a class="el" href="module-compiler_8cc_source.html#l01253">v8::internal::wasm::ThrowLazyCompilationError()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a92bf3bf6d5ba9b15735d9ae1a3643817_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa17c088fdbc894379d393baf814073f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17c088fdbc894379d393baf814073f7">&#9670;&nbsp;</a></span>AsyncCompile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::AsyncCompile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>api_method_name_for_errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00790">790</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                            {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordtype">int</span> compilation_id = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">next_compilation_id_</a>.fetch_add(1);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.AsyncCompile&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>, compilation_id);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_async_compilation || <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Asynchronous compilation disabled; fall back on synchronous compilation.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    ErrorThrower thrower(isolate, api_method_name_for_errors);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    MaybeDirectHandle&lt;WasmModuleObject&gt; module_object;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    module_object = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3f2610a2d8fa2c20a8569e4cb665d194">SyncCompile</a>(isolate, enabled, std::move(compile_imports),</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                &amp;thrower, std::move(bytes));</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (thrower.error()) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      resolver-&gt;OnCompilationFailed(thrower.Reify());</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    DirectHandle&lt;WasmModuleObject&gt; module = module_object.ToHandleChecked();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    resolver-&gt;OnCompilationSucceeded(module);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_test_streaming) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    std::shared_ptr&lt;StreamingDecoder&gt; streaming_decoder =</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aeea968c225f6306c9b4e49d693ac436b">StartStreamingCompilation</a>(isolate, enabled, std::move(compile_imports),</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                  <a class="code" href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">direct_handle</a>(isolate-&gt;context(), isolate),</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                  api_method_name_for_errors,</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                  std::move(resolver));</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keyword">auto</span>* rng = isolate-&gt;random_number_generator();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    base::SmallVector&lt;base::Vector&lt;const uint8_t&gt;, 16&gt; ranges;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span> (!bytes.empty()) ranges.push_back(bytes.as_vector());</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// Split into up to 16 ranges (2^4).</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> round = 0; round &lt; 4; ++round) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = ranges.begin(); it != ranges.end(); ++it) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keyword">auto</span> range = *it;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">if</span> (range.size() &lt; 2 || !rng-&gt;NextBool()) <span class="keywordflow">continue</span>;  <span class="comment">// Do not split.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">// Choose split point within [1, range.size() - 1].</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        static_assert(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a72cc035a1e5fa3742bc0d984f8d5c9ec">kV8MaxWasmModuleSize</a> &lt;= <a class="code" href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">kMaxInt</a>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordtype">size_t</span> split_point =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            1 + rng-&gt;NextInt(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(range.size() - 1));</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="comment">// Insert first sub-range *before* {it} and make {it} point after it.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        it = ranges.insert(it, range.SubVector(0, split_point)) + 1;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        *it = range.SubVectorFrom(split_point);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> range : ranges) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      streaming_decoder-&gt;OnBytesReceived(range);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    streaming_decoder-&gt;Finish();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  AsyncCompileJob* job = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8d959cfc3867745d04ace1ec94bb5209">CreateAsyncCompileJob</a>(</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      isolate, enabled, std::move(compile_imports), std::move(bytes),</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      isolate-&gt;native_context(), api_method_name_for_errors,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      std::move(resolver), compilation_id);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  job-&gt;Start();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a3f2610a2d8fa2c20a8569e4cb665d194"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a3f2610a2d8fa2c20a8569e4cb665d194">v8::internal::wasm::WasmEngine::SyncCompile</a></div><div class="ttdeci">MaybeDirectHandle&lt; WasmModuleObject &gt; SyncCompile(Isolate *isolate, WasmEnabledFeatures enabled, CompileTimeImports compile_imports, ErrorThrower *thrower, base::OwnedVector&lt; const uint8_t &gt; bytes)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00669">wasm-engine.cc:669</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a8d959cfc3867745d04ace1ec94bb5209"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8d959cfc3867745d04ace1ec94bb5209">v8::internal::wasm::WasmEngine::CreateAsyncCompileJob</a></div><div class="ttdeci">AsyncCompileJob * CreateAsyncCompileJob(Isolate *isolate, WasmEnabledFeatures enabled, CompileTimeImports compile_imports, base::OwnedVector&lt; const uint8_t &gt; bytes, DirectHandle&lt; Context &gt; context, const char *api_method_name, std::shared_ptr&lt; CompilationResultResolver &gt; resolver, int compilation_id)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01150">wasm-engine.cc:1150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ab5ecf5f37f1b52c347845f35cb19f3d9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">v8::internal::wasm::WasmEngine::next_compilation_id_</a></div><div class="ttdeci">std::atomic&lt; int &gt; next_compilation_id_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00488">wasm-engine.h:488</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aeea968c225f6306c9b4e49d693ac436b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aeea968c225f6306c9b4e49d693ac436b">v8::internal::wasm::WasmEngine::StartStreamingCompilation</a></div><div class="ttdeci">std::shared_ptr&lt; StreamingDecoder &gt; StartStreamingCompilation(Isolate *isolate, WasmEnabledFeatures enabled, CompileTimeImports compile_imports, DirectHandle&lt; Context &gt; context, const char *api_method_name, std::shared_ptr&lt; CompilationResultResolver &gt; resolver)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00852">wasm-engine.cc:852</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a72cc035a1e5fa3742bc0d984f8d5c9ec"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a72cc035a1e5fa3742bc0d984f8d5c9ec">v8::internal::wasm::kV8MaxWasmModuleSize</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmModuleSize</div><div class="ttdef"><b>Definition:</b> <a href="wasm-limits_8h_source.html#l00050">wasm-limits.h:50</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a73502f55102d18cb764881bc29f35c05"><div class="ttname"><a href="namespacev8_1_1internal.html#a73502f55102d18cb764881bc29f35c05">v8::internal::direct_handle</a></div><div class="ttdeci">DirectHandle&lt; T &gt; direct_handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="handles-inl_8h_source.html#l00143">handles-inl.h:143</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad03e50e4d15ee0da6a722254f350e7eb"><div class="ttname"><a href="namespacev8_1_1internal.html#ad03e50e4d15ee0da6a722254f350e7eb">v8::internal::kMaxInt</a></div><div class="ttdeci">constexpr int kMaxInt</div><div class="ttdef"><b>Definition:</b> <a href="common_2globals_8h_source.html#l00375">globals.h:375</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_ac437f27e15925a9bd53c69692a6c85fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a></div><div class="ttdeci">#define TRACE_EVENT1(category_group, name, arg1_name, arg1_val)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00037">trace-event-no-perfetto.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vector_8h_source.html#l00266">v8::base::OwnedVector&lt; T &gt;::as_vector()</a>, <a class="el" href="small-vector_8h_source.html#l00132">v8::base::SmallVector&lt; T, kSize, Allocator &gt;::begin()</a>, <a class="el" href="execution_2isolate_8h_source.html#l00815">v8::internal::Isolate::context()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01150">CreateAsyncCompileJob()</a>, <a class="el" href="handles-inl_8h_source.html#l00143">v8::internal::direct_handle()</a>, <a class="el" href="vector_8h_source.html#l00239">v8::base::OwnedVector&lt; T &gt;::empty()</a>, <a class="el" href="small-vector_8h_source.html#l00135">v8::base::SmallVector&lt; T, kSize, Allocator &gt;::end()</a>, <a class="el" href="wasm-result_8h_source.html#l00149">v8::internal::wasm::ErrorThrower::error()</a>, <a class="el" href="small-vector_8h_source.html#l00199">v8::base::SmallVector&lt; T, kSize, Allocator &gt;::insert()</a>, <a class="el" href="common_2globals_8h_source.html#l00375">v8::internal::kMaxInt</a>, <a class="el" href="wasm-limits_8h_source.html#l00050">v8::internal::wasm::kV8MaxWasmModuleSize</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00048">v8::internal::Isolate::native_context()</a>, <a class="el" href="wasm-engine_8h_source.html#l00488">next_compilation_id_</a>, <a class="el" href="small-vector_8h_source.html#l00191">v8::base::SmallVector&lt; T, kSize, Allocator &gt;::push_back()</a>, <a class="el" href="isolate_8cc_source.html#l06425">v8::internal::Isolate::random_number_generator()</a>, <a class="el" href="wasm-result_8cc_source.html#l00107">v8::internal::wasm::ErrorThrower::Reify()</a>, <a class="el" href="module-compiler_8cc_source.html#l02475">v8::internal::wasm::AsyncCompileJob::Start()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00852">StartStreamingCompilation()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>, <a class="el" href="maybe-handles_8h_source.html#l00273">v8::internal::MaybeDirectHandle&lt; T &gt;::ToHandleChecked()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-js_8cc_source.html#l00708">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyCompileImpl()</a>, and <a class="el" href="wasm-js_8cc_source.html#l01162">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyInstantiateImpl()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7_icgraph.svg" width="588" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aefbc53197e63d504193b408056d37721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefbc53197e63d504193b408056d37721">&#9670;&nbsp;</a></span>AsyncInstantiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::AsyncInstantiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1InstantiationResultResolver.html">InstantiationResultResolver</a> &gt;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt;&#160;</td>
          <td class="paramname"><em>module_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSReceiver.html">JSReceiver</a> &gt;&#160;</td>
          <td class="paramname"><em>imports</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00753">753</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                           {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  ErrorThrower thrower(isolate, <span class="stringliteral">&quot;WebAssembly.instantiate()&quot;</span>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.AsyncInstantiate&quot;</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Instantiate a TryCatch so that caught exceptions won&#39;t propagate out.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// They will still be set as exceptions on the isolate.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// TODO(clemensb): Avoid TryCatch, use Execution::TryCall internally to invoke</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// start function and report thrown exception explicitly via out argument.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="classv8_1_1TryCatch.html">v8::TryCatch</a> catcher(<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1Isolate.html">v8::Isolate</a>*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  catcher.SetVerbose(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  catcher.SetCaptureMessage(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  MaybeDirectHandle&lt;WasmInstanceObject&gt; <a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a> =</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af0771f813d154e4af40da6689bbd5e50">SyncInstantiate</a>(isolate, &amp;thrower, module_object, imports,</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                      <a class="code" href="classv8_1_1internal_1_1DirectHandle.html#aef2c4a05e51981d20f57a042a4a439d0">DirectHandle&lt;JSArrayBuffer&gt;::null</a>());</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>.is_null()) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    resolver-&gt;OnInstantiationSucceeded(<a class="code" href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">instance_object</a>.ToHandleChecked());</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">if</span> (isolate-&gt;has_exception()) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    thrower.Reset();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (isolate-&gt;is_execution_terminating()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// The JS code executed during instantiation has thrown an exception.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// We have to move the exception to the promise chain.</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    DirectHandle&lt;JSAny&gt; exception(Cast&lt;JSAny&gt;(isolate-&gt;exception()), isolate);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    isolate-&gt;clear_exception();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    resolver-&gt;OnInstantiationFailed(exception);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(thrower.error());</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    resolver-&gt;OnInstantiationFailed(thrower.Reify());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1TryCatch_html"><div class="ttname"><a href="classv8_1_1TryCatch.html">v8::TryCatch</a></div><div class="ttdoc">An external exception handler.</div><div class="ttdef"><b>Definition:</b> <a href="v8-exception_8h_source.html#l00138">v8-exception.h:138</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html_aef2c4a05e51981d20f57a042a4a439d0"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html#aef2c4a05e51981d20f57a042a4a439d0">v8::internal::DirectHandle::null</a></div><div class="ttdeci">static const DirectHandle null()</div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00662">handles.h:662</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_af0771f813d154e4af40da6689bbd5e50"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#af0771f813d154e4af40da6689bbd5e50">v8::internal::wasm::WasmEngine::SyncInstantiate</a></div><div class="ttdeci">MaybeDirectHandle&lt; WasmInstanceObject &gt; SyncInstantiate(Isolate *isolate, ErrorThrower *thrower, DirectHandle&lt; WasmModuleObject &gt; module_object, MaybeDirectHandle&lt; JSReceiver &gt; imports, MaybeDirectHandle&lt; JSArrayBuffer &gt; memory)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00743">wasm-engine.cc:743</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a58e3fb6c5ada1d544715988b7a735333"><div class="ttname"><a href="namespacev8_1_1internal.html#a58e3fb6c5ada1d544715988b7a735333">v8::internal::instance_object</a></div><div class="ttdeci">kMemory0SizeOffset Address kNewAllocationLimitAddressOffset Address kOldAllocationLimitAddressOffset uint8_t kGlobalsStartOffset kJumpTableStartOffset std::atomic&lt; uint32_t &gt; kTieringBudgetArrayOffset kDataSegmentStartsOffset kElementSegmentsOffset instance_object</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00232">wasm-objects-inl.h:232</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate-inl_8h_source.html#l00120">v8::internal::Isolate::clear_exception()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-result_8h_source.html#l00149">v8::internal::wasm::ErrorThrower::error()</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00104">v8::internal::Isolate::exception()</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00125">v8::internal::Isolate::has_exception()</a>, <a class="el" href="wasm-objects-inl_8h_source.html#l00232">v8::internal::instance_object</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00131">v8::internal::Isolate::is_execution_terminating()</a>, <a class="el" href="wasm-result_8cc_source.html#l00107">v8::internal::wasm::ErrorThrower::Reify()</a>, <a class="el" href="wasm-result_8cc_source.html#l00136">v8::internal::wasm::ErrorThrower::Reset()</a>, <a class="el" href="api_8cc_source.html#l02898">v8::TryCatch::SetCaptureMessage()</a>, <a class="el" href="api_8cc_source.html#l02894">v8::TryCatch::SetVerbose()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00743">SyncInstantiate()</a>, and <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-js_8cc_source.html#l00463">v8::anonymous_namespace{wasm-js.cc}::anonymous_namespace{wasm-js.cc}::AsyncInstantiateCompileResultResolver::OnCompilationSucceeded()</a>, and <a class="el" href="wasm-js_8cc_source.html#l01162">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyInstantiateImpl()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721_icgraph.svg" width="604" height="163"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab5ef5a29aa357f79043a5f8631b18785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5ef5a29aa357f79043a5f8631b18785">&#9670;&nbsp;</a></span>call_descriptors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors.html">compiler::WasmCallDescriptors</a>* v8::internal::wasm::WasmEngine::call_descriptors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00396">396</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                                  {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab160110a4540fe336bc9834d389c6bc6">call_descriptors_</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wrappers_8cc_source.html#l00907">v8::internal::wasm::WasmWrapperTSGraphBuilder::GetBigIntToI64CallDescriptor()</a>, and <a class="el" href="int64-lowering-reducer_8h_source.html#l00792">v8::internal::compiler::turboshaft::Int64LoweringReducer&lt; Next &gt;::LowerCall()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ef5a29aa357f79043a5f8631b18785_icgraph.svg" width="100%" height="462"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0b70b2a53d091016505e717012cb09dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b70b2a53d091016505e717012cb09dd">&#9670;&nbsp;</a></span>clear_nondeterminism()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::clear_nondeterminism </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00437">437</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                     {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">had_nondeterminism_</a>.exchange(0, std::memory_order_relaxed) != 0;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a70430985b66280d5790dcc810f5994ce"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">v8::internal::wasm::WasmEngine::had_nondeterminism_</a></div><div class="ttdeci">static std::atomic&lt; int32_t &gt; had_nondeterminism_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00479">wasm-engine.h:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8fad47fa7de440c822c9e19d34208a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8fad47fa7de440c822c9e19d34208a0">&#9670;&nbsp;</a></span>ClearWeakScriptHandle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::ClearWeakScriptHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> * &gt;&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00521">521</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                                                         {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// This function is designed for one targeted use case, which always</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// acquires a lock on {mutex_} before calling here.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  IsolateInfo* isolate_info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  std::shared_ptr&lt;TaskRunner&gt; runner = isolate_info-&gt;foreground_task_runner;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  runner-&gt;PostTask(std::make_unique&lt;ClearWeakScriptHandleTask&gt;(</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      isolate, std::move(location)));</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1base_1_1Mutex_html_a281097589e7088f5af211349cac0ef9d"><div class="ttname"><a href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">v8::base::Mutex::AssertHeld</a></div><div class="ttdeci">void AssertHeld() const</div><div class="ttdef"><b>Definition:</b> <a href="mutex_8h_source.html#l00058">mutex.h:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00509">v8::internal::wasm::WasmEngine::IsolateInfo::foreground_task_runner</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00237">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::WeakScriptHandle::~WeakScriptHandle()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0_cgraph.svg" width="494" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0_icgraph.svg" width="518" height="82"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a91a8d27da954c0e30d403ffa8fcb7bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91a8d27da954c0e30d403ffa8fcb7bf5">&#9670;&nbsp;</a></span>CompileFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::CompileFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Counters.html">Counters</a> *&#160;</td>
          <td class="paramname"><em>counters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td>
          <td class="paramname"><em>native_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>function_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a>&#160;</td>
          <td class="paramname"><em>tier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00871">871</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                                                                              {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Note we assume that &quot;one-off&quot; compilations can discard detected features.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  WasmDetectedFeatures detected;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#aa0c7dcc97d999fcad24b44bd026e75ca">WasmCompilationUnit::CompileWasmFunction</a>(</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      counters, native_module, &amp;detected,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      &amp;native_module-&gt;module()-&gt;functions[function_index], <a class="code" href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCompilationUnit_html_aa0c7dcc97d999fcad24b44bd026e75ca"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit.html#aa0c7dcc97d999fcad24b44bd026e75ca">v8::internal::wasm::WasmCompilationUnit::CompileWasmFunction</a></div><div class="ttdeci">static void CompileWasmFunction(Counters *, NativeModule *, WasmDetectedFeatures *detected, const WasmFunction *, ExecutionTier)</div><div class="ttdef"><b>Definition:</b> <a href="function-compiler_8cc_source.html#l00168">function-compiler.cc:168</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a878783ad616ead06040f7d4b080f6a02"><div class="ttname"><a href="flag-definitions_8h.html#a878783ad616ead06040f7d4b080f6a02">tier</a></div><div class="ttdeci">=any, 0==ignition/interpreter, 1==sparkplug/baseline, &quot; &quot;2==maglev, 3==turbofan&quot;) DEFINE_MAYBE_BOOL(efficiency_mode, &quot;Forces efficiency mode on or off, disregarding any dynamic &quot; &quot;signals. Efficiency mode is optimized for situations with &quot; &quot;no latency requirements and uses fewer threads.&quot;) DEFINE_MAYBE_BOOL( battery_saver_mode, &quot;Forces battery saver mode on or off, disregarding any dynamic signals. &quot; &quot;Battery saver tries to conserve overall cpu cycles spent.&quot;) DEFINE_MAYBE_BOOL( memory_saver_mode, &quot;Forces memory saver mode on or off, disregarding any dynamic signals. &quot; &quot;Memory saver tries to keep memory footprint low at the expense of extra &quot; &quot;cpu cycles.&quot;) DEFINE_BOOL(efficiency_mode_for_tiering_heuristics, true, &quot;Use efficiency mode in tiering heuristics.&quot;) DEFINE_BOOL(efficiency_mode_disable_turbofan, false, &quot;Defer tier-up to turbofan while in efficiency mode.&quot;) DEFINE_INT(efficiency_mode_delay_turbofan, 15000, &quot;Delay tier-up to turbofan to a certain invocation count while in &quot; &quot;efficiency mode.&quot;) DEFINE_STRING( wasm_trace_native, nullptr, &quot;Select which native code sequence to use for wasm trace instruction:&quot; &quot;default or cpuid&quot;) #define V8_JITLESS_BOOL DEFINE_BOOL(jitless, V8_LITE_MODE_BOOL, &quot;Disable runtime allocation of executable memory.&quot;) DEFINE_BOOL( disable_optimizing_compilers, false, &quot;Disable all optimizing compilers while leaving baseline compilers enabled&quot;) DEFINE_BOOL(memory_protection_keys, true, &quot;protect code memory with PKU if available&quot;) DEFINE_BOOL(force_memory_protection_keys, false, &quot;fail if memory protection key support is not available&quot;) DEFINE_BOOL(assert_types, false, &quot;generate runtime type assertions to test the typer&quot;) DEFINE_EXPERIMENTAL_FEATURE( turboshaft_assert_types, &quot;generate runtime type assertions to test the turboshaft type system&quot;) DEFINE_BOOL(verify_simplified_lowering, false, &quot;verify graph generated by simplified lowering&quot;) #define V8_ALLOCATION_SITE_TRACKING_BOOL DEFINE_BOOL_READONLY(allocation_site_tracking, V8_ALLOCATION_SITE_TRACKING_BOOL, &quot;Enable allocation site tracking&quot;) DEFINE_NEG_NEG_IMPLICATION(allocation_site_tracking, allocation_site_pretenuring) DEFINE_BOOL(allocation_site_pretenuring, true, &quot;pretenure with allocation sites&quot;) DEFINE_INT(page_promotion_threshold, 70, &quot;min percentage of live bytes on a page to enable fast evacuation &quot; &quot;in full GCs&quot;) DEFINE_INT(minor_ms_page_promotion_threshold, 50, &quot;min percentage of live bytes on a page to enable fast evacuation &quot; &quot;in MinorMS&quot;) DEFINE_INT(minor_ms_page_promotion_max_lab_threshold, 30, &quot;max percentage of labs out of a page to still be considered for &quot; &quot;page promotion&quot;) DEFINE_UINT(minor_ms_max_page_age, 4, &quot;max age for a page after which it is force promoted to old space&quot;) DEFINE_BOOL(trace_pretenuring, false, &quot;trace pretenuring decisions of HAllocate instructions&quot;) DEFINE_BOOL(trace_pretenuring_statistics, false, &quot;trace allocation site pretenuring statistics&quot;) DEFINE_BOOL(trace_block_coverage, false, &quot;trace collected block coverage information&quot;) DEFINE_BOOL(trace_protector_invalidation, false, &quot;trace protector cell invalidations&quot;) DEFINE_BOOL(decommit_pooled_pages, true, &quot;decommit, rather than discard pooled pages&quot;) DEFINE_BOOL( zero_unused_memory, true, &quot;Zero unused memory(except for memory which was discarded) on memory &quot; &quot;reducing GCs.&quot;) DEFINE_BOOL_READONLY(minor_ms_shortcut_strings, false, &quot;short cut strings during marking&quot;) DEFINE_EXPERIMENTAL_FEATURE(feedback_normalization, &quot;feed back normalization to constructors&quot;) DEFINE_BOOL_READONLY(internalize_on_the_fly, true, &quot;internalize string keys for generic keyed ICs on the fly&quot;) DEFINE_INT(invocation_count_for_feedback_allocation, 8, &quot;invocation count required for allocating feedback vectors&quot;) DEFINE_INT(invocation_count_for_maglev, 400, &quot;invocation count required for optimizing with Maglev&quot;) DEFINE_INT(invocation_count_for_maglev_osr, 100, &quot;invocation count required for maglev OSR&quot;) DEFINE_BOOL(osr_from_maglev, false, &quot;whether we try to OSR to Turbofan from OSR 'd Maglev&quot;) DEFINE_FLOAT( osr_from_maglev_interrupt_scale_factor, 0.8, &quot;Scale interrupt budget reduction for OSR from Maglev vs. OSR to Maglev&quot;) DEFINE_BOOL(always_osr_from_maglev, false, &quot;whether we try to OSR to Turbofan from any Maglev&quot;) DEFINE_INT(invocation_count_for_turbofan, 3000, &quot;invocation count required for optimizing with TurboFan&quot;) DEFINE_INT(osr_to_tierup, 1, &quot;number to decrease the invocation budget by when we follow OSR&quot;) DEFINE_INT(minimum_invocations_after_ic_update, 500, &quot;How long to minimally wait after IC update before tier up&quot;) DEFINE_INT(minimum_invocations_before_optimization, 2, &quot;Minimum number of invocations we need before non-OSR optimization&quot;) DEFINE_BOOL(jit_fuzzing, false, &quot;Set JIT tiering thresholds suitable for JIT fuzzing&quot;) DEFINE_BOOL(use_std_math_pow, true, &quot;use std::pow instead of our custom implementation&quot;) DEFINE_BOOL(ignition_elide_noneffectful_bytecodes, true, &quot;elide bytecodes which won 't have any external effect&quot;) DEFINE_BOOL(ignition_filter_expression_positions, true, &quot;filter expression positions before the bytecode pipeline&quot;) DEFINE_BOOL(ignition_share_named_property_feedback, true, &quot;share feedback slots when loading the same named property from &quot; &quot;the same object&quot;) DEFINE_BOOL(ignition_elide_redundant_tdz_checks, true, &quot;elide TDZ checks dominated by other TDZ checks&quot;) DEFINE_BOOL(print_bytecode, false, &quot;print bytecode generated by ignition interpreter&quot;) DEFINE_BOOL(enable_lazy_source_positions, V8_LAZY_SOURCE_POSITIONS_BOOL, &quot;skip generating source positions during initial compile but &quot; &quot;regenerate when actually required&quot;) DEFINE_BOOL(stress_lazy_source_positions, false, &quot;collect lazy source positions immediately after lazy compile&quot;) DEFINE_STRING(print_bytecode_filter, &quot; *&quot;, &quot;filter for selecting which functions to print bytecode&quot;) DEFINE_BOOL(trace_ignition_codegen, false, &quot;trace the codegen of ignition interpreter bytecode handlers&quot;) DEFINE_STRING( trace_ignition_dispatches_output_file, nullptr, &quot;write the bytecode handler dispatch table to the specified file(d8 only) &quot; &quot;(requires building with v8_enable_ignition_dispatch_counting)&quot;) DEFINE_BOOL(trace_track_allocation_sites, false, &quot;trace the tracking of allocation sites&quot;) #define FLAG DEFINE_BOOL(sparkplug, ENABLE_SPARKPLUG_BY_DEFAULT, &quot;enable Sparkplug baseline compiler&quot;) DEFINE_BOOL_READONLY(concurrent_sparkplug, false, &quot;compile Sparkplug code in a background thread&quot;) DEFINE_BOOL(sparkplug_needs_short_builtins, false, &quot;only enable Sparkplug baseline compiler when &quot; &quot;--short-builtin-calls are also enabled&quot;) DEFINE_INT(baseline_batch_compilation_threshold, 4 * KB, &quot;the estimated instruction size of a batch to trigger compilation&quot;) DEFINE_BOOL(trace_baseline_batch_compilation, false, &quot;trace baseline batch compilation&quot;) #define FLAG DEFINE_BOOL_READONLY(always_use_string_forwarding_table, false, &quot;use string forwarding table instead of thin strings for &quot; &quot;all strings(experimental)&quot;) DEFINE_BOOL(transition_strings_during_gc_with_stack, false, &quot;Transition strings during a full GC with stack&quot;) DEFINE_SIZE_T(initial_shared_heap_size, 0, &quot;initial size of the shared heap(in Mbytes) tier</div><div class="ttdef"><b>Definition:</b> <a href="flag-definitions_8h_source.html#l00792">flag-definitions.h:1174</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="function-compiler_8cc_source.html#l00168">v8::internal::wasm::WasmCompilationUnit::CompileWasmFunction()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-module_8h_source.html#l00714">v8::internal::wasm::WasmModule::functions</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00766">v8::internal::wasm::NativeModule::module()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l04355">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::TierUpAllFunctions()</a>, and <a class="el" href="module-compiler_8cc_source.html#l01694">v8::internal::wasm::TierUpNowForTesting()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5_icgraph.svg" width="100%" height="465"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a8d959cfc3867745d04ace1ec94bb5209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d959cfc3867745d04ace1ec94bb5209">&#9670;&nbsp;</a></span>CreateAsyncCompileJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> * v8::internal::wasm::WasmEngine::CreateAsyncCompileJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>api_method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classint.html">int</a>&#160;</td>
          <td class="paramname"><em>compilation_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01150">1150</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                                                           {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  DirectHandle&lt;NativeContext&gt; incumbent_context =</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      isolate-&gt;GetIncumbentContext();</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  AsyncCompileJob* job = <span class="keyword">new</span> AsyncCompileJob(</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      isolate, enabled, std::move(compile_imports), std::move(bytes), context,</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      incumbent_context, api_method_name, std::move(resolver), compilation_id);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// Pass ownership to the unique_ptr in {async_compile_jobs_}.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>[job] = std::unique_ptr&lt;AsyncCompileJob&gt;(job);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">return</span> job;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00068">v8::internal::Isolate::GetIncumbentContext()</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00790">AsyncCompile()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00852">StartStreamingCompilation()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209_icgraph.svg" width="100%" height="394"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab054f27e8218b5a80d290c14d1c6db27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab054f27e8218b5a80d290c14d1c6db27">&#9670;&nbsp;</a></span>DecodeAllNameSections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DecodeAllNameSections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider.html">CanonicalTypeNamesProvider</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02012">2012</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                                                         {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [native_module, native_module_info] : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    target-&gt;DecodeNames(native_module);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="names-provider_8cc_source.html#l00472">v8::internal::wasm::CanonicalTypeNamesProvider::DecodeNames()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>.</p>

<p class="reference">Referenced by <a class="el" href="names-provider_8cc_source.html#l00465">v8::internal::wasm::CanonicalTypeNamesProvider::DecodeNameSections()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27_icgraph.svg" width="100%" height="459"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9e7c0c7f764d2f3c2c0038ef4a13d1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7c0c7f764d2f3c2c0038ef4a13d1f9">&#9670;&nbsp;</a></span>DeleteCompileJobsOnContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DeleteCompileJobsOnContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt;&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01185">1185</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                                                         {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="comment">// Under the mutex get all jobs to delete. Then delete them without holding</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// the mutex, such that deletion can reenter the WasmEngine.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  std::vector&lt;std::unique_ptr&lt;AsyncCompileJob&gt;&gt; jobs_to_delete;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.begin();</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;         it != <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.end();) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keywordflow">if</span> (!it-&gt;first-&gt;context().is_identical_to(context)) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        ++it;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      jobs_to_delete.push_back(std::move(it-&gt;second));</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.erase(it);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="api_8cc_source.html#l10589">v8::Isolate::ContextDisposedNotification()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a9e7c0c7f764d2f3c2c0038ef4a13d1f9_icgraph.svg" width="100%" height="499"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa103ab294ff94d0c588ea065e30e7038"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa103ab294ff94d0c588ea065e30e7038">&#9670;&nbsp;</a></span>DeleteCompileJobsOnIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DeleteCompileJobsOnIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01203">1203</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                                            {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// Under the mutex get all jobs to delete. Then delete them without holding</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// the mutex, such that deletion can reenter the WasmEngine.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  std::vector&lt;std::unique_ptr&lt;AsyncCompileJob&gt;&gt; jobs_to_delete;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  std::vector&lt;std::weak_ptr&lt;NativeModule&gt;&gt; modules_in_isolate;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.begin();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         it != <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.end();) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keywordflow">if</span> (it-&gt;first-&gt;isolate() != isolate) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        ++it;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      jobs_to_delete.push_back(std::move(it-&gt;second));</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.erase(it);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keyword">auto</span>* isolate_info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>* native_module : isolate_info-&gt;native_modules) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      modules_in_isolate.emplace_back(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module]-&gt;weak_ptr);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// All modules that have not finished initial compilation yet cannot be</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// shared with other isolates. Hence we cancel their compilation. In</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// particular, this will cancel wrapper compilation which is bound to this</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// isolate (this would be a UAF otherwise).</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; weak_module : modules_in_isolate) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> shared_module = weak_module.lock()) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      shared_module-&gt;compilation_state()-&gt;CancelInitialCompilation();</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>.</p>

<p class="reference">Referenced by <a class="el" href="isolate_8cc_source.html#l04476">v8::internal::Isolate::Deinit()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aa103ab294ff94d0c588ea065e30e7038_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1f23ad6a455e30455551d8122228bd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f23ad6a455e30455551d8122228bd82">&#9670;&nbsp;</a></span>DisableCodeLogging()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DisableCodeLogging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td>
          <td class="paramname"><em>native_module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01501">1501</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                                                               {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="comment">// The caller should hold the mutex.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(native_module-&gt;log_code());</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  native_module-&gt;DisableCodeLogging();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.fetch_sub(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="comment">// Check the accuracy of {num_modules_with_code_logging_}.</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.load(std::memory_order_relaxed),</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a8b8cd3857bec34079adc035bd61b0f3f">std::count_if</a>(</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.begin(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.end(),</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;          [](std::pair&lt;NativeModule* <span class="keyword">const</span>, std::unique_ptr&lt;NativeModuleInfo&gt;&gt;&amp;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                 pair) { return pair.first-&gt;log_code(); }));</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a001b9bb450d4ae22f7902cf10a9cb8ed"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">v8::internal::wasm::WasmEngine::num_modules_with_code_logging_</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; num_modules_with_code_logging_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00525">wasm-engine.h:525</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a8b8cd3857bec34079adc035bd61b0f3f"><div class="ttname"><a href="namespacev8_1_1base.html#a8b8cd3857bec34079adc035bd61b0f3f">v8::base::count_if</a></div><div class="ttdeci">size_t count_if(const C &amp;container, const P &amp;predicate)</div><div class="ttdef"><b>Definition:</b> <a href="container-utils_8h_source.html#l00075">container-utils.h:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="container-utils_8h_source.html#l00075">v8::base::count_if()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00901">v8::internal::wasm::NativeModule::DisableCodeLogging()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00525">num_modules_with_code_logging_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82_cgraph.svg" width="100%" height="530"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a54471342125fa1a1edbfce3cbabc9ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54471342125fa1a1edbfce3cbabc9ab6">&#9670;&nbsp;</a></span>DumpAndResetTurboStatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DumpAndResetTurboStatistics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01125">1125</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                             {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    StdoutStream os;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    os &lt;&lt; AsPrintableStatistics{<span class="stringliteral">&quot;Turbofan Wasm&quot;</span>, *<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a>, <span class="keyword">false</span>}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;       &lt;&lt; std::endl;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a>.reset();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_abd8499b0e2af398339967dd5a3297f51"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">v8::internal::wasm::WasmEngine::compilation_stats_</a></div><div class="ttdeci">std::shared_ptr&lt; CompilationStatistics &gt; compilation_stats_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00509">wasm-engine.h:509</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00509">compilation_stats_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="isolate_8cc_source.html#l06079">v8::internal::Isolate::DumpAndResetStats()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a54471342125fa1a1edbfce3cbabc9ab6_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="af051e260505b417cdea6c8b0aa8b5871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af051e260505b417cdea6c8b0aa8b5871">&#9670;&nbsp;</a></span>DumpTurboStatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::DumpTurboStatistics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01135">1135</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                                     {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    StdoutStream os;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    os &lt;&lt; AsPrintableStatistics{<span class="stringliteral">&quot;Turbofan Wasm&quot;</span>, *<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a>, <span class="keyword">false</span>}</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;       &lt;&lt; std::endl;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00509">compilation_stats_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

</div>
</div>
<a id="a75b254189555e5f2910b7759e78cb241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b254189555e5f2910b7759e78cb241">&#9670;&nbsp;</a></span>EnableCodeLogging() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::EnableCodeLogging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01472">1472</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                                                   {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.find(isolate);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.end(), it);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  IsolateInfo* info = it-&gt;second.get();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="keywordflow">if</span> (info-&gt;log_codes) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  info-&gt;log_codes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// Also set {NativeModule::log_code_} for all native modules currently used by</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// this isolate.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">for</span> (NativeModule* native_module : info-&gt;native_modules) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span> (!native_module-&gt;log_code()) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a>(native_module);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  }</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a75b254189555e5f2910b7759e78cb241"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">v8::internal::wasm::WasmEngine::EnableCodeLogging</a></div><div class="ttdeci">void EnableCodeLogging(Isolate *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01472">wasm-engine.cc:1472</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00496">v8::internal::wasm::WasmEngine::IsolateInfo::log_codes</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00490">v8::internal::wasm::WasmEngine::IsolateInfo::native_modules</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01063">ImportNativeModule()</a>, <a class="el" href="log_8cc_source.html#l02362">v8::internal::V8FileLogger::LateSetup()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01604">MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01543">NewNativeModule()</a>, <a class="el" href="cpu-profiler_8cc_source.html#l00075">v8::internal::ProfilingScope::ProfilingScope()</a>, <a class="el" href="runtime-test_8cc_source.html#l01967">v8::internal::RUNTIME_FUNCTION()</a>, <a class="el" href="log_8cc_source.html#l02420">v8::internal::V8FileLogger::SetCodeEventHandler()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01639">UpdateNativeModuleCache()</a>.</p>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241_cgraph.svg" width="496" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae97284d3dcb8da7d6978f2fbcd45a503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae97284d3dcb8da7d6978f2fbcd45a503">&#9670;&nbsp;</a></span>EnableCodeLogging() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::EnableCodeLogging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td>
          <td class="paramname"><em>native_module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01486">1486</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                                              {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// The caller should hold the mutex.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(!native_module-&gt;log_code());</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  native_module-&gt;EnableCodeLogging();</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="comment">// Check the accuracy of {num_modules_with_code_logging_}.</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.load(std::memory_order_relaxed),</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="namespacev8_1_1base.html#a8b8cd3857bec34079adc035bd61b0f3f">std::count_if</a>(</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.begin(), <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.end(),</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;          [](std::pair&lt;NativeModule* <span class="keyword">const</span>, std::unique_ptr&lt;NativeModuleInfo&gt;&gt;&amp;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                 pair) { return pair.first-&gt;log_code(); }));</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="container-utils_8h_source.html#l00075">v8::base::count_if()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00899">v8::internal::wasm::NativeModule::EnableCodeLogging()</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00525">num_modules_with_code_logging_</a>.</p>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ae97284d3dcb8da7d6978f2fbcd45a503_cgraph.svg" width="100%" height="530"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa7d9f3495e9f458675c5ef14337bf2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d9f3495e9f458675c5ef14337bf2a1">&#9670;&nbsp;</a></span>EnterDebuggingForIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::EnterDebuggingForIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00883">883</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                                                          {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  std::vector&lt;std::shared_ptr&lt;NativeModule&gt;&gt; native_modules;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// {mutex_} gets taken both here and in {RemoveCompiledCode} in</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// {AddPotentiallyDeadCode}. Therefore {RemoveCompiledCode} has to be</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// called outside the lock.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;keep_in_debug_state) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;keep_in_debug_state = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>* native_module : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;native_modules) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> shared_ptr = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module]-&gt;weak_ptr.lock()) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        native_modules.emplace_back(std::move(shared_ptr));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      native_module-&gt;SetDebugState(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  WasmCodeRefScope ref_scope;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; native_module : native_modules) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    native_module-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">NativeModule::RemoveFilter::kRemoveNonDebugCode</a>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveNonDebugCode</a></div><div class="ttdeci">@ kRemoveNonDebugCode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">v8::internal::wasm::kDebugging</a></div><div class="ttdeci">@ kDebugging</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00053">wasm-tier.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-tier_8h_source.html#l00053">v8::internal::wasm::kDebugging</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::kRemoveNonDebugCode</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="runtime-test-wasm_8cc_source.html#l00868">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7d9f3495e9f458675c5ef14337bf2a1_icgraph.svg" width="451" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab5fba3adb4605b6aa26dd5da626734d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5fba3adb4605b6aa26dd5da626734d6">&#9670;&nbsp;</a></span>EstimateCurrentMemoryConsumption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmEngine::EstimateCurrentMemoryConsumption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02019">2019</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                                                          {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aee97c8a6e684e2b5b646159ee0c4ec73">WasmEngine</a>, 8392);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(IsolateInfo, 168);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(NativeModuleInfo, 56);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <a class="code" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(CurrentGCInfo, 96);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <span class="keyword">sizeof</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aee97c8a6e684e2b5b646159ee0c4ec73">WasmEngine</a>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a71435eaae2d35e5e71c6a82e8220b0cb">GetCanonicalTypeNamesProvider</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider.html#ac293212fe330bc870ae2591de6b4ce9e">EstimateCurrentMemoryConsumption</a>();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afd72ebd08e53260ccaf49d8c2ab00353">type_canonicalizer_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#add50547bec87230153b84b4c79291dbb">EstimateCurrentMemoryConsumption</a>();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>);</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.size() * <span class="keyword">sizeof</span>(AsyncCompileJob);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="comment">// TODO(14106): Do we care about {compilation_stats_}?</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="comment">// TODO(14106): Do we care about {code_tracer_}?</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.size() * <span class="keyword">sizeof</span>(IsolateInfo);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [isolate, isolate_info] : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(isolate_info-&gt;native_modules);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(isolate_info-&gt;scripts);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(isolate_info-&gt;code_to_log);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.size() * <span class="keyword">sizeof</span>(NativeModuleInfo);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [native_module, native_module_info] : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += native_module-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(native_module_info-&gt;isolates);</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>) {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <span class="keyword">sizeof</span>(CurrentGCInfo);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> += <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_offheap_memory) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;WasmEngine: %zu\n&quot;</span>, <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider_html_ac293212fe330bc870ae2591de6b4ce9e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider.html#ac293212fe330bc870ae2591de6b4ce9e">v8::internal::wasm::CanonicalTypeNamesProvider::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="names-provider_8cc_source.html#l00451">names-provider.cc:451</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html_add50547bec87230153b84b4c79291dbb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html#add50547bec87230153b84b4c79291dbb">v8::internal::wasm::TypeCanonicalizer::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="canonical-types_8cc_source.html#l00395">canonical-types.cc:395</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a0c6a7d8752e24482268ece80b48ad6aa"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">v8::internal::wasm::WasmEngine::current_gc_info_</a></div><div class="ttdeci">std::unique_ptr&lt; CurrentGCInfo &gt; current_gc_info_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00538">wasm-engine.h:538</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_afd72ebd08e53260ccaf49d8c2ab00353"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afd72ebd08e53260ccaf49d8c2ab00353">v8::internal::wasm::WasmEngine::type_canonicalizer_</a></div><div class="ttdeci">TypeCanonicalizer type_canonicalizer_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00493">wasm-engine.h:493</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1internal_html_a9840f2bf0b4780133662292486d0bc01"><div class="ttname"><a href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">v8::base::internal::result</a></div><div class="ttdeci">V result</div><div class="ttdef"><b>Definition:</b> <a href="clamped__math__impl_8h_source.html#l00082">clamped_math_impl.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a71435eaae2d35e5e71c6a82e8220b0cb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a71435eaae2d35e5e71c6a82e8220b0cb">v8::internal::wasm::GetCanonicalTypeNamesProvider</a></div><div class="ttdeci">CanonicalTypeNamesProvider * GetCanonicalTypeNamesProvider()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02140">wasm-engine.cc:2140</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aa122591443234c1d0b597dadc9d55c5e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">v8::internal::wasm::ContentSize</a></div><div class="ttdeci">size_t ContentSize(const std::vector&lt; T &gt; &amp;vector)</div><div class="ttdef"><b>Definition:</b> <a href="std-object-sizes_8h_source.html#l00028">std-object-sizes.h:28</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="astd-object-sizes_8h_html_a56caa02a4280c4f0c82adab429400770"><div class="ttname"><a href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a></div><div class="ttdeci">#define UPDATE_WHEN_CLASS_CHANGES(classname, size)</div><div class="ttdef"><b>Definition:</b> <a href="std-object-sizes_8h_source.html#l00079">std-object-sizes.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="std-object-sizes_8h_source.html#l00028">v8::internal::wasm::ContentSize()</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="canonical-types_8cc_source.html#l00395">v8::internal::wasm::TypeCanonicalizer::EstimateCurrentMemoryConsumption()</a>, <a class="el" href="names-provider_8cc_source.html#l00451">v8::internal::wasm::CanonicalTypeNamesProvider::EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02140">v8::internal::wasm::GetCanonicalTypeNamesProvider()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="utils_2utils_8cc_source.html#l00039">v8::internal::PrintF()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="wasm-engine_8h_source.html#l00493">type_canonicalizer_</a>, <a class="el" href="std-object-sizes_8h_source.html#l00079">UPDATE_WHEN_CLASS_CHANGES</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00543">WasmEngine()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01238">AddIsolate()</a>, <a class="el" href="memory-measurement_8cc_source.html#l00234">v8::internal::MemoryMeasurement::FinishProcessing()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02063">PrintCurrentMemoryConsumptionEstimate()</a>, and <a class="el" href="runtime-test-wasm_8cc_source.html#l00996">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6_cgraph.svg" width="100%" height="585"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6_icgraph.svg" width="100%" height="547"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab2c943d125db63cdbe8ba21b5e1fd594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2c943d125db63cdbe8ba21b5e1fd594">&#9670;&nbsp;</a></span>FinalizeTranslatedAsmJs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt; v8::internal::wasm::WasmEngine::FinalizeTranslatedAsmJs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1AsmWasmData.html">AsmWasmData</a> &gt;&#160;</td>
          <td class="paramname"><em>asm_wasm_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt;&#160;</td>
          <td class="paramname"><em>script</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00659">659</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                                 {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module =</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      asm_wasm_data-&gt;managed_native_module()-&gt;get();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  DirectHandle&lt;WasmModuleObject&gt; module_object =</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">WasmModuleObject::New</a>(isolate, std::move(native_module), <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">return</span> module_object;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmModuleObject_html_a420d36fa31fab80f7dd6cf6bce2438c8"><div class="ttname"><a href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">v8::internal::WasmModuleObject::New</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE DirectHandle&lt; WasmModuleObject &gt; New(Isolate *isolate, std::shared_ptr&lt; wasm::NativeModule &gt; native_module, DirectHandle&lt; Script &gt; script)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l00113">wasm-objects.cc:113</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb7e5cd394b9632dddc2e7807b11b2ab"><div class="ttname"><a href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">v8::internal::script</a></div><div class="ttdeci">kInterpreterTrampolineOffset script</div><div class="ttdef"><b>Definition:</b> <a href="shared-function-info-inl_8h_source.html#l00117">shared-function-info-inl.h:117</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-objects_8cc_source.html#l00113">v8::internal::WasmModuleObject::New()</a>, and <a class="el" href="shared-function-info-inl_8h_source.html#l00117">v8::internal::script</a>.</p>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab2c943d125db63cdbe8ba21b5e1fd594_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab84991e9216741ff8c932c1a64d5aced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab84991e9216741ff8c932c1a64d5aced">&#9670;&nbsp;</a></span>FlushLiftoffCode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::FlushLiftoffCode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01090">1090</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                  {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_liftoff_code);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Keep the NativeModules alive until after the destructor of the</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// `WasmCodeRefScope`, which still needs to access the code and the</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// NativeModule.</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  std::vector&lt;std::shared_ptr&lt;NativeModule&gt;&gt; native_modules;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  WasmCodeRefScope ref_scope;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [native_module, info] : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    std::shared_ptr&lt;NativeModule&gt; shared = info-&gt;weak_ptr.lock();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">if</span> (!shared) <span class="keywordflow">continue</span>;  <span class="comment">// The NativeModule is dying anyway.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    native_module-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436">NativeModule::RemoveFilter::kRemoveLiftoffCode</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    native_modules.emplace_back(std::move(shared));</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveLiftoffCode</a></div><div class="ttdeci">@ kRemoveLiftoffCode</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436">v8::internal::wasm::NativeModule::kRemoveLiftoffCode</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="heap_8cc_source.html#l04351">v8::internal::Heap::EagerlyFreeExternalMemoryAndWasmCode()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02487">v8::internal::wasm::WasmCodeManager::NewNativeModule()</a>, and <a class="el" href="runtime-test-wasm_8cc_source.html#l00986">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced_cgraph.svg" width="444" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a3b0f0f6a499ad560407b32ab5b81aaa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0f0f6a499ad560407b32ab5b81aaa3">&#9670;&nbsp;</a></span>FreeAllOrphanedGlobalHandles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::FreeAllOrphanedGlobalHandles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> *&#160;</td>
          <td class="paramname"><em>start</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00139">139</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                                             {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// This is meant to be called from ~Isolate, so we no longer care about</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// maintaining invariants: the only task is to free memory to prevent leaks.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">while</span> (start != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    WasmOrphanedGlobalHandle* next = start-&gt;next_;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">delete</span> start;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    start = next;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l00116">v8::internal::wasm::WasmOrphanedGlobalHandle::next_</a>.</p>

<p class="reference">Referenced by <a class="el" href="isolate_8cc_source.html#l04758">v8::internal::Isolate::~Isolate()</a>.</p>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3b0f0f6a499ad560407b32ab5b81aaa3_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a7205b4150830ce82a81d687f9f0765af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7205b4150830ce82a81d687f9f0765af">&#9670;&nbsp;</a></span>FreeDeadCode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::FreeDeadCode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> &amp;&#160;</td>
          <td class="paramname"><em>dead_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>dead_wrappers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01872">1872</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                                                                   {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aebf17922093194860a0bbc0beea92716">FreeDeadCodeLocked</a>(dead_code, dead_wrappers);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aebf17922093194860a0bbc0beea92716"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aebf17922093194860a0bbc0beea92716">v8::internal::wasm::WasmEngine::FreeDeadCodeLocked</a></div><div class="ttdeci">void FreeDeadCodeLocked(const DeadCodeMap &amp;, std::vector&lt; WasmCode * &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01878">wasm-engine.cc:1878</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l01878">FreeDeadCodeLocked()</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l00576">v8::internal::wasm::WasmCode::DecrementRefCount()</a>.</p>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aebf17922093194860a0bbc0beea92716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf17922093194860a0bbc0beea92716">&#9670;&nbsp;</a></span>FreeDeadCodeLocked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::FreeDeadCodeLocked </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> &amp;&#160;</td>
          <td class="paramname"><em>dead_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>dead_wrappers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01878">1878</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                                                                         {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.FreeDeadCode&quot;</span>);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; dead_code_entry : dead_code) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    NativeModule* native_module = dead_code_entry.first;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keyword">const</span> std::vector&lt;WasmCode*&gt;&amp; code_vec = dead_code_entry.second;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Freeing %zu code object%s of module %p.\n&quot;</span>, code_vec.size(),</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                  code_vec.size() == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;s&quot;</span>, native_module);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    native_module-&gt;FreeCode(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(code_vec));</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (dead_wrappers.size()) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Freeing %zu wrapper%s.\n&quot;</span>, dead_wrappers.size(),</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                  dead_wrappers.size() == 1 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;s&quot;</span>);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a4cc5d346203b8feafcbb394bf3edb14f">Free</a>(dead_wrappers);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a4cc5d346203b8feafcbb394bf3edb14f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a4cc5d346203b8feafcbb394bf3edb14f">v8::internal::wasm::WasmImportWrapperCache::Free</a></div><div class="ttdeci">void Free(std::vector&lt; WasmCode * &gt; &amp;wrappers)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00177">wasm-import-wrapper-cache.cc:177</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a5bfc65f27076e49eb7752a4fb4d45acb"><div class="ttname"><a href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">v8::base::VectorOf</a></div><div class="ttdeci">constexpr Vector&lt; T &gt; VectorOf(T *start, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="vector_8h_source.html#l00359">vector.h:359</a></div></div>
<div class="ttc" id="awasm-engine_8cc_html_aa11964a2fa0e69c324c74f7361b77a37"><div class="ttname"><a href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a></div><div class="ttdeci">#define TRACE_CODE_GC(...)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00052">wasm-engine.cc:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00177">v8::internal::wasm::WasmImportWrapperCache::Free()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02820">v8::internal::wasm::NativeModule::FreeCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02135">v8::internal::wasm::GetWasmImportWrapperCache()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, and <a class="el" href="vector_8h_source.html#l00359">v8::base::VectorOf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01872">FreeDeadCode()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>.</p>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716_icgraph.svg" width="100%" height="580"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aaf9cd2000af17e8d1f3ebbb9d4cd7c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf9cd2000af17e8d1f3ebbb9d4cd7c09">&#9670;&nbsp;</a></span>FreeNativeModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::FreeNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> *&#160;</td>
          <td class="paramname"><em>native_module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01691">1691</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                                                             {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keyword">auto</span> module = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.find(native_module);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.end(), module);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keyword">auto</span> part_of_native_module = [native_module](WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>) {</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module() == native_module;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  };</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keywordflow">for</span> (Isolate* isolate : module-&gt;second-&gt;isolates) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    IsolateInfo* info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, info-&gt;native_modules.count(native_module));</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    info-&gt;native_modules.erase(native_module);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    info-&gt;scripts.erase(native_module);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="comment">// Flush the Wasm code lookup cache, since it may refer to some</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="comment">// code within native modules that we are going to release (if a</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="comment">// Managed&lt;wasm::NativeModule&gt; object is no longer referenced).</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">FlushCodeLookupCache</a>(isolate);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">// {CodeToLogPerScript} keeps the NativeModule alive, so if it dies, there</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment">// can not be any outstanding code to be logged.</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; log_entry : info-&gt;code_to_log) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : log_entry.second.code) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(native_module, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module());</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// If there is a GC running which has references to code contained in the</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// deleted {NativeModule}, remove those references.</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.begin(),</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;              <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a> = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.end();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;         it != <a class="code" href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">end</a>;) {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span> ((*it)-&gt;native_module() == native_module) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.erase(it);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        ++it;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Native module %p died, reducing dead code objects to %zu.\n&quot;</span>,</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                  native_module, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.size());</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  }</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="comment">// If any code objects are currently tracked as dead or near-dead, remove</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="comment">// references belonging to the NativeModule that&#39;s being deleted.</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <a class="code" href="namespacev8_1_1base.html#abb07611ebb36d3e6f652d11a4a7a6a59">std::erase_if</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>, part_of_native_module);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="keywordflow">if</span> (native_module-&gt;log_code()) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a1f23ad6a455e30455551d8122228bd82">DisableCodeLogging</a>(native_module);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a3dfbde26d38f72095078ecc58caeaef9">Erase</a>(native_module);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.erase(module);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_a3dfbde26d38f72095078ecc58caeaef9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a3dfbde26d38f72095078ecc58caeaef9">v8::internal::wasm::NativeModuleCache::Erase</a></div><div class="ttdeci">void Erase(NativeModule *native_module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00399">wasm-engine.cc:399</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_aa5c5ecc61ab174d77400fa3082e73537"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">v8::internal::wasm::WasmCodeManager::FlushCodeLookupCache</a></div><div class="ttdeci">void FlushCodeLookupCache(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l03025">wasm-code-manager.cc:3025</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a1f23ad6a455e30455551d8122228bd82"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a1f23ad6a455e30455551d8122228bd82">v8::internal::wasm::WasmEngine::DisableCodeLogging</a></div><div class="ttdeci">void DisableCodeLogging(NativeModule *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01501">wasm-engine.cc:1501</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_abb07611ebb36d3e6f652d11a4a7a6a59"><div class="ttname"><a href="namespacev8_1_1base.html#abb07611ebb36d3e6f652d11a4a7a6a59">v8::base::erase_if</a></div><div class="ttdeci">size_t erase_if(C &amp;container, const P &amp;predicate)</div><div class="ttdef"><b>Definition:</b> <a href="container-utils_8h_source.html#l00065">container-utils.h:65</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_html_a51dcb90ae077172b12d63271c7e7ba0c"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler.html#a51dcb90ae077172b12d63271c7e7ba0c">v8::internal::compiler::end</a></div><div class="ttdeci">Node::Uses::const_iterator end(const Node::Uses &amp;uses)</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00711">node.h:711</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8cc_source.html#l00506">v8::internal::wasm::WasmEngine::IsolateInfo::code_to_log</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="wasm-engine_8cc_source.html#l01501">DisableCodeLogging()</a>, <a class="el" href="node_8h_source.html#l00711">v8::internal::compiler::end()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00399">v8::internal::wasm::NativeModuleCache::Erase()</a>, <a class="el" href="container-utils_8h_source.html#l00065">v8::base::erase_if()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l03025">v8::internal::wasm::WasmCodeManager::FlushCodeLookupCache()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02130">v8::internal::wasm::GetWasmCodeManager()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00490">v8::internal::wasm::WasmEngine::IsolateInfo::native_modules</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00493">v8::internal::wasm::WasmEngine::IsolateInfo::scripts</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02154">v8::internal::wasm::NativeModule::~NativeModule()</a>.</p>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09_icgraph.svg" width="531" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2e03dccdce1bc0ab3c0adaf5d7843c8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e03dccdce1bc0ab3c0adaf5d7843c8c">&#9670;&nbsp;</a></span>GetBarrierForBackgroundCompile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1OperationsBarrier.html">OperationsBarrier</a> &gt; v8::internal::wasm::WasmEngine::GetBarrierForBackgroundCompile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01926">1926</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                                           {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8e59070055e532fd16960fe100270492">operations_barrier_</a>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00519">operations_barrier_</a>.</p>

</div>
</div>
<a id="a935fb8d614cf2741a9b6bb23671b0e76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935fb8d614cf2741a9b6bb23671b0e76">&#9670;&nbsp;</a></span>GetCodeTracer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1CodeTracer.html">CodeTracer</a> * v8::internal::wasm::WasmEngine::GetCodeTracer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01144">1144</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                                      {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72dc8534fb90f00e826c647469d1b3aa">code_tracer_</a> == <span class="keyword">nullptr</span>) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72dc8534fb90f00e826c647469d1b3aa">code_tracer_</a>.reset(<span class="keyword">new</span> CodeTracer(-1));</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72dc8534fb90f00e826c647469d1b3aa">code_tracer_</a>.get();</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a72dc8534fb90f00e826c647469d1b3aa"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72dc8534fb90f00e826c647469d1b3aa">v8::internal::wasm::WasmEngine::code_tracer_</a></div><div class="ttdeci">std::unique_ptr&lt; CodeTracer &gt; code_tracer_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00510">wasm-engine.h:510</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00510">code_tracer_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pipeline-data-inl_8h_source.html#l00381">v8::internal::compiler::TFPipelineData::GetCodeTracer()</a>, and <a class="el" href="phase_8cc_source.html#l00122">v8::internal::compiler::turboshaft::PipelineData::GetCodeTracer()</a>.</p>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a935fb8d614cf2741a9b6bb23671b0e76_icgraph.svg" width="100%" height="495"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5147b0f617e7f09fa772e669a5f84c58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5147b0f617e7f09fa772e669a5f84c58">&#9670;&nbsp;</a></span>GetDeoptsExecutedCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> v8::internal::wasm::WasmEngine::GetDeoptsExecutedCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02069">2069</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                                             {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4dcca0bc03dc84027c94cdba6950a8bb">deopts_executed_</a>.load(std::memory_order::relaxed);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a4dcca0bc03dc84027c94cdba6950a8bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4dcca0bc03dc84027c94cdba6950a8bb">v8::internal::wasm::WasmEngine::deopts_executed_</a></div><div class="ttdeci">std::atomic&lt; int &gt; deopts_executed_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00491">wasm-engine.h:491</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00491">deopts_executed_</a>.</p>

<p class="reference">Referenced by <a class="el" href="runtime-test-wasm_8cc_source.html#l01009">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a5147b0f617e7f09fa772e669a5f84c58_icgraph.svg" width="475" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a370767746722805372a02e277c57ffbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370767746722805372a02e277c57ffbb">&#9670;&nbsp;</a></span>GetLiftoffCodeSizeForTesting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmEngine::GetLiftoffCodeSizeForTesting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01107">1107</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                                {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordtype">size_t</span> codesize_liftoff = 0;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [native_module, info] : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    codesize_liftoff += native_module-&gt;SumLiftoffCodeSizeForTesting();</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">return</span> codesize_liftoff;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>.</p>

</div>
</div>
<a id="a031170af170d5bb164813d9c84467999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031170af170d5bb164813d9c84467999">&#9670;&nbsp;</a></span>GetNondeterminismAddr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a> v8::internal::wasm::WasmEngine::GetNondeterminismAddr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00421">421</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                         {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">Address</a><span class="keyword">&gt;</span>(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">had_nondeterminism_</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  }</div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adcd4ca657f5fbce4e3e61f860761470a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adcd4ca657f5fbce4e3e61f860761470a">v8::internal::wasm::Address</a></div><div class="ttdeci">uintptr_t Address</div><div class="ttdef"><b>Definition:</b> <a href="wasm-external-refs_8h_source.html#l00025">wasm-external-refs.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="liftoff-compiler_8cc_source.html#l10274">v8::internal::wasm::anonymous_namespace{liftoff-compiler.cc}::LiftoffCompiler::CheckNan()</a>, and <a class="el" href="liftoff-compiler_8cc_source.html#l10282">v8::internal::wasm::anonymous_namespace{liftoff-compiler.cc}::LiftoffCompiler::CheckS128Nan()</a>.</p>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a031170af170d5bb164813d9c84467999_icgraph.svg" width="575" height="176"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a88e0184f058142bc46a5b93f2f8061b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e0184f058142bc46a5b93f2f8061b3">&#9670;&nbsp;</a></span>GetOrCreateScript()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt; v8::internal::wasm::WasmEngine::GetOrCreateScript </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>native_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const char &gt;&#160;</td>
          <td class="paramname"><em>source_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01896">1896</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                                       {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keyword">auto</span>&amp; scripts = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;scripts;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keyword">auto</span> it = scripts.find(native_module.get());</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (it != scripts.end()) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      DirectHandle&lt;Script&gt; weak_global_handle = it-&gt;second.handle();</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">if</span> (weak_global_handle.is_null()) {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        scripts.erase(it);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1DirectHandle.html#a1c73ff83d2409e0cfd9013b7e7c4b841">DirectHandle&lt;Script&gt;::New</a>(*weak_global_handle, isolate);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      }</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="comment">// Temporarily release the mutex to let the GC collect native modules.</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#af8b90209b5adee4094c41b0048374eb5">CreateWasmScript</a>(isolate, native_module, source_url);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  {</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keyword">auto</span>&amp; scripts = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;scripts;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, scripts.count(native_module.get()));</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    scripts.emplace(native_module.get(), WeakScriptHandle(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>, isolate));</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html_a1c73ff83d2409e0cfd9013b7e7c4b841"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html#a1c73ff83d2409e0cfd9013b7e7c4b841">v8::internal::DirectHandle::New</a></div><div class="ttdeci">static DirectHandle&lt; T &gt; New(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="handles_8h_source.html#l00665">handles.h:665</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_html_af8b90209b5adee4094c41b0048374eb5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#af8b90209b5adee4094c41b0048374eb5">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::CreateWasmScript</a></div><div class="ttdeci">DirectHandle&lt; Script &gt; CreateWasmScript(Isolate *isolate, std::shared_ptr&lt; NativeModule &gt; native_module, base::Vector&lt; const char &gt; source_url)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00953">wasm-engine.cc:953</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l00953">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::CreateWasmScript()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="handles_8h_source.html#l00694">v8::internal::DirectHandle&lt; T &gt;::is_null()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="handles_8h_source.html#l00665">v8::internal::DirectHandle&lt; T &gt;::New()</a>, and <a class="el" href="shared-function-info-inl_8h_source.html#l00117">v8::internal::script</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-serialization_8cc_source.html#l01091">v8::internal::wasm::DeserializeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01063">ImportNativeModule()</a>, <a class="el" href="module-compiler_8cc_source.html#l02722">v8::internal::wasm::AsyncCompileJob::PrepareRuntimeObjects()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>.</p>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae8b9e9de10bcec49ae84e995d61d66cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b9e9de10bcec49ae84e995d61d66cd">&#9670;&nbsp;</a></span>GetOrCreateTurboStatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1CompilationStatistics.html">CompilationStatistics</a> &gt; v8::internal::wasm::WasmEngine::GetOrCreateTurboStatistics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01117">1117</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                       {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a>.reset(<span class="keyword">new</span> CompilationStatistics());</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#abd8499b0e2af398339967dd5a3297f51">compilation_stats_</a>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00509">compilation_stats_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

</div>
</div>
<a id="a3d8b862532f9f18b75db0b33dfa2b4dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8b862532f9f18b75db0b33dfa2b4dd">&#9670;&nbsp;</a></span>GetStreamingCompilationOwnership()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::GetStreamingCompilationOwnership </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>prefix_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;&#160;</td>
          <td class="paramname"><em>compile_imports</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01672">1672</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                                                   {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.GetStreamingCompilationOwnership&quot;</span>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#afad7f423900a5711a6fdeceaf7ebd9fb">GetStreamingCompilationOwnership</a>(prefix_hash,</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                                                            compile_imports)) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="comment">// This is only a marker, not for tracing execution time. There should be a</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="comment">// later &quot;wasm.GetNativeModuleFromCache&quot; event for trying to get the module</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// from the cache.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;CacheHit&quot;</span>);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_afad7f423900a5711a6fdeceaf7ebd9fb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#afad7f423900a5711a6fdeceaf7ebd9fb">v8::internal::wasm::NativeModuleCache::GetStreamingCompilationOwnership</a></div><div class="ttdeci">bool GetStreamingCompilationOwnership(size_t prefix_hash, const CompileTimeImports &amp;compile_imports)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00335">wasm-engine.cc:335</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l00335">v8::internal::wasm::NativeModuleCache::GetStreamingCompilationOwnership()</a>, <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, and <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l03275">v8::internal::wasm::AsyncStreamingProcessor::ProcessCodeSectionHeader()</a>.</p>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd_icgraph.svg" width="479" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3bda543358e208aec76ae5da75d96eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bda543358e208aec76ae5da75d96eb2">&#9670;&nbsp;</a></span>GlobalTearDown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::GlobalTearDown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02109">2109</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                                {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreter.html#a0a1489006f62416ed6d270c718156f93">WasmInterpreter::GlobalTearDown</a>();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  }</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">// Note: This can be called multiple times in a row (see</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// test-api/InitializeAndDisposeMultiple). This is fine, as</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="comment">// {global_wasm_state} will be nullptr then.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="keyword">delete</span> <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a9a81c7e39ba946987239720929adfd44">global_wasm_state</a>;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a9a81c7e39ba946987239720929adfd44">global_wasm_state</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">GetProcessWideWasmCodePointerTable</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#abb4a83c3661851c756fbb24581c47d5e">TearDown</a>();</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_abb4a83c3661851c756fbb24581c47d5e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#abb4a83c3661851c756fbb24581c47d5e">v8::internal::wasm::WasmCodePointerTable::TearDown</a></div><div class="ttdeci">void TearDown()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-pointer-table_8cc_source.html#l00014">wasm-code-pointer-table.cc:14</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInterpreter_html_a0a1489006f62416ed6d270c718156f93"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInterpreter.html#a0a1489006f62416ed6d270c718156f93">v8::internal::wasm::WasmInterpreter::GlobalTearDown</a></div><div class="ttdeci">static void GlobalTearDown()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter_8cc_source.html#l08674">wasm-interpreter.cc:8674</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_html_a9a81c7e39ba946987239720929adfd44"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a9a81c7e39ba946987239720929adfd44">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::global_wasm_state</a></div><div class="ttdeci">GlobalWasmState * global_wasm_state</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02090">wasm-engine.cc:2090</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_adbb89ce490c56aae60c8221f47b9f088"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02090">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::global_wasm_state</a>, <a class="el" href="wasm-interpreter_8cc_source.html#l08674">v8::internal::wasm::WasmInterpreter::GlobalTearDown()</a>, <a class="el" href="wasm-code-pointer-table_8cc_source.html#l00014">v8::internal::wasm::WasmCodePointerTable::TearDown()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="v8_8cc_source.html#l00240">v8::internal::V8::Dispose()</a>.</p>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa14ec7df66897b46477fc275b9d47800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa14ec7df66897b46477fc275b9d47800">&#9670;&nbsp;</a></span>had_nondeterminism()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::had_nondeterminism </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00426">426</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                   {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">had_nondeterminism_</a>.load(std::memory_order_relaxed) != 0;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6afdb3fea4c987fb6d9d515c5faa630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6afdb3fea4c987fb6d9d515c5faa630">&#9670;&nbsp;</a></span>HasRunningCompileJob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::HasRunningCompileJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01176">1176</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                                      {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; entry : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">if</span> (entry.first-&gt;isolate() == isolate) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="api_8cc_source.html#l09879">v8::Isolate::HasPendingBackgroundTasks()</a>.</p>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ab6afdb3fea4c987fb6d9d515c5faa630_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5f2628694fa52ace7df480260cd32f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f2628694fa52ace7df480260cd32f99">&#9670;&nbsp;</a></span>ImportNativeModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt; v8::internal::wasm::WasmEngine::ImportNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td>
          <td class="paramname"><em>shared_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const char &gt;&#160;</td>
          <td class="paramname"><em>source_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01063">1063</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                       {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  NativeModule* native_module = shared_native_module.get();</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  ModuleWireBytes wire_bytes(native_module-&gt;wire_bytes());</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  DirectHandle&lt;Script&gt; <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a> =</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">GetOrCreateScript</a>(isolate, shared_native_module, source_url);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  native_module-&gt;LogWasmCodes(isolate, *<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  DirectHandle&lt;WasmModuleObject&gt; module_object =</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">WasmModuleObject::New</a>(isolate, std::move(shared_native_module), <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    IsolateInfo* isolate_info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.find(isolate)-&gt;second.get();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    isolate_info-&gt;native_modules.insert(native_module);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module]-&gt;isolates.insert(isolate);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (isolate_info-&gt;log_codes &amp;&amp; !native_module-&gt;log_code()) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a>(native_module);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// Finish the Wasm script now and make it public to the debugger.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  isolate-&gt;debug()-&gt;OnAfterCompile(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">return</span> module_object;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a88e0184f058142bc46a5b93f2f8061b3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">v8::internal::wasm::WasmEngine::GetOrCreateScript</a></div><div class="ttdeci">DirectHandle&lt; Script &gt; GetOrCreateScript(Isolate *, const std::shared_ptr&lt; NativeModule &gt; &amp;, base::Vector&lt; const char &gt; source_url)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01896">wasm-engine.cc:1896</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="execution_2isolate_8h_source.html#l01500">v8::internal::Isolate::debug()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01896">GetOrCreateScript()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00496">v8::internal::wasm::WasmEngine::IsolateInfo::log_codes</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l01060">v8::internal::wasm::NativeModule::LogWasmCodes()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00490">v8::internal::wasm::WasmEngine::IsolateInfo::native_modules</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-objects_8cc_source.html#l00113">v8::internal::WasmModuleObject::New()</a>, <a class="el" href="debug_8cc_source.html#l02761">v8::internal::Debug::OnAfterCompile()</a>, <a class="el" href="shared-function-info-inl_8h_source.html#l00117">v8::internal::script</a>, and <a class="el" href="wasm-code-manager_8h_source.html#l00763">v8::internal::wasm::NativeModule::wire_bytes()</a>.</p>

<p class="reference">Referenced by <a class="el" href="api_8cc_source.html#l08830">v8::WasmModuleObject::FromCompiledModule()</a>.</p>
<div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1be1c372613f35998f4b316e21ef7683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1be1c372613f35998f4b316e21ef7683">&#9670;&nbsp;</a></span>IncrementDeoptsExecutedCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> v8::internal::wasm::WasmEngine::IncrementDeoptsExecutedCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02073">2073</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                                             {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="keywordtype">int</span> previous_value = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4dcca0bc03dc84027c94cdba6950a8bb">deopts_executed_</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="keywordflow">return</span> previous_value + 1;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00491">deopts_executed_</a>.</p>

</div>
</div>
<a id="a0dc3794ded31c3d4f26cb020d2ffe332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dc3794ded31c3d4f26cb020d2ffe332">&#9670;&nbsp;</a></span>InitializeOncePerProcess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::InitializeOncePerProcess </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02095">2095</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                                          {</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a9a81c7e39ba946987239720929adfd44">global_wasm_state</a>);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a9a81c7e39ba946987239720929adfd44">global_wasm_state</a> = <span class="keyword">new</span> GlobalWasmState();</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmInterpreter.html#a6e1bc1ea1b2094854bf455f7f8474210">WasmInterpreter::InitializeOncePerProcess</a>();</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  }</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">GetProcessWideWasmCodePointerTable</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ae12e0b3e8c407046858849fb2375c52a">Initialize</a>();</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_ae12e0b3e8c407046858849fb2375c52a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ae12e0b3e8c407046858849fb2375c52a">v8::internal::wasm::WasmCodePointerTable::Initialize</a></div><div class="ttdeci">void Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-pointer-table_8cc_source.html#l00012">wasm-code-pointer-table.cc:12</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInterpreter_html_a6e1bc1ea1b2094854bf455f7f8474210"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInterpreter.html#a6e1bc1ea1b2094854bf455f7f8474210">v8::internal::wasm::WasmInterpreter::InitializeOncePerProcess</a></div><div class="ttdeci">static void InitializeOncePerProcess()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-interpreter_8cc_source.html#l08669">wasm-interpreter.cc:8669</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a2209830df6b59d1ec1fdf66b9352924f"><div class="ttname"><a href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a></div><div class="ttdeci">#define DCHECK_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00490">logging.h:490</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00490">DCHECK_NULL</a>, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#adbb89ce490c56aae60c8221f47b9f088">v8::internal::wasm::GetProcessWideWasmCodePointerTable()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02090">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::global_wasm_state</a>, <a class="el" href="wasm-code-pointer-table_8cc_source.html#l00012">v8::internal::wasm::WasmCodePointerTable::Initialize()</a>, <a class="el" href="wasm-interpreter_8cc_source.html#l08669">v8::internal::wasm::WasmInterpreter::InitializeOncePerProcess()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="v8_8cc_source.html#l00135">v8::internal::V8::Initialize()</a>.</p>
<div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332_cgraph.svg" width="100%" height="474"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332_icgraph.svg" width="630" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac1735499d473116e5a4d0e94de8d92f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1735499d473116e5a4d0e94de8d92f3">&#9670;&nbsp;</a></span>LeaveDebuggingForIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::LeaveDebuggingForIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00909">909</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                                          {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// Only trigger recompilation after releasing the mutex, otherwise we risk</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// deadlocks because of lock inversion. The bool tells whether the module</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// needs recompilation for tier up.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  std::vector&lt;std::pair&lt;std::shared_ptr&lt;NativeModule&gt;, <span class="keywordtype">bool</span>&gt;&gt; native_modules;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;keep_in_debug_state = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keyword">auto</span> can_remove_debug_code = [<span class="keyword">this</span>](NativeModule* native_module) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>* isolate : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module]-&gt;isolates) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;keep_in_debug_state) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    };</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>* native_module : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;native_modules) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keyword">auto</span> shared_ptr = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module]-&gt;weak_ptr.lock();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">if</span> (!shared_ptr) <span class="keywordflow">continue</span>;  <span class="comment">// The module is not used any more.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">if</span> (!native_module-&gt;IsInDebugState()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="comment">// Only start tier-up if no other isolate needs this module in tiered</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="comment">// down state.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordtype">bool</span> remove_debug_code = can_remove_debug_code(native_module);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">if</span> (remove_debug_code) native_module-&gt;SetDebugState(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca3aa3bc68e5fce885fa006c7b99c35b93">kNotDebugging</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      native_modules.emplace_back(std::move(shared_ptr), remove_debug_code);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; entry : native_modules) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keyword">auto</span>&amp; native_module = entry.first;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordtype">bool</span> remove_debug_code = entry.second;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// Remove all breakpoints set by this isolate.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (native_module-&gt;HasDebugInfo()) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      native_module-&gt;GetDebugInfo()-&gt;RemoveIsolate(isolate);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (remove_debug_code) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      WasmCodeRefScope ref_scope;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      native_module-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;          <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">NativeModule::RemoveFilter::kRemoveDebugCode</a>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveDebugCode</a></div><div class="ttdeci">@ kRemoveDebugCode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a25f59e94501ad0ce6680be236623cc3ca3aa3bc68e5fce885fa006c7b99c35b93"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca3aa3bc68e5fce885fa006c7b99c35b93">v8::internal::wasm::kNotDebugging</a></div><div class="ttdeci">@ kNotDebugging</div><div class="ttdef"><b>Definition:</b> <a href="wasm-tier_8h_source.html#l00053">wasm-tier.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-tier_8h_source.html#l00053">v8::internal::wasm::kNotDebugging</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">v8::internal::wasm::NativeModule::kRemoveDebugCode</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>.</p>

<p class="reference">Referenced by <a class="el" href="runtime-test-wasm_8cc_source.html#l00874">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-56" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ac1735499d473116e5a4d0e94de8d92f3_icgraph.svg" width="455" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2b1c94eee0072e6f73f9262078571a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b1c94eee0072e6f73f9262078571a4f">&#9670;&nbsp;</a></span>LogCode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::LogCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt;&#160;</td>
          <td class="paramname"><em>code_vec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01367">1367</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                                                       {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordflow">if</span> (code_vec.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  NativeModule* native_module = code_vec[0]-&gt;native_module();</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (!native_module-&gt;log_code()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keyword">using</span> TaskToSchedule =</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      std::pair&lt;std::shared_ptr&lt;v8::TaskRunner&gt;, std::unique_ptr&lt;LogCodesTask&gt;&gt;;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  std::vector&lt;TaskToSchedule&gt; to_schedule;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    NativeModuleInfo* native_module_info =</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.find(native_module)-&gt;second.get();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    std::shared_ptr&lt;NativeModule&gt; shared_native_module =</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        native_module_info-&gt;weak_ptr.lock();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="comment">// The NativeModule cannot be dying already at this point.</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(shared_native_module);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">for</span> (Isolate* isolate : native_module_info-&gt;isolates) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      IsolateInfo* info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">if</span> (info-&gt;log_codes == <span class="keyword">false</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keyword">auto</span> script_it = info-&gt;scripts.find(native_module);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="comment">// If the script does not yet exist, logging will happen later. If the</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="comment">// weak handle is cleared already, we also don&#39;t need to log any more.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      <span class="keywordflow">if</span> (script_it == info-&gt;scripts.end()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="comment">// If there is no code scheduled to be logged already in that isolate,</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="comment">// then schedule a new task and also set an interrupt to log the newly</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="comment">// added code as soon as possible.</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">if</span> (info-&gt;code_to_log.empty()) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        isolate-&gt;stack_guard()-&gt;RequestLogWasmCode();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        to_schedule.emplace_back(info-&gt;foreground_task_runner,</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                                 std::make_unique&lt;LogCodesTask&gt;(isolate));</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      WeakScriptHandle&amp; weak_script_handle = script_it-&gt;second;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keyword">auto</span>&amp; log_entry = info-&gt;code_to_log[weak_script_handle.script_id()];</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">if</span> (!log_entry.native_module) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        log_entry.native_module = shared_native_module;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">if</span> (!log_entry.source_url) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        log_entry.source_url = weak_script_handle.source_url();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      log_entry.code.insert(log_entry.code.end(), code_vec.begin(),</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                            code_vec.end());</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="comment">// Increment the reference count for the added {log_entry.code} entries.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : code_vec) {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(native_module, <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module());</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;IncRef();</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [runner, task] : to_schedule) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    runner-&gt;PostTask(std::move(task));</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition:</b> <a href="src_2base_2logging_8h_source.html#l00491">logging.h:491</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vector_8h_source.html#l00096">v8::base::Vector&lt; T &gt;::begin()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8cc_source.html#l00506">v8::internal::wasm::WasmEngine::IsolateInfo::code_to_log</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00491">DCHECK_NOT_NULL</a>, <a class="el" href="vector_8h_source.html#l00073">v8::base::Vector&lt; T &gt;::empty()</a>, <a class="el" href="vector_8h_source.html#l00103">v8::base::Vector&lt; T &gt;::end()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00509">v8::internal::wasm::WasmEngine::IsolateInfo::foreground_task_runner</a>, <a class="el" href="wasm-engine_8cc_source.html#l00540">v8::internal::wasm::WasmEngine::NativeModuleInfo::isolates</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-code-manager_8h_source.html#l00897">v8::internal::wasm::NativeModule::log_code()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00496">v8::internal::wasm::WasmEngine::IsolateInfo::log_codes</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00493">v8::internal::wasm::WasmEngine::IsolateInfo::scripts</a>, <a class="el" href="execution_2isolate_8h_source.html#l01213">v8::internal::Isolate::stack_guard()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00537">v8::internal::wasm::WasmEngine::NativeModuleInfo::weak_ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l01183">v8::internal::wasm::CompileLazy()</a>, and <a class="el" href="module-compiler_8cc_source.html#l04276">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::CompilationStateImpl::PublishCode()</a>.</p>
<div id="dynsection-57" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f_cgraph.svg" width="424" height="271"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-58" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a80a2af861380fd22a236025164b81737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a2af861380fd22a236025164b81737">&#9670;&nbsp;</a></span>LogOutstandingCodesForIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::LogOutstandingCodesForIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01516">1516</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                                                               {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// Under the mutex, get the vector of wasm code to log. Then log and decrement</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// the ref count without holding the mutex.</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  std::unordered_map&lt;int, IsolateInfo::CodeToLogPerScript&gt; code_to_log_map;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    code_to_log_map.swap(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;code_to_log);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// Check again whether we still need to log code.</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordtype">bool</span> should_log = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">WasmCode::ShouldBeLogged</a>(isolate);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.LogCode&quot;</span>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [script_id, code_to_log] : code_to_log_map) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">if</span> (should_log) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : code_to_log.code) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* source_url = code_to_log.source_url.get();</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="comment">// The source URL can be empty for eval()&#39;ed scripts.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">if</span> (!source_url) source_url = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;LogCode(isolate, source_url, script_id);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">WasmCode::DecrementRefCount</a>(<a class="code" href="namespacev8_1_1base.html#a5bfc65f27076e49eb7752a4fb4d45acb">base::VectorOf</a>(code_to_log.code));</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aabc336382e10df3a5f7c37ba95d15799"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">v8::internal::wasm::WasmCode::DecrementRefCount</a></div><div class="ttdeci">static void DecrementRefCount(base::Vector&lt; WasmCode *const &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l00576">wasm-code-manager.cc:576</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00576">v8::internal::wasm::WasmCode::DecrementRefCount()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l00245">v8::internal::wasm::WasmCode::ShouldBeLogged()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, and <a class="el" href="vector_8h_source.html#l00359">v8::base::VectorOf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l01183">v8::internal::wasm::CompileLazy()</a>, <a class="el" href="module-compiler_8cc_source.html#l02423">v8::internal::wasm::CompileToNativeModule()</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00374">v8::internal::wasm::WasmImportWrapperCache::CompileWasmJsFastCallWrapper()</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00307">v8::internal::wasm::WasmImportWrapperCache::CompileWrapper()</a>, <a class="el" href="stack-guard_8cc_source.html#l00298">v8::internal::StackGuard::HandleInterrupts()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00164">v8::internal::wasm::WasmEngine::LogCodesTask::RunInternal()</a>.</p>
<div id="dynsection-59" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-60" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4176e62a5efdce84668b7f54c67e0244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4176e62a5efdce84668b7f54c67e0244">&#9670;&nbsp;</a></span>LogWrapperCode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::LogWrapperCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> *&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01425">1425</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                                              {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// Wrappers don&#39;t belong to any particular NativeModule.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module());</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Fast path:</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.load(std::memory_order_relaxed)) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keyword">using</span> TaskToSchedule =</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      std::pair&lt;std::shared_ptr&lt;v8::TaskRunner&gt;, std::unique_ptr&lt;LogCodesTask&gt;&gt;;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  std::vector&lt;TaskToSchedule&gt; to_schedule;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordtype">bool</span> did_trigger_code_logging = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entry : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      Isolate* isolate = entry.first;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      IsolateInfo* info = entry.second.get();</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> (info-&gt;log_codes == <span class="keyword">false</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      did_trigger_code_logging = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="comment">// If this is the first code to log in that isolate, request an interrupt</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="comment">// to log the newly added code as soon as possible.</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">if</span> (info-&gt;code_to_log.empty()) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        isolate-&gt;stack_guard()-&gt;RequestLogWasmCode();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        to_schedule.emplace_back(info-&gt;foreground_task_runner,</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                                 std::make_unique&lt;LogCodesTask&gt;(isolate));</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      constexpr <span class="keywordtype">int</span> kNoScriptId = -1;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keyword">auto</span>&amp; log_entry = info-&gt;code_to_log[kNoScriptId];</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      log_entry.code.push_back(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="comment">// Increment the reference count for the added {log_entry.code} entry.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="comment">// TODO(jkummerow): It might be nice to have a custom smart pointer</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="comment">// that manages updating the refcount for the WasmCode it holds.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;IncRef();</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(did_trigger_code_logging, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a001b9bb450d4ae22f7902cf10a9cb8ed">num_modules_with_code_logging_</a>.load(</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                            std::memory_order_relaxed) &gt; 0);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [runner, task] : to_schedule) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    runner-&gt;PostTask(std::move(task));</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">return</span> did_trigger_code_logging;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8cc_source.html#l00506">v8::internal::wasm::WasmEngine::IsolateInfo::code_to_log</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00490">DCHECK_NULL</a>, <a class="el" href="wasm-engine_8cc_source.html#l00509">v8::internal::wasm::WasmEngine::IsolateInfo::foreground_task_runner</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00496">v8::internal::wasm::WasmEngine::IsolateInfo::log_codes</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00525">num_modules_with_code_logging_</a>, and <a class="el" href="execution_2isolate_8h_source.html#l01213">v8::internal::Isolate::stack_guard()</a>.</p>
<div id="dynsection-61" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a4176e62a5efdce84668b7f54c67e0244_cgraph.svg" width="440" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a26391b903e117ed93787d080f0bc2fe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26391b903e117ed93787d080f0bc2fe4">&#9670;&nbsp;</a></span>MaybeGetNativeModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; v8::internal::wasm::WasmEngine::MaybeGetNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80">ModuleOrigin</a>&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>wire_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01604">1604</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                                                                 {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.GetNativeModuleFromCache&quot;</span>, <span class="stringliteral">&quot;wire_bytes&quot;</span>,</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;               wire_bytes.size());</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module =</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a559f23d013462e166a90f82755428ebe">MaybeGetNativeModule</a>(origin, wire_bytes,</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                                                compile_imports);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordtype">bool</span> remove_all_code = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">if</span> (native_module) {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;CacheHit&quot;</span>);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keyword">auto</span>&amp; native_module_info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module.get()];</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">if</span> (!native_module_info) {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      native_module_info = std::make_unique&lt;NativeModuleInfo&gt;(native_module);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    native_module_info-&gt;isolates.insert(isolate);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keyword">auto</span>* isolate_data = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    isolate_data-&gt;native_modules.insert(native_module.get());</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> (isolate_data-&gt;keep_in_debug_state &amp;&amp; !native_module-&gt;IsInDebugState()) {</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      remove_all_code = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      native_module-&gt;SetDebugState(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (isolate_data-&gt;log_codes &amp;&amp; !native_module-&gt;log_code()) {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a>(native_module.get());</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordflow">if</span> (remove_all_code) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    WasmCodeRefScope ref_scope;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    native_module-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">NativeModule::RemoveFilter::kRemoveNonDebugCode</a>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_a559f23d013462e166a90f82755428ebe"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a559f23d013462e166a90f82755428ebe">v8::internal::wasm::NativeModuleCache::MaybeGetNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; MaybeGetNativeModule(ModuleOrigin origin, base::Vector&lt; const uint8_t &gt; wire_bytes, const CompileTimeImports &amp;compile_imports)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00295">wasm-engine.cc:295</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-tier_8h_source.html#l00053">v8::internal::wasm::kDebugging</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::kRemoveNonDebugCode</a>, <a class="el" href="wasm-engine_8cc_source.html#l00295">v8::internal::wasm::NativeModuleCache::MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="vector_8h_source.html#l00070">v8::base::Vector&lt; T &gt;::size()</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, and <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-serialization_8cc_source.html#l01091">v8::internal::wasm::DeserializeNativeModule()</a>, <a class="el" href="module-compiler_8cc_source.html#l02378">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetOrCompileNewNativeModule()</a>, and <a class="el" href="module-compiler_8cc_source.html#l02711">v8::internal::wasm::AsyncCompileJob::GetOrCreateNativeModule()</a>.</p>
<div id="dynsection-62" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-63" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-63-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-63-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-63-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a607eb9a1f2f1b6d542c11a0b030cd56f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607eb9a1f2f1b6d542c11a0b030cd56f">&#9670;&nbsp;</a></span>NativeModuleCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmEngine::NativeModuleCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00149">149</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                           {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.size();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>.</p>

</div>
</div>
<a id="ac7a8ec2f950e76dfa9e2ec483c15a372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a8ec2f950e76dfa9e2ec483c15a372">&#9670;&nbsp;</a></span>NewNativeModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; v8::internal::wasm::WasmEngine::NewNativeModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a>&#160;</td>
          <td class="paramname"><em>detected_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a> &gt;&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>code_size_estimate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01543">1543</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                                                                       {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;               <span class="stringliteral">&quot;wasm.NewNativeModule&quot;</span>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_gdb_remote &amp;&amp; !gdb_server_) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    gdb_server_ = <a class="code" href="classv8_1_1internal_1_1wasm_1_1gdb__server_1_1GdbServer.html#aafdbc06ac4debd088989426e15a3265b">gdb_server::GdbServer::Create</a>();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    gdb_server_-&gt;AddIsolate(isolate);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">// Initialize the import wrapper cache if that hasn&#39;t happened yet.</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a62f4cb8fc02e1bbfe2ed0f09ce2aa050">LazyInitialize</a>(isolate);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module =</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8cbd92108ae1c153f66f40609aed5783">NewNativeModule</a>(</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;          isolate, enabled_features, detected_features,</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;          std::move(compile_imports), code_size_estimate, std::move(module));</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_pgo_to_file)) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">native_modules_kept_alive_for_pgo</a>) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">native_modules_kept_alive_for_pgo</a> =</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;          <span class="keyword">new</span> std::vector&lt;std::shared_ptr&lt;NativeModule&gt;&gt;;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a01ea512b0721f1f5ced70d87c6ae028b">native_modules_kept_alive_for_pgo</a>-&gt;emplace_back(native_module);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keyword">auto</span> [iterator, inserted] = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.insert(std::make_pair(</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      native_module.get(), std::make_unique&lt;NativeModuleInfo&gt;(native_module)));</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(inserted);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  NativeModuleInfo* native_module_info = iterator-&gt;second.get();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  native_module_info-&gt;isolates.insert(isolate);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  IsolateInfo* isolate_info = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.find(isolate)-&gt;second.get();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  isolate_info-&gt;native_modules.insert(native_module.get());</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keywordflow">if</span> (isolate_info-&gt;keep_in_debug_state) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    native_module-&gt;SetDebugState(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="keywordflow">if</span> (isolate_info-&gt;log_codes) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a>(native_module.get());</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// Record memory protection key support.</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="keywordflow">if</span> (!isolate_info-&gt;pku_support_sampled) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    isolate_info-&gt;pku_support_sampled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keyword">auto</span>* histogram =</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        isolate-&gt;counters()-&gt;wasm_memory_protection_keys_support();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordtype">bool</span> has_mpk = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">WasmCodeManager::HasMemoryProtectionKeySupport</a>();</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    histogram-&gt;AddSample(has_mpk ? 1 : 0);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  isolate-&gt;counters()-&gt;wasm_modules_per_isolate()-&gt;AddSample(</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(isolate_info-&gt;native_modules.size()));</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  isolate-&gt;counters()-&gt;wasm_modules_per_engine()-&gt;AddSample(</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.size()));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a3efdc870dd21f075b3c408101c23feeb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">v8::internal::wasm::WasmCodeManager::HasMemoryProtectionKeySupport</a></div><div class="ttdeci">static bool HasMemoryProtectionKeySupport()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02465">wasm-code-manager.cc:2465</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a8cbd92108ae1c153f66f40609aed5783"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8cbd92108ae1c153f66f40609aed5783">v8::internal::wasm::WasmCodeManager::NewNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; NewNativeModule(Isolate *isolate, WasmEnabledFeatures enabled_features, WasmDetectedFeatures detected_features, CompileTimeImports compile_imports, size_t code_size_estimate, std::shared_ptr&lt; const WasmModule &gt; module)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l02487">wasm-code-manager.cc:2487</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a62f4cb8fc02e1bbfe2ed0f09ce2aa050"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a62f4cb8fc02e1bbfe2ed0f09ce2aa050">v8::internal::wasm::WasmImportWrapperCache::LazyInitialize</a></div><div class="ttdeci">void LazyInitialize(Isolate *triggering_isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00059">wasm-import-wrapper-cache.cc:59</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1gdb__server_1_1GdbServer_html_aafdbc06ac4debd088989426e15a3265b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1gdb__server_1_1GdbServer.html#aafdbc06ac4debd088989426e15a3265b">v8::internal::wasm::gdb_server::GdbServer::Create</a></div><div class="ttdeci">static std::unique_ptr&lt; GdbServer &gt; Create()</div><div class="ttdef"><b>Definition:</b> <a href="gdb-server_8cc_source.html#l00121">gdb-server.cc:121</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a97689377430b094caec680dd7dd230fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a></div><div class="ttdeci">#define TRACE_DISABLED_BY_DEFAULT(name)</div><div class="ttdef"><b>Definition:</b> <a href="trace-event-no-perfetto_8h_source.html#l00025">trace-event-no-perfetto.h:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="gdb-server_8cc_source.html#l00121">v8::internal::wasm::gdb_server::GdbServer::Create()</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02130">v8::internal::wasm::GetWasmCodeManager()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02135">v8::internal::wasm::GetWasmImportWrapperCache()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02465">v8::internal::wasm::WasmCodeManager::HasMemoryProtectionKeySupport()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00540">v8::internal::wasm::WasmEngine::NativeModuleInfo::isolates</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-tier_8h_source.html#l00053">v8::internal::wasm::kDebugging</a>, <a class="el" href="wasm-engine_8cc_source.html#l00514">v8::internal::wasm::WasmEngine::IsolateInfo::keep_in_debug_state</a>, <a class="el" href="wasm-import-wrapper-cache_8cc_source.html#l00059">v8::internal::wasm::WasmImportWrapperCache::LazyInitialize()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00496">v8::internal::wasm::WasmEngine::IsolateInfo::log_codes</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00490">v8::internal::wasm::WasmEngine::IsolateInfo::native_modules</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00291">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::native_modules_kept_alive_for_pgo</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l02487">v8::internal::wasm::WasmCodeManager::NewNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00518">v8::internal::wasm::WasmEngine::IsolateInfo::pku_support_sampled</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00025">TRACE_DISABLED_BY_DEFAULT</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, and <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l02691">v8::internal::wasm::AsyncCompileJob::CreateNativeModule()</a>, <a class="el" href="wasm-serialization_8cc_source.html#l01091">v8::internal::wasm::DeserializeNativeModule()</a>, and <a class="el" href="module-compiler_8cc_source.html#l02378">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetOrCompileNewNativeModule()</a>.</p>
<div id="dynsection-64" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-64-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-64-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-64-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-65" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-65-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-65-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-65-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9d3649a654e59febca437472b29ba82d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d3649a654e59febca437472b29ba82d">&#9670;&nbsp;</a></span>NewOrphanedGlobalHandle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> * v8::internal::wasm::WasmEngine::NewOrphanedGlobalHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle.html">WasmOrphanedGlobalHandle</a> **&#160;</td>
          <td class="paramname"><em>pointer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00125">125</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// No need for additional locking: this is only ever called indirectly</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// from {WasmEngine::ClearWeakScriptHandle()}, which holds the engine-wide</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// {mutex_}.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  WasmOrphanedGlobalHandle* orphan = <span class="keyword">new</span> WasmOrphanedGlobalHandle();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  orphan-&gt;next_ = *pointer;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  orphan-&gt;prev_ptr_ = pointer;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span> (orphan-&gt;next_ != <span class="keyword">nullptr</span>) orphan-&gt;next_-&gt;prev_ptr_ = &amp;orphan-&gt;next_;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  *pointer = orphan;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> orphan;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l00116">v8::internal::wasm::WasmOrphanedGlobalHandle::next_</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00117">v8::internal::wasm::WasmOrphanedGlobalHandle::prev_ptr_</a>.</p>

</div>
</div>
<a id="abb2608ebf20e9f161b6b3404100dd39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2608ebf20e9f161b6b3404100dd39a">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a>&amp; v8::internal::wasm::WasmEngine::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a560f639666a3676d954d73ef3324b99e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a560f639666a3676d954d73ef3324b99e">&#9670;&nbsp;</a></span>PotentiallyFinishCurrentGC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::PotentiallyFinishCurrentGC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01970">1970</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                                            {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <span class="stringliteral">&quot;Remaining dead code objects: %zu; outstanding isolates: %zu.\n&quot;</span>,</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.size(),</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates.size());</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">// If there are more outstanding isolates, return immediately.</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="comment">// All remaining code in {current_gc_info-&gt;dead_code} is really dead.</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="comment">// Remove it from the set of potentially dead code, and decrement its</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <span class="comment">// ref count.</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="keywordtype">size_t</span> num_freed = 0;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">DeadCodeMap</a> dead_code;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  std::vector&lt;WasmCode*&gt; dead_wrappers;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code) {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>.contains(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>));</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;is_dying());</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>.erase(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;DecRefOnDeadCode()) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      NativeModule* native_module = <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;native_module();</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <span class="keywordflow">if</span> (native_module) {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        dead_code[native_module].push_back(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        dead_wrappers.push_back(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      }</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      ++num_freed;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160; </div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aebf17922093194860a0bbc0beea92716">FreeDeadCodeLocked</a>(dead_code, dead_wrappers);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Found %zu dead code objects, freed %zu.\n&quot;</span>,</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.size(), num_freed);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <a class="code" href="src_2base_2macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(num_freed);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  int8_t next_gc_sequence_index = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;next_gc_sequence_index;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>.reset();</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="keywordflow">if</span> (next_gc_sequence_index != 0) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aef409600fd7f21493340e1b9372247ea">TriggerGC</a>(next_gc_sequence_index);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a34ff6a2da3d8ef3b85ad087cc4316ebe"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a34ff6a2da3d8ef3b85ad087cc4316ebe">v8::internal::wasm::WasmEngine::DeadCodeMap</a></div><div class="ttdeci">std::unordered_map&lt; NativeModule *, std::vector&lt; WasmCode * &gt; &gt; DeadCodeMap</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00380">wasm-engine.h:380</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aef409600fd7f21493340e1b9372247ea"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aef409600fd7f21493340e1b9372247ea">v8::internal::wasm::WasmEngine::TriggerGC</a></div><div class="ttdeci">void TriggerGC(int8_t gc_sequence_index)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01930">wasm-engine.cc:1930</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01878">FreeDeadCodeLocked()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>, and <a class="el" href="src_2base_2macros_8h_source.html#l00293">USE</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01745">ReportLiveCodeForGC()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>.</p>
<div id="dynsection-66" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-66-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-66-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-66-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-67" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-67-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-67-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-67-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e_icgraph.svg" width="100%" height="580"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a32e34a8169c3a723824780c6ac126654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32e34a8169c3a723824780c6ac126654">&#9670;&nbsp;</a></span>PrintCurrentMemoryConsumptionEstimate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::PrintCurrentMemoryConsumptionEstimate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l02063">2063</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                                                             {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_offheap_memory_size);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;Off-heap memory size of WasmEngine: %zu\n&quot;</span>,</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;         <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5fba3adb4605b6aa26dd5da626734d6">EstimateCurrentMemoryConsumption</a>());</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ab5fba3adb4605b6aa26dd5da626734d6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5fba3adb4605b6aa26dd5da626734d6">v8::internal::wasm::WasmEngine::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l02019">wasm-engine.cc:2019</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="utils_2utils_8cc_source.html#l00039">v8::internal::PrintF()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-code-manager_8cc_source.html#l02154">v8::internal::wasm::NativeModule::~NativeModule()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>
<div id="dynsection-68" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-68-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-68-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-68-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654_cgraph.svg" width="100%" height="589"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-69" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-69-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-69-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-69-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654_icgraph.svg" width="510" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8378f5ecdd236147a0b3c590c12899b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8378f5ecdd236147a0b3c590c12899b8">&#9670;&nbsp;</a></span>RemoveCompileJob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> &gt; v8::internal::wasm::WasmEngine::RemoveCompileJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a> *&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01166">1166</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                          {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keyword">auto</span> item = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.find(job);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(item != <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.end());</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  std::unique_ptr&lt;AsyncCompileJob&gt; <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = std::move(item-&gt;second);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aa7983ea4754315852b25c620f17514c3">async_compile_jobs_</a>.erase(item);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00507">async_compile_jobs_</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, and <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l02480">v8::internal::wasm::AsyncCompileJob::Abort()</a>, <a class="el" href="module-compiler_8cc_source.html#l02833">v8::internal::wasm::AsyncCompileJob::Failed()</a>, and <a class="el" href="module-compiler_8cc_source.html#l03212">v8::internal::wasm::AsyncCompileJob::FinishSuccessfully()</a>.</p>
<div id="dynsection-70" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-70-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-70-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-70-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8_cgraph.svg" width="468" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-71" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-71-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-71-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-71-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8_icgraph.svg" width="100%" height="590"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="adb290a299b20f78b6b32641fc21325c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb290a299b20f78b6b32641fc21325c5">&#9670;&nbsp;</a></span>RemoveIsolate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::RemoveIsolate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01291">1291</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                               {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">#ifdef V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (gdb_server_) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    gdb_server_-&gt;RemoveIsolate(isolate);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WASM_GDB_REMOTE_DEBUGGING</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// Keep a WasmCodeRefScope which dies after the {mutex_} is released, to avoid</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">// deadlock when code actually dies, as that requires taking the {mutex_}.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// Also, keep the NativeModules themselves alive. The isolate is shutting</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">// down, so the heap will not do that any more.</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  std::set&lt;std::shared_ptr&lt;NativeModule&gt;&gt; native_modules_with_code_to_log;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  WasmCodeRefScope code_ref_scope_for_dead_code;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// Lookup the IsolateInfo; do not remove it yet (that happens below).</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keyword">auto</span> isolates_it = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.find(isolate);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.end(), isolates_it);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  IsolateInfo* isolate_info = isolates_it-&gt;second.get();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// Remove the isolate from the per-native-module info, and other cleanup.</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>* native_module : isolate_info-&gt;native_modules) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module));</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    NativeModuleInfo* native_module_info =</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.find(native_module)-&gt;second.get();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// Check that the {NativeModule::log_code_} field has the expected value,</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="comment">// and update if the dying isolate was the last one with code logging</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">// enabled.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keyword">auto</span> has_isolate_with_code_logging = [<span class="keyword">this</span>, native_module_info] {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1base.html#a0e542246e39cb25a93193a080e0e1148">std::any_of</a>(native_module_info-&gt;isolates.begin(),</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                         native_module_info-&gt;isolates.end(),</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                         [<span class="keyword">this</span>](Isolate* isolate) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                           return isolates_.find(isolate)-&gt;second-&gt;log_codes;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                         });</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    };</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(native_module-&gt;log_code(), has_isolate_with_code_logging());</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, native_module_info-&gt;isolates.count(isolate));</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    native_module_info-&gt;isolates.erase(isolate);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (native_module-&gt;log_code() &amp;&amp; !has_isolate_with_code_logging()) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a1f23ad6a455e30455551d8122228bd82">DisableCodeLogging</a>(native_module);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">// Remove any debug code and other info for this isolate.</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">if</span> (native_module-&gt;HasDebugInfo()) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      native_module-&gt;GetDebugInfo()-&gt;RemoveIsolate(isolate);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// Abort any outstanding GC.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad4c99b313fb0dcd2dc0e032f8a945b55">RemoveIsolateFromCurrentGC</a>(isolate)) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a560f639666a3676d954d73ef3324b99e">PotentiallyFinishCurrentGC</a>();</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  }</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">// Clear the {code_to_log} vector.</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [script_id, code_to_log] : isolate_info-&gt;code_to_log) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (code_to_log.native_module == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="comment">// Wrapper code objects have neither Script nor NativeModule.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(script_id, -1);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      native_modules_with_code_to_log.insert(code_to_log.native_module);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : code_to_log.code) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="comment">// Keep a reference in the {code_ref_scope_for_dead_code} such that the</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="comment">// code cannot become dead immediately.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>-&gt;DecRefOnLiveCode();</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  isolate_info-&gt;code_to_log.clear();</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">// Finally remove the {IsolateInfo} for this isolate.</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.erase(isolates_it);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html_a9148e3cdeac9e7f3d97d518fa66f722c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">v8::internal::wasm::WasmCodeRefScope::AddRef</a></div><div class="ttdeci">static void AddRef(WasmCode *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-code-manager_8cc_source.html#l03045">wasm-code-manager.cc:3045</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a560f639666a3676d954d73ef3324b99e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a560f639666a3676d954d73ef3324b99e">v8::internal::wasm::WasmEngine::PotentiallyFinishCurrentGC</a></div><div class="ttdeci">void PotentiallyFinishCurrentGC()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01970">wasm-engine.cc:1970</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_ad4c99b313fb0dcd2dc0e032f8a945b55"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad4c99b313fb0dcd2dc0e032f8a945b55">v8::internal::wasm::WasmEngine::RemoveIsolateFromCurrentGC</a></div><div class="ttdeci">bool RemoveIsolateFromCurrentGC(Isolate *)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01964">wasm-engine.cc:1964</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a0e542246e39cb25a93193a080e0e1148"><div class="ttname"><a href="namespacev8_1_1base.html#a0e542246e39cb25a93193a080e0e1148">v8::base::any_of</a></div><div class="ttdeci">bool any_of(const C &amp;container, const P &amp;predicate)</div><div class="ttdef"><b>Definition:</b> <a href="container-utils_8h_source.html#l00093">container-utils.h:93</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-code-manager_8cc_source.html#l03045">v8::internal::wasm::WasmCodeRefScope::AddRef()</a>, <a class="el" href="container-utils_8h_source.html#l00093">v8::base::any_of()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8cc_source.html#l00506">v8::internal::wasm::WasmEngine::IsolateInfo::code_to_log</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="wasm-engine_8cc_source.html#l01501">DisableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00540">v8::internal::wasm::WasmEngine::NativeModuleInfo::isolates</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00490">v8::internal::wasm::WasmEngine::IsolateInfo::native_modules</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01964">RemoveIsolateFromCurrentGC()</a>.</p>

<p class="reference">Referenced by <a class="el" href="isolate_8cc_source.html#l04476">v8::internal::Isolate::Deinit()</a>.</p>
<div id="dynsection-72" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-72-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-72-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-72-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-73" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-73-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-73-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-73-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad4c99b313fb0dcd2dc0e032f8a945b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c99b313fb0dcd2dc0e032f8a945b55">&#9670;&nbsp;</a></span>RemoveIsolateFromCurrentGC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::RemoveIsolateFromCurrentGC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01964">1964</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                                                            {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates.erase(isolate) != 0;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00491">DCHECK_NOT_NULL</a>, and <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01745">ReportLiveCodeForGC()</a>.</p>
<div id="dynsection-74" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-74-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-74-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-74-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55_cgraph.svg" width="484" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-75" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-75-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-75-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-75-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55_icgraph.svg" width="100%" height="462"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a7322f883d6ce700b7a38c40727a78787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7322f883d6ce700b7a38c40727a78787">&#9670;&nbsp;</a></span>ReportLiveCodeForGC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::ReportLiveCodeForGC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_set&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>live_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01745">1745</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                                                                             {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.ReportLiveCodeForGC&quot;</span>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Isolate %d reporting %zu live code objects.\n&quot;</span>, isolate-&gt;id(),</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                live_code.size());</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// This report might come in late (note that we trigger both a stack guard and</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// a foreground task). In that case, ignore it.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad4c99b313fb0dcd2dc0e032f8a945b55">RemoveIsolateFromCurrentGC</a>(isolate)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  isolate-&gt;counters()-&gt;wasm_module_num_triggered_code_gcs()-&gt;AddSample(</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;gc_sequence_index);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : live_code) <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.erase(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a560f639666a3676d954d73ef3324b99e">PotentiallyFinishCurrentGC</a>();</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="execution_2isolate_8h_source.html#l01767">v8::internal::Isolate::id()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01964">RemoveIsolateFromCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, and <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01787">ReportLiveCodeFromStackForGC()</a>.</p>
<div id="dynsection-76" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-76-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-76-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-76-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-77" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-77-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-77-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-77-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a43921e4c5d6e746d3a75996e28361521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43921e4c5d6e746d3a75996e28361521">&#9670;&nbsp;</a></span>ReportLiveCodeFromStackForGC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::ReportLiveCodeFromStackForGC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01787">1787</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                                                              {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  wasm::WasmCodeRefScope code_ref_scope;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  std::unordered_set&lt;wasm::WasmCode*&gt; live_wasm_code;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> std::unique_ptr&lt;StackMemory&gt;&amp; <a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a> : isolate-&gt;wasm_stacks()) {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a>-&gt;IsActive()) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="comment">// The active stack&#39;s jump buffer does not match the current state, use</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="comment">// the thread info below instead.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">for</span> (StackFrameIterator it(isolate, <a class="code" href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">stack</a>.get()); !it.done();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;         it.Advance()) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      StackFrame* <span class="keyword">const</span> frame = it.frame();</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a5da809708435a4f9ea416252060ce7f9">ReportLiveCodeFromFrameForGC</a>(isolate, frame, live_wasm_code);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  }</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">for</span> (StackFrameIterator it(isolate, isolate-&gt;thread_local_top(),</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                             StackFrameIterator::FirstStackOnly{});</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;       !it.done(); it.Advance()) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    StackFrame* <span class="keyword">const</span> frame = it.frame();</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a5da809708435a4f9ea416252060ce7f9">ReportLiveCodeFromFrameForGC</a>(isolate, frame, live_wasm_code);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#aef66645c369e2ac73d5c9a7d9ca821f0">CheckNoArchivedThreads</a>(isolate);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="comment">// Flush the code lookup cache, since it may refer to some code we</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">// are going to release.</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">FlushCodeLookupCache</a>(isolate);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7322f883d6ce700b7a38c40727a78787">ReportLiveCodeForGC</a>(isolate, live_wasm_code);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a7322f883d6ce700b7a38c40727a78787"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7322f883d6ce700b7a38c40727a78787">v8::internal::wasm::WasmEngine::ReportLiveCodeForGC</a></div><div class="ttdeci">void ReportLiveCodeForGC(Isolate *, std::unordered_set&lt; WasmCode * &gt; &amp;live_code)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01745">wasm-engine.cc:1745</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_html_a5da809708435a4f9ea416252060ce7f9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#a5da809708435a4f9ea416252060ce7f9">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::ReportLiveCodeFromFrameForGC</a></div><div class="ttdeci">void ReportLiveCodeFromFrameForGC(Isolate *isolate, StackFrame *frame, std::unordered_set&lt; wasm::WasmCode * &gt; &amp;live_wasm_code)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l01762">wasm-engine.cc:1762</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_html_aef66645c369e2ac73d5c9a7d9ca821f0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03.html#aef66645c369e2ac73d5c9a7d9ca821f0">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::CheckNoArchivedThreads</a></div><div class="ttdeci">void CheckNoArchivedThreads(Isolate *isolate)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00173">wasm-engine.cc:173</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2e748ee13f84c923e077d341045b1212"><div class="ttname"><a href="namespacev8_1_1internal.html#a2e748ee13f84c923e077d341045b1212">v8::internal::stack</a></div><div class="ttdeci">stack</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects-inl_8h_source.html#l00824">wasm-objects-inl.h:824</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l00173">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::CheckNoArchivedThreads()</a>, <a class="el" href="frames_8h_source.html#l01642">v8::internal::StackFrameIteratorBase::done()</a>, <a class="el" href="wasm-code-manager_8cc_source.html#l03025">v8::internal::wasm::WasmCodeManager::FlushCodeLookupCache()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02130">v8::internal::wasm::GetWasmCodeManager()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01745">ReportLiveCodeForGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01762">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::ReportLiveCodeFromFrameForGC()</a>, <a class="el" href="wasm-objects-inl_8h_source.html#l00824">v8::internal::stack</a>, and <a class="el" href="execution_2isolate_8h_source.html#l01346">v8::internal::Isolate::thread_local_top()</a>.</p>

<p class="reference">Referenced by <a class="el" href="stack-guard_8cc_source.html#l00298">v8::internal::StackGuard::HandleInterrupts()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00190">v8::internal::wasm::anonymous_namespace{wasm-engine.cc}::WasmGCForegroundTask::RunInternal()</a>.</p>
<div id="dynsection-78" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-78-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-78-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-78-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-79" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-79-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-79-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-79-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a6af21252e29d47e802fb0fb84a6739ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af21252e29d47e802fb0fb84a6739ad">&#9670;&nbsp;</a></span>SampleTopTierCodeSizeInAllIsolates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::SampleTopTierCodeSizeInAllIsolates </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a97fb0af7b57585ca92456077115b16a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97fb0af7b57585ca92456077115b16a7">&#9670;&nbsp;</a></span>set_had_nondeterminism()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::set_had_nondeterminism </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00431">431</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                       {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a70430985b66280d5790dcc810f5994ce">had_nondeterminism_</a>.store(1, std::memory_order_relaxed);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wasm-objects_8cc_source.html#l01146">v8::internal::WasmMemoryObject::Grow()</a>.</p>
<div id="dynsection-80" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-80-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-80-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-80-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7_icgraph.svg" width="100%" height="498"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aeea968c225f6306c9b4e49d693ac436b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea968c225f6306c9b4e49d693ac436b">&#9670;&nbsp;</a></span>StartStreamingCompilation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html">StreamingDecoder</a> &gt; v8::internal::wasm::WasmEngine::StartStreamingCompilation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Context.html">Context</a> &gt;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>api_method_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompilationResultResolver.html">CompilationResultResolver</a> &gt;&#160;</td>
          <td class="paramname"><em>resolver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00852">852</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                                       {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordtype">int</span> compilation_id = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">next_compilation_id_</a>.fetch_add(1);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.StartStreamingCompilation&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;               compilation_id);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_async_compilation) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    AsyncCompileJob* job = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a8d959cfc3867745d04ace1ec94bb5209">CreateAsyncCompileJob</a>(</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        isolate, enabled, std::move(compile_imports), {}, context,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        api_method_name, std::move(resolver), compilation_id);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">return</span> job-&gt;<a class="code" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5323277e186f3ae7566581ed5e08e518">CreateStreamingDecoder</a>();</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html#a0c65cb3ee4998f270c5582fb588c582a">StreamingDecoder::CreateSyncStreamingDecoder</a>(</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      isolate, enabled, std::move(compile_imports), context, api_method_name,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      std::move(resolver));</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1AsyncCompileJob_html_a5323277e186f3ae7566581ed5e08e518"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html#a5323277e186f3ae7566581ed5e08e518">v8::internal::wasm::AsyncCompileJob::CreateStreamingDecoder</a></div><div class="ttdeci">std::shared_ptr&lt; StreamingDecoder &gt; CreateStreamingDecoder()</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02665">module-compiler.cc:2665</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StreamingDecoder_html_a0c65cb3ee4998f270c5582fb588c582a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StreamingDecoder.html#a0c65cb3ee4998f270c5582fb588c582a">v8::internal::wasm::StreamingDecoder::CreateSyncStreamingDecoder</a></div><div class="ttdeci">static std::unique_ptr&lt; StreamingDecoder &gt; CreateSyncStreamingDecoder(Isolate *isolate, WasmEnabledFeatures enabled, CompileTimeImports compile_imports, DirectHandle&lt; Context &gt; context, const char *api_method_name_for_errors, std::shared_ptr&lt; CompilationResultResolver &gt; resolver)</div><div class="ttdef"><b>Definition:</b> <a href="sync-streaming-decoder_8cc_source.html#l00103">sync-streaming-decoder.cc:103</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8cc_source.html#l01150">CreateAsyncCompileJob()</a>, <a class="el" href="module-compiler_8cc_source.html#l02665">v8::internal::wasm::AsyncCompileJob::CreateStreamingDecoder()</a>, <a class="el" href="sync-streaming-decoder_8cc_source.html#l00103">v8::internal::wasm::StreamingDecoder::CreateSyncStreamingDecoder()</a>, <a class="el" href="wasm-engine_8h_source.html#l00488">next_compilation_id_</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00790">AsyncCompile()</a>.</p>
<div id="dynsection-81" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-81-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-81-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-81-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b_cgraph.svg" width="100%" height="529"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-82" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-82-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-82-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-82-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b_icgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9df42171758a2a5af30388a2b7e97de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9df42171758a2a5af30388a2b7e97de8">&#9670;&nbsp;</a></span>StreamingCompilationFailed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::StreamingCompilationFailed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>prefix_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> &amp;&#160;</td>
          <td class="paramname"><em>compile_imports</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01686">1686</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                                                                   {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a1f7bcde52e841f9779bf3ba25527bdfa">StreamingCompilationFailed</a>(prefix_hash, compile_imports);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_a1f7bcde52e841f9779bf3ba25527bdfa"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#a1f7bcde52e841f9779bf3ba25527bdfa">v8::internal::wasm::NativeModuleCache::StreamingCompilationFailed</a></div><div class="ttdeci">void StreamingCompilationFailed(size_t prefix_hash, const CompileTimeImports &amp;compile_imports)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00351">wasm-engine.cc:351</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00351">v8::internal::wasm::NativeModuleCache::StreamingCompilationFailed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l03520">v8::internal::wasm::AsyncStreamingProcessor::OnAbort()</a>, and <a class="el" href="module-compiler_8cc_source.html#l03387">v8::internal::wasm::AsyncStreamingProcessor::OnFinishedStream()</a>.</p>
<div id="dynsection-83" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-83-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-83-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-83-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-84" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-84-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-84-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-84-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8_icgraph.svg" width="526" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3f2610a2d8fa2c20a8569e4cb665d194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f2610a2d8fa2c20a8569e4cb665d194">&#9670;&nbsp;</a></span>SyncCompile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt; v8::internal::wasm::WasmEngine::SyncCompile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *&#160;</td>
          <td class="paramname"><em>thrower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00669">669</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                                          {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordtype">int</span> compilation_id = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">next_compilation_id_</a>.fetch_add(1);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.SyncCompile&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>, compilation_id);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id =</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      isolate-&gt;GetOrRegisterRecorderContextId(isolate-&gt;native_context());</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  std::shared_ptr&lt;WasmModule&gt; module;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  WasmDetectedFeatures detected_features;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">// Normally modules are validated in {CompileToNativeModule} but in jitless</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// mode the only opportunity of validatiom is during decoding.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">bool</span> validate_module = <a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a24a40a897766a19d97d04ef9c02ea315">ModuleResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        enabled_features, bytes.as_vector(), validate_module, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        isolate-&gt;counters(), isolate-&gt;metrics_recorder(), context_id,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">DecodingMethod::kSync</a>, &amp;detected_features);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      thrower-&gt;CompileFailed(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.error());</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    module = std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>).value();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (WasmError error =</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(module.get(), bytes.as_vector(),</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                         compile_imports, &amp;detected_features)) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      thrower-&gt;CompileError(<span class="stringliteral">&quot;%s @+%u&quot;</span>, error.message().c_str(), error.offset());</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// If experimental PGO via files is enabled, load profile information now.</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  std::unique_ptr&lt;ProfileInformation&gt; pgo_info;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="v8config_8h.html#a67bd29db07c711b0fb11ff1c324ebb60">V8_UNLIKELY</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_pgo_from_file)) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    pgo_info = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#aca357743e710fa56c5fabec8b006584e">LoadProfileFromFile</a>(module.get(), bytes.as_vector());</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Transfer ownership of the WasmModule to the {Managed&lt;WasmModule&gt;} generated</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// in {CompileToNativeModule}.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46">CompileToNativeModule</a>(</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      isolate, enabled_features, detected_features, std::move(compile_imports),</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      thrower, std::move(module), std::move(bytes), compilation_id, context_id,</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      pgo_info.get());</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (!native_module) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// Ensure that code GC will check this isolate for live code.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> lock(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;native_modules.count(native_module.get()));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module.get()));</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module.get()]-&gt;isolates.count(isolate));</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  constexpr base::Vector&lt;const char&gt; kNoSourceUrl;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  DirectHandle&lt;Script&gt; <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a> =</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a88e0184f058142bc46a5b93f2f8061b3">GetOrCreateScript</a>(isolate, native_module, kNoSourceUrl);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  native_module-&gt;LogWasmCodes(isolate, *<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// Create the compiled module object and populate with compiled functions</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// and information needed at instantiation time. This object needs to be</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// serializable. Instantiation may occur off a deserialized version of this</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  DirectHandle&lt;WasmModuleObject&gt; module_object =</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <a class="code" href="classv8_1_1internal_1_1WasmModuleObject.html#a420d36fa31fab80f7dd6cf6bce2438c8">WasmModuleObject::New</a>(isolate, std::move(native_module), <a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// Finish the Wasm script now and make it public to the debugger.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  isolate-&gt;debug()-&gt;OnAfterCompile(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">return</span> module_object;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1metrics_1_1Recorder_1_1ContextId_html"><div class="ttname"><a href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a></div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00190">v8-metrics.h:190</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a24a40a897766a19d97d04ef9c02ea315"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a24a40a897766a19d97d04ef9c02ea315">v8::internal::wasm::ModuleResult</a></div><div class="ttdeci">Result&lt; std::shared_ptr&lt; WasmModule &gt; &gt; ModuleResult</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8h_source.html#l00039">module-decoder.h:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">v8::internal::wasm::kWasmOrigin</a></div><div class="ttdeci">@ kWasmOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00125">wasm-module.h:125</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">v8::internal::wasm::DecodingMethod::kSync</a></div><div class="ttdeci">@ kSync</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a83ed1297167cba9f8c8971bacab69dbf"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">v8::internal::wasm::DecodeWasmModule</a></div><div class="ttdeci">ModuleResult DecodeWasmModule(WasmEnabledFeatures enabled_features, base::Vector&lt; const uint8_t &gt; wire_bytes, bool validate_functions, ModuleOrigin origin, Counters *counters, std::shared_ptr&lt; metrics::Recorder &gt; metrics_recorder, v8::metrics::Recorder::ContextId context_id, DecodingMethod decoding_method, WasmDetectedFeatures *detected_features)</div><div class="ttdef"><b>Definition:</b> <a href="module-decoder_8cc_source.html#l00077">module-decoder.cc:77</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a967972baab540f22d49f12d2fae66b46"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46">v8::internal::wasm::CompileToNativeModule</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; CompileToNativeModule(Isolate *isolate, WasmEnabledFeatures enabled_features, WasmDetectedFeatures detected_features, CompileTimeImports compile_imports, ErrorThrower *thrower, std::shared_ptr&lt; const WasmModule &gt; module, base::OwnedVector&lt; const uint8_t &gt; wire_bytes, int compilation_id, v8::metrics::Recorder::ContextId context_id, ProfileInformation *pgo_info)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l02423">module-compiler.cc:2423</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a97644489c4ab86ae3156930153cd1b5e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">v8::internal::wasm::ValidateAndSetBuiltinImports</a></div><div class="ttdeci">WasmError ValidateAndSetBuiltinImports(const WasmModule *module, base::Vector&lt; const uint8_t &gt; wire_bytes, const CompileTimeImports &amp;imports, WasmDetectedFeatures *detected)</div><div class="ttdef"><b>Definition:</b> <a href="module-compiler_8cc_source.html#l01842">module-compiler.cc:1842</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca357743e710fa56c5fabec8b006584e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca357743e710fa56c5fabec8b006584e">v8::internal::wasm::LoadProfileFromFile</a></div><div class="ttdeci">std::unique_ptr&lt; ProfileInformation &gt; LoadProfileFromFile(const WasmModule *module, base::Vector&lt; const uint8_t &gt; wire_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="pgo_8cc_source.html#l00222">pgo.cc:222</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vector_8h_source.html#l00266">v8::base::OwnedVector&lt; T &gt;::as_vector()</a>, <a class="el" href="wasm-result_8h_source.html#l00138">v8::internal::wasm::ErrorThrower::CompileFailed()</a>, <a class="el" href="module-compiler_8cc_source.html#l02423">v8::internal::wasm::CompileToNativeModule()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="execution_2isolate_8h_source.html#l01500">v8::internal::Isolate::debug()</a>, <a class="el" href="module-decoder_8cc_source.html#l00077">v8::internal::wasm::DecodeWasmModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01896">GetOrCreateScript()</a>, <a class="el" href="isolate_8cc_source.html#l07553">v8::internal::Isolate::GetOrRegisterRecorderContextId()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">v8::internal::wasm::kSync</a>, <a class="el" href="wasm-module_8h_source.html#l00125">v8::internal::wasm::kWasmOrigin</a>, <a class="el" href="pgo_8cc_source.html#l00222">v8::internal::wasm::LoadProfileFromFile()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01202">v8::internal::Isolate::metrics_recorder()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00048">v8::internal::Isolate::native_context()</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, <a class="el" href="wasm-objects_8cc_source.html#l00113">v8::internal::WasmModuleObject::New()</a>, <a class="el" href="wasm-engine_8h_source.html#l00488">next_compilation_id_</a>, <a class="el" href="debug_8cc_source.html#l02761">v8::internal::Debug::OnAfterCompile()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="shared-function-info-inl_8h_source.html#l00117">v8::internal::script</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>, <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>, <a class="el" href="v8config_8h_source.html#l00660">V8_UNLIKELY</a>, and <a class="el" href="module-compiler_8cc_source.html#l01842">v8::internal::wasm::ValidateAndSetBuiltinImports()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00790">AsyncCompile()</a>, <a class="el" href="api_8cc_source.html#l08844">v8::WasmModuleObject::Compile()</a>, <a class="el" href="runtime-test-wasm_8cc_source.html#l00757">v8::internal::CreateWasmObject()</a>, <a class="el" href="sync-streaming-decoder_8cc_source.html#l00037">v8::internal::wasm::SyncStreamingDecoder::Finish()</a>, and <a class="el" href="wasm-js_8cc_source.html#l00956">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyModuleImpl()</a>.</p>
<div id="dynsection-85" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-85-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-85-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-85-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-86" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-86-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-86-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-86-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194_icgraph.svg" width="100%" height="593"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="acb16551c0447fba6c603b839a75ba21d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb16551c0447fba6c603b839a75ba21d">&#9670;&nbsp;</a></span>SyncCompileTranslatedAsmJs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MaybeHandle.html">MaybeHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1AsmWasmData.html">AsmWasmData</a> &gt; v8::internal::wasm::WasmEngine::SyncCompileTranslatedAsmJs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *&#160;</td>
          <td class="paramname"><em>thrower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1Script.html">Script</a> &gt;&#160;</td>
          <td class="paramname"><em>script</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>asm_js_offset_table_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1HeapNumber.html">HeapNumber</a> &gt;&#160;</td>
          <td class="paramname"><em>uses_bitset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858b">LanguageMode</a>&#160;</td>
          <td class="paramname"><em>language_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00603">603</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                                                      {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordtype">int</span> compilation_id = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ab5ecf5f37f1b52c347845f35cb19f3d9">next_compilation_id_</a>.fetch_add(1);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.SyncCompileTranslatedAsmJs&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;               compilation_id);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80">ModuleOrigin</a> origin = language_mode == <a class="code" href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858bafdfcb8a8ae5de069f4a41bedfe7892a4">LanguageMode::kSloppy</a></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            ? <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902">kAsmJsSloppyOrigin</a></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                            : <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a">kAsmJsStrictOrigin</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// TODO(leszeks): If we want asm.js in UKM, we should figure out a way to pass</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// the context id in here.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html">v8::metrics::Recorder::ContextId</a> context_id =</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html#a6504aab67861da09dc170cb1f5ec88b6">v8::metrics::Recorder::ContextId::Empty</a>();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  WasmDetectedFeatures detected_features;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a24a40a897766a19d97d04ef9c02ea315">ModuleResult</a> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html#a8d8095ed772f16383b10d3abf6b8903c">WasmEnabledFeatures::ForAsmjs</a>(), bytes.as_vector(), <span class="keyword">false</span>, origin,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      isolate-&gt;counters(), isolate-&gt;metrics_recorder(), context_id,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">DecodingMethod::kSync</a>, &amp;detected_features);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">// This happens once in a while when we have missed some limit check</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// in the asm parser. Output an error message to help diagnose, but crash.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    std::cout &lt;&lt; <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.error().message();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.value()-&gt;asm_js_offset_information =</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      std::make_unique&lt;AsmJsOffsetInformation&gt;(asm_js_offset_table_bytes);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Transfer ownership of the WasmModule to the {Managed&lt;WasmModule&gt;} generated</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// in {CompileToNativeModule}.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  constexpr ProfileInformation* kNoProfileInformation = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  std::shared_ptr&lt;NativeModule&gt; native_module = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a967972baab540f22d49f12d2fae66b46">CompileToNativeModule</a>(</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      isolate, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html#a8d8095ed772f16383b10d3abf6b8903c">WasmEnabledFeatures::ForAsmjs</a>(), detected_features,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      CompileTimeImports{}, thrower, std::move(<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>).value(),</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      std::move(bytes), compilation_id, context_id, kNoProfileInformation);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (!native_module) <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  native_module-&gt;LogWasmCodes(isolate, *<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// Register the script with the isolate. We do this unconditionally for</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// consistency; it is in particular required for logging lazy-compiled code.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keyword">auto</span>&amp; scripts = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;scripts;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// If the same asm.js module is instantiated repeatedly, then we</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="comment">// deduplicate the NativeModule, so the script exists already.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (scripts.count(native_module.get()) == 0) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      scripts.emplace(native_module.get(), WeakScriptHandle(<a class="code" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>, isolate));</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1AsmWasmData.html#acc0ab9f86a21e107f090ac2725be47ce">AsmWasmData::New</a>(isolate, std::move(native_module), uses_bitset);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1AsmWasmData_html_acc0ab9f86a21e107f090ac2725be47ce"><div class="ttname"><a href="classv8_1_1internal_1_1AsmWasmData.html#acc0ab9f86a21e107f090ac2725be47ce">v8::internal::AsmWasmData::New</a></div><div class="ttdeci">static Handle&lt; AsmWasmData &gt; New(Isolate *isolate, std::shared_ptr&lt; wasm::NativeModule &gt; native_module, DirectHandle&lt; HeapNumber &gt; uses_bitset)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-objects_8cc_source.html#l03313">wasm-objects.cc:3313</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures_html_a8d8095ed772f16383b10d3abf6b8903c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html#a8d8095ed772f16383b10d3abf6b8903c">v8::internal::wasm::WasmEnabledFeatures::ForAsmjs</a></div><div class="ttdeci">static constexpr WasmEnabledFeatures ForAsmjs()</div><div class="ttdef"><b>Definition:</b> <a href="wasm-features_8h_source.html#l00077">wasm-features.h:77</a></div></div>
<div class="ttc" id="aclassv8_1_1metrics_1_1Recorder_1_1ContextId_html_a6504aab67861da09dc170cb1f5ec88b6"><div class="ttname"><a href="classv8_1_1metrics_1_1Recorder_1_1ContextId.html#a6504aab67861da09dc170cb1f5ec88b6">v8::metrics::Recorder::ContextId::Empty</a></div><div class="ttdeci">static const ContextId Empty()</div><div class="ttdef"><b>Definition:</b> <a href="v8-metrics_8h_source.html#l00195">v8-metrics.h:195</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80">v8::internal::wasm::ModuleOrigin</a></div><div class="ttdeci">ModuleOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00124">wasm-module.h:124</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a">v8::internal::wasm::kAsmJsStrictOrigin</a></div><div class="ttdeci">@ kAsmJsStrictOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00128">wasm-module.h:127</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902">v8::internal::wasm::kAsmJsSloppyOrigin</a></div><div class="ttdeci">@ kAsmJsSloppyOrigin</div><div class="ttdef"><b>Definition:</b> <a href="wasm-module_8h_source.html#l00126">wasm-module.h:126</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff2483f817f329c2b4c7c1d7149f858bafdfcb8a8ae5de069f4a41bedfe7892a4"><div class="ttname"><a href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858bafdfcb8a8ae5de069f4a41bedfe7892a4">v8::internal::LanguageMode::kSloppy</a></div><div class="ttdeci">@ kSloppy</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vector_8h_source.html#l00266">v8::base::OwnedVector&lt; T &gt;::as_vector()</a>, <a class="el" href="module-compiler_8cc_source.html#l02423">v8::internal::wasm::CompileToNativeModule()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="module-decoder_8cc_source.html#l00077">v8::internal::wasm::DecodeWasmModule()</a>, <a class="el" href="v8-metrics_8h_source.html#l00195">v8::metrics::Recorder::ContextId::Empty()</a>, <a class="el" href="wasm-features_8h_source.html#l00077">v8::internal::wasm::WasmEnabledFeatures::ForAsmjs()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-module_8h_source.html#l00126">v8::internal::wasm::kAsmJsSloppyOrigin</a>, <a class="el" href="wasm-module_8h_source.html#l00127">v8::internal::wasm::kAsmJsStrictOrigin</a>, <a class="el" href="namespacev8_1_1internal.html#aff2483f817f329c2b4c7c1d7149f858bafdfcb8a8ae5de069f4a41bedfe7892a4">v8::internal::kSloppy</a>, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">v8::internal::wasm::kSync</a>, <a class="el" href="execution_2isolate_8h_source.html#l01202">v8::internal::Isolate::metrics_recorder()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-objects_8cc_source.html#l03313">v8::internal::AsmWasmData::New()</a>, <a class="el" href="wasm-engine_8h_source.html#l00488">next_compilation_id_</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="shared-function-info-inl_8h_source.html#l00117">v8::internal::script</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00037">TRACE_EVENT1</a>, and <a class="el" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE()</a>.</p>

<p class="reference">Referenced by <a class="el" href="asm-js_8cc_source.html#l00271">v8::internal::AsmJsCompilationJob::FinalizeJobImpl()</a>.</p>
<div id="dynsection-87" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-87-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-87-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-87-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-88" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-88-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-88-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-88-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d_icgraph.svg" width="556" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af0771f813d154e4af40da6689bbd5e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0771f813d154e4af40da6689bbd5e50">&#9670;&nbsp;</a></span>SyncInstantiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmInstanceObject.html">WasmInstanceObject</a> &gt; v8::internal::wasm::WasmEngine::SyncInstantiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1ErrorThrower.html">ErrorThrower</a> *&#160;</td>
          <td class="paramname"><em>thrower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1WasmModuleObject.html">WasmModuleObject</a> &gt;&#160;</td>
          <td class="paramname"><em>module_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSReceiver.html">JSReceiver</a> &gt;&#160;</td>
          <td class="paramname"><em>imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle</a>&lt; <a class="el" href="classv8_1_1internal_1_1JSArrayBuffer.html">JSArrayBuffer</a> &gt;&#160;</td>
          <td class="paramname"><em>memory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00743">743</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                             {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.SyncInstantiate&quot;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a77c18a9b2eea67b5275dae58c7a9efa1">InstantiateToInstanceObject</a>(isolate, thrower, module_object, imports,</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                     memory);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;}</div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a77c18a9b2eea67b5275dae58c7a9efa1"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a77c18a9b2eea67b5275dae58c7a9efa1">v8::internal::wasm::InstantiateToInstanceObject</a></div><div class="ttdeci">MaybeDirectHandle&lt; WasmInstanceObject &gt; InstantiateToInstanceObject(Isolate *isolate, ErrorThrower *thrower, DirectHandle&lt; WasmModuleObject &gt; module_object, MaybeDirectHandle&lt; JSReceiver &gt; imports, MaybeDirectHandle&lt; JSArrayBuffer &gt; memory_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="module-instantiate_8cc_source.html#l01403">module-instantiate.cc:1403</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="module-instantiate_8cc_source.html#l01403">v8::internal::wasm::InstantiateToInstanceObject()</a>, and <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00753">AsyncInstantiate()</a>, and <a class="el" href="runtime-test-wasm_8cc_source.html#l00757">v8::internal::CreateWasmObject()</a>.</p>
<div id="dynsection-89" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-89-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-89-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-89-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-90" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-90-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-90-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-90-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50_icgraph.svg" width="100%" height="471"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aad8e9ffbc98ee56a23ee1e76a115b34f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8e9ffbc98ee56a23ee1e76a115b34f">&#9670;&nbsp;</a></span>SyncValidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> v8::internal::wasm::WasmEngine::SyncValidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a>&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a>&#160;</td>
          <td class="paramname"><em>compile_imports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1base_1_1Vector.html">base::Vector</a>&lt; const uint8_t &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l00585">585</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                                               {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.SyncValidate&quot;</span>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (bytes.empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  WasmDetectedFeatures unused_detected_features;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a> = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a83ed1297167cba9f8c8971bacab69dbf">DecodeWasmModule</a>(</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      enabled, bytes, <span class="keyword">true</span>, <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>, isolate-&gt;counters(),</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      isolate-&gt;metrics_recorder(),</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      isolate-&gt;GetOrRegisterRecorderContextId(isolate-&gt;native_context()),</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">DecodingMethod::kSync</a>, &amp;unused_detected_features);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.failed()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  WasmError error = <a class="code" href="namespacev8_1_1internal_1_1wasm.html#a97644489c4ab86ae3156930153cd1b5e">ValidateAndSetBuiltinImports</a>(</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="namespacev8_1_1base_1_1internal.html#a9840f2bf0b4780133662292486d0bc01">result</a>.value().get(), bytes, compile_imports, &amp;unused_detected_features);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">return</span> !error.has_error();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="execution_2isolate_8h_source.html#l01195">v8::internal::Isolate::counters()</a>, <a class="el" href="module-decoder_8cc_source.html#l00077">v8::internal::wasm::DecodeWasmModule()</a>, <a class="el" href="vector_8h_source.html#l00073">v8::base::Vector&lt; T &gt;::empty()</a>, <a class="el" href="isolate_8cc_source.html#l07553">v8::internal::Isolate::GetOrRegisterRecorderContextId()</a>, <a class="el" href="wasm-result_8h_source.html#l00046">v8::internal::wasm::WasmError::has_error()</a>, <a class="el" href="namespacev8_1_1internal_1_1wasm.html#a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c">v8::internal::wasm::kSync</a>, <a class="el" href="wasm-module_8h_source.html#l00125">v8::internal::wasm::kWasmOrigin</a>, <a class="el" href="execution_2isolate_8h_source.html#l01202">v8::internal::Isolate::metrics_recorder()</a>, <a class="el" href="execution_2isolate-inl_8h_source.html#l00048">v8::internal::Isolate::native_context()</a>, <a class="el" href="clamped__math__impl_8h_source.html#l00082">v8::base::internal::result</a>, <a class="el" href="trace-event-no-perfetto_8h_source.html#l00032">TRACE_EVENT0</a>, and <a class="el" href="module-compiler_8cc_source.html#l01842">v8::internal::wasm::ValidateAndSetBuiltinImports()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-js_8cc_source.html#l00886">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyValidateImpl()</a>.</p>
<div id="dynsection-91" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-91-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-91-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-91-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-92" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-92-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-92-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-92-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f_icgraph.svg" width="563" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aae7d7fff282f6e414ed462f4d7b0c8a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7d7fff282f6e414ed462f4d7b0c8a0">&#9670;&nbsp;</a></span>TriggerCodeGC_Locked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::TriggerCodeGC_Locked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&#160;</td>
          <td class="paramname"><em>dead_code_limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01839">1839</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                                                            {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordtype">bool</span> inc_gc_count =</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      num_code_gcs_triggered_ &lt; std::numeric_limits&lt;int8_t&gt;::max();</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordflow">if</span> (inc_gc_count) ++<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">num_code_gcs_triggered_</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <span class="stringliteral">&quot;Triggering GC (potentially dead: %zu bytes; limit: %zu bytes).\n&quot;</span>,</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a>, dead_code_limit);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aef409600fd7f21493340e1b9372247ea">TriggerGC</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">num_code_gcs_triggered_</a>);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;next_gc_sequence_index == 0) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span> (inc_gc_count) ++<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">num_code_gcs_triggered_</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="stringliteral">&quot;Scheduling another GC after the current one (potentially dead: &quot;</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="stringliteral">&quot;%zu bytes; limit: %zu bytes).\n&quot;</span>,</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a>, dead_code_limit);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;next_gc_sequence_index = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">num_code_gcs_triggered_</a>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;next_gc_sequence_index);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a5cd5883d148b99bfe98e8d55417c54a4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a5cd5883d148b99bfe98e8d55417c54a4">v8::internal::wasm::WasmEngine::num_code_gcs_triggered_</a></div><div class="ttdeci">int8_t num_code_gcs_triggered_</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8h_source.html#l00534">wasm-engine.h:534</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00485">DCHECK_NE</a>, <a class="el" href="wasm-engine_8h_source.html#l00529">new_potentially_dead_code_size_</a>, <a class="el" href="wasm-engine_8h_source.html#l00534">num_code_gcs_triggered_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01820">AddPotentiallyDeadCode()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01859">TriggerCodeGCForTesting()</a>.</p>
<div id="dynsection-93" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-93-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-93-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-93-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0_cgraph.svg" width="100%" height="471"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-94" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-94-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-94-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-94-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0_icgraph.svg" width="100%" height="410"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a33a5d3973fe4bb4cdbe9d00c815d2d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a5d3973fe4bb4cdbe9d00c815d2d94">&#9670;&nbsp;</a></span>TriggerCodeGCForTesting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::TriggerCodeGCForTesting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01859">1859</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                                         {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_code_gc) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;Wasm Code GC explicitly requested for testing:\n&quot;</span>);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a> == 0) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>.empty());</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="comment">// Let&#39;s not waste a GC sequence index when there is no code to free.</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(<span class="stringliteral">&quot;But there is nothing to do.\n&quot;</span>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aae7d7fff282f6e414ed462f4d7b0c8a0">TriggerCodeGC_Locked</a>(0);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00529">new_potentially_dead_code_size_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="runtime-test-wasm_8cc_source.html#l00991">v8::internal::RUNTIME_FUNCTION()</a>.</p>
<div id="dynsection-95" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-95-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-95-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-95-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94_cgraph.svg" width="100%" height="481"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-96" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-96-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-96-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-96-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94_icgraph.svg" width="463" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aef409600fd7f21493340e1b9372247ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef409600fd7f21493340e1b9372247ea">&#9670;&nbsp;</a></span>TriggerGC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> v8::internal::wasm::WasmEngine::TriggerGC </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>gc_sequence_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01930">1930</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                                                   {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>.<a class="code" href="classv8_1_1base_1_1Mutex.html#a281097589e7088f5af211349cac0ef9d">AssertHeld</a>();</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <a class="code" href="src_2base_2logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_code_gc);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a4c61216c29ea0d396e4abdaa72f76646">new_potentially_dead_code_size_</a> = 0;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>.reset(<span class="keyword">new</span> CurrentGCInfo(gc_sequence_index));</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="comment">// Add all potentially dead code to this GC, and trigger a GC task in each</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">// known isolate. We can&#39;t limit the isolates to those that contributed</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// potentially-dead WasmCode objects, because wrappers don&#39;t point back</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// at a NativeModule or Isolate.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">for</span> (WasmCode* <a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a> : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a221bbbae4525dca3ae997a18988fdbc8">potentially_dead_code_</a>) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.insert(<a class="code" href="flag-definitions_8h.html#ae0e79c88adf5166f9befeb542c2acd8f">code</a>);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  }</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; entry : <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    Isolate* isolate = entry.first;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keyword">auto</span>&amp; gc_task = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates[isolate];</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> (!gc_task) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <span class="keyword">auto</span> new_task = std::make_unique&lt;WasmGCForegroundTask&gt;(isolate);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      gc_task = new_task.get();</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate]-&gt;foreground_task_runner-&gt;PostTask(std::move(new_task));</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    isolate-&gt;stack_guard()-&gt;RequestWasmCodeGC();</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <a class="code" href="wasm-engine_8cc.html#aa11964a2fa0e69c324c74f7361b77a37">TRACE_CODE_GC</a>(</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      <span class="stringliteral">&quot;Starting GC (nr %d). Number of potentially dead code objects: %zu\n&quot;</span>,</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;gc_sequence_index, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;dead_code.size());</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// Ensure that there are outstanding isolates that will eventually finish this</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">// GC. If there are no outstanding isolates, we finish the GC immediately.</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a560f639666a3676d954d73ef3324b99e">PotentiallyFinishCurrentGC</a>();</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <a class="code" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">DCHECK</a>(<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a> == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         !<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a0c6a7d8752e24482268ece80b48ad6aa">current_gc_info_</a>-&gt;outstanding_isolates.empty());</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mutex_8h_source.html#l00058">v8::base::Mutex::AssertHeld()</a>, <a class="el" href="flag-definitions_8h_source.html#l00546">code</a>, <a class="el" href="wasm-engine_8h_source.html#l00538">current_gc_info_</a>, <a class="el" href="namespacev8_1_1internal.html#aa6b3743bd5d773c552654f2a6c3efa4a">v8::internal::DCHECK()</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="src_2base_2logging_8h_source.html#l00490">DCHECK_NULL</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00529">new_potentially_dead_code_size_</a>, <a class="el" href="wasm-engine_8h_source.html#l00533">potentially_dead_code_</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, <a class="el" href="execution_2isolate_8h_source.html#l01213">v8::internal::Isolate::stack_guard()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00052">TRACE_CODE_GC</a>, and <a class="el" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>.</p>
<div id="dynsection-97" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-97-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-97-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-97-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea_cgraph.svg" width="100%" height="532"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-98" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-98-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-98-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-98-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea_icgraph.svg" width="100%" height="520"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a82694f241e35d38f8f882c255e49e743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82694f241e35d38f8f882c255e49e743">&#9670;&nbsp;</a></span>type_canonicalizer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">TypeCanonicalizer</a>* v8::internal::wasm::WasmEngine::type_canonicalizer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00392">392</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{ <span class="keywordflow">return</span> &amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afd72ebd08e53260ccaf49d8c2ab00353">type_canonicalizer_</a>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="wasm-objects_8cc_source.html#l03282">v8::internal::WasmJSFunctionData::GetSignature()</a>, <a class="el" href="canonical-types_8cc_source.html#l00020">v8::internal::wasm::GetTypeCanonicalizer()</a>, <a class="el" href="wasm-objects_8cc_source.html#l03408">v8::internal::wasm::JSToWasmObject()</a>, <a class="el" href="wasm-objects_8cc_source.html#l00638">v8::internal::WasmTableObject::UpdateDispatchTable()</a>, and <a class="el" href="wasm-js_8cc_source.html#l01973">v8::anonymous_namespace{wasm-js.cc}::WebAssemblyTagImpl()</a>.</p>
<div id="dynsection-99" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-99-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-99-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-99-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_a82694f241e35d38f8f882c255e49e743_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae049eb40219a3e542bf2811e42ac1bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae049eb40219a3e542bf2811e42ac1bb8">&#9670;&nbsp;</a></span>UpdateNativeModuleCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt; v8::internal::wasm::WasmEngine::UpdateNativeModuleCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a>&#160;</td>
          <td class="paramname"><em>has_error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a> &gt;&#160;</td>
          <td class="paramname"><em>native_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a> *&#160;</td>
          <td class="paramname"><em>isolate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8cc_source.html#l01639">1639</a> of file <a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                      {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">// Keep the previous pointer, but as a `void*`, because we only want to use it</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="comment">// later to compare pointers, and never need to dereference it.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordtype">void</span>* prev = native_module.get();</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  native_module =</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#ad1e69cc46cc9e267fa715a15b711b7e0">native_module_cache_</a>.<a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#ae0ec3986cfa081f17475ecfea81b6899">Update</a>(std::move(native_module), has_error);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">if</span> (prev == native_module.get()) <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordtype">bool</span> remove_all_code = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <a class="code" href="namespacev8_1_1base.html#a40b71b3558e4b5297d51003612578a81">base::MutexGuard</a> guard(&amp;<a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a6a372578a0d4f4dec77a0530fda00e4d">mutex_</a>);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>.count(native_module.get()));</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a95f6343fe67074ef8fde62053ebc66c6">native_modules_</a>[native_module.get()]-&gt;isolates.insert(isolate);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <a class="code" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>.count(isolate));</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keyword">auto</span>* isolate_data = <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a72ad51773362d235f993a28091ee23e1">isolates_</a>[isolate].get();</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    isolate_data-&gt;native_modules.insert(native_module.get());</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (isolate_data-&gt;keep_in_debug_state &amp;&amp; !native_module-&gt;IsInDebugState()) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      remove_all_code = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      native_module-&gt;SetDebugState(<a class="code" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    }</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span> (isolate_data-&gt;log_codes &amp;&amp; !native_module-&gt;log_code()) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <a class="code" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a75b254189555e5f2910b7759e78cb241">EnableCodeLogging</a>(native_module.get());</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordflow">if</span> (remove_all_code) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    WasmCodeRefScope ref_scope;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    native_module-&gt;RemoveCompiledCode(</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">NativeModule::RemoveFilter::kRemoveNonDebugCode</a>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">return</span> native_module;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModuleCache_html_ae0ec3986cfa081f17475ecfea81b6899"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html#ae0ec3986cfa081f17475ecfea81b6899">v8::internal::wasm::NativeModuleCache::Update</a></div><div class="ttdeci">std::shared_ptr&lt; NativeModule &gt; Update(std::shared_ptr&lt; NativeModule &gt; native_module, bool error)</div><div class="ttdef"><b>Definition:</b> <a href="wasm-engine_8cc_source.html#l00360">wasm-engine.cc:360</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2base_2logging_8h_source.html#l00484">DCHECK_EQ</a>, <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8h_source.html#l00513">isolates_</a>, <a class="el" href="wasm-tier_8h_source.html#l00053">v8::internal::wasm::kDebugging</a>, <a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::kRemoveNonDebugCode</a>, <a class="el" href="wasm-engine_8h_source.html#l00499">mutex_</a>, <a class="el" href="wasm-engine_8h_source.html#l00540">native_module_cache_</a>, <a class="el" href="wasm-engine_8h_source.html#l00517">native_modules_</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00360">v8::internal::wasm::NativeModuleCache::Update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="module-compiler_8cc_source.html#l02865">v8::internal::wasm::AsyncCompileJob::CompilationStateCallback::call()</a>, <a class="el" href="wasm-serialization_8cc_source.html#l01091">v8::internal::wasm::DeserializeNativeModule()</a>, <a class="el" href="module-compiler_8cc_source.html#l02378">v8::internal::wasm::anonymous_namespace{module-compiler.cc}::GetOrCompileNewNativeModule()</a>, and <a class="el" href="module-compiler_8cc_source.html#l03387">v8::internal::wasm::AsyncStreamingProcessor::OnFinishedStream()</a>.</p>
<div id="dynsection-100" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-100-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-100-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-100-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-101" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-101-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-101-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-101-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8_icgraph.svg" width="100%" height="542"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5da025226f11c1a8371a2e1c24ca7663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5da025226f11c1a8371a2e1c24ca7663">&#9670;&nbsp;</a></span>allocator_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1AccountingAllocator.html">AccountingAllocator</a> v8::internal::wasm::WasmEngine::allocator_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00481">481</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

</div>
</div>
<a id="aa7983ea4754315852b25c620f17514c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7983ea4754315852b25c620f17514c3">&#9670;&nbsp;</a></span>async_compile_jobs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>*, std::unique_ptr&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1AsyncCompileJob.html">AsyncCompileJob</a>&gt; &gt; v8::internal::wasm::WasmEngine::async_compile_jobs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00507">507</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01150">CreateAsyncCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01185">DeleteCompileJobsOnContext()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01203">DeleteCompileJobsOnIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01176">HasRunningCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01166">RemoveCompileJob()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="ab160110a4540fe336bc9834d389c6bc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab160110a4540fe336bc9834d389c6bc6">&#9670;&nbsp;</a></span>call_descriptors_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors.html">compiler::WasmCallDescriptors</a> v8::internal::wasm::WasmEngine::call_descriptors_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00495">495</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

</div>
</div>
<a id="a72dc8534fb90f00e826c647469d1b3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72dc8534fb90f00e826c647469d1b3aa">&#9670;&nbsp;</a></span>code_tracer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classv8_1_1internal_1_1CodeTracer.html">CodeTracer</a>&gt; v8::internal::wasm::WasmEngine::code_tracer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00510">510</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01144">GetCodeTracer()</a>.</p>

</div>
</div>
<a id="abd8499b0e2af398339967dd5a3297f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd8499b0e2af398339967dd5a3297f51">&#9670;&nbsp;</a></span>compilation_stats_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classv8_1_1internal_1_1CompilationStatistics.html">CompilationStatistics</a>&gt; v8::internal::wasm::WasmEngine::compilation_stats_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00509">509</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01125">DumpAndResetTurboStatistics()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01135">DumpTurboStatistics()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01117">GetOrCreateTurboStatistics()</a>.</p>

</div>
</div>
<a id="a0c6a7d8752e24482268ece80b48ad6aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c6a7d8752e24482268ece80b48ad6aa">&#9670;&nbsp;</a></span>current_gc_info_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo.html">CurrentGCInfo</a>&gt; v8::internal::wasm::WasmEngine::current_gc_info_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00538">538</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01964">RemoveIsolateFromCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01745">ReportLiveCodeForGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>.</p>

</div>
</div>
<a id="a4dcca0bc03dc84027c94cdba6950a8bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcca0bc03dc84027c94cdba6950a8bb">&#9670;&nbsp;</a></span>deopts_executed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="classint.html">int</a>&gt; v8::internal::wasm::WasmEngine::deopts_executed_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00491">491</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l02069">GetDeoptsExecutedCount()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l02073">IncrementDeoptsExecutedCount()</a>.</p>

</div>
</div>
<a id="a70430985b66280d5790dcc810f5994ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70430985b66280d5790dcc810f5994ce">&#9670;&nbsp;</a></span>had_nondeterminism_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt; int32_t &gt; v8::internal::wasm::WasmEngine::had_nondeterminism_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00479">479</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

</div>
</div>
<a id="a72ad51773362d235f993a28091ee23e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72ad51773362d235f993a28091ee23e1">&#9670;&nbsp;</a></span>isolates_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>*, std::unique_ptr&lt;<a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo.html">IsolateInfo</a>&gt; &gt; v8::internal::wasm::WasmEngine::isolates_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00513">513</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01238">AddIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00521">ClearWeakScriptHandle()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01203">DeleteCompileJobsOnIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00883">EnterDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01896">GetOrCreateScript()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01176">HasRunningCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01063">ImportNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00909">LeaveDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01367">LogCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01516">LogOutstandingCodesForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01425">LogWrapperCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01604">MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01543">NewNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00603">SyncCompileTranslatedAsmJs()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01639">UpdateNativeModuleCache()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="a6a372578a0d4f4dec77a0530fda00e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a372578a0d4f4dec77a0530fda00e4d">&#9670;&nbsp;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1base_1_1Mutex.html">base::Mutex</a> v8::internal::wasm::WasmEngine::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00499">499</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01238">AddIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01820">AddPotentiallyDeadCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00521">ClearWeakScriptHandle()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01150">CreateAsyncCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02012">DecodeAllNameSections()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01185">DeleteCompileJobsOnContext()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01203">DeleteCompileJobsOnIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01501">DisableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01125">DumpAndResetTurboStatistics()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01135">DumpTurboStatistics()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01472">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00883">EnterDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01090">FlushLiftoffCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01872">FreeDeadCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01878">FreeDeadCodeLocked()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01144">GetCodeTracer()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01107">GetLiftoffCodeSizeForTesting()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01896">GetOrCreateScript()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01117">GetOrCreateTurboStatistics()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01176">HasRunningCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01063">ImportNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00909">LeaveDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01367">LogCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01516">LogOutstandingCodesForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01425">LogWrapperCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01604">MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00149">NativeModuleCount()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01543">NewNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01166">RemoveCompileJob()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01964">RemoveIsolateFromCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01745">ReportLiveCodeForGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00603">SyncCompileTranslatedAsmJs()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01859">TriggerCodeGCForTesting()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01639">UpdateNativeModuleCache()</a>.</p>

</div>
</div>
<a id="ad1e69cc46cc9e267fa715a15b711b7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e69cc46cc9e267fa715a15b711b7e0">&#9670;&nbsp;</a></span>native_module_cache_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModuleCache.html">NativeModuleCache</a> v8::internal::wasm::WasmEngine::native_module_cache_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00540">540</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01672">GetStreamingCompilationOwnership()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01604">MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01686">StreamingCompilationFailed()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01639">UpdateNativeModuleCache()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="a95f6343fe67074ef8fde62053ebc66c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f6343fe67074ef8fde62053ebc66c6">&#9670;&nbsp;</a></span>native_modules_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>*, std::unique_ptr&lt;<a class="el" href="structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo.html">NativeModuleInfo</a>&gt; &gt; v8::internal::wasm::WasmEngine::native_modules_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00517">517</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l02012">DecodeAllNameSections()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01203">DeleteCompileJobsOnIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01501">DisableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01486">EnableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00883">EnterDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01090">FlushLiftoffCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01107">GetLiftoffCodeSizeForTesting()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01063">ImportNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00909">LeaveDebuggingForIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01367">LogCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01604">MaybeGetNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00149">NativeModuleCount()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01543">NewNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01291">RemoveIsolate()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01639">UpdateNativeModuleCache()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="a4c61216c29ea0d396e4abdaa72f76646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c61216c29ea0d396e4abdaa72f76646">&#9670;&nbsp;</a></span>new_potentially_dead_code_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a> v8::internal::wasm::WasmEngine::new_potentially_dead_code_size_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00529">529</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01820">AddPotentiallyDeadCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01859">TriggerCodeGCForTesting()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>.</p>

</div>
</div>
<a id="ab5ecf5f37f1b52c347845f35cb19f3d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5ecf5f37f1b52c347845f35cb19f3d9">&#9670;&nbsp;</a></span>next_compilation_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="classint.html">int</a>&gt; v8::internal::wasm::WasmEngine::next_compilation_id_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00488">488</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l00790">AsyncCompile()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00852">StartStreamingCompilation()</a>, <a class="el" href="wasm-engine_8cc_source.html#l00669">SyncCompile()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00603">SyncCompileTranslatedAsmJs()</a>.</p>

</div>
</div>
<a id="a5cd5883d148b99bfe98e8d55417c54a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd5883d148b99bfe98e8d55417c54a4">&#9670;&nbsp;</a></span>num_code_gcs_triggered_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int8_t v8::internal::wasm::WasmEngine::num_code_gcs_triggered_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00534">534</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01839">TriggerCodeGC_Locked()</a>.</p>

</div>
</div>
<a id="a001b9bb450d4ae22f7902cf10a9cb8ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a001b9bb450d4ae22f7902cf10a9cb8ed">&#9670;&nbsp;</a></span>num_modules_with_code_logging_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="namespacev8_1_1internal.html#a4725962ca3c127eb5871cb47293aee95">size_t</a>&gt; v8::internal::wasm::WasmEngine::num_modules_with_code_logging_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00525">525</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01501">DisableCodeLogging()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01486">EnableCodeLogging()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l01425">LogWrapperCode()</a>.</p>

</div>
</div>
<a id="a8e59070055e532fd16960fe100270492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e59070055e532fd16960fe100270492">&#9670;&nbsp;</a></span>operations_barrier_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classv8_1_1internal_1_1OperationsBarrier.html">OperationsBarrier</a>&gt; v8::internal::wasm::WasmEngine::operations_barrier_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">      std::make_shared&lt;OperationsBarrier&gt;()}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00519">519</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01926">GetBarrierForBackgroundCompile()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="a221bbbae4525dca3ae997a18988fdbc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221bbbae4525dca3ae997a18988fdbc8">&#9670;&nbsp;</a></span>potentially_dead_code_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>*&gt; v8::internal::wasm::WasmEngine::potentially_dead_code_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00533">533</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l01820">AddPotentiallyDeadCode()</a>, <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01691">FreeNativeModule()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01970">PotentiallyFinishCurrentGC()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01859">TriggerCodeGCForTesting()</a>, <a class="el" href="wasm-engine_8cc_source.html#l01930">TriggerGC()</a>, and <a class="el" href="wasm-engine_8cc_source.html#l00545">~WasmEngine()</a>.</p>

</div>
</div>
<a id="afd72ebd08e53260ccaf49d8c2ab00353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd72ebd08e53260ccaf49d8c2ab00353">&#9670;&nbsp;</a></span>type_canonicalizer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">TypeCanonicalizer</a> v8::internal::wasm::WasmEngine::type_canonicalizer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="wasm-engine_8h_source.html#l00493">493</a> of file <a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="wasm-engine_8cc_source.html#l02019">EstimateCurrentMemoryConsumption()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/V8SourceCode/src/wasm/<a class="el" href="wasm-engine_8h_source.html">wasm-engine.h</a></li>
<li>/mnt/V8SourceCode/src/wasm/<a class="el" href="wasm-engine_8cc_source.html">wasm-engine.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacev8.html">v8</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="namespacev8_1_1internal_1_1wasm.html">wasm</a></li><li class="navelem"><a class="el" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html">WasmEngine</a></li>
    <li class="footer">Generated on Thu Jun 12 2025 16:15:28 for V8 Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
