\hypertarget{classv8_1_1internal_1_1WasmMemoryObject}{}\doxysection{v8\+::internal\+::Wasm\+Memory\+Object Class Reference}
\label{classv8_1_1internal_1_1WasmMemoryObject}\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}


{\ttfamily \#include $<$wasm-\/objects.\+h$>$}



Inheritance diagram for v8\+::internal\+::Wasm\+Memory\+Object\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{classv8_1_1internal_1_1WasmMemoryObject__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Wasm\+Memory\+Object\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a7ce26bf7f45ae37057ae2017749b25bf}{has\+\_\+maximum\+\_\+pages}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_adae6cd24ea681c8cf41ae346c5e68b1c}{is\+\_\+memory64}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a97b4ba7ad14c6f986087c0cd437f108a}{Set\+New\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ new\+\_\+buffer)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a}{Update\+Instances}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225}{Fix\+Up\+Resizable\+Array\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ new\+\_\+buffer)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} void \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a83af2a10e27026f8c76e91833243e5f5}{Use\+In\+Instance}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ memory, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ trusted\+\_\+instance\+\_\+data, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ shared\+\_\+trusted\+\_\+instance\+\_\+data, \mbox{\hyperlink{classint}{int}} memory\+\_\+index\+\_\+in\+\_\+instance)
\item 
static \mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898}{New}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ buffer, \mbox{\hyperlink{classint}{int}} maximum, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952}{wasm\+::\+Address\+Type}} address\+\_\+type)
\item 
static \mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a6308dc98ea5bcf03a11a988ed2d29c53}{New}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classint}{int}} initial, \mbox{\hyperlink{classint}{int}} maximum, \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}} shared, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952}{wasm\+::\+Address\+Type}} address\+\_\+type)
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}{Refresh\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ memory, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ new\+\_\+backing\+\_\+store)
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511}{Refresh\+Shared\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ memory, \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}} resizable\+\_\+by\+\_\+js)
\item 
static \mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} int32\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ab04a12b70d33ad72a3442d2a21bbfff7}{Grow}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$, uint32\+\_\+t pages)
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a11123e674ed260e849a726396a6b1f3c}{To\+Fixed\+Length\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ memory)
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a32101d7a077535dadf31d9373ec3a6f2}{To\+Resizable\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ memory)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a65b8addcf2135f693f3f83a8acf74aa7}{k\+No\+Maximum}} = -\/1
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 348 of file wasm-\/objects.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225}\label{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!FixUpResizableArrayBuffer@{FixUpResizableArrayBuffer}}
\index{FixUpResizableArrayBuffer@{FixUpResizableArrayBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{FixUpResizableArrayBuffer()}{FixUpResizableArrayBuffer()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Fix\+Up\+Resizable\+Array\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{new\+\_\+buffer }\end{DoxyParamCaption})}



Definition at line 1048 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1049                                       \{}
\DoxyCodeLine{1050   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a7ce26bf7f45ae37057ae2017749b25bf}{has\_maximum\_pages}}());}
\DoxyCodeLine{1051   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(new\_buffer-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{1052   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1053   \textcolor{keywordflow}{if} (new\_buffer-\/>is\_shared()) new\_buffer-\/>set\_byte\_length(0);}
\DoxyCodeLine{1054   \textcolor{comment}{// Unlike JS-\/created resizable buffers, Wasm memories' backing store maximum}}
\DoxyCodeLine{1055   \textcolor{comment}{// may differ from the exposed maximum.}}
\DoxyCodeLine{1056   \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} max\_byte\_length;}
\DoxyCodeLine{1057   \textcolor{keywordflow}{if} constexpr (\mbox{\hyperlink{namespacev8_1_1internal_a72cbfdfeabb9a401f279f7b80bcff67a}{kSystemPointerSize}} == 4) \{}
\DoxyCodeLine{1058     \textcolor{comment}{// The spec says the maximum number of pages for 32-\/bit memories is 65536,}}
\DoxyCodeLine{1059     \textcolor{comment}{// which means the maximum byte size is 65536 * 65536 (= 2\string^32), which is}}
\DoxyCodeLine{1060     \textcolor{comment}{// UINT32\_MAX+1. BackingStores, ArrayBuffers, and TypedArrays represent byte}}
\DoxyCodeLine{1061     \textcolor{comment}{// lengths as uintptr\_t, and UINT32\_MAX+1 is not representable on 32bit.}}
\DoxyCodeLine{1062     \textcolor{comment}{//}}
\DoxyCodeLine{1063     \textcolor{comment}{// As a willful violation and gross hack, if we're exposing a Wasm memory}}
\DoxyCodeLine{1064     \textcolor{comment}{// with an unrepresentable maximum, subtract one page size.}}
\DoxyCodeLine{1065     uint64\_t max\_byte\_length64 =}
\DoxyCodeLine{1066         \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(maximum\_pages()) * \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{1067     \textcolor{keywordflow}{if} (max\_byte\_length64 > std::numeric\_limits<uintptr\_t>::max()) \{}
\DoxyCodeLine{1068       max\_byte\_length64 =}
\DoxyCodeLine{1069           std::numeric\_limits<uintptr\_t>::max() -\/ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{1070       \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(new\_buffer-\/>GetBackingStore()-\/>max\_byte\_length() <=}
\DoxyCodeLine{1071             max\_byte\_length64);}
\DoxyCodeLine{1072     \}}
\DoxyCodeLine{1073     max\_byte\_length = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(max\_byte\_length64);}
\DoxyCodeLine{1074   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1075     max\_byte\_length = maximum\_pages() * \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{1076   \}}
\DoxyCodeLine{1077   new\_buffer-\/>set\_max\_byte\_length(max\_byte\_length);}
\DoxyCodeLine{1078 \}}

\end{DoxyCode}


References CHECK, v8\+::internal\+::\+DCHECK(), has\+\_\+maximum\+\_\+pages(), v8\+::internal\+::k\+System\+Pointer\+Size, v8\+::internal\+::wasm\+::k\+Wasm\+Page\+Size, and v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc.



Referenced by Set\+New\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_ab04a12b70d33ad72a3442d2a21bbfff7}\label{classv8_1_1internal_1_1WasmMemoryObject_ab04a12b70d33ad72a3442d2a21bbfff7}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!Grow@{Grow}}
\index{Grow@{Grow}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{Grow()}{Grow()}}
{\footnotesize\ttfamily int32\+\_\+t v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Grow (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory\+\_\+object,  }\item[{uint32\+\_\+t}]{pages }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1146 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1148                                                \{}
\DoxyCodeLine{1149   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.GrowMemory"{}});}
\DoxyCodeLine{1150   DirectHandle<JSArrayBuffer> old\_buffer(memory\_object-\/>array\_buffer(),}
\DoxyCodeLine{1151                                          isolate);}
\DoxyCodeLine{1152 }
\DoxyCodeLine{1153   std::shared\_ptr<BackingStore> backing\_store = old\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{1154   \textcolor{comment}{// Wasm memory can grow, and Wasm memory always has a backing store.}}
\DoxyCodeLine{1155   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(backing\_store);}
\DoxyCodeLine{1156 }
\DoxyCodeLine{1157   \textcolor{comment}{// Check for maximum memory size.}}
\DoxyCodeLine{1158   \textcolor{comment}{// Note: The \{wasm::max\_mem\_pages()\} limit is already checked in}}
\DoxyCodeLine{1159   \textcolor{comment}{// \{BackingStore::CopyWasmMemory\}, and is irrelevant for}}
\DoxyCodeLine{1160   \textcolor{comment}{// \{GrowWasmMemoryInPlace\} because memory is never allocated with more}}
\DoxyCodeLine{1161   \textcolor{comment}{// capacity than that limit.}}
\DoxyCodeLine{1162   \textcolor{keywordtype}{size\_t} old\_size = old\_buffer-\/>GetByteLength();}
\DoxyCodeLine{1163   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, old\_size \% \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}});}
\DoxyCodeLine{1164   \textcolor{keywordtype}{size\_t} old\_pages = old\_size / \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{1165   \textcolor{keywordtype}{size\_t} max\_pages = memory\_object-\/>is\_memory64() ? \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a4326f4455d83a545760a1048f2d6b122}{wasm::max\_mem64\_pages}}()}
\DoxyCodeLine{1166                                                   : \mbox{\hyperlink{namespacewasm}{wasm}}::\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a2c6edd5180c4a1c2a0454eaac389dc1f}{max\_mem32\_pages}}();}
\DoxyCodeLine{1167   \textcolor{keywordflow}{if} (memory\_object-\/>has\_maximum\_pages()) \{}
\DoxyCodeLine{1168     max\_pages = std::min(max\_pages,}
\DoxyCodeLine{1169                          \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(memory\_object-\/>maximum\_pages()));}
\DoxyCodeLine{1170   \}}
\DoxyCodeLine{1171   \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(max\_pages, old\_pages);}
\DoxyCodeLine{1172   \textcolor{keywordflow}{if} (pages > max\_pages -\/ old\_pages) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1173 }
\DoxyCodeLine{1174   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} must\_grow\_in\_place =}
\DoxyCodeLine{1175       old\_buffer-\/>is\_shared() || backing\_store-\/>has\_guard\_regions() ||}
\DoxyCodeLine{1176       backing\_store-\/>is\_resizable\_by\_js() || pages == 0;}
\DoxyCodeLine{1177   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} try\_grow\_in\_place =}
\DoxyCodeLine{1178       must\_grow\_in\_place || !\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_wasm\_memory\_moving;}
\DoxyCodeLine{1179 }
\DoxyCodeLine{1180   std::optional<size\_t> result\_inplace =}
\DoxyCodeLine{1181       try\_grow\_in\_place}
\DoxyCodeLine{1182           ? backing\_store-\/>GrowWasmMemoryInPlace(isolate, pages, max\_pages)}
\DoxyCodeLine{1183           : std::nullopt;}
\DoxyCodeLine{1184   \textcolor{keywordflow}{if} (must\_grow\_in\_place \&\& !result\_inplace.has\_value()) \{}
\DoxyCodeLine{1185     \textcolor{comment}{// There are different limits per platform, thus crash if the correctness}}
\DoxyCodeLine{1186     \textcolor{comment}{// fuzzer is running.}}
\DoxyCodeLine{1187     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.correctness\_fuzzer\_suppressions) \{}
\DoxyCodeLine{1188       \mbox{\hyperlink{src_2base_2logging_8h_a0d093cb749cfc7ab5993726392df681f}{FATAL}}(\textcolor{stringliteral}{"{}could not grow wasm memory"{}});}
\DoxyCodeLine{1189     \}}
\DoxyCodeLine{1190     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1191   \}}
\DoxyCodeLine{1192 }
\DoxyCodeLine{1193   \textcolor{comment}{// Handle shared memory first.}}
\DoxyCodeLine{1194   \textcolor{keywordflow}{if} (old\_buffer-\/>is\_shared()) \{}
\DoxyCodeLine{1195     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(result\_inplace.has\_value());}
\DoxyCodeLine{1196     backing\_store-\/>BroadcastSharedWasmMemoryGrow(isolate);}
\DoxyCodeLine{1197     \textcolor{keywordflow}{if} (!old\_buffer-\/>is\_resizable\_by\_js()) \{}
\DoxyCodeLine{1198       \textcolor{comment}{// Broadcasting the update should update this memory object too.}}
\DoxyCodeLine{1199       \mbox{\hyperlink{src_2base_2logging_8h_aa958a8a4e5dda3abaa031977268ae60e}{CHECK\_NE}}(*old\_buffer, memory\_object-\/>array\_buffer());}
\DoxyCodeLine{1200     \}}
\DoxyCodeLine{1201     \textcolor{keywordtype}{size\_t} new\_pages = result\_inplace.value() + pages;}
\DoxyCodeLine{1202     \textcolor{comment}{// If the allocation succeeded, then this can't possibly overflow:}}
\DoxyCodeLine{1203     \textcolor{keywordtype}{size\_t} new\_byte\_length = new\_pages * \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{1204     \textcolor{comment}{// This is a less than check, as it is not guaranteed that the SAB}}
\DoxyCodeLine{1205     \textcolor{comment}{// length here will be equal to the stashed length above as calls to}}
\DoxyCodeLine{1206     \textcolor{comment}{// grow the same memory object can come in from different workers.}}
\DoxyCodeLine{1207     \textcolor{comment}{// It is also possible that a call to Grow was in progress when}}
\DoxyCodeLine{1208     \textcolor{comment}{// handling this call.}}
\DoxyCodeLine{1209     \mbox{\hyperlink{src_2base_2logging_8h_a56e883b55c80205b4d1727679c68b2bd}{CHECK\_LE}}(new\_byte\_length, memory\_object-\/>array\_buffer()-\/>GetByteLength());}
\DoxyCodeLine{1210     \textcolor{comment}{// As \{old\_pages\} was read racefully, we return here the synchronized}}
\DoxyCodeLine{1211     \textcolor{comment}{// value provided by \{GrowWasmMemoryInPlace\}, to provide the atomic}}
\DoxyCodeLine{1212     \textcolor{comment}{// read-\/modify-\/write behavior required by the spec.}}
\DoxyCodeLine{1213     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceunibrow_ab0275d47f9778d486eafe88b18c5851d}{int32\_t}}\textcolor{keyword}{>}(result\_inplace.value());  \textcolor{comment}{// success}}
\DoxyCodeLine{1214   \}}
\DoxyCodeLine{1215 }
\DoxyCodeLine{1216   \textcolor{keywordtype}{size\_t} new\_pages = old\_pages + pages;}
\DoxyCodeLine{1217   \textcolor{comment}{// Check for overflow (should be excluded via \{max\_pages\} above).}}
\DoxyCodeLine{1218   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(old\_pages, new\_pages);}
\DoxyCodeLine{1219 }
\DoxyCodeLine{1220   \textcolor{comment}{// Check if the non-\/shared memory could grow in-\/place.}}
\DoxyCodeLine{1221   \textcolor{keywordflow}{if} (result\_inplace.has\_value()) \{}
\DoxyCodeLine{1222     \textcolor{keywordflow}{if} (memory\_object-\/>array\_buffer()-\/>is\_resizable\_by\_js()) \{}
\DoxyCodeLine{1223       memory\_object-\/>array\_buffer()-\/>set\_byte\_length(new\_pages *}
\DoxyCodeLine{1224                                                      \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}});}
\DoxyCodeLine{1225       memory\_object-\/>UpdateInstances(isolate);}
\DoxyCodeLine{1226     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1227       \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}{RefreshBuffer}}(isolate, memory\_object, std::move(backing\_store));}
\DoxyCodeLine{1228     \}}
\DoxyCodeLine{1229     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(result\_inplace.value(), old\_pages);}
\DoxyCodeLine{1230     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceunibrow_ab0275d47f9778d486eafe88b18c5851d}{int32\_t}}\textcolor{keyword}{>}(result\_inplace.value());  \textcolor{comment}{// success}}
\DoxyCodeLine{1231   \}}
\DoxyCodeLine{1232   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!memory\_object-\/>array\_buffer()-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{1233 }
\DoxyCodeLine{1234   \textcolor{comment}{// We should only try growing by copying if we actually grow.}}
\DoxyCodeLine{1235   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(old\_pages, new\_pages);}
\DoxyCodeLine{1236 }
\DoxyCodeLine{1237   \textcolor{comment}{// Try allocating a new backing store and copying.}}
\DoxyCodeLine{1238   \textcolor{comment}{// To avoid overall quadratic complexity of many small grow operations, we}}
\DoxyCodeLine{1239   \textcolor{comment}{// grow by at least 0.5 MB + 12.5\% of the existing memory size.}}
\DoxyCodeLine{1240   \textcolor{comment}{// These numbers are kept small because we must be careful about address}}
\DoxyCodeLine{1241   \textcolor{comment}{// space consumption on 32-\/bit platforms.}}
\DoxyCodeLine{1242   \textcolor{keywordtype}{size\_t} min\_growth = old\_pages + 8 + (old\_pages >> 3);}
\DoxyCodeLine{1243   \textcolor{comment}{// First apply \{min\_growth\}, then \{max\_pages\}. The order is important, because}}
\DoxyCodeLine{1244   \textcolor{comment}{// \{min\_growth\} can be bigger than \{max\_pages\}, and in that case we want to}}
\DoxyCodeLine{1245   \textcolor{comment}{// cap to \{max\_pages\}.}}
\DoxyCodeLine{1246   \textcolor{keywordtype}{size\_t} new\_capacity = std::min(max\_pages, std::max(new\_pages, min\_growth));}
\DoxyCodeLine{1247   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(new\_pages, new\_capacity);}
\DoxyCodeLine{1248   std::unique\_ptr<BackingStore> new\_backing\_store =}
\DoxyCodeLine{1249       backing\_store-\/>CopyWasmMemory(isolate, new\_pages, new\_capacity,}
\DoxyCodeLine{1250                                     memory\_object-\/>is\_memory64()}
\DoxyCodeLine{1251                                         ? \mbox{\hyperlink{namespacev8_1_1internal_a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913}{WasmMemoryFlag::kWasmMemory64}}}
\DoxyCodeLine{1252                                         : \mbox{\hyperlink{namespacev8_1_1internal_a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412}{WasmMemoryFlag::kWasmMemory32}});}
\DoxyCodeLine{1253   \textcolor{keywordflow}{if} (!new\_backing\_store) \{}
\DoxyCodeLine{1254     \textcolor{comment}{// Crash on out-\/of-\/memory if the correctness fuzzer is running.}}
\DoxyCodeLine{1255     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.correctness\_fuzzer\_suppressions) \{}
\DoxyCodeLine{1256       \mbox{\hyperlink{src_2base_2logging_8h_a0d093cb749cfc7ab5993726392df681f}{FATAL}}(\textcolor{stringliteral}{"{}could not grow wasm memory"{}});}
\DoxyCodeLine{1257     \}}
\DoxyCodeLine{1258     \textcolor{comment}{// Set the non-\/determinism flag in the WasmEngine.}}
\DoxyCodeLine{1259     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7}{wasm::WasmEngine::set\_had\_nondeterminism}}();}
\DoxyCodeLine{1260     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1261   \}}
\DoxyCodeLine{1262 }
\DoxyCodeLine{1263   \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}{RefreshBuffer}}(isolate, memory\_object, std::move(new\_backing\_store));}
\DoxyCodeLine{1264 }
\DoxyCodeLine{1265   \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceunibrow_ab0275d47f9778d486eafe88b18c5851d}{int32\_t}}\textcolor{keyword}{>}(old\_pages);  \textcolor{comment}{// success}}
\DoxyCodeLine{1266 \}}

\end{DoxyCode}


References CHECK\+\_\+\+LE, CHECK\+\_\+\+NE, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+GE, DCHECK\+\_\+\+LE, DCHECK\+\_\+\+LT, DCHECK\+\_\+\+NOT\+\_\+\+NULL, FATAL, v8\+::internal\+::k\+Wasm\+Memory32, v8\+::internal\+::k\+Wasm\+Memory64, v8\+::internal\+::wasm\+::k\+Wasm\+Page\+Size, v8\+::internal\+::wasm\+::max\+\_\+mem32\+\_\+pages(), v8\+::internal\+::wasm\+::max\+\_\+mem64\+\_\+pages(), Refresh\+Buffer(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::set\+\_\+had\+\_\+nondeterminism(), TRACE\+\_\+\+EVENT0, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Interpreter\+Runtime\+::\+Memory\+Grow(), v8\+::internal\+::\+Resize\+Helper(), v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Memory\+Grow\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ab04a12b70d33ad72a3442d2a21bbfff7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ab04a12b70d33ad72a3442d2a21bbfff7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a7ce26bf7f45ae37057ae2017749b25bf}\label{classv8_1_1internal_1_1WasmMemoryObject_a7ce26bf7f45ae37057ae2017749b25bf}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!has\_maximum\_pages@{has\_maximum\_pages}}
\index{has\_maximum\_pages@{has\_maximum\_pages}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{has\_maximum\_pages()}{has\_maximum\_pages()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Wasm\+Memory\+Object\+::has\+\_\+maximum\+\_\+pages (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 638 of file wasm-\/objects-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{638 \{ \textcolor{keywordflow}{return} maximum\_pages() >= 0; \}}

\end{DoxyCode}


Referenced by Fix\+Up\+Resizable\+Array\+Buffer().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a7ce26bf7f45ae37057ae2017749b25bf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_adae6cd24ea681c8cf41ae346c5e68b1c}\label{classv8_1_1internal_1_1WasmMemoryObject_adae6cd24ea681c8cf41ae346c5e68b1c}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!is\_memory64@{is\_memory64}}
\index{is\_memory64@{is\_memory64}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{is\_memory64()}{is\_memory64()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Wasm\+Memory\+Object\+::is\+\_\+memory64 (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 640 of file wasm-\/objects-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{640                                          \{}
\DoxyCodeLine{641   \textcolor{keywordflow}{return} address\_type() == \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0}{wasm::AddressType::kI64}};}
\DoxyCodeLine{642 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::k\+I64.

\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898}\label{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!New@{New}}
\index{New@{New}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{New()}{New()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+New (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{buffer,  }\item[{\mbox{\hyperlink{classint}{int}}}]{maximum,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952}{wasm\+::\+Address\+Type}}}]{address\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 878 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{880                                   \{}
\DoxyCodeLine{881   DirectHandle<JSFunction> memory\_ctor(}
\DoxyCodeLine{882       isolate-\/>native\_context()-\/>wasm\_memory\_constructor(), isolate);}
\DoxyCodeLine{883 }
\DoxyCodeLine{884   \textcolor{keyword}{auto} memory\_object = Cast<WasmMemoryObject>(}
\DoxyCodeLine{885       isolate-\/>factory()-\/>NewJSObject(memory\_ctor, \mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff}{AllocationType::kOld}}));}
\DoxyCodeLine{886   memory\_object-\/>set\_array\_buffer(*buffer);}
\DoxyCodeLine{887   memory\_object-\/>set\_maximum\_pages(maximum);}
\DoxyCodeLine{888   memory\_object-\/>set\_address\_type(address\_type);}
\DoxyCodeLine{889   memory\_object-\/>set\_padding\_for\_address\_type\_0(0);}
\DoxyCodeLine{890   memory\_object-\/>set\_padding\_for\_address\_type\_1(0);}
\DoxyCodeLine{891 \textcolor{preprocessor}{\#if TAGGED\_SIZE\_8\_BYTES}}
\DoxyCodeLine{892   memory\_object-\/>set\_padding\_for\_address\_type\_2(0);}
\DoxyCodeLine{893 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{894   memory\_object-\/>set\_instances(ReadOnlyRoots\{isolate\}.empty\_weak\_array\_list());}
\DoxyCodeLine{895 }
\DoxyCodeLine{896   \textcolor{keywordflow}{if} (buffer-\/>is\_resizable\_by\_js()) \{}
\DoxyCodeLine{897     memory\_object-\/>FixUpResizableArrayBuffer(*buffer);}
\DoxyCodeLine{898   \}}
\DoxyCodeLine{899 }
\DoxyCodeLine{900   std::shared\_ptr<BackingStore> backing\_store = buffer-\/>GetBackingStore();}
\DoxyCodeLine{901   \textcolor{keywordflow}{if} (buffer-\/>is\_shared()) \{}
\DoxyCodeLine{902     \textcolor{comment}{// Only Wasm memory can be shared (in contrast to asm.js memory).}}
\DoxyCodeLine{903     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(backing\_store \&\& backing\_store-\/>is\_wasm\_memory());}
\DoxyCodeLine{904     backing\_store-\/>AttachSharedWasmMemoryObject(isolate, memory\_object);}
\DoxyCodeLine{905   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (backing\_store) \{}
\DoxyCodeLine{906     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!backing\_store-\/>is\_shared());}
\DoxyCodeLine{907   \}}
\DoxyCodeLine{908 }
\DoxyCodeLine{909   \textcolor{comment}{// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject}}
\DoxyCodeLine{910   \textcolor{comment}{// instance.}}
\DoxyCodeLine{911   DirectHandle<Symbol> symbol =}
\DoxyCodeLine{912       isolate-\/>factory()-\/>array\_buffer\_wasm\_memory\_symbol();}
\DoxyCodeLine{913   \mbox{\hyperlink{classv8_1_1internal_1_1Object_a2e8108d7b7d2b826ab90a71b20be7a9d}{Object::SetProperty}}(isolate, buffer, symbol, memory\_object).Check();}
\DoxyCodeLine{914 }
\DoxyCodeLine{915   \textcolor{keywordflow}{return} memory\_object;}
\DoxyCodeLine{916 \}}

\end{DoxyCode}


References CHECK, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::k\+Old, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::internal\+::\+Factory\+::\+New\+JSObject(), and v8\+::internal\+::\+Object\+::\+Set\+Property().



Referenced by v8\+::internal\+::wasm\+::\+Instance\+Builder\+::\+Allocate\+Memory(), v8\+::internal\+::wasm\+::\+Instance\+Builder\+::\+Build\+\_\+\+Phase1(), New(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Memory\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a6308dc98ea5bcf03a11a988ed2d29c53}\label{classv8_1_1internal_1_1WasmMemoryObject_a6308dc98ea5bcf03a11a988ed2d29c53}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!New@{New}}
\index{New@{New}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{New()}{New()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+New (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classint}{int}}}]{initial,  }\item[{\mbox{\hyperlink{classint}{int}}}]{maximum,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}}}]{shared,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952}{wasm\+::\+Address\+Type}}}]{address\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 918 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{920                                   \{}
\DoxyCodeLine{921   \textcolor{keywordtype}{bool} has\_maximum = maximum != \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a65b8addcf2135f693f3f83a8acf74aa7}{kNoMaximum}};}
\DoxyCodeLine{922 }
\DoxyCodeLine{923   \textcolor{keywordtype}{int} engine\_maximum = address\_type == \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0}{wasm::AddressType::kI64}}}
\DoxyCodeLine{924                            ? \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a4326f4455d83a545760a1048f2d6b122}{wasm::max\_mem64\_pages}}())}
\DoxyCodeLine{925                            : \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a2c6edd5180c4a1c2a0454eaac389dc1f}{wasm::max\_mem32\_pages}}());}
\DoxyCodeLine{926 }
\DoxyCodeLine{927   \textcolor{keywordflow}{if} (initial > engine\_maximum) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{928 }
\DoxyCodeLine{929 \textcolor{preprocessor}{\#ifdef V8\_TARGET\_ARCH\_32\_BIT}}
\DoxyCodeLine{930   \textcolor{comment}{// On 32-\/bit platforms we need an heuristic here to balance overall memory}}
\DoxyCodeLine{931   \textcolor{comment}{// and address space consumption.}}
\DoxyCodeLine{932   constexpr \textcolor{keywordtype}{int} kGBPages = 1024 * 1024 * 1024 / \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac29e28cd9a3b18c7e07a3406d5d6ff1a}{wasm::kWasmPageSize}};}
\DoxyCodeLine{933   \textcolor{comment}{// We allocate the smallest of the following sizes, but at least the initial}}
\DoxyCodeLine{934   \textcolor{comment}{// size:}}
\DoxyCodeLine{935   \textcolor{comment}{// 1) the module-\/defined maximum;}}
\DoxyCodeLine{936   \textcolor{comment}{// 2) 1GB;}}
\DoxyCodeLine{937   \textcolor{comment}{// 3) the engine maximum;}}
\DoxyCodeLine{938   \textcolor{keywordtype}{int} allocation\_maximum = std::min(kGBPages, engine\_maximum);}
\DoxyCodeLine{939   \textcolor{keywordtype}{int} heuristic\_maximum;}
\DoxyCodeLine{940   \textcolor{keywordflow}{if} (initial > kGBPages) \{}
\DoxyCodeLine{941     \textcolor{comment}{// We always allocate at least the initial size.}}
\DoxyCodeLine{942     heuristic\_maximum = initial;}
\DoxyCodeLine{943   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (has\_maximum) \{}
\DoxyCodeLine{944     \textcolor{comment}{// We try to reserve the maximum, but at most the allocation\_maximum to}}
\DoxyCodeLine{945     \textcolor{comment}{// avoid OOMs.}}
\DoxyCodeLine{946     heuristic\_maximum = std::min(maximum, allocation\_maximum);}
\DoxyCodeLine{947   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (shared == \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16}{SharedFlag::kShared}}) \{}
\DoxyCodeLine{948     \textcolor{comment}{// If shared memory has no maximum, we use the allocation\_maximum as an}}
\DoxyCodeLine{949     \textcolor{comment}{// implicit maximum.}}
\DoxyCodeLine{950     heuristic\_maximum = allocation\_maximum;}
\DoxyCodeLine{951   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{952     \textcolor{comment}{// If non-\/shared memory has no maximum, we only allocate the initial size}}
\DoxyCodeLine{953     \textcolor{comment}{// and then grow with realloc.}}
\DoxyCodeLine{954     heuristic\_maximum = initial;}
\DoxyCodeLine{955   \}}
\DoxyCodeLine{956 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{957   \textcolor{keywordtype}{int} heuristic\_maximum =}
\DoxyCodeLine{958       has\_maximum ? std::min(engine\_maximum, maximum) : engine\_maximum;}
\DoxyCodeLine{959 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{960 }
\DoxyCodeLine{961   std::unique\_ptr<BackingStore> backing\_store =}
\DoxyCodeLine{962       BackingStore::AllocateWasmMemory(isolate, initial, heuristic\_maximum,}
\DoxyCodeLine{963                                        address\_type == \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293}{wasm::AddressType::kI32}}}
\DoxyCodeLine{964                                            ? \mbox{\hyperlink{namespacev8_1_1internal_a5ccd81f4720c063fbbb03699603034c6a047ebee131a760d19529704fdfc1d412}{WasmMemoryFlag::kWasmMemory32}}}
\DoxyCodeLine{965                                            : \mbox{\hyperlink{namespacev8_1_1internal_a5ccd81f4720c063fbbb03699603034c6a076ed6b69b93a14d0f539af6c5bf4913}{WasmMemoryFlag::kWasmMemory64}},}
\DoxyCodeLine{966                                        shared);}
\DoxyCodeLine{967 }
\DoxyCodeLine{968   \textcolor{keywordflow}{if} (!backing\_store) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{969 }
\DoxyCodeLine{970   DirectHandle<JSArrayBuffer> buffer =}
\DoxyCodeLine{971       shared == \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16}{SharedFlag::kShared}}}
\DoxyCodeLine{972           ? isolate-\/>factory()-\/>NewJSSharedArrayBuffer(std::move(backing\_store))}
\DoxyCodeLine{973           : isolate-\/>factory()-\/>NewJSArrayBuffer(std::move(backing\_store));}
\DoxyCodeLine{974 }
\DoxyCodeLine{975   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ab10298844a3a2e6993fc6f3634eaf898}{New}}(isolate, buffer, maximum, address\_type);}
\DoxyCodeLine{976 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::wasm\+::k\+I32, v8\+::internal\+::wasm\+::k\+I64, k\+No\+Maximum, v8\+::internal\+::k\+Shared, v8\+::internal\+::k\+Wasm\+Memory32, v8\+::internal\+::k\+Wasm\+Memory64, v8\+::internal\+::wasm\+::k\+Wasm\+Page\+Size, v8\+::internal\+::wasm\+::max\+\_\+mem32\+\_\+pages(), v8\+::internal\+::wasm\+::max\+\_\+mem64\+\_\+pages(), New(), v8\+::internal\+::\+Factory\+::\+New\+JSArray\+Buffer(), and v8\+::internal\+::\+Factory\+::\+New\+JSShared\+Array\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a6308dc98ea5bcf03a11a988ed2d29c53_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}\label{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!RefreshBuffer@{RefreshBuffer}}
\index{RefreshBuffer@{RefreshBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{RefreshBuffer()}{RefreshBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Refresh\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$}]{new\+\_\+backing\+\_\+store }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1081 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1083                                                    \{}
\DoxyCodeLine{1084   \textcolor{comment}{// Detach old and create a new one with the new backing store.}}
\DoxyCodeLine{1085   DirectHandle<JSArrayBuffer> old\_buffer(memory\_object-\/>array\_buffer(),}
\DoxyCodeLine{1086                                          isolate);}
\DoxyCodeLine{1087 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{1088   \textcolor{keywordtype}{void}* old\_data\_pointer = old\_buffer-\/>backing\_store();}
\DoxyCodeLine{1089   \textcolor{keywordtype}{size\_t} old\_byte\_length = old\_buffer-\/>byte\_length();}
\DoxyCodeLine{1090 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1091   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff}{JSArrayBuffer::Detach}}(old\_buffer, \textcolor{keyword}{true}).Check();}
\DoxyCodeLine{1092   DirectHandle<JSArrayBuffer> new\_buffer =}
\DoxyCodeLine{1093       isolate-\/>factory()-\/>NewJSArrayBuffer(std::move(new\_backing\_store));}
\DoxyCodeLine{1094 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{1095   \textcolor{keywordtype}{bool} data\_pointer\_unchanged = new\_buffer-\/>backing\_store() == old\_data\_pointer;}
\DoxyCodeLine{1096   \textcolor{keywordtype}{bool} byte\_length\_unchanged = new\_buffer-\/>byte\_length() == old\_byte\_length;}
\DoxyCodeLine{1097   \textcolor{keywordtype}{bool} resizability\_changed =}
\DoxyCodeLine{1098       old\_buffer-\/>is\_resizable\_by\_js() != new\_buffer-\/>is\_resizable\_by\_js();}
\DoxyCodeLine{1099   \textcolor{comment}{// SetNewBuffer only calls UpdateInstances if resizability didn't change,}}
\DoxyCodeLine{1100   \textcolor{comment}{// which depends on resizability changing not changing the data pointer or}}
\DoxyCodeLine{1101   \textcolor{comment}{// byte length. See comment in SetNewBuffer.}}
\DoxyCodeLine{1102   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(resizability\_changed,}
\DoxyCodeLine{1103                  data\_pointer\_unchanged \&\& byte\_length\_unchanged);}
\DoxyCodeLine{1104 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1105   memory\_object-\/>SetNewBuffer(isolate, *new\_buffer);}
\DoxyCodeLine{1106   \textcolor{comment}{// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject}}
\DoxyCodeLine{1107   \textcolor{comment}{// instance.}}
\DoxyCodeLine{1108   DirectHandle<Symbol> symbol =}
\DoxyCodeLine{1109       isolate-\/>factory()-\/>array\_buffer\_wasm\_memory\_symbol();}
\DoxyCodeLine{1110   \mbox{\hyperlink{classv8_1_1internal_1_1Object_a2e8108d7b7d2b826ab90a71b20be7a9d}{Object::SetProperty}}(isolate, new\_buffer, symbol, memory\_object).Check();}
\DoxyCodeLine{1111   \textcolor{keywordflow}{return} new\_buffer;}
\DoxyCodeLine{1112 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+JSArray\+Buffer\+::\+Detach(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Factory\+::\+New\+JSArray\+Buffer(), and v8\+::internal\+::\+Object\+::\+Set\+Property().



Referenced by Grow(), To\+Fixed\+Length\+Buffer(), and To\+Resizable\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511}\label{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!RefreshSharedBuffer@{RefreshSharedBuffer}}
\index{RefreshSharedBuffer@{RefreshSharedBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{RefreshSharedBuffer()}{RefreshSharedBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Refresh\+Shared\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}}}]{resizable\+\_\+by\+\_\+js }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1115 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1117                                    \{}
\DoxyCodeLine{1118   DirectHandle<JSArrayBuffer> old\_buffer(memory\_object-\/>array\_buffer(),}
\DoxyCodeLine{1119                                          isolate);}
\DoxyCodeLine{1120   std::shared\_ptr<BackingStore> backing\_store = old\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{1121   \textcolor{comment}{// Wasm memory always has a BackingStore.}}
\DoxyCodeLine{1122   \mbox{\hyperlink{src_2base_2logging_8h_a9154b181227e4b02e465befe50219158}{CHECK\_NOT\_NULL}}(backing\_store);}
\DoxyCodeLine{1123   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(backing\_store-\/>is\_wasm\_memory());}
\DoxyCodeLine{1124   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(backing\_store-\/>is\_shared());}
\DoxyCodeLine{1125 }
\DoxyCodeLine{1126   \textcolor{comment}{// Keep a raw pointer to the backing store for a CHECK later one. Make it}}
\DoxyCodeLine{1127   \textcolor{comment}{// \{void*\} so we do not accidentally try to use it for anything else.}}
\DoxyCodeLine{1128   \textcolor{keywordtype}{void}* expected\_backing\_store = backing\_store.get();}
\DoxyCodeLine{1129 }
\DoxyCodeLine{1130   DirectHandle<JSArrayBuffer> new\_buffer =}
\DoxyCodeLine{1131       isolate-\/>factory()-\/>NewJSSharedArrayBuffer(std::move(backing\_store));}
\DoxyCodeLine{1132   \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(expected\_backing\_store, new\_buffer-\/>GetBackingStore().get());}
\DoxyCodeLine{1133   \textcolor{keywordflow}{if} (resizable\_by\_js == \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0}{ResizableFlag::kResizable}}) \{}
\DoxyCodeLine{1134     new\_buffer-\/>set\_is\_resizable\_by\_js(\textcolor{keyword}{true});}
\DoxyCodeLine{1135   \}}
\DoxyCodeLine{1136   memory\_object-\/>SetNewBuffer(isolate, *new\_buffer);}
\DoxyCodeLine{1137   \textcolor{comment}{// Memorize a link from the JSArrayBuffer to its owning WasmMemoryObject}}
\DoxyCodeLine{1138   \textcolor{comment}{// instance.}}
\DoxyCodeLine{1139   DirectHandle<Symbol> symbol =}
\DoxyCodeLine{1140       isolate-\/>factory()-\/>array\_buffer\_wasm\_memory\_symbol();}
\DoxyCodeLine{1141   \mbox{\hyperlink{classv8_1_1internal_1_1Object_a2e8108d7b7d2b826ab90a71b20be7a9d}{Object::SetProperty}}(isolate, new\_buffer, symbol, memory\_object).Check();}
\DoxyCodeLine{1142   \textcolor{keywordflow}{return} new\_buffer;}
\DoxyCodeLine{1143 \}}

\end{DoxyCode}


References CHECK, CHECK\+\_\+\+EQ, CHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::k\+Resizable, v8\+::internal\+::\+Factory\+::\+New\+JSShared\+Array\+Buffer(), and v8\+::internal\+::\+Object\+::\+Set\+Property().



Referenced by To\+Fixed\+Length\+Buffer(), and To\+Resizable\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a97b4ba7ad14c6f986087c0cd437f108a}\label{classv8_1_1internal_1_1WasmMemoryObject_a97b4ba7ad14c6f986087c0cd437f108a}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!SetNewBuffer@{SetNewBuffer}}
\index{SetNewBuffer@{SetNewBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{SetNewBuffer()}{SetNewBuffer()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Set\+New\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{new\+\_\+buffer }\end{DoxyParamCaption})}



Definition at line 996 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{997                                                                       \{}
\DoxyCodeLine{998   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{999   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} new\_buffer\_is\_resizable\_by\_js = new\_buffer-\/>is\_resizable\_by\_js();}
\DoxyCodeLine{1000   \textcolor{keywordflow}{if} (new\_buffer\_is\_resizable\_by\_js) \{}
\DoxyCodeLine{1001     \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ae99a8b8f00da43fbbbe34eaa7a187225}{FixUpResizableArrayBuffer}}(*new\_buffer);}
\DoxyCodeLine{1002   \}}
\DoxyCodeLine{1003   Tagged<JSArrayBuffer> old\_buffer = array\_buffer();}
\DoxyCodeLine{1004   set\_array\_buffer(new\_buffer);}
\DoxyCodeLine{1005   \textcolor{comment}{// Iterating and updating all instances is a slow operation, and is required}}
\DoxyCodeLine{1006   \textcolor{comment}{// when the pointer to memory or size of memory changes.}}
\DoxyCodeLine{1007   \textcolor{comment}{//}}
\DoxyCodeLine{1008   \textcolor{comment}{// When refreshing the buffer for changing the resizability of the JS-\/exposed}}
\DoxyCodeLine{1009   \textcolor{comment}{// (S)AB, both the data pointer and size stay the same, only the JS object}}
\DoxyCodeLine{1010   \textcolor{comment}{// changes.}}
\DoxyCodeLine{1011   \textcolor{comment}{//}}
\DoxyCodeLine{1012   \textcolor{comment}{// When refreshing the buffer for growing a memory exposing a fixed-\/length}}
\DoxyCodeLine{1013   \textcolor{comment}{// (S)AB (i.e. both the old and new buffers are !is\_resizable\_by\_js()), the}}
\DoxyCodeLine{1014   \textcolor{comment}{// size is changing, and updating the instances is needed.}}
\DoxyCodeLine{1015   \textcolor{comment}{//}}
\DoxyCodeLine{1016   \textcolor{comment}{// This function is never called in a way such that both the old and new}}
\DoxyCodeLine{1017   \textcolor{comment}{// (S)ABs are resizable. Once a Wasm memory exposes a resizable (S)AB,}}
\DoxyCodeLine{1018   \textcolor{comment}{// changing the size does not refresh the buffer.}}
\DoxyCodeLine{1019   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!old\_buffer-\/>is\_resizable\_by\_js() ||}
\DoxyCodeLine{1020          !new\_buffer-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{1021   \textcolor{keywordflow}{if} (!old\_buffer-\/>is\_resizable\_by\_js() \&\& !new\_buffer\_is\_resizable\_by\_js) \{}
\DoxyCodeLine{1022     \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a}{UpdateInstances}}(isolate);}
\DoxyCodeLine{1023   \}}
\DoxyCodeLine{1024 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), Fix\+Up\+Resizable\+Array\+Buffer(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, and Update\+Instances().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a97b4ba7ad14c6f986087c0cd437f108a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a11123e674ed260e849a726396a6b1f3c}\label{classv8_1_1internal_1_1WasmMemoryObject_a11123e674ed260e849a726396a6b1f3c}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!ToFixedLengthBuffer@{ToFixedLengthBuffer}}
\index{ToFixedLengthBuffer@{ToFixedLengthBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{ToFixedLengthBuffer()}{ToFixedLengthBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+To\+Fixed\+Length\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1269 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1270                                                                     \{}
\DoxyCodeLine{1271   DirectHandle<JSArrayBuffer> old\_buffer(memory\_object-\/>array\_buffer(),}
\DoxyCodeLine{1272                                          isolate);}
\DoxyCodeLine{1273   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(old\_buffer-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{1274   \textcolor{keywordflow}{if} (old\_buffer-\/>is\_shared()) \{}
\DoxyCodeLine{1275     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511}{RefreshSharedBuffer}}(isolate, memory\_object,}
\DoxyCodeLine{1276                                \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348af444d0c6959a4f4e0553ccd4f9f35908}{ResizableFlag::kNotResizable}});}
\DoxyCodeLine{1277   \}}
\DoxyCodeLine{1278   std::shared\_ptr<BackingStore> backing\_store = old\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{1279   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(backing\_store);}
\DoxyCodeLine{1280   backing\_store-\/>MakeWasmMemoryResizableByJS(\textcolor{keyword}{false});}
\DoxyCodeLine{1281   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}{RefreshBuffer}}(isolate, memory\_object, std::move(backing\_store));}
\DoxyCodeLine{1282 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::k\+Not\+Resizable, Refresh\+Buffer(), and Refresh\+Shared\+Buffer().



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Memory\+To\+Fixed\+Length\+Buffer\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a11123e674ed260e849a726396a6b1f3c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a11123e674ed260e849a726396a6b1f3c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a32101d7a077535dadf31d9373ec3a6f2}\label{classv8_1_1internal_1_1WasmMemoryObject_a32101d7a077535dadf31d9373ec3a6f2}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!ToResizableBuffer@{ToResizableBuffer}}
\index{ToResizableBuffer@{ToResizableBuffer}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{ToResizableBuffer()}{ToResizableBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+To\+Resizable\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1285 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1286                                                                     \{}
\DoxyCodeLine{1287   \textcolor{comment}{// Resizable ArrayBuffers require a maximum size during creation. Mirror the}}
\DoxyCodeLine{1288   \textcolor{comment}{// requirement when reflecting Wasm memory as a resizable buffer.}}
\DoxyCodeLine{1289   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(memory\_object-\/>has\_maximum\_pages());}
\DoxyCodeLine{1290   DirectHandle<JSArrayBuffer> old\_buffer(memory\_object-\/>array\_buffer(),}
\DoxyCodeLine{1291                                          isolate);}
\DoxyCodeLine{1292   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!old\_buffer-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{1293   \textcolor{keywordflow}{if} (old\_buffer-\/>is\_shared()) \{}
\DoxyCodeLine{1294     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a0df25b331079bfa7ca55891d84d1a511}{RefreshSharedBuffer}}(isolate, memory\_object,}
\DoxyCodeLine{1295                                \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0}{ResizableFlag::kResizable}});}
\DoxyCodeLine{1296   \}}
\DoxyCodeLine{1297   std::shared\_ptr<BackingStore> backing\_store = old\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{1298   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(backing\_store);}
\DoxyCodeLine{1299   backing\_store-\/>MakeWasmMemoryResizableByJS(\textcolor{keyword}{true});}
\DoxyCodeLine{1300   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject_a5d9a1955952df150f9c2d140bd173ad4}{RefreshBuffer}}(isolate, memory\_object, std::move(backing\_store));}
\DoxyCodeLine{1301 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::k\+Resizable, Refresh\+Buffer(), and Refresh\+Shared\+Buffer().



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Memory\+To\+Resizable\+Buffer\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a32101d7a077535dadf31d9373ec3a6f2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a32101d7a077535dadf31d9373ec3a6f2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a}\label{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!UpdateInstances@{UpdateInstances}}
\index{UpdateInstances@{UpdateInstances}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{UpdateInstances()}{UpdateInstances()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Update\+Instances (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1026 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1026                                                        \{}
\DoxyCodeLine{1027   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1028   Tagged<WeakArrayList> instances = this-\/>instances();}
\DoxyCodeLine{1029   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0, len = instances-\/>length(); \mbox{\hyperlink{namespacev8_1_1internal}{i}} < len; ++\mbox{\hyperlink{namespacev8_1_1internal}{i}}) \{}
\DoxyCodeLine{1030     Tagged<MaybeObject> elem = instances-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{1031     \textcolor{keywordflow}{if} (elem.IsCleared()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1032     \mbox{\hyperlink{namespacev8_1_1internal_a2cf18af914a2c22660943927f6e765da}{Tagged<WasmInstanceObject>}} \mbox{\hyperlink{namespacev8_1_1internal_a58e3fb6c5ada1d544715988b7a735333}{instance\_object}} =}
\DoxyCodeLine{1033         Cast<WasmInstanceObject>(elem.GetHeapObjectAssumeWeak());}
\DoxyCodeLine{1034     Tagged<WasmTrustedInstanceData> trusted\_data =}
\DoxyCodeLine{1035         \mbox{\hyperlink{namespacev8_1_1internal_a58e3fb6c5ada1d544715988b7a735333}{instance\_object}}-\/>trusted\_data(isolate);}
\DoxyCodeLine{1036     \textcolor{comment}{// TODO(clemens): Avoid the iteration by also remembering the memory index}}
\DoxyCodeLine{1037     \textcolor{comment}{// if we ever see larger numbers of memories.}}
\DoxyCodeLine{1038     \mbox{\hyperlink{namespacev8_1_1internal_a5aa5f5d8cabe2dbba29d92ffdf16e9fc}{Tagged<FixedArray>}} \mbox{\hyperlink{namespacev8_1_1internal_a932143dd77f3ffbd83a1186db64c0c8f}{memory\_objects}} = trusted\_data-\/>memory\_objects();}
\DoxyCodeLine{1039     \textcolor{keywordtype}{int} num\_memories = \mbox{\hyperlink{namespacev8_1_1internal_a932143dd77f3ffbd83a1186db64c0c8f}{memory\_objects}}-\/>length();}
\DoxyCodeLine{1040     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} mem\_idx = 0; mem\_idx < num\_memories; ++mem\_idx) \{}
\DoxyCodeLine{1041       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a932143dd77f3ffbd83a1186db64c0c8f}{memory\_objects}}-\/>get(mem\_idx) == *\textcolor{keyword}{this}) \{}
\DoxyCodeLine{1042         \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_ac6cc9f200ea9fad68bd6e5a7dfc5e6dd}{SetInstanceMemory}}(trusted\_data, array\_buffer(), mem\_idx);}
\DoxyCodeLine{1043       \}}
\DoxyCodeLine{1044     \}}
\DoxyCodeLine{1045   \}}
\DoxyCodeLine{1046 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Get\+Heap\+Object\+Assume\+Weak(), v8\+::internal\+::instance\+\_\+object, v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Is\+Cleared(), v8\+::internal\+::memory\+\_\+objects, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, and v8\+::internal\+::anonymous\+\_\+namespace\{wasm-\/objects.\+cc\}\+::\+Set\+Instance\+Memory().



Referenced by Set\+New\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_ad61fd836f186cfadacfaf1d000424a4a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a83af2a10e27026f8c76e91833243e5f5}\label{classv8_1_1internal_1_1WasmMemoryObject_a83af2a10e27026f8c76e91833243e5f5}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!UseInInstance@{UseInInstance}}
\index{UseInInstance@{UseInInstance}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{UseInInstance()}{UseInInstance()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Use\+In\+Instance (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmMemoryObject}{Wasm\+Memory\+Object}} $>$}]{memory,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{trusted\+\_\+instance\+\_\+data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{shared\+\_\+trusted\+\_\+instance\+\_\+data,  }\item[{\mbox{\hyperlink{classint}{int}}}]{memory\+\_\+index\+\_\+in\+\_\+instance }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 978 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{982                                   \{}
\DoxyCodeLine{983   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_ac6cc9f200ea9fad68bd6e5a7dfc5e6dd}{SetInstanceMemory}}(*trusted\_instance\_data, memory-\/>array\_buffer(),}
\DoxyCodeLine{984                     memory\_index\_in\_instance);}
\DoxyCodeLine{985   \textcolor{keywordflow}{if} (!shared\_trusted\_instance\_data.is\_null()) \{}
\DoxyCodeLine{986     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02wasm-objects_8cc_03_ac6cc9f200ea9fad68bd6e5a7dfc5e6dd}{SetInstanceMemory}}(*shared\_trusted\_instance\_data, memory-\/>array\_buffer(),}
\DoxyCodeLine{987                       memory\_index\_in\_instance);}
\DoxyCodeLine{988   \}}
\DoxyCodeLine{989   DirectHandle<WeakArrayList> instances\{memory-\/>instances(), isolate\};}
\DoxyCodeLine{990   \textcolor{keyword}{auto} weak\_instance\_object = \mbox{\hyperlink{classv8_1_1internal_1_1MaybeObjectDirectHandle_af39f668bdaaf25432eb7cdbc4066f4d6}{MaybeObjectDirectHandle::Weak}}(}
\DoxyCodeLine{991       trusted\_instance\_data-\/>instance\_object(), isolate);}
\DoxyCodeLine{992   instances = \mbox{\hyperlink{classv8_1_1internal_1_1WeakArrayList_aa986929cdb53581c4198099a06376487}{WeakArrayList::Append}}(isolate, instances, weak\_instance\_object);}
\DoxyCodeLine{993   memory-\/>set\_instances(*instances);}
\DoxyCodeLine{994 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Weak\+Array\+List\+::\+Append(), v8\+::internal\+::\+Direct\+Handle$<$ T $>$\+::is\+\_\+null(), v8\+::internal\+::anonymous\+\_\+namespace\{wasm-\/objects.\+cc\}\+::\+Set\+Instance\+Memory(), and v8\+::internal\+::\+Maybe\+Object\+Direct\+Handle\+::\+Weak().



Referenced by v8\+::internal\+::wasm\+::\+Instance\+Builder\+::\+Build\+\_\+\+Phase1\+\_\+\+Infallible().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a83af2a10e27026f8c76e91833243e5f5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmMemoryObject_a83af2a10e27026f8c76e91833243e5f5_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmMemoryObject_a65b8addcf2135f693f3f83a8acf74aa7}\label{classv8_1_1internal_1_1WasmMemoryObject_a65b8addcf2135f693f3f83a8acf74aa7}} 
\index{v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}!kNoMaximum@{kNoMaximum}}
\index{kNoMaximum@{kNoMaximum}!v8::internal::WasmMemoryObject@{v8::internal::WasmMemoryObject}}
\doxysubsubsection{\texorpdfstring{kNoMaximum}{kNoMaximum}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Wasm\+Memory\+Object\+::k\+No\+Maximum = -\/1\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 427 of file wasm-\/objects.\+h.



Referenced by v8\+::internal\+::wasm\+::\+Instance\+Builder\+::\+Allocate\+Memory(), New(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Memory\+Impl().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-objects_8h}{wasm-\/objects.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-objects-inl_8h}{wasm-\/objects-\/inl.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-objects_8cc}{wasm-\/objects.\+cc}}\end{DoxyCompactItemize}
