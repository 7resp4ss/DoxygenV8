\hypertarget{classv8_1_1internal_1_1LiveEdit}{}\doxysection{v8\+::internal\+::Live\+Edit Class Reference}
\label{classv8_1_1internal_1_1LiveEdit}\index{v8::internal::LiveEdit@{v8::internal::LiveEdit}}


Liveedit step-\/by-\/step\+:  




{\ttfamily \#include $<$liveedit.\+h$>$}



Inheritance diagram for v8\+::internal\+::Live\+Edit\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{classv8_1_1internal_1_1LiveEdit__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Live\+Edit\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{classv8_1_1internal_1_1LiveEdit__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5}{Compare\+Strings}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ a, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ b, std\+::vector$<$ \mbox{\hyperlink{structv8_1_1internal_1_1SourceChangeRange}{Source\+Change\+Range}} $>$ $\ast$diffs)
\item 
static \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1LiveEdit_ac8240273701e02c17dac0152d6f327d9}{Translate\+Position}} (const std\+::vector$<$ \mbox{\hyperlink{structv8_1_1internal_1_1SourceChangeRange}{Source\+Change\+Range}} $>$ \&changed, \mbox{\hyperlink{classint}{int}} position)
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1LiveEdit_a51d4d4ceadbcc0961829681cb99439ab}{Patch\+Script}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} preview, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} allow\+\_\+top\+\_\+frame\+\_\+live\+\_\+editing, \mbox{\hyperlink{structv8_1_1debug_1_1LiveEditResult}{debug\+::\+Live\+Edit\+Result}} $\ast$result)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Liveedit step-\/by-\/step\+: 


\begin{DoxyEnumerate}
\item calculate diff between old source and new source,
\item map function literals from old source to new source,
\item create new script for new\+\_\+source,
\item mark literals with changed code as changed, all others as unchanged,
\item check that for changed literals there are no\+:
\begin{DoxyItemize}
\item running generators in the heap,
\item non droppable frames (e.\+g. running generator) above them on stack.
\end{DoxyItemize}
\item mark the bottom most frame with changed function as scheduled for restart if any,
\item for unchanged functions\+:
\begin{DoxyItemize}
\item deoptimize,
\item remove from cache,
\item update source positions,
\item move to new script,
\item reset feedback information and preparsed scope information if any,
\item replace any sfi in constant pool with changed one if any.
\end{DoxyItemize}
\item for changed functions\+:
\begin{DoxyItemize}
\item deoptimize
\item remove from cache,
\item reset feedback information,
\item update all links from js functions to old shared with new one.
\end{DoxyItemize}
\item swap scripts. 
\end{DoxyEnumerate}

Definition at line 57 of file liveedit.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5}\label{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5}} 
\index{v8::internal::LiveEdit@{v8::internal::LiveEdit}!CompareStrings@{CompareStrings}}
\index{CompareStrings@{CompareStrings}!v8::internal::LiveEdit@{v8::internal::LiveEdit}}
\doxysubsubsection{\texorpdfstring{CompareStrings()}{CompareStrings()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Live\+Edit\+::\+Compare\+Strings (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{a,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{b,  }\item[{std\+::vector$<$ \mbox{\hyperlink{structv8_1_1internal_1_1SourceChangeRange}{Source\+Change\+Range}} $>$ $\ast$}]{diffs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1117 of file liveedit.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1119                                                                    \{}
\DoxyCodeLine{1120   s1 = String::Flatten(isolate, s1);}
\DoxyCodeLine{1121   s2 = String::Flatten(isolate, s2);}
\DoxyCodeLine{1122 }
\DoxyCodeLine{1123   LineEndsWrapper line\_ends1(isolate, s1);}
\DoxyCodeLine{1124   LineEndsWrapper line\_ends2(isolate, s2);}
\DoxyCodeLine{1125 }
\DoxyCodeLine{1126   LineArrayCompareInput input(s1, s2, line\_ends1, line\_ends2);}
\DoxyCodeLine{1127   TokenizingLineArrayCompareOutput output(isolate, line\_ends1, line\_ends2, s1,}
\DoxyCodeLine{1128                                           s2, diffs);}
\DoxyCodeLine{1129 }
\DoxyCodeLine{1130   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_af410d88d1247c5e572efad8db1ae92e0}{NarrowDownInput}}(\&input, \&output);}
\DoxyCodeLine{1131 }
\DoxyCodeLine{1132   \mbox{\hyperlink{classv8_1_1internal_1_1Comparator_a89c50d6f12242f6aed16be0efa54e9e6}{Comparator::CalculateDifference}}(\&input, \&output);}
\DoxyCodeLine{1133 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Comparator\+::\+Calculate\+Difference(), and v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Narrow\+Down\+Input().



Referenced by Patch\+Script().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1LiveEdit_a51d4d4ceadbcc0961829681cb99439ab}\label{classv8_1_1internal_1_1LiveEdit_a51d4d4ceadbcc0961829681cb99439ab}} 
\index{v8::internal::LiveEdit@{v8::internal::LiveEdit}!PatchScript@{PatchScript}}
\index{PatchScript@{PatchScript}!v8::internal::LiveEdit@{v8::internal::LiveEdit}}
\doxysubsubsection{\texorpdfstring{PatchScript()}{PatchScript()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Live\+Edit\+::\+Patch\+Script (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$}]{script,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{preview,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{allow\+\_\+top\+\_\+frame\+\_\+live\+\_\+editing,  }\item[{\mbox{\hyperlink{structv8_1_1debug_1_1LiveEditResult}{debug\+::\+Live\+Edit\+Result}} $\ast$}]{result }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 851 of file liveedit.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{854                                                         \{}
\DoxyCodeLine{855   std::vector<SourceChangeRange> diffs;}
\DoxyCodeLine{856   \mbox{\hyperlink{classv8_1_1internal_1_1LiveEdit_ae137d77566f827ef36c1a756565c26c5}{LiveEdit::CompareStrings}}(isolate,}
\DoxyCodeLine{857                            \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(Cast<String>(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>source()), isolate),}
\DoxyCodeLine{858                            new\_source, \&diffs);}
\DoxyCodeLine{859   \textcolor{keywordflow}{if} (diffs.empty()) \{}
\DoxyCodeLine{860     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>status = \mbox{\hyperlink{structv8_1_1debug_1_1LiveEditResult_a0c9329ad68bf15a8a449e87f21f63d5da844bdd94e284098a6c1feb292498da96}{debug::LiveEditResult::OK}};}
\DoxyCodeLine{861     \textcolor{keywordflow}{return};}
\DoxyCodeLine{862   \}}
\DoxyCodeLine{863 }
\DoxyCodeLine{864   ReusableUnoptimizedCompileState reusable\_state(isolate);}
\DoxyCodeLine{865 }
\DoxyCodeLine{866   UnoptimizedCompileState compile\_state;}
\DoxyCodeLine{867   UnoptimizedCompileFlags \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}} =}
\DoxyCodeLine{868       \mbox{\hyperlink{classv8_1_1internal_1_1UnoptimizedCompileFlags_ae2333723d92c70c9fac5f2b4526d69ce}{UnoptimizedCompileFlags::ForScriptCompile}}(isolate, *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{869   \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}.set\_is\_eager(\textcolor{keyword}{true});}
\DoxyCodeLine{870   \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}.set\_is\_reparse(\textcolor{keyword}{true});}
\DoxyCodeLine{871   ParseInfo parse\_info(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}, \&compile\_state, \&reusable\_state);}
\DoxyCodeLine{872   MaybeDirectHandle<ScopeInfo> outer\_scope\_info =}
\DoxyCodeLine{873       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_abf72212ec917fd222570f65f533e4e05}{DetermineOuterScopeInfo}}(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{874   std::vector<FunctionLiteral*> literals;}
\DoxyCodeLine{875   std::map<uint32\_t, std::vector<uint32\_t>> eval\_calls;}
\DoxyCodeLine{876   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a7edbd74df74afa81400029259a21b77b}{ParseScript}}(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, \&parse\_info, outer\_scope\_info, \textcolor{keyword}{false},}
\DoxyCodeLine{877                    \&literals, \&eval\_calls, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}))}
\DoxyCodeLine{878     \textcolor{keywordflow}{return};}
\DoxyCodeLine{879 }
\DoxyCodeLine{880   Handle<Script> new\_script =}
\DoxyCodeLine{881       isolate-\/>factory()-\/>CloneScript(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, new\_source);}
\DoxyCodeLine{882   UnoptimizedCompileState new\_compile\_state;}
\DoxyCodeLine{883   UnoptimizedCompileFlags new\_flags =}
\DoxyCodeLine{884       \mbox{\hyperlink{classv8_1_1internal_1_1UnoptimizedCompileFlags_ae2333723d92c70c9fac5f2b4526d69ce}{UnoptimizedCompileFlags::ForScriptCompile}}(isolate, *new\_script);}
\DoxyCodeLine{885   new\_flags.set\_is\_eager(\textcolor{keyword}{true});}
\DoxyCodeLine{886   ParseInfo new\_parse\_info(isolate, new\_flags, \&new\_compile\_state,}
\DoxyCodeLine{887                            \&reusable\_state);}
\DoxyCodeLine{888   std::vector<FunctionLiteral*> new\_literals;}
\DoxyCodeLine{889   std::map<uint32\_t, std::vector<uint32\_t>> new\_eval\_calls;}
\DoxyCodeLine{890   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a7edbd74df74afa81400029259a21b77b}{ParseScript}}(isolate, new\_script, \&new\_parse\_info, outer\_scope\_info, \textcolor{keyword}{true},}
\DoxyCodeLine{891                    \&new\_literals, \&new\_eval\_calls, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \{}
\DoxyCodeLine{892     \textcolor{keywordflow}{return};}
\DoxyCodeLine{893   \}}
\DoxyCodeLine{894 }
\DoxyCodeLine{895   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a0eeb11a5915ae4cffdf30136eec97725}{FunctionLiteralChanges}} literal\_changes;}
\DoxyCodeLine{896   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a1d331cdcae6ada65fbed867e65e31b19}{CalculateFunctionLiteralChanges}}(literals, diffs, \&literal\_changes);}
\DoxyCodeLine{897 }
\DoxyCodeLine{898   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a0b2c5e6e72c45b27929d8347d15d1195}{LiteralMap}} changed;}
\DoxyCodeLine{899   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a0b2c5e6e72c45b27929d8347d15d1195}{LiteralMap}} unchanged;}
\DoxyCodeLine{900   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a4ebc620b1d8f901220a723774f36362a}{MapLiterals}}(literal\_changes, new\_literals, \&unchanged, \&changed);}
\DoxyCodeLine{901 }
\DoxyCodeLine{902   FunctionDataMap function\_data\_map;}
\DoxyCodeLine{903   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& mapping : changed) \{}
\DoxyCodeLine{904     function\_data\_map.AddInterestingLiteral(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>id(), mapping.first);}
\DoxyCodeLine{905     function\_data\_map.AddInterestingLiteral(new\_script-\/>id(), mapping.second);}
\DoxyCodeLine{906   \}}
\DoxyCodeLine{907   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& mapping : unchanged) \{}
\DoxyCodeLine{908     function\_data\_map.AddInterestingLiteral(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>id(), mapping.first);}
\DoxyCodeLine{909   \}}
\DoxyCodeLine{910   function\_data\_map.Fill(isolate);}
\DoxyCodeLine{911 }
\DoxyCodeLine{912   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_a152905847cc799ff9d3b76812522a779}{CanPatchScript}}(changed, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, new\_script, function\_data\_map,}
\DoxyCodeLine{913                       allow\_top\_frame\_live\_editing, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \{}
\DoxyCodeLine{914     \textcolor{keywordflow}{return};}
\DoxyCodeLine{915   \}}
\DoxyCodeLine{916 }
\DoxyCodeLine{917   \textcolor{keywordflow}{if} (preview) \{}
\DoxyCodeLine{918     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>status = \mbox{\hyperlink{structv8_1_1debug_1_1LiveEditResult_a0c9329ad68bf15a8a449e87f21f63d5da844bdd94e284098a6c1feb292498da96}{debug::LiveEditResult::OK}};}
\DoxyCodeLine{919     \textcolor{keywordflow}{return};}
\DoxyCodeLine{920   \}}
\DoxyCodeLine{921 }
\DoxyCodeLine{922   \textcolor{comment}{// Patching a script means that the bytecode on the stack may no longer}}
\DoxyCodeLine{923   \textcolor{comment}{// correspond to the bytecode of the JSFunction for that frame. As a result}}
\DoxyCodeLine{924   \textcolor{comment}{// it is no longer safe to flush bytecode since we might flush the new}}
\DoxyCodeLine{925   \textcolor{comment}{// bytecode for a JSFunction that is on the stack with an old bytecode, which}}
\DoxyCodeLine{926   \textcolor{comment}{// breaks the invariant that any JSFunction active on the stack is compiled.}}
\DoxyCodeLine{927   isolate-\/>set\_disable\_bytecode\_flushing(\textcolor{keyword}{true});}
\DoxyCodeLine{928 }
\DoxyCodeLine{929   std::map<int, int> start\_position\_to\_unchanged\_id;}
\DoxyCodeLine{930   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& mapping : unchanged) \{}
\DoxyCodeLine{931     FunctionData* data = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{932     \textcolor{keywordflow}{if} (!function\_data\_map.Lookup(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, mapping.first, \&data)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{933     Handle<SharedFunctionInfo> sfi;}
\DoxyCodeLine{934     \textcolor{keywordflow}{if} (!data-\/>shared.ToHandle(\&sfi)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{935     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(sfi-\/>script(), *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{936 }
\DoxyCodeLine{937     isolate-\/>compilation\_cache()-\/>Remove(sfi);}
\DoxyCodeLine{938     isolate-\/>debug()-\/>DeoptimizeFunction(sfi);}
\DoxyCodeLine{939     \textcolor{keywordflow}{if} (std::optional<Tagged<DebugInfo>> di = sfi-\/>TryGetDebugInfo(isolate)) \{}
\DoxyCodeLine{940       DirectHandle<DebugInfo> debug\_info(di.value(), isolate);}
\DoxyCodeLine{941       isolate-\/>debug()-\/>RemoveBreakInfoAndMaybeFree(debug\_info);}
\DoxyCodeLine{942     \}}
\DoxyCodeLine{943     \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo_a3be913553e4b94b747bd0f898a7b02af}{SharedFunctionInfo::EnsureSourcePositionsAvailable}}(isolate, sfi);}
\DoxyCodeLine{944     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02liveedit_8cc_03_ad63dadc318b48179485ff8cc5c9567a4}{UpdatePositions}}(isolate, sfi, mapping.second, diffs);}
\DoxyCodeLine{945 }
\DoxyCodeLine{946     sfi-\/>set\_script(*new\_script, \mbox{\hyperlink{namespacev8_a13596ed4ca024abd4790ec46b62c2097}{kReleaseStore}});}
\DoxyCodeLine{947     std::vector<uint32\_t> source\_infos =}
\DoxyCodeLine{948         eval\_calls[sfi-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}})];}
\DoxyCodeLine{949     sfi-\/>set\_function\_literal\_id(mapping.second-\/>function\_literal\_id(),}
\DoxyCodeLine{950                                  \mbox{\hyperlink{namespacev8_a6f4ac914af065ca471d59c67f789296f}{kRelaxedStore}});}
\DoxyCodeLine{951     std::vector<uint32\_t> target\_infos =}
\DoxyCodeLine{952         new\_eval\_calls[sfi-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}})];}
\DoxyCodeLine{953     new\_script-\/>infos()-\/>set(mapping.second-\/>function\_literal\_id(),}
\DoxyCodeLine{954                              \mbox{\hyperlink{namespacev8_1_1internal_a96a98d1219c08bac1c5c91ba9dacd1d4}{MakeWeak}}(*sfi));}
\DoxyCodeLine{955     \textcolor{keywordflow}{if} (sfi-\/>HasBytecodeArray()) \{}
\DoxyCodeLine{956       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < source\_infos.size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{957         Tagged<ScopeInfo> scope\_info = Cast<ScopeInfo>(}
\DoxyCodeLine{958             \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>infos()-\/>get(source\_infos[\mbox{\hyperlink{namespacev8_1_1internal}{i}}]).GetHeapObjectAssumeWeak());}
\DoxyCodeLine{959         new\_script-\/>infos()-\/>set(target\_infos[\mbox{\hyperlink{namespacev8_1_1internal}{i}}], \mbox{\hyperlink{namespacev8_1_1internal_a96a98d1219c08bac1c5c91ba9dacd1d4}{MakeWeak}}(scope\_info));}
\DoxyCodeLine{960       \}}
\DoxyCodeLine{961     \}}
\DoxyCodeLine{962     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(sfi-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}}),}
\DoxyCodeLine{963               mapping.second-\/>function\_literal\_id());}
\DoxyCodeLine{964 }
\DoxyCodeLine{965     \textcolor{comment}{// Save the new start\_position -\/> id mapping, so that we can recover it when}}
\DoxyCodeLine{966     \textcolor{comment}{// iterating over changed functions' constant pools.}}
\DoxyCodeLine{967     start\_position\_to\_unchanged\_id[mapping.second-\/>start\_position()] =}
\DoxyCodeLine{968         mapping.second-\/>function\_literal\_id();}
\DoxyCodeLine{969 }
\DoxyCodeLine{970     \textcolor{keywordflow}{if} (sfi-\/>HasUncompiledDataWithPreparseData(isolate)) \{}
\DoxyCodeLine{971       sfi-\/>ClearPreparseData(isolate);}
\DoxyCodeLine{972     \}}
\DoxyCodeLine{973 }
\DoxyCodeLine{974     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& js\_function : data-\/>js\_functions) \{}
\DoxyCodeLine{975       js\_function-\/>set\_raw\_feedback\_cell(}
\DoxyCodeLine{976           *isolate-\/>factory()-\/>many\_closures\_cell());}
\DoxyCodeLine{977       \textcolor{keywordflow}{if} (!js\_function-\/>is\_compiled(isolate)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{978       IsCompiledScope is\_compiled\_scope(}
\DoxyCodeLine{979           js\_function-\/>shared()-\/>is\_compiled\_scope(isolate));}
\DoxyCodeLine{980       \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction_a32102665604d5ad5d469aa3b44071499}{JSFunction::EnsureFeedbackVector}}(isolate, js\_function,}
\DoxyCodeLine{981                                        \&is\_compiled\_scope);}
\DoxyCodeLine{982     \}}
\DoxyCodeLine{983 }
\DoxyCodeLine{984     \textcolor{keywordflow}{if} (!sfi-\/>HasBytecodeArray()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{985     Tagged<TrustedFixedArray> constants =}
\DoxyCodeLine{986         sfi-\/>GetBytecodeArray(isolate)-\/>constant\_pool();}
\DoxyCodeLine{987     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < constants-\/>length(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{988       \textcolor{keywordflow}{if} (!IsSharedFunctionInfo(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{989       data = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{990       \textcolor{keywordflow}{if} (!function\_data\_map.Lookup(Cast<SharedFunctionInfo>(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}})),}
\DoxyCodeLine{991                                     \&data)) \{}
\DoxyCodeLine{992         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{993       \}}
\DoxyCodeLine{994       \textcolor{keyword}{auto} change\_it = changed.find(data-\/>literal);}
\DoxyCodeLine{995       \textcolor{keywordflow}{if} (change\_it == changed.end()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{996       \textcolor{keywordflow}{if} (!function\_data\_map.Lookup(new\_script, change\_it-\/>second, \&data)) \{}
\DoxyCodeLine{997         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{998       \}}
\DoxyCodeLine{999       Handle<SharedFunctionInfo> new\_sfi;}
\DoxyCodeLine{1000       \textcolor{keywordflow}{if} (!data-\/>shared.ToHandle(\&new\_sfi)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1001       constants-\/>set(\mbox{\hyperlink{namespacev8_1_1internal}{i}}, *new\_sfi);}
\DoxyCodeLine{1002     \}}
\DoxyCodeLine{1003   \}}
\DoxyCodeLine{1004   isolate-\/>LocalsBlockListCacheRehash();}
\DoxyCodeLine{1005   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& mapping : changed) \{}
\DoxyCodeLine{1006     FunctionData* data = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{1007     \textcolor{keywordflow}{if} (!function\_data\_map.Lookup(new\_script, mapping.second, \&data)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1008     Handle<SharedFunctionInfo> new\_sfi;}
\DoxyCodeLine{1009     \textcolor{comment}{// In most cases the new FunctionLiteral should also have an SFI, but there}}
\DoxyCodeLine{1010     \textcolor{comment}{// are some exceptions. E.g the compiler doesn't create SFIs for}}
\DoxyCodeLine{1011     \textcolor{comment}{// inner functions that are never referenced.}}
\DoxyCodeLine{1012     \textcolor{keywordflow}{if} (!data-\/>shared.ToHandle(\&new\_sfi)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1013     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(new\_sfi-\/>script(), *new\_script);}
\DoxyCodeLine{1014 }
\DoxyCodeLine{1015     \textcolor{keywordflow}{if} (!function\_data\_map.Lookup(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, mapping.first, \&data)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1016     Handle<SharedFunctionInfo> sfi;}
\DoxyCodeLine{1017     \textcolor{keywordflow}{if} (!data-\/>shared.ToHandle(\&sfi)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1018 }
\DoxyCodeLine{1019     isolate-\/>debug()-\/>DeoptimizeFunction(sfi);}
\DoxyCodeLine{1020     isolate-\/>compilation\_cache()-\/>Remove(sfi);}
\DoxyCodeLine{1021     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& js\_function : data-\/>js\_functions) \{}
\DoxyCodeLine{1022       js\_function-\/>set\_raw\_feedback\_cell(}
\DoxyCodeLine{1023           *isolate-\/>factory()-\/>many\_closures\_cell());}
\DoxyCodeLine{1024 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{1025       \textcolor{keyword}{auto} \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(new\_sfi-\/>GetCode(isolate), isolate);}
\DoxyCodeLine{1026       JSFunction::AllocateDispatchHandle(}
\DoxyCodeLine{1027           js\_function, isolate,}
\DoxyCodeLine{1028           new\_sfi-\/>internal\_formal\_parameter\_count\_with\_receiver(), \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1029 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1030       js\_function-\/>set\_shared(*new\_sfi);}
\DoxyCodeLine{1031 }
\DoxyCodeLine{1032       \textcolor{keywordflow}{if} (!js\_function-\/>is\_compiled(isolate)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1033       IsCompiledScope is\_compiled\_scope(}
\DoxyCodeLine{1034           js\_function-\/>shared()-\/>is\_compiled\_scope(isolate));}
\DoxyCodeLine{1035       \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction_a32102665604d5ad5d469aa3b44071499}{JSFunction::EnsureFeedbackVector}}(isolate, js\_function,}
\DoxyCodeLine{1036                                        \&is\_compiled\_scope);}
\DoxyCodeLine{1037     \}}
\DoxyCodeLine{1038   \}}
\DoxyCodeLine{1039   SharedFunctionInfo::ScriptIterator it(isolate, *new\_script);}
\DoxyCodeLine{1040   \textcolor{keywordflow}{for} (Tagged<SharedFunctionInfo> sfi = it.Next(); !sfi.is\_null();}
\DoxyCodeLine{1041        sfi = it.Next()) \{}
\DoxyCodeLine{1042     \textcolor{keywordflow}{if} (!sfi-\/>HasBytecodeArray()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1043     Tagged<TrustedFixedArray> constants =}
\DoxyCodeLine{1044         sfi-\/>GetBytecodeArray(isolate)-\/>constant\_pool();}
\DoxyCodeLine{1045     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < constants-\/>length(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{1046       \textcolor{keywordflow}{if} (!IsSharedFunctionInfo(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1047       Tagged<SharedFunctionInfo> inner\_sfi =}
\DoxyCodeLine{1048           Cast<SharedFunctionInfo>(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}));}
\DoxyCodeLine{1049       \textcolor{comment}{// See if there is a mapping from this function's start position to an}}
\DoxyCodeLine{1050       \textcolor{comment}{// unchanged function's id.}}
\DoxyCodeLine{1051       \textcolor{keyword}{auto} unchanged\_it =}
\DoxyCodeLine{1052           start\_position\_to\_unchanged\_id.find(inner\_sfi-\/>StartPosition());}
\DoxyCodeLine{1053       \textcolor{keywordflow}{if} (unchanged\_it == start\_position\_to\_unchanged\_id.end()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1054 }
\DoxyCodeLine{1055       \textcolor{comment}{// Grab that function id from the new script's SFI list, which should have}}
\DoxyCodeLine{1056       \textcolor{comment}{// already been updated in in the unchanged pass.}}
\DoxyCodeLine{1057       Tagged<SharedFunctionInfo> old\_unchanged\_inner\_sfi =}
\DoxyCodeLine{1058           Cast<SharedFunctionInfo>(}
\DoxyCodeLine{1059               new\_script-\/>infos()-\/>get(unchanged\_it-\/>second).GetHeapObject());}
\DoxyCodeLine{1060       \textcolor{keywordflow}{if} (old\_unchanged\_inner\_sfi == inner\_sfi) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1061       \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(old\_unchanged\_inner\_sfi, inner\_sfi);}
\DoxyCodeLine{1062       \textcolor{comment}{// Now some sanity checks. Make sure that the unchanged SFI has already}}
\DoxyCodeLine{1063       \textcolor{comment}{// been processed and patched to be on the new script ...}}
\DoxyCodeLine{1064       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(old\_unchanged\_inner\_sfi-\/>script(), *new\_script);}
\DoxyCodeLine{1065       constants-\/>set(\mbox{\hyperlink{namespacev8_1_1internal}{i}}, old\_unchanged\_inner\_sfi);}
\DoxyCodeLine{1066     \}}
\DoxyCodeLine{1067   \}}
\DoxyCodeLine{1068 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{1069   \{}
\DoxyCodeLine{1070     \textcolor{comment}{// Check that all the functions in the new script are valid, that their}}
\DoxyCodeLine{1071     \textcolor{comment}{// function literals match what is expected, and that start positions are}}
\DoxyCodeLine{1072     \textcolor{comment}{// unique.}}
\DoxyCodeLine{1073     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1074 }
\DoxyCodeLine{1075     SharedFunctionInfo::ScriptIterator script\_it(isolate, *new\_script);}
\DoxyCodeLine{1076     std::set<int> start\_positions;}
\DoxyCodeLine{1077     \textcolor{keywordflow}{for} (Tagged<SharedFunctionInfo> sfi = script\_it.Next(); !sfi.is\_null();}
\DoxyCodeLine{1078          sfi = script\_it.Next()) \{}
\DoxyCodeLine{1079       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(sfi-\/>script(), *new\_script);}
\DoxyCodeLine{1080       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(sfi-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}}),}
\DoxyCodeLine{1081                 script\_it.CurrentIndex());}
\DoxyCodeLine{1082       \textcolor{comment}{// Don't check the start position of the top-\/level function, as it can}}
\DoxyCodeLine{1083       \textcolor{comment}{// overlap with a function in the script.}}
\DoxyCodeLine{1084       \textcolor{keywordflow}{if} (sfi-\/>is\_toplevel()) \{}
\DoxyCodeLine{1085         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(start\_positions.find(sfi-\/>StartPosition()),}
\DoxyCodeLine{1086                   start\_positions.end());}
\DoxyCodeLine{1087         start\_positions.insert(sfi-\/>StartPosition());}
\DoxyCodeLine{1088       \}}
\DoxyCodeLine{1089 }
\DoxyCodeLine{1090       \textcolor{keywordflow}{if} (!sfi-\/>HasBytecodeArray()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1091       \textcolor{comment}{// Check that all the functions in this function's constant pool are also}}
\DoxyCodeLine{1092       \textcolor{comment}{// on the new script, and that their id matches their index in the new}}
\DoxyCodeLine{1093       \textcolor{comment}{// scripts function list.}}
\DoxyCodeLine{1094       Tagged<TrustedFixedArray> constants =}
\DoxyCodeLine{1095           sfi-\/>GetBytecodeArray(isolate)-\/>constant\_pool();}
\DoxyCodeLine{1096       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < constants-\/>length(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{1097         \textcolor{keywordflow}{if} (!IsSharedFunctionInfo(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}))) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1098         Tagged<SharedFunctionInfo> inner\_sfi =}
\DoxyCodeLine{1099             Cast<SharedFunctionInfo>(constants-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}));}
\DoxyCodeLine{1100         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(inner\_sfi-\/>script(), *new\_script);}
\DoxyCodeLine{1101         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(inner\_sfi,}
\DoxyCodeLine{1102                   new\_script-\/>infos()}
\DoxyCodeLine{1103                       -\/>get(inner\_sfi-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}}))}
\DoxyCodeLine{1104                       .GetHeapObject());}
\DoxyCodeLine{1105       \}}
\DoxyCodeLine{1106     \}}
\DoxyCodeLine{1107   \}}
\DoxyCodeLine{1108 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1109 }
\DoxyCodeLine{1110   \textcolor{keywordtype}{int} script\_id = \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>id();}
\DoxyCodeLine{1111   \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>set\_id(new\_script-\/>id());}
\DoxyCodeLine{1112   new\_script-\/>set\_id(script\_id);}
\DoxyCodeLine{1113   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>status = \mbox{\hyperlink{structv8_1_1debug_1_1LiveEditResult_a0c9329ad68bf15a8a449e87f21f63d5da844bdd94e284098a6c1feb292498da96}{debug::LiveEditResult::OK}};}
\DoxyCodeLine{1114   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script = ToApiHandle<v8::debug::Script>(new\_script);}
\DoxyCodeLine{1115 \}}

\end{DoxyCode}


References v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Calculate\+Function\+Literal\+Changes(), v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Can\+Patch\+Script(), v8\+::internal\+::\+Factory\+::\+Clone\+Script(), code, Compare\+Strings(), v8\+::internal\+::\+Isolate\+::compilation\+\_\+cache(), v8\+::internal\+::\+Shared\+Function\+Info\+::\+Script\+Iterator\+::\+Current\+Index(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NE, v8\+::internal\+::\+Isolate\+::debug(), v8\+::internal\+::\+Debug\+::\+Deoptimize\+Function(), v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Determine\+Outer\+Scope\+Info(), v8\+::internal\+::\+JSFunction\+::\+Ensure\+Feedback\+Vector(), v8\+::internal\+::\+Shared\+Function\+Info\+::\+Ensure\+Source\+Positions\+Available(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::flags, v8\+::internal\+::\+Unoptimized\+Compile\+Flags\+::\+For\+Script\+Compile(), v8\+::internal\+::handle(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::k\+Relaxed\+Load, v8\+::k\+Relaxed\+Store, v8\+::k\+Release\+Store, v8\+::internal\+::\+Isolate\+::\+Locals\+Block\+List\+Cache\+Rehash(), v8\+::internal\+::\+Make\+Weak(), v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Map\+Literals(), v8\+::internal\+::\+Shared\+Function\+Info\+::\+Script\+Iterator\+::\+Next(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::debug\+::\+Live\+Edit\+Result\+::\+OK, v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Parse\+Script(), v8\+::internal\+::\+Compilation\+Cache\+::\+Remove(), v8\+::internal\+::\+Debug\+::\+Remove\+Break\+Info\+And\+Maybe\+Free(), v8\+::base\+::internal\+::result, v8\+::internal\+::script, and v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Update\+Positions().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), and v8\+::internal\+::\+Debug\+::\+Set\+Script\+Source().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1LiveEdit_a51d4d4ceadbcc0961829681cb99439ab_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1LiveEdit_a51d4d4ceadbcc0961829681cb99439ab_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1LiveEdit_ac8240273701e02c17dac0152d6f327d9}\label{classv8_1_1internal_1_1LiveEdit_ac8240273701e02c17dac0152d6f327d9}} 
\index{v8::internal::LiveEdit@{v8::internal::LiveEdit}!TranslatePosition@{TranslatePosition}}
\index{TranslatePosition@{TranslatePosition}!v8::internal::LiveEdit@{v8::internal::LiveEdit}}
\doxysubsubsection{\texorpdfstring{TranslatePosition()}{TranslatePosition()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Live\+Edit\+::\+Translate\+Position (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{structv8_1_1internal_1_1SourceChangeRange}{Source\+Change\+Range}} $>$ \&}]{changed,  }\item[{\mbox{\hyperlink{classint}{int}}}]{position }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1135 of file liveedit.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1136                                               \{}
\DoxyCodeLine{1137   \textcolor{keyword}{auto} it = std::lower\_bound(diffs.begin(), diffs.end(), position,}
\DoxyCodeLine{1138                              [](\textcolor{keyword}{const} SourceChangeRange\& change, \textcolor{keywordtype}{int} position) \{}
\DoxyCodeLine{1139                                return change.end\_position < position;}
\DoxyCodeLine{1140                              \});}
\DoxyCodeLine{1141   \textcolor{keywordflow}{if} (it != diffs.end() \&\& position == it-\/>end\_position) \{}
\DoxyCodeLine{1142     \textcolor{keywordflow}{return} it-\/>new\_end\_position;}
\DoxyCodeLine{1143   \}}
\DoxyCodeLine{1144   \textcolor{keywordflow}{if} (it == diffs.begin()) \textcolor{keywordflow}{return} position;}
\DoxyCodeLine{1145   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(it == diffs.end() || position <= it-\/>start\_position);}
\DoxyCodeLine{1146   it = std::prev(it);}
\DoxyCodeLine{1147   \textcolor{keywordflow}{return} position + (it-\/>new\_end\_position -\/ it-\/>end\_position);}
\DoxyCodeLine{1148 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK().



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{liveedit.\+cc\}\+::\+Translate\+Source\+Position\+Table().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1LiveEdit_ac8240273701e02c17dac0152d6f327d9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1LiveEdit_ac8240273701e02c17dac0152d6f327d9_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/debug/\mbox{\hyperlink{liveedit_8h}{liveedit.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/debug/\mbox{\hyperlink{liveedit_8cc}{liveedit.\+cc}}\end{DoxyCompactItemize}
