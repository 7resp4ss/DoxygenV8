\hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data}{}\doxysection{v8\+::internal\+::wasm\+::Inlining\+Tree\+::Data Struct Reference}
\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data}\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}


Collaboration diagram for v8\+::internal\+::wasm\+::Inlining\+Tree\+::Data\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aee3cf821f218a1e9b8e12b815eb15afd}{Data}} (\mbox{\hyperlink{classv8_1_1internal_1_1Zone}{Zone}} $\ast$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}{zone}}, const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $\ast$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}{module}}, uint32\+\_\+t \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}{topmost\+\_\+caller\+\_\+index}})
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Zone}{Zone}} $\ast$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}{zone}}
\item 
const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $\ast$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}{module}}
\item 
double \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aaf85c362038591c16b9760c5f15796bd}{max\+\_\+growth\+\_\+factor}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_a0d99b1fb2c488a75bca1a4deb9561287}{budget\+\_\+cap}}
\item 
uint32\+\_\+t \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}{topmost\+\_\+caller\+\_\+index}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 127 of file inlining-\/tree.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aee3cf821f218a1e9b8e12b815eb15afd}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aee3cf821f218a1e9b8e12b815eb15afd}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!Data@{Data}}
\index{Data@{Data}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{Data()}{Data()}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Zone}{Zone}} $\ast$}]{zone,  }\item[{const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $\ast$}]{module,  }\item[{uint32\+\_\+t}]{topmost\+\_\+caller\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 128 of file inlining-\/tree.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{129         : \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}{zone}}(\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}{zone}}),}
\DoxyCodeLine{130           \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}{module}}(\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}{module}}),}
\DoxyCodeLine{131           \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}{topmost\_caller\_index}}(\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}{topmost\_caller\_index}}) \{}
\DoxyCodeLine{132       \textcolor{keywordtype}{double} scaled = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1InliningTree_a0346985e830529cb63dc06a9ed72b8f9}{BudgetScaleFactor}}(\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}{module}});}
\DoxyCodeLine{133       \textcolor{comment}{// We found experimentally that we need to allow a larger growth factor}}
\DoxyCodeLine{134       \textcolor{comment}{// for Turboshaft to achieve similar inlining decisions as in Turbofan;}}
\DoxyCodeLine{135       \textcolor{comment}{// presumably because some functions that have a small wire size of their}}
\DoxyCodeLine{136       \textcolor{comment}{// own still need to be allowed to inline some callees.}}
\DoxyCodeLine{137       \textcolor{comment}{// TODO(jkummerow): When TF is gone, remove this adjustment by folding}}
\DoxyCodeLine{138       \textcolor{comment}{// it into the flag's default value.}}
\DoxyCodeLine{139       constexpr \textcolor{keywordtype}{int} kTurboshaftAdjustment = 2;}
\DoxyCodeLine{140       \textcolor{keywordtype}{int} high\_growth = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_inlining\_factor) +}
\DoxyCodeLine{141                         kTurboshaftAdjustment;}
\DoxyCodeLine{142       \textcolor{comment}{// A value of 1 would be equivalent to disabling inlining entirely.}}
\DoxyCodeLine{143       constexpr \textcolor{keywordtype}{int} kLowestUsefulValue = 2;}
\DoxyCodeLine{144       \textcolor{keywordtype}{int} low\_growth = std::max(kLowestUsefulValue, high\_growth -\/ 3);}
\DoxyCodeLine{145       \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aaf85c362038591c16b9760c5f15796bd}{max\_growth\_factor}} = low\_growth * (1 -\/ scaled) + high\_growth * scaled;}
\DoxyCodeLine{146       \textcolor{comment}{// The \{wasm\_inlining\_budget\} value has been tuned for Turbofan node}}
\DoxyCodeLine{147       \textcolor{comment}{// counts. Turboshaft looks at wire bytes instead, and on average there}}
\DoxyCodeLine{148       \textcolor{comment}{// are about 0.74 TF nodes per wire byte, so we apply a small factor to}}
\DoxyCodeLine{149       \textcolor{comment}{// account for the difference, so we get similar inlining decisions in}}
\DoxyCodeLine{150       \textcolor{comment}{// both compilers.}}
\DoxyCodeLine{151       \textcolor{comment}{// TODO(jkummerow): When TF is gone, remove this factor by folding it}}
\DoxyCodeLine{152       \textcolor{comment}{// into the flag's default value.}}
\DoxyCodeLine{153       constexpr \textcolor{keywordtype}{double} kTurboshaftCorrectionFactor = 1.4;}
\DoxyCodeLine{154       \textcolor{keywordtype}{double} high\_cap =}
\DoxyCodeLine{155           \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_inlining\_budget * kTurboshaftCorrectionFactor;}
\DoxyCodeLine{156       \textcolor{keywordtype}{double} low\_cap = high\_cap / 10;}
\DoxyCodeLine{157       \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_a0d99b1fb2c488a75bca1a4deb9561287}{budget\_cap}} = low\_cap * (1 -\/ scaled) + high\_cap * scaled;}
\DoxyCodeLine{158     \}}

\end{DoxyCode}


References budget\+\_\+cap, v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Budget\+Scale\+Factor(), max\+\_\+growth\+\_\+factor, module, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aee3cf821f218a1e9b8e12b815eb15afd_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_a0d99b1fb2c488a75bca1a4deb9561287}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_a0d99b1fb2c488a75bca1a4deb9561287}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!budget\_cap@{budget\_cap}}
\index{budget\_cap@{budget\_cap}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{budget\_cap}{budget\_cap}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::budget\+\_\+cap}



Definition at line 163 of file inlining-\/tree.\+h.



Referenced by Data(), and v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Small\+Enough\+To\+Inline().

\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aaf85c362038591c16b9760c5f15796bd}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_aaf85c362038591c16b9760c5f15796bd}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!max\_growth\_factor@{max\_growth\_factor}}
\index{max\_growth\_factor@{max\_growth\_factor}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{max\_growth\_factor}{max\_growth\_factor}}
{\footnotesize\ttfamily double v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::max\+\_\+growth\+\_\+factor}



Definition at line 162 of file inlining-\/tree.\+h.



Referenced by Data(), and v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Small\+Enough\+To\+Inline().

\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ac27b3fd76dde59855ceba38df1b76931}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!module@{module}}
\index{module@{module}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{module}{module}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}}$\ast$ v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::module}



Definition at line 161 of file inlining-\/tree.\+h.



Referenced by Data(), v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Fully\+Expand(), and v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Inline().

\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ad70cfa5e4c892f8ef9af7733c8fb8a1e}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!topmost\_caller\_index@{topmost\_caller\_index}}
\index{topmost\_caller\_index@{topmost\_caller\_index}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{topmost\_caller\_index}{topmost\_caller\_index}}
{\footnotesize\ttfamily uint32\+\_\+t v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::topmost\+\_\+caller\+\_\+index}



Definition at line 164 of file inlining-\/tree.\+h.



Referenced by v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Fully\+Expand().

\mbox{\Hypertarget{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}\label{structv8_1_1internal_1_1wasm_1_1InliningTree_1_1Data_ab8aade47a4dad995d382443d892a54f5}} 
\index{v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}!zone@{zone}}
\index{zone@{zone}!v8::internal::wasm::InliningTree::Data@{v8::internal::wasm::InliningTree::Data}}
\doxysubsubsection{\texorpdfstring{zone}{zone}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Zone}{Zone}}$\ast$ v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Data\+::zone}



Definition at line 160 of file inlining-\/tree.\+h.



Referenced by v8\+::internal\+::wasm\+::\+Inlining\+Tree\+::\+Inline().



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{inlining-tree_8h}{inlining-\/tree.\+h}}\end{DoxyCompactItemize}
