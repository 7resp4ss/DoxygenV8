\hypertarget{classv8_1_1internal_1_1compiler_1_1JSArrayRef}{}\doxysection{v8\+::internal\+::compiler\+::JSArray\+Ref Class Reference}
\label{classv8_1_1internal_1_1compiler_1_1JSArrayRef}\index{v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}}


{\ttfamily \#include $<$heap-\/refs.\+h$>$}



Inheritance diagram for v8\+::internal\+::compiler\+::JSArray\+Ref\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::compiler\+::JSArray\+Ref\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_ac3ca492beb1ed3688e9047193656ecc4}{Indirect\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArray}{JSArray}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8c3c2370e4482535a2b9812a0df352b2}{object}} () const
\item 
\mbox{\hyperlink{classObjectRef}{Object\+Ref}} \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a2a68affe34633d0765593cfbfad31a86}{Get\+Boilerplate\+Length}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}) const
\item 
Optional\+Object\+Ref \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_af99fd84b84750689cedc336a385b4923}{Get\+Own\+Cow\+Element}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}, \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1FixedArrayBaseRef}{Fixed\+Array\+Base\+Ref}} elements\+\_\+ref, uint32\+\_\+t \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}) const
\item 
Optional\+Object\+Ref \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559}{length\+\_\+unsafe}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 1090 of file heap-\/refs.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a2a68affe34633d0765593cfbfad31a86}\label{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a2a68affe34633d0765593cfbfad31a86}} 
\index{v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}!GetBoilerplateLength@{GetBoilerplateLength}}
\index{GetBoilerplateLength@{GetBoilerplateLength}!v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}}
\doxysubsubsection{\texorpdfstring{GetBoilerplateLength()}{GetBoilerplateLength()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classObjectRef}{Object\+Ref}} v8\+::internal\+::compiler\+::\+JSArray\+Ref\+::\+Get\+Boilerplate\+Length (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$}]{broker }\end{DoxyParamCaption}) const}



Definition at line 2185 of file heap-\/refs.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2185                                                                      \{}
\DoxyCodeLine{2186   \textcolor{comment}{// Safe to read concurrently because:}}
\DoxyCodeLine{2187   \textcolor{comment}{// -\/ boilerplates are immutable after initialization.}}
\DoxyCodeLine{2188   \textcolor{comment}{// -\/ boilerplates are published into the feedback vector.}}
\DoxyCodeLine{2189   \textcolor{comment}{// These facts also mean we can expect a valid value.}}
\DoxyCodeLine{2190   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559}{length\_unsafe}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}).value();}
\DoxyCodeLine{2191 \}}

\end{DoxyCode}


References broker(), and length\+\_\+unsafe().



Referenced by v8\+::internal\+::compiler\+::\+JSCall\+Reducer\+::\+Reduce\+Call\+Or\+Construct\+With\+Array\+Like\+Or\+Spread(), and v8\+::internal\+::compiler\+::\+JSCreate\+Lowering\+::\+Try\+Allocate\+Fast\+Literal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a2a68affe34633d0765593cfbfad31a86_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a2a68affe34633d0765593cfbfad31a86_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1JSArrayRef_af99fd84b84750689cedc336a385b4923}\label{classv8_1_1internal_1_1compiler_1_1JSArrayRef_af99fd84b84750689cedc336a385b4923}} 
\index{v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}!GetOwnCowElement@{GetOwnCowElement}}
\index{GetOwnCowElement@{GetOwnCowElement}!v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}}
\doxysubsubsection{\texorpdfstring{GetOwnCowElement()}{GetOwnCowElement()}}
{\footnotesize\ttfamily Optional\+Object\+Ref v8\+::internal\+::compiler\+::\+JSArray\+Ref\+::\+Get\+Own\+Cow\+Element (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$}]{broker,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1FixedArrayBaseRef}{Fixed\+Array\+Base\+Ref}}}]{elements\+\_\+ref,  }\item[{uint32\+\_\+t}]{index }\end{DoxyParamCaption}) const}



Definition at line 2197 of file heap-\/refs.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2199                                                                      \{}
\DoxyCodeLine{2200   \textcolor{comment}{// Note: we'd like to check `elements\_ref == elements()` here, but due to}}
\DoxyCodeLine{2201   \textcolor{comment}{// concurrency this may not hold. The code below must be able to deal with}}
\DoxyCodeLine{2202   \textcolor{comment}{// concurrent `elements` modifications.}}
\DoxyCodeLine{2203 }
\DoxyCodeLine{2204   \textcolor{comment}{// Due to concurrency, the kind read here may not be consistent with}}
\DoxyCodeLine{2205   \textcolor{comment}{// `elements\_ref`. The caller has to guarantee consistency at runtime by}}
\DoxyCodeLine{2206   \textcolor{comment}{// other means (e.g. through a runtime equality check or a compilation}}
\DoxyCodeLine{2207   \textcolor{comment}{// dependency).}}
\DoxyCodeLine{2208   \mbox{\hyperlink{namespacev8_1_1internal_a5feb64a99571462d3380d03aa42c149c}{ElementsKind}} elements\_kind = \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1HeapObjectRef_ab0ec80be81dfe0214687a6a198e57ff8}{map}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}).\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MapRef_ac4750832a6d700fbdf62a17910e75be4}{elements\_kind}}();}
\DoxyCodeLine{2209 }
\DoxyCodeLine{2210   \textcolor{comment}{// We only inspect fixed COW arrays, which may only occur for fast}}
\DoxyCodeLine{2211   \textcolor{comment}{// smi/objects elements kinds.}}
\DoxyCodeLine{2212   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a3cea218a50fdb52a9ea35f5824ce31af}{IsSmiOrObjectElementsKind}}(elements\_kind)) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{2213   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_a51efcca04b756a89f53e907510b97863}{IsFastElementsKind}}(elements\_kind));}
\DoxyCodeLine{2214   \textcolor{keywordflow}{if} (!elements\_ref.map(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}).IsFixedCowArrayMap(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}})) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{2215 }
\DoxyCodeLine{2216   \textcolor{comment}{// As the name says, the `length` read here is unsafe and may not match}}
\DoxyCodeLine{2217   \textcolor{comment}{// `elements`. We rely on the invariant that any `length` change will}}
\DoxyCodeLine{2218   \textcolor{comment}{// also result in an `elements` change to make this safe. The `elements`}}
\DoxyCodeLine{2219   \textcolor{comment}{// consistency check in the caller thus also guards the value of `length`.}}
\DoxyCodeLine{2220   OptionalObjectRef length\_ref = \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559}{length\_unsafe}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}});}
\DoxyCodeLine{2221 }
\DoxyCodeLine{2222   \textcolor{keywordflow}{if} (!length\_ref.has\_value()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{2223 }
\DoxyCodeLine{2224   \textcolor{comment}{// Likewise we only deal with smi lengths.}}
\DoxyCodeLine{2225   \textcolor{keywordflow}{if} (!length\_ref-\/>IsSmi()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{2226 }
\DoxyCodeLine{2227   std::optional<Tagged<Object>> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{2228       \mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentLookupIterator_a4d8acaebdd8815623830fd5fd65a181c}{ConcurrentLookupIterator::TryGetOwnCowElement}}(}
\DoxyCodeLine{2229           \mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}-\/>isolate(), *elements\_ref.AsFixedArray().object(),}
\DoxyCodeLine{2230           elements\_kind, length\_ref-\/>AsSmi(), \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}});}
\DoxyCodeLine{2231   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.has\_value()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{2232 }
\DoxyCodeLine{2233   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a06120be0d60f6d6ae60da7997925dda5}{TryMakeRef}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.value());}
\DoxyCodeLine{2234 \}}

\end{DoxyCode}


References broker(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::compiler\+::\+Map\+Ref\+::elements\+\_\+kind(), v8\+::internal\+::index, v8\+::internal\+::\+Is\+Fast\+Elements\+Kind(), v8\+::internal\+::compiler\+::\+Map\+Ref\+::\+Is\+Fixed\+Cow\+Array\+Map(), v8\+::internal\+::\+Is\+Smi\+Or\+Object\+Elements\+Kind(), length\+\_\+unsafe(), v8\+::internal\+::compiler\+::\+Heap\+Object\+Ref\+::map(), v8\+::internal\+::compiler\+::\+Fixed\+Array\+Base\+Ref\+::object(), v8\+::base\+::internal\+::result, v8\+::internal\+::\+Concurrent\+Lookup\+Iterator\+::\+Try\+Get\+Own\+Cow\+Element(), and v8\+::internal\+::compiler\+::\+Try\+Make\+Ref().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef_af99fd84b84750689cedc336a385b4923_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559}\label{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559}} 
\index{v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}!length\_unsafe@{length\_unsafe}}
\index{length\_unsafe@{length\_unsafe}!v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}}
\doxysubsubsection{\texorpdfstring{length\_unsafe()}{length\_unsafe()}}
{\footnotesize\ttfamily Optional\+Object\+Ref v8\+::internal\+::compiler\+::\+JSArray\+Ref\+::length\+\_\+unsafe (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1JSHeapBroker}{JSHeap\+Broker}} $\ast$}]{broker }\end{DoxyParamCaption}) const}



Definition at line 2193 of file heap-\/refs.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2193                                                                       \{}
\DoxyCodeLine{2194   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a06120be0d60f6d6ae60da7997925dda5}{TryMakeRef}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}, \textcolor{keywordtype}{object}()-\/>\mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}(\mbox{\hyperlink{flag-definitions_8h_a1e4d6c2aea5c663dda8b8fca8b9199a5}{broker}}-\/>isolate(), \mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}}));}
\DoxyCodeLine{2195 \}}

\end{DoxyCode}


References broker(), v8\+::k\+Relaxed\+Load, v8\+::internal\+::length, and v8\+::internal\+::compiler\+::\+Try\+Make\+Ref().



Referenced by Get\+Boilerplate\+Length(), and Get\+Own\+Cow\+Element().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8fffcef0b3ebefbe3b253d6673321559_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8c3c2370e4482535a2b9812a0df352b2}\label{classv8_1_1internal_1_1compiler_1_1JSArrayRef_a8c3c2370e4482535a2b9812a0df352b2}} 
\index{v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}!object@{object}}
\index{object@{object}!v8::internal::compiler::JSArrayRef@{v8::internal::compiler::JSArrayRef}}
\doxysubsubsection{\texorpdfstring{object()}{object()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_ac3ca492beb1ed3688e9047193656ecc4}{Indirect\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1JSArray}{JSArray}}$>$ v8\+::internal\+::compiler\+::\+JSArray\+Ref\+::object (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/compiler/\mbox{\hyperlink{heap-refs_8h}{heap-\/refs.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/compiler/\mbox{\hyperlink{heap-refs_8cc}{heap-\/refs.\+cc}}\end{DoxyCompactItemize}
