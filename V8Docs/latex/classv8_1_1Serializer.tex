\hypertarget{classv8_1_1Serializer}{}\doxysection{v8\+::Serializer Class Reference}
\label{classv8_1_1Serializer}\index{v8::Serializer@{v8::Serializer}}


Inheritance diagram for v8\+::Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1Serializer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1Serializer_a4cf48df134b20c6f157f5aeaa8ee91ad}{Serializer}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1Serializer_ac7c1d6f1243fed40cddadf4223fb4768}{Serializer}} (const \mbox{\hyperlink{classv8_1_1Serializer}{Serializer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1Serializer}{Serializer}} \& \mbox{\hyperlink{classv8_1_1Serializer_accfdcb90312419da55d8dda5caf63188}{operator=}} (const \mbox{\hyperlink{classv8_1_1Serializer}{Serializer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1Serializer_a8d2e55c1cbd58dfc09dc66d6d36e1e25}{Write\+Value}} (\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$ context, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ value, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ transfer)
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1SerializationData}{Serialization\+Data}} $>$ \mbox{\hyperlink{classv8_1_1Serializer_a9d18106c1908b9d3f0242cf84a3e302c}{Release}} ()
\item 
void \mbox{\hyperlink{classv8_1_1Serializer_a6b2edc74a100b5cf6e3b5fb5f354459a}{Append\+Backing\+Stores\+To}} (std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1BackingStore}{Backing\+Store}} $>$$>$ $\ast$to)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1Serializer_a97707713e9bfe28e117bd15d40e3afc6}{Throw\+Data\+Clone\+Error}} (\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$ message) override
\begin{DoxyCompactList}\small\item\em Handles the case where a Data\+Clone\+Error would be thrown in the structured clone spec. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1Serializer_a573f904a1db660126a98ecec16f142be}{Get\+Shared\+Array\+Buffer\+Id}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$ shared\+\_\+array\+\_\+buffer) override
\begin{DoxyCompactList}\small\item\em Called when the \mbox{\hyperlink{classv8_1_1ValueSerializer}{Value\+Serializer}} is going to serialize a \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1Serializer_ad80848a9dfe7dbed01db35aec95e933a}{Get\+Wasm\+Module\+Transfer\+Id}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ module) override
\item 
void $\ast$ \mbox{\hyperlink{classv8_1_1Serializer_a0642983ee43067669e17c87411167a02}{Reallocate\+Buffer\+Memory}} (void $\ast$old\+\_\+buffer, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t $\ast$actual\+\_\+size) override
\begin{DoxyCompactList}\small\item\em Allocates memory for the buffer of at least the size provided. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1Serializer_af406a9e21fccfce3a5faed52182a69a6}{Free\+Buffer\+Memory}} (void $\ast$buffer) override
\begin{DoxyCompactList}\small\item\em Frees a buffer allocated with $\vert$\+Reallocate\+Buffer\+Memory$\vert$. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classv8_1_1Serializer_a54d5467f7d1e9b35ec95f36f7f88b2b9}{Adopt\+Shared\+Value\+Conveyor}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1SharedValueConveyor}{Shared\+Value\+Conveyor}} \&\&conveyor) override
\begin{DoxyCompactList}\small\item\em Called when the first shared value is serialized. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1Serializer_a8ed438d3dec9648290cb412993644461}{Prepare\+Transfer}} (\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$ context, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ transfer)
\item 
\mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1Serializer_a16f0dd0bb1c02d6200f35f9f5b27fe62}{Finalize\+Transfer}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$ \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1ValueSerializer}{Value\+Serializer}} \mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\+\_\+}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1SerializationData}{Serialization\+Data}} $>$ \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1Global}{Global}}$<$ \mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}} $>$ $>$ \mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\+\_\+buffers\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1Global}{Global}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$ $>$ \mbox{\hyperlink{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}{shared\+\_\+array\+\_\+buffers\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1Global}{Global}}$<$ \mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ $>$ \mbox{\hyperlink{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}{wasm\+\_\+modules\+\_\+}}
\item 
std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1BackingStore}{v8\+::\+Backing\+Store}} $>$ $>$ \mbox{\hyperlink{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}{backing\+\_\+stores\+\_\+}}
\item 
size\+\_\+t \mbox{\hyperlink{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}{current\+\_\+memory\+\_\+usage\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 6332 of file d8.\+cc.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1Serializer_a4cf48df134b20c6f157f5aeaa8ee91ad}\label{classv8_1_1Serializer_a4cf48df134b20c6f157f5aeaa8ee91ad}} 
\index{v8::Serializer@{v8::Serializer}!Serializer@{Serializer}}
\index{Serializer@{Serializer}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{Serializer()}{Serializer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::\+Serializer\+::\+Serializer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line 6334 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6335       : \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}(isolate),}
\DoxyCodeLine{6336         \mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\_}}(isolate, \textcolor{keyword}{this}),}
\DoxyCodeLine{6337         \mbox{\hyperlink{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}{current\_memory\_usage\_}}(0) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1Serializer_ac7c1d6f1243fed40cddadf4223fb4768}\label{classv8_1_1Serializer_ac7c1d6f1243fed40cddadf4223fb4768}} 
\index{v8::Serializer@{v8::Serializer}!Serializer@{Serializer}}
\index{Serializer@{Serializer}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{Serializer()}{Serializer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::\+Serializer\+::\+Serializer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1Serializer}{Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1Serializer_a54d5467f7d1e9b35ec95f36f7f88b2b9}\label{classv8_1_1Serializer_a54d5467f7d1e9b35ec95f36f7f88b2b9}} 
\index{v8::Serializer@{v8::Serializer}!AdoptSharedValueConveyor@{AdoptSharedValueConveyor}}
\index{AdoptSharedValueConveyor@{AdoptSharedValueConveyor}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{AdoptSharedValueConveyor()}{AdoptSharedValueConveyor()}}
{\footnotesize\ttfamily bool v8\+::\+Serializer\+::\+Adopt\+Shared\+Value\+Conveyor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1SharedValueConveyor}{Shared\+Value\+Conveyor}} \&\&}]{conveyor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Called when the first shared value is serialized. 

All subsequent shared values will use the same conveyor.

The embedder must ensure the lifetime of the conveyor matches the lifetime of the serialized data.

If the embedder supports serializing shared values, this method should return true. Otherwise the embedder should throw an exception and return false.

This method is called at most once per serializer. 

Reimplemented from \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a53dc397f9c3662360a6d11c6fea8cf21}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6428 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6429                                                                          \{}
\DoxyCodeLine{6430     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>shared\_value\_conveyor\_.emplace(std::move(conveyor));}
\DoxyCodeLine{6431     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{6432   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1Serializer_a6b2edc74a100b5cf6e3b5fb5f354459a}\label{classv8_1_1Serializer_a6b2edc74a100b5cf6e3b5fb5f354459a}} 
\index{v8::Serializer@{v8::Serializer}!AppendBackingStoresTo@{AppendBackingStoresTo}}
\index{AppendBackingStoresTo@{AppendBackingStoresTo}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{AppendBackingStoresTo()}{AppendBackingStoresTo()}}
{\footnotesize\ttfamily void v8\+::\+Serializer\+::\+Append\+Backing\+Stores\+To (\begin{DoxyParamCaption}\item[{std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1BackingStore}{Backing\+Store}} $>$$>$ $\ast$}]{to }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 6369 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6369                                                                          \{}
\DoxyCodeLine{6370     to-\/>insert(to-\/>end(), std::make\_move\_iterator(\mbox{\hyperlink{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}{backing\_stores\_}}.begin()),}
\DoxyCodeLine{6371                std::make\_move\_iterator(\mbox{\hyperlink{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}{backing\_stores\_}}.end()));}
\DoxyCodeLine{6372     \mbox{\hyperlink{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}{backing\_stores\_}}.clear();}
\DoxyCodeLine{6373   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1Serializer_a16f0dd0bb1c02d6200f35f9f5b27fe62}\label{classv8_1_1Serializer_a16f0dd0bb1c02d6200f35f9f5b27fe62}} 
\index{v8::Serializer@{v8::Serializer}!FinalizeTransfer@{FinalizeTransfer}}
\index{FinalizeTransfer@{FinalizeTransfer}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{FinalizeTransfer()}{FinalizeTransfer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$bool$>$ v8\+::\+Serializer\+::\+Finalize\+Transfer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 6473 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6473                                  \{}
\DoxyCodeLine{6474     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& global\_array\_buffer : \mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}) \{}
\DoxyCodeLine{6475       Local<ArrayBuffer> array\_buffer =}
\DoxyCodeLine{6476           \mbox{\hyperlink{classv8_1_1Local_a8362e3ec202364df44711f87da64215c}{Local<ArrayBuffer>::New}}(\mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}, global\_array\_buffer);}
\DoxyCodeLine{6477       \textcolor{keywordflow}{if} (!array\_buffer-\/>IsDetachable()) \{}
\DoxyCodeLine{6478         \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1Isolate_a630166a6a770ece436ebcea8f27e8da8}{ThrowError}}(}
\DoxyCodeLine{6479             \textcolor{stringliteral}{"{}ArrayBuffer is not detachable and could not be transferred"{}});}
\DoxyCodeLine{6480         \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6481       \}}
\DoxyCodeLine{6482 }
\DoxyCodeLine{6483       \textcolor{keyword}{auto} backing\_store = array\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{6484       \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>backing\_stores\_.push\_back(std::move(backing\_store));}
\DoxyCodeLine{6485       \textcolor{keywordflow}{if} (array\_buffer-\/>Detach(\mbox{\hyperlink{classv8_1_1Local}{v8::Local<v8::Value>}}()).IsNothing()) \{}
\DoxyCodeLine{6486         \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6487       \}}
\DoxyCodeLine{6488     \}}
\DoxyCodeLine{6489 }
\DoxyCodeLine{6490     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{6491   \}}

\end{DoxyCode}


References v8\+::\+Worker\+::isolate\+\_\+, v8\+::\+Just(), v8\+::\+Local$<$ T $>$\+::\+New(), and v8\+::\+Isolate\+::\+Throw\+Error().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a16f0dd0bb1c02d6200f35f9f5b27fe62_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_af406a9e21fccfce3a5faed52182a69a6}\label{classv8_1_1Serializer_af406a9e21fccfce3a5faed52182a69a6}} 
\index{v8::Serializer@{v8::Serializer}!FreeBufferMemory@{FreeBufferMemory}}
\index{FreeBufferMemory@{FreeBufferMemory}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{FreeBufferMemory()}{FreeBufferMemory()}}
{\footnotesize\ttfamily void v8\+::\+Serializer\+::\+Free\+Buffer\+Memory (\begin{DoxyParamCaption}\item[{void $\ast$}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Frees a buffer allocated with $\vert$\+Reallocate\+Buffer\+Memory$\vert$. 

The default implementation uses the stdlib\textquotesingle{}s {\ttfamily free()} function. 

Reimplemented from \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a9cd4ab0061b4a26b4b0d695d31992f82}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6426 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6426 \{ \mbox{\hyperlink{namespacev8_1_1base_af0b04fe9288a783d9de7a19dcfc55fa3}{base::Free}}(buffer); \}}

\end{DoxyCode}


References v8\+::base\+::\+Free().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{classv8_1_1Serializer_af406a9e21fccfce3a5faed52182a69a6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_a573f904a1db660126a98ecec16f142be}\label{classv8_1_1Serializer_a573f904a1db660126a98ecec16f142be}} 
\index{v8::Serializer@{v8::Serializer}!GetSharedArrayBufferId@{GetSharedArrayBufferId}}
\index{GetSharedArrayBufferId@{GetSharedArrayBufferId}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{GetSharedArrayBufferId()}{GetSharedArrayBufferId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$uint32\+\_\+t$>$ v8\+::\+Serializer\+::\+Get\+Shared\+Array\+Buffer\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$}]{shared\+\_\+array\+\_\+buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Called when the \mbox{\hyperlink{classv8_1_1ValueSerializer}{Value\+Serializer}} is going to serialize a \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} object. 

The embedder must return an ID for the object, using the same ID if this \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} has already been serialized in this buffer. When deserializing, this ID will be passed to Value\+Deserializer\+::\+Get\+Shared\+Array\+Buffer\+From\+Id as $\vert$clone\+\_\+id$\vert$.

If the object cannot be serialized, an exception should be thrown and \mbox{\hyperlink{namespacev8_ada000f8d5f1f65a26be3b35f8f398d28}{Nothing$<$uint32\+\_\+t$>$()}} returned. 

Reimplemented from \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ac12b5cfd7480c19f0b9af0b47d05a77e}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6381 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6382                                                                                \{}
\DoxyCodeLine{6383     \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(\mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}});}
\DoxyCodeLine{6384     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = 0; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} < \mbox{\hyperlink{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}{shared\_array\_buffers\_}}.size(); ++\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}) \{}
\DoxyCodeLine{6385       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}{shared\_array\_buffers\_}}[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}] == shared\_array\_buffer) \{}
\DoxyCodeLine{6386         \textcolor{keywordflow}{return} Just<uint32\_t>(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}));}
\DoxyCodeLine{6387       \}}
\DoxyCodeLine{6388     \}}
\DoxyCodeLine{6389 }
\DoxyCodeLine{6390     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = \mbox{\hyperlink{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}{shared\_array\_buffers\_}}.size();}
\DoxyCodeLine{6391     \mbox{\hyperlink{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}{shared\_array\_buffers\_}}.emplace\_back(\mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}, shared\_array\_buffer);}
\DoxyCodeLine{6392     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>sab\_backing\_stores\_.push\_back(}
\DoxyCodeLine{6393         shared\_array\_buffer-\/>GetBackingStore());}
\DoxyCodeLine{6394     \textcolor{keywordflow}{return} Just<uint32\_t>(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}));}
\DoxyCodeLine{6395   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::index, and v8\+::\+Worker\+::isolate\+\_\+.

\mbox{\Hypertarget{classv8_1_1Serializer_ad80848a9dfe7dbed01db35aec95e933a}\label{classv8_1_1Serializer_ad80848a9dfe7dbed01db35aec95e933a}} 
\index{v8::Serializer@{v8::Serializer}!GetWasmModuleTransferId@{GetWasmModuleTransferId}}
\index{GetWasmModuleTransferId@{GetWasmModuleTransferId}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{GetWasmModuleTransferId()}{GetWasmModuleTransferId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$uint32\+\_\+t$>$ v8\+::\+Serializer\+::\+Get\+Wasm\+Module\+Transfer\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$}]{module }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a225eea0a4f9f47a9209721aa7a7d724f}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6397 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6398                                                                  \{}
\DoxyCodeLine{6399     \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(\mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}});}
\DoxyCodeLine{6400     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = 0; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} < \mbox{\hyperlink{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}{wasm\_modules\_}}.size(); ++\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}) \{}
\DoxyCodeLine{6401       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}{wasm\_modules\_}}[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}] == module) \{}
\DoxyCodeLine{6402         \textcolor{keywordflow}{return} Just<uint32\_t>(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}));}
\DoxyCodeLine{6403       \}}
\DoxyCodeLine{6404     \}}
\DoxyCodeLine{6405 }
\DoxyCodeLine{6406     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = \mbox{\hyperlink{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}{wasm\_modules\_}}.size();}
\DoxyCodeLine{6407     \mbox{\hyperlink{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}{wasm\_modules\_}}.emplace\_back(\mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}, module);}
\DoxyCodeLine{6408     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>compiled\_wasm\_modules\_.push\_back(module-\/>GetCompiledModule());}
\DoxyCodeLine{6409     \textcolor{keywordflow}{return} Just<uint32\_t>(\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}));}
\DoxyCodeLine{6410   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::index, and v8\+::\+Worker\+::isolate\+\_\+.

\mbox{\Hypertarget{classv8_1_1Serializer_accfdcb90312419da55d8dda5caf63188}\label{classv8_1_1Serializer_accfdcb90312419da55d8dda5caf63188}} 
\index{v8::Serializer@{v8::Serializer}!operator=@{operator=}}
\index{operator=@{operator=}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Serializer}{Serializer}}\& v8\+::\+Serializer\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1Serializer}{Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1Serializer_a8ed438d3dec9648290cb412993644461}\label{classv8_1_1Serializer_a8ed438d3dec9648290cb412993644461}} 
\index{v8::Serializer@{v8::Serializer}!PrepareTransfer@{PrepareTransfer}}
\index{PrepareTransfer@{PrepareTransfer}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{PrepareTransfer()}{PrepareTransfer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$bool$>$ v8\+::\+Serializer\+::\+Prepare\+Transfer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$}]{context,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{transfer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 6435 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6435                                                                              \{}
\DoxyCodeLine{6436     \textcolor{keywordflow}{if} (transfer-\/>IsArray()) \{}
\DoxyCodeLine{6437       Local<Array> transfer\_array = transfer.As<Array>();}
\DoxyCodeLine{6438       uint32\_t \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = transfer\_array-\/>Length();}
\DoxyCodeLine{6439       \textcolor{keywordflow}{for} (uint32\_t \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{6440         Local<Value> element;}
\DoxyCodeLine{6441         \textcolor{keywordflow}{if} (transfer\_array-\/>Get(context, \mbox{\hyperlink{namespacev8_1_1internal}{i}}).ToLocal(\&element)) \{}
\DoxyCodeLine{6442           \textcolor{keywordflow}{if} (!element-\/>IsArrayBuffer()) \{}
\DoxyCodeLine{6443             \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1Isolate_a630166a6a770ece436ebcea8f27e8da8}{ThrowError}}(}
\DoxyCodeLine{6444                 \textcolor{stringliteral}{"{}Transfer array elements must be an ArrayBuffer"{}});}
\DoxyCodeLine{6445             \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6446           \}}
\DoxyCodeLine{6447 }
\DoxyCodeLine{6448           Local<ArrayBuffer> array\_buffer = element.As<ArrayBuffer>();}
\DoxyCodeLine{6449 }
\DoxyCodeLine{6450           \textcolor{keywordflow}{if} (std::find(\mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}.begin(), \mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}.end(),}
\DoxyCodeLine{6451                         array\_buffer) != \mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}.end()) \{}
\DoxyCodeLine{6452             \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1Isolate_a630166a6a770ece436ebcea8f27e8da8}{ThrowError}}(}
\DoxyCodeLine{6453                 \textcolor{stringliteral}{"{}ArrayBuffer occurs in the transfer array more than once"{}});}
\DoxyCodeLine{6454             \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6455           \}}
\DoxyCodeLine{6456 }
\DoxyCodeLine{6457           \mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\_}}.\mbox{\hyperlink{classv8_1_1ValueSerializer_a27007f2530a496275ccf7b8846f1d9c5}{TransferArrayBuffer}}(}
\DoxyCodeLine{6458               \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}.size()), array\_buffer);}
\DoxyCodeLine{6459           \mbox{\hyperlink{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}{array\_buffers\_}}.emplace\_back(\mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}, array\_buffer);}
\DoxyCodeLine{6460         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6461           \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6462         \}}
\DoxyCodeLine{6463       \}}
\DoxyCodeLine{6464       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{6465     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (transfer-\/>IsUndefined()) \{}
\DoxyCodeLine{6466       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{6467     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6468       \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1Isolate_a630166a6a770ece436ebcea8f27e8da8}{ThrowError}}(\textcolor{stringliteral}{"{}Transfer list must be an Array or undefined"{}});}
\DoxyCodeLine{6469       \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6470     \}}
\DoxyCodeLine{6471   \}}

\end{DoxyCode}


References v8\+::\+Local$<$ T $>$\+::\+As(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::\+Worker\+::isolate\+\_\+, v8\+::\+Just(), v8\+::internal\+::length, and v8\+::\+Isolate\+::\+Throw\+Error().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a8ed438d3dec9648290cb412993644461_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_a0642983ee43067669e17c87411167a02}\label{classv8_1_1Serializer_a0642983ee43067669e17c87411167a02}} 
\index{v8::Serializer@{v8::Serializer}!ReallocateBufferMemory@{ReallocateBufferMemory}}
\index{ReallocateBufferMemory@{ReallocateBufferMemory}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{ReallocateBufferMemory()}{ReallocateBufferMemory()}}
{\footnotesize\ttfamily void$\ast$ v8\+::\+Serializer\+::\+Reallocate\+Buffer\+Memory (\begin{DoxyParamCaption}\item[{void $\ast$}]{old\+\_\+buffer,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{actual\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Allocates memory for the buffer of at least the size provided. 

The actual size (which may be greater or equal) is written to $\vert$actual\+\_\+size$\vert$. If no buffer has been allocated yet, nullptr will be provided.

If the memory cannot be allocated, nullptr should be returned. $\vert$actual\+\_\+size$\vert$ will be ignored. It is assumed that $\vert$old\+\_\+buffer$\vert$ is still valid in this case and has not been modified.

The default implementation uses the stdlib\textquotesingle{}s {\ttfamily realloc()} function. 

Reimplemented from \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ade3ce68ebf5a3f3eba2f8f091177f155}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6412 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6413                                                              \{}
\DoxyCodeLine{6414     \textcolor{comment}{// Not accurate, because we don't take into account reallocated buffers,}}
\DoxyCodeLine{6415     \textcolor{comment}{// but this is fine for testing.}}
\DoxyCodeLine{6416     \mbox{\hyperlink{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}{current\_memory\_usage\_}} += \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}};}
\DoxyCodeLine{6417     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}{current\_memory\_usage\_}} > \mbox{\hyperlink{classv8_1_1Shell_aedbe06af26de0fe7e4618cac0ce45790}{Shell::options}}.max\_serializer\_memory) \{}
\DoxyCodeLine{6418       \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{6419     \}}
\DoxyCodeLine{6420 }
\DoxyCodeLine{6421     \textcolor{keywordtype}{void}* \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1base_a0829c9fb8df0e697a28abb1ab8fea523}{base::Realloc}}(old\_buffer, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{6422     *actual\_size = \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} ? \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} : 0;}
\DoxyCodeLine{6423     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{6424   \}}

\end{DoxyCode}


References v8\+::\+Shell\+::options, v8\+::base\+::\+Realloc(), v8\+::base\+::internal\+::result, and size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a0642983ee43067669e17c87411167a02_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_a9d18106c1908b9d3f0242cf84a3e302c}\label{classv8_1_1Serializer_a9d18106c1908b9d3f0242cf84a3e302c}} 
\index{v8::Serializer@{v8::Serializer}!Release@{Release}}
\index{Release@{Release}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{Release()}{Release()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1SerializationData}{Serialization\+Data}}$>$ v8\+::\+Serializer\+::\+Release (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 6367 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6367 \{ \textcolor{keywordflow}{return} std::move(\mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}); \}}

\end{DoxyCode}


Referenced by v8\+::\+Shell\+::\+Serialize\+Value().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a9d18106c1908b9d3f0242cf84a3e302c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_a97707713e9bfe28e117bd15d40e3afc6}\label{classv8_1_1Serializer_a97707713e9bfe28e117bd15d40e3afc6}} 
\index{v8::Serializer@{v8::Serializer}!ThrowDataCloneError@{ThrowDataCloneError}}
\index{ThrowDataCloneError@{ThrowDataCloneError}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{ThrowDataCloneError()}{ThrowDataCloneError()}}
{\footnotesize\ttfamily void v8\+::\+Serializer\+::\+Throw\+Data\+Clone\+Error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$}]{message }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Handles the case where a Data\+Clone\+Error would be thrown in the structured clone spec. 

Other \mbox{\hyperlink{classv8_1_1V8}{V8}} embedders may throw some other appropriate exception type. 

Implements \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a3681bfcd9a6c45f0b12bd7a8bdf34d85}{v8\+::\+Value\+Serializer\+::\+Delegate}}.



Definition at line 6377 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6377                                                            \{}
\DoxyCodeLine{6378     \mbox{\hyperlink{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1Isolate_ad2d4dd42267c374a37b93df403ef11ac}{ThrowException}}(\mbox{\hyperlink{classv8_1_1Exception_a67c28710ee5681066d04cfcd21544827}{Exception::Error}}(message));}
\DoxyCodeLine{6379   \}}

\end{DoxyCode}


References v8\+::\+Exception\+::\+Error(), v8\+::\+Worker\+::isolate\+\_\+, and v8\+::\+Isolate\+::\+Throw\+Exception().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a97707713e9bfe28e117bd15d40e3afc6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1Serializer_a8d2e55c1cbd58dfc09dc66d6d36e1e25}\label{classv8_1_1Serializer_a8d2e55c1cbd58dfc09dc66d6d36e1e25}} 
\index{v8::Serializer@{v8::Serializer}!WriteValue@{WriteValue}}
\index{WriteValue@{WriteValue}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{WriteValue()}{WriteValue()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$bool$>$ v8\+::\+Serializer\+::\+Write\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Context}{Context}} $>$}]{context,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{value,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{transfer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 6342 of file d8.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6343                                                 \{}
\DoxyCodeLine{6344     \textcolor{keywordtype}{bool} ok;}
\DoxyCodeLine{6345     \mbox{\hyperlink{d8_8cc_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}});}
\DoxyCodeLine{6346     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}.reset(\textcolor{keyword}{new} SerializationData);}
\DoxyCodeLine{6347     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1Serializer_a8ed438d3dec9648290cb412993644461}{PrepareTransfer}}(context, transfer).To(\&ok)) \{}
\DoxyCodeLine{6348       \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6349     \}}
\DoxyCodeLine{6350     \mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\_}}.\mbox{\hyperlink{classv8_1_1ValueSerializer_ac0bdf1a7731ee4e93823dabdfa8c8661}{WriteHeader}}();}
\DoxyCodeLine{6351 }
\DoxyCodeLine{6352     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\_}}.\mbox{\hyperlink{classv8_1_1ValueSerializer_abaaf71649f106af23c1c43f12e6a8394}{WriteValue}}(context, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}).To(\&ok)) \{}
\DoxyCodeLine{6353       \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}.reset();}
\DoxyCodeLine{6354       \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6355     \}}
\DoxyCodeLine{6356 }
\DoxyCodeLine{6357     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1Serializer_a16f0dd0bb1c02d6200f35f9f5b27fe62}{FinalizeTransfer}}().To(\&ok)) \{}
\DoxyCodeLine{6358       \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{6359     \}}
\DoxyCodeLine{6360 }
\DoxyCodeLine{6361     std::pair<uint8\_t*, size\_t> pair = \mbox{\hyperlink{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}{serializer\_}}.\mbox{\hyperlink{classv8_1_1ValueSerializer_a5e15aee37a321fd0dc3e92dd87e1334f}{Release}}();}
\DoxyCodeLine{6362     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>data\_.reset(pair.first);}
\DoxyCodeLine{6363     \mbox{\hyperlink{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}{data\_}}-\/>size\_ = pair.second;}
\DoxyCodeLine{6364     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{6365   \}}

\end{DoxyCode}


References DCHECK, v8\+::\+Just(), and v8\+::internal\+::value.



Referenced by v8\+::\+Shell\+::\+Serialize\+Value().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{classv8_1_1Serializer_a8d2e55c1cbd58dfc09dc66d6d36e1e25_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1Serializer_a8d2e55c1cbd58dfc09dc66d6d36e1e25_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}\label{classv8_1_1Serializer_aae4c79f2f6579c42c9230b986c78b826}} 
\index{v8::Serializer@{v8::Serializer}!array\_buffers\_@{array\_buffers\_}}
\index{array\_buffers\_@{array\_buffers\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{array\_buffers\_}{array\_buffers\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1Global}{Global}}$<$\mbox{\hyperlink{classv8_1_1ArrayBuffer}{Array\+Buffer}}$>$ $>$ v8\+::\+Serializer\+::array\+\_\+buffers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6497 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}\label{classv8_1_1Serializer_a0d82e134ed7673c0580481959d23da44}} 
\index{v8::Serializer@{v8::Serializer}!backing\_stores\_@{backing\_stores\_}}
\index{backing\_stores\_@{backing\_stores\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{backing\_stores\_}{backing\_stores\_}}
{\footnotesize\ttfamily std\+::vector$<$std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1BackingStore}{v8\+::\+Backing\+Store}}$>$ $>$ v8\+::\+Serializer\+::backing\+\_\+stores\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6500 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}\label{classv8_1_1Serializer_afd62a6e0c905a70818c45e2c3fc7e237}} 
\index{v8::Serializer@{v8::Serializer}!current\_memory\_usage\_@{current\_memory\_usage\_}}
\index{current\_memory\_usage\_@{current\_memory\_usage\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{current\_memory\_usage\_}{current\_memory\_usage\_}}
{\footnotesize\ttfamily size\+\_\+t v8\+::\+Serializer\+::current\+\_\+memory\+\_\+usage\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6501 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}\label{classv8_1_1Serializer_a8c0fc9453c101ae9166fa06e20572e30}} 
\index{v8::Serializer@{v8::Serializer}!data\_@{data\_}}
\index{data\_@{data\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{data\_}{data\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1SerializationData}{Serialization\+Data}}$>$ v8\+::\+Serializer\+::data\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6496 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}\label{classv8_1_1Serializer_a4f521cfb3eebc1c97dfdd978533e87f4}} 
\index{v8::Serializer@{v8::Serializer}!isolate\_@{isolate\_}}
\index{isolate\_@{isolate\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{isolate\_}{isolate\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Isolate}{Isolate}}$\ast$ v8\+::\+Serializer\+::isolate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6494 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}\label{classv8_1_1Serializer_af1a3b0dd864c21b9f33c10430aa1d91a}} 
\index{v8::Serializer@{v8::Serializer}!serializer\_@{serializer\_}}
\index{serializer\_@{serializer\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{serializer\_}{serializer\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1ValueSerializer}{Value\+Serializer}} v8\+::\+Serializer\+::serializer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6495 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}\label{classv8_1_1Serializer_a0d6bb4ff18c17151dbd0243da229e179}} 
\index{v8::Serializer@{v8::Serializer}!shared\_array\_buffers\_@{shared\_array\_buffers\_}}
\index{shared\_array\_buffers\_@{shared\_array\_buffers\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{shared\_array\_buffers\_}{shared\_array\_buffers\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1Global}{Global}}$<$\mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}}$>$ $>$ v8\+::\+Serializer\+::shared\+\_\+array\+\_\+buffers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6498 of file d8.\+cc.

\mbox{\Hypertarget{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}\label{classv8_1_1Serializer_a2affdb569edaf5ff2acd52041cc0c23b}} 
\index{v8::Serializer@{v8::Serializer}!wasm\_modules\_@{wasm\_modules\_}}
\index{wasm\_modules\_@{wasm\_modules\_}!v8::Serializer@{v8::Serializer}}
\doxysubsubsection{\texorpdfstring{wasm\_modules\_}{wasm\_modules\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1Global}{Global}}$<$\mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}}$>$ $>$ v8\+::\+Serializer\+::wasm\+\_\+modules\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6499 of file d8.\+cc.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/d8/\mbox{\hyperlink{d8_8cc}{d8.\+cc}}\end{DoxyCompactItemize}
