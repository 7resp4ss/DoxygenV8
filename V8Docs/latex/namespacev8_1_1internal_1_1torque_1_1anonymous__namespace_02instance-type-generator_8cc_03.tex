\hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03}{}\doxysection{v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03}\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1CompareUnconstrainedTypes}{Compare\+Unconstrained\+Types}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0}{Build\+Instance\+Type\+Tree}} ()
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5}{Propagate\+Instance\+Type\+Constraints}} (\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$root)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b}{Select\+Own\+Values}} (\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$root, \mbox{\hyperlink{classint}{int}} start\+\_\+value)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_aa878c6e87cc5f56f76f06fe58af1c327}{Solve\+Instance\+Type\+Constraints}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$ root, \mbox{\hyperlink{classint}{int}} start\+\_\+value, std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$$>$ $\ast$destination)
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{Solve\+Instance\+Type\+Constraints}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$ root)
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ad5bac85a1da6d65c8c84f21f164257bd}{Assign\+Instance\+Types}} ()
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a}{Print\+Instance\+Types}} (\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$root, std\+::ostream \&definitions, std\+::ostream \&values, std\+::ostream \&fully\+\_\+defined\+\_\+single\+\_\+instance\+\_\+types, std\+::ostream \&fully\+\_\+defined\+\_\+multiple\+\_\+instance\+\_\+types, std\+::ostream \&only\+\_\+declared\+\_\+single\+\_\+instance\+\_\+types, std\+::ostream \&only\+\_\+declared\+\_\+multiple\+\_\+instance\+\_\+types, std\+::ostream \&fully\+\_\+defined\+\_\+range\+\_\+instance\+\_\+types, std\+::ostream \&only\+\_\+declared\+\_\+range\+\_\+instance\+\_\+types, const std\+::string \&indent)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ad5bac85a1da6d65c8c84f21f164257bd}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ad5bac85a1da6d65c8c84f21f164257bd}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!AssignInstanceTypes@{AssignInstanceTypes}}
\index{AssignInstanceTypes@{AssignInstanceTypes}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AssignInstanceTypes()}{AssignInstanceTypes()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}}$>$ v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Assign\+Instance\+Types (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 276 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{276                                                       \{}
\DoxyCodeLine{277   std::unique\_ptr<InstanceTypeTree> root = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0}{BuildInstanceTypeTree}}();}
\DoxyCodeLine{278   \textcolor{keywordflow}{if} (root != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{279     \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5}{PropagateInstanceTypeConstraints}}(root.get());}
\DoxyCodeLine{280     root = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(root));}
\DoxyCodeLine{281   \}}
\DoxyCodeLine{282   \textcolor{keywordflow}{return} root;}
\DoxyCodeLine{283 \}}

\end{DoxyCode}


References Build\+Instance\+Type\+Tree(), Propagate\+Instance\+Type\+Constraints(), and Solve\+Instance\+Type\+Constraints().



Referenced by v8\+::internal\+::torque\+::\+Implementation\+Visitor\+::\+Generate\+Instance\+Types().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ad5bac85a1da6d65c8c84f21f164257bd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ad5bac85a1da6d65c8c84f21f164257bd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!BuildInstanceTypeTree@{BuildInstanceTypeTree}}
\index{BuildInstanceTypeTree@{BuildInstanceTypeTree}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{BuildInstanceTypeTree()}{BuildInstanceTypeTree()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}}$>$ v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Build\+Instance\+Type\+Tree (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 35 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{35                                                         \{}
\DoxyCodeLine{36   \textcolor{comment}{// First, build InstanceTypeTree instances for every class but don't try to}}
\DoxyCodeLine{37   \textcolor{comment}{// attach them to their subclasses yet.}}
\DoxyCodeLine{38   std::unordered\_map<const ClassType*, InstanceTypeTree*> map\_by\_type;}
\DoxyCodeLine{39   std::vector<std::unique\_ptr<InstanceTypeTree>> unparented\_types;}
\DoxyCodeLine{40   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& p : GlobalContext::AllDeclarables()) \{}
\DoxyCodeLine{41     \textcolor{keywordflow}{if} (\textcolor{keyword}{const} TypeAlias* alias = TypeAlias::DynamicCast(p.get())) \{}
\DoxyCodeLine{42       \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-display-names_8cc_03_a169d0b07e82f46d628050c890a0dacbe}{Type}}* \mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}} = alias-\/>type();}
\DoxyCodeLine{43       \textcolor{keyword}{const} ClassType* class\_type = ClassType::DynamicCast(\mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}});}
\DoxyCodeLine{44       \textcolor{keywordflow}{if} (class\_type == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{45         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{46       \}}
\DoxyCodeLine{47       \textcolor{keyword}{auto}\& map\_slot = map\_by\_type[class\_type];}
\DoxyCodeLine{48       \textcolor{keywordflow}{if} (map\_slot != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{49         \textcolor{keywordflow}{continue};  \textcolor{comment}{// We already encountered this type.}}
\DoxyCodeLine{50       \}}
\DoxyCodeLine{51       std::unique\_ptr<InstanceTypeTree> type\_tree =}
\DoxyCodeLine{52           std::make\_unique<InstanceTypeTree>(class\_type);}
\DoxyCodeLine{53       map\_slot = type\_tree.get();}
\DoxyCodeLine{54       unparented\_types.push\_back(std::move(type\_tree));}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56   \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   \textcolor{comment}{// Second, assemble them all into a tree following the inheritance hierarchy.}}
\DoxyCodeLine{59   std::unique\_ptr<InstanceTypeTree> root;}
\DoxyCodeLine{60   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& type\_tree : unparented\_types) \{}
\DoxyCodeLine{61     \textcolor{keyword}{const} ClassType* parent = type\_tree-\/>type-\/>GetSuperClass();}
\DoxyCodeLine{62     \textcolor{keywordflow}{if} (parent == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{63       \textcolor{keywordflow}{if} (root != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{64         \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Expected only one root class type. Found: "{}}, root-\/>type-\/>name(),}
\DoxyCodeLine{65               \textcolor{stringliteral}{"{} and "{}}, type\_tree-\/>type-\/>name())}
\DoxyCodeLine{66             .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(type\_tree-\/>type-\/>GetPosition());}
\DoxyCodeLine{67       root = std::move(type\_tree);}
\DoxyCodeLine{68     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{69       map\_by\_type[parent]-\/>children.push\_back(std::move(type\_tree));}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71   \}}
\DoxyCodeLine{72   \textcolor{keywordflow}{return} root;}
\DoxyCodeLine{73 \}}

\end{DoxyCode}


References v8\+::internal\+::torque\+::\+Global\+Context\+::\+All\+Declarables(), v8\+::internal\+::torque\+::\+Error(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Super\+Class(), v8\+::internal\+::torque\+::\+Message\+Builder\+::\+Position(), and v8\+::internal\+::tracing\+::type.



Referenced by Assign\+Instance\+Types().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a9b9f7f076357ba9bccdd97c95d3a2fb0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!PrintInstanceTypes@{PrintInstanceTypes}}
\index{PrintInstanceTypes@{PrintInstanceTypes}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{PrintInstanceTypes()}{PrintInstanceTypes()}}
{\footnotesize\ttfamily void v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Print\+Instance\+Types (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$}]{root,  }\item[{std\+::ostream \&}]{definitions,  }\item[{std\+::ostream \&}]{values,  }\item[{std\+::ostream \&}]{fully\+\_\+defined\+\_\+single\+\_\+instance\+\_\+types,  }\item[{std\+::ostream \&}]{fully\+\_\+defined\+\_\+multiple\+\_\+instance\+\_\+types,  }\item[{std\+::ostream \&}]{only\+\_\+declared\+\_\+single\+\_\+instance\+\_\+types,  }\item[{std\+::ostream \&}]{only\+\_\+declared\+\_\+multiple\+\_\+instance\+\_\+types,  }\item[{std\+::ostream \&}]{fully\+\_\+defined\+\_\+range\+\_\+instance\+\_\+types,  }\item[{std\+::ostream \&}]{only\+\_\+declared\+\_\+range\+\_\+instance\+\_\+types,  }\item[{const std\+::string \&}]{indent }\end{DoxyParamCaption})}



Definition at line 310 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{318                                                  \{}
\DoxyCodeLine{319   \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} type\_name =}
\DoxyCodeLine{320       \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_a19e689b854c33db4cb93426c50890f46}{CapifyStringWithUnderscores}}(root-\/>type-\/>name()) + \textcolor{stringliteral}{"{}\_TYPE"{}};}
\DoxyCodeLine{321   \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} inner\_indent = indent;}
\DoxyCodeLine{322 }
\DoxyCodeLine{323   \textcolor{keywordflow}{if} (root-\/>num\_values > 1) \{}
\DoxyCodeLine{324     definitions << indent << \textcolor{stringliteral}{"{}V(FIRST\_"{}} << type\_name << \textcolor{stringliteral}{"{}, "{}} << root-\/>start}
\DoxyCodeLine{325                 << \textcolor{stringliteral}{"{}) \(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{326     inner\_indent += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{327   \}}
\DoxyCodeLine{328   \textcolor{keywordflow}{if} (root-\/>num\_own\_values == 1) \{}
\DoxyCodeLine{329     definitions << inner\_indent << \textcolor{stringliteral}{"{}V("{}} << type\_name << \textcolor{stringliteral}{"{}, "{}} << root-\/>value}
\DoxyCodeLine{330                 << \textcolor{stringliteral}{"{}) /* "{}} << root-\/>type-\/>GetPosition() << \textcolor{stringliteral}{"{} */\(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{331     values << \textcolor{stringliteral}{"{}  V("{}} << type\_name << \textcolor{stringliteral}{"{}) /* "{}} << root-\/>type-\/>GetPosition()}
\DoxyCodeLine{332            << \textcolor{stringliteral}{"{} */\(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{333     std::ostream\& type\_checker\_list =}
\DoxyCodeLine{334         root-\/>type-\/>HasUndefinedLayout()}
\DoxyCodeLine{335             ? (root-\/>num\_values == 1 ? only\_declared\_single\_instance\_types}
\DoxyCodeLine{336                                      : only\_declared\_multiple\_instance\_types)}
\DoxyCodeLine{337             : (root-\/>num\_values == 1 ? fully\_defined\_single\_instance\_types}
\DoxyCodeLine{338                                      : fully\_defined\_multiple\_instance\_types);}
\DoxyCodeLine{339     type\_checker\_list << \textcolor{stringliteral}{"{}  V("{}} << root-\/>type-\/>name() << \textcolor{stringliteral}{"{}, "{}} << type\_name}
\DoxyCodeLine{340                       << \textcolor{stringliteral}{"{}) /* "{}} << root-\/>type-\/>GetPosition() << \textcolor{stringliteral}{"{} */ \(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{341   \}}
\DoxyCodeLine{342   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& child : root-\/>children) \{}
\DoxyCodeLine{343     \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a}{PrintInstanceTypes}}(child.get(), definitions, values,}
\DoxyCodeLine{344                        fully\_defined\_single\_instance\_types,}
\DoxyCodeLine{345                        fully\_defined\_multiple\_instance\_types,}
\DoxyCodeLine{346                        only\_declared\_single\_instance\_types,}
\DoxyCodeLine{347                        only\_declared\_multiple\_instance\_types,}
\DoxyCodeLine{348                        fully\_defined\_range\_instance\_types,}
\DoxyCodeLine{349                        only\_declared\_range\_instance\_types, inner\_indent);}
\DoxyCodeLine{350   \}}
\DoxyCodeLine{351   \textcolor{keywordflow}{if} (root-\/>num\_values > 1) \{}
\DoxyCodeLine{352     \textcolor{comment}{// We can't emit LAST\_STRING\_TYPE because it's not a valid flags}}
\DoxyCodeLine{353     \textcolor{comment}{// combination. So if the class type has multiple own values, which only}}
\DoxyCodeLine{354     \textcolor{comment}{// happens when using ANNOTATION\_RESERVE\_BITS\_IN\_INSTANCE\_TYPE, then omit}}
\DoxyCodeLine{355     \textcolor{comment}{// the end marker.}}
\DoxyCodeLine{356     \textcolor{keywordflow}{if} (root-\/>num\_own\_values <= 1) \{}
\DoxyCodeLine{357       definitions << indent << \textcolor{stringliteral}{"{}V(LAST\_"{}} << type\_name << \textcolor{stringliteral}{"{}, "{}} << root-\/>end}
\DoxyCodeLine{358                   << \textcolor{stringliteral}{"{}) \(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{359     \}}
\DoxyCodeLine{360 }
\DoxyCodeLine{361     \textcolor{comment}{// Only output the instance type range for things other than the root type.}}
\DoxyCodeLine{362     \textcolor{keywordflow}{if} (root-\/>type-\/>GetSuperClass() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{363       std::ostream\& range\_instance\_types =}
\DoxyCodeLine{364           root-\/>type-\/>HasUndefinedLayout() ? only\_declared\_range\_instance\_types}
\DoxyCodeLine{365                                            : fully\_defined\_range\_instance\_types;}
\DoxyCodeLine{366       range\_instance\_types << \textcolor{stringliteral}{"{}  V("{}} << root-\/>type-\/>name() << \textcolor{stringliteral}{"{}, FIRST\_"{}}}
\DoxyCodeLine{367                            << type\_name << \textcolor{stringliteral}{"{}, LAST\_"{}} << type\_name << \textcolor{stringliteral}{"{}) \(\backslash\)\(\backslash\)\(\backslash\)n"{}};}
\DoxyCodeLine{368     \}}
\DoxyCodeLine{369   \}}
\DoxyCodeLine{370 \}}

\end{DoxyCode}


References v8\+::internal\+::torque\+::\+Capify\+String\+With\+Underscores(), v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::children, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::end, v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Position(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Super\+Class(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Has\+Undefined\+Layout(), v8\+::internal\+::torque\+::\+Aggregate\+Type\+::name(), v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::num\+\_\+own\+\_\+values, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::num\+\_\+values, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::start, v8\+::internal\+::string, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::type, and v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::value.



Referenced by v8\+::internal\+::torque\+::\+Implementation\+Visitor\+::\+Generate\+Instance\+Types().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6dfffaa873c3df2e3d18b2abc61e868a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!PropagateInstanceTypeConstraints@{PropagateInstanceTypeConstraints}}
\index{PropagateInstanceTypeConstraints@{PropagateInstanceTypeConstraints}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{PropagateInstanceTypeConstraints()}{PropagateInstanceTypeConstraints()}}
{\footnotesize\ttfamily void v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Propagate\+Instance\+Type\+Constraints (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$}]{root }\end{DoxyParamCaption})}



Definition at line 76 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{76                                                               \{}
\DoxyCodeLine{77   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& child : root-\/>children) \{}
\DoxyCodeLine{78     \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5}{PropagateInstanceTypeConstraints}}(child.get());}
\DoxyCodeLine{79     \textcolor{keywordflow}{if} (child-\/>start < root-\/>start) root-\/>start = child-\/>start;}
\DoxyCodeLine{80     \textcolor{keywordflow}{if} (child-\/>end > root-\/>end) root-\/>end = child-\/>end;}
\DoxyCodeLine{81     root-\/>num\_values += child-\/>num\_values;}
\DoxyCodeLine{82   \}}
\DoxyCodeLine{83   \textcolor{keyword}{const} InstanceTypeConstraints\& constraints =}
\DoxyCodeLine{84       root-\/>type-\/>GetInstanceTypeConstraints();}
\DoxyCodeLine{85   \textcolor{keywordflow}{if} (!root-\/>type-\/>IsAbstract() \&\& !root-\/>type-\/>HasSameInstanceTypeAsParent()) \{}
\DoxyCodeLine{86     root-\/>num\_own\_values = 1;}
\DoxyCodeLine{87   \}}
\DoxyCodeLine{88   root-\/>num\_values += root-\/>num\_own\_values;}
\DoxyCodeLine{89   \textcolor{keywordflow}{if} (constraints.num\_flags\_bits != -\/1) \{}
\DoxyCodeLine{90     \textcolor{comment}{// Children won't get any types assigned; must be done manually in C++.}}
\DoxyCodeLine{91     root-\/>children.clear();}
\DoxyCodeLine{92     root-\/>num\_values = 1 << constraints.num\_flags\_bits;}
\DoxyCodeLine{93     root-\/>num\_own\_values = root-\/>num\_values;}
\DoxyCodeLine{94     root-\/>start = 0;}
\DoxyCodeLine{95     root-\/>end = root-\/>num\_values -\/ 1;}
\DoxyCodeLine{96   \}}
\DoxyCodeLine{97   \textcolor{keywordflow}{if} (constraints.value != -\/1) \{}
\DoxyCodeLine{98     \textcolor{keywordflow}{if} (root-\/>num\_own\_values != 1) \{}
\DoxyCodeLine{99       \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Instance type value requested for abstract class "{}},}
\DoxyCodeLine{100             root-\/>type-\/>name())}
\DoxyCodeLine{101           .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(root-\/>type-\/>GetPosition());}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103     root-\/>value = constraints.value;}
\DoxyCodeLine{104     \textcolor{keywordflow}{if} (constraints.value < root-\/>start) root-\/>start = constraints.value;}
\DoxyCodeLine{105     \textcolor{keywordflow}{if} (constraints.value > root-\/>end) root-\/>end = constraints.value;}
\DoxyCodeLine{106   \}}
\DoxyCodeLine{107 \}}

\end{DoxyCode}


References v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::children, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::end, v8\+::internal\+::torque\+::\+Error(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Instance\+Type\+Constraints(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Position(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Has\+Same\+Instance\+Type\+As\+Parent(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Is\+Abstract(), v8\+::internal\+::torque\+::\+Aggregate\+Type\+::name(), v8\+::internal\+::torque\+::\+Instance\+Type\+Constraints\+::num\+\_\+flags\+\_\+bits, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::num\+\_\+own\+\_\+values, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::num\+\_\+values, v8\+::internal\+::torque\+::\+Message\+Builder\+::\+Position(), v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::start, v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::type, v8\+::internal\+::torque\+::\+Instance\+Type\+Constraints\+::value, and v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::value.



Referenced by Assign\+Instance\+Types().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a6050ad74d73c878d5c87781c2acceeb5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!SelectOwnValues@{SelectOwnValues}}
\index{SelectOwnValues@{SelectOwnValues}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SelectOwnValues()}{SelectOwnValues()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Select\+Own\+Values (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $\ast$}]{root,  }\item[{\mbox{\hyperlink{classint}{int}}}]{start\+\_\+value }\end{DoxyParamCaption})}



Definition at line 111 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{111                                                              \{}
\DoxyCodeLine{112   \textcolor{keywordflow}{if} (root-\/>value == -\/1) \{}
\DoxyCodeLine{113     root-\/>value = start\_value;}
\DoxyCodeLine{114   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (root-\/>value < start\_value) \{}
\DoxyCodeLine{115     \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Failed to assign instance type "{}}, root-\/>value, \textcolor{stringliteral}{"{} to "{}},}
\DoxyCodeLine{116           root-\/>type-\/>name())}
\DoxyCodeLine{117         .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(root-\/>type-\/>GetPosition());}
\DoxyCodeLine{118   \}}
\DoxyCodeLine{119   \textcolor{keywordflow}{return} root-\/>value + root-\/>num\_own\_values;}
\DoxyCodeLine{120 \}}

\end{DoxyCode}


References v8\+::internal\+::torque\+::\+Error(), v8\+::internal\+::torque\+::\+Class\+Type\+::\+Get\+Position(), v8\+::internal\+::torque\+::\+Aggregate\+Type\+::name(), v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::num\+\_\+own\+\_\+values, v8\+::internal\+::torque\+::\+Message\+Builder\+::\+Position(), v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::type, and v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::\+Instance\+Type\+Tree\+::value.



Referenced by Solve\+Instance\+Type\+Constraints().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!SolveInstanceTypeConstraints@{SolveInstanceTypeConstraints}}
\index{SolveInstanceTypeConstraints@{SolveInstanceTypeConstraints}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SolveInstanceTypeConstraints()}{SolveInstanceTypeConstraints()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}}$>$ v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Solve\+Instance\+Type\+Constraints (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$}]{root }\end{DoxyParamCaption})}



Definition at line 269 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{270                                           \{}
\DoxyCodeLine{271   std::vector<std::unique\_ptr<InstanceTypeTree>> destination;}
\DoxyCodeLine{272   \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(root), 0, \&destination);}
\DoxyCodeLine{273   \textcolor{keywordflow}{return} destination.empty() ? \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}} : std::move(destination.front());}
\DoxyCodeLine{274 \}}

\end{DoxyCode}


References nullptr.



Referenced by Assign\+Instance\+Types(), and Solve\+Instance\+Type\+Constraints().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_aa878c6e87cc5f56f76f06fe58af1c327}\label{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_aa878c6e87cc5f56f76f06fe58af1c327}} 
\index{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}!SolveInstanceTypeConstraints@{SolveInstanceTypeConstraints}}
\index{SolveInstanceTypeConstraints@{SolveInstanceTypeConstraints}!v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}@{v8::internal::torque::anonymous\_namespace\lcurly{}instance-\/type-\/generator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SolveInstanceTypeConstraints()}{SolveInstanceTypeConstraints()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::torque\+::anonymous\+\_\+namespace\{instance-\/type-\/generator.\+cc\}\+::Solve\+Instance\+Type\+Constraints (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$}]{root,  }\item[{\mbox{\hyperlink{classint}{int}}}]{start\+\_\+value,  }\item[{std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_1_1InstanceTypeTree}{Instance\+Type\+Tree}} $>$$>$ $\ast$}]{destination }\end{DoxyParamCaption})}



Definition at line 141 of file instance-\/type-\/generator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{143                                                              \{}
\DoxyCodeLine{144   \textcolor{keywordflow}{if} (root-\/>start < start\_value) \{}
\DoxyCodeLine{145     \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Failed to assign instance type "{}}, root-\/>start, \textcolor{stringliteral}{"{} to "{}},}
\DoxyCodeLine{146           root-\/>type-\/>name())}
\DoxyCodeLine{147         .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(root-\/>type-\/>GetPosition());}
\DoxyCodeLine{148   \}}
\DoxyCodeLine{149 }
\DoxyCodeLine{150   \textcolor{comment}{// First, separate the children into four groups:}}
\DoxyCodeLine{151   \textcolor{comment}{// -\/ The one child that must go first, if it exists;}}
\DoxyCodeLine{152   \textcolor{comment}{// -\/ Children with specific value requirements ("{}constrained"{});}}
\DoxyCodeLine{153   \textcolor{comment}{// -\/ Children without specific value requirements ("{}unconstrained"{});}}
\DoxyCodeLine{154   \textcolor{comment}{// -\/ The one child that must go last, if it exists.}}
\DoxyCodeLine{155   std::unique\_ptr<InstanceTypeTree> lowest\_child;}
\DoxyCodeLine{156   std::unique\_ptr<InstanceTypeTree> highest\_child;}
\DoxyCodeLine{157   std::multimap<int, std::unique\_ptr<InstanceTypeTree>>}
\DoxyCodeLine{158       constrained\_children\_by\_start;}
\DoxyCodeLine{159   \textcolor{comment}{// Using std::map because you can't std::move out of a std::set until C++17.}}
\DoxyCodeLine{160   std::map<InstanceTypeTree*, std::unique\_ptr<InstanceTypeTree>,}
\DoxyCodeLine{161            CompareUnconstrainedTypes>}
\DoxyCodeLine{162       unconstrained\_children\_by\_size;}
\DoxyCodeLine{163   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& child : root-\/>children) \{}
\DoxyCodeLine{164     \textcolor{keywordflow}{if} (child-\/>type-\/>IsHighestInstanceTypeWithinParent()) \{}
\DoxyCodeLine{165       \textcolor{keywordflow}{if} (highest\_child) \{}
\DoxyCodeLine{166         \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Two classes requested to be the highest instance type: "{}},}
\DoxyCodeLine{167               highest\_child-\/>type-\/>name(), \textcolor{stringliteral}{"{} and "{}}, child-\/>type-\/>name(),}
\DoxyCodeLine{168               \textcolor{stringliteral}{"{} within range for parent class "{}}, root-\/>type-\/>name())}
\DoxyCodeLine{169             .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(child-\/>type-\/>GetPosition());}
\DoxyCodeLine{170       \}}
\DoxyCodeLine{171       \textcolor{keywordflow}{if} (child-\/>type-\/>IsLowestInstanceTypeWithinParent()) \{}
\DoxyCodeLine{172         \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(}
\DoxyCodeLine{173             \textcolor{stringliteral}{"{}Class requested to be both highest and lowest instance type "{}}}
\DoxyCodeLine{174             \textcolor{stringliteral}{"{}within its parent range: "{}},}
\DoxyCodeLine{175             child-\/>type-\/>name())}
\DoxyCodeLine{176             .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(child-\/>type-\/>GetPosition());}
\DoxyCodeLine{177       \}}
\DoxyCodeLine{178       highest\_child = std::move(child);}
\DoxyCodeLine{179     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (child-\/>type-\/>IsLowestInstanceTypeWithinParent()) \{}
\DoxyCodeLine{180       \textcolor{keywordflow}{if} (lowest\_child) \{}
\DoxyCodeLine{181         \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_af38d669a8f4ceb878fa931798fe7451c}{Error}}(\textcolor{stringliteral}{"{}Two classes requested to be the lowest instance type: "{}},}
\DoxyCodeLine{182               lowest\_child-\/>type-\/>name(), \textcolor{stringliteral}{"{} and "{}}, child-\/>type-\/>name(),}
\DoxyCodeLine{183               \textcolor{stringliteral}{"{} within range for parent class "{}}, root-\/>type-\/>name())}
\DoxyCodeLine{184             .\mbox{\hyperlink{classv8_1_1internal_1_1torque_1_1MessageBuilder_a4b70dd210d8033c1c9d6834a51f16c91}{Position}}(child-\/>type-\/>GetPosition());}
\DoxyCodeLine{185       \}}
\DoxyCodeLine{186       lowest\_child = std::move(child);}
\DoxyCodeLine{187     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (child-\/>start > child-\/>end) \{}
\DoxyCodeLine{188       unconstrained\_children\_by\_size.insert(}
\DoxyCodeLine{189           std::make\_pair(child.get(), std::move(child)));}
\DoxyCodeLine{190     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{191       constrained\_children\_by\_start.insert(}
\DoxyCodeLine{192           std::make\_pair(child-\/>start, std::move(child)));}
\DoxyCodeLine{193     \}}
\DoxyCodeLine{194   \}}
\DoxyCodeLine{195   root-\/>children.clear();}
\DoxyCodeLine{196 }
\DoxyCodeLine{197   \textcolor{keywordtype}{bool} own\_type\_pending = root-\/>num\_own\_values > 0;}
\DoxyCodeLine{198 }
\DoxyCodeLine{199   \textcolor{comment}{// Second, iterate and place the children in ascending order.}}
\DoxyCodeLine{200   \textcolor{keywordflow}{if} (lowest\_child != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{201     start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(lowest\_child),}
\DoxyCodeLine{202                                                start\_value, \&root-\/>children);}
\DoxyCodeLine{203   \}}
\DoxyCodeLine{204   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& constrained\_child\_pair : constrained\_children\_by\_start) \{}
\DoxyCodeLine{205     \textcolor{comment}{// Select the next constrained child type in ascending order.}}
\DoxyCodeLine{206     std::unique\_ptr<InstanceTypeTree> constrained\_child =}
\DoxyCodeLine{207         std::move(constrained\_child\_pair.second);}
\DoxyCodeLine{208 }
\DoxyCodeLine{209     \textcolor{comment}{// Try to place the root type before the constrained child type if it fits.}}
\DoxyCodeLine{210     \textcolor{keywordflow}{if} (own\_type\_pending) \{}
\DoxyCodeLine{211       \textcolor{keywordflow}{if} ((root-\/>value != -\/1 \&\& root-\/>value < constrained\_child-\/>start) ||}
\DoxyCodeLine{212           (root-\/>value == -\/1 \&\&}
\DoxyCodeLine{213            start\_value + root-\/>num\_own\_values <= constrained\_child-\/>start)) \{}
\DoxyCodeLine{214         start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b}{SelectOwnValues}}(root.get(), start\_value);}
\DoxyCodeLine{215         own\_type\_pending = \textcolor{keyword}{false};}
\DoxyCodeLine{216       \}}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{comment}{// Try to find any unconstrained children that fit before the constrained}}
\DoxyCodeLine{220     \textcolor{comment}{// one. This simple greedy algorithm just puts the biggest unconstrained}}
\DoxyCodeLine{221     \textcolor{comment}{// children in first, which might not fill the space as efficiently as}}
\DoxyCodeLine{222     \textcolor{comment}{// possible but is good enough for our needs.}}
\DoxyCodeLine{223     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = unconstrained\_children\_by\_size.begin();}
\DoxyCodeLine{224          it != unconstrained\_children\_by\_size.end();) \{}
\DoxyCodeLine{225       \textcolor{keywordflow}{if} (it-\/>second-\/>num\_values + start\_value <= constrained\_child-\/>start) \{}
\DoxyCodeLine{226         start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(}
\DoxyCodeLine{227             std::move(it-\/>second), start\_value, \&root-\/>children);}
\DoxyCodeLine{228         it = unconstrained\_children\_by\_size.erase(it);}
\DoxyCodeLine{229       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{230         ++it;}
\DoxyCodeLine{231       \}}
\DoxyCodeLine{232     \}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234     \textcolor{comment}{// Place the constrained child type.}}
\DoxyCodeLine{235     start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(constrained\_child),}
\DoxyCodeLine{236                                                start\_value, \&root-\/>children);}
\DoxyCodeLine{237   \}}
\DoxyCodeLine{238   \textcolor{keywordflow}{if} (own\_type\_pending) \{}
\DoxyCodeLine{239     start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_ace49f41685ca514d2cb3805fd03fec4b}{SelectOwnValues}}(root.get(), start\_value);}
\DoxyCodeLine{240     own\_type\_pending = \textcolor{keyword}{false};}
\DoxyCodeLine{241   \}}
\DoxyCodeLine{242   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& child\_pair : unconstrained\_children\_by\_size) \{}
\DoxyCodeLine{243     start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(child\_pair.second),}
\DoxyCodeLine{244                                                start\_value, \&root-\/>children);}
\DoxyCodeLine{245   \}}
\DoxyCodeLine{246   \textcolor{keywordflow}{if} (highest\_child != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{247     start\_value = \mbox{\hyperlink{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_a7ec9da2ca5c4d5987936871e10c09fa3}{SolveInstanceTypeConstraints}}(std::move(highest\_child),}
\DoxyCodeLine{248                                                start\_value, \&root-\/>children);}
\DoxyCodeLine{249   \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251   \textcolor{comment}{// Finally, set the range for this class to include all placed subclasses.}}
\DoxyCodeLine{252   root-\/>end = start\_value -\/ 1;}
\DoxyCodeLine{253   root-\/>start =}
\DoxyCodeLine{254       root-\/>children.empty() ? start\_value : root-\/>children.front()-\/>start;}
\DoxyCodeLine{255   \textcolor{keywordflow}{if} (root-\/>value != -\/1 \&\& root-\/>value < root-\/>start) \{}
\DoxyCodeLine{256     root-\/>start = root-\/>value;}
\DoxyCodeLine{257   \}}
\DoxyCodeLine{258   root-\/>num\_values = root-\/>end -\/ root-\/>start + 1;}
\DoxyCodeLine{259   root-\/>type-\/>InitializeInstanceTypes(}
\DoxyCodeLine{260       root-\/>value == -\/1 ? std::optional<int>\{\} : root-\/>value,}
\DoxyCodeLine{261       std::make\_pair(root-\/>start, root-\/>end));}
\DoxyCodeLine{262 }
\DoxyCodeLine{263   \textcolor{keywordflow}{if} (root-\/>num\_values > 0) \{}
\DoxyCodeLine{264     destination-\/>push\_back(std::move(root));}
\DoxyCodeLine{265   \}}
\DoxyCodeLine{266   \textcolor{keywordflow}{return} start\_value;}
\DoxyCodeLine{267 \}}

\end{DoxyCode}


References v8\+::internal\+::torque\+::\+Error(), v8\+::internal\+::torque\+::\+Message\+Builder\+::\+Position(), Select\+Own\+Values(), and Solve\+Instance\+Type\+Constraints().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1torque_1_1anonymous__namespace_02instance-type-generator_8cc_03_aa878c6e87cc5f56f76f06fe58af1c327_cgraph}
\end{center}
\end{figure}
