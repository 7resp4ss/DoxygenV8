\hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver}{}\doxysection{v8\+::internal\+::compiler\+::Gap\+Resolver Class Reference}
\label{classv8_1_1internal_1_1compiler_1_1GapResolver}\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}


{\ttfamily \#include $<$gap-\/resolver.\+h$>$}



Collaboration diagram for v8\+::internal\+::compiler\+::Gap\+Resolver\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{classv8_1_1internal_1_1compiler_1_1GapResolver__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler}{Assembler}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a7ff2dc278d86e6eb68c34551d4d90306}{Gap\+Resolver}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler}{Assembler}} $\ast$assembler)
\item 
\mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} void \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ac1a0a4967cb5b68dd9baab80e5c40f5c}{Resolve}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$parallel\+\_\+move)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd}{Perform\+Cycle}} (const std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ $>$ \&cycle)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe}{Perform\+Move}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$moves, \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$move)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376}{Perform\+Move\+Helper}} (\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$moves, \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$move, std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ $>$ $\ast$cycle)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler}{Assembler}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 14 of file gap-\/resolver.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_a7ff2dc278d86e6eb68c34551d4d90306}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_a7ff2dc278d86e6eb68c34551d4d90306}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!GapResolver@{GapResolver}}
\index{GapResolver@{GapResolver}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{GapResolver()}{GapResolver()}}
{\footnotesize\ttfamily v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Gap\+Resolver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler}{Assembler}} $\ast$}]{assembler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line 51 of file gap-\/resolver.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{51 : \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}(assembler) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!PerformCycle@{PerformCycle}}
\index{PerformCycle@{PerformCycle}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{PerformCycle()}{PerformCycle()}}
{\footnotesize\ttfamily void v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Perform\+Cycle (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ $>$ \&}]{cycle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 81 of file gap-\/resolver.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{81                                                                     \{}
\DoxyCodeLine{82   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!cycle.empty());}
\DoxyCodeLine{83   MoveOperands* move1 = cycle.back();}
\DoxyCodeLine{84   \textcolor{keywordflow}{if} (cycle.size() == 2 \&\& \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_aa380f5b8635c36df42b04d6b4772a384}{IsSwap}}(cycle.front(), cycle.back())) \{}
\DoxyCodeLine{85     \textcolor{comment}{// Call \{AssembleSwap\} which can generate better code than the generic}}
\DoxyCodeLine{86     \textcolor{comment}{// algorithm below in some cases.}}
\DoxyCodeLine{87     MoveOperands* move2 = cycle.front();}
\DoxyCodeLine{88     InstructionOperand* source = \&move1-\/>source();}
\DoxyCodeLine{89     InstructionOperand* destination = \&move1-\/>destination();}
\DoxyCodeLine{90     \textcolor{comment}{// Ensure source is a register or both are stack slots, to limit swap}}
\DoxyCodeLine{91     \textcolor{comment}{// cases.}}
\DoxyCodeLine{92     \textcolor{keywordflow}{if} (source-\/>IsAnyStackSlot()) \{}
\DoxyCodeLine{93       std::swap(source, destination);}
\DoxyCodeLine{94     \}}
\DoxyCodeLine{95     \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_aa4de0477b384c6559df4c875323ae3ee}{AssembleSwap}}(source, destination);}
\DoxyCodeLine{96     move1-\/>Eliminate();}
\DoxyCodeLine{97     move2-\/>Eliminate();}
\DoxyCodeLine{98     \textcolor{keywordflow}{return};}
\DoxyCodeLine{99   \}}
\DoxyCodeLine{100   \textcolor{comment}{// Generic move-\/cycle algorithm. The cycle of size n is ordered such that the}}
\DoxyCodeLine{101   \textcolor{comment}{// move at index i \% n blocks the move at index (i + 1) \% n.}}
\DoxyCodeLine{102   \textcolor{comment}{// -\/ Move the source of the last move to a platform-\/specific temporary}}
\DoxyCodeLine{103   \textcolor{comment}{// location.}}
\DoxyCodeLine{104   \textcolor{comment}{// -\/ Assemble the remaining moves from left to right. The first move was}}
\DoxyCodeLine{105   \textcolor{comment}{// unblocked by the temporary location, and each move unblocks the next one.}}
\DoxyCodeLine{106   \textcolor{comment}{// -\/ Move the temporary location to the last move's destination, thereby}}
\DoxyCodeLine{107   \textcolor{comment}{// completing the cycle.}}
\DoxyCodeLine{108   \textcolor{comment}{// To ensure that the temporary location does not conflict with any scratch}}
\DoxyCodeLine{109   \textcolor{comment}{// register used during the move cycle, the platform implements}}
\DoxyCodeLine{110   \textcolor{comment}{// \{SetPendingMove\}, which marks the registers needed for the given moves.}}
\DoxyCodeLine{111   \textcolor{comment}{// \{MoveToTempLocation\} will then choose the location accordingly.}}
\DoxyCodeLine{112   \mbox{\hyperlink{namespacev8_1_1internal_abe5419355372f787c28119c509343410}{MachineRepresentation}} rep =}
\DoxyCodeLine{113       \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1LocationOperand_a14a0a8abb4b6ac796e0fae75948a270e}{LocationOperand::cast}}(move1-\/>destination()).\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1LocationOperand_a598f20b98f0d7647b58bef3b57ec20a9}{representation}}();}
\DoxyCodeLine{114   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < cycle.size() -\/ 1; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{115     \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_a1e2feb2a48b639fc6769a6bc26b3fe1d}{SetPendingMove}}(cycle[\mbox{\hyperlink{namespacev8_1_1internal}{i}}]);}
\DoxyCodeLine{116   \}}
\DoxyCodeLine{117   \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_a28a361de6e0b26d6eb78073b1c6d148a}{MoveToTempLocation}}(\&move1-\/>source(), rep);}
\DoxyCodeLine{118   InstructionOperand destination = move1-\/>destination();}
\DoxyCodeLine{119   move1-\/>Eliminate();}
\DoxyCodeLine{120   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < cycle.size() -\/ 1; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{121     \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_a6a0e6dc1f86df92f38d770fa454cce9a}{AssembleMove}}(\&cycle[\mbox{\hyperlink{namespacev8_1_1internal}{i}}]-\/>source(), \&cycle[\mbox{\hyperlink{namespacev8_1_1internal}{i}}]-\/>destination());}
\DoxyCodeLine{122     cycle[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}]-\/>Eliminate();}
\DoxyCodeLine{123   \}}
\DoxyCodeLine{124   \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_ae0d941f8192f6ce27f13fecb5ec6be83}{MoveTempLocationTo}}(\&destination, rep);}
\DoxyCodeLine{125   \textcolor{comment}{// We do not need to update the sources of the remaining moves in the parallel}}
\DoxyCodeLine{126   \textcolor{comment}{// move. If any of the remaining moves had the same source as one of the moves}}
\DoxyCodeLine{127   \textcolor{comment}{// in the cycle, it would block the cycle and would have already been}}
\DoxyCodeLine{128   \textcolor{comment}{// assembled by \{PerformMoveHelper\}.}}
\DoxyCodeLine{129 \}}

\end{DoxyCode}


References v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Assemble\+Move(), assembler\+\_\+, v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Assemble\+Swap(), v8\+::internal\+::compiler\+::\+Location\+Operand\+::cast(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::destination(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Eliminate(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::compiler\+::\+Instruction\+Operand\+::\+Is\+Any\+Stack\+Slot(), v8\+::internal\+::compiler\+::\+Is\+Swap(), v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Move\+Temp\+Location\+To(), v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Move\+To\+Temp\+Location(), v8\+::internal\+::compiler\+::\+Location\+Operand\+::representation(), v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Set\+Pending\+Move(), and v8\+::internal\+::compiler\+::\+Move\+Operands\+::source().



Referenced by Perform\+Move\+Helper().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!PerformMove@{PerformMove}}
\index{PerformMove@{PerformMove}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{PerformMove()}{PerformMove()}}
{\footnotesize\ttfamily void v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Perform\+Move (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$}]{moves,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$}]{move }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 131 of file gap-\/resolver.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{131                                                                      \{}
\DoxyCodeLine{132   \textcolor{comment}{// Try to perform the move and its dependencies with \{PerformMoveHelper\}.}}
\DoxyCodeLine{133   \textcolor{comment}{// This helper function will be able to solve most cases, including cycles.}}
\DoxyCodeLine{134   \textcolor{comment}{// But for some rare cases, it will bail out and return one of the}}
\DoxyCodeLine{135   \textcolor{comment}{// problematic moves. In this case, push the source to the stack to}}
\DoxyCodeLine{136   \textcolor{comment}{// break the cycles that it belongs to, and try again.}}
\DoxyCodeLine{137   std::vector<MoveOperands*> cycle;}
\DoxyCodeLine{138   \textcolor{keywordflow}{while} (MoveOperands* blocking\_move = \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376}{PerformMoveHelper}}(moves, move, \&cycle)) \{}
\DoxyCodeLine{139     \textcolor{comment}{// Push an arbitrary operand of the cycle to break it.}}
\DoxyCodeLine{140     AllocatedOperand scratch = \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_aaef55edc4cc222c5c97da17974897256}{Push}}(\&blocking\_move-\/>source());}
\DoxyCodeLine{141     InstructionOperand source = blocking\_move-\/>source();}
\DoxyCodeLine{142     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} m : *moves) \{}
\DoxyCodeLine{143       \textcolor{keywordflow}{if} (m-\/>source() == source) \{}
\DoxyCodeLine{144         m-\/>set\_source(scratch);}
\DoxyCodeLine{145       \}}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147     cycle.clear();}
\DoxyCodeLine{148   \}}
\DoxyCodeLine{149 \}}

\end{DoxyCode}


References assembler\+\_\+, Perform\+Move\+Helper(), and v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Push().



Referenced by Resolve().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!PerformMoveHelper@{PerformMoveHelper}}
\index{PerformMoveHelper@{PerformMoveHelper}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{PerformMoveHelper()}{PerformMoveHelper()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Perform\+Move\+Helper (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$}]{moves,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$}]{move,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1MoveOperands}{Move\+Operands}} $\ast$ $>$ $\ast$}]{cycle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 151 of file gap-\/resolver.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{153                                      \{}
\DoxyCodeLine{154   \textcolor{comment}{// We interpret moves as nodes in a graph. x is a successor of y (x blocks y)}}
\DoxyCodeLine{155   \textcolor{comment}{// if x.source() conflicts with y.destination(). We recursively assemble the}}
\DoxyCodeLine{156   \textcolor{comment}{// moves in this graph in post-\/order using a DFS traversal, such that all}}
\DoxyCodeLine{157   \textcolor{comment}{// blocking moves are assembled first.}}
\DoxyCodeLine{158   \textcolor{comment}{// We also mark moves in the current DFS branch as pending. If a move is}}
\DoxyCodeLine{159   \textcolor{comment}{// blocked by a pending move, this is a cycle. In this case we just}}
\DoxyCodeLine{160   \textcolor{comment}{// reconstruct the cycle on the way back, and assemble it using \{PerformCycle\}}}
\DoxyCodeLine{161   \textcolor{comment}{// when we reach the first move.}}
\DoxyCodeLine{162   \textcolor{comment}{// This algorithm can only process one cycle at a time. If another cycle is}}
\DoxyCodeLine{163   \textcolor{comment}{// found while the first one is still being processed, we bail out.}}
\DoxyCodeLine{164   \textcolor{comment}{// The caller breaks the cycle using a temporary stack slot, and we try}}
\DoxyCodeLine{165   \textcolor{comment}{// again.}}
\DoxyCodeLine{166 }
\DoxyCodeLine{167   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!move-\/>IsPending());}
\DoxyCodeLine{168   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!move-\/>IsRedundant());}
\DoxyCodeLine{169 }
\DoxyCodeLine{170   \textcolor{comment}{// Clear this move's destination to indicate a pending move.  The actual}}
\DoxyCodeLine{171   \textcolor{comment}{// destination is saved on the side.}}
\DoxyCodeLine{172   InstructionOperand source = move-\/>source();}
\DoxyCodeLine{173   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!source.IsInvalid());  \textcolor{comment}{// Or else it will look eliminated.}}
\DoxyCodeLine{174   InstructionOperand destination = move-\/>destination();}
\DoxyCodeLine{175   move-\/>SetPending();}
\DoxyCodeLine{176   MoveOperands* blocking\_move = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{177 }
\DoxyCodeLine{178   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < moves-\/>size(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{179     \textcolor{keyword}{auto} other = (*moves)[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}];}
\DoxyCodeLine{180     \textcolor{keywordflow}{if} (other-\/>IsEliminated()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{181     \textcolor{keywordflow}{if} (other == move) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{182     \textcolor{keywordflow}{if} (other-\/>source().InterferesWith(destination)) \{}
\DoxyCodeLine{183       \textcolor{keywordflow}{if} (other-\/>IsPending()) \{}
\DoxyCodeLine{184         \textcolor{comment}{// The conflicting move is pending, we found a cycle. Build the list of}}
\DoxyCodeLine{185         \textcolor{comment}{// moves that belong to the cycle on the way back.}}
\DoxyCodeLine{186         \textcolor{comment}{// If this move already belongs to a cycle, bail out.}}
\DoxyCodeLine{187         \textcolor{keywordflow}{if} (!cycle-\/>empty()) \{}
\DoxyCodeLine{188           blocking\_move = cycle-\/>front();}
\DoxyCodeLine{189           \textcolor{keywordflow}{break};}
\DoxyCodeLine{190         \}}
\DoxyCodeLine{191         \textcolor{comment}{// Initialize the cycle with \{other\} and reconstruct the rest of the}}
\DoxyCodeLine{192         \textcolor{comment}{// cycle on the way back.}}
\DoxyCodeLine{193         cycle-\/>push\_back(other);}
\DoxyCodeLine{194       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{195         std::vector<MoveOperands*> cycle\_rec;}
\DoxyCodeLine{196         blocking\_move = \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376}{PerformMoveHelper}}(moves, other, \&cycle\_rec);}
\DoxyCodeLine{197         \textcolor{keywordflow}{if} (blocking\_move) \textcolor{keywordflow}{break};}
\DoxyCodeLine{198         \textcolor{keywordflow}{if} (!cycle-\/>empty() \&\& !cycle\_rec.empty()) \{}
\DoxyCodeLine{199           blocking\_move = cycle\_rec.front();}
\DoxyCodeLine{200           \textcolor{keywordflow}{break};}
\DoxyCodeLine{201         \}}
\DoxyCodeLine{202         \textcolor{keywordflow}{if} (cycle-\/>empty() \&\& !cycle\_rec.empty()) \{}
\DoxyCodeLine{203           *cycle = std::move(cycle\_rec);}
\DoxyCodeLine{204         \}}
\DoxyCodeLine{205       \}}
\DoxyCodeLine{206     \}}
\DoxyCodeLine{207   \}}
\DoxyCodeLine{208 }
\DoxyCodeLine{209   \textcolor{comment}{// We finished processing all the blocking moves and don't need this one}}
\DoxyCodeLine{210   \textcolor{comment}{// marked as pending anymore, restore its destination.}}
\DoxyCodeLine{211   move-\/>set\_destination(destination);}
\DoxyCodeLine{212 }
\DoxyCodeLine{213   \textcolor{keywordflow}{if} (blocking\_move != \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return} blocking\_move;}
\DoxyCodeLine{214 }
\DoxyCodeLine{215   \textcolor{keywordflow}{if} (!cycle-\/>empty()) \{}
\DoxyCodeLine{216     \textcolor{keywordflow}{if} (cycle-\/>front() == move) \{}
\DoxyCodeLine{217       \textcolor{comment}{// We returned to the topmost move in the cycle and assembled all the}}
\DoxyCodeLine{218       \textcolor{comment}{// other dependencies. Assemble the cycle.}}
\DoxyCodeLine{219       \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_a9bf1fdfc47fd6203542f17c079caeffd}{PerformCycle}}(*cycle);}
\DoxyCodeLine{220       cycle-\/>clear();}
\DoxyCodeLine{221     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{222       cycle-\/>push\_back(move);}
\DoxyCodeLine{223     \}}
\DoxyCodeLine{224   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{225     \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_a6a0e6dc1f86df92f38d770fa454cce9a}{AssembleMove}}(\&source, \&destination);}
\DoxyCodeLine{226     move-\/>Eliminate();}
\DoxyCodeLine{227   \}}
\DoxyCodeLine{228   \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{229 \}}

\end{DoxyCode}


References v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Assemble\+Move(), assembler\+\_\+, v8\+::internal\+::\+DCHECK(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::destination(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Eliminate(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Is\+Pending(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Is\+Redundant(), Perform\+Cycle(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::set\+\_\+destination(), v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Set\+Pending(), and v8\+::internal\+::compiler\+::\+Move\+Operands\+::source().



Referenced by Perform\+Move().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_a82d43538b2a67e77a0da6a57d412e376_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_ac1a0a4967cb5b68dd9baab80e5c40f5c}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_ac1a0a4967cb5b68dd9baab80e5c40f5c}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!Resolve@{Resolve}}
\index{Resolve@{Resolve}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{Resolve()}{Resolve()}}
{\footnotesize\ttfamily void v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Resolve (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1ParallelMove}{Parallel\+Move}} $\ast$}]{parallel\+\_\+move }\end{DoxyParamCaption})}



Definition at line 30 of file gap-\/resolver.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{30                                              \{}
\DoxyCodeLine{31   base::EnumSet<MoveOperandKind, uint8\_t> source\_kinds;}
\DoxyCodeLine{32   base::EnumSet<MoveOperandKind, uint8\_t> destination\_kinds;}
\DoxyCodeLine{33 }
\DoxyCodeLine{34   \textcolor{comment}{// Remove redundant moves, collect source kinds and destination kinds to}}
\DoxyCodeLine{35   \textcolor{comment}{// detect simple non-\/overlapping moves, and collect FP move representations if}}
\DoxyCodeLine{36   \textcolor{comment}{// aliasing is non-\/simple.}}
\DoxyCodeLine{37   \textcolor{keywordtype}{size\_t} nmoves = moves-\/>size();}
\DoxyCodeLine{38   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < nmoves;) \{}
\DoxyCodeLine{39     MoveOperands* move = (*moves)[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}];}
\DoxyCodeLine{40     \textcolor{keywordflow}{if} (move-\/>IsRedundant()) \{}
\DoxyCodeLine{41       nmoves-\/-\/;}
\DoxyCodeLine{42       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal}{i}} < nmoves) (*moves)[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}] = (*moves)[nmoves];}
\DoxyCodeLine{43       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{44     \}}
\DoxyCodeLine{45     \mbox{\hyperlink{namespacev8_1_1internal}{i}}++;}
\DoxyCodeLine{46     source\_kinds.Add(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1anonymous__namespace_02gap-resolver_8cc_03_a13f90cd7baa1b622ab617c1429a14d61}{GetKind}}(move-\/>source()));}
\DoxyCodeLine{47     destination\_kinds.Add(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1anonymous__namespace_02gap-resolver_8cc_03_a13f90cd7baa1b622ab617c1429a14d61}{GetKind}}(move-\/>destination()));}
\DoxyCodeLine{48   \}}
\DoxyCodeLine{49   \textcolor{keywordflow}{if} (nmoves != moves-\/>size()) moves-\/>resize(nmoves);}
\DoxyCodeLine{50 }
\DoxyCodeLine{51   \textcolor{keywordflow}{if} ((source\_kinds \& destination\_kinds).empty() || moves-\/>size() < 2) \{}
\DoxyCodeLine{52     \textcolor{comment}{// Fast path for non-\/conflicting parallel moves.}}
\DoxyCodeLine{53     \textcolor{keywordflow}{for} (MoveOperands* move : *moves) \{}
\DoxyCodeLine{54       \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_a6a0e6dc1f86df92f38d770fa454cce9a}{AssembleMove}}(\&move-\/>source(), \&move-\/>destination());}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56     \textcolor{keywordflow}{return};}
\DoxyCodeLine{57   \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < moves-\/>size(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{60     \textcolor{keyword}{auto} move = (*moves)[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}];}
\DoxyCodeLine{61     \textcolor{keywordflow}{if} (!move-\/>IsEliminated()) \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ad0223db0bb3d370388a927cd46bb0cbe}{PerformMove}}(moves, move);}
\DoxyCodeLine{62   \}}
\DoxyCodeLine{63   \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}{assembler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler_ab9e918f93b00369c3b93533d48cc033a}{PopTempStackSlots}}();}
\DoxyCodeLine{64 \}}

\end{DoxyCode}


References v8\+::base\+::\+Enum\+Set$<$ E, T $>$\+::\+Add(), v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Assemble\+Move(), assembler\+\_\+, v8\+::internal\+::compiler\+::\+Move\+Operands\+::destination(), v8\+::internal\+::compiler\+::anonymous\+\_\+namespace\{gap-\/resolver.\+cc\}\+::\+Get\+Kind(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::compiler\+::\+Move\+Operands\+::\+Is\+Redundant(), Perform\+Move(), v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::\+Assembler\+::\+Pop\+Temp\+Stack\+Slots(), and v8\+::internal\+::compiler\+::\+Move\+Operands\+::source().



Referenced by v8\+::internal\+::compiler\+::\+Code\+Generator\+::\+Assemble\+Gaps().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_ac1a0a4967cb5b68dd9baab80e5c40f5c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1compiler_1_1GapResolver_ac1a0a4967cb5b68dd9baab80e5c40f5c_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}\label{classv8_1_1internal_1_1compiler_1_1GapResolver_ab92ef3f8c3dffa455e0267398566e5b1}} 
\index{v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}!assembler\_@{assembler\_}}
\index{assembler\_@{assembler\_}!v8::internal::compiler::GapResolver@{v8::internal::compiler::GapResolver}}
\doxysubsubsection{\texorpdfstring{assembler\_}{assembler\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1GapResolver_1_1Assembler}{Assembler}}$\ast$ const v8\+::internal\+::compiler\+::\+Gap\+Resolver\+::assembler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 71 of file gap-\/resolver.\+h.



Referenced by Perform\+Cycle(), Perform\+Move(), Perform\+Move\+Helper(), and Resolve().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/compiler/backend/\mbox{\hyperlink{gap-resolver_8h}{gap-\/resolver.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/compiler/backend/\mbox{\hyperlink{gap-resolver_8cc}{gap-\/resolver.\+cc}}\end{DoxyCompactItemize}
