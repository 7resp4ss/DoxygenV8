\hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{}\doxysection{v8\+::internal\+::wasm\+::Wasm\+Code\+Lookup\+Cache Class Reference}
\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}


{\ttfamily \#include $<$wasm-\/code-\/manager.\+h$>$}



Collaboration diagram for v8\+::internal\+::wasm\+::Wasm\+Code\+Lookup\+Cache\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_1_1CacheEntry}{Cache\+Entry}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a1b4975a5a42a3ca324eed69cc589a86c}{Wasm\+Code\+Lookup\+Cache}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_ae4a83054e00881cfc8b8d7e577ab6bc4}{Wasm\+Code\+Lookup\+Cache}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}} \& \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a10618d0b45e1067c191ca4290850409f}{operator=}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}} \&)=delete
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_adca325bae99c054c2b35b51bea069339}{Flush}} ()
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_1_1CacheEntry}{Cache\+Entry}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a0ebfe32e04096d32c378226808d5a187}{Get\+Cache\+Entry}} (\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} pc)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
friend \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a4ecb713925e7d49eb789472310e79f9e}{Wasm\+Code\+Manager}}
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_1_1CacheEntry}{Cache\+Entry}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a87b03e3d44c319942808f57285903399}{cache\+\_\+}} \mbox{[}\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{k\+Wasm\+Code\+Lookup\+Cache\+Size}}\mbox{]}
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{k\+Wasm\+Code\+Lookup\+Cache\+Size}} = 1024
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 1297 of file wasm-\/code-\/manager.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a1b4975a5a42a3ca324eed69cc589a86c}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a1b4975a5a42a3ca324eed69cc589a86c}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!WasmCodeLookupCache@{WasmCodeLookupCache}}
\index{WasmCodeLookupCache@{WasmCodeLookupCache}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{WasmCodeLookupCache()}{WasmCodeLookupCache()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::\+Wasm\+Code\+Lookup\+Cache (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 1301 of file wasm-\/code-\/manager.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{1301 \{ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_adca325bae99c054c2b35b51bea069339}{Flush}}(); \}}

\end{DoxyCode}


References Flush().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a1b4975a5a42a3ca324eed69cc589a86c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_ae4a83054e00881cfc8b8d7e577ab6bc4}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_ae4a83054e00881cfc8b8d7e577ab6bc4}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!WasmCodeLookupCache@{WasmCodeLookupCache}}
\index{WasmCodeLookupCache@{WasmCodeLookupCache}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{WasmCodeLookupCache()}{WasmCodeLookupCache()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::\+Wasm\+Code\+Lookup\+Cache (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_adca325bae99c054c2b35b51bea069339}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_adca325bae99c054c2b35b51bea069339}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!Flush@{Flush}}
\index{Flush@{Flush}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{Flush()}{Flush()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::\+Flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3063 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3063                                 \{}
\DoxyCodeLine{3064   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{kWasmCodeLookupCacheSize}}; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++)}
\DoxyCodeLine{3065     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a87b03e3d44c319942808f57285903399}{cache\_}}[\mbox{\hyperlink{namespacev8_1_1internal}{i}}].pc.store(\mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}}, std::memory\_order\_release);}
\DoxyCodeLine{3066 \}}

\end{DoxyCode}


References cache\+\_\+, v8\+::internal\+::k\+Null\+Address, and k\+Wasm\+Code\+Lookup\+Cache\+Size.



Referenced by Wasm\+Code\+Lookup\+Cache().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_adca325bae99c054c2b35b51bea069339_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a0ebfe32e04096d32c378226808d5a187}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a0ebfe32e04096d32c378226808d5a187}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!GetCacheEntry@{GetCacheEntry}}
\index{GetCacheEntry@{GetCacheEntry}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{GetCacheEntry()}{GetCacheEntry()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_1_1CacheEntry}{Wasm\+Code\+Lookup\+Cache\+::\+Cache\+Entry}} $\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::\+Get\+Cache\+Entry (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}}}]{pc }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3068 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3069                 \{}
\DoxyCodeLine{3070   static\_assert(\mbox{\hyperlink{namespacev8_1_1base_1_1bits_af9eb752b538fa8a66badab8f26e0e000}{base::bits::IsPowerOfTwo}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{kWasmCodeLookupCacheSize}}));}
\DoxyCodeLine{3071   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(pc != \mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}});}
\DoxyCodeLine{3072   uint32\_t hash = \mbox{\hyperlink{namespacev8_1_1internal_afc0fca463c2a3badf70e62abe7b61771}{ComputeAddressHash}}(pc);}
\DoxyCodeLine{3073   uint32\_t \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = hash \& (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{kWasmCodeLookupCacheSize}} -\/ 1);}
\DoxyCodeLine{3074   CacheEntry* entry = \&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a87b03e3d44c319942808f57285903399}{cache\_}}[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}];}
\DoxyCodeLine{3075   \textcolor{keywordflow}{if} (entry-\/>pc.load(std::memory\_order\_acquire) == pc) \{}
\DoxyCodeLine{3076     \textcolor{comment}{// Code can be deallocated at two points:}}
\DoxyCodeLine{3077     \textcolor{comment}{// -\/ when the NativeModule that references it is garbage-\/}}
\DoxyCodeLine{3078     \textcolor{comment}{//   collected;}}
\DoxyCodeLine{3079     \textcolor{comment}{// -\/ when it is no longer referenced by its NativeModule, nor from}}
\DoxyCodeLine{3080     \textcolor{comment}{//   any stack.}}
\DoxyCodeLine{3081     \textcolor{comment}{// The cache is cleared when a NativeModule is destroyed, and when}}
\DoxyCodeLine{3082     \textcolor{comment}{// the isolate reports the set of code referenced from its stacks.}}
\DoxyCodeLine{3083     \textcolor{comment}{// So, if the code is the cache, it is because it was live at some}}
\DoxyCodeLine{3084     \textcolor{comment}{// point (when inserted in the cache), its native module is still}}
\DoxyCodeLine{3085     \textcolor{comment}{// considered live, and it has not yet been reported as no longer}}
\DoxyCodeLine{3086     \textcolor{comment}{// referenced from any stack. It thus cannot have been released}}
\DoxyCodeLine{3087     \textcolor{comment}{// yet.}}
\DoxyCodeLine{3088 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{3089     wasm::WasmCodeRefScope code\_ref\_scope;}
\DoxyCodeLine{3090     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(entry-\/>code, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{wasm::GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8b17776c8a4fe19718f2b1931544253f}{LookupCode}}(pc));}
\DoxyCodeLine{3091 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// DEBUG}}
\DoxyCodeLine{3092   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3093     \textcolor{comment}{// For WebAssembly frames we perform a lookup in the handler table.}}
\DoxyCodeLine{3094     \textcolor{comment}{// This code ref scope is here to avoid a check failure when looking up}}
\DoxyCodeLine{3095     \textcolor{comment}{// the code. It's not actually necessary to keep the code alive as it's}}
\DoxyCodeLine{3096     \textcolor{comment}{// currently being executed.}}
\DoxyCodeLine{3097     wasm::WasmCodeRefScope code\_ref\_scope;}
\DoxyCodeLine{3098     entry-\/>pc.store(pc, std::memory\_order\_release);}
\DoxyCodeLine{3099     entry-\/>code = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{wasm::GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8b17776c8a4fe19718f2b1931544253f}{LookupCode}}(pc);}
\DoxyCodeLine{3100     entry-\/>safepoint\_entry.Reset();}
\DoxyCodeLine{3101   \}}
\DoxyCodeLine{3102   \textcolor{keywordflow}{return} entry;}
\DoxyCodeLine{3103 \}}

\end{DoxyCode}


References cache\+\_\+, v8\+::internal\+::\+Compute\+Address\+Hash(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::index, v8\+::base\+::bits\+::\+Is\+Power\+Of\+Two(), v8\+::internal\+::k\+Null\+Address, k\+Wasm\+Code\+Lookup\+Cache\+Size, and v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Lookup\+Code().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a0ebfe32e04096d32c378226808d5a187_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a10618d0b45e1067c191ca4290850409f}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a10618d0b45e1067c191ca4290850409f}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!operator=@{operator=}}
\index{operator=@{operator=}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}}\& v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache}{Wasm\+Code\+Lookup\+Cache}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a87b03e3d44c319942808f57285903399}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a87b03e3d44c319942808f57285903399}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!cache\_@{cache\_}}
\index{cache\_@{cache\_}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{cache\_}{cache\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_1_1CacheEntry}{Cache\+Entry}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::cache\+\_\+\mbox{[}\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}{k\+Wasm\+Code\+Lookup\+Cache\+Size}}\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1318 of file wasm-\/code-\/manager.\+h.



Referenced by Flush(), and Get\+Cache\+Entry().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_af3398d97c58d813e2e4750bd40caf788}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!kWasmCodeLookupCacheSize@{kWasmCodeLookupCacheSize}}
\index{kWasmCodeLookupCacheSize@{kWasmCodeLookupCacheSize}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{kWasmCodeLookupCacheSize}{kWasmCodeLookupCacheSize}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::k\+Wasm\+Code\+Lookup\+Cache\+Size = 1024\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 1317 of file wasm-\/code-\/manager.\+h.



Referenced by Flush(), and Get\+Cache\+Entry().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a4ecb713925e7d49eb789472310e79f9e}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeLookupCache_a4ecb713925e7d49eb789472310e79f9e}} 
\index{v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}!WasmCodeManager@{WasmCodeManager}}
\index{WasmCodeManager@{WasmCodeManager}!v8::internal::wasm::WasmCodeLookupCache@{v8::internal::wasm::WasmCodeLookupCache}}
\doxysubsubsection{\texorpdfstring{WasmCodeManager}{WasmCodeManager}}
{\footnotesize\ttfamily friend v8\+::internal\+::wasm\+::\+Wasm\+Code\+Lookup\+Cache\+::\+Wasm\+Code\+Manager\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1298 of file wasm-\/code-\/manager.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-code-manager_8h}{wasm-\/code-\/manager.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-code-manager_8cc}{wasm-\/code-\/manager.\+cc}}\end{DoxyCompactItemize}
