\hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter}{}\doxysection{v8\+::platform\+::tracing\+::JSONTrace\+Writer Class Reference}
\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter}\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}


{\ttfamily \#include $<$trace-\/writer.\+h$>$}



Inheritance diagram for v8\+::platform\+::tracing\+::JSONTrace\+Writer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=255pt]{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::platform\+::tracing\+::JSONTrace\+Writer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a8daf59435c82dca67d53db1a22c40a48}{JSONTrace\+Writer}} (std\+::ostream \&stream)
\item 
\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a396076e5e1035b9f379be43a7ca39cfd}{JSONTrace\+Writer}} (std\+::ostream \&stream, const std\+::string \&tag)
\item 
\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a5a31ec7ab7c08cce1da114f5ac9d3c19}{$\sim$\+JSONTrace\+Writer}} () override
\item 
void \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a2684d4b80f4481caad4fe67dc2c71350}{Append\+Trace\+Event}} (\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1TraceObject}{Trace\+Object}} $\ast$trace\+\_\+event) override
\item 
void \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a627ece43e4be04e27ae968d3102d93b0}{Flush}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5}{Append\+Arg\+Value}} (uint8\+\_\+t type, \mbox{\hyperlink{unionv8_1_1platform_1_1tracing_1_1TraceObject_1_1ArgValue}{Trace\+Object\+::\+Arg\+Value}} value)
\item 
void \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4920282891d77df05c3249d333474b6e}{Append\+Arg\+Value}} (\mbox{\hyperlink{classv8_1_1ConvertableToTraceFormat}{v8\+::\+Convertable\+To\+Trace\+Format}} $\ast$)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::ostream \& \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\+\_\+}}
\item 
bool \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_ac1381ad00effbd42d11c02cc923f79d1}{append\+\_\+comma\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 16 of file trace-\/writer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a8daf59435c82dca67d53db1a22c40a48}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a8daf59435c82dca67d53db1a22c40a48}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!JSONTraceWriter@{JSONTraceWriter}}
\index{JSONTraceWriter@{JSONTraceWriter}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{JSONTraceWriter()}{JSONTraceWriter()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+JSONTrace\+Writer (\begin{DoxyParamCaption}\item[{std\+::ostream \&}]{stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 125 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{126     : \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a8daf59435c82dca67d53db1a22c40a48}{JSONTraceWriter}}(stream, \textcolor{stringliteral}{"{}traceEvents"{}}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a396076e5e1035b9f379be43a7ca39cfd}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a396076e5e1035b9f379be43a7ca39cfd}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!JSONTraceWriter@{JSONTraceWriter}}
\index{JSONTraceWriter@{JSONTraceWriter}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{JSONTraceWriter()}{JSONTraceWriter()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+JSONTrace\+Writer (\begin{DoxyParamCaption}\item[{std\+::ostream \&}]{stream,  }\item[{const std\+::string \&}]{tag }\end{DoxyParamCaption})}



Definition at line 128 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{129     : \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}}(stream) \{}
\DoxyCodeLine{130   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\{\(\backslash\)"{}"{}} << tag << \textcolor{stringliteral}{"{}\(\backslash\)"{}:["{}};}
\DoxyCodeLine{131 \}}

\end{DoxyCode}


References stream\+\_\+.

\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a5a31ec7ab7c08cce1da114f5ac9d3c19}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a5a31ec7ab7c08cce1da114f5ac9d3c19}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!````~JSONTraceWriter@{$\sim$JSONTraceWriter}}
\index{````~JSONTraceWriter@{$\sim$JSONTraceWriter}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{$\sim$JSONTraceWriter()}{~JSONTraceWriter()}}
{\footnotesize\ttfamily v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::$\sim$\+JSONTrace\+Writer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Definition at line 133 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{133 \{ \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}]\}"{}}; \}}

\end{DoxyCode}


References stream\+\_\+.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!AppendArgValue@{AppendArgValue}}
\index{AppendArgValue@{AppendArgValue}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{AppendArgValue()}{AppendArgValue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+Append\+Arg\+Value (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{type,  }\item[{\mbox{\hyperlink{unionv8_1_1platform_1_1tracing_1_1TraceObject_1_1ArgValue}{Trace\+Object\+::\+Arg\+Value}}}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 62 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{63                                                                 \{}
\DoxyCodeLine{64   \textcolor{keywordflow}{switch} (\mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}}) \{}
\DoxyCodeLine{65     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_a2dd26b19f2d5fa70c9e768764c8c7a17}{TRACE\_VALUE\_TYPE\_BOOL}}:}
\DoxyCodeLine{66       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << (\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_uint ? \textcolor{stringliteral}{"{}true"{}} : \textcolor{stringliteral}{"{}false"{}});}
\DoxyCodeLine{67       \textcolor{keywordflow}{break};}
\DoxyCodeLine{68     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_aadc06c20eb338d14175169024ddca4aa}{TRACE\_VALUE\_TYPE\_UINT}}:}
\DoxyCodeLine{69       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_uint;}
\DoxyCodeLine{70       \textcolor{keywordflow}{break};}
\DoxyCodeLine{71     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_a8bb64f41c45cd74dd46ac8d322997d3c}{TRACE\_VALUE\_TYPE\_INT}}:}
\DoxyCodeLine{72       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_int;}
\DoxyCodeLine{73       \textcolor{keywordflow}{break};}
\DoxyCodeLine{74     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_ae3833001a40e31ca96a5d5c1b677eea1}{TRACE\_VALUE\_TYPE\_DOUBLE}}: \{}
\DoxyCodeLine{75       \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} real;}
\DoxyCodeLine{76       \textcolor{keywordtype}{double} val = \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_double;}
\DoxyCodeLine{77       \textcolor{keywordflow}{if} (std::isfinite(val)) \{}
\DoxyCodeLine{78         std::ostringstream convert\_stream;}
\DoxyCodeLine{79         convert\_stream << val;}
\DoxyCodeLine{80         real = convert\_stream.str();}
\DoxyCodeLine{81         \textcolor{comment}{// Ensure that the number has a .0 if there's no decimal or 'e'.  This}}
\DoxyCodeLine{82         \textcolor{comment}{// makes sure that when we read the JSON back, it's interpreted as a}}
\DoxyCodeLine{83         \textcolor{comment}{// real rather than an int.}}
\DoxyCodeLine{84         \textcolor{keywordflow}{if} (real.find(\textcolor{charliteral}{'.'}) == std::string::npos \&\&}
\DoxyCodeLine{85             real.find(\textcolor{charliteral}{'e'}) == std::string::npos \&\&}
\DoxyCodeLine{86             real.find(\textcolor{charliteral}{'E'}) == std::string::npos) \{}
\DoxyCodeLine{87           real += \textcolor{stringliteral}{"{}.0"{}};}
\DoxyCodeLine{88         \}}
\DoxyCodeLine{89       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::isnan(val)) \{}
\DoxyCodeLine{90         \textcolor{comment}{// The JSON spec doesn't allow NaN and Infinity (since these are}}
\DoxyCodeLine{91         \textcolor{comment}{// objects in ECMAScript).  Use strings instead.}}
\DoxyCodeLine{92         real = \textcolor{stringliteral}{"{}\(\backslash\)"{}NaN\(\backslash\)"{}"{}};}
\DoxyCodeLine{93       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (val < 0) \{}
\DoxyCodeLine{94         real = \textcolor{stringliteral}{"{}\(\backslash\)"{}-\/Infinity\(\backslash\)"{}"{}};}
\DoxyCodeLine{95       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{96         real = \textcolor{stringliteral}{"{}\(\backslash\)"{}Infinity\(\backslash\)"{}"{}};}
\DoxyCodeLine{97       \}}
\DoxyCodeLine{98       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << real;}
\DoxyCodeLine{99       \textcolor{keywordflow}{break};}
\DoxyCodeLine{100     \}}
\DoxyCodeLine{101     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_a5439f73226e92a1b18813676130143f5}{TRACE\_VALUE\_TYPE\_POINTER}}:}
\DoxyCodeLine{102       \textcolor{comment}{// JSON only supports double and int numbers.}}
\DoxyCodeLine{103       \textcolor{comment}{// So as not to lose bits from a 64-\/bit pointer, output as a hex string.}}
\DoxyCodeLine{104       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}} << \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_pointer << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}};}
\DoxyCodeLine{105       \textcolor{keywordflow}{break};}
\DoxyCodeLine{106     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_a1dbc98bace361b91f9346adf80a4bcd8}{TRACE\_VALUE\_TYPE\_STRING}}:}
\DoxyCodeLine{107     \textcolor{keywordflow}{case} \mbox{\hyperlink{trace-event-no-perfetto_8h_a554a106347cb2db78ac01e9586ef7e87}{TRACE\_VALUE\_TYPE\_COPY\_STRING}}:}
\DoxyCodeLine{108       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_string == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{109         \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\(\backslash\)"{}nullptr\(\backslash\)"{}"{}};}
\DoxyCodeLine{110       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{111         \mbox{\hyperlink{namespacev8_1_1platform_1_1tracing_ad65062364a0b8f7e44a589d3e0b95c3b}{WriteJSONStringToStream}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.as\_string, \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}});}
\DoxyCodeLine{112       \}}
\DoxyCodeLine{113       \textcolor{keywordflow}{break};}
\DoxyCodeLine{114     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{115       \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{116   \}}
\DoxyCodeLine{117 \}}

\end{DoxyCode}


References stream\+\_\+, v8\+::internal\+::string, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+BOOL, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+COPY\+\_\+\+STRING, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+DOUBLE, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+INT, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+POINTER, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+STRING, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+UINT, v8\+::internal\+::tracing\+::type, UNREACHABLE, v8\+::internal\+::value, and v8\+::platform\+::tracing\+::\+Write\+JSONString\+To\+Stream().



Referenced by Append\+Trace\+Event().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4920282891d77df05c3249d333474b6e}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4920282891d77df05c3249d333474b6e}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!AppendArgValue@{AppendArgValue}}
\index{AppendArgValue@{AppendArgValue}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{AppendArgValue()}{AppendArgValue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+Append\+Arg\+Value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1ConvertableToTraceFormat}{v8\+::\+Convertable\+To\+Trace\+Format}} $\ast$}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 119 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{119                                                                     \{}
\DoxyCodeLine{120   \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} arg\_stringified;}
\DoxyCodeLine{121   \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}-\/>AppendAsTraceFormat(\&arg\_stringified);}
\DoxyCodeLine{122   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << arg\_stringified;}
\DoxyCodeLine{123 \}}

\end{DoxyCode}


References stream\+\_\+, v8\+::internal\+::string, and v8\+::internal\+::value.

\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a2684d4b80f4481caad4fe67dc2c71350}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a2684d4b80f4481caad4fe67dc2c71350}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!AppendTraceEvent@{AppendTraceEvent}}
\index{AppendTraceEvent@{AppendTraceEvent}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{AppendTraceEvent()}{AppendTraceEvent()}}
{\footnotesize\ttfamily void v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+Append\+Trace\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1TraceObject}{Trace\+Object}} $\ast$}]{trace\+\_\+event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1TraceWriter_a1dde3c2f986e08d9e0c3b7e3c0279661}{v8\+::platform\+::tracing\+::\+Trace\+Writer}}.



Definition at line 135 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{135                                                                \{}
\DoxyCodeLine{136   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_ac1381ad00effbd42d11c02cc923f79d1}{append\_comma\_}}) \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{137   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_ac1381ad00effbd42d11c02cc923f79d1}{append\_comma\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{138   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\{\(\backslash\)"{}pid\(\backslash\)"{}:"{}} << trace\_event-\/>pid()}
\DoxyCodeLine{139           << \textcolor{stringliteral}{"{},\(\backslash\)"{}tid\(\backslash\)"{}:"{}} << trace\_event-\/>tid()}
\DoxyCodeLine{140           << \textcolor{stringliteral}{"{},\(\backslash\)"{}ts\(\backslash\)"{}:"{}} << trace\_event-\/>ts()}
\DoxyCodeLine{141           << \textcolor{stringliteral}{"{},\(\backslash\)"{}tts\(\backslash\)"{}:"{}} << trace\_event-\/>tts() << \textcolor{stringliteral}{"{},\(\backslash\)"{}ph\(\backslash\)"{}:\(\backslash\)"{}"{}}}
\DoxyCodeLine{142           << trace\_event-\/>phase() << \textcolor{stringliteral}{"{}\(\backslash\)"{},\(\backslash\)"{}cat\(\backslash\)"{}:\(\backslash\)"{}"{}}}
\DoxyCodeLine{143           << \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1TracingController_affc76d3a1a531996d379941681815d5e}{TracingController::GetCategoryGroupName}}(}
\DoxyCodeLine{144                  trace\_event-\/>category\_enabled\_flag())}
\DoxyCodeLine{145           << \textcolor{stringliteral}{"{}\(\backslash\)"{},\(\backslash\)"{}name\(\backslash\)"{}:\(\backslash\)"{}"{}} << trace\_event-\/>name()}
\DoxyCodeLine{146           << \textcolor{stringliteral}{"{}\(\backslash\)"{},\(\backslash\)"{}dur\(\backslash\)"{}:"{}} << trace\_event-\/>duration()}
\DoxyCodeLine{147           << \textcolor{stringliteral}{"{},\(\backslash\)"{}tdur\(\backslash\)"{}:"{}} << trace\_event-\/>cpu\_duration();}
\DoxyCodeLine{148   \textcolor{keywordflow}{if} (trace\_event-\/>flags() \&}
\DoxyCodeLine{149       (\mbox{\hyperlink{trace-event-no-perfetto_8h_afd116bac8e67a7eafb2b21a62f0a383f}{TRACE\_EVENT\_FLAG\_FLOW\_IN}} | \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}})) \{}
\DoxyCodeLine{150     \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}bind\_id\(\backslash\)"{}:\(\backslash\)"{}0x"{}} << std::hex << trace\_event-\/>bind\_id() << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}}}
\DoxyCodeLine{151             << std::dec;}
\DoxyCodeLine{152     \textcolor{keywordflow}{if} (trace\_event-\/>flags() \& \mbox{\hyperlink{trace-event-no-perfetto_8h_afd116bac8e67a7eafb2b21a62f0a383f}{TRACE\_EVENT\_FLAG\_FLOW\_IN}}) \{}
\DoxyCodeLine{153       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}flow\_in\(\backslash\)"{}:true"{}};}
\DoxyCodeLine{154     \}}
\DoxyCodeLine{155     \textcolor{keywordflow}{if} (trace\_event-\/>flags() \& \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}}) \{}
\DoxyCodeLine{156       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}flow\_out\(\backslash\)"{}:true"{}};}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158   \}}
\DoxyCodeLine{159   \textcolor{keywordflow}{if} (trace\_event-\/>flags() \& \mbox{\hyperlink{trace-event-no-perfetto_8h_abb6d7dfc0ead11eef052473622884298}{TRACE\_EVENT\_FLAG\_HAS\_ID}}) \{}
\DoxyCodeLine{160     \textcolor{keywordflow}{if} (trace\_event-\/>scope() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{161       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}scope\(\backslash\)"{}:\(\backslash\)"{}"{}} << trace\_event-\/>scope() << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}};}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163     \textcolor{comment}{// So as not to lose bits from a 64-\/bit integer, output as a hex string.}}
\DoxyCodeLine{164     \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}id\(\backslash\)"{}:\(\backslash\)"{}0x"{}} << std::hex << trace\_event-\/>id() << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}}}
\DoxyCodeLine{165             << std::dec;}
\DoxyCodeLine{166   \}}
\DoxyCodeLine{167   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},\(\backslash\)"{}args\(\backslash\)"{}:\{"{}};}
\DoxyCodeLine{168   \textcolor{keyword}{const} \textcolor{keywordtype}{char}** arg\_names = trace\_event-\/>arg\_names();}
\DoxyCodeLine{169   \textcolor{keyword}{const} uint8\_t* arg\_types = trace\_event-\/>arg\_types();}
\DoxyCodeLine{170   TraceObject::ArgValue* arg\_values = trace\_event-\/>arg\_values();}
\DoxyCodeLine{171   std::unique\_ptr<v8::ConvertableToTraceFormat>* arg\_convertables =}
\DoxyCodeLine{172       trace\_event-\/>arg\_convertables();}
\DoxyCodeLine{173   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < trace\_event-\/>num\_args(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{174     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal}{i}} > 0) \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{},"{}};}
\DoxyCodeLine{175     \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}} << arg\_names[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}] << \textcolor{stringliteral}{"{}\(\backslash\)"{}:"{}};}
\DoxyCodeLine{176     \textcolor{keywordflow}{if} (arg\_types[\mbox{\hyperlink{namespacev8_1_1internal}{i}}] == \mbox{\hyperlink{trace-event-no-perfetto_8h_ae83588e498261b0a5081907cbb470ef5}{TRACE\_VALUE\_TYPE\_CONVERTABLE}}) \{}
\DoxyCodeLine{177       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5}{AppendArgValue}}(arg\_convertables[\mbox{\hyperlink{namespacev8_1_1internal}{i}}].get());}
\DoxyCodeLine{178     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{179       \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a4ed002dcb1bc79f21413497d9dc11ec5}{AppendArgValue}}(arg\_types[\mbox{\hyperlink{namespacev8_1_1internal}{i}}], arg\_values[\mbox{\hyperlink{namespacev8_1_1internal}{i}}]);}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181   \}}
\DoxyCodeLine{182   \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}{stream\_}} << \textcolor{stringliteral}{"{}\}\}"{}};}
\DoxyCodeLine{183   \textcolor{comment}{// TODO(fmeawad): Add support for Flow Events.}}
\DoxyCodeLine{184 \}}

\end{DoxyCode}


References append\+\_\+comma\+\_\+, Append\+Arg\+Value(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::arg\+\_\+convertables(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::arg\+\_\+names(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::arg\+\_\+types(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::arg\+\_\+values(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::bind\+\_\+id(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::category\+\_\+enabled\+\_\+flag(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::cpu\+\_\+duration(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::duration(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::flags(), v8\+::platform\+::tracing\+::\+Tracing\+Controller\+::\+Get\+Category\+Group\+Name(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::platform\+::tracing\+::\+Trace\+Object\+::id(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::name(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::num\+\_\+args(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::phase(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::pid(), v8\+::platform\+::tracing\+::\+Trace\+Object\+::scope(), stream\+\_\+, v8\+::platform\+::tracing\+::\+Trace\+Object\+::tid(), TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+IN, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+OUT, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+HAS\+\_\+\+ID, TRACE\+\_\+\+VALUE\+\_\+\+TYPE\+\_\+\+CONVERTABLE, v8\+::platform\+::tracing\+::\+Trace\+Object\+::ts(), and v8\+::platform\+::tracing\+::\+Trace\+Object\+::tts().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a2684d4b80f4481caad4fe67dc2c71350_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a627ece43e4be04e27ae968d3102d93b0}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_a627ece43e4be04e27ae968d3102d93b0}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!Flush@{Flush}}
\index{Flush@{Flush}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{Flush()}{Flush()}}
{\footnotesize\ttfamily void v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::\+Flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1platform_1_1tracing_1_1TraceWriter_acb377e35f2a881b0522d23b3153d9501}{v8\+::platform\+::tracing\+::\+Trace\+Writer}}.



Definition at line 186 of file trace-\/writer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{186 \{\}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_ac1381ad00effbd42d11c02cc923f79d1}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_ac1381ad00effbd42d11c02cc923f79d1}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!append\_comma\_@{append\_comma\_}}
\index{append\_comma\_@{append\_comma\_}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{append\_comma\_}{append\_comma\_}}
{\footnotesize\ttfamily bool v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::append\+\_\+comma\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 29 of file trace-\/writer.\+h.



Referenced by Append\+Trace\+Event().

\mbox{\Hypertarget{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}\label{classv8_1_1platform_1_1tracing_1_1JSONTraceWriter_adfa09462b4980f3b692ac5746f3919dc}} 
\index{v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}!stream\_@{stream\_}}
\index{stream\_@{stream\_}!v8::platform::tracing::JSONTraceWriter@{v8::platform::tracing::JSONTraceWriter}}
\doxysubsubsection{\texorpdfstring{stream\_}{stream\_}}
{\footnotesize\ttfamily std\+::ostream\& v8\+::platform\+::tracing\+::\+JSONTrace\+Writer\+::stream\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 28 of file trace-\/writer.\+h.



Referenced by Append\+Arg\+Value(), Append\+Trace\+Event(), JSONTrace\+Writer(), and $\sim$\+JSONTrace\+Writer().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/libplatform/tracing/\mbox{\hyperlink{trace-writer_8h}{trace-\/writer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/libplatform/tracing/\mbox{\hyperlink{trace-writer_8cc}{trace-\/writer.\+cc}}\end{DoxyCompactItemize}
