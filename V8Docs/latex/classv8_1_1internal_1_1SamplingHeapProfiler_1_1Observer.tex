\hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer}{}\doxysection{v8\+::internal\+::Sampling\+Heap\+Profiler\+::Observer Class Reference}
\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer}\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}


Inheritance diagram for v8\+::internal\+::Sampling\+Heap\+Profiler\+::Observer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Sampling\+Heap\+Profiler\+::Observer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a63eecdb66ae3351ca717df129e82e125}{Observer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a761e4e5929b1553283fd6a532822bb17}{heap}}, intptr\+\_\+t step\+\_\+size, uint64\+\_\+t rate, \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler}{Sampling\+Heap\+Profiler}} $\ast$profiler, \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator}{base\+::\+Random\+Number\+Generator}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a5332199bbac0f35e867020812a0b0b66}{random}})
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ade77f36cd9d5ad1bb78975f6e9d0174b}{Step}} (\mbox{\hyperlink{classint}{int}} bytes\+\_\+allocated, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} soon\+\_\+object, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}) override
\item 
intptr\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a915eb28c74644d4cada2a087c3a79a90}{Get\+Next\+Step\+Size}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
intptr\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741}{Get\+Next\+Sample\+Interval}} (uint64\+\_\+t rate)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler}{Sampling\+Heap\+Profiler}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ad909bad13dd311c7b7572d6bab91b375}{profiler\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}{heap\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator}{base\+::\+Random\+Number\+Generator}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ac4ceead9de67c92cad73bcab35970ba0}{random\+\_\+}}
\item 
uint64\+\_\+t const \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a188320410858639c7e6bcb410164a074}{rate\+\_\+}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 129 of file sampling-\/heap-\/profiler.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a63eecdb66ae3351ca717df129e82e125}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a63eecdb66ae3351ca717df129e82e125}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!Observer@{Observer}}
\index{Observer@{Observer}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{Observer()}{Observer()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::\+Observer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap,  }\item[{intptr\+\_\+t}]{step\+\_\+size,  }\item[{uint64\+\_\+t}]{rate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler}{Sampling\+Heap\+Profiler}} $\ast$}]{profiler,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator}{base\+::\+Random\+Number\+Generator}} $\ast$}]{random }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 131 of file sampling-\/heap-\/profiler.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{134         : \mbox{\hyperlink{classv8_1_1internal_1_1AllocationObserver_afd17faabb89efdf1211915e9e684a31f}{AllocationObserver}}(step\_size),}
\DoxyCodeLine{135           \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ad909bad13dd311c7b7572d6bab91b375}{profiler\_}}(profiler),}
\DoxyCodeLine{136           \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}{heap\_}}(\mbox{\hyperlink{namespaceheap}{heap}}),}
\DoxyCodeLine{137           \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ac4ceead9de67c92cad73bcab35970ba0}{random\_}}(\mbox{\hyperlink{flag-definitions_8h_a5332199bbac0f35e867020812a0b0b66}{random}}),}
\DoxyCodeLine{138           \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a188320410858639c7e6bcb410164a074}{rate\_}}(rate) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!GetNextSampleInterval@{GetNextSampleInterval}}
\index{GetNextSampleInterval@{GetNextSampleInterval}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{GetNextSampleInterval()}{GetNextSampleInterval()}}
{\footnotesize\ttfamily intptr\+\_\+t v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::\+Get\+Next\+Sample\+Interval (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{rate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 29 of file sampling-\/heap-\/profiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{29                                                                           \{}
\DoxyCodeLine{30   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sampling\_heap\_profiler\_suppress\_randomness)}
\DoxyCodeLine{31     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}intptr\_t\textcolor{keyword}{>}(rate);}
\DoxyCodeLine{32   \textcolor{keywordtype}{double} u = \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ac4ceead9de67c92cad73bcab35970ba0}{random\_}}-\/>\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_a3cb661fd70f4322d36792f98acd6ca7e}{NextDouble}}();}
\DoxyCodeLine{33   \textcolor{keywordtype}{double} next = (-\/\mbox{\hyperlink{namespacev8_1_1base_1_1ieee754_a3266ea29ca1587b1d68bbfe6872ffff6}{base::ieee754::log}}(u)) * rate;}
\DoxyCodeLine{34   \textcolor{keywordflow}{return} next < \mbox{\hyperlink{namespacev8_1_1internal_a12d50d7bb2c9d8a916ff0785e6eff241}{kTaggedSize}}}
\DoxyCodeLine{35              ? \mbox{\hyperlink{namespacev8_1_1internal_a12d50d7bb2c9d8a916ff0785e6eff241}{kTaggedSize}}}
\DoxyCodeLine{36              : (next > INT\_MAX ? INT\_MAX : \textcolor{keyword}{static\_cast<}intptr\_t\textcolor{keyword}{>}(next));}
\DoxyCodeLine{37 \}}

\end{DoxyCode}


References v8\+::internal\+::k\+Tagged\+Size, v8\+::base\+::ieee754\+::log(), v8\+::base\+::\+Random\+Number\+Generator\+::\+Next\+Double(), random\+\_\+, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Get\+Next\+Step\+Size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a915eb28c74644d4cada2a087c3a79a90}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a915eb28c74644d4cada2a087c3a79a90}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!GetNextStepSize@{GetNextStepSize}}
\index{GetNextStepSize@{GetNextStepSize}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{GetNextStepSize()}{GetNextStepSize()}}
{\footnotesize\ttfamily intptr\+\_\+t v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::\+Get\+Next\+Step\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classv8_1_1internal_1_1AllocationObserver_a91fb6ffe2d4b42ff7b4221dad89db465}{v8\+::internal\+::\+Allocation\+Observer}}.



Definition at line 151 of file sampling-\/heap-\/profiler.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{151 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a95572c238e7d98ce7959fe6da2701741}{GetNextSampleInterval}}(\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a188320410858639c7e6bcb410164a074}{rate\_}}); \}}

\end{DoxyCode}


References Get\+Next\+Sample\+Interval(), and rate\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a915eb28c74644d4cada2a087c3a79a90_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ade77f36cd9d5ad1bb78975f6e9d0174b}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ade77f36cd9d5ad1bb78975f6e9d0174b}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!Step@{Step}}
\index{Step@{Step}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{Step()}{Step()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::\+Step (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{bytes\+\_\+allocated,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{soon\+\_\+object,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1internal_1_1AllocationObserver_a41118152d2c9a9834a486eccf08043a5}{v8\+::internal\+::\+Allocation\+Observer}}.



Definition at line 141 of file sampling-\/heap-\/profiler.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{141                                                                               \{}
\DoxyCodeLine{142       \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}{heap\_}});}
\DoxyCodeLine{143       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a29636ce2b5c73518cc392133e5fa7203}{gc\_state}}() == \mbox{\hyperlink{classv8_1_1internal_1_1Heap_aee3f8b2c700602c6e8546212a2ac0f65a3d9a5665b3549e9c13e86d836d6fe98f}{Heap::NOT\_IN\_GC}});}
\DoxyCodeLine{144       \textcolor{keywordflow}{if} (soon\_object) \{}
\DoxyCodeLine{145         \textcolor{comment}{// TODO(ofrobots): it would be better to sample the next object rather}}
\DoxyCodeLine{146         \textcolor{comment}{// than skipping this sample epoch if soon\_object happens to be null.}}
\DoxyCodeLine{147         \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ad909bad13dd311c7b7572d6bab91b375}{profiler\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler_a39de70ab03f88baaba13c99692d63733}{SampleObject}}(soon\_object, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{148       \}}
\DoxyCodeLine{149     \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Heap\+::gc\+\_\+state(), heap\+\_\+, v8\+::internal\+::\+Heap\+::\+NOT\+\_\+\+IN\+\_\+\+GC, profiler\+\_\+, v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Sample\+Object(), size(), and USE.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ade77f36cd9d5ad1bb78975f6e9d0174b_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a0cf2bea4495348b6f189f88f8d9f58ed}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!heap\_@{heap\_}}
\index{heap\_@{heap\_}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{heap\_}{heap\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}}$\ast$ const v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::heap\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 156 of file sampling-\/heap-\/profiler.\+h.



Referenced by Step().

\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ad909bad13dd311c7b7572d6bab91b375}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ad909bad13dd311c7b7572d6bab91b375}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!profiler\_@{profiler\_}}
\index{profiler\_@{profiler\_}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{profiler\_}{profiler\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1SamplingHeapProfiler}{Sampling\+Heap\+Profiler}}$\ast$ const v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::profiler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 155 of file sampling-\/heap-\/profiler.\+h.



Referenced by Step().

\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ac4ceead9de67c92cad73bcab35970ba0}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_ac4ceead9de67c92cad73bcab35970ba0}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!random\_@{random\_}}
\index{random\_@{random\_}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{random\_}{random\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator}{base\+::\+Random\+Number\+Generator}}$\ast$ const v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::random\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 157 of file sampling-\/heap-\/profiler.\+h.



Referenced by Get\+Next\+Sample\+Interval().

\mbox{\Hypertarget{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a188320410858639c7e6bcb410164a074}\label{classv8_1_1internal_1_1SamplingHeapProfiler_1_1Observer_a188320410858639c7e6bcb410164a074}} 
\index{v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}!rate\_@{rate\_}}
\index{rate\_@{rate\_}!v8::internal::SamplingHeapProfiler::Observer@{v8::internal::SamplingHeapProfiler::Observer}}
\doxysubsubsection{\texorpdfstring{rate\_}{rate\_}}
{\footnotesize\ttfamily uint64\+\_\+t const v8\+::internal\+::\+Sampling\+Heap\+Profiler\+::\+Observer\+::rate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 158 of file sampling-\/heap-\/profiler.\+h.



Referenced by Get\+Next\+Step\+Size().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{sampling-heap-profiler_8h}{sampling-\/heap-\/profiler.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{sampling-heap-profiler_8cc}{sampling-\/heap-\/profiler.\+cc}}\end{DoxyCompactItemize}
