\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_1_1FrameFinder}{Frame\+Finder}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_1_1ClearThreadInWasmScope}{Clear\+Thread\+In\+Wasm\+Scope}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3}{Get\+Wasm\+Instance\+Data\+On\+Stack\+Top}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a91d69493dde3063996c16f6b5e8d7b90}{Get\+Native\+Context\+From\+Wasm\+Instance\+On\+Stack\+Top}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68}{Throw\+Wasm\+Error}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} message, std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$$>$ args=\{\})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae1e6124be30b8dacefdd21adc65e2bb0}{Throw\+Wasm\+Suspend\+Error}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} message)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1FixedArray}{Fixed\+Array}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acf542041241880515a58f3298ce06abe}{Allocate\+Feedback\+Vector}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ trusted\+\_\+instance\+\_\+data, \mbox{\hyperlink{classint}{int}} declared\+\_\+func\+\_\+index)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ac2601d341585c807ae1c41b6cd8de95d}{Replace\+JSTo\+Wasm\+Wrapper}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ trusted\+\_\+instance\+\_\+data, \mbox{\hyperlink{classint}{int}} function\+\_\+index, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$ wrapper\+\_\+code, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} receiver\+\_\+is\+\_\+first\+\_\+param)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a1ef1e4fe4b221522968cae09eedb1698}{Throw\+Table\+Out\+Of\+Bounds}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ trusted\+\_\+instance\+\_\+data)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a244ed2ad6bdf7827d1fc4c42e69dfb2f}{Execute\+Wasm\+Debug\+Breaks}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$ trusted\+\_\+instance\+\_\+data, Wasm\+Frame $\ast$frame)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae5d92efbde0a759684712bbafce47e1c}{Measure\+Wtf8}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{classT}{T}} $>$ wtf16)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}{Measure\+Wtf8}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{string}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51d21e1fd8e8cc566203aa01a4edb33a}{Max\+Encoded\+Size}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ wtf16)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6}{Max\+Encoded\+Size}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{namespacev8_1_1base_a1961a4852ced3c23f4d43de6f91d18d6}{base\+::uc16}} $>$ wtf16)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aaa99577bd621fcacd7b4edcf707181ff}{Has\+Unpaired\+Surrogate}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ wtf16)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a}{Has\+Unpaired\+Surrogate}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{namespacev8_1_1base_a1961a4852ced3c23f4d43de6f91d18d6}{base\+::uc16}} $>$ wtf16)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a5fd5e9e3d9674130b72b2f680aaa3459}{Encode\+Wtf8}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ char $>$ bytes, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} offset, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{classT}{T}} $>$ wtf16, \mbox{\hyperlink{namespaceunibrow_a091820d4fd2384425cd48bc8a9189f43}{unibrow\+::\+Utf8\+Variant}} variant, \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} $\ast$message, \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} out\+\_\+of\+\_\+bounds)
\item 
{\footnotesize template$<$typename Get\+Writable\+Bytes $>$ }\\\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3}{Encode\+Wtf8}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespaceunibrow_a091820d4fd2384425cd48bc8a9189f43}{unibrow\+::\+Utf8\+Variant}} variant, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{string}}, Get\+Writable\+Bytes get\+\_\+writable\+\_\+bytes, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} offset, \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} out\+\_\+of\+\_\+bounds\+\_\+message)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acf542041241880515a58f3298ce06abe}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acf542041241880515a58f3298ce06abe}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!AllocateFeedbackVector@{AllocateFeedbackVector}}
\index{AllocateFeedbackVector@{AllocateFeedbackVector}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AllocateFeedbackVector()}{AllocateFeedbackVector()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1FixedArray}{Fixed\+Array}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Allocate\+Feedback\+Vector (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{trusted\+\_\+instance\+\_\+data,  }\item[{\mbox{\hyperlink{classint}{int}}}]{declared\+\_\+func\+\_\+index }\end{DoxyParamCaption})}



Definition at line 460 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{463                              \{}
\DoxyCodeLine{464   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(isolate-\/>context().is\_null());}
\DoxyCodeLine{465   isolate-\/>set\_context(trusted\_instance\_data-\/>native\_context());}
\DoxyCodeLine{466   \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_a09dbf9baefb793fd78912d6ef89f9dde}{wasm::WasmModule}}* module =}
\DoxyCodeLine{467       trusted\_instance\_data-\/>native\_module()-\/>module();}
\DoxyCodeLine{468 }
\DoxyCodeLine{469   \textcolor{keywordtype}{int} func\_index = declared\_func\_index + module-\/>num\_imported\_functions;}
\DoxyCodeLine{470   \textcolor{keywordtype}{int} num\_slots = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_af31b723a78f2635ba90e52bce073f16d}{NumFeedbackSlots}}(module, func\_index);}
\DoxyCodeLine{471   DirectHandle<FixedArray> vector =}
\DoxyCodeLine{472       isolate-\/>factory()-\/>NewFixedArrayWithZeroes(num\_slots);}
\DoxyCodeLine{473   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(trusted\_instance\_data-\/>feedback\_vectors()-\/>get(declared\_func\_index),}
\DoxyCodeLine{474             \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a319c3c546d24f5dd8d68074cd98b15a3}{Smi::zero}}());}
\DoxyCodeLine{475   trusted\_instance\_data-\/>feedback\_vectors()-\/>set(declared\_func\_index, *vector);}
\DoxyCodeLine{476   isolate-\/>set\_context(Tagged<Context>());}
\DoxyCodeLine{477   \textcolor{keywordflow}{return} *vector;}
\DoxyCodeLine{478 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::context(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Fixed\+Array\+With\+Zeroes(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::num\+\_\+imported\+\_\+functions, v8\+::internal\+::wasm\+::\+Num\+Feedback\+Slots(), v8\+::internal\+::\+Isolate\+::set\+\_\+context(), and v8\+::internal\+::\+Smi\+::zero().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acf542041241880515a58f3298ce06abe_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acf542041241880515a58f3298ce06abe_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a5fd5e9e3d9674130b72b2f680aaa3459}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a5fd5e9e3d9674130b72b2f680aaa3459}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!EncodeWtf8@{EncodeWtf8}}
\index{EncodeWtf8@{EncodeWtf8}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{EncodeWtf8()}{EncodeWtf8()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\mbox{\hyperlink{classint}{int}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Encode\+Wtf8 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ char $>$}]{bytes,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{offset,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{classT}{T}} $>$}]{wtf16,  }\item[{\mbox{\hyperlink{namespaceunibrow_a091820d4fd2384425cd48bc8a9189f43}{unibrow\+::\+Utf8\+Variant}}}]{variant,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} $\ast$}]{message,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}}}]{out\+\_\+of\+\_\+bounds }\end{DoxyParamCaption})}



Definition at line 1629 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1631                                                                         \{}
\DoxyCodeLine{1632   \textcolor{comment}{// The first check is a quick estimate to decide whether the second check}}
\DoxyCodeLine{1633   \textcolor{comment}{// is worth the computation.}}
\DoxyCodeLine{1634   \textcolor{keywordflow}{if} (!base::IsInBounds<size\_t>(offset, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6}{MaxEncodedSize}}(wtf16), bytes.size()) \&\&}
\DoxyCodeLine{1635       !base::IsInBounds<size\_t>(offset, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}{MeasureWtf8}}(wtf16), bytes.size())) \{}
\DoxyCodeLine{1636     *message = out\_of\_bounds;}
\DoxyCodeLine{1637     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1638   \}}
\DoxyCodeLine{1639 }
\DoxyCodeLine{1640   \textcolor{keywordtype}{bool} replace\_invalid = \textcolor{keyword}{false};}
\DoxyCodeLine{1641   \textcolor{keywordflow}{switch} (variant) \{}
\DoxyCodeLine{1642     \textcolor{keywordflow}{case} unibrow::Utf8Variant::kWtf8:}
\DoxyCodeLine{1643       \textcolor{keywordflow}{break};}
\DoxyCodeLine{1644     \textcolor{keywordflow}{case} unibrow::Utf8Variant::kUtf8:}
\DoxyCodeLine{1645       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a}{HasUnpairedSurrogate}}(wtf16)) \{}
\DoxyCodeLine{1646         *message = MessageTemplate::kWasmTrapStringIsolatedSurrogate;}
\DoxyCodeLine{1647         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1648       \}}
\DoxyCodeLine{1649       \textcolor{keywordflow}{break};}
\DoxyCodeLine{1650     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespaceunibrow_a091820d4fd2384425cd48bc8a9189f43af7d299bfd7372d64a2436dfa5ebe9b9d}{unibrow::Utf8Variant::kLossyUtf8}}:}
\DoxyCodeLine{1651       replace\_invalid = \textcolor{keyword}{true};}
\DoxyCodeLine{1652       \textcolor{keywordflow}{break};}
\DoxyCodeLine{1653     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{1654       \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{1655   \}}
\DoxyCodeLine{1656 }
\DoxyCodeLine{1657   \textcolor{keywordtype}{bool} write\_null = \textcolor{keyword}{false};}
\DoxyCodeLine{1658   \mbox{\hyperlink{structunibrow_1_1Utf8_1_1EncodingResult}{unibrow::Utf8::EncodingResult}} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{1659       \mbox{\hyperlink{classunibrow_1_1Utf8_acf0af099acd418650bf1a8080f14e926}{unibrow::Utf8::Encode}}(wtf16, bytes.begin() + offset,}
\DoxyCodeLine{1660                             bytes.size() -\/ offset, write\_null, replace\_invalid);}
\DoxyCodeLine{1661   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.characters\_processed, wtf16.size());}
\DoxyCodeLine{1662   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.bytes\_written, \mbox{\hyperlink{namespacev8_1_1internal_ad03e50e4d15ee0da6a722254f350e7eb}{kMaxInt}});}
\DoxyCodeLine{1663   \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.bytes\_written);}
\DoxyCodeLine{1664 \}}

\end{DoxyCode}


References v8\+::base\+::\+Vector$<$ T $>$\+::begin(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+LE, unibrow\+::\+Utf8\+::\+Encode(), Has\+Unpaired\+Surrogate(), unibrow\+::k\+Lossy\+Utf8, v8\+::internal\+::k\+Max\+Int, Max\+Encoded\+Size(), Measure\+Wtf8(), v8\+::base\+::internal\+::result, v8\+::base\+::\+Vector$<$ T $>$\+::size(), and v8\+::internal\+::\+UNREACHABLE().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a5fd5e9e3d9674130b72b2f680aaa3459_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!EncodeWtf8@{EncodeWtf8}}
\index{EncodeWtf8@{EncodeWtf8}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{EncodeWtf8()}{EncodeWtf8()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Get\+Writable\+Bytes $>$ \\
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Encode\+Wtf8 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespaceunibrow_a091820d4fd2384425cd48bc8a9189f43}{unibrow\+::\+Utf8\+Variant}}}]{variant,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{string,  }\item[{Get\+Writable\+Bytes}]{get\+\_\+writable\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{offset,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}}}]{out\+\_\+of\+\_\+bounds\+\_\+message }\end{DoxyParamCaption})}



Definition at line 1666 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1669                                                                  \{}
\DoxyCodeLine{1670   \textcolor{keywordtype}{string} = String::Flatten(isolate, \textcolor{keywordtype}{string});}
\DoxyCodeLine{1671   \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{MessageTemplate}} message;}
\DoxyCodeLine{1672   \textcolor{keywordtype}{int} written;}
\DoxyCodeLine{1673   \{}
\DoxyCodeLine{1674     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1675     String::FlatContent content = \textcolor{keywordtype}{string}-\/>GetFlatContent(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}});}
\DoxyCodeLine{1676     base::Vector<char> dst = get\_writable\_bytes(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}});}
\DoxyCodeLine{1677     written = content.IsOneByte()}
\DoxyCodeLine{1678                   ? \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3}{EncodeWtf8}}(dst, offset, content.ToOneByteVector(), variant,}
\DoxyCodeLine{1679                                \&message, out\_of\_bounds\_message)}
\DoxyCodeLine{1680                   : \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3}{EncodeWtf8}}(dst, offset, content.ToUC16Vector(), variant,}
\DoxyCodeLine{1681                                \&message, out\_of\_bounds\_message);}
\DoxyCodeLine{1682   \}}
\DoxyCodeLine{1683   \textcolor{keywordflow}{if} (written < 0) \{}
\DoxyCodeLine{1684     \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(message, MessageTemplate::kNone);}
\DoxyCodeLine{1685     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68}{ThrowWasmError}}(isolate, message);}
\DoxyCodeLine{1686   \}}
\DoxyCodeLine{1687   \textcolor{keywordflow}{return} *isolate-\/>factory()-\/>NewNumberFromInt(written);}
\DoxyCodeLine{1688 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NE, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+Is\+One\+Byte(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Number\+From\+Int(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, Throw\+Wasm\+Error(), v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+To\+One\+Byte\+Vector(), and v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+To\+UC16\+Vector().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), and v8\+::internal\+::\+To\+Utf8\+Lossy().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a7efab2aa93102558d9e4dfe2bc5dc5d3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a244ed2ad6bdf7827d1fc4c42e69dfb2f}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a244ed2ad6bdf7827d1fc4c42e69dfb2f}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!ExecuteWasmDebugBreaks@{ExecuteWasmDebugBreaks}}
\index{ExecuteWasmDebugBreaks@{ExecuteWasmDebugBreaks}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ExecuteWasmDebugBreaks()}{ExecuteWasmDebugBreaks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Execute\+Wasm\+Debug\+Breaks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{trusted\+\_\+instance\+\_\+data,  }\item[{Wasm\+Frame $\ast$}]{frame }\end{DoxyParamCaption})}



Definition at line 1016 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1019                       \{}
\DoxyCodeLine{1020   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}\{trusted\_instance\_data-\/>module\_object()-\/>script(),}
\DoxyCodeLine{1021                               isolate\};}
\DoxyCodeLine{1022   \textcolor{keyword}{auto}* debug\_info = trusted\_instance\_data-\/>native\_module()-\/>GetDebugInfo();}
\DoxyCodeLine{1023 }
\DoxyCodeLine{1024   \textcolor{comment}{// Enter the debugger.}}
\DoxyCodeLine{1025   DebugScope debug\_scope(isolate-\/>debug());}
\DoxyCodeLine{1026 }
\DoxyCodeLine{1027   \textcolor{comment}{// Check for instrumentation breakpoints first, but still execute regular}}
\DoxyCodeLine{1028   \textcolor{comment}{// breakpoints afterwards.}}
\DoxyCodeLine{1029   \textcolor{keywordtype}{bool} paused\_on\_instrumentation = \textcolor{keyword}{false};}
\DoxyCodeLine{1030   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>break\_on\_entry(),}
\DoxyCodeLine{1031             !!trusted\_instance\_data-\/>break\_on\_entry());}
\DoxyCodeLine{1032   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>break\_on\_entry()) \{}
\DoxyCodeLine{1033     MaybeDirectHandle<FixedArray> maybe\_on\_entry\_breakpoints =}
\DoxyCodeLine{1034         WasmScript::CheckBreakPoints(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}},}
\DoxyCodeLine{1035                                      WasmScript::kOnEntryBreakpointPosition,}
\DoxyCodeLine{1036                                      frame-\/>id());}
\DoxyCodeLine{1037     \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>set\_break\_on\_entry(\textcolor{keyword}{false});}
\DoxyCodeLine{1038     \textcolor{comment}{// Update the "{}break\_on\_entry"{} flag on all live instances.}}
\DoxyCodeLine{1039     \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{i::Tagged<i::WeakArrayList>}} weak\_instance\_list =}
\DoxyCodeLine{1040         \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>wasm\_weak\_instance\_list();}
\DoxyCodeLine{1041     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < weak\_instance\_list-\/>length(); ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{1042       \textcolor{keywordflow}{if} (weak\_instance\_list-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}).\mbox{\hyperlink{classv8_1_1internal_1_1TaggedImpl_a5d84dde6d0c8149b4560d7c79cf8f1a3}{IsCleared}}()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1043       i::Cast<i::WasmInstanceObject>(weak\_instance\_list-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}).\mbox{\hyperlink{classv8_1_1internal_1_1TaggedImpl_a941f4af4ddba9f09e9ff1ca6e4382c36}{GetHeapObject}}())}
\DoxyCodeLine{1044           -\/>trusted\_data(isolate)}
\DoxyCodeLine{1045           -\/>set\_break\_on\_entry(\textcolor{keyword}{false});}
\DoxyCodeLine{1046     \}}
\DoxyCodeLine{1047     \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!trusted\_instance\_data-\/>break\_on\_entry());}
\DoxyCodeLine{1048     \textcolor{keywordflow}{if} (!maybe\_on\_entry\_breakpoints.is\_null()) \{}
\DoxyCodeLine{1049       isolate-\/>debug()-\/>OnInstrumentationBreak();}
\DoxyCodeLine{1050       paused\_on\_instrumentation = \textcolor{keyword}{true};}
\DoxyCodeLine{1051     \}}
\DoxyCodeLine{1052   \}}
\DoxyCodeLine{1053 }
\DoxyCodeLine{1054   \textcolor{keywordflow}{if} (debug\_info-\/>IsStepping(frame) \&\& !debug\_info-\/>IsFrameBlackboxed(frame)) \{}
\DoxyCodeLine{1055     debug\_info-\/>ClearStepping(isolate);}
\DoxyCodeLine{1056     \mbox{\hyperlink{namespacev8_1_1debug_a412bdccdbccfb608f2fc21e4a1ce92ef}{StepAction}} step\_action = isolate-\/>debug()-\/>last\_step\_action();}
\DoxyCodeLine{1057     isolate-\/>debug()-\/>ClearStepping();}
\DoxyCodeLine{1058     isolate-\/>debug()-\/>OnDebugBreak(isolate-\/>factory()-\/>empty\_fixed\_array(),}
\DoxyCodeLine{1059                                    step\_action);}
\DoxyCodeLine{1060     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{1061   \}}
\DoxyCodeLine{1062 }
\DoxyCodeLine{1063   \textcolor{comment}{// Check whether we hit a breakpoint.}}
\DoxyCodeLine{1064   DirectHandle<FixedArray> breakpoints;}
\DoxyCodeLine{1065   \textcolor{keywordflow}{if} (WasmScript::CheckBreakPoints(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, frame-\/>position(),}
\DoxyCodeLine{1066                                    frame-\/>id())}
\DoxyCodeLine{1067           .ToHandle(\&breakpoints)) \{}
\DoxyCodeLine{1068     debug\_info-\/>ClearStepping(isolate);}
\DoxyCodeLine{1069     \mbox{\hyperlink{namespacev8_1_1debug_a412bdccdbccfb608f2fc21e4a1ce92ef}{StepAction}} step\_action = isolate-\/>debug()-\/>last\_step\_action();}
\DoxyCodeLine{1070     isolate-\/>debug()-\/>ClearStepping();}
\DoxyCodeLine{1071     \textcolor{keywordflow}{if} (isolate-\/>debug()-\/>break\_points\_active()) \{}
\DoxyCodeLine{1072       \textcolor{comment}{// We hit one or several breakpoints. Notify the debug listeners.}}
\DoxyCodeLine{1073       isolate-\/>debug()-\/>OnDebugBreak(breakpoints, step\_action);}
\DoxyCodeLine{1074     \}}
\DoxyCodeLine{1075     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{1076   \}}
\DoxyCodeLine{1077 }
\DoxyCodeLine{1078   \textcolor{keywordflow}{return} paused\_on\_instrumentation;}
\DoxyCodeLine{1079 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Debug\+::break\+\_\+points\+\_\+active(), v8\+::internal\+::\+Wasm\+Script\+::\+Check\+Break\+Points(), v8\+::internal\+::\+Debug\+::\+Clear\+Stepping(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Isolate\+::debug(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Get\+Heap\+Object(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::is\+\_\+null(), v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Is\+Cleared(), v8\+::internal\+::\+Wasm\+Script\+::k\+On\+Entry\+Breakpoint\+Position, v8\+::internal\+::\+Debug\+::last\+\_\+step\+\_\+action(), v8\+::internal\+::\+Debug\+::\+On\+Debug\+Break(), v8\+::internal\+::\+Debug\+::\+On\+Instrumentation\+Break(), and v8\+::internal\+::script.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a244ed2ad6bdf7827d1fc4c42e69dfb2f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a244ed2ad6bdf7827d1fc4c42e69dfb2f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a91d69493dde3063996c16f6b5e8d7b90}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a91d69493dde3063996c16f6b5e8d7b90}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!GetNativeContextFromWasmInstanceOnStackTop@{GetNativeContextFromWasmInstanceOnStackTop}}
\index{GetNativeContextFromWasmInstanceOnStackTop@{GetNativeContextFromWasmInstanceOnStackTop}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetNativeContextFromWasmInstanceOnStackTop()}{GetNativeContextFromWasmInstanceOnStackTop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Get\+Native\+Context\+From\+Wasm\+Instance\+On\+Stack\+Top (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 102 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{102                                                                              \{}
\DoxyCodeLine{103   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3}{GetWasmInstanceDataOnStackTop}}(isolate)-\/>native\_context();}
\DoxyCodeLine{104 \}}

\end{DoxyCode}


References Get\+Wasm\+Instance\+Data\+On\+Stack\+Top().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a91d69493dde3063996c16f6b5e8d7b90_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a91d69493dde3063996c16f6b5e8d7b90_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!GetWasmInstanceDataOnStackTop@{GetWasmInstanceDataOnStackTop}}
\index{GetWasmInstanceDataOnStackTop@{GetWasmInstanceDataOnStackTop}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetWasmInstanceDataOnStackTop()}{GetWasmInstanceDataOnStackTop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Get\+Wasm\+Instance\+Data\+On\+Stack\+Top (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 87 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{88                       \{}
\DoxyCodeLine{89   \mbox{\hyperlink{namespacev8_1_1base_aed4219b45684a3840c8b930b5df90ea9}{Address}} fp = Isolate::c\_entry\_fp(isolate-\/>thread\_local\_top());}
\DoxyCodeLine{90   fp = Memory<Address>(fp + ExitFrameConstants::kCallerFPOffset);}
\DoxyCodeLine{91 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{92   intptr\_t marker =}
\DoxyCodeLine{93       Memory<intptr\_t>(fp + CommonFrameConstants::kContextOrFrameTypeOffset);}
\DoxyCodeLine{94   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(StackFrame::MarkerToType(marker) == StackFrame::WASM ||}
\DoxyCodeLine{95          StackFrame::MarkerToType(marker) == StackFrame::WASM\_SEGMENT\_START);}
\DoxyCodeLine{96 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{97   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} trusted\_instance\_data(}
\DoxyCodeLine{98       Memory<Address>(fp + WasmFrameConstants::kWasmInstanceDataOffset));}
\DoxyCodeLine{99   \textcolor{keywordflow}{return} Cast<WasmTrustedInstanceData>(trusted\_instance\_data);}
\DoxyCodeLine{100 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::c\+\_\+entry\+\_\+fp(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Common\+Frame\+Constants\+::k\+Caller\+FPOffset, v8\+::internal\+::\+Common\+Frame\+Constants\+::k\+Context\+Or\+Frame\+Type\+Offset, v8\+::internal\+::\+Stack\+Frame\+::\+Marker\+To\+Type(), and v8\+::internal\+::\+Isolate\+::thread\+\_\+local\+\_\+top().



Referenced by Get\+Native\+Context\+From\+Wasm\+Instance\+On\+Stack\+Top().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_afffb0fd4e34492a5284b3455ea3fd0b3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!HasUnpairedSurrogate@{HasUnpairedSurrogate}}
\index{HasUnpairedSurrogate@{HasUnpairedSurrogate}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{HasUnpairedSurrogate()}{HasUnpairedSurrogate()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Has\+Unpaired\+Surrogate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{namespacev8_1_1base_a1961a4852ced3c23f4d43de6f91d18d6}{base\+::uc16}} $>$}]{wtf16 }\end{DoxyParamCaption})}



Definition at line 1625 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1625                                                             \{}
\DoxyCodeLine{1626   \textcolor{keywordflow}{return} \mbox{\hyperlink{classunibrow_1_1Utf16_abb9b7169634bfe193593c9f2b4f2507b}{unibrow::Utf16::HasUnpairedSurrogate}}(wtf16.begin(), wtf16.size());}
\DoxyCodeLine{1627 \}}

\end{DoxyCode}


References v8\+::base\+::\+Vector$<$ T $>$\+::begin(), unibrow\+::\+Utf16\+::\+Has\+Unpaired\+Surrogate(), and v8\+::base\+::\+Vector$<$ T $>$\+::size().



Referenced by Encode\+Wtf8().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a2f948163dfe85ae955af951a64d4690a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aaa99577bd621fcacd7b4edcf707181ff}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aaa99577bd621fcacd7b4edcf707181ff}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!HasUnpairedSurrogate@{HasUnpairedSurrogate}}
\index{HasUnpairedSurrogate@{HasUnpairedSurrogate}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{HasUnpairedSurrogate()}{HasUnpairedSurrogate()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Has\+Unpaired\+Surrogate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{wtf16 }\end{DoxyParamCaption})}



Definition at line 1624 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1624 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!MaxEncodedSize@{MaxEncodedSize}}
\index{MaxEncodedSize@{MaxEncodedSize}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MaxEncodedSize()}{MaxEncodedSize()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Max\+Encoded\+Size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{namespacev8_1_1base_a1961a4852ced3c23f4d43de6f91d18d6}{base\+::uc16}} $>$}]{wtf16 }\end{DoxyParamCaption})}



Definition at line 1619 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1619                                                         \{}
\DoxyCodeLine{1620   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(wtf16.size() < std::numeric\_limits<size\_t>::max() /}
\DoxyCodeLine{1621                             \mbox{\hyperlink{classunibrow_1_1Utf8_ac950664b85f1ad13505134334f32d0c5}{unibrow::Utf8::kMax16BitCodeUnitSize}});}
\DoxyCodeLine{1622   \textcolor{keywordflow}{return} wtf16.size() * \mbox{\hyperlink{classunibrow_1_1Utf8_ac950664b85f1ad13505134334f32d0c5}{unibrow::Utf8::kMax16BitCodeUnitSize}};}
\DoxyCodeLine{1623 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), unibrow\+::\+Utf8\+::k\+Max16\+Bit\+Code\+Unit\+Size, and v8\+::base\+::\+Vector$<$ T $>$\+::size().



Referenced by Encode\+Wtf8().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_aa44fd5b10a8a98ef975ddebb11d2f6e6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51d21e1fd8e8cc566203aa01a4edb33a}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51d21e1fd8e8cc566203aa01a4edb33a}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!MaxEncodedSize@{MaxEncodedSize}}
\index{MaxEncodedSize@{MaxEncodedSize}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MaxEncodedSize()}{MaxEncodedSize()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Max\+Encoded\+Size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{wtf16 }\end{DoxyParamCaption})}



Definition at line 1614 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1614                                                        \{}
\DoxyCodeLine{1615   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(wtf16.size() < std::numeric\_limits<size\_t>::max() /}
\DoxyCodeLine{1616                             \mbox{\hyperlink{classunibrow_1_1Utf8_aa669d2994bd4d8b4700f5fdd933db133}{unibrow::Utf8::kMax8BitCodeUnitSize}});}
\DoxyCodeLine{1617   \textcolor{keywordflow}{return} wtf16.size() * \mbox{\hyperlink{classunibrow_1_1Utf8_aa669d2994bd4d8b4700f5fdd933db133}{unibrow::Utf8::kMax8BitCodeUnitSize}};}
\DoxyCodeLine{1618 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), unibrow\+::\+Utf8\+::k\+Max8\+Bit\+Code\+Unit\+Size, and v8\+::base\+::\+Vector$<$ T $>$\+::size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51d21e1fd8e8cc566203aa01a4edb33a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae5d92efbde0a759684712bbafce47e1c}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae5d92efbde0a759684712bbafce47e1c}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!MeasureWtf8@{MeasureWtf8}}
\index{MeasureWtf8@{MeasureWtf8}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MeasureWtf8()}{MeasureWtf8()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\mbox{\hyperlink{classint}{int}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Measure\+Wtf8 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const \mbox{\hyperlink{classT}{T}} $>$}]{wtf16 }\end{DoxyParamCaption})}



Definition at line 1593 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1593                                            \{}
\DoxyCodeLine{1594   \textcolor{keywordtype}{int} previous = \mbox{\hyperlink{classunibrow_1_1Utf16_a1160051ffd27a644ec813172985b3002}{unibrow::Utf16::kNoPreviousCharacter}};}
\DoxyCodeLine{1595   \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = 0;}
\DoxyCodeLine{1596   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(wtf16.size() <= String::kMaxLength);}
\DoxyCodeLine{1597   static\_assert(String::kMaxLength <=}
\DoxyCodeLine{1598                 (\mbox{\hyperlink{namespacev8_1_1internal_ad03e50e4d15ee0da6a722254f350e7eb}{kMaxInt}} / \mbox{\hyperlink{classunibrow_1_1Utf8_a863e13744b7f1bafb2e7cefa88db22e8}{unibrow::Utf8::kMaxEncodedSize}}));}
\DoxyCodeLine{1599   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < wtf16.size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{1600     \textcolor{keywordtype}{int} current = wtf16[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}];}
\DoxyCodeLine{1601     \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} += \mbox{\hyperlink{classunibrow_1_1Utf8_a5c6a30a8610649fee6dbb05057862113}{unibrow::Utf8::Length}}(current, previous);}
\DoxyCodeLine{1602     previous = current;}
\DoxyCodeLine{1603   \}}
\DoxyCodeLine{1604   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}};}
\DoxyCodeLine{1605 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, unibrow\+::\+Utf8\+::k\+Max\+Encoded\+Size, v8\+::internal\+::k\+Max\+Int, v8\+::internal\+::\+String\+::k\+Max\+Length, unibrow\+::\+Utf16\+::k\+No\+Previous\+Character, v8\+::internal\+::length, unibrow\+::\+Utf8\+::\+Length(), and v8\+::base\+::\+Vector$<$ T $>$\+::size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae5d92efbde0a759684712bbafce47e1c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!MeasureWtf8@{MeasureWtf8}}
\index{MeasureWtf8@{MeasureWtf8}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MeasureWtf8()}{MeasureWtf8()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Measure\+Wtf8 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{string }\end{DoxyParamCaption})}



Definition at line 1606 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1606                                                                \{}
\DoxyCodeLine{1607   \textcolor{keywordtype}{string} = String::Flatten(isolate, \textcolor{keywordtype}{string});}
\DoxyCodeLine{1608   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1609   String::FlatContent content = \textcolor{keywordtype}{string}-\/>GetFlatContent(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}});}
\DoxyCodeLine{1610   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(content.IsFlat());}
\DoxyCodeLine{1611   \textcolor{keywordflow}{return} content.IsOneByte() ? \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}{MeasureWtf8}}(content.ToOneByteVector())}
\DoxyCodeLine{1612                              : \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d}{MeasureWtf8}}(content.ToUC16Vector());}
\DoxyCodeLine{1613 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+Is\+Flat(), v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+Is\+One\+Byte(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+To\+One\+Byte\+Vector(), and v8\+::internal\+::\+String\+::\+Flat\+Content\+::\+To\+UC16\+Vector().



Referenced by Encode\+Wtf8(), v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), and v8\+::internal\+::\+To\+Utf8\+Lossy().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_acb752bcb6f3ce858f98cdc63e936fa2d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ac2601d341585c807ae1c41b6cd8de95d}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ac2601d341585c807ae1c41b6cd8de95d}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!ReplaceJSToWasmWrapper@{ReplaceJSToWasmWrapper}}
\index{ReplaceJSToWasmWrapper@{ReplaceJSToWasmWrapper}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ReplaceJSToWasmWrapper()}{ReplaceJSToWasmWrapper()}}
{\footnotesize\ttfamily void v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Replace\+JSTo\+Wasm\+Wrapper (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{trusted\+\_\+instance\+\_\+data,  }\item[{\mbox{\hyperlink{classint}{int}}}]{function\+\_\+index,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$}]{wrapper\+\_\+code,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{receiver\+\_\+is\+\_\+first\+\_\+param }\end{DoxyParamCaption})}



Definition at line 553 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{556                                   \{}
\DoxyCodeLine{557   Tagged<WasmFuncRef> func\_ref;}
\DoxyCodeLine{558   \textcolor{comment}{// Always expect a func\_ref. If this fails, we are maybe compiling a wrapper}}
\DoxyCodeLine{559   \textcolor{comment}{// for the start function. This function is only called once, so this should}}
\DoxyCodeLine{560   \textcolor{comment}{// not happen.}}
\DoxyCodeLine{561   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(trusted\_instance\_data-\/>try\_get\_func\_ref(function\_index, \&func\_ref));}
\DoxyCodeLine{562   Tagged<JSFunction> external\_function;}
\DoxyCodeLine{563   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(func\_ref-\/>internal(isolate)-\/>try\_get\_external(\&external\_function));}
\DoxyCodeLine{564   \textcolor{keywordflow}{if} (external\_function-\/>shared()-\/>HasWasmJSFunctionData(isolate)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{565   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(external\_function-\/>shared()-\/>HasWasmExportedFunctionData(isolate));}
\DoxyCodeLine{566   Tagged<WasmExportedFunctionData> function\_data =}
\DoxyCodeLine{567       external\_function-\/>shared()-\/>wasm\_exported\_function\_data();}
\DoxyCodeLine{568   \textcolor{keywordflow}{if} ((function\_data-\/>receiver\_is\_first\_param() != 0) !=}
\DoxyCodeLine{569       receiver\_is\_first\_param) \{}
\DoxyCodeLine{570     \textcolor{comment}{// Different "{}receiver is first parameter"{} settings, do nothing.}}
\DoxyCodeLine{571     \textcolor{keywordflow}{return};}
\DoxyCodeLine{572   \}}
\DoxyCodeLine{573   external\_function-\/>UpdateCode(isolate, wrapper\_code);}
\DoxyCodeLine{574   function\_data-\/>set\_wrapper\_code(wrapper\_code);}
\DoxyCodeLine{575 \}}

\end{DoxyCode}


References CHECK.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ac2601d341585c807ae1c41b6cd8de95d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a1ef1e4fe4b221522968cae09eedb1698}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a1ef1e4fe4b221522968cae09eedb1698}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!ThrowTableOutOfBounds@{ThrowTableOutOfBounds}}
\index{ThrowTableOutOfBounds@{ThrowTableOutOfBounds}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ThrowTableOutOfBounds()}{ThrowTableOutOfBounds()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Throw\+Table\+Out\+Of\+Bounds (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmTrustedInstanceData}{Wasm\+Trusted\+Instance\+Data}} $>$}]{trusted\+\_\+instance\+\_\+data }\end{DoxyParamCaption})}



Definition at line 832 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{834                                                                  \{}
\DoxyCodeLine{835   \textcolor{comment}{// Handle out-\/of-\/bounds access here in the runtime call, rather}}
\DoxyCodeLine{836   \textcolor{comment}{// than having the lower-\/level layers deal with JS exceptions.}}
\DoxyCodeLine{837   \textcolor{keywordflow}{if} (isolate-\/>context().is\_null()) \{}
\DoxyCodeLine{838     isolate-\/>set\_context(trusted\_instance\_data-\/>native\_context());}
\DoxyCodeLine{839   \}}
\DoxyCodeLine{840   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68}{ThrowWasmError}}(isolate, MessageTemplate::kWasmTrapTableOutOfBounds);}
\DoxyCodeLine{841 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::context(), v8\+::internal\+::\+Isolate\+::set\+\_\+context(), and Throw\+Wasm\+Error().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a1ef1e4fe4b221522968cae09eedb1698_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a1ef1e4fe4b221522968cae09eedb1698_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!ThrowWasmError@{ThrowWasmError}}
\index{ThrowWasmError@{ThrowWasmError}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ThrowWasmError()}{ThrowWasmError()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Throw\+Wasm\+Error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}}}]{message,  }\item[{std\+::initializer\+\_\+list$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$$>$}]{args = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Definition at line 146 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{148                                                      \{\}) \{}
\DoxyCodeLine{149 \textcolor{preprocessor}{\#if V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{150   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \{}
\DoxyCodeLine{151     \textcolor{comment}{// Store the trap reason to be retrieved later when the interpreter will}}
\DoxyCodeLine{152     \textcolor{comment}{// trap while detecting the thrown exception.}}
\DoxyCodeLine{153     wasm::WasmInterpreterThread::SetRuntimeLastWasmError(isolate, message);}
\DoxyCodeLine{154   \}}
\DoxyCodeLine{155 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   DirectHandle<JSObject> error\_obj =}
\DoxyCodeLine{158       isolate-\/>factory()-\/>NewWasmRuntimeError(message, \mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(\mbox{\hyperlink{namespacev8_1_1base_ad03b241da4e98adde3145092fe54be8b}{args}}));}
\DoxyCodeLine{159   JSObject::AddProperty(isolate, error\_obj,}
\DoxyCodeLine{160                         isolate-\/>factory()-\/>wasm\_uncatchable\_symbol(),}
\DoxyCodeLine{161                         isolate-\/>factory()-\/>true\_value(), \mbox{\hyperlink{namespacev8_1_1internal_a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370}{NONE}});}
\DoxyCodeLine{162   \textcolor{keywordflow}{return} isolate-\/>Throw(*error\_obj);}
\DoxyCodeLine{163 \}}

\end{DoxyCode}


Referenced by Encode\+Wtf8(), v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), and Throw\+Table\+Out\+Of\+Bounds().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_a51ea94027f43d4557e6bf268f730de68_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae1e6124be30b8dacefdd21adc65e2bb0}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae1e6124be30b8dacefdd21adc65e2bb0}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}!ThrowWasmSuspendError@{ThrowWasmSuspendError}}
\index{ThrowWasmSuspendError@{ThrowWasmSuspendError}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/wasm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ThrowWasmSuspendError()}{ThrowWasmSuspendError()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/wasm.\+cc\}\+::Throw\+Wasm\+Suspend\+Error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}}}]{message }\end{DoxyParamCaption})}



Definition at line 165 of file runtime-\/wasm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{166                                                               \{}
\DoxyCodeLine{167   DirectHandle<JSObject> error\_obj =}
\DoxyCodeLine{168       isolate-\/>factory()-\/>NewWasmSuspendError(message);}
\DoxyCodeLine{169   \textcolor{keywordflow}{return} isolate-\/>Throw(*error\_obj);}
\DoxyCodeLine{170 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::factory(), and v8\+::internal\+::\+Isolate\+::\+Throw().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae1e6124be30b8dacefdd21adc65e2bb0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-wasm_8cc_03_ae1e6124be30b8dacefdd21adc65e2bb0_icgraph}
\end{center}
\end{figure}
