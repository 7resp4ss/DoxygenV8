\hypertarget{classv8_1_1internal_1_1ContextDeserializer}{}\doxysection{v8\+::internal\+::Context\+Deserializer Class Reference}
\label{classv8_1_1internal_1_1ContextDeserializer}\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}


{\ttfamily \#include $<$context-\/deserializer.\+h$>$}



Inheritance diagram for v8\+::internal\+::Context\+Deserializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1ContextDeserializer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Context\+Deserializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a7f3dc3ed502add3c031b9859499e69bb}{Deserialize\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, const \mbox{\hyperlink{classv8_1_1internal_1_1SnapshotData}{Snapshot\+Data}} $\ast$data, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} context\+\_\+index, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} can\+\_\+rehash, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSGlobalProxy}{JSGlobal\+Proxy}} $>$ global\+\_\+proxy, \mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}} embedder\+\_\+fields\+\_\+deserializer)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a88421886699177b37a51b561b8aeb9cb}{Context\+Deserializer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, const \mbox{\hyperlink{classv8_1_1internal_1_1SnapshotData}{Snapshot\+Data}} $\ast$data, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} can\+\_\+rehash)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a2c81feb482988147e61536ad7de717b6}{Deserialize}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSGlobalProxy}{JSGlobal\+Proxy}} $>$ global\+\_\+proxy, \mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}} embedder\+\_\+fields\+\_\+deserializer)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa}{Deserialize\+Embedder\+Fields}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1NativeContext}{Native\+Context}} $>$ context, \mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}} embedder\+\_\+fields\+\_\+deserializer)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032}{Deserialize\+Api\+Wrapper\+Fields}} (const \mbox{\hyperlink{structv8_1_1DeserializeAPIWrapperCallback}{v8\+::\+Deserialize\+APIWrapper\+Callback}} \&api\+\_\+wrapper\+\_\+callback)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 19 of file context-\/deserializer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1ContextDeserializer_a88421886699177b37a51b561b8aeb9cb}\label{classv8_1_1internal_1_1ContextDeserializer_a88421886699177b37a51b561b8aeb9cb}} 
\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}!ContextDeserializer@{ContextDeserializer}}
\index{ContextDeserializer@{ContextDeserializer}!v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}
\doxysubsubsection{\texorpdfstring{ContextDeserializer()}{ContextDeserializer()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Context\+Deserializer\+::\+Context\+Deserializer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1SnapshotData}{Snapshot\+Data}} $\ast$}]{data,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{can\+\_\+rehash }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [private]}}



Definition at line 28 of file context-\/deserializer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{30       : \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_adb0b5891ab253b282d99b02d59e73752}{Deserializer}}(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, data-\/>Payload(), data-\/>GetMagicNumber(), \textcolor{keyword}{false},}
\DoxyCodeLine{31                      can\_rehash) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1ContextDeserializer_a2c81feb482988147e61536ad7de717b6}\label{classv8_1_1internal_1_1ContextDeserializer_a2c81feb482988147e61536ad7de717b6}} 
\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}!Deserialize@{Deserialize}}
\index{Deserialize@{Deserialize}!v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}
\doxysubsubsection{\texorpdfstring{Deserialize()}{Deserialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ v8\+::internal\+::\+Context\+Deserializer\+::\+Deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSGlobalProxy}{JSGlobal\+Proxy}} $>$}]{global\+\_\+proxy,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}}}]{embedder\+\_\+fields\+\_\+deserializer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 47 of file context-\/deserializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                                                                     \{}
\DoxyCodeLine{50   \textcolor{comment}{// Replace serialized references to the global proxy and its map with the}}
\DoxyCodeLine{51   \textcolor{comment}{// given global proxy and its map.}}
\DoxyCodeLine{52   \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_aced172ee3e0c83525991e950230555d8}{AddAttachedObject}}(global\_proxy);}
\DoxyCodeLine{53   \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_aced172ee3e0c83525991e950230555d8}{AddAttachedObject}}(\mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(global\_proxy-\/>map(), \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}));}
\DoxyCodeLine{54 }
\DoxyCodeLine{55   DirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{56   \{}
\DoxyCodeLine{57     \textcolor{comment}{// There's no code deserialized here. If this assert fires then that's}}
\DoxyCodeLine{58     \textcolor{comment}{// changed and logging should be added to notify the profiler et al. of}}
\DoxyCodeLine{59     \textcolor{comment}{// the new code, which also has to be flushed from instruction cache.}}
\DoxyCodeLine{60     \mbox{\hyperlink{namespacev8_1_1internal_a894104a9e60500fdc8377684982aeace}{DisallowCodeAllocation}} no\_code\_allocation;}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a16fead842ed74030e1e5f73f306b3546}{ReadObject}}();}
\DoxyCodeLine{63     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsNativeContext(*\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}));}
\DoxyCodeLine{64     \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_af0a52009e7b41a4c3480b5602b5bfcd7}{DeserializeDeferredObjects}}();}
\DoxyCodeLine{65     \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa}{DeserializeEmbedderFields}}(Cast<NativeContext>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}),}
\DoxyCodeLine{66                               embedder\_fields\_deserializer);}
\DoxyCodeLine{67     \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032}{DeserializeApiWrapperFields}}(}
\DoxyCodeLine{68         embedder\_fields\_deserializer.api\_wrapper\_callback);}
\DoxyCodeLine{69     \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_af862b39a0cb006b9ddb476d1410196d1}{LogNewMapEvents}}();}
\DoxyCodeLine{70     \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_ab96a5d745fc9cba0a54c237a07ae047e}{WeakenDescriptorArrays}}();}
\DoxyCodeLine{71   \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3d107d726ed241fbde2020146bc4f19c}{should\_rehash}}()) \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_ab0b69ae99f61286e8c56f718e4f74c8a}{Rehash}}();}
\DoxyCodeLine{74 }
\DoxyCodeLine{75   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{76 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Add\+Attached\+Object(), v8\+::internal\+::\+Deserialize\+Embedder\+Fields\+Callback\+::api\+\_\+wrapper\+\_\+callback, v8\+::internal\+::\+DCHECK(), Deserialize\+Api\+Wrapper\+Fields(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Deserialize\+Deferred\+Objects(), Deserialize\+Embedder\+Fields(), v8\+::internal\+::direct\+\_\+handle(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::isolate(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Log\+New\+Map\+Events(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Read\+Object(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Rehash(), v8\+::base\+::internal\+::result, v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::should\+\_\+rehash(), and v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Weaken\+Descriptor\+Arrays().



Referenced by Deserialize\+Context().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a2c81feb482988147e61536ad7de717b6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a2c81feb482988147e61536ad7de717b6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032}\label{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032}} 
\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}!DeserializeApiWrapperFields@{DeserializeApiWrapperFields}}
\index{DeserializeApiWrapperFields@{DeserializeApiWrapperFields}!v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}
\doxysubsubsection{\texorpdfstring{DeserializeApiWrapperFields()}{DeserializeApiWrapperFields()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Context\+Deserializer\+::\+Deserialize\+Api\+Wrapper\+Fields (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structv8_1_1DeserializeAPIWrapperCallback}{v8\+::\+Deserialize\+APIWrapper\+Callback}} \&}]{api\+\_\+wrapper\+\_\+callback }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 136 of file context-\/deserializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{137                                                                  \{}
\DoxyCodeLine{138   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>HasMore() || \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>Peek() != \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a0fc92b9bfbeae623ad8508e89f71619aa788b917a3677e4aed8514c3e953c3b3e}{kApiWrapperFieldsData}}) \{}
\DoxyCodeLine{139     \textcolor{keywordflow}{return};}
\DoxyCodeLine{140   \}}
\DoxyCodeLine{141   \textcolor{comment}{// Consume `kApiWrapperFieldsData`.}}
\DoxyCodeLine{142   \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_aef449c391e335cc3f86a65ab9895c8b4}{Get}}();}
\DoxyCodeLine{143   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{144   DisallowJavascriptExecution no\_js(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{145   DisallowCompilation no\_compile(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{146   \textcolor{comment}{// Buffer is reused across various deserializations. We always copy N bytes}}
\DoxyCodeLine{147   \textcolor{comment}{// into the backing and pass that N bytes to the embedder via StartupData.}}
\DoxyCodeLine{148   PlainBuffer<char> buffer;}
\DoxyCodeLine{149   \textcolor{comment}{// The block for `kApiWrapperFieldsData` consists of consecutive `kNewObject`}}
\DoxyCodeLine{150   \textcolor{comment}{// blocks that are in the end terminated with a `kSynchronize`.}}
\DoxyCodeLine{151   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1turboshaft_a2b5e79bd829824237e784a6cde29309e}{Get}}(); \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} != \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a0fc92b9bfbeae623ad8508e89f71619aa8adc4c08cc6e4bb3120bba376083aa60}{kSynchronize}};}
\DoxyCodeLine{152        \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_aef449c391e335cc3f86a65ab9895c8b4}{Get}}()) \{}
\DoxyCodeLine{153     HandleScope scope(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{154     DirectHandle<JSObject> js\_object =}
\DoxyCodeLine{155         Cast<JSObject>(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_afa7080303576adb44d51fea8f2dc383c}{GetBackReferencedObject}}());}
\DoxyCodeLine{156     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_ab5cbeb5c8cbd24ba02e72e62b8c8820f}{GetUint30}}();}
\DoxyCodeLine{157     buffer.EnsureCapacity(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{158     \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_ae9ab6112d643440e69921d725c360b77}{CopyRaw}}(buffer.data(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{159     \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(api\_wrapper\_callback.\mbox{\hyperlink{structv8_1_1DeserializeAPIWrapperCallback_a70a3fe34e69f5120923a2e56c4699d30}{callback}});}
\DoxyCodeLine{160     api\_wrapper\_callback.\mbox{\hyperlink{structv8_1_1DeserializeAPIWrapperCallback_a70a3fe34e69f5120923a2e56c4699d30}{callback}}(v8::Utils::ToLocal(js\_object),}
\DoxyCodeLine{161                                   \{buffer.data(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}\},}
\DoxyCodeLine{162                                   api\_wrapper\_callback.\mbox{\hyperlink{structv8_1_1DeserializeAPIWrapperCallback_a8b16be39fe60b69b24f54a26b8402701}{data}});}
\DoxyCodeLine{163   \}}
\DoxyCodeLine{164 \}}

\end{DoxyCode}


References v8\+::\+Deserialize\+APIWrapper\+Callback\+::callback, code, v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Copy\+Raw(), v8\+::\+Deserialize\+APIWrapper\+Callback\+::data, v8\+::internal\+::\+Plain\+Buffer$<$ T $>$\+::data(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::\+Plain\+Buffer$<$ T $>$\+::\+Ensure\+Capacity(), v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Get(), v8\+::internal\+::compiler\+::turboshaft\+::\+Get(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Get\+Back\+Referenced\+Object(), v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Get\+Uint30(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::isolate(), v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Api\+Wrapper\+Fields\+Data, v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Synchronize, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, size(), and v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::source().



Referenced by Deserialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a124fc02a2cb6e6013910ccab4d270032_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1ContextDeserializer_a7f3dc3ed502add3c031b9859499e69bb}\label{classv8_1_1internal_1_1ContextDeserializer_a7f3dc3ed502add3c031b9859499e69bb}} 
\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}!DeserializeContext@{DeserializeContext}}
\index{DeserializeContext@{DeserializeContext}!v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}
\doxysubsubsection{\texorpdfstring{DeserializeContext()}{DeserializeContext()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ v8\+::internal\+::\+Context\+Deserializer\+::\+Deserialize\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1SnapshotData}{Snapshot\+Data}} $\ast$}]{data,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{context\+\_\+index,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{can\+\_\+rehash,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSGlobalProxy}{JSGlobal\+Proxy}} $>$}]{global\+\_\+proxy,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}}}]{embedder\+\_\+fields\+\_\+deserializer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 17 of file context-\/deserializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{20                                                                     \{}
\DoxyCodeLine{21   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8"{}}, \textcolor{stringliteral}{"{}V8.DeserializeContext"{}});}
\DoxyCodeLine{22   \mbox{\hyperlink{runtime-call-stats-scope_8h_ae2e0b4aff109545657aba76d78cbf764}{RCS\_SCOPE}}(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, RuntimeCallCounterId::kDeserializeContext);}
\DoxyCodeLine{23   base::ElapsedTimer timer;}
\DoxyCodeLine{24   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization)) timer.Start();}
\DoxyCodeLine{25   NestedTimedHistogramScope histogram\_timer(}
\DoxyCodeLine{26       \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a9690b82e4f9b4c8a9160630396cde0b3}{counters}}()-\/>snapshot\_deserialize\_context());}
\DoxyCodeLine{27 }
\DoxyCodeLine{28   \mbox{\hyperlink{classv8_1_1internal_1_1ContextDeserializer_a88421886699177b37a51b561b8aeb9cb}{ContextDeserializer}} d(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, data, can\_rehash);}
\DoxyCodeLine{29   MaybeDirectHandle<Object> maybe\_result =}
\DoxyCodeLine{30       d.Deserialize(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}, global\_proxy, embedder\_fields\_deserializer);}
\DoxyCodeLine{31 }
\DoxyCodeLine{32   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization)) \{}
\DoxyCodeLine{33     \textcolor{comment}{// ATTENTION: The Memory.json benchmark greps for this exact output. Do not}}
\DoxyCodeLine{34     \textcolor{comment}{// change it without also updating Memory.json.}}
\DoxyCodeLine{35     \textcolor{keyword}{const} \textcolor{keywordtype}{int} bytes = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(data-\/>RawData().size());}
\DoxyCodeLine{36     \textcolor{keyword}{const} \textcolor{keywordtype}{double} ms = timer.Elapsed().InMillisecondsF();}
\DoxyCodeLine{37     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Deserializing context \#\%zu (\%d bytes) took \%0.3f ms]\(\backslash\)n"{}},}
\DoxyCodeLine{38            context\_index, bytes, ms);}
\DoxyCodeLine{39   \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41   DirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{42   \textcolor{keywordflow}{if} (!maybe\_result.ToHandle(\&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44   \textcolor{keywordflow}{return} Cast<Context>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{45 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::counters(), Deserialize(), v8\+::base\+::\+Elapsed\+Timer\+::\+Elapsed(), v8\+::base\+::\+Time\+Delta\+::\+In\+Milliseconds\+F(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::isolate(), v8\+::internal\+::\+Print\+F(), v8\+::internal\+::\+Snapshot\+Data\+::\+Raw\+Data(), RCS\+\_\+\+SCOPE, v8\+::base\+::internal\+::result, v8\+::base\+::\+Vector$<$ T $>$\+::size(), v8\+::base\+::\+Elapsed\+Timer\+::\+Start(), v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::\+To\+Handle(), TRACE\+\_\+\+EVENT0, v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.



Referenced by v8\+::internal\+::\+Snapshot\+::\+New\+Context\+From\+Snapshot().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a7f3dc3ed502add3c031b9859499e69bb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_a7f3dc3ed502add3c031b9859499e69bb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa}\label{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa}} 
\index{v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}!DeserializeEmbedderFields@{DeserializeEmbedderFields}}
\index{DeserializeEmbedderFields@{DeserializeEmbedderFields}!v8::internal::ContextDeserializer@{v8::internal::ContextDeserializer}}
\doxysubsubsection{\texorpdfstring{DeserializeEmbedderFields()}{DeserializeEmbedderFields()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Context\+Deserializer\+::\+Deserialize\+Embedder\+Fields (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1NativeContext}{Native\+Context}} $>$}]{context,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1DeserializeEmbedderFieldsCallback}{Deserialize\+Embedder\+Fields\+Callback}}}]{embedder\+\_\+fields\+\_\+deserializer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 95 of file context-\/deserializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{97                                                                     \{}
\DoxyCodeLine{98   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>HasMore() || \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>Peek() != \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a0fc92b9bfbeae623ad8508e89f71619aa55239c6534a831669a0f713519a1db52}{kEmbedderFieldsData}}) \{}
\DoxyCodeLine{99     \textcolor{keywordflow}{return};}
\DoxyCodeLine{100   \}}
\DoxyCodeLine{101   \textcolor{comment}{// Consume `kEmbedderFieldsData`.}}
\DoxyCodeLine{102   \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_aef449c391e335cc3f86a65ab9895c8b4}{Get}}();}
\DoxyCodeLine{103   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{104   DisallowJavascriptExecution no\_js(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{105   DisallowCompilation no\_compile(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{106   \textcolor{comment}{// Buffer is reused across various deserializations. We always copy N bytes}}
\DoxyCodeLine{107   \textcolor{comment}{// into the backing and pass that N bytes to the embedder via StartupData.}}
\DoxyCodeLine{108   PlainBuffer<char> buffer;}
\DoxyCodeLine{109   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1turboshaft_a2b5e79bd829824237e784a6cde29309e}{Get}}(); \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} != \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a0fc92b9bfbeae623ad8508e89f71619aa8adc4c08cc6e4bb3120bba376083aa60}{kSynchronize}};}
\DoxyCodeLine{110        \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_aef449c391e335cc3f86a65ab9895c8b4}{Get}}()) \{}
\DoxyCodeLine{111     HandleScope scope(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a6348165978f842cf06e5da146a603c1e}{isolate}}());}
\DoxyCodeLine{112     DirectHandle<HeapObject> heap\_object =}
\DoxyCodeLine{113         Cast<HeapObject>(\mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_afa7080303576adb44d51fea8f2dc383c}{GetBackReferencedObject}}());}
\DoxyCodeLine{114     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_ab5cbeb5c8cbd24ba02e72e62b8c8820f}{GetUint30}}();}
\DoxyCodeLine{115     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_ab5cbeb5c8cbd24ba02e72e62b8c8820f}{GetUint30}}();}
\DoxyCodeLine{116     buffer.EnsureCapacity(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{117     \mbox{\hyperlink{classv8_1_1internal_1_1Deserializer_a3ac7521096ee0a9781447ca872936ffe}{source}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSource_ae9ab6112d643440e69921d725c360b77}{CopyRaw}}(buffer.data(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{118     \textcolor{keywordflow}{if} (IsJSObject(*heap\_object)) \{}
\DoxyCodeLine{119       DirectHandle<JSObject> obj = Cast<JSObject>(heap\_object);}
\DoxyCodeLine{120       \mbox{\hyperlink{structv8_1_1DeserializeInternalFieldsCallback}{v8::DeserializeInternalFieldsCallback}} callback =}
\DoxyCodeLine{121           embedder\_fields\_deserializer.js\_object\_callback;}
\DoxyCodeLine{122       \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(callback.\mbox{\hyperlink{structv8_1_1DeserializeInternalFieldsCallback_a717dba2bc39e7c6728cc75b41d11956d}{callback}});}
\DoxyCodeLine{123       callback.\mbox{\hyperlink{structv8_1_1DeserializeInternalFieldsCallback_a717dba2bc39e7c6728cc75b41d11956d}{callback}}(v8::Utils::ToLocal(obj), \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}, \{buffer.data(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}\},}
\DoxyCodeLine{124                         callback.\mbox{\hyperlink{structv8_1_1DeserializeInternalFieldsCallback_a7fd6b9dfc9e50e6b0429da860569e27f}{data}});}
\DoxyCodeLine{125     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{126       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsEmbedderDataArray(*heap\_object));}
\DoxyCodeLine{127       \mbox{\hyperlink{structv8_1_1DeserializeContextDataCallback}{v8::DeserializeContextDataCallback}} callback =}
\DoxyCodeLine{128           embedder\_fields\_deserializer.context\_callback;}
\DoxyCodeLine{129       \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(callback.\mbox{\hyperlink{structv8_1_1DeserializeContextDataCallback_acdb7c9bb134c25ffef7255fcba03b81c}{callback}});}
\DoxyCodeLine{130       callback.\mbox{\hyperlink{structv8_1_1DeserializeContextDataCallback_acdb7c9bb134c25ffef7255fcba03b81c}{callback}}(v8::Utils::ToLocal(context), \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}},}
\DoxyCodeLine{131                         \{buffer.data(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}\}, callback.\mbox{\hyperlink{structv8_1_1DeserializeContextDataCallback_a538788f168749082d01587654d235942}{data}});}
\DoxyCodeLine{132     \}}
\DoxyCodeLine{133   \}}
\DoxyCodeLine{134 \}}

\end{DoxyCode}


References v8\+::\+Deserialize\+Internal\+Fields\+Callback\+::callback, v8\+::\+Deserialize\+Context\+Data\+Callback\+::callback, code, v8\+::internal\+::\+Deserialize\+Embedder\+Fields\+Callback\+::context\+\_\+callback, v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Copy\+Raw(), v8\+::\+Deserialize\+Internal\+Fields\+Callback\+::data, v8\+::\+Deserialize\+Context\+Data\+Callback\+::data, v8\+::internal\+::\+Plain\+Buffer$<$ T $>$\+::data(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::\+Plain\+Buffer$<$ T $>$\+::\+Ensure\+Capacity(), v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Get(), v8\+::internal\+::compiler\+::turboshaft\+::\+Get(), v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::\+Get\+Back\+Referenced\+Object(), v8\+::internal\+::\+Snapshot\+Byte\+Source\+::\+Get\+Uint30(), v8\+::internal\+::index, v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::isolate(), v8\+::internal\+::\+Deserialize\+Embedder\+Fields\+Callback\+::js\+\_\+object\+\_\+callback, v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Embedder\+Fields\+Data, v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Synchronize, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, size(), and v8\+::internal\+::\+Deserializer$<$ Isolate $>$\+::source().



Referenced by Deserialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1ContextDeserializer_ad31f8e7152d421fcfd982db3f97374fa_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{context-deserializer_8h}{context-\/deserializer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{context-deserializer_8cc}{context-\/deserializer.\+cc}}\end{DoxyCompactItemize}
