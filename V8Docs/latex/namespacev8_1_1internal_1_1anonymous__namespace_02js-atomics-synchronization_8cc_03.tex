\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a5e71d6d2dee15c738e0fc3ce715c12f4}{Perform\+Promise\+Then}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ promise, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ fulfill\+\_\+handler, \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}} $>$ maybe\+\_\+reject\+\_\+handler=\{\})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a1683c8a2afdec8e3fceaf49fb74deb7e}{Set\+Async\+Unlock\+Handlers}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSAtomicsMutex}{JSAtomics\+Mutex}} $>$ mutex, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ waiting\+\_\+for\+\_\+callback\+\_\+promise, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$ unlocked\+\_\+promise)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a97622f0c584c7ed91eab0d5cd7a53470}{Add\+Promise\+To\+Native\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$ promise)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_adb32c9fd08754d52ac771254297ecd44}{Remove\+Promise\+From\+Native\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$ promise)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classv8_1_1Global}{Global}}$<$ \mbox{\hyperlink{classT}{T}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_aae078f13f0582cbea69e803867696dd1}{Get\+Weak\+Global}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classT}{T}} $>$ object)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a97622f0c584c7ed91eab0d5cd7a53470}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a97622f0c584c7ed91eab0d5cd7a53470}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}!AddPromiseToNativeContext@{AddPromiseToNativeContext}}
\index{AddPromiseToNativeContext@{AddPromiseToNativeContext}!v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AddPromiseToNativeContext()}{AddPromiseToNativeContext()}}
{\footnotesize\ttfamily void v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.\+cc\}\+::Add\+Promise\+To\+Native\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$}]{promise }\end{DoxyParamCaption})}



Definition at line 82 of file js-\/atomics-\/synchronization.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{83                                                                 \{}
\DoxyCodeLine{84   DirectHandle<NativeContext> \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}(isolate-\/>native\_context());}
\DoxyCodeLine{85   Handle<OrderedHashSet> promises(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>atomics\_waitasync\_promises(),}
\DoxyCodeLine{86                                   isolate);}
\DoxyCodeLine{87   promises = \mbox{\hyperlink{namespacev8_1_1bigint_a6d4d2ce18897aba0f90b3208eca29a5b}{OrderedHashSet::Add}}(isolate, promises, promise).ToHandleChecked();}
\DoxyCodeLine{88   \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_atomics\_waitasync\_promises(*promises);}
\DoxyCodeLine{89 \}}

\end{DoxyCode}


References v8\+::bigint\+::\+Add(), v8\+::internal\+::\+Isolate\+::native\+\_\+context(), and v8\+::internal\+::native\+\_\+context.



Referenced by v8\+::internal\+::\+JSAtomics\+Mutex\+::\+Lock\+Async(), and v8\+::internal\+::\+JSAtomics\+Condition\+::\+Wait\+Async().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a97622f0c584c7ed91eab0d5cd7a53470_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a97622f0c584c7ed91eab0d5cd7a53470_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_aae078f13f0582cbea69e803867696dd1}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_aae078f13f0582cbea69e803867696dd1}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}!GetWeakGlobal@{GetWeakGlobal}}
\index{GetWeakGlobal@{GetWeakGlobal}!v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetWeakGlobal()}{GetWeakGlobal()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\mbox{\hyperlink{classv8_1_1Global}{Global}}$<$\mbox{\hyperlink{classT}{T}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.\+cc\}\+::Get\+Weak\+Global (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classT}{T}} $>$}]{object }\end{DoxyParamCaption})}



Definition at line 103 of file js-\/atomics-\/synchronization.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{103                                                            \{}
\DoxyCodeLine{104   \textcolor{keyword}{auto}* v8\_isolate = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classv8_1_1Isolate}{v8::Isolate}}*\textcolor{keyword}{>}(isolate);}
\DoxyCodeLine{105   \mbox{\hyperlink{classv8_1_1Global}{v8::Global<T>}} global(v8\_isolate, \textcolor{keywordtype}{object});}
\DoxyCodeLine{106   global.SetWeak();}
\DoxyCodeLine{107   \textcolor{keywordflow}{return} global;}
\DoxyCodeLine{108 \}}

\end{DoxyCode}


References v8\+::\+Persistent\+Base$<$ T $>$\+::\+Set\+Weak().



Referenced by v8\+::internal\+::detail\+::\+Async\+Waiter\+Queue\+Node$<$ T $>$\+::\+Async\+Waiter\+Queue\+Node().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_aae078f13f0582cbea69e803867696dd1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_aae078f13f0582cbea69e803867696dd1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a5e71d6d2dee15c738e0fc3ce715c12f4}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a5e71d6d2dee15c738e0fc3ce715c12f4}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}!PerformPromiseThen@{PerformPromiseThen}}
\index{PerformPromiseThen@{PerformPromiseThen}!v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{PerformPromiseThen()}{PerformPromiseThen()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.\+cc\}\+::Perform\+Promise\+Then (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{promise,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{fulfill\+\_\+handler,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}} $>$}]{maybe\+\_\+reject\+\_\+handler = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Definition at line 27 of file js-\/atomics-\/synchronization.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{30                                                          \{\}) \{}
\DoxyCodeLine{31   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(IsCallable(*fulfill\_handler));}
\DoxyCodeLine{32   DirectHandle<Object> reject\_handler = isolate-\/>factory()-\/>undefined\_value();}
\DoxyCodeLine{33   \textcolor{keywordflow}{if} (!maybe\_reject\_handler.is\_null()) \{}
\DoxyCodeLine{34     reject\_handler = maybe\_reject\_handler.ToHandleChecked();}
\DoxyCodeLine{35   \}}
\DoxyCodeLine{36   DirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_ad03b241da4e98adde3145092fe54be8b}{args}}[] = \{fulfill\_handler, reject\_handler\};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38   DirectHandle<Object> then\_result;}
\DoxyCodeLine{39   \mbox{\hyperlink{execution_2isolate_8h_a45bb81ab232e9f2663545ec92dc0b950}{ASSIGN\_RETURN\_ON\_EXCEPTION}}(}
\DoxyCodeLine{40       isolate, then\_result,}
\DoxyCodeLine{41       Execution::CallBuiltin(isolate, isolate-\/>promise\_then(), promise,}
\DoxyCodeLine{42                              \mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(\mbox{\hyperlink{namespacev8_1_1base_ad03b241da4e98adde3145092fe54be8b}{args}})));}
\DoxyCodeLine{43 }
\DoxyCodeLine{44   \textcolor{keywordflow}{return} Cast<JSReceiver>(then\_result);}
\DoxyCodeLine{45 \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::\+JSAtomics\+Mutex\+::\+Lock\+Or\+Enqueue\+Promise(), v8\+::internal\+::compiler\+::\+JSCall\+Reducer\+::\+Reduce\+Promise\+Prototype\+Then(), Set\+Async\+Unlock\+Handlers(), and v8\+::internal\+::\+JSAtomics\+Condition\+::\+Wait\+Async().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a5e71d6d2dee15c738e0fc3ce715c12f4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_adb32c9fd08754d52ac771254297ecd44}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_adb32c9fd08754d52ac771254297ecd44}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}!RemovePromiseFromNativeContext@{RemovePromiseFromNativeContext}}
\index{RemovePromiseFromNativeContext@{RemovePromiseFromNativeContext}!v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{RemovePromiseFromNativeContext()}{RemovePromiseFromNativeContext()}}
{\footnotesize\ttfamily void v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.\+cc\}\+::Remove\+Promise\+From\+Native\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$}]{promise }\end{DoxyParamCaption})}



Definition at line 91 of file js-\/atomics-\/synchronization.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{92                                                                      \{}
\DoxyCodeLine{93   Handle<OrderedHashSet> promises(}
\DoxyCodeLine{94       isolate-\/>native\_context()-\/>atomics\_waitasync\_promises(), isolate);}
\DoxyCodeLine{95   \textcolor{keywordtype}{bool} was\_deleted = OrderedHashSet::Delete(isolate, *promises, *promise);}
\DoxyCodeLine{96   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(was\_deleted);}
\DoxyCodeLine{97   \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(was\_deleted);}
\DoxyCodeLine{98   promises = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02explicit-management_8cc_03_ae386bd778f9a2f3f49df2f8a280ffdf9}{OrderedHashSet::Shrink}}(isolate, promises);}
\DoxyCodeLine{99   isolate-\/>native\_context()-\/>set\_atomics\_waitasync\_promises(*promises);}
\DoxyCodeLine{100 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Ordered\+Hash\+Table$<$ Ordered\+Hash\+Set, 1 $>$\+::\+Delete(), v8\+::internal\+::\+Isolate\+::native\+\_\+context(), cppgc\+::internal\+::anonymous\+\_\+namespace\{explicit-\/management.\+cc\}\+::\+Shrink(), and USE.



Referenced by v8\+::internal\+::\+JSAtomics\+Mutex\+::\+Handle\+Async\+Notify(), v8\+::internal\+::\+JSAtomics\+Condition\+::\+Handle\+Async\+Notify(), and v8\+::internal\+::\+JSAtomics\+Mutex\+::\+Handle\+Async\+Timeout().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_adb32c9fd08754d52ac771254297ecd44_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_adb32c9fd08754d52ac771254297ecd44_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a1683c8a2afdec8e3fceaf49fb74deb7e}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a1683c8a2afdec8e3fceaf49fb74deb7e}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}!SetAsyncUnlockHandlers@{SetAsyncUnlockHandlers}}
\index{SetAsyncUnlockHandlers@{SetAsyncUnlockHandlers}!v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/atomics-\/synchronization.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SetAsyncUnlockHandlers()}{SetAsyncUnlockHandlers()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{js-\/atomics-\/synchronization.\+cc\}\+::Set\+Async\+Unlock\+Handlers (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSAtomicsMutex}{JSAtomics\+Mutex}} $>$}]{mutex,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{waiting\+\_\+for\+\_\+callback\+\_\+promise,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$}]{unlocked\+\_\+promise }\end{DoxyParamCaption})}



Definition at line 47 of file js-\/atomics-\/synchronization.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{50                                               \{}
\DoxyCodeLine{51   DirectHandle<Context> handlers\_context =}
\DoxyCodeLine{52       isolate-\/>factory()-\/>NewBuiltinContext(}
\DoxyCodeLine{53           isolate-\/>native\_context(), JSAtomicsMutex::kAsyncContextLength);}
\DoxyCodeLine{54   handlers\_context-\/>SetNoCell(JSAtomicsMutex::kMutexAsyncContextSlot, *mutex);}
\DoxyCodeLine{55   handlers\_context-\/>SetNoCell(JSAtomicsMutex::kUnlockedPromiseAsyncContextSlot,}
\DoxyCodeLine{56                               *unlocked\_promise);}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   DirectHandle<SharedFunctionInfo> resolve\_info(}
\DoxyCodeLine{59       isolate-\/>heap()-\/>atomics\_mutex\_async\_unlock\_resolve\_handler\_sfi(),}
\DoxyCodeLine{60       isolate);}
\DoxyCodeLine{61   DirectHandle<JSFunction> resolver\_callback =}
\DoxyCodeLine{62       Factory::JSFunctionBuilder\{isolate, resolve\_info, handlers\_context\}}
\DoxyCodeLine{63           .set\_map(isolate-\/>strict\_function\_without\_prototype\_map())}
\DoxyCodeLine{64           .set\_allocation\_type(AllocationType::kYoung)}
\DoxyCodeLine{65           .Build();}
\DoxyCodeLine{66 }
\DoxyCodeLine{67   DirectHandle<SharedFunctionInfo> reject\_info(}
\DoxyCodeLine{68       isolate-\/>heap()-\/>atomics\_mutex\_async\_unlock\_reject\_handler\_sfi(),}
\DoxyCodeLine{69       isolate);}
\DoxyCodeLine{70   DirectHandle<JSFunction> reject\_callback =}
\DoxyCodeLine{71       Factory::JSFunctionBuilder\{isolate, reject\_info, handlers\_context\}}
\DoxyCodeLine{72           .set\_map(isolate-\/>strict\_function\_without\_prototype\_map())}
\DoxyCodeLine{73           .set\_allocation\_type(AllocationType::kYoung)}
\DoxyCodeLine{74           .Build();}
\DoxyCodeLine{75 }
\DoxyCodeLine{76   \mbox{\hyperlink{execution_2isolate_8h_a12be222e290b321d4d78a980504a6422}{RETURN\_ON\_EXCEPTION}}(isolate,}
\DoxyCodeLine{77                       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a5e71d6d2dee15c738e0fc3ce715c12f4}{PerformPromiseThen}}(isolate, waiting\_for\_callback\_promise,}
\DoxyCodeLine{78                                          resolver\_callback, reject\_callback));}
\DoxyCodeLine{79   \textcolor{keywordflow}{return} handlers\_context;}
\DoxyCodeLine{80 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+JSAtomics\+Mutex\+::k\+Async\+Context\+Length, v8\+::internal\+::\+JSAtomics\+Mutex\+::k\+Mutex\+Async\+Context\+Slot, v8\+::internal\+::\+JSAtomics\+Mutex\+::k\+Unlocked\+Promise\+Async\+Context\+Slot, v8\+::internal\+::k\+Young, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::internal\+::\+Factory\+::\+New\+Builtin\+Context(), Perform\+Promise\+Then(), and RETURN\+\_\+\+ON\+\_\+\+EXCEPTION.



Referenced by v8\+::internal\+::\+JSAtomics\+Mutex\+::\+Lock\+Or\+Enqueue\+Promise().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a1683c8a2afdec8e3fceaf49fb74deb7e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-atomics-synchronization_8cc_03_a1683c8a2afdec8e3fceaf49fb74deb7e_icgraph}
\end{center}
\end{figure}
