\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}{Preserve\+Resizability}} \{ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5a8ea828af502a92018df30bd6d63739ae}{k\+To\+Fixed\+Length}}
, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5ad8a742f2984ddfcdd003f0c9e7355a13}{k\+Preserve\+Resizability}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::pair$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$, std\+::optional$<$ \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} $>$ $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80}{Try\+Allocate\+Backing\+Store}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}} shared, \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}} resizable, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ max\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_a6d3f691695696e478ebb4a18ab857bfa}{Initialized\+Flag}} initialized)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a8a210b6667f43cf1382bd1a064aa93c1}{Construct\+Buffer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}} $>$ target, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ new\+\_\+target, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ max\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_a6d3f691695696e478ebb4a18ab857bfa}{Initialized\+Flag}} initialized)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_abf979c5f850ec0b8e1b0577c49cd1ead}{Array\+Buffer\+Transfer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ array\+\_\+buffer, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ new\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}{Preserve\+Resizability}} preserve\+\_\+resizability, const char $\ast$method\+\_\+name)
\end{DoxyCompactItemize}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!PreserveResizability@{PreserveResizability}}
\index{PreserveResizability@{PreserveResizability}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{PreserveResizability}{PreserveResizability}}
{\footnotesize\ttfamily enum v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}{Preserve\+Resizability}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kToFixedLength@{kToFixedLength}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!kToFixedLength@{kToFixedLength}}}\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5a8ea828af502a92018df30bd6d63739ae}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5a8ea828af502a92018df30bd6d63739ae}} 
k\+To\+Fixed\+Length&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kPreserveResizability@{kPreserveResizability}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!kPreserveResizability@{kPreserveResizability}}}\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5ad8a742f2984ddfcdd003f0c9e7355a13}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5ad8a742f2984ddfcdd003f0c9e7355a13}} 
k\+Preserve\+Resizability&\\
\hline

\end{DoxyEnumFields}


Definition at line 574 of file builtins-\/arraybuffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{574 \{ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5a8ea828af502a92018df30bd6d63739ae}{kToFixedLength}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5ad8a742f2984ddfcdd003f0c9e7355a13}{kPreserveResizability}} \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_abf979c5f850ec0b8e1b0577c49cd1ead}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_abf979c5f850ec0b8e1b0577c49cd1ead}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!ArrayBufferTransfer@{ArrayBufferTransfer}}
\index{ArrayBufferTransfer@{ArrayBufferTransfer}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ArrayBufferTransfer()}{ArrayBufferTransfer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::Array\+Buffer\+Transfer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{array\+\_\+buffer,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{new\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5}{Preserve\+Resizability}}}]{preserve\+\_\+resizability,  }\item[{const char $\ast$}]{method\+\_\+name }\end{DoxyParamCaption})}



Definition at line 576 of file builtins-\/arraybuffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{580                                                             \{}
\DoxyCodeLine{581   \textcolor{keywordtype}{size\_t} max\_allocatable =}
\DoxyCodeLine{582       isolate-\/>array\_buffer\_allocator()-\/>MaxAllocationSize();}
\DoxyCodeLine{583   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(max\_allocatable <= JSArrayBuffer::kMaxByteLength);}
\DoxyCodeLine{584   \textcolor{comment}{// 2. If IsSharedArrayBuffer(arrayBuffer) is true, throw a TypeError}}
\DoxyCodeLine{585   \textcolor{comment}{// exception.}}
\DoxyCodeLine{586   \mbox{\hyperlink{builtins-arraybuffer_8cc_a584ee650d323e8a977c8fab69803be9c}{CHECK\_SHARED}}(\textcolor{keyword}{false}, array\_buffer, method\_name);}
\DoxyCodeLine{587 }
\DoxyCodeLine{588   \textcolor{keywordtype}{size\_t} new\_byte\_length;}
\DoxyCodeLine{589   \textcolor{keywordflow}{if} (IsUndefined(*new\_length, isolate)) \{}
\DoxyCodeLine{590     \textcolor{comment}{// 3. If newLength is undefined, then}}
\DoxyCodeLine{591     \textcolor{comment}{//   a. Let newByteLength be arrayBuffer.[[ArrayBufferByteLength]].}}
\DoxyCodeLine{592     new\_byte\_length = array\_buffer-\/>GetByteLength();}
\DoxyCodeLine{593   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{594     \textcolor{comment}{// 4. Else,}}
\DoxyCodeLine{595     \textcolor{comment}{//   a. Let newByteLength be ? ToIndex(newLength).}}
\DoxyCodeLine{596     DirectHandle<Object> number\_new\_byte\_length;}
\DoxyCodeLine{597     \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(isolate, number\_new\_byte\_length,}
\DoxyCodeLine{598                                        Object::ToInteger(isolate, new\_length));}
\DoxyCodeLine{599     \textcolor{keywordflow}{if} (Object::NumberValue(*number\_new\_byte\_length) < 0.0) \{}
\DoxyCodeLine{600       \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{601           isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));}
\DoxyCodeLine{602     \}}
\DoxyCodeLine{603     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_ae5782366e67cd86496ba15d6a3718b16}{TryNumberToSize}}(*number\_new\_byte\_length, \&new\_byte\_length) ||}
\DoxyCodeLine{604         new\_byte\_length > max\_allocatable) \{}
\DoxyCodeLine{605       \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{606           isolate,}
\DoxyCodeLine{607           NewRangeError(}
\DoxyCodeLine{608               MessageTemplate::kInvalidArrayBufferResizeLength,}
\DoxyCodeLine{609               isolate-\/>factory()-\/>NewStringFromAsciiChecked(method\_name)));}
\DoxyCodeLine{610     \}}
\DoxyCodeLine{611   \}}
\DoxyCodeLine{612 }
\DoxyCodeLine{613   \textcolor{comment}{// 5. If IsDetachedBuffer(arrayBuffer) is true, throw a TypeError exception.}}
\DoxyCodeLine{614   \textcolor{keywordflow}{if} (array\_buffer-\/>was\_detached()) \{}
\DoxyCodeLine{615     \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{616         isolate, NewTypeError(MessageTemplate::kDetachedOperation,}
\DoxyCodeLine{617                               isolate-\/>factory()-\/>NewStringFromAsciiChecked(}
\DoxyCodeLine{618                                   method\_name)));}
\DoxyCodeLine{619   \}}
\DoxyCodeLine{620 }
\DoxyCodeLine{621   \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{ResizableFlag}} resizable;}
\DoxyCodeLine{622   \textcolor{keywordtype}{size\_t} new\_max\_byte\_length;}
\DoxyCodeLine{623   \textcolor{keywordflow}{if} (preserve\_resizability == \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a7dc3b032f53bad3d631a88c16727f6e5ad8a742f2984ddfcdd003f0c9e7355a13}{kPreserveResizability}} \&\&}
\DoxyCodeLine{624       array\_buffer-\/>is\_resizable\_by\_js()) \{}
\DoxyCodeLine{625     \textcolor{comment}{// 6. If preserveResizability is preserve-\/resizability and}}
\DoxyCodeLine{626     \textcolor{comment}{//    IsResizableArrayBuffer(arrayBuffer) is true, then}}
\DoxyCodeLine{627     \textcolor{comment}{//   a. Let newMaxByteLength be arrayBuffer.[[ArrayBufferMaxByteLength]].}}
\DoxyCodeLine{628     new\_max\_byte\_length = array\_buffer-\/>max\_byte\_length();}
\DoxyCodeLine{629     resizable = ResizableFlag::kResizable;}
\DoxyCodeLine{630   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{631     \textcolor{comment}{// 7. Else,}}
\DoxyCodeLine{632     \textcolor{comment}{//   a. Let newMaxByteLength be empty.}}
\DoxyCodeLine{633     new\_max\_byte\_length = new\_byte\_length;}
\DoxyCodeLine{634     resizable = ResizableFlag::kNotResizable;}
\DoxyCodeLine{635   \}}
\DoxyCodeLine{636 }
\DoxyCodeLine{637   \textcolor{comment}{// 8. If arrayBuffer.[[ArrayBufferDetachKey]] is not undefined, throw a}}
\DoxyCodeLine{638   \textcolor{comment}{//     TypeError exception.}}
\DoxyCodeLine{639 }
\DoxyCodeLine{640   \textcolor{keywordflow}{if} (!array\_buffer-\/>is\_detachable()) \{}
\DoxyCodeLine{641     \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{642         isolate,}
\DoxyCodeLine{643         NewTypeError(MessageTemplate::kDataCloneErrorNonDetachableArrayBuffer));}
\DoxyCodeLine{644   \}}
\DoxyCodeLine{645 }
\DoxyCodeLine{646   \textcolor{comment}{// After this point the steps are not observable and are performed out of}}
\DoxyCodeLine{647   \textcolor{comment}{// spec order.}}
\DoxyCodeLine{648 }
\DoxyCodeLine{649   \textcolor{comment}{// Case 1: We don't need a BackingStore.}}
\DoxyCodeLine{650   \textcolor{keywordflow}{if} (new\_byte\_length == 0) \{}
\DoxyCodeLine{651     \textcolor{comment}{// 15. Perform ! DetachArrayBuffer(arrayBuffer).}}
\DoxyCodeLine{652     JSArrayBuffer::Detach(array\_buffer).Check();}
\DoxyCodeLine{653 }
\DoxyCodeLine{654     \textcolor{comment}{// 9. Let newBuffer be ? AllocateArrayBuffer(\%ArrayBuffer\%, newByteLength,}}
\DoxyCodeLine{655     \textcolor{comment}{//    newMaxByteLength).}}
\DoxyCodeLine{656     \textcolor{comment}{//}}
\DoxyCodeLine{657     \textcolor{comment}{// Nothing to do for steps 10-\/14.}}
\DoxyCodeLine{658     \textcolor{comment}{//}}
\DoxyCodeLine{659     \textcolor{comment}{// 16. Return newBuffer.}}
\DoxyCodeLine{660     \textcolor{keywordflow}{return} *isolate-\/>factory()}
\DoxyCodeLine{661                 -\/>NewJSArrayBufferAndBackingStore(}
\DoxyCodeLine{662                     0, new\_max\_byte\_length, InitializedFlag::kUninitialized,}
\DoxyCodeLine{663                     resizable)}
\DoxyCodeLine{664                 .ToHandleChecked();}
\DoxyCodeLine{665   \}}
\DoxyCodeLine{666 }
\DoxyCodeLine{667   \textcolor{comment}{// Case 2: We can reuse the same BackingStore.}}
\DoxyCodeLine{668   \textcolor{keyword}{auto} from\_backing\_store = array\_buffer-\/>GetBackingStore();}
\DoxyCodeLine{669   \textcolor{keywordflow}{if} (from\_backing\_store \&\& !from\_backing\_store-\/>is\_resizable\_by\_js() \&\&}
\DoxyCodeLine{670       resizable == ResizableFlag::kNotResizable \&\&}
\DoxyCodeLine{671       new\_byte\_length == array\_buffer-\/>GetByteLength()) \{}
\DoxyCodeLine{672     \textcolor{comment}{// TODO(syg): Consider realloc when the default ArrayBuffer allocator's}}
\DoxyCodeLine{673     \textcolor{comment}{// Reallocate does better than copy.}}
\DoxyCodeLine{674     \textcolor{comment}{//}}
\DoxyCodeLine{675     \textcolor{comment}{// See https://crbug.com/330575496\#comment27}}
\DoxyCodeLine{676 }
\DoxyCodeLine{677     \textcolor{comment}{// 15. Perform ! DetachArrayBuffer(arrayBuffer).}}
\DoxyCodeLine{678     JSArrayBuffer::Detach(array\_buffer).Check();}
\DoxyCodeLine{679 }
\DoxyCodeLine{680     \textcolor{comment}{// 9. Let newBuffer be ? AllocateArrayBuffer(\%ArrayBuffer\%, newByteLength,}}
\DoxyCodeLine{681     \textcolor{comment}{//    newMaxByteLength).}}
\DoxyCodeLine{682     \textcolor{comment}{// 16. Return newBuffer.}}
\DoxyCodeLine{683     \textcolor{keywordflow}{return} *isolate-\/>factory()-\/>NewJSArrayBuffer(std::move(from\_backing\_store));}
\DoxyCodeLine{684   \}}
\DoxyCodeLine{685 }
\DoxyCodeLine{686   \textcolor{comment}{// Case 3: We can't reuse the same BackingStore. Copy the buffer.}}
\DoxyCodeLine{687 }
\DoxyCodeLine{688   \textcolor{keywordflow}{if} (new\_byte\_length > new\_max\_byte\_length) \{}
\DoxyCodeLine{689     \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{690         isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength));}
\DoxyCodeLine{691   \}}
\DoxyCodeLine{692 }
\DoxyCodeLine{693   \textcolor{comment}{// 9. Let newBuffer be ? AllocateArrayBuffer(\%ArrayBuffer\%, newByteLength,}}
\DoxyCodeLine{694   \textcolor{comment}{//    newMaxByteLength).}}
\DoxyCodeLine{695   DirectHandle<JSArrayBuffer> new\_buffer;}
\DoxyCodeLine{696   MaybeDirectHandle<JSArrayBuffer> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{697       isolate-\/>factory()-\/>NewJSArrayBufferAndBackingStore(}
\DoxyCodeLine{698           new\_byte\_length, new\_max\_byte\_length, InitializedFlag::kUninitialized,}
\DoxyCodeLine{699           resizable);}
\DoxyCodeLine{700   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.ToHandle(\&new\_buffer)) \{}
\DoxyCodeLine{701     \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(}
\DoxyCodeLine{702         isolate, NewRangeError(MessageTemplate::kArrayBufferAllocationFailed));}
\DoxyCodeLine{703   \}}
\DoxyCodeLine{704 }
\DoxyCodeLine{705   \textcolor{comment}{// 10. Let copyLength be min(newByteLength,}}
\DoxyCodeLine{706   \textcolor{comment}{//    arrayBuffer.[[ArrayBufferByteLength]]).}}
\DoxyCodeLine{707   \textcolor{comment}{//}}
\DoxyCodeLine{708   \textcolor{comment}{// (Size comparison is done manually below instead of using min.)}}
\DoxyCodeLine{709 }
\DoxyCodeLine{710   \textcolor{comment}{// 11. Let fromBlock be arrayBuffer.[[ArrayBufferData]].}}
\DoxyCodeLine{711   uint8\_t* from\_data =}
\DoxyCodeLine{712       \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(array\_buffer-\/>backing\_store());}
\DoxyCodeLine{713 }
\DoxyCodeLine{714   \textcolor{comment}{// 12. Let toBlock be newBuffer.[[ArrayBufferData]].}}
\DoxyCodeLine{715   uint8\_t* to\_data = \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(new\_buffer-\/>backing\_store());}
\DoxyCodeLine{716 }
\DoxyCodeLine{717   \textcolor{comment}{// 13. Perform CopyDataBlockBytes(toBlock, 0, fromBlock, 0, copyLength).}}
\DoxyCodeLine{718   \textcolor{comment}{// 14. NOTE: Neither creation of the new Data Block nor copying from the old}}
\DoxyCodeLine{719   \textcolor{comment}{//     Data Block are observable. Implementations reserve the right to}}
\DoxyCodeLine{720   \textcolor{comment}{//     implement this method as a zero-\/copy move or a realloc.}}
\DoxyCodeLine{721   \textcolor{keywordtype}{size\_t} from\_byte\_length = array\_buffer-\/>GetByteLength();}
\DoxyCodeLine{722   \textcolor{keywordflow}{if} (new\_byte\_length <= from\_byte\_length) \{}
\DoxyCodeLine{723     \mbox{\hyperlink{namespacev8_1_1internal_a052d7f70643dfdd0705dcc768fea6e67}{CopyBytes}}(to\_data, from\_data, new\_byte\_length);}
\DoxyCodeLine{724   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{725     \mbox{\hyperlink{namespacev8_1_1internal_a052d7f70643dfdd0705dcc768fea6e67}{CopyBytes}}(to\_data, from\_data, from\_byte\_length);}
\DoxyCodeLine{726     memset(to\_data + from\_byte\_length, 0, new\_byte\_length -\/ from\_byte\_length);}
\DoxyCodeLine{727   \}}
\DoxyCodeLine{728 }
\DoxyCodeLine{729   \textcolor{comment}{// 15. Perform ! DetachArrayBuffer(arrayBuffer).}}
\DoxyCodeLine{730   JSArrayBuffer::Detach(array\_buffer).Check();}
\DoxyCodeLine{731 }
\DoxyCodeLine{732   \textcolor{comment}{// 16. Return newBuffer.}}
\DoxyCodeLine{733   \textcolor{keywordflow}{return} *new\_buffer;}
\DoxyCodeLine{734 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::array\+\_\+buffer\+\_\+allocator(), ASSIGN\+\_\+\+RETURN\+\_\+\+FAILURE\+\_\+\+ON\+\_\+\+EXCEPTION, CHECK\+\_\+\+SHARED, v8\+::internal\+::\+Copy\+Bytes(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+JSArray\+Buffer\+::\+Detach(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+JSArray\+Buffer\+::k\+Max\+Byte\+Length, v8\+::internal\+::k\+Not\+Resizable, k\+Preserve\+Resizability, v8\+::internal\+::k\+Resizable, v8\+::internal\+::k\+Uninitialized, v8\+::\+Array\+Buffer\+::\+Allocator\+::\+Max\+Allocation\+Size(), v8\+::internal\+::\+Factory\+::\+New\+JSArray\+Buffer(), v8\+::internal\+::\+Factory\+::\+New\+JSArray\+Buffer\+And\+Backing\+Store(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+String\+From\+Ascii\+Checked(), v8\+::internal\+::\+Object\+::\+Number\+Value(), v8\+::base\+::internal\+::result, THROW\+\_\+\+NEW\+\_\+\+ERROR\+\_\+\+RETURN\+\_\+\+FAILURE, v8\+::\+Value\+::\+To\+Integer(), and v8\+::internal\+::\+Try\+Number\+To\+Size().



Referenced by v8\+::internal\+::\+BUILTIN().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_abf979c5f850ec0b8e1b0577c49cd1ead_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_abf979c5f850ec0b8e1b0577c49cd1ead_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a8a210b6667f43cf1382bd1a064aa93c1}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a8a210b6667f43cf1382bd1a064aa93c1}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!ConstructBuffer@{ConstructBuffer}}
\index{ConstructBuffer@{ConstructBuffer}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ConstructBuffer()}{ConstructBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::Construct\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}} $>$}]{target,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{new\+\_\+target,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{length,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{max\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a6d3f691695696e478ebb4a18ab857bfa}{Initialized\+Flag}}}]{initialized }\end{DoxyParamCaption})}



Definition at line 101 of file builtins-\/arraybuffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{106                                                             \{}
\DoxyCodeLine{107   \textcolor{comment}{// We first try to convert the sizes and collect any possible range errors. If}}
\DoxyCodeLine{108   \textcolor{comment}{// no errors are observable we create the BackingStore before the}}
\DoxyCodeLine{109   \textcolor{comment}{// JSArrayBuffer to avoid a complex dance during setup. We then always create}}
\DoxyCodeLine{110   \textcolor{comment}{// the AB before throwing a possible error as the creation is observable.}}
\DoxyCodeLine{111   \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{SharedFlag}} shared =}
\DoxyCodeLine{112       *target != target-\/>native\_context()-\/>array\_buffer\_fun()}
\DoxyCodeLine{113           ? \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02elements_8cc_03_acd37159826079290ea180403d57a2ebeaa7e1f9f93df2422d7dd8114153deed99}{SharedFlag::kShared}}}
\DoxyCodeLine{114           : \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1anonymous__namespace_02wasm-inlining-into-js_8cc_03_a66d75e44e8119e492fa238e6ac04903f}{SharedFlag::kNotShared}};}
\DoxyCodeLine{115   \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{ResizableFlag}} resizable = max\_length.is\_null()}
\DoxyCodeLine{116                                       ? ResizableFlag::kNotResizable}
\DoxyCodeLine{117                                       : ResizableFlag::kResizable;}
\DoxyCodeLine{118   \textcolor{comment}{// BackingStore allocation may GC which is not observable itself.}}
\DoxyCodeLine{119   \textcolor{keyword}{auto} [backing\_store, range\_error] = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80}{TryAllocateBackingStore}}(}
\DoxyCodeLine{120       isolate, shared, resizable, \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, max\_length, initialized);}
\DoxyCodeLine{121   DirectHandle<JSObject> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{122   \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(}
\DoxyCodeLine{123       isolate, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}},}
\DoxyCodeLine{124       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02intl-objects_8cc_03_aea46070627c9c116b8f1be4a25840e66}{JSObject::New}}(target, new\_target, \{\}, NewJSObjectType::kAPIWrapper));}
\DoxyCodeLine{125   \textcolor{keyword}{auto} array\_buffer = Cast<JSArrayBuffer>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{126   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} backing\_store\_creation\_failed = !backing\_store;}
\DoxyCodeLine{127   array\_buffer-\/>Setup(shared, resizable, std::move(backing\_store), isolate);}
\DoxyCodeLine{128   \textcolor{keywordflow}{if} (backing\_store\_creation\_failed) \{}
\DoxyCodeLine{129     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(range\_error.has\_value());}
\DoxyCodeLine{130     \mbox{\hyperlink{execution_2isolate_8h_a7fc5aec5f967fb5b39c24c8b0348634d}{THROW\_NEW\_ERROR\_RETURN\_FAILURE}}(isolate, NewRangeError(range\_error.value()));}
\DoxyCodeLine{131   \}}
\DoxyCodeLine{132   \textcolor{keywordflow}{return} *array\_buffer;}
\DoxyCodeLine{133 \}}

\end{DoxyCode}


References ASSIGN\+\_\+\+RETURN\+\_\+\+FAILURE\+\_\+\+ON\+\_\+\+EXCEPTION, CHECK, v8\+::internal\+::\+Direct\+Handle$<$ T $>$\+::is\+\_\+null(), v8\+::internal\+::k\+APIWrapper, v8\+::internal\+::k\+Not\+Resizable, v8\+::internal\+::k\+Not\+Shared, v8\+::internal\+::k\+Resizable, v8\+::internal\+::k\+Shared, v8\+::internal\+::length, v8\+::internal\+::\+JSObject\+::\+New(), v8\+::base\+::internal\+::result, THROW\+\_\+\+NEW\+\_\+\+ERROR\+\_\+\+RETURN\+\_\+\+FAILURE, and Try\+Allocate\+Backing\+Store().



Referenced by v8\+::internal\+::\+BUILTIN().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a8a210b6667f43cf1382bd1a064aa93c1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a8a210b6667f43cf1382bd1a064aa93c1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}!TryAllocateBackingStore@{TryAllocateBackingStore}}
\index{TryAllocateBackingStore@{TryAllocateBackingStore}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/arraybuffer.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{TryAllocateBackingStore()}{TryAllocateBackingStore()}}
{\footnotesize\ttfamily std\+::pair$<$std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}}$>$, std\+::optional$<$\mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}}$>$ $>$ v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::Try\+Allocate\+Backing\+Store (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}}}]{shared,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}}}]{resizable,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{length,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{max\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a6d3f691695696e478ebb4a18ab857bfa}{Initialized\+Flag}}}]{initialized }\end{DoxyParamCaption})}



Definition at line 46 of file builtins-\/arraybuffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                                                      \{}
\DoxyCodeLine{50   DisallowJavascriptExecution no\_js(isolate);}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{keywordtype}{size\_t} byte\_length;}
\DoxyCodeLine{53   \textcolor{keywordtype}{size\_t} max\_byte\_length = 0;}
\DoxyCodeLine{54   std::unique\_ptr<BackingStore> backing\_store;}
\DoxyCodeLine{55 }
\DoxyCodeLine{56   \textcolor{keywordtype}{size\_t} max\_allocatable =}
\DoxyCodeLine{57       isolate-\/>array\_buffer\_allocator()-\/>MaxAllocationSize();}
\DoxyCodeLine{58   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(max\_allocatable <= JSArrayBuffer::kMaxByteLength);}
\DoxyCodeLine{59   static\_assert(JSArrayBuffer::kMaxByteLength == JSTypedArray::kMaxByteLength);}
\DoxyCodeLine{60   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_ae5782366e67cd86496ba15d6a3718b16}{TryNumberToSize}}(*\mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, \&byte\_length) ||}
\DoxyCodeLine{61       byte\_length > max\_allocatable) \{}
\DoxyCodeLine{62     \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, MessageTemplate::kInvalidArrayBufferLength\};}
\DoxyCodeLine{63   \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65   \textcolor{keywordflow}{switch} (resizable) \{}
\DoxyCodeLine{66     \textcolor{keywordflow}{case} ResizableFlag::kNotResizable:}
\DoxyCodeLine{67       backing\_store =}
\DoxyCodeLine{68           \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-posix_8cc_03_a85c792759a8f677e481c149d6d9bb5f2}{BackingStore::Allocate}}(isolate, byte\_length, shared, initialized);}
\DoxyCodeLine{69       \textcolor{keywordflow}{break};}
\DoxyCodeLine{70     \textcolor{keywordflow}{case} ResizableFlag::kResizable:}
\DoxyCodeLine{71       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_ae5782366e67cd86496ba15d6a3718b16}{TryNumberToSize}}(*max\_length, \&max\_byte\_length) ||}
\DoxyCodeLine{72           max\_byte\_length > max\_allocatable) \{}
\DoxyCodeLine{73         \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, MessageTemplate::kInvalidArrayBufferMaxLength\};}
\DoxyCodeLine{74       \}}
\DoxyCodeLine{75       \textcolor{keywordflow}{if} (byte\_length > max\_byte\_length) \{}
\DoxyCodeLine{76         \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, MessageTemplate::kInvalidArrayBufferMaxLength\};}
\DoxyCodeLine{77       \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79       \textcolor{keywordtype}{size\_t} page\_size, initial\_pages, max\_pages;}
\DoxyCodeLine{80       \textcolor{keyword}{const} \textcolor{keyword}{auto} maybe\_range\_error =}
\DoxyCodeLine{81           JSArrayBuffer::GetResizableBackingStorePageConfigurationImpl(}
\DoxyCodeLine{82               isolate, byte\_length, max\_byte\_length, \&page\_size, \&initial\_pages,}
\DoxyCodeLine{83               \&max\_pages);}
\DoxyCodeLine{84       \textcolor{keywordflow}{if} (maybe\_range\_error.has\_value()) \{}
\DoxyCodeLine{85         \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, maybe\_range\_error.value()\};}
\DoxyCodeLine{86       \}}
\DoxyCodeLine{87       backing\_store = BackingStore::TryAllocateAndPartiallyCommitMemory(}
\DoxyCodeLine{88           isolate, byte\_length, max\_byte\_length, page\_size, initial\_pages,}
\DoxyCodeLine{89           max\_pages, WasmMemoryFlag::kNotWasm, shared);}
\DoxyCodeLine{90       \textcolor{keywordflow}{break};}
\DoxyCodeLine{91   \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93   \textcolor{comment}{// Range errors bailed out earlier; only the failing allocation needs to be}}
\DoxyCodeLine{94   \textcolor{comment}{// caught here.}}
\DoxyCodeLine{95   \textcolor{keywordflow}{if} (!backing\_store) \{}
\DoxyCodeLine{96     \textcolor{keywordflow}{return} \{\textcolor{keyword}{nullptr}, MessageTemplate::kArrayBufferAllocationFailed\};}
\DoxyCodeLine{97   \}}
\DoxyCodeLine{98   \textcolor{keywordflow}{return} \{std::move(backing\_store), std::nullopt\};}
\DoxyCodeLine{99 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Backing\+Store\+::\+Allocate(), v8\+::internal\+::\+Isolate\+::array\+\_\+buffer\+\_\+allocator(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Resizable\+Backing\+Store\+Page\+Configuration\+Impl(), v8\+::internal\+::\+JSArray\+Buffer\+::k\+Max\+Byte\+Length, v8\+::internal\+::\+JSTyped\+Array\+::k\+Max\+Byte\+Length, v8\+::internal\+::k\+Not\+Resizable, v8\+::internal\+::k\+Not\+Wasm, v8\+::internal\+::k\+Resizable, v8\+::internal\+::length, v8\+::\+Array\+Buffer\+::\+Allocator\+::\+Max\+Allocation\+Size(), v8\+::internal\+::\+Backing\+Store\+::\+Try\+Allocate\+And\+Partially\+Commit\+Memory(), and v8\+::internal\+::\+Try\+Number\+To\+Size().



Referenced by Construct\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-arraybuffer_8cc_03_a392560801ff7d8054e437460cb6a5d80_icgraph}
\end{center}
\end{figure}
