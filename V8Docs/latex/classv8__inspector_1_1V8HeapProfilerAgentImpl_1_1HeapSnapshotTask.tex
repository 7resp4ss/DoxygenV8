\hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask}{}\doxysection{v8\+\_\+inspector\+::V8\+Heap\+Profiler\+Agent\+Impl\+::Heap\+Snapshot\+Task Class Reference}
\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask}\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}


Inheritance diagram for v8\+\_\+inspector\+::V8\+Heap\+Profiler\+Agent\+Impl\+::Heap\+Snapshot\+Task\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=245pt]{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+\_\+inspector\+::V8\+Heap\+Profiler\+Agent\+Impl\+::Heap\+Snapshot\+Task\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a357f4b6d5bc7726087966f93a7e284a8}{Heap\+Snapshot\+Task}} (\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl}{V8\+Heap\+Profiler\+Agent\+Impl}} $\ast$agent, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1AsyncCallbacks}{Async\+Callbacks}} $>$ async\+Callbacks, \mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotProtocolOptions}{Heap\+Snapshot\+Protocol\+Options}} protocol\+Options, std\+::unique\+\_\+ptr$<$ Take\+Heap\+Snapshot\+Callback $>$ callback)
\item 
void \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948}{Run}} () override
\item 
void \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ae4a265f20d6b73e5a7a1a510cf0b880f}{Run}} (\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{cppgc\+::\+Embedder\+Stack\+State}} stack\+State)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl}{V8\+Heap\+Profiler\+Agent\+Impl}} $\ast$ \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ad5785a2a3eb856085ee7e54303cf67fe}{m\+\_\+agent}}
\item 
std\+::weak\+\_\+ptr$<$ \mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1AsyncCallbacks}{Async\+Callbacks}} $>$ \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a53659b294a1a4889a1526383d7a6dd26}{m\+\_\+async\+Callbacks}}
\item 
\mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotProtocolOptions}{Heap\+Snapshot\+Protocol\+Options}} \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a502816777570b1edc71c6128b9d62142}{m\+\_\+protocol\+Options}}
\item 
std\+::unique\+\_\+ptr$<$ Take\+Heap\+Snapshot\+Callback $>$ \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}{m\+\_\+callback}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 198 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a357f4b6d5bc7726087966f93a7e284a8}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a357f4b6d5bc7726087966f93a7e284a8}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!HeapSnapshotTask@{HeapSnapshotTask}}
\index{HeapSnapshotTask@{HeapSnapshotTask}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{HeapSnapshotTask()}{HeapSnapshotTask()}}
{\footnotesize\ttfamily v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::\+Heap\+Snapshot\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl}{V8\+Heap\+Profiler\+Agent\+Impl}} $\ast$}]{agent,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1AsyncCallbacks}{Async\+Callbacks}} $>$}]{async\+Callbacks,  }\item[{\mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotProtocolOptions}{Heap\+Snapshot\+Protocol\+Options}}}]{protocol\+Options,  }\item[{std\+::unique\+\_\+ptr$<$ Take\+Heap\+Snapshot\+Callback $>$}]{callback }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 200 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{204       : \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ad5785a2a3eb856085ee7e54303cf67fe}{m\_agent}}(agent),}
\DoxyCodeLine{205         \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a53659b294a1a4889a1526383d7a6dd26}{m\_asyncCallbacks}}(asyncCallbacks),}
\DoxyCodeLine{206         \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a502816777570b1edc71c6128b9d62142}{m\_protocolOptions}}(protocolOptions),}
\DoxyCodeLine{207         \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}{m\_callback}}(std::move(callback)) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!Run@{Run}}
\index{Run@{Run}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{Run()}{Run()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::\+Run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1Task_a6bd5bda0e357fcc2e727bf7b0170f99a}{v8\+::\+Task}}.



Definition at line 209 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{209 \{ \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948}{Run}}(\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8a66059d0f4032e18106e14801cd133a24}{cppgc::EmbedderStackState::kNoHeapPointers}}); \}}

\end{DoxyCode}


References cppgc\+::k\+No\+Heap\+Pointers, and Run().



Referenced by Run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a17d882400cbeaf86a34a69b1f1176948_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ae4a265f20d6b73e5a7a1a510cf0b880f}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ae4a265f20d6b73e5a7a1a510cf0b880f}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!Run@{Run}}
\index{Run@{Run}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{Run()}{Run()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::\+Run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{cppgc\+::\+Embedder\+Stack\+State}}}]{stack\+State }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 211 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{211                                                \{}
\DoxyCodeLine{212     Response response = Response::Success();}
\DoxyCodeLine{213     \{}
\DoxyCodeLine{214       \textcolor{comment}{// If the async callbacks object still exists and is not canceled, then}}
\DoxyCodeLine{215       \textcolor{comment}{// the V8HeapProfilerAgentImpl still exists, so we can safely take a}}
\DoxyCodeLine{216       \textcolor{comment}{// snapshot.}}
\DoxyCodeLine{217       std::shared\_ptr<AsyncCallbacks> asyncCallbacks = \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a53659b294a1a4889a1526383d7a6dd26}{m\_asyncCallbacks}}.lock();}
\DoxyCodeLine{218       \textcolor{keywordflow}{if} (!asyncCallbacks) \textcolor{keywordflow}{return};}
\DoxyCodeLine{219       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{v8::base::MutexGuard}} lock(\&asyncCallbacks-\/>m\_mutex);}
\DoxyCodeLine{220       \textcolor{keywordflow}{if} (asyncCallbacks-\/>m\_canceled) \textcolor{keywordflow}{return};}
\DoxyCodeLine{221 }
\DoxyCodeLine{222       \textcolor{keyword}{auto}\& heapSnapshotTasks = asyncCallbacks-\/>m\_heapSnapshotTasks;}
\DoxyCodeLine{223       \textcolor{keyword}{auto} it =}
\DoxyCodeLine{224           std::find(heapSnapshotTasks.begin(), heapSnapshotTasks.end(), \textcolor{keyword}{this});}
\DoxyCodeLine{225       \textcolor{keywordflow}{if} (it == heapSnapshotTasks.end()) \{}
\DoxyCodeLine{226         \textcolor{comment}{// This task must have already been run. This can happen because the}}
\DoxyCodeLine{227         \textcolor{comment}{// task was queued with PostNonNestableTask but then got run early by}}
\DoxyCodeLine{228         \textcolor{comment}{// takePendingHeapSnapshots.}}
\DoxyCodeLine{229         \textcolor{keywordflow}{return};}
\DoxyCodeLine{230       \}}
\DoxyCodeLine{231       heapSnapshotTasks.erase(it);}
\DoxyCodeLine{232 }
\DoxyCodeLine{233       response = \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ad5785a2a3eb856085ee7e54303cf67fe}{m\_agent}}-\/>\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_a28610883b1a95956f1c0a1ffc711339f}{takeHeapSnapshotNow}}(\mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a502816777570b1edc71c6128b9d62142}{m\_protocolOptions}}, stackState);}
\DoxyCodeLine{234     \}}
\DoxyCodeLine{235 }
\DoxyCodeLine{236     \textcolor{comment}{// The rest of this function runs without the mutex, because Node expects to}}
\DoxyCodeLine{237     \textcolor{comment}{// be able to dispose the profiler agent during the callback, which would}}
\DoxyCodeLine{238     \textcolor{comment}{// deadlock if this function still held the mutex. It's safe to call the}}
\DoxyCodeLine{239     \textcolor{comment}{// callback without the mutex; the internal implementation of the callback}}
\DoxyCodeLine{240     \textcolor{comment}{// uses weak pointers to avoid doing anything dangerous if other components}}
\DoxyCodeLine{241     \textcolor{comment}{// have been disposed (see DomainDispatcher::Callback::sendIfActive).}}
\DoxyCodeLine{242     \textcolor{keywordflow}{if} (response.IsSuccess()) \{}
\DoxyCodeLine{243       \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}{m\_callback}}-\/>sendSuccess();}
\DoxyCodeLine{244     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{245       \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}{m\_callback}}-\/>sendFailure(std::move(response));}
\DoxyCodeLine{246     \}}
\DoxyCodeLine{247   \}}

\end{DoxyCode}


References m\+\_\+agent, m\+\_\+async\+Callbacks, m\+\_\+callback, m\+\_\+protocol\+Options, and v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::take\+Heap\+Snapshot\+Now().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ae4a265f20d6b73e5a7a1a510cf0b880f_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ad5785a2a3eb856085ee7e54303cf67fe}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_ad5785a2a3eb856085ee7e54303cf67fe}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!m\_agent@{m\_agent}}
\index{m\_agent@{m\_agent}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{m\_agent}{m\_agent}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8__inspector_1_1V8HeapProfilerAgentImpl}{V8\+Heap\+Profiler\+Agent\+Impl}}$\ast$ v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::m\+\_\+agent\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 250 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.



Referenced by Run().

\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a53659b294a1a4889a1526383d7a6dd26}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a53659b294a1a4889a1526383d7a6dd26}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!m\_asyncCallbacks@{m\_asyncCallbacks}}
\index{m\_asyncCallbacks@{m\_asyncCallbacks}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{m\_asyncCallbacks}{m\_asyncCallbacks}}
{\footnotesize\ttfamily std\+::weak\+\_\+ptr$<$\mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1AsyncCallbacks}{Async\+Callbacks}}$>$ v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::m\+\_\+async\+Callbacks\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 251 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.



Referenced by Run().

\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a8a1a3e96f00dc8c98f1f6df5f56f04f5}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!m\_callback@{m\_callback}}
\index{m\_callback@{m\_callback}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{m\_callback}{m\_callback}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$Take\+Heap\+Snapshot\+Callback$>$ v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::m\+\_\+callback\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 253 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.



Referenced by Run().

\mbox{\Hypertarget{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a502816777570b1edc71c6128b9d62142}\label{classv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotTask_a502816777570b1edc71c6128b9d62142}} 
\index{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}!m\_protocolOptions@{m\_protocolOptions}}
\index{m\_protocolOptions@{m\_protocolOptions}!v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask@{v8\_inspector::V8HeapProfilerAgentImpl::HeapSnapshotTask}}
\doxysubsubsection{\texorpdfstring{m\_protocolOptions}{m\_protocolOptions}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8__inspector_1_1V8HeapProfilerAgentImpl_1_1HeapSnapshotProtocolOptions}{Heap\+Snapshot\+Protocol\+Options}} v8\+\_\+inspector\+::\+V8\+Heap\+Profiler\+Agent\+Impl\+::\+Heap\+Snapshot\+Task\+::m\+\_\+protocol\+Options\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 252 of file v8-\/heap-\/profiler-\/agent-\/impl.\+cc.



Referenced by Run().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/inspector/\mbox{\hyperlink{v8-heap-profiler-agent-impl_8cc}{v8-\/heap-\/profiler-\/agent-\/impl.\+cc}}\end{DoxyCompactItemize}
