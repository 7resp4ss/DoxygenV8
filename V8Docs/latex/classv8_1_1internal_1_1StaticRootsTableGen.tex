\hypertarget{classv8_1_1internal_1_1StaticRootsTableGen}{}\doxysection{v8\+::internal\+::Static\+Roots\+Table\+Gen Class Reference}
\label{classv8_1_1internal_1_1StaticRootsTableGen}\index{v8::internal::StaticRootsTableGen@{v8::internal::StaticRootsTableGen}}


{\ttfamily \#include $<$static-\/roots-\/gen.\+h$>$}



Collaboration diagram for v8\+::internal\+::Static\+Roots\+Table\+Gen\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{classv8_1_1internal_1_1StaticRootsTableGen__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e}{write}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, const char $\ast$\mbox{\hyperlink{flag-definitions_8h_a583245cb1ce76ddbc0cf3db5354b33c1}{file}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 13 of file static-\/roots-\/gen.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e}\label{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e}} 
\index{v8::internal::StaticRootsTableGen@{v8::internal::StaticRootsTableGen}!write@{write}}
\index{write@{write}!v8::internal::StaticRootsTableGen@{v8::internal::StaticRootsTableGen}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Static\+Roots\+Table\+Gen\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{const char $\ast$}]{file }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 53 of file static-\/roots-\/gen.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{53                                                                   \{}
\DoxyCodeLine{54   \mbox{\hyperlink{src_2base_2logging_8h_a7b0fb5d6be902959a80a9a33cc4e73fe}{CHECK\_WITH\_MSG}}(!\mbox{\hyperlink{v8config_8h_a00d0eb346ff317ba25fd28d7ff4d4a98}{V8\_STATIC\_ROOTS\_BOOL}},}
\DoxyCodeLine{55                  \textcolor{stringliteral}{"{}Re-\/generating the table of roots is only supported in builds "{}}}
\DoxyCodeLine{56                  \textcolor{stringliteral}{"{}with v8\_enable\_static\_roots disabled"{}});}
\DoxyCodeLine{57   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{common_2globals_8h_aed0cda5ec94f5c68e180a809edc8e163}{V8\_STATIC\_ROOTS\_GENERATION\_BOOL}});}
\DoxyCodeLine{58   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{flag-definitions_8h_a583245cb1ce76ddbc0cf3db5354b33c1}{file}});}
\DoxyCodeLine{59   static\_assert(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_ae6e8bb7da3421a00b1b77972829b7977a61c7fd4b0ca3982ee8431c67598a46d7}{RootIndex::kFirstReadOnlyRoot}}) == 0);}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   std::ofstream out(\mbox{\hyperlink{flag-definitions_8h_a583245cb1ce76ddbc0cf3db5354b33c1}{file}}, std::ios::binary);}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   out << \textcolor{stringliteral}{"{}// Copyright 2022 the V8 project authors. All rights reserved.\(\backslash\)n"{}}}
\DoxyCodeLine{64       << \textcolor{stringliteral}{"{}// Use of this source code is governed by a BSD-\/style license "{}}}
\DoxyCodeLine{65          \textcolor{stringliteral}{"{}that can be\(\backslash\)n"{}}}
\DoxyCodeLine{66       << \textcolor{stringliteral}{"{}// found in the LICENSE file.\(\backslash\)n"{}}}
\DoxyCodeLine{67       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{68       << \textcolor{stringliteral}{"{}// This file is automatically generated by "{}}}
\DoxyCodeLine{69          \textcolor{stringliteral}{"{}`tools/dev/gen-\/static-\/roots.py`. Do\(\backslash\)n// not edit manually.\(\backslash\)n"{}}}
\DoxyCodeLine{70       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{71       << \textcolor{stringliteral}{"{}\#ifndef V8\_ROOTS\_STATIC\_ROOTS\_H\_\(\backslash\)n"{}}}
\DoxyCodeLine{72       << \textcolor{stringliteral}{"{}\#define V8\_ROOTS\_STATIC\_ROOTS\_H\_\(\backslash\)n"{}}}
\DoxyCodeLine{73       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{74       << \textcolor{stringliteral}{"{}\#include \(\backslash\)"{}src/common/globals.h\(\backslash\)"{}\(\backslash\)n"{}}}
\DoxyCodeLine{75       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{76       << \textcolor{stringliteral}{"{}\#if V8\_STATIC\_ROOTS\_BOOL\(\backslash\)n"{}}}
\DoxyCodeLine{77       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{78       << \textcolor{stringliteral}{"{}\#include \(\backslash\)"{}src/roots/roots.h\(\backslash\)"{}\(\backslash\)n"{}}}
\DoxyCodeLine{79       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{80       << \textcolor{stringliteral}{"{}// Disabling Wasm or Intl invalidates the contents of "{}}}
\DoxyCodeLine{81          \textcolor{stringliteral}{"{}static-\/roots.h.\(\backslash\)n"{}}}
\DoxyCodeLine{82       << \textcolor{stringliteral}{"{}// TODO(olivf): To support static roots for multiple build "{}}}
\DoxyCodeLine{83          \textcolor{stringliteral}{"{}configurations we\(\backslash\)n"{}}}
\DoxyCodeLine{84       << \textcolor{stringliteral}{"{}//              will need to generate target specific versions of "{}}}
\DoxyCodeLine{85          \textcolor{stringliteral}{"{}this file.\(\backslash\)n"{}}}
\DoxyCodeLine{86       << \textcolor{stringliteral}{"{}static\_assert(V8\_ENABLE\_WEBASSEMBLY);\(\backslash\)n"{}}}
\DoxyCodeLine{87       << \textcolor{stringliteral}{"{}static\_assert(V8\_INTL\_SUPPORT);\(\backslash\)n"{}}}
\DoxyCodeLine{88       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{89       << \textcolor{stringliteral}{"{}namespace v8 \{\(\backslash\)n"{}}}
\DoxyCodeLine{90       << \textcolor{stringliteral}{"{}namespace internal \{\(\backslash\)n"{}}}
\DoxyCodeLine{91       << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{92       << \textcolor{stringliteral}{"{}struct StaticReadOnlyRoot \{\(\backslash\)n"{}};}
\DoxyCodeLine{93 }
\DoxyCodeLine{94   \textcolor{comment}{// Output a symbol for every root. Ordered by ptr to make it easier to see the}}
\DoxyCodeLine{95   \textcolor{comment}{// memory layout of the read only page.}}
\DoxyCodeLine{96   \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_ae6e8bb7da3421a00b1b77972829b7977aefe3a02ee135866b7071646335f8823c}{RootIndex::kReadOnlyRootsCount}});}
\DoxyCodeLine{97   StaticRootsTableGenImpl gen(isolate);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& entry : gen.sorted\_roots()) \{}
\DoxyCodeLine{100     \mbox{\hyperlink{namespacev8_1_1internal_a367156001901752199b6ddeb33902ac4}{Tagged\_t}} ptr = entry.first;}
\DoxyCodeLine{101     \mbox{\hyperlink{src_2base_2logging_8h_a45a0717f39b7011dc823c1fe7b83e6fc}{CHECK\_LT}}(ptr, \mbox{\hyperlink{build__config_8h_a61756f047d321844cac1670ebccfe469}{kRegularPageSize}});}
\DoxyCodeLine{102     \textcolor{keyword}{const} std::list<RootIndex>\& roots = entry.second;}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_ae6e8bb7da3421a00b1b77972829b7977}{RootIndex}} root : roots) \{}
\DoxyCodeLine{105       \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* kPreString = \textcolor{stringliteral}{"{}  static constexpr Tagged\_t k"{}};}
\DoxyCodeLine{106       \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}}\& \mbox{\hyperlink{namespacev8_1_1internal_a611f0528d5415d4591ad6e8fe9513ac4}{name}} = gen.camel\_name(root);}
\DoxyCodeLine{107       \textcolor{keywordtype}{size\_t} ptr\_len = ceil(\mbox{\hyperlink{namespacev8_1_1base_1_1ieee754_a3c08f5ea2c3592c1a9ab4208f4f23096}{log2}}(ptr) / 4.0);}
\DoxyCodeLine{108       \textcolor{comment}{// Full line is: "{}kPreString|name = 0x.....;"{}}}
\DoxyCodeLine{109       \textcolor{keywordtype}{size\_t} len = strlen(kPreString) + \mbox{\hyperlink{namespacev8_1_1internal_a611f0528d5415d4591ad6e8fe9513ac4}{name}}.length() + 5 + ptr\_len + 1;}
\DoxyCodeLine{110       out << kPreString << \mbox{\hyperlink{namespacev8_1_1internal_a611f0528d5415d4591ad6e8fe9513ac4}{name}} << \textcolor{stringliteral}{"{} ="{}};}
\DoxyCodeLine{111       \textcolor{keywordflow}{if} (len > 80) out << \textcolor{stringliteral}{"{}\(\backslash\)n     "{}};}
\DoxyCodeLine{112       out << \textcolor{stringliteral}{"{} 0x"{}} << std::hex << ptr << std::dec << \textcolor{stringliteral}{"{};\(\backslash\)n"{}};}
\DoxyCodeLine{113     \}}
\DoxyCodeLine{114   \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116   out << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{117   out << \textcolor{stringliteral}{"{}  static constexpr Tagged\_t kFirstAllocatedRoot = 0x"{}} << std::hex}
\DoxyCodeLine{118       << gen.sorted\_roots().cbegin()-\/>first << std::dec << \textcolor{stringliteral}{"{};\(\backslash\)n"{}};}
\DoxyCodeLine{119   out << \textcolor{stringliteral}{"{}  static constexpr Tagged\_t kLastAllocatedRoot = 0x"{}} << std::hex}
\DoxyCodeLine{120       << gen.sorted\_roots().crbegin()-\/>first << std::dec << \textcolor{stringliteral}{"{};\(\backslash\)n"{}};}
\DoxyCodeLine{121   out << \textcolor{stringliteral}{"{}\};\(\backslash\)n"{}};}
\DoxyCodeLine{122 }
\DoxyCodeLine{123   \textcolor{comment}{// Output in order of roots table}}
\DoxyCodeLine{124   out << \textcolor{stringliteral}{"{}\(\backslash\)nstatic constexpr std::array<Tagged\_t, "{}} << \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}}
\DoxyCodeLine{125       << \textcolor{stringliteral}{"{}> StaticReadOnlyRootsPointerTable = \{\(\backslash\)n"{}};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127   \{}
\DoxyCodeLine{128 \textcolor{preprocessor}{\#define ENTRY(\_1, \_2, CamelName) \(\backslash\)}}
\DoxyCodeLine{129 \textcolor{preprocessor}{  out << "{}    StaticReadOnlyRoot::k"{}} << \#CamelName << "{},\(\backslash\)n"{};}
\DoxyCodeLine{130     \mbox{\hyperlink{roots_8h_af4a99ab1d2c1c3f72aad684f08d0c84b}{READ\_ONLY\_ROOT\_LIST}}(ENTRY)}
\DoxyCodeLine{131 \textcolor{preprocessor}{\#undef ENTRY}}
\DoxyCodeLine{132     out << \textcolor{stringliteral}{"{}\};\(\backslash\)n"{}};}
\DoxyCodeLine{133   \}}
\DoxyCodeLine{134   out << \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{135       << \textcolor{stringliteral}{"{}\}  // namespace internal\(\backslash\)n"{}}}
\DoxyCodeLine{136       << \textcolor{stringliteral}{"{}\}  // namespace v8\(\backslash\)n"{}}}
\DoxyCodeLine{137       << \textcolor{stringliteral}{"{}\#endif  // V8\_STATIC\_ROOTS\_BOOL\(\backslash\)n"{}}}
\DoxyCodeLine{138       << \textcolor{stringliteral}{"{}\#endif  // V8\_ROOTS\_STATIC\_ROOTS\_H\_\(\backslash\)n"{}};}
\DoxyCodeLine{139 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Static\+Roots\+Table\+Gen\+Impl\+::camel\+\_\+name(), CHECK, CHECK\+\_\+\+LT, CHECK\+\_\+\+WITH\+\_\+\+MSG, ENTRY, file(), v8\+::internal\+::k\+First\+Read\+Only\+Root, v8\+::internal\+::k\+Read\+Only\+Roots\+Count, k\+Regular\+Page\+Size, v8\+::base\+::ieee754\+::log2(), v8\+::internal\+::name, READ\+\_\+\+ONLY\+\_\+\+ROOT\+\_\+\+LIST, size(), v8\+::internal\+::\+Static\+Roots\+Table\+Gen\+Impl\+::sorted\+\_\+roots(), v8\+::internal\+::string, V8\+\_\+\+STATIC\+\_\+\+ROOTS\+\_\+\+BOOL, and V8\+\_\+\+STATIC\+\_\+\+ROOTS\+\_\+\+GENERATION\+\_\+\+BOOL.



Referenced by main().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=291pt]{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{static-roots-gen_8h}{static-\/roots-\/gen.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{static-roots-gen_8cc}{static-\/roots-\/gen.\+cc}}\end{DoxyCompactItemize}
