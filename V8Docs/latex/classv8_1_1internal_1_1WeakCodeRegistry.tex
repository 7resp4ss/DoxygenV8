\hypertarget{classv8_1_1internal_1_1WeakCodeRegistry}{}\doxysection{v8\+::internal\+::Weak\+Code\+Registry Class Reference}
\label{classv8_1_1internal_1_1WeakCodeRegistry}\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}


{\ttfamily \#include $<$weak-\/code-\/registry.\+h$>$}



Collaboration diagram for v8\+::internal\+::Weak\+Code\+Registry\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1WeakCodeRegistry_1_1Listener}{Listener}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_acddd017f45c33898cd76eaf3518cbda3}{Weak\+Code\+Registry}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_aabcb8bdf213f74820ce4501b9f5230ea}{$\sim$\+Weak\+Code\+Registry}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ade15bd87421c341c2015186151c436e2}{Track}} (\mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}} $\ast$entry, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AbstractCode}{Abstract\+Code}} $>$ \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ad5dab893749e7bbb4982b4bf2fe106fd}{Sweep}} (\mbox{\hyperlink{structv8_1_1internal_1_1WeakCodeRegistry_1_1Listener}{Listener}} $\ast$listener)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3}{Clear}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_a205f7b9c9d6077873fed76dabe81e4d8}{isolate\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 17 of file weak-\/code-\/registry.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_acddd017f45c33898cd76eaf3518cbda3}\label{classv8_1_1internal_1_1WeakCodeRegistry_acddd017f45c33898cd76eaf3518cbda3}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!WeakCodeRegistry@{WeakCodeRegistry}}
\index{WeakCodeRegistry@{WeakCodeRegistry}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{WeakCodeRegistry()}{WeakCodeRegistry()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Weak\+Code\+Registry\+::\+Weak\+Code\+Registry (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line 23 of file weak-\/code-\/registry.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{23 : \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_a205f7b9c9d6077873fed76dabe81e4d8}{isolate\_}}(isolate) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_aabcb8bdf213f74820ce4501b9f5230ea}\label{classv8_1_1internal_1_1WeakCodeRegistry_aabcb8bdf213f74820ce4501b9f5230ea}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!````~WeakCodeRegistry@{$\sim$WeakCodeRegistry}}
\index{````~WeakCodeRegistry@{$\sim$WeakCodeRegistry}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{$\sim$WeakCodeRegistry()}{~WeakCodeRegistry()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Weak\+Code\+Registry\+::$\sim$\+Weak\+Code\+Registry (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 24 of file weak-\/code-\/registry.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{24 \{ \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3}{Clear}}(); \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3}\label{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!Clear@{Clear}}
\index{Clear@{Clear}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{Clear()}{Clear()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Weak\+Code\+Registry\+::\+Clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 56 of file weak-\/code-\/registry.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{56                              \{}
\DoxyCodeLine{57   \textcolor{keywordflow}{for} (CodeEntry* entry : \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\_}}) \{}
\DoxyCodeLine{58     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02weak-code-registry_8cc_03_abfaa65e0a2cdcd4479dd6c9f6a4ffa65}{Untrack}}(entry);}
\DoxyCodeLine{59   \}}
\DoxyCodeLine{60   \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\_}}.clear();}
\DoxyCodeLine{61 \}}

\end{DoxyCode}


References entries\+\_\+, and v8\+::internal\+::anonymous\+\_\+namespace\{weak-\/code-\/registry.\+cc\}\+::\+Untrack().



Referenced by v8\+::internal\+::\+Profiler\+Code\+Observer\+::\+Clear\+Code\+Map().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_a001d17b1abaf103e3187450020cae7b3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_ad5dab893749e7bbb4982b4bf2fe106fd}\label{classv8_1_1internal_1_1WeakCodeRegistry_ad5dab893749e7bbb4982b4bf2fe106fd}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!Sweep@{Sweep}}
\index{Sweep@{Sweep}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{Sweep()}{Sweep()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Weak\+Code\+Registry\+::\+Sweep (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1WeakCodeRegistry_1_1Listener}{Weak\+Code\+Registry\+::\+Listener}} $\ast$}]{listener }\end{DoxyParamCaption})}



Definition at line 40 of file weak-\/code-\/registry.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{40                                                                \{}
\DoxyCodeLine{41   std::vector<CodeEntry*> alive\_entries;}
\DoxyCodeLine{42   \textcolor{keywordflow}{for} (CodeEntry* entry : \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\_}}) \{}
\DoxyCodeLine{43     \textcolor{comment}{// Mark the CodeEntry as being deleted on the heap if the heap object}}
\DoxyCodeLine{44     \textcolor{comment}{// location was nulled, indicating the object was freed.}}
\DoxyCodeLine{45     \textcolor{keywordflow}{if} (!*entry-\/>heap\_object\_location\_address()) \{}
\DoxyCodeLine{46       \textcolor{keywordflow}{if} (listener) \{}
\DoxyCodeLine{47         listener-\/>OnHeapObjectDeletion(entry);}
\DoxyCodeLine{48       \}}
\DoxyCodeLine{49     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{50       alive\_entries.push\_back(entry);}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52   \}}
\DoxyCodeLine{53   \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\_}} = std::move(alive\_entries);}
\DoxyCodeLine{54 \}}

\end{DoxyCode}


References entries\+\_\+, and v8\+::internal\+::\+Weak\+Code\+Registry\+::\+Listener\+::\+On\+Heap\+Object\+Deletion().



Referenced by v8\+::internal\+::\+Profiler\+Listener\+::\+Code\+Sweep\+Event(), and v8\+::internal\+::\+Profiler\+Listener\+::\+Weak\+Code\+Clear\+Event().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_ad5dab893749e7bbb4982b4bf2fe106fd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_ad5dab893749e7bbb4982b4bf2fe106fd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_ade15bd87421c341c2015186151c436e2}\label{classv8_1_1internal_1_1WeakCodeRegistry_ade15bd87421c341c2015186151c436e2}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!Track@{Track}}
\index{Track@{Track}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{Track()}{Track()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Weak\+Code\+Registry\+::\+Track (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}} $\ast$}]{entry,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AbstractCode}{Abstract\+Code}} $>$}]{code }\end{DoxyParamCaption})}



Definition at line 26 of file weak-\/code-\/registry.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{27                                                               \{}
\DoxyCodeLine{28   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!*entry-\/>heap\_object\_location\_address());}
\DoxyCodeLine{29   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{30   Handle<AbstractCode> \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}} = \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_a205f7b9c9d6077873fed76dabe81e4d8}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a2714e74bceacf9555c6a02745a0319e2}{global\_handles}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandles_a486c475da54faf1fe78e4752ed20e23c}{Create}}(*\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{31 }
\DoxyCodeLine{32   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}** heap\_object\_location\_address =}
\DoxyCodeLine{33       entry-\/>heap\_object\_location\_address();}
\DoxyCodeLine{34   *heap\_object\_location\_address = \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}.location();}
\DoxyCodeLine{35   \mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandles_a2df9a16d25157bd8873bea080fb7b627}{GlobalHandles::MakeWeak}}(heap\_object\_location\_address);}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \mbox{\hyperlink{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}{entries\_}}.push\_back(entry);}
\DoxyCodeLine{38 \}}

\end{DoxyCode}


References code, v8\+::internal\+::\+Global\+Handles\+::\+Create(), v8\+::internal\+::\+DCHECK(), entries\+\_\+, v8\+::internal\+::\+Isolate\+::global\+\_\+handles(), v8\+::internal\+::handle(), v8\+::internal\+::\+Code\+Entry\+::heap\+\_\+object\+\_\+location\+\_\+address(), isolate\+\_\+, v8\+::internal\+::\+Global\+Handles\+::\+Make\+Weak(), and v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc.



Referenced by v8\+::internal\+::\+Profiler\+Listener\+::\+Code\+Create\+Event(), and v8\+::internal\+::\+Profiler\+Listener\+::\+Reg\+Exp\+Code\+Create\+Event().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_ade15bd87421c341c2015186151c436e2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WeakCodeRegistry_ade15bd87421c341c2015186151c436e2_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}\label{classv8_1_1internal_1_1WeakCodeRegistry_ae6b91aabfe6b6a9c470a5ca092fa299f}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!entries\_@{entries\_}}
\index{entries\_@{entries\_}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{entries\_}{entries\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}}$\ast$$>$ v8\+::internal\+::\+Weak\+Code\+Registry\+::entries\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 41 of file weak-\/code-\/registry.\+h.



Referenced by Clear(), Sweep(), and Track().

\mbox{\Hypertarget{classv8_1_1internal_1_1WeakCodeRegistry_a205f7b9c9d6077873fed76dabe81e4d8}\label{classv8_1_1internal_1_1WeakCodeRegistry_a205f7b9c9d6077873fed76dabe81e4d8}} 
\index{v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}!isolate\_@{isolate\_}}
\index{isolate\_@{isolate\_}!v8::internal::WeakCodeRegistry@{v8::internal::WeakCodeRegistry}}
\doxysubsubsection{\texorpdfstring{isolate\_}{isolate\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}}$\ast$ const v8\+::internal\+::\+Weak\+Code\+Registry\+::isolate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 37 of file weak-\/code-\/registry.\+h.



Referenced by Track().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{weak-code-registry_8h}{weak-\/code-\/registry.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{weak-code-registry_8cc}{weak-\/code-\/registry.\+cc}}\end{DoxyCompactItemize}
