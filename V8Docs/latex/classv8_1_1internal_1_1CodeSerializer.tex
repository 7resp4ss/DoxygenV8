\hypertarget{classv8_1_1internal_1_1CodeSerializer}{}\doxysection{v8\+::internal\+::Code\+Serializer Class Reference}
\label{classv8_1_1internal_1_1CodeSerializer}\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}


{\ttfamily \#include $<$code-\/serializer.\+h$>$}



Inheritance diagram for v8\+::internal\+::Code\+Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1CodeSerializer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Code\+Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1CodeSerializer_1_1OffThreadDeserializeData}{Off\+Thread\+Deserialize\+Data}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a67bbe9e0511589dd24814d43b38aa562}{Code\+Serializer}} (const \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}} \& \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a795462409706aaab00b0b1502b510e9d}{operator=}} (const \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a6842ca958395f17cb09a339ad58693a9}{Serialize\+Shared\+Function\+Info}} (\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ info)
\item 
uint32\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b}{source\+\_\+hash}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} \mbox{\hyperlink{structv8_1_1ScriptCompiler_1_1CachedData}{Script\+Compiler\+::\+Cached\+Data}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a54c209a647a1b2e1133c9c4d3cd8c76e}{Serialize}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ info)
\item 
static \mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_adf0b3823862bdca92c84619362bb810f}{Deserialize}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$cached\+\_\+data, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source, const \mbox{\hyperlink{structv8_1_1internal_1_1ScriptDetails}{Script\+Details}} \&script\+\_\+details, \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ maybe\+\_\+cached\+\_\+script=\{\})
\item 
static \mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{structv8_1_1internal_1_1CodeSerializer_1_1OffThreadDeserializeData}{Off\+Thread\+Deserialize\+Data}} \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a9d1b8a5b5cfa1be24f952453fa753f85}{Start\+Deserialize\+Off\+Thread}} (\mbox{\hyperlink{classv8_1_1internal_1_1LocalIsolate}{Local\+Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$cached\+\_\+data)
\item 
static \mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a27287bb3481440639268010cc517de5f}{Finish\+Off\+Thread\+Deserialize}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{structv8_1_1internal_1_1CodeSerializer_1_1OffThreadDeserializeData}{Off\+Thread\+Deserialize\+Data}} \&\&data, \mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$cached\+\_\+data, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source, const \mbox{\hyperlink{structv8_1_1internal_1_1ScriptDetails}{Script\+Details}} \&script\+\_\+details, \mbox{\hyperlink{classv8_1_1internal_1_1BackgroundMergeTask}{Background\+Merge\+Task}} $\ast$background\+\_\+merge\+\_\+task=\mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}})
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a44c67d0d7900cb724f13c7ec3c36a13a}{Code\+Serializer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, uint32\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b}{source\+\_\+hash}})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a717c4cdf23965db7a5dbd61f02551662}{$\sim$\+Code\+Serializer}} () override
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{Serialize\+Generic}} (\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ heap\+\_\+object, \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}} slot\+\_\+type)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a34d6d87ada6478bc7d768b32137a8180}{Serialize\+Object\+Impl}} (\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ o, \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}} slot\+\_\+type) override
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a35d8eada166bc8bea6875062905f844f}{source\+\_\+hash\+\_\+}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 60 of file code-\/serializer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a67bbe9e0511589dd24814d43b38aa562}\label{classv8_1_1internal_1_1CodeSerializer_a67bbe9e0511589dd24814d43b38aa562}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!CodeSerializer@{CodeSerializer}}
\index{CodeSerializer@{CodeSerializer}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{CodeSerializer()}{CodeSerializer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Code\+Serializer\+::\+Code\+Serializer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a44c67d0d7900cb724f13c7ec3c36a13a}\label{classv8_1_1internal_1_1CodeSerializer_a44c67d0d7900cb724f13c7ec3c36a13a}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!CodeSerializer@{CodeSerializer}}
\index{CodeSerializer@{CodeSerializer}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{CodeSerializer()}{CodeSerializer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Code\+Serializer\+::\+Code\+Serializer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{uint32\+\_\+t}]{source\+\_\+hash }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 45 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{46     : \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab4bb72ec660acbfab28cd6bf83884b18}{Serializer}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1Snapshot_a735b7d274e3746b242f684cd22a651d8}{Snapshot::kDefaultSerializerFlags}}),}
\DoxyCodeLine{47       \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a35d8eada166bc8bea6875062905f844f}{source\_hash\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b}{source\_hash}}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a717c4cdf23965db7a5dbd61f02551662}\label{classv8_1_1internal_1_1CodeSerializer_a717c4cdf23965db7a5dbd61f02551662}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!````~CodeSerializer@{$\sim$CodeSerializer}}
\index{````~CodeSerializer@{$\sim$CodeSerializer}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{$\sim$CodeSerializer()}{~CodeSerializer()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Code\+Serializer\+::$\sim$\+Code\+Serializer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}}



Definition at line 103 of file code-\/serializer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{103 \{ \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa71724460718545dc17a6ce88b2c4300}{OutputStatistics}}(\textcolor{stringliteral}{"{}CodeSerializer"{}}); \}}

\end{DoxyCode}


References v8\+::internal\+::\+Serializer\+::\+Output\+Statistics().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a717c4cdf23965db7a5dbd61f02551662_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_adf0b3823862bdca92c84619362bb810f}\label{classv8_1_1internal_1_1CodeSerializer_adf0b3823862bdca92c84619362bb810f}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!Deserialize@{Deserialize}}
\index{Deserialize@{Deserialize}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{Deserialize()}{Deserialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ v8\+::internal\+::\+Code\+Serializer\+::\+Deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$}]{cached\+\_\+data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source,  }\item[{const \mbox{\hyperlink{structv8_1_1internal_1_1ScriptDetails}{Script\+Details}} \&}]{script\+\_\+details,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$}]{maybe\+\_\+cached\+\_\+script = {\ttfamily \{\}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 481 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{484                                                    \{}
\DoxyCodeLine{485   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_background\_compile) \{}
\DoxyCodeLine{486     StressOffThreadDeserializeThread thread(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, cached\_data);}
\DoxyCodeLine{487     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(thread.Start());}
\DoxyCodeLine{488     thread.Join();}
\DoxyCodeLine{489     \textcolor{keywordflow}{return} thread.Finalize(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, source, script\_details);}
\DoxyCodeLine{490     \textcolor{comment}{// TODO(leszeks): Compare off-\/thread deserialized data to on-\/thread.}}
\DoxyCodeLine{491   \}}
\DoxyCodeLine{492 }
\DoxyCodeLine{493   base::ElapsedTimer timer;}
\DoxyCodeLine{494   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.log\_function\_events) \{}
\DoxyCodeLine{495     timer.Start();}
\DoxyCodeLine{496   \}}
\DoxyCodeLine{497 }
\DoxyCodeLine{498   HandleScope scope(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{499 }
\DoxyCodeLine{500   DirectHandle<FixedArray> wrapped\_arguments;}
\DoxyCodeLine{501   \textcolor{keywordflow}{if} (!script\_details.wrapped\_arguments.is\_null()) \{}
\DoxyCodeLine{502     wrapped\_arguments = script\_details.wrapped\_arguments.ToHandleChecked();}
\DoxyCodeLine{503   \}}
\DoxyCodeLine{504 }
\DoxyCodeLine{505   \mbox{\hyperlink{namespacev8_1_1internal_a1c09ed066163123b5e733e573e5c0560}{SerializedCodeSanityCheckResult}} sanity\_check\_result =}
\DoxyCodeLine{506       \mbox{\hyperlink{namespacev8_1_1internal_1_1detail_a065f2a0786f61ff0bd5e833781a87aeaa3e421f5795a067010cfcf0d2c6da2123}{SerializedCodeSanityCheckResult::kSuccess}};}
\DoxyCodeLine{507   \textcolor{keyword}{const} SerializedCodeData scd = \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_a60245d6e0244c8f5b5491bb355ec83cf}{SerializedCodeData::FromCachedData}}(}
\DoxyCodeLine{508       \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, cached\_data,}
\DoxyCodeLine{509       \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_aa4cdc099f83eed136b7ff49a824972cf}{SerializedCodeData::SourceHash}}(source, wrapped\_arguments,}
\DoxyCodeLine{510                                      script\_details.origin\_options),}
\DoxyCodeLine{511       \&sanity\_check\_result);}
\DoxyCodeLine{512   \textcolor{keywordflow}{if} (sanity\_check\_result != \mbox{\hyperlink{namespacev8_1_1internal_1_1detail_a065f2a0786f61ff0bd5e833781a87aeaa3e421f5795a067010cfcf0d2c6da2123}{SerializedCodeSanityCheckResult::kSuccess}}) \{}
\DoxyCodeLine{513     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{514       \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Cached code failed check: \%s]\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(sanity\_check\_result));}
\DoxyCodeLine{515     \}}
\DoxyCodeLine{516     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(cached\_data-\/>rejected());}
\DoxyCodeLine{517     \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a9690b82e4f9b4c8a9160630396cde0b3}{counters}}()-\/>code\_cache\_reject\_reason()-\/>AddSample(}
\DoxyCodeLine{518         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sanity\_check\_result));}
\DoxyCodeLine{519     \textcolor{keywordflow}{return} MaybeDirectHandle<SharedFunctionInfo>();}
\DoxyCodeLine{520   \}}
\DoxyCodeLine{521 }
\DoxyCodeLine{522   \textcolor{comment}{// Deserialize.}}
\DoxyCodeLine{523   MaybeDirectHandle<SharedFunctionInfo> maybe\_result =}
\DoxyCodeLine{524       \mbox{\hyperlink{classv8_1_1internal_1_1ObjectDeserializer_a6d9f3c4aa095f9c1a12e4e9b8c9a6512}{ObjectDeserializer::DeserializeSharedFunctionInfo}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \&scd, source);}
\DoxyCodeLine{525 }
\DoxyCodeLine{526   DirectHandle<SharedFunctionInfo> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{527   \textcolor{keywordflow}{if} (!maybe\_result.ToHandle(\&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \{}
\DoxyCodeLine{528     \textcolor{comment}{// Deserializing may fail if the reservations cannot be fulfilled.}}
\DoxyCodeLine{529     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Deserializing failed]\(\backslash\)n"{}});}
\DoxyCodeLine{530     \textcolor{keywordflow}{return} MaybeDirectHandle<SharedFunctionInfo>();}
\DoxyCodeLine{531   \}}
\DoxyCodeLine{532 }
\DoxyCodeLine{533   \textcolor{comment}{// Check whether the newly deserialized data should be merged into an}}
\DoxyCodeLine{534   \textcolor{comment}{// existing Script from the Isolate compilation cache. If so, perform}}
\DoxyCodeLine{535   \textcolor{comment}{// the merge in a single-\/threaded manner since this deserialization was}}
\DoxyCodeLine{536   \textcolor{comment}{// single-\/threaded.}}
\DoxyCodeLine{537   \textcolor{keywordflow}{if} (DirectHandle<Script> cached\_script;}
\DoxyCodeLine{538       maybe\_cached\_script.ToHandle(\&cached\_script)) \{}
\DoxyCodeLine{539     BackgroundMergeTask merge;}
\DoxyCodeLine{540     merge.SetUpOnMainThread(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, cached\_script);}
\DoxyCodeLine{541     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(merge.HasPendingBackgroundWork());}
\DoxyCodeLine{542     DirectHandle<Script> new\_script(Cast<Script>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script()), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{543     merge.BeginMergeInBackground(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_aeafd6b00a8451f067344befd1395cd51}{AsLocalIsolate}}(), new\_script);}
\DoxyCodeLine{544     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(merge.HasPendingForegroundWork());}
\DoxyCodeLine{545     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = merge.CompleteMergeInForeground(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, new\_script);}
\DoxyCodeLine{546   \}}
\DoxyCodeLine{547 }
\DoxyCodeLine{548   Tagged<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} = Cast<Script>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script());}
\DoxyCodeLine{549   \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>set\_deserialized(\textcolor{keyword}{true});}
\DoxyCodeLine{550   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02code-serializer_8cc_03_a621e5b32cf85abda598e24bd23d068e3}{BaselineBatchCompileIfSparkplugCompiled}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{551   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{552     \textcolor{keywordtype}{double} ms = timer.Elapsed().InMillisecondsF();}
\DoxyCodeLine{553     \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = cached\_data-\/>length();}
\DoxyCodeLine{554     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Deserializing from \%d bytes took \%0.3f ms]\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, ms);}
\DoxyCodeLine{555   \}}
\DoxyCodeLine{556 }
\DoxyCodeLine{557   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02code-serializer_8cc_03_af7a5c75e3e65c8d70467770b2d898743}{FinalizeDeserialization}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}, timer, script\_details);}
\DoxyCodeLine{558 }
\DoxyCodeLine{559   \textcolor{keywordflow}{return} scope.CloseAndEscape(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{560 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::\+As\+Local\+Isolate(), v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Baseline\+Batch\+Compile\+If\+Sparkplug\+Compiled(), v8\+::internal\+::\+Background\+Merge\+Task\+::\+Begin\+Merge\+In\+Background(), CHECK, v8\+::internal\+::\+Background\+Merge\+Task\+::\+Complete\+Merge\+In\+Foreground(), v8\+::internal\+::\+Isolate\+::counters(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Object\+Deserializer\+::\+Deserialize\+Shared\+Function\+Info(), v8\+::base\+::\+Elapsed\+Timer\+::\+Elapsed(), v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Finalize\+Deserialization(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+From\+Cached\+Data(), v8\+::internal\+::\+Background\+Merge\+Task\+::\+Has\+Pending\+Background\+Work(), v8\+::internal\+::\+Background\+Merge\+Task\+::\+Has\+Pending\+Foreground\+Work(), v8\+::base\+::\+Time\+Delta\+::\+In\+Milliseconds\+F(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::detail\+::k\+Success, v8\+::internal\+::length, v8\+::internal\+::\+Aligned\+Cached\+Data\+::length(), v8\+::internal\+::\+Script\+Details\+::origin\+\_\+options, v8\+::internal\+::\+Print\+F(), v8\+::internal\+::\+Aligned\+Cached\+Data\+::rejected(), v8\+::base\+::internal\+::result, v8\+::internal\+::script, v8\+::internal\+::\+Background\+Merge\+Task\+::\+Set\+Up\+On\+Main\+Thread(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+Source\+Hash(), v8\+::base\+::\+Elapsed\+Timer\+::\+Start(), v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::\+To\+Handle(), v8\+::internal\+::\+To\+String(), v8\+::internal\+::v8\+\_\+flags, and v8\+::internal\+::\+Script\+Details\+::wrapped\+\_\+arguments.



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{compiler.\+cc\}\+::\+Get\+Shared\+Function\+Info\+For\+Script\+Impl(), and v8\+::internal\+::\+Compiler\+::\+Get\+Wrapped\+Function().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1CodeSerializer_adf0b3823862bdca92c84619362bb810f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_adf0b3823862bdca92c84619362bb810f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a27287bb3481440639268010cc517de5f}\label{classv8_1_1internal_1_1CodeSerializer_a27287bb3481440639268010cc517de5f}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!FinishOffThreadDeserialize@{FinishOffThreadDeserialize}}
\index{FinishOffThreadDeserialize@{FinishOffThreadDeserialize}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{FinishOffThreadDeserialize()}{FinishOffThreadDeserialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ v8\+::internal\+::\+Code\+Serializer\+::\+Finish\+Off\+Thread\+Deserialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1CodeSerializer_1_1OffThreadDeserializeData}{Off\+Thread\+Deserialize\+Data}} \&\&}]{data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$}]{cached\+\_\+data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source,  }\item[{const \mbox{\hyperlink{structv8_1_1internal_1_1ScriptDetails}{Script\+Details}} \&}]{script\+\_\+details,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1BackgroundMergeTask}{Background\+Merge\+Task}} $\ast$}]{background\+\_\+merge\+\_\+task = {\ttfamily \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 610 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{614                                                 \{}
\DoxyCodeLine{615   base::ElapsedTimer timer;}
\DoxyCodeLine{616   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.log\_function\_events) \{}
\DoxyCodeLine{617     timer.Start();}
\DoxyCodeLine{618   \}}
\DoxyCodeLine{619 }
\DoxyCodeLine{620   HandleScope scope(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{621 }
\DoxyCodeLine{622   DirectHandle<FixedArray> wrapped\_arguments;}
\DoxyCodeLine{623   \textcolor{keywordflow}{if} (!script\_details.wrapped\_arguments.is\_null()) \{}
\DoxyCodeLine{624     wrapped\_arguments = script\_details.wrapped\_arguments.ToHandleChecked();}
\DoxyCodeLine{625   \}}
\DoxyCodeLine{626 }
\DoxyCodeLine{627   \textcolor{comment}{// Do a source sanity check now that we have the source. It's important for}}
\DoxyCodeLine{628   \textcolor{comment}{// FromPartiallySanityCheckedCachedData call that the sanity\_check\_result}}
\DoxyCodeLine{629   \textcolor{comment}{// holds the result of the off-\/thread sanity check.}}
\DoxyCodeLine{630   \mbox{\hyperlink{namespacev8_1_1internal_a1c09ed066163123b5e733e573e5c0560}{SerializedCodeSanityCheckResult}} sanity\_check\_result =}
\DoxyCodeLine{631       data.sanity\_check\_result;}
\DoxyCodeLine{632   \textcolor{keyword}{const} SerializedCodeData scd =}
\DoxyCodeLine{633       \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_a0576a827b090265d868c12641f72015f}{SerializedCodeData::FromPartiallySanityCheckedCachedData}}(}
\DoxyCodeLine{634           cached\_data,}
\DoxyCodeLine{635           \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_aa4cdc099f83eed136b7ff49a824972cf}{SerializedCodeData::SourceHash}}(source, wrapped\_arguments,}
\DoxyCodeLine{636                                          script\_details.origin\_options),}
\DoxyCodeLine{637           \&sanity\_check\_result);}
\DoxyCodeLine{638   \textcolor{keywordflow}{if} (sanity\_check\_result != \mbox{\hyperlink{namespacev8_1_1internal_1_1detail_a065f2a0786f61ff0bd5e833781a87aeaa3e421f5795a067010cfcf0d2c6da2123}{SerializedCodeSanityCheckResult::kSuccess}}) \{}
\DoxyCodeLine{639     \textcolor{comment}{// The only case where the deserialization result could exist despite a}}
\DoxyCodeLine{640     \textcolor{comment}{// check failure is on a source mismatch, since we can't test for this}}
\DoxyCodeLine{641     \textcolor{comment}{// off-\/thread.}}
\DoxyCodeLine{642     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(!data.maybe\_result.is\_null(),}
\DoxyCodeLine{643                    sanity\_check\_result ==}
\DoxyCodeLine{644                        SerializedCodeSanityCheckResult::kSourceMismatch);}
\DoxyCodeLine{645     \textcolor{comment}{// The only kind of sanity check we can't test for off-\/thread is a source}}
\DoxyCodeLine{646     \textcolor{comment}{// mismatch.}}
\DoxyCodeLine{647     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(sanity\_check\_result != data.sanity\_check\_result,}
\DoxyCodeLine{648                    sanity\_check\_result ==}
\DoxyCodeLine{649                        SerializedCodeSanityCheckResult::kSourceMismatch);}
\DoxyCodeLine{650     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{651       \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Cached code failed check: \%s]\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(sanity\_check\_result));}
\DoxyCodeLine{652     \}}
\DoxyCodeLine{653     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(cached\_data-\/>rejected());}
\DoxyCodeLine{654     \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a9690b82e4f9b4c8a9160630396cde0b3}{counters}}()-\/>code\_cache\_reject\_reason()-\/>AddSample(}
\DoxyCodeLine{655         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sanity\_check\_result));}
\DoxyCodeLine{656     \textcolor{keywordflow}{return} MaybeDirectHandle<SharedFunctionInfo>();}
\DoxyCodeLine{657   \}}
\DoxyCodeLine{658 }
\DoxyCodeLine{659   Handle<SharedFunctionInfo> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{660   \textcolor{keywordflow}{if} (!data.maybe\_result.ToHandle(\&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \{}
\DoxyCodeLine{661     \textcolor{comment}{// Deserializing may fail if the reservations cannot be fulfilled.}}
\DoxyCodeLine{662     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{663       \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Off-\/thread deserializing failed]\(\backslash\)n"{}});}
\DoxyCodeLine{664     \}}
\DoxyCodeLine{665     \textcolor{keywordflow}{return} MaybeDirectHandle<SharedFunctionInfo>();}
\DoxyCodeLine{666   \}}
\DoxyCodeLine{667 }
\DoxyCodeLine{668   \textcolor{comment}{// Change the result persistent handle into a regular handle.}}
\DoxyCodeLine{669   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(data.persistent\_handles-\/>Contains(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.location()));}
\DoxyCodeLine{670   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(*\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}, \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{671 }
\DoxyCodeLine{672   \textcolor{keywordflow}{if} (background\_merge\_task \&\&}
\DoxyCodeLine{673       background\_merge\_task-\/>HasPendingForegroundWork()) \{}
\DoxyCodeLine{674     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(data.scripts.size(), 1);}
\DoxyCodeLine{675     DirectHandle<Script> new\_script = data.scripts[0];}
\DoxyCodeLine{676     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{677         background\_merge\_task-\/>CompleteMergeInForeground(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, new\_script);}
\DoxyCodeLine{678     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1Object_ad14e1354c3909454dc7216e4ab1a804c}{Object::StrictEquals}}(Cast<Script>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script())-\/>source(),}
\DoxyCodeLine{679                                 *source));}
\DoxyCodeLine{680     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a7e2962359009581ba84e6a361f574f61}{factory}}()-\/>script\_list()-\/>Contains(}
\DoxyCodeLine{681         \mbox{\hyperlink{namespacev8_1_1internal_a96a98d1219c08bac1c5c91ba9dacd1d4}{MakeWeak}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script())));}
\DoxyCodeLine{682   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{683     DirectHandle<Script> result\_script(Cast<Script>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>script()), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{684     \textcolor{comment}{// Fix up the source on the script. This should be the only deserialized}}
\DoxyCodeLine{685     \textcolor{comment}{// script, and the off-\/thread deserializer should have set its source to the}}
\DoxyCodeLine{686     \textcolor{comment}{// empty string. In debug mode the code cache does contain the original}}
\DoxyCodeLine{687     \textcolor{comment}{// source.}}
\DoxyCodeLine{688     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(data.scripts.size(), 1);}
\DoxyCodeLine{689     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(*result\_script, *data.scripts[0]);}
\DoxyCodeLine{690 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{691     \textcolor{keywordflow}{if} (!Cast<String>(result\_script-\/>source())-\/>Equals(*source)) \{}
\DoxyCodeLine{692       \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a8a5c1c5338649eadaaa30d05f1aca917}{PushStackTraceAndDie}}(}
\DoxyCodeLine{693           \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(result\_script-\/>source().ptr()),}
\DoxyCodeLine{694           \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(source-\/>ptr()));}
\DoxyCodeLine{695     \}}
\DoxyCodeLine{696 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{697     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(result\_script-\/>source(), ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}).empty\_string());}
\DoxyCodeLine{698 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{699     \mbox{\hyperlink{classv8_1_1internal_1_1Script_a9a0c2ad82d14056d78ff2f1f5f7275a7}{Script::SetSource}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, result\_script, source);}
\DoxyCodeLine{700 }
\DoxyCodeLine{701     \textcolor{comment}{// Fix up the script list to include the newly deserialized script.}}
\DoxyCodeLine{702     Handle<WeakArrayList> list = \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a7e2962359009581ba84e6a361f574f61}{factory}}()-\/>script\_list();}
\DoxyCodeLine{703     \textcolor{keywordflow}{for} (Handle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} : data.scripts) \{}
\DoxyCodeLine{704       \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>set\_deserialized(\textcolor{keyword}{true});}
\DoxyCodeLine{705       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02code-serializer_8cc_03_a621e5b32cf85abda598e24bd23d068e3}{BaselineBatchCompileIfSparkplugCompiled}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{706       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(data.persistent\_handles-\/>Contains(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}.location()));}
\DoxyCodeLine{707       list = \mbox{\hyperlink{classv8_1_1internal_1_1WeakArrayList_ad904e98ccfd7cf049fb4d19063fcf33a}{WeakArrayList::AddToEnd}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, list,}
\DoxyCodeLine{708                                      \mbox{\hyperlink{classv8_1_1internal_1_1MaybeObjectDirectHandle_af39f668bdaaf25432eb7cdbc4066f4d6}{MaybeObjectDirectHandle::Weak}}(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}));}
\DoxyCodeLine{709     \}}
\DoxyCodeLine{710     \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8df5a9bc732677f110dd7cb5a84fd63f}{SetRootScriptList}}(*list);}
\DoxyCodeLine{711   \}}
\DoxyCodeLine{712 }
\DoxyCodeLine{713   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{714     \textcolor{keywordtype}{double} ms = timer.Elapsed().InMillisecondsF();}
\DoxyCodeLine{715     \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = cached\_data-\/>length();}
\DoxyCodeLine{716     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Finishing off-\/thread deserialize from \%d bytes took \%0.3f ms]\(\backslash\)n"{}},}
\DoxyCodeLine{717            \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, ms);}
\DoxyCodeLine{718   \}}
\DoxyCodeLine{719 }
\DoxyCodeLine{720   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02code-serializer_8cc_03_af7a5c75e3e65c8d70467770b2d898743}{FinalizeDeserialization}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}, timer, script\_details);}
\DoxyCodeLine{721 }
\DoxyCodeLine{722   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!background\_merge\_task ||}
\DoxyCodeLine{723          !background\_merge\_task-\/>HasPendingForegroundWork());}
\DoxyCodeLine{724 }
\DoxyCodeLine{725   \textcolor{keywordflow}{return} scope.CloseAndEscape(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{726 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Weak\+Array\+List\+::\+Add\+To\+End(), v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Baseline\+Batch\+Compile\+If\+Sparkplug\+Compiled(), CHECK\+\_\+\+EQ, v8\+::internal\+::\+Background\+Merge\+Task\+::\+Complete\+Merge\+In\+Foreground(), v8\+::internal\+::\+Isolate\+::counters(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, v8\+::base\+::\+Elapsed\+Timer\+::\+Elapsed(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Finalize\+Deserialization(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+From\+Partially\+Sanity\+Checked\+Cached\+Data(), v8\+::internal\+::handle(), v8\+::internal\+::\+Background\+Merge\+Task\+::\+Has\+Pending\+Foreground\+Work(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::base\+::\+Time\+Delta\+::\+In\+Milliseconds\+F(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::detail\+::k\+Success, v8\+::internal\+::length, v8\+::internal\+::\+Aligned\+Cached\+Data\+::length(), v8\+::internal\+::\+Make\+Weak(), v8\+::internal\+::\+Script\+Details\+::origin\+\_\+options, v8\+::internal\+::\+Print\+F(), v8\+::internal\+::\+Isolate\+::\+Push\+Stack\+Trace\+And\+Die(), v8\+::internal\+::\+Aligned\+Cached\+Data\+::rejected(), v8\+::base\+::internal\+::result, v8\+::internal\+::script, v8\+::internal\+::\+Heap\+::\+Set\+Root\+Script\+List(), v8\+::internal\+::\+Script\+::\+Set\+Source(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+Source\+Hash(), v8\+::base\+::\+Elapsed\+Timer\+::\+Start(), v8\+::internal\+::\+Object\+::\+Strict\+Equals(), v8\+::internal\+::\+To\+String(), v8\+::internal\+::v8\+\_\+flags, v8\+::internal\+::\+Maybe\+Object\+Direct\+Handle\+::\+Weak(), and v8\+::internal\+::\+Script\+Details\+::wrapped\+\_\+arguments.



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Stress\+Off\+Thread\+Deserialize\+Thread\+::\+Finalize(), and v8\+::internal\+::\+Background\+Deserialize\+Task\+::\+Finish().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1CodeSerializer_a27287bb3481440639268010cc517de5f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a27287bb3481440639268010cc517de5f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a795462409706aaab00b0b1502b510e9d}\label{classv8_1_1internal_1_1CodeSerializer_a795462409706aaab00b0b1502b510e9d}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!operator=@{operator=}}
\index{operator=@{operator=}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}}\& v8\+::internal\+::\+Code\+Serializer\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer}{Code\+Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a54c209a647a1b2e1133c9c4d3cd8c76e}\label{classv8_1_1internal_1_1CodeSerializer_a54c209a647a1b2e1133c9c4d3cd8c76e}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!Serialize@{Serialize}}
\index{Serialize@{Serialize}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{Serialize()}{Serialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1ScriptCompiler_1_1CachedData}{Script\+Compiler\+::\+Cached\+Data}} $\ast$ v8\+::internal\+::\+Code\+Serializer\+::\+Serialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 50 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{51                                                        \{}
\DoxyCodeLine{52   \mbox{\hyperlink{tracing_2trace-event_8h_a9efe6bb95f09a570b5eb2051c1ded637}{TRACE\_EVENT\_CALL\_STATS\_SCOPED}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \textcolor{stringliteral}{"{}v8"{}}, \textcolor{stringliteral}{"{}V8.SerializeCode"{}});}
\DoxyCodeLine{53   NestedTimedHistogramScope histogram\_timer(}
\DoxyCodeLine{54       \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a9690b82e4f9b4c8a9160630396cde0b3}{counters}}()-\/>compile\_serialize());}
\DoxyCodeLine{55   \mbox{\hyperlink{runtime-call-stats-scope_8h_ae2e0b4aff109545657aba76d78cbf764}{RCS\_SCOPE}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, RuntimeCallCounterId::kCompileSerialize);}
\DoxyCodeLine{56   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}), \textcolor{stringliteral}{"{}V8.CompileSerialize"{}});}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   base::ElapsedTimer timer;}
\DoxyCodeLine{59   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) timer.Start();}
\DoxyCodeLine{60   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}(Cast<Script>(info-\/>script()), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{61   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_serializer) \{}
\DoxyCodeLine{62     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Serializing from"{}});}
\DoxyCodeLine{63     \mbox{\hyperlink{namespacev8_1_1internal_a8899d90340d811cd369173aac228774e}{ShortPrint}}(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>name());}
\DoxyCodeLine{64     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}]\(\backslash\)n"{}});}
\DoxyCodeLine{65   \}}
\DoxyCodeLine{66 \textcolor{preprocessor}{\#if V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{67   \textcolor{comment}{// TODO(7110): Enable serialization of Asm modules once the AsmWasmData is}}
\DoxyCodeLine{68   \textcolor{comment}{// context independent.}}
\DoxyCodeLine{69   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>ContainsAsmModule()) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   \textcolor{comment}{// Serialize code object.}}
\DoxyCodeLine{73   DirectHandle<String> source(Cast<String>(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>source()), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{74   DirectHandle<FixedArray> wrapped\_arguments;}
\DoxyCodeLine{75   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>is\_wrapped()) \{}
\DoxyCodeLine{76     wrapped\_arguments =}
\DoxyCodeLine{77         DirectHandle<FixedArray>(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>wrapped\_arguments(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{78   \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80   HandleScope scope(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{81   \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a67bbe9e0511589dd24814d43b38aa562}{CodeSerializer}} \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a943ef56601cf77621c78e618318f254b}{cs}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}},}
\DoxyCodeLine{82                     \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_aa4cdc099f83eed136b7ff49a824972cf}{SerializedCodeData::SourceHash}}(source, wrapped\_arguments,}
\DoxyCodeLine{83                                                    \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}-\/>origin\_options()));}
\DoxyCodeLine{84   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{preprocessor}{\#ifndef DEBUG}}
\DoxyCodeLine{87   \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a943ef56601cf77621c78e618318f254b}{cs}}.reference\_map()-\/>AddAttachedReference(*source);}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{89   AlignedCachedData* cached\_data = \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a943ef56601cf77621c78e618318f254b}{cs}}.SerializeSharedFunctionInfo(info);}
\DoxyCodeLine{90 }
\DoxyCodeLine{91   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_deserialization) \{}
\DoxyCodeLine{92     \textcolor{keywordtype}{double} ms = timer.Elapsed().InMillisecondsF();}
\DoxyCodeLine{93     \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = cached\_data-\/>length();}
\DoxyCodeLine{94     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}[Serializing to \%d bytes took \%0.3f ms]\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}, ms);}
\DoxyCodeLine{95   \}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97   ScriptCompiler::CachedData* \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{98       \textcolor{keyword}{new} ScriptCompiler::CachedData(cached\_data-\/>data(), cached\_data-\/>length(),}
\DoxyCodeLine{99                                      \mbox{\hyperlink{structv8_1_1ScriptCompiler_1_1CachedData_ac1a1055d361e89b589c3fa98b79b9c25a51238ea1869c43f0fab950c7b8401bb3}{ScriptCompiler::CachedData::BufferOwned}});}
\DoxyCodeLine{100   cached\_data-\/>ReleaseDataOwnership();}
\DoxyCodeLine{101   \textcolor{keyword}{delete} cached\_data;}
\DoxyCodeLine{102 }
\DoxyCodeLine{103   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{104 \}}

\end{DoxyCode}


References v8\+::\+Script\+Compiler\+::\+Cached\+Data\+::\+Buffer\+Owned, v8\+::internal\+::\+Isolate\+::counters(), v8\+::internal\+::cs, v8\+::internal\+::\+Aligned\+Cached\+Data\+::data(), v8\+::base\+::\+Elapsed\+Timer\+::\+Elapsed(), v8\+::base\+::\+Time\+Delta\+::\+In\+Milliseconds\+F(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::length, v8\+::internal\+::\+Aligned\+Cached\+Data\+::length(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+Print\+F(), RCS\+\_\+\+SCOPE, v8\+::internal\+::\+Aligned\+Cached\+Data\+::\+Release\+Data\+Ownership(), v8\+::base\+::internal\+::result, v8\+::internal\+::script, v8\+::internal\+::\+Short\+Print(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+Source\+Hash(), v8\+::base\+::\+Elapsed\+Timer\+::\+Start(), TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT0, TRACE\+\_\+\+EVENT\+\_\+\+CALL\+\_\+\+STATS\+\_\+\+SCOPED, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::\+Script\+Compiler\+::\+Create\+Code\+Cache(), and v8\+::\+Script\+Compiler\+::\+Create\+Code\+Cache\+For\+Function().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a54c209a647a1b2e1133c9c4d3cd8c76e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a54c209a647a1b2e1133c9c4d3cd8c76e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}\label{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!SerializeGeneric@{SerializeGeneric}}
\index{SerializeGeneric@{SerializeGeneric}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeGeneric()}{SerializeGeneric()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Code\+Serializer\+::\+Serialize\+Generic (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{heap\+\_\+object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}}}]{slot\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 281 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{282                                                           \{}
\DoxyCodeLine{283   \textcolor{comment}{// Object has not yet been serialized.  Serialize it here.}}
\DoxyCodeLine{284   ObjectSerializer serializer(\textcolor{keyword}{this}, heap\_object, \&\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}});}
\DoxyCodeLine{285   serializer.Serialize(slot\_type);}
\DoxyCodeLine{286 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Serializer\+::\+Object\+Serializer\+::\+Serialize(), and v8\+::internal\+::\+Serializer\+::sink\+\_\+.



Referenced by Serialize\+Object\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a34d6d87ada6478bc7d768b32137a8180}\label{classv8_1_1internal_1_1CodeSerializer_a34d6d87ada6478bc7d768b32137a8180}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!SerializeObjectImpl@{SerializeObjectImpl}}
\index{SerializeObjectImpl@{SerializeObjectImpl}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeObjectImpl()}{SerializeObjectImpl()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Code\+Serializer\+::\+Serialize\+Object\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{o,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}}}]{slot\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a7a703abcab3bd3b29e4bc8ffef87e538}{v8\+::internal\+::\+Serializer}}.



Definition at line 120 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{121                                                              \{}
\DoxyCodeLine{122   ReadOnlyRoots roots(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{123   \mbox{\hyperlink{namespacev8_1_1internal_a9312a9fc987dba9376a530956f94e8fe}{InstanceType}} instance\_type;}
\DoxyCodeLine{124   \{}
\DoxyCodeLine{125     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{126     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} raw = *obj;}
\DoxyCodeLine{127     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ae7ebac428ba04f4c58134e38c7f97f65}{SerializeHotObject}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{128     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa0ceafd7dc9eaf326d5f14caa30525f4}{SerializeRoot}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{129     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_afd1dba8a5965260866a8e8c3891c89b0}{SerializeBackReference}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{130     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa24dcab38dd340e096d15dcb7e1c4ff5}{SerializeReadOnlyObjectReference}}(raw, \&\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}})) \textcolor{keywordflow}{return};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132     instance\_type = raw-\/>map()-\/>instance\_type();}
\DoxyCodeLine{133     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!InstanceTypeChecker::IsInstructionStream(instance\_type));}
\DoxyCodeLine{134   \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136   \textcolor{keywordflow}{if} (InstanceTypeChecker::IsScript(instance\_type)) \{}
\DoxyCodeLine{137     DirectHandle<FixedArray> host\_options;}
\DoxyCodeLine{138     DirectHandle<UnionOf<Smi, Symbol, Undefined>> context\_data;}
\DoxyCodeLine{139     \{}
\DoxyCodeLine{140       \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{141       Tagged<Script> script\_obj = Cast<Script>(*obj);}
\DoxyCodeLine{142       \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(script\_obj-\/>compilation\_type(), \mbox{\hyperlink{classv8_1_1internal_1_1Script_ad5ba2ef0105d489f8e29013ad262f584af235d200c1777ea71eaa75068ce89b3d}{Script::CompilationType::kEval}});}
\DoxyCodeLine{143       \textcolor{comment}{// We want to differentiate between undefined and uninitialized\_symbol for}}
\DoxyCodeLine{144       \textcolor{comment}{// context\_data for now. It is hack to allow debugging for scripts that}}
\DoxyCodeLine{145       \textcolor{comment}{// are included as a part of custom snapshot. (see}}
\DoxyCodeLine{146       \textcolor{comment}{// debug::Script::IsEmbedded())}}
\DoxyCodeLine{147       Tagged<UnionOf<Smi, Symbol, Undefined>> raw\_context\_data =}
\DoxyCodeLine{148           script\_obj-\/>context\_data();}
\DoxyCodeLine{149       \textcolor{keywordflow}{if} (raw\_context\_data != roots.undefined\_value() \&\&}
\DoxyCodeLine{150           raw\_context\_data != roots.uninitialized\_symbol()) \{}
\DoxyCodeLine{151         script\_obj-\/>set\_context\_data(roots.undefined\_value());}
\DoxyCodeLine{152       \}}
\DoxyCodeLine{153       context\_data = \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(raw\_context\_data, \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{154       \textcolor{comment}{// We don't want to serialize host options to avoid serializing}}
\DoxyCodeLine{155       \textcolor{comment}{// unnecessary object graph.}}
\DoxyCodeLine{156       host\_options =}
\DoxyCodeLine{157           \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(script\_obj-\/>host\_defined\_options(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{158       script\_obj-\/>set\_host\_defined\_options(roots.empty\_fixed\_array());}
\DoxyCodeLine{159     \}}
\DoxyCodeLine{160     \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(obj, slot\_type);}
\DoxyCodeLine{161     \{}
\DoxyCodeLine{162       \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{163       Tagged<Script> script\_obj = Cast<Script>(*obj);}
\DoxyCodeLine{164       script\_obj-\/>set\_host\_defined\_options(*host\_options);}
\DoxyCodeLine{165       script\_obj-\/>set\_context\_data(*context\_data);}
\DoxyCodeLine{166     \}}
\DoxyCodeLine{167     \textcolor{keywordflow}{return};}
\DoxyCodeLine{168   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (InstanceTypeChecker::IsSharedFunctionInfo(instance\_type)) \{}
\DoxyCodeLine{169     DirectHandle<DebugInfo> debug\_info;}
\DoxyCodeLine{170     \mbox{\hyperlink{namespacev8_1_1internal_a178a24cf9d2b1c1517d2bb9ec32b8227}{CachedTieringDecision}} cached\_tiering\_decision;}
\DoxyCodeLine{171     \textcolor{keywordtype}{bool} restore\_bytecode = \textcolor{keyword}{false};}
\DoxyCodeLine{172     \{}
\DoxyCodeLine{173       \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{174       Tagged<SharedFunctionInfo> sfi = Cast<SharedFunctionInfo>(*obj);}
\DoxyCodeLine{175       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!sfi-\/>IsApiFunction());}
\DoxyCodeLine{176 \textcolor{preprocessor}{\#if V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{177       \textcolor{comment}{// TODO(7110): Enable serializing of Asm modules once the AsmWasmData}}
\DoxyCodeLine{178       \textcolor{comment}{// is context independent.}}
\DoxyCodeLine{179       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!sfi-\/>HasAsmWasmData());}
\DoxyCodeLine{180 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{181 }
\DoxyCodeLine{182       \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} maybe\_debug\_info = sfi-\/>TryGetDebugInfo(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}())) \{}
\DoxyCodeLine{183         debug\_info = \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(maybe\_debug\_info.value(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{184         \textcolor{comment}{// Clear debug info.}}
\DoxyCodeLine{185         \textcolor{keywordflow}{if} (debug\_info-\/>HasInstrumentedBytecodeArray()) \{}
\DoxyCodeLine{186           restore\_bytecode = \textcolor{keyword}{true};}
\DoxyCodeLine{187           sfi-\/>SetActiveBytecodeArray(}
\DoxyCodeLine{188               debug\_info-\/>OriginalBytecodeArray(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{189         \}}
\DoxyCodeLine{190       \}}
\DoxyCodeLine{191       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_guided\_optimization) \{}
\DoxyCodeLine{192         cached\_tiering\_decision = sfi-\/>cached\_tiering\_decision();}
\DoxyCodeLine{193         \textcolor{keywordflow}{if} (cached\_tiering\_decision > \mbox{\hyperlink{namespacev8_1_1internal_a178a24cf9d2b1c1517d2bb9ec32b8227ac4453b9036f43caef169c9d043c6033f}{CachedTieringDecision::kEarlySparkplug}}) \{}
\DoxyCodeLine{194           sfi-\/>set\_cached\_tiering\_decision(}
\DoxyCodeLine{195               \mbox{\hyperlink{namespacev8_1_1internal_a178a24cf9d2b1c1517d2bb9ec32b8227ac4453b9036f43caef169c9d043c6033f}{CachedTieringDecision::kEarlySparkplug}});}
\DoxyCodeLine{196         \}}
\DoxyCodeLine{197       \}}
\DoxyCodeLine{198     \}}
\DoxyCodeLine{199     \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(obj, slot\_type);}
\DoxyCodeLine{200     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{201     Tagged<SharedFunctionInfo> sfi = Cast<SharedFunctionInfo>(*obj);}
\DoxyCodeLine{202     \textcolor{keywordflow}{if} (restore\_bytecode) \{}
\DoxyCodeLine{203       sfi-\/>SetActiveBytecodeArray(debug\_info-\/>DebugBytecodeArray(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()),}
\DoxyCodeLine{204                                   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{205     \}}
\DoxyCodeLine{206     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.profile\_guided\_optimization \&\&}
\DoxyCodeLine{207         cached\_tiering\_decision > \mbox{\hyperlink{namespacev8_1_1internal_a178a24cf9d2b1c1517d2bb9ec32b8227ac4453b9036f43caef169c9d043c6033f}{CachedTieringDecision::kEarlySparkplug}}) \{}
\DoxyCodeLine{208       sfi-\/>set\_cached\_tiering\_decision(cached\_tiering\_decision);}
\DoxyCodeLine{209     \}}
\DoxyCodeLine{210     \textcolor{keywordflow}{return};}
\DoxyCodeLine{211   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (InstanceTypeChecker::IsUncompiledDataWithoutPreparseDataWithJob(}
\DoxyCodeLine{212                  instance\_type)) \{}
\DoxyCodeLine{213     Handle<UncompiledDataWithoutPreparseDataWithJob> data =}
\DoxyCodeLine{214         Cast<UncompiledDataWithoutPreparseDataWithJob>(obj);}
\DoxyCodeLine{215     \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} job = data-\/>job();}
\DoxyCodeLine{216     data-\/>set\_job(\mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}});}
\DoxyCodeLine{217     \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(data, slot\_type);}
\DoxyCodeLine{218     data-\/>set\_job(job);}
\DoxyCodeLine{219     \textcolor{keywordflow}{return};}
\DoxyCodeLine{220   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (InstanceTypeChecker::IsUncompiledDataWithPreparseDataAndJob(}
\DoxyCodeLine{221                  instance\_type)) \{}
\DoxyCodeLine{222     Handle<UncompiledDataWithPreparseDataAndJob> data =}
\DoxyCodeLine{223         Cast<UncompiledDataWithPreparseDataAndJob>(obj);}
\DoxyCodeLine{224     \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} job = data-\/>job();}
\DoxyCodeLine{225     data-\/>set\_job(\mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}});}
\DoxyCodeLine{226     \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(data, slot\_type);}
\DoxyCodeLine{227     data-\/>set\_job(job);}
\DoxyCodeLine{228     \textcolor{keywordflow}{return};}
\DoxyCodeLine{229   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (InstanceTypeChecker::IsScopeInfo(instance\_type)) \{}
\DoxyCodeLine{230     \textcolor{comment}{// TODO(ishell): define a dedicated instance type for DependentCode and}}
\DoxyCodeLine{231     \textcolor{comment}{// serialize DependentCode objects as an empty\_dependent\_code instead}}
\DoxyCodeLine{232     \textcolor{comment}{// of customizing ScopeInfo serialization.}}
\DoxyCodeLine{233     static\_assert(\mbox{\hyperlink{namespacev8_1_1internal_a9312a9fc987dba9376a530956f94e8fea568a4c8210a6abf85c14b0418747a2f3}{DEPENDENT\_CODE\_TYPE}} == WEAK\_ARRAY\_LIST\_TYPE);}
\DoxyCodeLine{234     Handle<ScopeInfo> scope\_info = Cast<ScopeInfo>(obj);}
\DoxyCodeLine{235     DirectHandle<DependentCode> dependent\_code;}
\DoxyCodeLine{236     \textcolor{keywordtype}{bool} restore\_dependent\_code = \textcolor{keyword}{false};}
\DoxyCodeLine{237     \textcolor{keywordflow}{if} (scope\_info-\/>SloppyEvalCanExtendVars()) \{}
\DoxyCodeLine{238       \textcolor{comment}{// If |scope\_info| has a dependent code field, serialize it as an empty}}
\DoxyCodeLine{239       \textcolor{comment}{// dependent code in order to avoid accidental serialization of optimized}}
\DoxyCodeLine{240       \textcolor{comment}{// code.}}
\DoxyCodeLine{241       Tagged<DependentCode> empty\_dependent\_code =}
\DoxyCodeLine{242           \mbox{\hyperlink{classv8_1_1internal_1_1DependentCode_a4b24d15d464fe8be34264894c1ff76d2}{DependentCode::empty\_dependent\_code}}(ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()));}
\DoxyCodeLine{243       \textcolor{keywordflow}{if} (scope\_info-\/>dependent\_code() != empty\_dependent\_code) \{}
\DoxyCodeLine{244         dependent\_code = \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(scope\_info-\/>dependent\_code(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{245         restore\_dependent\_code = \textcolor{keyword}{true};}
\DoxyCodeLine{246         scope\_info-\/>set\_dependent\_code(empty\_dependent\_code);}
\DoxyCodeLine{247       \}}
\DoxyCodeLine{248     \}}
\DoxyCodeLine{249     \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(scope\_info, slot\_type);}
\DoxyCodeLine{250     \textcolor{keywordflow}{if} (restore\_dependent\_code) \{}
\DoxyCodeLine{251       scope\_info-\/>set\_dependent\_code(*dependent\_code);}
\DoxyCodeLine{252     \}}
\DoxyCodeLine{253     \textcolor{keywordflow}{return};}
\DoxyCodeLine{254   \}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256   \textcolor{comment}{// NOTE(mmarchini): If we try to serialize an InterpreterData our process}}
\DoxyCodeLine{257   \textcolor{comment}{// will crash since it stores a code object. Instead, we serialize the}}
\DoxyCodeLine{258   \textcolor{comment}{// bytecode array stored within the InterpreterData, which is the important}}
\DoxyCodeLine{259   \textcolor{comment}{// information. On deserialization we'll create our code objects again, if}}
\DoxyCodeLine{260   \textcolor{comment}{// -\/-\/interpreted-\/frames-\/native-\/stack is on. See v8:9122 for more context}}
\DoxyCodeLine{261   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>interpreted\_frames\_native\_stack()) \&\&}
\DoxyCodeLine{262       IsInterpreterData(*obj)) \{}
\DoxyCodeLine{263     obj = \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(Cast<InterpreterData>(*obj)-\/>bytecode\_array(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{264   \}}
\DoxyCodeLine{265 }
\DoxyCodeLine{266   \textcolor{comment}{// Past this point we should not see any (context-\/specific) maps anymore.}}
\DoxyCodeLine{267   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!InstanceTypeChecker::IsMap(instance\_type));}
\DoxyCodeLine{268   \textcolor{comment}{// There should be no references to the global object embedded.}}
\DoxyCodeLine{269   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!InstanceTypeChecker::IsJSGlobalProxy(instance\_type) \&\&}
\DoxyCodeLine{270         !InstanceTypeChecker::IsJSGlobalObject(instance\_type));}
\DoxyCodeLine{271   \textcolor{comment}{// Embedded FixedArrays that need rehashing must support rehashing.}}
\DoxyCodeLine{272   \mbox{\hyperlink{src_2base_2logging_8h_a2c0c4cea27d0690467662bb05131b2af}{CHECK\_IMPLIES}}(obj-\/>NeedsRehashing(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a1330836e658df6feb2d8a6d2b0e2bf21}{cage\_base}}()),}
\DoxyCodeLine{273                 obj-\/>CanBeRehashed(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a1330836e658df6feb2d8a6d2b0e2bf21}{cage\_base}}()));}
\DoxyCodeLine{274   \textcolor{comment}{// We expect no instantiated function objects or contexts.}}
\DoxyCodeLine{275   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!InstanceTypeChecker::IsJSFunction(instance\_type) \&\&}
\DoxyCodeLine{276         !InstanceTypeChecker::IsContext(instance\_type));}
\DoxyCodeLine{277 }
\DoxyCodeLine{278   \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a3471878d8450d6525205b82a3bd23c1c}{SerializeGeneric}}(obj, slot\_type);}
\DoxyCodeLine{279 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Serializer\+::cage\+\_\+base(), CHECK, CHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+NE, v8\+::internal\+::\+DEPENDENT\+\_\+\+CODE\+\_\+\+TYPE, v8\+::internal\+::direct\+\_\+handle(), v8\+::internal\+::\+Dependent\+Code\+::empty\+\_\+dependent\+\_\+code(), v8\+::internal\+::handle(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::k\+Early\+Sparkplug, v8\+::internal\+::\+Script\+::k\+Eval, v8\+::internal\+::k\+Null\+Address, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+Serializer\+::\+Serialize\+Back\+Reference(), Serialize\+Generic(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Hot\+Object(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Read\+Only\+Object\+Reference(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Root(), v8\+::internal\+::\+Serializer\+::sink\+\_\+, v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a34d6d87ada6478bc7d768b32137a8180_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a6842ca958395f17cb09a339ad58693a9}\label{classv8_1_1internal_1_1CodeSerializer_a6842ca958395f17cb09a339ad58693a9}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!SerializeSharedFunctionInfo@{SerializeSharedFunctionInfo}}
\index{SerializeSharedFunctionInfo@{SerializeSharedFunctionInfo}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeSharedFunctionInfo()}{SerializeSharedFunctionInfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$ v8\+::internal\+::\+Code\+Serializer\+::\+Serialize\+Shared\+Function\+Info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{info }\end{DoxyParamCaption})}



Definition at line 106 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{107                                      \{}
\DoxyCodeLine{108   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{109 }
\DoxyCodeLine{110   \mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor_aa78a6dcf8930fbd29d1cb4c6605c2fae}{VisitRootPointer}}(Root::kHandleScope, \textcolor{keyword}{nullptr},}
\DoxyCodeLine{111                    FullObjectSlot(info.location()));}
\DoxyCodeLine{112   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a96ef0df54684240f4839fc03c1e6717c}{SerializeDeferredObjects}}();}
\DoxyCodeLine{113   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab5a0fb29fbf0f1c4db6044eafd5d5b97}{Pad}}();}
\DoxyCodeLine{114 }
\DoxyCodeLine{115   SerializedCodeData data(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSink_ae66f0b392caee4dae358dc897e5d9b4e}{data}}(), \textcolor{keyword}{this});}
\DoxyCodeLine{116 }
\DoxyCodeLine{117   \textcolor{keywordflow}{return} data.GetScriptData();}
\DoxyCodeLine{118 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Snapshot\+Byte\+Sink\+::data(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+Get\+Script\+Data(), v8\+::internal\+::\+Handle\+Base\+::location(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+Serializer\+::\+Pad(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Deferred\+Objects(), v8\+::internal\+::\+Serializer\+::sink\+\_\+, and v8\+::internal\+::\+Root\+Visitor\+::\+Visit\+Root\+Pointer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a6842ca958395f17cb09a339ad58693a9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b}\label{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!source\_hash@{source\_hash}}
\index{source\_hash@{source\_hash}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{source\_hash()}{source\_hash()}}
{\footnotesize\ttfamily uint32\+\_\+t v8\+::internal\+::\+Code\+Serializer\+::source\+\_\+hash (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 99 of file code-\/serializer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{99 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1CodeSerializer_a35d8eada166bc8bea6875062905f844f}{source\_hash\_}}; \}}

\end{DoxyCode}


References source\+\_\+hash\+\_\+.



Referenced by v8\+::internal\+::\+Serialized\+Code\+Data\+::\+Sanity\+Check\+Just\+Source().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a712cf3e0f92e5e595833ef01d8b9709b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a9d1b8a5b5cfa1be24f952453fa753f85}\label{classv8_1_1internal_1_1CodeSerializer_a9d1b8a5b5cfa1be24f952453fa753f85}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!StartDeserializeOffThread@{StartDeserializeOffThread}}
\index{StartDeserializeOffThread@{StartDeserializeOffThread}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{StartDeserializeOffThread()}{StartDeserializeOffThread()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1CodeSerializer_1_1OffThreadDeserializeData}{Code\+Serializer\+::\+Off\+Thread\+Deserialize\+Data}} v8\+::internal\+::\+Code\+Serializer\+::\+Start\+Deserialize\+Off\+Thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1LocalIsolate}{Local\+Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1AlignedCachedData}{Aligned\+Cached\+Data}} $\ast$}]{cached\+\_\+data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 582 of file code-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{583                                                                           \{}
\DoxyCodeLine{584   OffThreadDeserializeData \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{585 }
\DoxyCodeLine{586   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!local\_isolate-\/>heap()-\/>HasPersistentHandles());}
\DoxyCodeLine{587 }
\DoxyCodeLine{588   \textcolor{keyword}{const} SerializedCodeData scd =}
\DoxyCodeLine{589       \mbox{\hyperlink{classv8_1_1internal_1_1SerializedCodeData_a81b7cf185a47fcc789c4a11e9288f6ac}{SerializedCodeData::FromCachedDataWithoutSource}}(}
\DoxyCodeLine{590           local\_isolate, cached\_data, \&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.sanity\_check\_result);}
\DoxyCodeLine{591   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.sanity\_check\_result != \mbox{\hyperlink{namespacev8_1_1internal_1_1detail_a065f2a0786f61ff0bd5e833781a87aeaa3e421f5795a067010cfcf0d2c6da2123}{SerializedCodeSanityCheckResult::kSuccess}}) \{}
\DoxyCodeLine{592     \textcolor{comment}{// Exit early but don't report yet, we'll re-\/check this when finishing on}}
\DoxyCodeLine{593     \textcolor{comment}{// the main thread}}
\DoxyCodeLine{594     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(cached\_data-\/>rejected());}
\DoxyCodeLine{595     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{596   \}}
\DoxyCodeLine{597 }
\DoxyCodeLine{598   MaybeDirectHandle<SharedFunctionInfo> local\_maybe\_result =}
\DoxyCodeLine{599       \mbox{\hyperlink{classv8_1_1internal_1_1OffThreadObjectDeserializer_ae4b876314e7626ae3db5c7a107dad0b5}{OffThreadObjectDeserializer::DeserializeSharedFunctionInfo}}(}
\DoxyCodeLine{600           local\_isolate, \&scd, \&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.scripts);}
\DoxyCodeLine{601 }
\DoxyCodeLine{602   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.maybe\_result =}
\DoxyCodeLine{603       local\_isolate-\/>heap()-\/>NewPersistentMaybeHandle(local\_maybe\_result);}
\DoxyCodeLine{604   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.persistent\_handles = local\_isolate-\/>heap()-\/>DetachPersistentHandles();}
\DoxyCodeLine{605 }
\DoxyCodeLine{606   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{607 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Off\+Thread\+Object\+Deserializer\+::\+Deserialize\+Shared\+Function\+Info(), v8\+::internal\+::\+Local\+Heap\+::\+Detach\+Persistent\+Handles(), v8\+::internal\+::\+Serialized\+Code\+Data\+::\+From\+Cached\+Data\+Without\+Source(), v8\+::internal\+::\+Local\+Isolate\+::heap(), v8\+::internal\+::detail\+::k\+Success, v8\+::internal\+::\+Local\+Heap\+::\+New\+Persistent\+Maybe\+Handle(), v8\+::internal\+::\+Aligned\+Cached\+Data\+::rejected(), and v8\+::base\+::internal\+::result.



Referenced by v8\+::internal\+::\+Background\+Deserialize\+Task\+::\+Run(), and v8\+::internal\+::anonymous\+\_\+namespace\{code-\/serializer.\+cc\}\+::\+Stress\+Off\+Thread\+Deserialize\+Thread\+::\+Run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a9d1b8a5b5cfa1be24f952453fa753f85_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1CodeSerializer_a9d1b8a5b5cfa1be24f952453fa753f85_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1CodeSerializer_a35d8eada166bc8bea6875062905f844f}\label{classv8_1_1internal_1_1CodeSerializer_a35d8eada166bc8bea6875062905f844f}} 
\index{v8::internal::CodeSerializer@{v8::internal::CodeSerializer}!source\_hash\_@{source\_hash\_}}
\index{source\_hash\_@{source\_hash\_}!v8::internal::CodeSerializer@{v8::internal::CodeSerializer}}
\doxysubsubsection{\texorpdfstring{source\_hash\_}{source\_hash\_}}
{\footnotesize\ttfamily uint32\+\_\+t v8\+::internal\+::\+Code\+Serializer\+::source\+\_\+hash\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 111 of file code-\/serializer.\+h.



Referenced by source\+\_\+hash().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{code-serializer_8h}{code-\/serializer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{code-serializer_8cc}{code-\/serializer.\+cc}}\end{DoxyCompactItemize}
