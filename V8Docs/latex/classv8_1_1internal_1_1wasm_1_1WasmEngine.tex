\hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine}{}\doxysection{v8\+::internal\+::wasm\+::Wasm\+Engine Class Reference}
\label{classv8_1_1internal_1_1wasm_1_1WasmEngine}\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}


{\ttfamily \#include $<$wasm-\/engine.\+h$>$}



Collaboration diagram for v8\+::internal\+::wasm\+::Wasm\+Engine\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo}{Current\+GCInfo}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo}{Isolate\+Info}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_1_1LogCodesTask}{Log\+Codes\+Task}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo}{Native\+Module\+Info}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{Dead\+Code\+Map}} = std\+::unordered\+\_\+map$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$, std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ $>$
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}{Wasm\+Engine}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9b2dd2ef9c0107b22840176b39516a80}{Wasm\+Engine}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}} \& \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abb2608ebf20e9f161b6b3404100dd39a}{operator=}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_af2a33b8b1886a22b78cfa5c01d6db7c1}{$\sim$\+Wasm\+Engine}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f}{Sync\+Validate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ bytes)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AsmWasmData}{Asm\+Wasm\+Data}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d}{Sync\+Compile\+Translated\+Asm\+Js}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$thrower, \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$ bytes, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ asm\+\_\+js\+\_\+offset\+\_\+table\+\_\+bytes, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapNumber}{Heap\+Number}} $>$ uses\+\_\+bitset, \mbox{\hyperlink{namespacev8_1_1internal_aff2483f817f329c2b4c7c1d7149f858b}{Language\+Mode}} language\+\_\+mode)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab2c943d125db63cdbe8ba21b5e1fd594}{Finalize\+Translated\+Asm\+Js}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AsmWasmData}{Asm\+Wasm\+Data}} $>$ asm\+\_\+wasm\+\_\+data, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194}{Sync\+Compile}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$thrower, \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$ bytes)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmInstanceObject}{Wasm\+Instance\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50}{Sync\+Instantiate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$thrower, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ module\+\_\+object, \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ imports, \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ memory)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7}{Async\+Compile}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$ resolver, \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$ bytes, const char $\ast$api\+\_\+method\+\_\+name\+\_\+for\+\_\+errors)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721}{Async\+Instantiate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1InstantiationResultResolver}{Instantiation\+Result\+Resolver}} $>$ resolver, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ module\+\_\+object, \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ imports)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1StreamingDecoder}{Streaming\+Decoder}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b}{Start\+Streaming\+Compilation}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ context, const char $\ast$api\+\_\+method\+\_\+name, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$ resolver)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5}{Compile\+Function}} (\mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $\ast$counters, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$native\+\_\+module, uint32\+\_\+t function\+\_\+index, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a74094ea879a0bfb89fbc40b97dd862b9}{Execution\+Tier}} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7d9f3495e9f458675c5ef14337bf2a1}{Enter\+Debugging\+For\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac1735499d473116e5a4d0e94de8d92f3}{Leave\+Debugging\+For\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99}{Import\+Native\+Module}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ shared\+\_\+module, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$ source\+\_\+url)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced}{Flush\+Liftoff\+Code}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a370767746722805372a02e277c57ffbb}{Get\+Liftoff\+Code\+Size\+For\+Testing}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1AccountingAllocator}{Accounting\+Allocator}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a92bf3bf6d5ba9b15735d9ae1a3643817}{allocator}} ()
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1CompilationStatistics}{Compilation\+Statistics}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae8b9e9de10bcec49ae84e995d61d66cd}{Get\+Or\+Create\+Turbo\+Statistics}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a54471342125fa1a1edbfce3cbabc9ab6}{Dump\+And\+Reset\+Turbo\+Statistics}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_af051e260505b417cdea6c8b0aa8b5871}{Dump\+Turbo\+Statistics}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeTracer}{Code\+Tracer}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a935fb8d614cf2741a9b6bb23671b0e76}{Get\+Code\+Tracer}} ()
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8}{Remove\+Compile\+Job}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $\ast$job)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab6afdb3fea4c987fb6d9d515c5faa630}{Has\+Running\+Compile\+Job}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9e7c0c7f764d2f3c2c0038ef4a13d1f9}{Delete\+Compile\+Jobs\+On\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ context)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa103ab294ff94d0c588ea065e30e7038}{Delete\+Compile\+Jobs\+On\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e}{Add\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5}{Remove\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f}{Log\+Code}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4176e62a5efdce84668b7f54c67e0244}{Log\+Wrapper\+Code}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{Enable\+Code\+Logging}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737}{Log\+Outstanding\+Codes\+For\+Isolate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372}{New\+Native\+Module}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled\+\_\+features, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures}{Wasm\+Detected\+Features}} detected\+\_\+features, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, std\+::shared\+\_\+ptr$<$ const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $>$ module, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} code\+\_\+size\+\_\+estimate)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4}{Maybe\+Get\+Native\+Module}} (\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80}{Module\+Origin}} origin, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ wire\+\_\+bytes, const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&compile\+\_\+imports, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8}{Update\+Native\+Module\+Cache}} (\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} has\+\_\+error, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ native\+\_\+module, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd}{Get\+Streaming\+Compilation\+Ownership}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} prefix\+\_\+hash, const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&compile\+\_\+imports)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8}{Streaming\+Compilation\+Failed}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} prefix\+\_\+hash, const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&compile\+\_\+imports)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09}{Free\+Native\+Module}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0}{Clear\+Weak\+Script\+Handle}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} $\ast$ $>$ location)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6af21252e29d47e802fb0fb84a6739ad}{Sample\+Top\+Tier\+Code\+Size\+In\+All\+Isolates}} (const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \&)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787}{Report\+Live\+Code\+For\+GC}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$, std\+::unordered\+\_\+set$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&live\+\_\+code)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521}{Report\+Live\+Code\+From\+Stack\+For\+GC}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b}{Add\+Potentially\+Dead\+Code}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94}{Trigger\+Code\+GCFor\+Testing}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af}{Free\+Dead\+Code}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{Dead\+Code\+Map}} \&, std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716}{Free\+Dead\+Code\+Locked}} (const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{Dead\+Code\+Map}} \&, std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3}{Get\+Or\+Create\+Script}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$, const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \&, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$ source\+\_\+url)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1OperationsBarrier}{Operations\+Barrier}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2e03dccdce1bc0ab3c0adaf5d7843c8c}{Get\+Barrier\+For\+Background\+Compile}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer}{Type\+Canonicalizer}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a82694f241e35d38f8f882c255e49e743}{type\+\_\+canonicalizer}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27}{Decode\+All\+Name\+Sections}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider}{Canonical\+Type\+Names\+Provider}} $\ast$target)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors}{compiler\+::\+Wasm\+Call\+Descriptors}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ef5a29aa357f79043a5f8631b18785}{call\+\_\+descriptors}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6}{Estimate\+Current\+Memory\+Consumption}} () const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654}{Print\+Current\+Memory\+Consumption\+Estimate}} () const
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5147b0f617e7f09fa772e669a5f84c58}{Get\+Deopts\+Executed\+Count}} () const
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1be1c372613f35998f4b316e21ef7683}{Increment\+Deopts\+Executed\+Count}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a607eb9a1f2f1b6d542c11a0b030cd56f}{Native\+Module\+Count}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332}{Initialize\+Once\+Per\+Process}} ()
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2}{Global\+Tear\+Down}} ()
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9d3649a654e59febca437472b29ba82d}{New\+Orphaned\+Global\+Handle}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$$\ast$pointer)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3b0f0f6a499ad560407b32ab5b81aaa3}{Free\+All\+Orphaned\+Global\+Handles}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$start)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a031170af170d5bb164813d9c84467999}{Get\+Nondeterminism\+Addr}} ()
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa14ec7df66897b46477fc275b9d47800}{had\+\_\+nondeterminism}} ()
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7}{set\+\_\+had\+\_\+nondeterminism}} ()
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0b70b2a53d091016505e717012cb09dd}{clear\+\_\+nondeterminism}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209}{Create\+Async\+Compile\+Job}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}} enabled, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} compile\+\_\+imports, \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$ bytes, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ context, const char $\ast$api\+\_\+method\+\_\+name, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$ resolver, \mbox{\hyperlink{classint}{int}} compilation\+\_\+id)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0}{Trigger\+Code\+GC\+\_\+\+Locked}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} dead\+\_\+code\+\_\+limit)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea}{Trigger\+GC}} (int8\+\_\+t gc\+\_\+sequence\+\_\+index)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55}{Remove\+Isolate\+From\+Current\+GC}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}{Potentially\+Finish\+Current\+GC}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae97284d3dcb8da7d6978f2fbcd45a503}{Enable\+Code\+Logging}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82}{Disable\+Code\+Logging}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1AccountingAllocator}{Accounting\+Allocator}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5da025226f11c1a8371a2e1c24ca7663}{allocator\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{classint}{int}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}{next\+\_\+compilation\+\_\+id\+\_\+}} \{0\}
\item 
std\+::atomic$<$ \mbox{\hyperlink{classint}{int}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4dcca0bc03dc84027c94cdba6950a8bb}{deopts\+\_\+executed\+\_\+}} \{0\}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer}{Type\+Canonicalizer}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_afd72ebd08e53260ccaf49d8c2ab00353}{type\+\_\+canonicalizer\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors}{compiler\+::\+Wasm\+Call\+Descriptors}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab160110a4540fe336bc9834d389c6bc6}{call\+\_\+descriptors\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\+\_\+}}
\item 
std\+::unordered\+\_\+map$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $\ast$, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\+\_\+compile\+\_\+jobs\+\_\+}}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1CompilationStatistics}{Compilation\+Statistics}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\+\_\+stats\+\_\+}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1CodeTracer}{Code\+Tracer}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}{code\+\_\+tracer\+\_\+}}
\item 
std\+::unordered\+\_\+map$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo}{Isolate\+Info}} $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\+\_\+}}
\item 
std\+::unordered\+\_\+map$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo}{Native\+Module\+Info}} $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\+\_\+modules\+\_\+}}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1OperationsBarrier}{Operations\+Barrier}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8e59070055e532fd16960fe100270492}{operations\+\_\+barrier\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\+\_\+modules\+\_\+with\+\_\+code\+\_\+logging\+\_\+}} \{0\}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+}} = 0
\item 
std\+::unordered\+\_\+set$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\+\_\+dead\+\_\+code\+\_\+}}
\item 
int8\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}{num\+\_\+code\+\_\+gcs\+\_\+triggered\+\_\+}} = 0
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo}{Current\+GCInfo}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\+\_\+gc\+\_\+info\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache}{Native\+Module\+Cache}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\+\_\+module\+\_\+cache\+\_\+}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static std\+::atomic$<$ int32\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}{had\+\_\+nondeterminism\+\_\+}} \{0\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 162 of file wasm-\/engine.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DeadCodeMap@{DeadCodeMap}}
\index{DeadCodeMap@{DeadCodeMap}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DeadCodeMap}{DeadCodeMap}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Dead\+Code\+Map}} =  std\+::unordered\+\_\+map$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}}$\ast$, std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}}$\ast$$>$ $>$}



Definition at line 380 of file wasm-\/engine.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!WasmEngine@{WasmEngine}}
\index{WasmEngine@{WasmEngine}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{WasmEngine()}{WasmEngine()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Wasm\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 543 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{543 : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab160110a4540fe336bc9834d389c6bc6}{call\_descriptors\_}}(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5da025226f11c1a8371a2e1c24ca7663}{allocator\_}}) \{\}}

\end{DoxyCode}


Referenced by Estimate\+Current\+Memory\+Consumption().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9b2dd2ef9c0107b22840176b39516a80}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9b2dd2ef9c0107b22840176b39516a80}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!WasmEngine@{WasmEngine}}
\index{WasmEngine@{WasmEngine}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{WasmEngine()}{WasmEngine()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Wasm\+Engine (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_af2a33b8b1886a22b78cfa5c01d6db7c1}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_af2a33b8b1886a22b78cfa5c01d6db7c1}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!````~WasmEngine@{$\sim$WasmEngine}}
\index{````~WasmEngine@{$\sim$WasmEngine}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{$\sim$WasmEngine()}{~WasmEngine()}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::$\sim$\+Wasm\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 545 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{545                         \{}
\DoxyCodeLine{546 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{547   \textcolor{comment}{// Synchronize on the GDB-\/remote thread, if running.}}
\DoxyCodeLine{548   gdb\_server\_.reset();}
\DoxyCodeLine{549 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{550 }
\DoxyCodeLine{551   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_wasm\_offheap\_memory\_size)) \{}
\DoxyCodeLine{552     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654}{PrintCurrentMemoryConsumptionEstimate}}();}
\DoxyCodeLine{553   \}}
\DoxyCodeLine{554 }
\DoxyCodeLine{555   \textcolor{comment}{// Free all modules that were kept alive for collecting PGO. This is to avoid}}
\DoxyCodeLine{556   \textcolor{comment}{// memory leaks.}}
\DoxyCodeLine{557   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\_modules\_kept\_alive\_for\_pgo}})) \{}
\DoxyCodeLine{558     \textcolor{keyword}{delete} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\_modules\_kept\_alive\_for\_pgo}};}
\DoxyCodeLine{559   \}}
\DoxyCodeLine{560 }
\DoxyCodeLine{561   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8e59070055e532fd16960fe100270492}{operations\_barrier\_}}-\/>CancelAndWait();}
\DoxyCodeLine{562 }
\DoxyCodeLine{563   \textcolor{comment}{// All code should have been deleted already, but wrappers managed by the}}
\DoxyCodeLine{564   \textcolor{comment}{// WasmImportWrapperCache are placed in \{potentially\_dead\_code\_\} when they}}
\DoxyCodeLine{565   \textcolor{comment}{// are no longer referenced, and we don't want to wait for the next}}
\DoxyCodeLine{566   \textcolor{comment}{// Wasm Code GC cycle to remove them from that set.}}
\DoxyCodeLine{567   \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}) \{}
\DoxyCodeLine{568     \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>DcheckRefCountIsOne();}
\DoxyCodeLine{569     \textcolor{comment}{// The actual instructions will get thrown out when the global}}
\DoxyCodeLine{570     \textcolor{comment}{// WasmImportWrapperCache's \{code\_allocator\_\} frees its memory region.}}
\DoxyCodeLine{571     \textcolor{comment}{// Here we just pacify LSan.}}
\DoxyCodeLine{572     \textcolor{keyword}{delete} \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}};}
\DoxyCodeLine{573   \}}
\DoxyCodeLine{574 }
\DoxyCodeLine{575   \textcolor{comment}{// All AsyncCompileJobs have been canceled.}}
\DoxyCodeLine{576   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.empty());}
\DoxyCodeLine{577   \textcolor{comment}{// All Isolates have been deregistered.}}
\DoxyCodeLine{578   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.empty());}
\DoxyCodeLine{579   \textcolor{comment}{// All NativeModules did die.}}
\DoxyCodeLine{580   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.empty());}
\DoxyCodeLine{581   \textcolor{comment}{// Native module cache does not leak.}}
\DoxyCodeLine{582   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_a102c3cb3accdae6f764130d07b5729b5}{empty}}());}
\DoxyCodeLine{583 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, code, v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::empty(), isolates\+\_\+, native\+\_\+module\+\_\+cache\+\_\+, native\+\_\+modules\+\_\+, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::native\+\_\+modules\+\_\+kept\+\_\+alive\+\_\+for\+\_\+pgo, operations\+\_\+barrier\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, Print\+Current\+Memory\+Consumption\+Estimate(), v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_af2a33b8b1886a22b78cfa5c01d6db7c1_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!AddIsolate@{AddIsolate}}
\index{AddIsolate@{AddIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{AddIsolate()}{AddIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Add\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1238 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1238                                             \{}
\DoxyCodeLine{1239   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} log\_code = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode_acb261693fa04ffc206a9289658201454}{WasmCode::ShouldBeLogged}}(isolate);}
\DoxyCodeLine{1240   \textcolor{comment}{// Create the IsolateInfo.}}
\DoxyCodeLine{1241   \{}
\DoxyCodeLine{1242     \textcolor{comment}{// Create the IsolateInfo outside the mutex to reduce the size of the}}
\DoxyCodeLine{1243     \textcolor{comment}{// critical section and to avoid lock-\/order-\/inversion issues.}}
\DoxyCodeLine{1244     \textcolor{keyword}{auto} isolate\_info = std::make\_unique<IsolateInfo>(isolate, log\_code);}
\DoxyCodeLine{1245     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1246     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1247     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.emplace(isolate, std::move(isolate\_info));}
\DoxyCodeLine{1248   \}}
\DoxyCodeLine{1249   \textcolor{keywordflow}{if} (log\_code) \{}
\DoxyCodeLine{1250     \textcolor{comment}{// Log existing wrappers (which are shared across isolates).}}
\DoxyCodeLine{1251     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a36345041662f17bb39d27709c1cb78ac}{GetWasmImportWrapperCache}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_ad49664eee6f5df0f367014a789b71d21}{LogForIsolate}}(isolate);}
\DoxyCodeLine{1252   \}}
\DoxyCodeLine{1253 }
\DoxyCodeLine{1254   \textcolor{comment}{// Install sampling GC callback.}}
\DoxyCodeLine{1255   \textcolor{comment}{// TODO(v8:7424): For now we sample module sizes in a GC callback. This will}}
\DoxyCodeLine{1256   \textcolor{comment}{// bias samples towards apps with high memory pressure. We should switch to}}
\DoxyCodeLine{1257   \textcolor{comment}{// using sampling based on regular intervals independent of the GC.}}
\DoxyCodeLine{1258   \textcolor{keyword}{auto} callback = [](\mbox{\hyperlink{classv8_1_1Isolate}{v8::Isolate}}* v8\_isolate, \mbox{\hyperlink{namespacev8_ac109d6f27e0c0f9ef4e98bcf7a806cf2}{v8::GCType}} \mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}},}
\DoxyCodeLine{1259                      \mbox{\hyperlink{namespacev8_a247c37a849f4d6c293b9b16e94e1944b}{v8::GCCallbackFlags}} \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}, \textcolor{keywordtype}{void}* data) \{}
\DoxyCodeLine{1260     Isolate* isolate = \textcolor{keyword}{reinterpret\_cast<}Isolate*\textcolor{keyword}{>}(v8\_isolate);}
\DoxyCodeLine{1261     Counters* counters = isolate-\/>counters();}
\DoxyCodeLine{1262     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}{WasmEngine}}* engine = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_abc12fc3b25ebfb54c20b8479642acb94}{GetWasmEngine}}();}
\DoxyCodeLine{1263     \{}
\DoxyCodeLine{1264       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&engine-\/>mutex\_);}
\DoxyCodeLine{1265       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, engine-\/>isolates\_.count(isolate));}
\DoxyCodeLine{1266       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* native\_module : engine-\/>isolates\_[isolate]-\/>native\_modules) \{}
\DoxyCodeLine{1267         native\_module-\/>SampleCodeSize(counters);}
\DoxyCodeLine{1268       \}}
\DoxyCodeLine{1269     \}}
\DoxyCodeLine{1270     \textcolor{comment}{// Also sample overall metadata size (this includes the metadata size of}}
\DoxyCodeLine{1271     \textcolor{comment}{// individual NativeModules; we are summing that up twice, which could be}}
\DoxyCodeLine{1272     \textcolor{comment}{// improved performance-\/wise).}}
\DoxyCodeLine{1273     \textcolor{comment}{// The engine-\/wide metadata also includes global storage e.g. for the type}}
\DoxyCodeLine{1274     \textcolor{comment}{// canonicalizer.}}
\DoxyCodeLine{1275     Histogram* metadata\_histogram = counters-\/>wasm\_engine\_metadata\_size\_kb();}
\DoxyCodeLine{1276     \textcolor{keywordflow}{if} (metadata\_histogram-\/>Enabled()) \{}
\DoxyCodeLine{1277       \textcolor{keywordtype}{size\_t} engine\_meta\_data = engine-\/>EstimateCurrentMemoryConsumption();}
\DoxyCodeLine{1278       metadata\_histogram-\/>AddSample(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(engine\_meta\_data / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}));}
\DoxyCodeLine{1279     \}}
\DoxyCodeLine{1280   \};}
\DoxyCodeLine{1281   isolate-\/>heap()-\/>AddGCEpilogueCallback(callback, \mbox{\hyperlink{namespacev8_ac109d6f27e0c0f9ef4e98bcf7a806cf2aebba79261e5d8903a4a72805f0409db1}{v8::kGCTypeMarkSweepCompact}},}
\DoxyCodeLine{1282                                          \textcolor{keyword}{nullptr});}
\DoxyCodeLine{1283 }
\DoxyCodeLine{1284 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1285   \textcolor{keywordflow}{if} (gdb\_server\_) \{}
\DoxyCodeLine{1286     gdb\_server\_-\/>AddIsolate(isolate);}
\DoxyCodeLine{1287   \}}
\DoxyCodeLine{1288 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1289 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::\+Add\+GCEpilogue\+Callback(), v8\+::internal\+::\+Histogram\+::\+Add\+Sample(), v8\+::internal\+::\+Isolate\+::counters(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Histogram\+::\+Enabled(), Estimate\+Current\+Memory\+Consumption(), v8\+::internal\+::flags, v8\+::internal\+::wasm\+::\+Get\+Wasm\+Engine(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Import\+Wrapper\+Cache(), v8\+::internal\+::\+Isolate\+::heap(), isolates\+\_\+, v8\+::internal\+::\+KB, v8\+::k\+GCType\+Mark\+Sweep\+Compact, v8\+::internal\+::wasm\+::\+Wasm\+Import\+Wrapper\+Cache\+::\+Log\+For\+Isolate(), mutex\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Code\+::\+Should\+Be\+Logged(), and v8\+::internal\+::tracing\+::type.



Referenced by v8\+::internal\+::\+Isolate\+::\+Init().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_af7ca4a2df3e7f8a56c31571ade78372e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!AddPotentiallyDeadCode@{AddPotentiallyDeadCode}}
\index{AddPotentiallyDeadCode@{AddPotentiallyDeadCode}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{AddPotentiallyDeadCode()}{AddPotentiallyDeadCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Add\+Potentially\+Dead\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$}]{code }\end{DoxyParamCaption})}



Definition at line 1820 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1820                                                       \{}
\DoxyCodeLine{1821   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1822   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>is\_dying());  \textcolor{comment}{// Caller just marked it as such.}}
\DoxyCodeLine{1823   \textcolor{keyword}{auto} added = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}.insert(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1824   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(added.second);}
\DoxyCodeLine{1825   \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(added);}
\DoxyCodeLine{1826   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}} += \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instructions().size();}
\DoxyCodeLine{1827   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_code\_gc) \{}
\DoxyCodeLine{1828     \textcolor{comment}{// Trigger a GC if 64kB plus 10\% of committed code are potentially dead.}}
\DoxyCodeLine{1829     \textcolor{keywordtype}{size\_t} dead\_code\_limit =}
\DoxyCodeLine{1830         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_wasm\_code\_gc}
\DoxyCodeLine{1831             ? 0}
\DoxyCodeLine{1832             : 64 * \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}} + \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_ab17eb91621a85bc775b4d7a740029f00}{committed\_code\_space}}() / 10;}
\DoxyCodeLine{1833     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}} > dead\_code\_limit) \{}
\DoxyCodeLine{1834       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0}{TriggerCodeGC\_Locked}}(dead\_code\_limit);}
\DoxyCodeLine{1835     \}}
\DoxyCodeLine{1836   \}}
\DoxyCodeLine{1837 \}}

\end{DoxyCode}


References code, v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::committed\+\_\+code\+\_\+space(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::\+KB, mutex\+\_\+, new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, Trigger\+Code\+GC\+\_\+\+Locked(), USE, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Code\+::\+Dec\+Ref\+On\+Potentially\+Dead\+Code().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6ad160f95280e9e5005ea39a3f1cb65b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a92bf3bf6d5ba9b15735d9ae1a3643817}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a92bf3bf6d5ba9b15735d9ae1a3643817}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!allocator@{allocator}}
\index{allocator@{allocator}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{allocator()}{allocator()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1AccountingAllocator}{Accounting\+Allocator}}$\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::allocator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 246 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{246 \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5da025226f11c1a8371a2e1c24ca7663}{allocator\_}}; \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Compilation\+Unit\+::\+Execute\+Compilation(), v8\+::internal\+::anonymous\+\_\+namespace\{wasm-\/debug.\+cc\}\+::\+Find\+Next\+Breakable\+Position(), v8\+::\+Isolate\+::\+Get\+Heap\+Statistics(), v8\+::internal\+::\+Wasm\+Script\+::\+Get\+Possible\+Breakpoints(), v8\+::internal\+::wasm\+::\+Validate\+Functions\+Streaming\+Job\+::\+Run(), and v8\+::internal\+::wasm\+::\+Throw\+Lazy\+Compilation\+Error().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a92bf3bf6d5ba9b15735d9ae1a3643817_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!AsyncCompile@{AsyncCompile}}
\index{AsyncCompile@{AsyncCompile}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{AsyncCompile()}{AsyncCompile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Async\+Compile (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$}]{resolver,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$}]{bytes,  }\item[{const char $\ast$}]{api\+\_\+method\+\_\+name\+\_\+for\+\_\+errors }\end{DoxyParamCaption})}



Definition at line 790 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{795                                             \{}
\DoxyCodeLine{796   \textcolor{keywordtype}{int} compilation\_id = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}{next\_compilation\_id\_}}.fetch\_add(1);}
\DoxyCodeLine{797   \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.AsyncCompile"{}}, \textcolor{stringliteral}{"{}id"{}}, compilation\_id);}
\DoxyCodeLine{798 }
\DoxyCodeLine{799   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_async\_compilation || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \{}
\DoxyCodeLine{800     \textcolor{comment}{// Asynchronous compilation disabled; fall back on synchronous compilation.}}
\DoxyCodeLine{801     ErrorThrower thrower(isolate, api\_method\_name\_for\_errors);}
\DoxyCodeLine{802     MaybeDirectHandle<WasmModuleObject> module\_object;}
\DoxyCodeLine{803     module\_object = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194}{SyncCompile}}(isolate, enabled, std::move(compile\_imports),}
\DoxyCodeLine{804                                 \&thrower, std::move(bytes));}
\DoxyCodeLine{805     \textcolor{keywordflow}{if} (thrower.error()) \{}
\DoxyCodeLine{806       resolver-\/>OnCompilationFailed(thrower.Reify());}
\DoxyCodeLine{807       \textcolor{keywordflow}{return};}
\DoxyCodeLine{808     \}}
\DoxyCodeLine{809     DirectHandle<WasmModuleObject> module = module\_object.ToHandleChecked();}
\DoxyCodeLine{810     resolver-\/>OnCompilationSucceeded(module);}
\DoxyCodeLine{811     \textcolor{keywordflow}{return};}
\DoxyCodeLine{812   \}}
\DoxyCodeLine{813 }
\DoxyCodeLine{814   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_test\_streaming) \{}
\DoxyCodeLine{815     std::shared\_ptr<StreamingDecoder> streaming\_decoder =}
\DoxyCodeLine{816         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b}{StartStreamingCompilation}}(isolate, enabled, std::move(compile\_imports),}
\DoxyCodeLine{817                                   \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(isolate-\/>context(), isolate),}
\DoxyCodeLine{818                                   api\_method\_name\_for\_errors,}
\DoxyCodeLine{819                                   std::move(resolver));}
\DoxyCodeLine{820 }
\DoxyCodeLine{821     \textcolor{keyword}{auto}* rng = isolate-\/>random\_number\_generator();}
\DoxyCodeLine{822     base::SmallVector<base::Vector<const uint8\_t>, 16> ranges;}
\DoxyCodeLine{823     \textcolor{keywordflow}{if} (!bytes.empty()) ranges.push\_back(bytes.as\_vector());}
\DoxyCodeLine{824     \textcolor{comment}{// Split into up to 16 ranges (2\string^4).}}
\DoxyCodeLine{825     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} round = 0; round < 4; ++round) \{}
\DoxyCodeLine{826       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = ranges.begin(); it != ranges.end(); ++it) \{}
\DoxyCodeLine{827         \textcolor{keyword}{auto} range = *it;}
\DoxyCodeLine{828         \textcolor{keywordflow}{if} (range.size() < 2 || !rng-\/>NextBool()) \textcolor{keywordflow}{continue};  \textcolor{comment}{// Do not split.}}
\DoxyCodeLine{829         \textcolor{comment}{// Choose split point within [1, range.size() -\/ 1].}}
\DoxyCodeLine{830         static\_assert(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a72cc035a1e5fa3742bc0d984f8d5c9ec}{kV8MaxWasmModuleSize}} <= \mbox{\hyperlink{namespacev8_1_1internal_ad03e50e4d15ee0da6a722254f350e7eb}{kMaxInt}});}
\DoxyCodeLine{831         \textcolor{keywordtype}{size\_t} split\_point =}
\DoxyCodeLine{832             1 + rng-\/>NextInt(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(range.size() -\/ 1));}
\DoxyCodeLine{833         \textcolor{comment}{// Insert first sub-\/range *before* \{it\} and make \{it\} point after it.}}
\DoxyCodeLine{834         it = ranges.insert(it, range.SubVector(0, split\_point)) + 1;}
\DoxyCodeLine{835         *it = range.SubVectorFrom(split\_point);}
\DoxyCodeLine{836       \}}
\DoxyCodeLine{837     \}}
\DoxyCodeLine{838     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} range : ranges) \{}
\DoxyCodeLine{839       streaming\_decoder-\/>OnBytesReceived(range);}
\DoxyCodeLine{840     \}}
\DoxyCodeLine{841     streaming\_decoder-\/>Finish();}
\DoxyCodeLine{842     \textcolor{keywordflow}{return};}
\DoxyCodeLine{843   \}}
\DoxyCodeLine{844 }
\DoxyCodeLine{845   AsyncCompileJob* job = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209}{CreateAsyncCompileJob}}(}
\DoxyCodeLine{846       isolate, enabled, std::move(compile\_imports), std::move(bytes),}
\DoxyCodeLine{847       isolate-\/>native\_context(), api\_method\_name\_for\_errors,}
\DoxyCodeLine{848       std::move(resolver), compilation\_id);}
\DoxyCodeLine{849   job-\/>Start();}
\DoxyCodeLine{850 \}}

\end{DoxyCode}


References v8\+::base\+::\+Owned\+Vector$<$ T $>$\+::as\+\_\+vector(), v8\+::base\+::\+Small\+Vector$<$ T, k\+Size, Allocator $>$\+::begin(), v8\+::internal\+::\+Isolate\+::context(), Create\+Async\+Compile\+Job(), v8\+::internal\+::direct\+\_\+handle(), v8\+::base\+::\+Owned\+Vector$<$ T $>$\+::empty(), v8\+::base\+::\+Small\+Vector$<$ T, k\+Size, Allocator $>$\+::end(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::error(), v8\+::base\+::\+Small\+Vector$<$ T, k\+Size, Allocator $>$\+::insert(), v8\+::internal\+::k\+Max\+Int, v8\+::internal\+::wasm\+::k\+V8\+Max\+Wasm\+Module\+Size, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), next\+\_\+compilation\+\_\+id\+\_\+, v8\+::base\+::\+Small\+Vector$<$ T, k\+Size, Allocator $>$\+::push\+\_\+back(), v8\+::internal\+::\+Isolate\+::random\+\_\+number\+\_\+generator(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::\+Reify(), v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Start(), Start\+Streaming\+Compilation(), Sync\+Compile(), v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::\+To\+Handle\+Checked(), TRACE\+\_\+\+EVENT1, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Compile\+Impl(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Instantiate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa17c088fdbc894379d393baf814073f7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!AsyncInstantiate@{AsyncInstantiate}}
\index{AsyncInstantiate@{AsyncInstantiate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{AsyncInstantiate()}{AsyncInstantiate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Async\+Instantiate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1InstantiationResultResolver}{Instantiation\+Result\+Resolver}} $>$}]{resolver,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$}]{module\+\_\+object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{imports }\end{DoxyParamCaption})}



Definition at line 753 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{756                                            \{}
\DoxyCodeLine{757   ErrorThrower thrower(isolate, \textcolor{stringliteral}{"{}WebAssembly.instantiate()"{}});}
\DoxyCodeLine{758   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.AsyncInstantiate"{}});}
\DoxyCodeLine{759   \textcolor{comment}{// Instantiate a TryCatch so that caught exceptions won't propagate out.}}
\DoxyCodeLine{760   \textcolor{comment}{// They will still be set as exceptions on the isolate.}}
\DoxyCodeLine{761   \textcolor{comment}{// TODO(clemensb): Avoid TryCatch, use Execution::TryCall internally to invoke}}
\DoxyCodeLine{762   \textcolor{comment}{// start function and report thrown exception explicitly via out argument.}}
\DoxyCodeLine{763   \mbox{\hyperlink{classv8_1_1TryCatch}{v8::TryCatch}} catcher(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classv8_1_1Isolate}{v8::Isolate}}*\textcolor{keyword}{>}(isolate));}
\DoxyCodeLine{764   catcher.SetVerbose(\textcolor{keyword}{false});}
\DoxyCodeLine{765   catcher.SetCaptureMessage(\textcolor{keyword}{false});}
\DoxyCodeLine{766 }
\DoxyCodeLine{767   MaybeDirectHandle<WasmInstanceObject> \mbox{\hyperlink{namespacev8_1_1internal_a58e3fb6c5ada1d544715988b7a735333}{instance\_object}} =}
\DoxyCodeLine{768       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50}{SyncInstantiate}}(isolate, \&thrower, module\_object, imports,}
\DoxyCodeLine{769                       \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle_aef2c4a05e51981d20f57a042a4a439d0}{DirectHandle<JSArrayBuffer>::null}}());}
\DoxyCodeLine{770 }
\DoxyCodeLine{771   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a58e3fb6c5ada1d544715988b7a735333}{instance\_object}}.is\_null()) \{}
\DoxyCodeLine{772     resolver-\/>OnInstantiationSucceeded(\mbox{\hyperlink{namespacev8_1_1internal_a58e3fb6c5ada1d544715988b7a735333}{instance\_object}}.ToHandleChecked());}
\DoxyCodeLine{773     \textcolor{keywordflow}{return};}
\DoxyCodeLine{774   \}}
\DoxyCodeLine{775 }
\DoxyCodeLine{776   \textcolor{keywordflow}{if} (isolate-\/>has\_exception()) \{}
\DoxyCodeLine{777     thrower.Reset();}
\DoxyCodeLine{778     \textcolor{keywordflow}{if} (isolate-\/>is\_execution\_terminating()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{779     \textcolor{comment}{// The JS code executed during instantiation has thrown an exception.}}
\DoxyCodeLine{780     \textcolor{comment}{// We have to move the exception to the promise chain.}}
\DoxyCodeLine{781     DirectHandle<JSAny> exception(Cast<JSAny>(isolate-\/>exception()), isolate);}
\DoxyCodeLine{782     isolate-\/>clear\_exception();}
\DoxyCodeLine{783     resolver-\/>OnInstantiationFailed(exception);}
\DoxyCodeLine{784   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{785     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(thrower.error());}
\DoxyCodeLine{786     resolver-\/>OnInstantiationFailed(thrower.Reify());}
\DoxyCodeLine{787   \}}
\DoxyCodeLine{788 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::clear\+\_\+exception(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::error(), v8\+::internal\+::\+Isolate\+::exception(), v8\+::internal\+::\+Isolate\+::has\+\_\+exception(), v8\+::internal\+::instance\+\_\+object, v8\+::internal\+::\+Isolate\+::is\+\_\+execution\+\_\+terminating(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::\+Reify(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::\+Reset(), v8\+::\+Try\+Catch\+::\+Set\+Capture\+Message(), v8\+::\+Try\+Catch\+::\+Set\+Verbose(), Sync\+Instantiate(), and TRACE\+\_\+\+EVENT0.



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Async\+Instantiate\+Compile\+Result\+Resolver\+::\+On\+Compilation\+Succeeded(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Instantiate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aefbc53197e63d504193b408056d37721_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ef5a29aa357f79043a5f8631b18785}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ef5a29aa357f79043a5f8631b18785}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!call\_descriptors@{call\_descriptors}}
\index{call\_descriptors@{call\_descriptors}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{call\_descriptors()}{call\_descriptors()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors}{compiler\+::\+Wasm\+Call\+Descriptors}}$\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::call\+\_\+descriptors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 396 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{396                                                   \{}
\DoxyCodeLine{397     \textcolor{keywordflow}{return} \&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab160110a4540fe336bc9834d389c6bc6}{call\_descriptors\_}};}
\DoxyCodeLine{398   \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Wrapper\+TSGraph\+Builder\+::\+Get\+Big\+Int\+To\+I64\+Call\+Descriptor(), and v8\+::internal\+::compiler\+::turboshaft\+::\+Int64\+Lowering\+Reducer$<$ Next $>$\+::\+Lower\+Call().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ef5a29aa357f79043a5f8631b18785_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0b70b2a53d091016505e717012cb09dd}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0b70b2a53d091016505e717012cb09dd}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!clear\_nondeterminism@{clear\_nondeterminism}}
\index{clear\_nondeterminism@{clear\_nondeterminism}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{clear\_nondeterminism()}{clear\_nondeterminism()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::clear\+\_\+nondeterminism (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 437 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{437                                      \{}
\DoxyCodeLine{438     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}{had\_nondeterminism\_}}.exchange(0, std::memory\_order\_relaxed) != 0;}
\DoxyCodeLine{439   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!ClearWeakScriptHandle@{ClearWeakScriptHandle}}
\index{ClearWeakScriptHandle@{ClearWeakScriptHandle}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{ClearWeakScriptHandle()}{ClearWeakScriptHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Clear\+Weak\+Script\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} $\ast$ $>$}]{location }\end{DoxyParamCaption})}



Definition at line 521 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{522                                                                          \{}
\DoxyCodeLine{523   \textcolor{comment}{// This function is designed for one targeted use case, which always}}
\DoxyCodeLine{524   \textcolor{comment}{// acquires a lock on \{mutex\_\} before calling here.}}
\DoxyCodeLine{525   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{526   IsolateInfo* isolate\_info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{527   std::shared\_ptr<TaskRunner> runner = isolate\_info-\/>foreground\_task\_runner;}
\DoxyCodeLine{528   runner-\/>PostTask(std::make\_unique<ClearWeakScriptHandleTask>(}
\DoxyCodeLine{529       isolate, std::move(location)));}
\DoxyCodeLine{530 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::foreground\+\_\+task\+\_\+runner, isolates\+\_\+, and mutex\+\_\+.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::\+Weak\+Script\+Handle\+::$\sim$\+Weak\+Script\+Handle().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac8fad47fa7de440c822c9e19d34208a0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!CompileFunction@{CompileFunction}}
\index{CompileFunction@{CompileFunction}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{CompileFunction()}{CompileFunction()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Compile\+Function (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $\ast$}]{counters,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module,  }\item[{uint32\+\_\+t}]{function\+\_\+index,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a74094ea879a0bfb89fbc40b97dd862b9}{Execution\+Tier}}}]{tier }\end{DoxyParamCaption})}



Definition at line 871 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{873                                                                               \{}
\DoxyCodeLine{874   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless);}
\DoxyCodeLine{875 }
\DoxyCodeLine{876   \textcolor{comment}{// Note we assume that "{}one-\/off"{} compilations can discard detected features.}}
\DoxyCodeLine{877   WasmDetectedFeatures detected;}
\DoxyCodeLine{878   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit_aa0c7dcc97d999fcad24b44bd026e75ca}{WasmCompilationUnit::CompileWasmFunction}}(}
\DoxyCodeLine{879       counters, native\_module, \&detected,}
\DoxyCodeLine{880       \&native\_module-\/>module()-\/>functions[function\_index], \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}});}
\DoxyCodeLine{881 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Wasm\+Compilation\+Unit\+::\+Compile\+Wasm\+Function(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::functions, v8\+::internal\+::wasm\+::\+Native\+Module\+::module(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Tier\+Up\+All\+Functions(), and v8\+::internal\+::wasm\+::\+Tier\+Up\+Now\+For\+Testing().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a91a8d27da954c0e30d403ffa8fcb7bf5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!CreateAsyncCompileJob@{CreateAsyncCompileJob}}
\index{CreateAsyncCompileJob@{CreateAsyncCompileJob}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{CreateAsyncCompileJob()}{CreateAsyncCompileJob()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Create\+Async\+Compile\+Job (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$}]{bytes,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$}]{context,  }\item[{const char $\ast$}]{api\+\_\+method\+\_\+name,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$}]{resolver,  }\item[{\mbox{\hyperlink{classint}{int}}}]{compilation\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1150 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1154                                                                            \{}
\DoxyCodeLine{1155   DirectHandle<NativeContext> incumbent\_context =}
\DoxyCodeLine{1156       isolate-\/>GetIncumbentContext();}
\DoxyCodeLine{1157   AsyncCompileJob* job = \textcolor{keyword}{new} AsyncCompileJob(}
\DoxyCodeLine{1158       isolate, enabled, std::move(compile\_imports), std::move(bytes), context,}
\DoxyCodeLine{1159       incumbent\_context, api\_method\_name, std::move(resolver), compilation\_id);}
\DoxyCodeLine{1160   \textcolor{comment}{// Pass ownership to the unique\_ptr in \{async\_compile\_jobs\_\}.}}
\DoxyCodeLine{1161   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1162   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}[job] = std::unique\_ptr<AsyncCompileJob>(job);}
\DoxyCodeLine{1163   \textcolor{keywordflow}{return} job;}
\DoxyCodeLine{1164 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, v8\+::internal\+::\+Isolate\+::\+Get\+Incumbent\+Context(), and mutex\+\_\+.



Referenced by Async\+Compile(), and Start\+Streaming\+Compilation().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DecodeAllNameSections@{DecodeAllNameSections}}
\index{DecodeAllNameSections@{DecodeAllNameSections}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DecodeAllNameSections()}{DecodeAllNameSections()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Decode\+All\+Name\+Sections (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider}{Canonical\+Type\+Names\+Provider}} $\ast$}]{target }\end{DoxyParamCaption})}



Definition at line 2012 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2012                                                                          \{}
\DoxyCodeLine{2013   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{2014   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [native\_module, native\_module\_info] : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}) \{}
\DoxyCodeLine{2015     target-\/>DecodeNames(native\_module);}
\DoxyCodeLine{2016   \}}
\DoxyCodeLine{2017 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Canonical\+Type\+Names\+Provider\+::\+Decode\+Names(), mutex\+\_\+, and native\+\_\+modules\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Canonical\+Type\+Names\+Provider\+::\+Decode\+Name\+Sections().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab054f27e8218b5a80d290c14d1c6db27_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9e7c0c7f764d2f3c2c0038ef4a13d1f9}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9e7c0c7f764d2f3c2c0038ef4a13d1f9}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DeleteCompileJobsOnContext@{DeleteCompileJobsOnContext}}
\index{DeleteCompileJobsOnContext@{DeleteCompileJobsOnContext}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DeleteCompileJobsOnContext()}{DeleteCompileJobsOnContext()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Delete\+Compile\+Jobs\+On\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$}]{context }\end{DoxyParamCaption})}



Definition at line 1185 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1185                                                                          \{}
\DoxyCodeLine{1186   \textcolor{comment}{// Under the mutex get all jobs to delete. Then delete them without holding}}
\DoxyCodeLine{1187   \textcolor{comment}{// the mutex, such that deletion can reenter the WasmEngine.}}
\DoxyCodeLine{1188   std::vector<std::unique\_ptr<AsyncCompileJob>> jobs\_to\_delete;}
\DoxyCodeLine{1189   \{}
\DoxyCodeLine{1190     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1191     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.begin();}
\DoxyCodeLine{1192          it != \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.end();) \{}
\DoxyCodeLine{1193       \textcolor{keywordflow}{if} (!it-\/>first-\/>context().is\_identical\_to(context)) \{}
\DoxyCodeLine{1194         ++it;}
\DoxyCodeLine{1195         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1196       \}}
\DoxyCodeLine{1197       jobs\_to\_delete.push\_back(std::move(it-\/>second));}
\DoxyCodeLine{1198       it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.erase(it);}
\DoxyCodeLine{1199     \}}
\DoxyCodeLine{1200   \}}
\DoxyCodeLine{1201 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, and mutex\+\_\+.



Referenced by v8\+::\+Isolate\+::\+Context\+Disposed\+Notification().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9e7c0c7f764d2f3c2c0038ef4a13d1f9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa103ab294ff94d0c588ea065e30e7038}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa103ab294ff94d0c588ea065e30e7038}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DeleteCompileJobsOnIsolate@{DeleteCompileJobsOnIsolate}}
\index{DeleteCompileJobsOnIsolate@{DeleteCompileJobsOnIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DeleteCompileJobsOnIsolate()}{DeleteCompileJobsOnIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Delete\+Compile\+Jobs\+On\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1203 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1203                                                             \{}
\DoxyCodeLine{1204   \textcolor{comment}{// Under the mutex get all jobs to delete. Then delete them without holding}}
\DoxyCodeLine{1205   \textcolor{comment}{// the mutex, such that deletion can reenter the WasmEngine.}}
\DoxyCodeLine{1206   std::vector<std::unique\_ptr<AsyncCompileJob>> jobs\_to\_delete;}
\DoxyCodeLine{1207   std::vector<std::weak\_ptr<NativeModule>> modules\_in\_isolate;}
\DoxyCodeLine{1208   \{}
\DoxyCodeLine{1209     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1210     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.begin();}
\DoxyCodeLine{1211          it != \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.end();) \{}
\DoxyCodeLine{1212       \textcolor{keywordflow}{if} (it-\/>first-\/>isolate() != isolate) \{}
\DoxyCodeLine{1213         ++it;}
\DoxyCodeLine{1214         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1215       \}}
\DoxyCodeLine{1216       jobs\_to\_delete.push\_back(std::move(it-\/>second));}
\DoxyCodeLine{1217       it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.erase(it);}
\DoxyCodeLine{1218     \}}
\DoxyCodeLine{1219     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1220     \textcolor{keyword}{auto}* isolate\_info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{1221     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* native\_module : isolate\_info-\/>native\_modules) \{}
\DoxyCodeLine{1222       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{1223       modules\_in\_isolate.emplace\_back(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module]-\/>weak\_ptr);}
\DoxyCodeLine{1224     \}}
\DoxyCodeLine{1225   \}}
\DoxyCodeLine{1226 }
\DoxyCodeLine{1227   \textcolor{comment}{// All modules that have not finished initial compilation yet cannot be}}
\DoxyCodeLine{1228   \textcolor{comment}{// shared with other isolates. Hence we cancel their compilation. In}}
\DoxyCodeLine{1229   \textcolor{comment}{// particular, this will cancel wrapper compilation which is bound to this}}
\DoxyCodeLine{1230   \textcolor{comment}{// isolate (this would be a UAF otherwise).}}
\DoxyCodeLine{1231   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& weak\_module : modules\_in\_isolate) \{}
\DoxyCodeLine{1232     \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} shared\_module = weak\_module.lock()) \{}
\DoxyCodeLine{1233       shared\_module-\/>compilation\_state()-\/>CancelInitialCompilation();}
\DoxyCodeLine{1234     \}}
\DoxyCodeLine{1235   \}}
\DoxyCodeLine{1236 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, DCHECK\+\_\+\+EQ, isolates\+\_\+, mutex\+\_\+, and native\+\_\+modules\+\_\+.



Referenced by v8\+::internal\+::\+Isolate\+::\+Deinit().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa103ab294ff94d0c588ea065e30e7038_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DisableCodeLogging@{DisableCodeLogging}}
\index{DisableCodeLogging@{DisableCodeLogging}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DisableCodeLogging()}{DisableCodeLogging()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Disable\+Code\+Logging (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1501 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1501                                                                \{}
\DoxyCodeLine{1502   \textcolor{comment}{// The caller should hold the mutex.}}
\DoxyCodeLine{1503   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1504   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(native\_module-\/>log\_code());}
\DoxyCodeLine{1505   native\_module-\/>DisableCodeLogging();}
\DoxyCodeLine{1506   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.fetch\_sub(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{1507   \textcolor{comment}{// Check the accuracy of \{num\_modules\_with\_code\_logging\_\}.}}
\DoxyCodeLine{1508   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(}
\DoxyCodeLine{1509       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.load(std::memory\_order\_relaxed),}
\DoxyCodeLine{1510       \mbox{\hyperlink{namespacev8_1_1base_a8b8cd3857bec34079adc035bd61b0f3f}{std::count\_if}}(}
\DoxyCodeLine{1511           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.begin(), \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.end(),}
\DoxyCodeLine{1512           [](std::pair<NativeModule* \textcolor{keyword}{const}, std::unique\_ptr<NativeModuleInfo>>\&}
\DoxyCodeLine{1513                  pair) \{ return pair.first-\/>log\_code(); \}));}
\DoxyCodeLine{1514 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), v8\+::base\+::count\+\_\+if(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Disable\+Code\+Logging(), v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), mutex\+\_\+, native\+\_\+modules\+\_\+, and num\+\_\+modules\+\_\+with\+\_\+code\+\_\+logging\+\_\+.



Referenced by Free\+Native\+Module(), and Remove\+Isolate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a54471342125fa1a1edbfce3cbabc9ab6}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a54471342125fa1a1edbfce3cbabc9ab6}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DumpAndResetTurboStatistics@{DumpAndResetTurboStatistics}}
\index{DumpAndResetTurboStatistics@{DumpAndResetTurboStatistics}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DumpAndResetTurboStatistics()}{DumpAndResetTurboStatistics()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Dump\+And\+Reset\+Turbo\+Statistics (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1125 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1125                                              \{}
\DoxyCodeLine{1126   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1127   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}} != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{1128     StdoutStream os;}
\DoxyCodeLine{1129     os << AsPrintableStatistics\{\textcolor{stringliteral}{"{}Turbofan Wasm"{}}, *\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}}, \textcolor{keyword}{false}\}}
\DoxyCodeLine{1130        << std::endl;}
\DoxyCodeLine{1131   \}}
\DoxyCodeLine{1132   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}}.reset();}
\DoxyCodeLine{1133 \}}

\end{DoxyCode}


References compilation\+\_\+stats\+\_\+, and mutex\+\_\+.



Referenced by v8\+::internal\+::\+Isolate\+::\+Dump\+And\+Reset\+Stats().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a54471342125fa1a1edbfce3cbabc9ab6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_af051e260505b417cdea6c8b0aa8b5871}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_af051e260505b417cdea6c8b0aa8b5871}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!DumpTurboStatistics@{DumpTurboStatistics}}
\index{DumpTurboStatistics@{DumpTurboStatistics}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{DumpTurboStatistics()}{DumpTurboStatistics()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Dump\+Turbo\+Statistics (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1135 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1135                                      \{}
\DoxyCodeLine{1136   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1137   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}} != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{1138     StdoutStream os;}
\DoxyCodeLine{1139     os << AsPrintableStatistics\{\textcolor{stringliteral}{"{}Turbofan Wasm"{}}, *\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}}, \textcolor{keyword}{false}\}}
\DoxyCodeLine{1140        << std::endl;}
\DoxyCodeLine{1141   \}}
\DoxyCodeLine{1142 \}}

\end{DoxyCode}


References compilation\+\_\+stats\+\_\+, and mutex\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!EnableCodeLogging@{EnableCodeLogging}}
\index{EnableCodeLogging@{EnableCodeLogging}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{EnableCodeLogging()}{EnableCodeLogging()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Enable\+Code\+Logging (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1472 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1472                                                    \{}
\DoxyCodeLine{1473   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1474   \textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.find(isolate);}
\DoxyCodeLine{1475   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.end(), it);}
\DoxyCodeLine{1476   IsolateInfo* info = it-\/>second.get();}
\DoxyCodeLine{1477   \textcolor{keywordflow}{if} (info-\/>log\_codes) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1478   info-\/>log\_codes = \textcolor{keyword}{true};}
\DoxyCodeLine{1479   \textcolor{comment}{// Also set \{NativeModule::log\_code\_\} for all native modules currently used by}}
\DoxyCodeLine{1480   \textcolor{comment}{// this isolate.}}
\DoxyCodeLine{1481   \textcolor{keywordflow}{for} (NativeModule* native\_module : info-\/>native\_modules) \{}
\DoxyCodeLine{1482     \textcolor{keywordflow}{if} (!native\_module-\/>log\_code()) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{EnableCodeLogging}}(native\_module);}
\DoxyCodeLine{1483   \}}
\DoxyCodeLine{1484 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NE, isolates\+\_\+, v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::log\+\_\+codes, mutex\+\_\+, and v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::native\+\_\+modules.



Referenced by Import\+Native\+Module(), v8\+::internal\+::\+V8\+File\+Logger\+::\+Late\+Setup(), Maybe\+Get\+Native\+Module(), New\+Native\+Module(), v8\+::internal\+::\+Profiling\+Scope\+::\+Profiling\+Scope(), v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION(), v8\+::internal\+::\+V8\+File\+Logger\+::\+Set\+Code\+Event\+Handler(), and Update\+Native\+Module\+Cache().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae97284d3dcb8da7d6978f2fbcd45a503}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae97284d3dcb8da7d6978f2fbcd45a503}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!EnableCodeLogging@{EnableCodeLogging}}
\index{EnableCodeLogging@{EnableCodeLogging}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{EnableCodeLogging()}{EnableCodeLogging()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Enable\+Code\+Logging (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1486 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1486                                                               \{}
\DoxyCodeLine{1487   \textcolor{comment}{// The caller should hold the mutex.}}
\DoxyCodeLine{1488   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1489   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!native\_module-\/>log\_code());}
\DoxyCodeLine{1490   native\_module-\/>EnableCodeLogging();}
\DoxyCodeLine{1491   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.fetch\_add(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{1492   \textcolor{comment}{// Check the accuracy of \{num\_modules\_with\_code\_logging\_\}.}}
\DoxyCodeLine{1493   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(}
\DoxyCodeLine{1494       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.load(std::memory\_order\_relaxed),}
\DoxyCodeLine{1495       \mbox{\hyperlink{namespacev8_1_1base_a8b8cd3857bec34079adc035bd61b0f3f}{std::count\_if}}(}
\DoxyCodeLine{1496           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.begin(), \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.end(),}
\DoxyCodeLine{1497           [](std::pair<NativeModule* \textcolor{keyword}{const}, std::unique\_ptr<NativeModuleInfo>>\&}
\DoxyCodeLine{1498                  pair) \{ return pair.first-\/>log\_code(); \}));}
\DoxyCodeLine{1499 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), v8\+::base\+::count\+\_\+if(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Enable\+Code\+Logging(), v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), mutex\+\_\+, native\+\_\+modules\+\_\+, and num\+\_\+modules\+\_\+with\+\_\+code\+\_\+logging\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae97284d3dcb8da7d6978f2fbcd45a503_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7d9f3495e9f458675c5ef14337bf2a1}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7d9f3495e9f458675c5ef14337bf2a1}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!EnterDebuggingForIsolate@{EnterDebuggingForIsolate}}
\index{EnterDebuggingForIsolate@{EnterDebuggingForIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{EnterDebuggingForIsolate()}{EnterDebuggingForIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Enter\+Debugging\+For\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 883 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{883                                                           \{}
\DoxyCodeLine{884   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \textcolor{keywordflow}{return};}
\DoxyCodeLine{885 }
\DoxyCodeLine{886   std::vector<std::shared\_ptr<NativeModule>> native\_modules;}
\DoxyCodeLine{887   \textcolor{comment}{// \{mutex\_\} gets taken both here and in \{RemoveCompiledCode\} in}}
\DoxyCodeLine{888   \textcolor{comment}{// \{AddPotentiallyDeadCode\}. Therefore \{RemoveCompiledCode\} has to be}}
\DoxyCodeLine{889   \textcolor{comment}{// called outside the lock.}}
\DoxyCodeLine{890   \{}
\DoxyCodeLine{891     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{892     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>keep\_in\_debug\_state) \textcolor{keywordflow}{return};}
\DoxyCodeLine{893     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>keep\_in\_debug\_state = \textcolor{keyword}{true};}
\DoxyCodeLine{894     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* native\_module : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>native\_modules) \{}
\DoxyCodeLine{895       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{896       \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} shared\_ptr = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module]-\/>weak\_ptr.lock()) \{}
\DoxyCodeLine{897         native\_modules.emplace\_back(std::move(shared\_ptr));}
\DoxyCodeLine{898       \}}
\DoxyCodeLine{899       native\_module-\/>SetDebugState(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d}{kDebugging}});}
\DoxyCodeLine{900     \}}
\DoxyCodeLine{901   \}}
\DoxyCodeLine{902   WasmCodeRefScope ref\_scope;}
\DoxyCodeLine{903   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& native\_module : native\_modules) \{}
\DoxyCodeLine{904     native\_module-\/>RemoveCompiledCode(}
\DoxyCodeLine{905         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd}{NativeModule::RemoveFilter::kRemoveNonDebugCode}});}
\DoxyCodeLine{906   \}}
\DoxyCodeLine{907 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Debugging, v8\+::internal\+::wasm\+::\+Native\+Module\+::k\+Remove\+Non\+Debug\+Code, mutex\+\_\+, native\+\_\+modules\+\_\+, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7d9f3495e9f458675c5ef14337bf2a1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!EstimateCurrentMemoryConsumption@{EstimateCurrentMemoryConsumption}}
\index{EstimateCurrentMemoryConsumption@{EstimateCurrentMemoryConsumption}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{EstimateCurrentMemoryConsumption()}{EstimateCurrentMemoryConsumption()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Estimate\+Current\+Memory\+Consumption (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 2019 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2019                                                           \{}
\DoxyCodeLine{2020   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}{WasmEngine}}, 8392);}
\DoxyCodeLine{2021   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(IsolateInfo, 168);}
\DoxyCodeLine{2022   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(NativeModuleInfo, 56);}
\DoxyCodeLine{2023   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(CurrentGCInfo, 96);}
\DoxyCodeLine{2024   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aee97c8a6e684e2b5b646159ee0c4ec73}{WasmEngine}});}
\DoxyCodeLine{2025   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a71435eaae2d35e5e71c6a82e8220b0cb}{GetCanonicalTypeNamesProvider}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalTypeNamesProvider_ac293212fe330bc870ae2591de6b4ce9e}{EstimateCurrentMemoryConsumption}}();}
\DoxyCodeLine{2026   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_afd72ebd08e53260ccaf49d8c2ab00353}{type\_canonicalizer\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_add50547bec87230153b84b4c79291dbb}{EstimateCurrentMemoryConsumption}}();}
\DoxyCodeLine{2027   \{}
\DoxyCodeLine{2028     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{2029     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}});}
\DoxyCodeLine{2030     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.size() * \textcolor{keyword}{sizeof}(AsyncCompileJob);}
\DoxyCodeLine{2031     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}});}
\DoxyCodeLine{2032 }
\DoxyCodeLine{2033     \textcolor{comment}{// TODO(14106): Do we care about \{compilation\_stats\_\}?}}
\DoxyCodeLine{2034     \textcolor{comment}{// TODO(14106): Do we care about \{code\_tracer\_\}?}}
\DoxyCodeLine{2035 }
\DoxyCodeLine{2036     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}});}
\DoxyCodeLine{2037     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.size() * \textcolor{keyword}{sizeof}(IsolateInfo);}
\DoxyCodeLine{2038     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [isolate, isolate\_info] : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}) \{}
\DoxyCodeLine{2039       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(isolate\_info-\/>native\_modules);}
\DoxyCodeLine{2040       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(isolate\_info-\/>scripts);}
\DoxyCodeLine{2041       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(isolate\_info-\/>code\_to\_log);}
\DoxyCodeLine{2042     \}}
\DoxyCodeLine{2043 }
\DoxyCodeLine{2044     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}});}
\DoxyCodeLine{2045     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.size() * \textcolor{keyword}{sizeof}(NativeModuleInfo);}
\DoxyCodeLine{2046     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [native\_module, native\_module\_info] : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}) \{}
\DoxyCodeLine{2047       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += native\_module-\/>EstimateCurrentMemoryConsumption();}
\DoxyCodeLine{2048       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(native\_module\_info-\/>isolates);}
\DoxyCodeLine{2049     \}}
\DoxyCodeLine{2050 }
\DoxyCodeLine{2051     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}) \{}
\DoxyCodeLine{2052       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \textcolor{keyword}{sizeof}(CurrentGCInfo);}
\DoxyCodeLine{2053       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates);}
\DoxyCodeLine{2054       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code);}
\DoxyCodeLine{2055     \}}
\DoxyCodeLine{2056   \}}
\DoxyCodeLine{2057   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_wasm\_offheap\_memory) \{}
\DoxyCodeLine{2058     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}WasmEngine: \%zu\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{2059   \}}
\DoxyCodeLine{2060   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{2061 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, v8\+::internal\+::wasm\+::\+Content\+Size(), current\+\_\+gc\+\_\+info\+\_\+, v8\+::internal\+::wasm\+::\+Type\+Canonicalizer\+::\+Estimate\+Current\+Memory\+Consumption(), v8\+::internal\+::wasm\+::\+Canonical\+Type\+Names\+Provider\+::\+Estimate\+Current\+Memory\+Consumption(), v8\+::internal\+::wasm\+::\+Get\+Canonical\+Type\+Names\+Provider(), isolates\+\_\+, mutex\+\_\+, native\+\_\+modules\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, v8\+::internal\+::\+Print\+F(), v8\+::base\+::internal\+::result, type\+\_\+canonicalizer\+\_\+, UPDATE\+\_\+\+WHEN\+\_\+\+CLASS\+\_\+\+CHANGES, v8\+::internal\+::v8\+\_\+flags, and Wasm\+Engine().



Referenced by Add\+Isolate(), v8\+::internal\+::\+Memory\+Measurement\+::\+Finish\+Processing(), Print\+Current\+Memory\+Consumption\+Estimate(), and v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab2c943d125db63cdbe8ba21b5e1fd594}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab2c943d125db63cdbe8ba21b5e1fd594}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FinalizeTranslatedAsmJs@{FinalizeTranslatedAsmJs}}
\index{FinalizeTranslatedAsmJs@{FinalizeTranslatedAsmJs}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FinalizeTranslatedAsmJs()}{FinalizeTranslatedAsmJs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Finalize\+Translated\+Asm\+Js (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AsmWasmData}{Asm\+Wasm\+Data}} $>$}]{asm\+\_\+wasm\+\_\+data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$}]{script }\end{DoxyParamCaption})}



Definition at line 659 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{661                                  \{}
\DoxyCodeLine{662   std::shared\_ptr<NativeModule> native\_module =}
\DoxyCodeLine{663       asm\_wasm\_data-\/>managed\_native\_module()-\/>get();}
\DoxyCodeLine{664   DirectHandle<WasmModuleObject> module\_object =}
\DoxyCodeLine{665       \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject_a420d36fa31fab80f7dd6cf6bce2438c8}{WasmModuleObject::New}}(isolate, std::move(native\_module), \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{666   \textcolor{keywordflow}{return} module\_object;}
\DoxyCodeLine{667 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Wasm\+Module\+Object\+::\+New(), and v8\+::internal\+::script.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab2c943d125db63cdbe8ba21b5e1fd594_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FlushLiftoffCode@{FlushLiftoffCode}}
\index{FlushLiftoffCode@{FlushLiftoffCode}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FlushLiftoffCode()}{FlushLiftoffCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Flush\+Liftoff\+Code (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1090 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1090                                   \{}
\DoxyCodeLine{1091   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_liftoff\_code);}
\DoxyCodeLine{1092   \textcolor{comment}{// Keep the NativeModules alive until after the destructor of the}}
\DoxyCodeLine{1093   \textcolor{comment}{// `WasmCodeRefScope`, which still needs to access the code and the}}
\DoxyCodeLine{1094   \textcolor{comment}{// NativeModule.}}
\DoxyCodeLine{1095   std::vector<std::shared\_ptr<NativeModule>> native\_modules;}
\DoxyCodeLine{1096   WasmCodeRefScope ref\_scope;}
\DoxyCodeLine{1097   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1098   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [native\_module, info] : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}) \{}
\DoxyCodeLine{1099     std::shared\_ptr<NativeModule> shared = info-\/>weak\_ptr.lock();}
\DoxyCodeLine{1100     \textcolor{keywordflow}{if} (!shared) \textcolor{keywordflow}{continue};  \textcolor{comment}{// The NativeModule is dying anyway.}}
\DoxyCodeLine{1101     native\_module-\/>RemoveCompiledCode(}
\DoxyCodeLine{1102         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule_addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436}{NativeModule::RemoveFilter::kRemoveLiftoffCode}});}
\DoxyCodeLine{1103     native\_modules.emplace\_back(std::move(shared));}
\DoxyCodeLine{1104   \}}
\DoxyCodeLine{1105 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Native\+Module\+::k\+Remove\+Liftoff\+Code, mutex\+\_\+, native\+\_\+modules\+\_\+, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+Heap\+::\+Eagerly\+Free\+External\+Memory\+And\+Wasm\+Code(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+New\+Native\+Module(), and v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab84991e9216741ff8c932c1a64d5aced_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3b0f0f6a499ad560407b32ab5b81aaa3}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3b0f0f6a499ad560407b32ab5b81aaa3}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FreeAllOrphanedGlobalHandles@{FreeAllOrphanedGlobalHandles}}
\index{FreeAllOrphanedGlobalHandles@{FreeAllOrphanedGlobalHandles}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FreeAllOrphanedGlobalHandles()}{FreeAllOrphanedGlobalHandles()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Free\+All\+Orphaned\+Global\+Handles (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$}]{start }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 139 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{139                                                                              \{}
\DoxyCodeLine{140   \textcolor{comment}{// This is meant to be called from \string~Isolate, so we no longer care about}}
\DoxyCodeLine{141   \textcolor{comment}{// maintaining invariants: the only task is to free memory to prevent leaks.}}
\DoxyCodeLine{142   \textcolor{keywordflow}{while} (start != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{143     WasmOrphanedGlobalHandle* next = start-\/>next\_;}
\DoxyCodeLine{144     \textcolor{keyword}{delete} start;}
\DoxyCodeLine{145     start = next;}
\DoxyCodeLine{146   \}}
\DoxyCodeLine{147 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Wasm\+Orphaned\+Global\+Handle\+::next\+\_\+.



Referenced by v8\+::internal\+::\+Isolate\+::$\sim$\+Isolate().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3b0f0f6a499ad560407b32ab5b81aaa3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FreeDeadCode@{FreeDeadCode}}
\index{FreeDeadCode@{FreeDeadCode}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FreeDeadCode()}{FreeDeadCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Free\+Dead\+Code (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{Dead\+Code\+Map}} \&}]{dead\+\_\+code,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&}]{dead\+\_\+wrappers }\end{DoxyParamCaption})}



Definition at line 1872 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1873                                                                    \{}
\DoxyCodeLine{1874   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1875   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716}{FreeDeadCodeLocked}}(dead\_code, dead\_wrappers);}
\DoxyCodeLine{1876 \}}

\end{DoxyCode}


References Free\+Dead\+Code\+Locked(), and mutex\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Code\+::\+Decrement\+Ref\+Count().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7205b4150830ce82a81d687f9f0765af_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FreeDeadCodeLocked@{FreeDeadCodeLocked}}
\index{FreeDeadCodeLocked@{FreeDeadCodeLocked}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FreeDeadCodeLocked()}{FreeDeadCodeLocked()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Free\+Dead\+Code\+Locked (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{Dead\+Code\+Map}} \&}]{dead\+\_\+code,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&}]{dead\+\_\+wrappers }\end{DoxyParamCaption})}



Definition at line 1878 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1879                                                                          \{}
\DoxyCodeLine{1880   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.FreeDeadCode"{}});}
\DoxyCodeLine{1881   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1882   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& dead\_code\_entry : dead\_code) \{}
\DoxyCodeLine{1883     NativeModule* native\_module = dead\_code\_entry.first;}
\DoxyCodeLine{1884     \textcolor{keyword}{const} std::vector<WasmCode*>\& code\_vec = dead\_code\_entry.second;}
\DoxyCodeLine{1885     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Freeing \%zu code object\%s of module \%p.\(\backslash\)n"{}}, code\_vec.size(),}
\DoxyCodeLine{1886                   code\_vec.size() == 1 ? \textcolor{stringliteral}{"{}"{}} : \textcolor{stringliteral}{"{}s"{}}, native\_module);}
\DoxyCodeLine{1887     native\_module-\/>FreeCode(\mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(code\_vec));}
\DoxyCodeLine{1888   \}}
\DoxyCodeLine{1889   \textcolor{keywordflow}{if} (dead\_wrappers.size()) \{}
\DoxyCodeLine{1890     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Freeing \%zu wrapper\%s.\(\backslash\)n"{}}, dead\_wrappers.size(),}
\DoxyCodeLine{1891                   dead\_wrappers.size() == 1 ? \textcolor{stringliteral}{"{}"{}} : \textcolor{stringliteral}{"{}s"{}});}
\DoxyCodeLine{1892     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a36345041662f17bb39d27709c1cb78ac}{GetWasmImportWrapperCache}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_a4cc5d346203b8feafcbb394bf3edb14f}{Free}}(dead\_wrappers);}
\DoxyCodeLine{1893   \}}
\DoxyCodeLine{1894 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), v8\+::internal\+::wasm\+::\+Wasm\+Import\+Wrapper\+Cache\+::\+Free(), v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Free\+Code(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Import\+Wrapper\+Cache(), mutex\+\_\+, TRACE\+\_\+\+CODE\+\_\+\+GC, TRACE\+\_\+\+EVENT0, and v8\+::base\+::\+Vector\+Of().



Referenced by Free\+Dead\+Code(), and Potentially\+Finish\+Current\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!FreeNativeModule@{FreeNativeModule}}
\index{FreeNativeModule@{FreeNativeModule}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{FreeNativeModule()}{FreeNativeModule()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Free\+Native\+Module (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module }\end{DoxyParamCaption})}



Definition at line 1691 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1691                                                              \{}
\DoxyCodeLine{1692   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1693   \textcolor{keyword}{auto} module = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.find(native\_module);}
\DoxyCodeLine{1694   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.end(), module);}
\DoxyCodeLine{1695   \textcolor{keyword}{auto} part\_of\_native\_module = [native\_module](WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}) \{}
\DoxyCodeLine{1696     \textcolor{keywordflow}{return} \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>native\_module() == native\_module;}
\DoxyCodeLine{1697   \};}
\DoxyCodeLine{1698   \textcolor{keywordflow}{for} (Isolate* isolate : module-\/>second-\/>isolates) \{}
\DoxyCodeLine{1699     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1700     IsolateInfo* info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{1701     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, info-\/>native\_modules.count(native\_module));}
\DoxyCodeLine{1702     info-\/>native\_modules.erase(native\_module);}
\DoxyCodeLine{1703     info-\/>scripts.erase(native\_module);}
\DoxyCodeLine{1704 }
\DoxyCodeLine{1705     \textcolor{comment}{// Flush the Wasm code lookup cache, since it may refer to some}}
\DoxyCodeLine{1706     \textcolor{comment}{// code within native modules that we are going to release (if a}}
\DoxyCodeLine{1707     \textcolor{comment}{// Managed<wasm::NativeModule> object is no longer referenced).}}
\DoxyCodeLine{1708     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_aa5c5ecc61ab174d77400fa3082e73537}{FlushCodeLookupCache}}(isolate);}
\DoxyCodeLine{1709 }
\DoxyCodeLine{1710     \textcolor{comment}{// \{CodeToLogPerScript\} keeps the NativeModule alive, so if it dies, there}}
\DoxyCodeLine{1711     \textcolor{comment}{// can not be any outstanding code to be logged.}}
\DoxyCodeLine{1712 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{1713     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& log\_entry : info-\/>code\_to\_log) \{}
\DoxyCodeLine{1714       \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : log\_entry.second.code) \{}
\DoxyCodeLine{1715         \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(native\_module, \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>native\_module());}
\DoxyCodeLine{1716       \}}
\DoxyCodeLine{1717     \}}
\DoxyCodeLine{1718 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1719   \}}
\DoxyCodeLine{1720   \textcolor{comment}{// If there is a GC running which has references to code contained in the}}
\DoxyCodeLine{1721   \textcolor{comment}{// deleted \{NativeModule\}, remove those references.}}
\DoxyCodeLine{1722   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}) \{}
\DoxyCodeLine{1723     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.begin(),}
\DoxyCodeLine{1724               \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}} = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.end();}
\DoxyCodeLine{1725          it != \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}};) \{}
\DoxyCodeLine{1726       \textcolor{keywordflow}{if} ((*it)-\/>native\_module() == native\_module) \{}
\DoxyCodeLine{1727         it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.erase(it);}
\DoxyCodeLine{1728       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1729         ++it;}
\DoxyCodeLine{1730       \}}
\DoxyCodeLine{1731     \}}
\DoxyCodeLine{1732     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Native module \%p died, reducing dead code objects to \%zu.\(\backslash\)n"{}},}
\DoxyCodeLine{1733                   native\_module, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.size());}
\DoxyCodeLine{1734   \}}
\DoxyCodeLine{1735   \textcolor{comment}{// If any code objects are currently tracked as dead or near-\/dead, remove}}
\DoxyCodeLine{1736   \textcolor{comment}{// references belonging to the NativeModule that's being deleted.}}
\DoxyCodeLine{1737   \mbox{\hyperlink{namespacev8_1_1base_abb07611ebb36d3e6f652d11a4a7a6a59}{std::erase\_if}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}, part\_of\_native\_module);}
\DoxyCodeLine{1738 }
\DoxyCodeLine{1739   \textcolor{keywordflow}{if} (native\_module-\/>log\_code()) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82}{DisableCodeLogging}}(native\_module);}
\DoxyCodeLine{1740 }
\DoxyCodeLine{1741   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_a3dfbde26d38f72095078ecc58caeaef9}{Erase}}(native\_module);}
\DoxyCodeLine{1742   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.erase(module);}
\DoxyCodeLine{1743 \}}

\end{DoxyCode}


References code, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::code\+\_\+to\+\_\+log, current\+\_\+gc\+\_\+info\+\_\+, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NE, Disable\+Code\+Logging(), v8\+::internal\+::compiler\+::end(), v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::\+Erase(), v8\+::base\+::erase\+\_\+if(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Flush\+Code\+Lookup\+Cache(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), isolates\+\_\+, v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), mutex\+\_\+, native\+\_\+module\+\_\+cache\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::native\+\_\+modules, native\+\_\+modules\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::scripts, and TRACE\+\_\+\+CODE\+\_\+\+GC.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::$\sim$\+Native\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aaf9cd2000af17e8d1f3ebbb9d4cd7c09_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2e03dccdce1bc0ab3c0adaf5d7843c8c}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2e03dccdce1bc0ab3c0adaf5d7843c8c}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetBarrierForBackgroundCompile@{GetBarrierForBackgroundCompile}}
\index{GetBarrierForBackgroundCompile@{GetBarrierForBackgroundCompile}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetBarrierForBackgroundCompile()}{GetBarrierForBackgroundCompile()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1OperationsBarrier}{Operations\+Barrier}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Barrier\+For\+Background\+Compile (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1926 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1926                                            \{}
\DoxyCodeLine{1927   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8e59070055e532fd16960fe100270492}{operations\_barrier\_}};}
\DoxyCodeLine{1928 \}}

\end{DoxyCode}


References operations\+\_\+barrier\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a935fb8d614cf2741a9b6bb23671b0e76}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a935fb8d614cf2741a9b6bb23671b0e76}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetCodeTracer@{GetCodeTracer}}
\index{GetCodeTracer@{GetCodeTracer}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetCodeTracer()}{GetCodeTracer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1CodeTracer}{Code\+Tracer}} $\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Code\+Tracer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1144 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1144                                       \{}
\DoxyCodeLine{1145   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1146   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}{code\_tracer\_}} == \textcolor{keyword}{nullptr}) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}{code\_tracer\_}}.reset(\textcolor{keyword}{new} CodeTracer(-\/1));}
\DoxyCodeLine{1147   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}{code\_tracer\_}}.get();}
\DoxyCodeLine{1148 \}}

\end{DoxyCode}


References code\+\_\+tracer\+\_\+, and mutex\+\_\+.



Referenced by v8\+::internal\+::compiler\+::\+TFPipeline\+Data\+::\+Get\+Code\+Tracer(), and v8\+::internal\+::compiler\+::turboshaft\+::\+Pipeline\+Data\+::\+Get\+Code\+Tracer().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a935fb8d614cf2741a9b6bb23671b0e76_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5147b0f617e7f09fa772e669a5f84c58}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5147b0f617e7f09fa772e669a5f84c58}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetDeoptsExecutedCount@{GetDeoptsExecutedCount}}
\index{GetDeoptsExecutedCount@{GetDeoptsExecutedCount}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetDeoptsExecutedCount()}{GetDeoptsExecutedCount()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Deopts\+Executed\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 2069 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2069                                              \{}
\DoxyCodeLine{2070   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4dcca0bc03dc84027c94cdba6950a8bb}{deopts\_executed\_}}.load(std::memory\_order::relaxed);}
\DoxyCodeLine{2071 \}}

\end{DoxyCode}


References deopts\+\_\+executed\+\_\+.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5147b0f617e7f09fa772e669a5f84c58_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a370767746722805372a02e277c57ffbb}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a370767746722805372a02e277c57ffbb}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetLiftoffCodeSizeForTesting@{GetLiftoffCodeSizeForTesting}}
\index{GetLiftoffCodeSizeForTesting@{GetLiftoffCodeSizeForTesting}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetLiftoffCodeSizeForTesting()}{GetLiftoffCodeSizeForTesting()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Liftoff\+Code\+Size\+For\+Testing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1107 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1107                                                 \{}
\DoxyCodeLine{1108   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1109   \textcolor{keywordtype}{size\_t} codesize\_liftoff = 0;}
\DoxyCodeLine{1110   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [native\_module, info] : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}) \{}
\DoxyCodeLine{1111     codesize\_liftoff += native\_module-\/>SumLiftoffCodeSizeForTesting();}
\DoxyCodeLine{1112   \}}
\DoxyCodeLine{1113   \textcolor{keywordflow}{return} codesize\_liftoff;}
\DoxyCodeLine{1114 \}}

\end{DoxyCode}


References mutex\+\_\+, and native\+\_\+modules\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a031170af170d5bb164813d9c84467999}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a031170af170d5bb164813d9c84467999}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetNondeterminismAddr@{GetNondeterminismAddr}}
\index{GetNondeterminismAddr@{GetNondeterminismAddr}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetNondeterminismAddr()}{GetNondeterminismAddr()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Nondeterminism\+Addr (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 421 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{421                                          \{}
\DoxyCodeLine{422     \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}}\textcolor{keyword}{>}(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}{had\_nondeterminism\_}});}
\DoxyCodeLine{423   \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{liftoff-\/compiler.\+cc\}\+::\+Liftoff\+Compiler\+::\+Check\+Nan(), and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{liftoff-\/compiler.\+cc\}\+::\+Liftoff\+Compiler\+::\+Check\+S128\+Nan().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a031170af170d5bb164813d9c84467999_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetOrCreateScript@{GetOrCreateScript}}
\index{GetOrCreateScript@{GetOrCreateScript}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetOrCreateScript()}{GetOrCreateScript()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Or\+Create\+Script (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \&}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$}]{source\+\_\+url }\end{DoxyParamCaption})}



Definition at line 1896 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1898                                        \{}
\DoxyCodeLine{1899   \{}
\DoxyCodeLine{1900     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1901     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1902     \textcolor{keyword}{auto}\& scripts = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>scripts;}
\DoxyCodeLine{1903     \textcolor{keyword}{auto} it = scripts.find(native\_module.get());}
\DoxyCodeLine{1904     \textcolor{keywordflow}{if} (it != scripts.end()) \{}
\DoxyCodeLine{1905       DirectHandle<Script> weak\_global\_handle = it-\/>second.handle();}
\DoxyCodeLine{1906       \textcolor{keywordflow}{if} (weak\_global\_handle.is\_null()) \{}
\DoxyCodeLine{1907         scripts.erase(it);}
\DoxyCodeLine{1908       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1909         \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle_a1c73ff83d2409e0cfd9013b7e7c4b841}{DirectHandle<Script>::New}}(*weak\_global\_handle, isolate);}
\DoxyCodeLine{1910       \}}
\DoxyCodeLine{1911     \}}
\DoxyCodeLine{1912   \}}
\DoxyCodeLine{1913   \textcolor{comment}{// Temporarily release the mutex to let the GC collect native modules.}}
\DoxyCodeLine{1914   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5}{CreateWasmScript}}(isolate, native\_module, source\_url);}
\DoxyCodeLine{1915   \{}
\DoxyCodeLine{1916     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1917     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1918     \textcolor{keyword}{auto}\& scripts = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>scripts;}
\DoxyCodeLine{1919     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, scripts.count(native\_module.get()));}
\DoxyCodeLine{1920     scripts.emplace(native\_module.get(), WeakScriptHandle(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, isolate));}
\DoxyCodeLine{1921     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}};}
\DoxyCodeLine{1922   \}}
\DoxyCodeLine{1923 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::\+Create\+Wasm\+Script(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Direct\+Handle$<$ T $>$\+::is\+\_\+null(), isolates\+\_\+, mutex\+\_\+, v8\+::internal\+::\+Direct\+Handle$<$ T $>$\+::\+New(), and v8\+::internal\+::script.



Referenced by v8\+::internal\+::wasm\+::\+Deserialize\+Native\+Module(), Import\+Native\+Module(), v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Prepare\+Runtime\+Objects(), and Sync\+Compile().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae8b9e9de10bcec49ae84e995d61d66cd}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae8b9e9de10bcec49ae84e995d61d66cd}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetOrCreateTurboStatistics@{GetOrCreateTurboStatistics}}
\index{GetOrCreateTurboStatistics@{GetOrCreateTurboStatistics}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetOrCreateTurboStatistics()}{GetOrCreateTurboStatistics()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1CompilationStatistics}{Compilation\+Statistics}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Or\+Create\+Turbo\+Statistics (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1117 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1117                                        \{}
\DoxyCodeLine{1118   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1119   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}} == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{1120     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}}.reset(\textcolor{keyword}{new} CompilationStatistics());}
\DoxyCodeLine{1121   \}}
\DoxyCodeLine{1122   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}{compilation\_stats\_}};}
\DoxyCodeLine{1123 \}}

\end{DoxyCode}


References compilation\+\_\+stats\+\_\+, and mutex\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GetStreamingCompilationOwnership@{GetStreamingCompilationOwnership}}
\index{GetStreamingCompilationOwnership@{GetStreamingCompilationOwnership}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GetStreamingCompilationOwnership()}{GetStreamingCompilationOwnership()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Streaming\+Compilation\+Ownership (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{prefix\+\_\+hash,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&}]{compile\+\_\+imports }\end{DoxyParamCaption})}



Definition at line 1672 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1673                                                                    \{}
\DoxyCodeLine{1674   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.GetStreamingCompilationOwnership"{}});}
\DoxyCodeLine{1675   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_afad7f423900a5711a6fdeceaf7ebd9fb}{GetStreamingCompilationOwnership}}(prefix\_hash,}
\DoxyCodeLine{1676                                                             compile\_imports)) \{}
\DoxyCodeLine{1677     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{1678   \}}
\DoxyCodeLine{1679   \textcolor{comment}{// This is only a marker, not for tracing execution time. There should be a}}
\DoxyCodeLine{1680   \textcolor{comment}{// later "{}wasm.GetNativeModuleFromCache"{} event for trying to get the module}}
\DoxyCodeLine{1681   \textcolor{comment}{// from the cache.}}
\DoxyCodeLine{1682   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}CacheHit"{}});}
\DoxyCodeLine{1683   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1684 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::\+Get\+Streaming\+Compilation\+Ownership(), native\+\_\+module\+\_\+cache\+\_\+, and TRACE\+\_\+\+EVENT0.



Referenced by v8\+::internal\+::wasm\+::\+Async\+Streaming\+Processor\+::\+Process\+Code\+Section\+Header().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3d8b862532f9f18b75db0b33dfa2b4dd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!GlobalTearDown@{GlobalTearDown}}
\index{GlobalTearDown@{GlobalTearDown}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{GlobalTearDown()}{GlobalTearDown()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Global\+Tear\+Down (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 2109 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2109                                 \{}
\DoxyCodeLine{2110 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{2111   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \{}
\DoxyCodeLine{2112     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmInterpreter_a0a1489006f62416ed6d270c718156f93}{WasmInterpreter::GlobalTearDown}}();}
\DoxyCodeLine{2113   \}}
\DoxyCodeLine{2114 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{2115 }
\DoxyCodeLine{2116   \textcolor{comment}{// Note: This can be called multiple times in a row (see}}
\DoxyCodeLine{2117   \textcolor{comment}{// test-\/api/InitializeAndDisposeMultiple). This is fine, as}}
\DoxyCodeLine{2118   \textcolor{comment}{// \{global\_wasm\_state\} will be nullptr then.}}
\DoxyCodeLine{2119   \textcolor{keyword}{delete} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}{global\_wasm\_state}};}
\DoxyCodeLine{2120   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}{global\_wasm\_state}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{2121 }
\DoxyCodeLine{2122   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adbb89ce490c56aae60c8221f47b9f088}{GetProcessWideWasmCodePointerTable}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_abb4a83c3661851c756fbb24581c47d5e}{TearDown}}();}
\DoxyCodeLine{2123 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Get\+Process\+Wide\+Wasm\+Code\+Pointer\+Table(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::global\+\_\+wasm\+\_\+state, v8\+::internal\+::wasm\+::\+Wasm\+Interpreter\+::\+Global\+Tear\+Down(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Pointer\+Table\+::\+Tear\+Down(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+V8\+::\+Dispose().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3bda543358e208aec76ae5da75d96eb2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa14ec7df66897b46477fc275b9d47800}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa14ec7df66897b46477fc275b9d47800}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!had\_nondeterminism@{had\_nondeterminism}}
\index{had\_nondeterminism@{had\_nondeterminism}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{had\_nondeterminism()}{had\_nondeterminism()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::had\+\_\+nondeterminism (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 426 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{426                                    \{}
\DoxyCodeLine{427     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}{had\_nondeterminism\_}}.load(std::memory\_order\_relaxed) != 0;}
\DoxyCodeLine{428   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab6afdb3fea4c987fb6d9d515c5faa630}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab6afdb3fea4c987fb6d9d515c5faa630}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!HasRunningCompileJob@{HasRunningCompileJob}}
\index{HasRunningCompileJob@{HasRunningCompileJob}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{HasRunningCompileJob()}{HasRunningCompileJob()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Has\+Running\+Compile\+Job (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1176 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1176                                                       \{}
\DoxyCodeLine{1177   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1178   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1179   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& entry : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}) \{}
\DoxyCodeLine{1180     \textcolor{keywordflow}{if} (entry.first-\/>isolate() == isolate) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{1181   \}}
\DoxyCodeLine{1182   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1183 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, DCHECK\+\_\+\+EQ, isolates\+\_\+, and mutex\+\_\+.



Referenced by v8\+::\+Isolate\+::\+Has\+Pending\+Background\+Tasks().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab6afdb3fea4c987fb6d9d515c5faa630_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!ImportNativeModule@{ImportNativeModule}}
\index{ImportNativeModule@{ImportNativeModule}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{ImportNativeModule()}{ImportNativeModule()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Import\+Native\+Module (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$}]{shared\+\_\+module,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$}]{source\+\_\+url }\end{DoxyParamCaption})}



Definition at line 1063 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1065                                        \{}
\DoxyCodeLine{1066   NativeModule* native\_module = shared\_native\_module.get();}
\DoxyCodeLine{1067   ModuleWireBytes wire\_bytes(native\_module-\/>wire\_bytes());}
\DoxyCodeLine{1068   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} =}
\DoxyCodeLine{1069       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3}{GetOrCreateScript}}(isolate, shared\_native\_module, source\_url);}
\DoxyCodeLine{1070   native\_module-\/>LogWasmCodes(isolate, *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{1071   DirectHandle<WasmModuleObject> module\_object =}
\DoxyCodeLine{1072       \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject_a420d36fa31fab80f7dd6cf6bce2438c8}{WasmModuleObject::New}}(isolate, std::move(shared\_native\_module), \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{1073   \{}
\DoxyCodeLine{1074     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1075     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1076     IsolateInfo* isolate\_info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.find(isolate)-\/>second.get();}
\DoxyCodeLine{1077     isolate\_info-\/>native\_modules.insert(native\_module);}
\DoxyCodeLine{1078     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{1079     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module]-\/>isolates.insert(isolate);}
\DoxyCodeLine{1080     \textcolor{keywordflow}{if} (isolate\_info-\/>log\_codes \&\& !native\_module-\/>log\_code()) \{}
\DoxyCodeLine{1081       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{EnableCodeLogging}}(native\_module);}
\DoxyCodeLine{1082     \}}
\DoxyCodeLine{1083   \}}
\DoxyCodeLine{1084 }
\DoxyCodeLine{1085   \textcolor{comment}{// Finish the Wasm script now and make it public to the debugger.}}
\DoxyCodeLine{1086   isolate-\/>debug()-\/>OnAfterCompile(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{1087   \textcolor{keywordflow}{return} module\_object;}
\DoxyCodeLine{1088 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Isolate\+::debug(), Enable\+Code\+Logging(), Get\+Or\+Create\+Script(), isolates\+\_\+, v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::log\+\_\+codes, v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Log\+Wasm\+Codes(), mutex\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::native\+\_\+modules, native\+\_\+modules\+\_\+, v8\+::internal\+::\+Wasm\+Module\+Object\+::\+New(), v8\+::internal\+::\+Debug\+::\+On\+After\+Compile(), v8\+::internal\+::script, and v8\+::internal\+::wasm\+::\+Native\+Module\+::wire\+\_\+bytes().



Referenced by v8\+::\+Wasm\+Module\+Object\+::\+From\+Compiled\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5f2628694fa52ace7df480260cd32f99_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1be1c372613f35998f4b316e21ef7683}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1be1c372613f35998f4b316e21ef7683}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!IncrementDeoptsExecutedCount@{IncrementDeoptsExecutedCount}}
\index{IncrementDeoptsExecutedCount@{IncrementDeoptsExecutedCount}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{IncrementDeoptsExecutedCount()}{IncrementDeoptsExecutedCount()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Increment\+Deopts\+Executed\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 2073 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2073                                              \{}
\DoxyCodeLine{2074   \textcolor{keywordtype}{int} previous\_value = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4dcca0bc03dc84027c94cdba6950a8bb}{deopts\_executed\_}}.fetch\_add(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{2075   \textcolor{keywordflow}{return} previous\_value + 1;}
\DoxyCodeLine{2076 \}}

\end{DoxyCode}


References deopts\+\_\+executed\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!InitializeOncePerProcess@{InitializeOncePerProcess}}
\index{InitializeOncePerProcess@{InitializeOncePerProcess}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{InitializeOncePerProcess()}{InitializeOncePerProcess()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Initialize\+Once\+Per\+Process (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 2095 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2095                                           \{}
\DoxyCodeLine{2096   \mbox{\hyperlink{src_2base_2logging_8h_a2209830df6b59d1ec1fdf66b9352924f}{DCHECK\_NULL}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}{global\_wasm\_state}});}
\DoxyCodeLine{2097   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}{global\_wasm\_state}} = \textcolor{keyword}{new} GlobalWasmState();}
\DoxyCodeLine{2098 }
\DoxyCodeLine{2099 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{2100   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \{}
\DoxyCodeLine{2101     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmInterpreter_a6e1bc1ea1b2094854bf455f7f8474210}{WasmInterpreter::InitializeOncePerProcess}}();}
\DoxyCodeLine{2102   \}}
\DoxyCodeLine{2103 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_DRUMBRAKE}}
\DoxyCodeLine{2104 }
\DoxyCodeLine{2105   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adbb89ce490c56aae60c8221f47b9f088}{GetProcessWideWasmCodePointerTable}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_ae12e0b3e8c407046858849fb2375c52a}{Initialize}}();}
\DoxyCodeLine{2106 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NULL, v8\+::internal\+::wasm\+::\+Get\+Process\+Wide\+Wasm\+Code\+Pointer\+Table(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::global\+\_\+wasm\+\_\+state, v8\+::internal\+::wasm\+::\+Wasm\+Code\+Pointer\+Table\+::\+Initialize(), v8\+::internal\+::wasm\+::\+Wasm\+Interpreter\+::\+Initialize\+Once\+Per\+Process(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+V8\+::\+Initialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0dc3794ded31c3d4f26cb020d2ffe332_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac1735499d473116e5a4d0e94de8d92f3}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac1735499d473116e5a4d0e94de8d92f3}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!LeaveDebuggingForIsolate@{LeaveDebuggingForIsolate}}
\index{LeaveDebuggingForIsolate@{LeaveDebuggingForIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{LeaveDebuggingForIsolate()}{LeaveDebuggingForIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Leave\+Debugging\+For\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 909 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{909                                                           \{}
\DoxyCodeLine{910   \textcolor{comment}{// Only trigger recompilation after releasing the mutex, otherwise we risk}}
\DoxyCodeLine{911   \textcolor{comment}{// deadlocks because of lock inversion. The bool tells whether the module}}
\DoxyCodeLine{912   \textcolor{comment}{// needs recompilation for tier up.}}
\DoxyCodeLine{913   std::vector<std::pair<std::shared\_ptr<NativeModule>, \textcolor{keywordtype}{bool}>> native\_modules;}
\DoxyCodeLine{914   \{}
\DoxyCodeLine{915     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{916     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>keep\_in\_debug\_state = \textcolor{keyword}{false};}
\DoxyCodeLine{917     \textcolor{keyword}{auto} can\_remove\_debug\_code = [\textcolor{keyword}{this}](NativeModule* native\_module) \{}
\DoxyCodeLine{918       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{919       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* isolate : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module]-\/>isolates) \{}
\DoxyCodeLine{920         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{921         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>keep\_in\_debug\_state) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{922       \}}
\DoxyCodeLine{923       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{924     \};}
\DoxyCodeLine{925     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* native\_module : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>native\_modules) \{}
\DoxyCodeLine{926       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{927       \textcolor{keyword}{auto} shared\_ptr = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module]-\/>weak\_ptr.lock();}
\DoxyCodeLine{928       \textcolor{keywordflow}{if} (!shared\_ptr) \textcolor{keywordflow}{continue};  \textcolor{comment}{// The module is not used any more.}}
\DoxyCodeLine{929       \textcolor{keywordflow}{if} (!native\_module-\/>IsInDebugState()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{930       \textcolor{comment}{// Only start tier-\/up if no other isolate needs this module in tiered}}
\DoxyCodeLine{931       \textcolor{comment}{// down state.}}
\DoxyCodeLine{932       \textcolor{keywordtype}{bool} remove\_debug\_code = can\_remove\_debug\_code(native\_module);}
\DoxyCodeLine{933       \textcolor{keywordflow}{if} (remove\_debug\_code) native\_module-\/>SetDebugState(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a25f59e94501ad0ce6680be236623cc3ca3aa3bc68e5fce885fa006c7b99c35b93}{kNotDebugging}});}
\DoxyCodeLine{934       native\_modules.emplace\_back(std::move(shared\_ptr), remove\_debug\_code);}
\DoxyCodeLine{935     \}}
\DoxyCodeLine{936   \}}
\DoxyCodeLine{937   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& entry : native\_modules) \{}
\DoxyCodeLine{938     \textcolor{keyword}{auto}\& native\_module = entry.first;}
\DoxyCodeLine{939     \textcolor{keywordtype}{bool} remove\_debug\_code = entry.second;}
\DoxyCodeLine{940     \textcolor{comment}{// Remove all breakpoints set by this isolate.}}
\DoxyCodeLine{941     \textcolor{keywordflow}{if} (native\_module-\/>HasDebugInfo()) \{}
\DoxyCodeLine{942       native\_module-\/>GetDebugInfo()-\/>RemoveIsolate(isolate);}
\DoxyCodeLine{943     \}}
\DoxyCodeLine{944     \textcolor{keywordflow}{if} (remove\_debug\_code) \{}
\DoxyCodeLine{945       WasmCodeRefScope ref\_scope;}
\DoxyCodeLine{946       native\_module-\/>RemoveCompiledCode(}
\DoxyCodeLine{947           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule_addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472}{NativeModule::RemoveFilter::kRemoveDebugCode}});}
\DoxyCodeLine{948     \}}
\DoxyCodeLine{949   \}}
\DoxyCodeLine{950 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Not\+Debugging, v8\+::internal\+::wasm\+::\+Native\+Module\+::k\+Remove\+Debug\+Code, mutex\+\_\+, and native\+\_\+modules\+\_\+.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac1735499d473116e5a4d0e94de8d92f3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!LogCode@{LogCode}}
\index{LogCode@{LogCode}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{LogCode()}{LogCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Log\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$}]{code\+\_\+vec }\end{DoxyParamCaption})}



Definition at line 1367 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1367                                                        \{}
\DoxyCodeLine{1368   \textcolor{keywordflow}{if} (code\_vec.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1369   NativeModule* native\_module = code\_vec[0]-\/>native\_module();}
\DoxyCodeLine{1370   \textcolor{keywordflow}{if} (!native\_module-\/>log\_code()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1371   \textcolor{keyword}{using} TaskToSchedule =}
\DoxyCodeLine{1372       std::pair<std::shared\_ptr<v8::TaskRunner>, std::unique\_ptr<LogCodesTask>>;}
\DoxyCodeLine{1373   std::vector<TaskToSchedule> to\_schedule;}
\DoxyCodeLine{1374   \{}
\DoxyCodeLine{1375     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1376     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{1377     NativeModuleInfo* native\_module\_info =}
\DoxyCodeLine{1378         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.find(native\_module)-\/>second.get();}
\DoxyCodeLine{1379     std::shared\_ptr<NativeModule> shared\_native\_module =}
\DoxyCodeLine{1380         native\_module\_info-\/>weak\_ptr.lock();}
\DoxyCodeLine{1381     \textcolor{comment}{// The NativeModule cannot be dying already at this point.}}
\DoxyCodeLine{1382     \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(shared\_native\_module);}
\DoxyCodeLine{1383     \textcolor{keywordflow}{for} (Isolate* isolate : native\_module\_info-\/>isolates) \{}
\DoxyCodeLine{1384       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1385       IsolateInfo* info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{1386       \textcolor{keywordflow}{if} (info-\/>log\_codes == \textcolor{keyword}{false}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1387 }
\DoxyCodeLine{1388       \textcolor{keyword}{auto} script\_it = info-\/>scripts.find(native\_module);}
\DoxyCodeLine{1389       \textcolor{comment}{// If the script does not yet exist, logging will happen later. If the}}
\DoxyCodeLine{1390       \textcolor{comment}{// weak handle is cleared already, we also don't need to log any more.}}
\DoxyCodeLine{1391       \textcolor{keywordflow}{if} (script\_it == info-\/>scripts.end()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1392 }
\DoxyCodeLine{1393       \textcolor{comment}{// If there is no code scheduled to be logged already in that isolate,}}
\DoxyCodeLine{1394       \textcolor{comment}{// then schedule a new task and also set an interrupt to log the newly}}
\DoxyCodeLine{1395       \textcolor{comment}{// added code as soon as possible.}}
\DoxyCodeLine{1396       \textcolor{keywordflow}{if} (info-\/>code\_to\_log.empty()) \{}
\DoxyCodeLine{1397         isolate-\/>stack\_guard()-\/>RequestLogWasmCode();}
\DoxyCodeLine{1398         to\_schedule.emplace\_back(info-\/>foreground\_task\_runner,}
\DoxyCodeLine{1399                                  std::make\_unique<LogCodesTask>(isolate));}
\DoxyCodeLine{1400       \}}
\DoxyCodeLine{1401 }
\DoxyCodeLine{1402       WeakScriptHandle\& weak\_script\_handle = script\_it-\/>second;}
\DoxyCodeLine{1403       \textcolor{keyword}{auto}\& log\_entry = info-\/>code\_to\_log[weak\_script\_handle.script\_id()];}
\DoxyCodeLine{1404       \textcolor{keywordflow}{if} (!log\_entry.native\_module) \{}
\DoxyCodeLine{1405         log\_entry.native\_module = shared\_native\_module;}
\DoxyCodeLine{1406       \}}
\DoxyCodeLine{1407       \textcolor{keywordflow}{if} (!log\_entry.source\_url) \{}
\DoxyCodeLine{1408         log\_entry.source\_url = weak\_script\_handle.source\_url();}
\DoxyCodeLine{1409       \}}
\DoxyCodeLine{1410       log\_entry.code.insert(log\_entry.code.end(), code\_vec.begin(),}
\DoxyCodeLine{1411                             code\_vec.end());}
\DoxyCodeLine{1412 }
\DoxyCodeLine{1413       \textcolor{comment}{// Increment the reference count for the added \{log\_entry.code\} entries.}}
\DoxyCodeLine{1414       \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : code\_vec) \{}
\DoxyCodeLine{1415         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(native\_module, \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>native\_module());}
\DoxyCodeLine{1416         \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>IncRef();}
\DoxyCodeLine{1417       \}}
\DoxyCodeLine{1418     \}}
\DoxyCodeLine{1419   \}}
\DoxyCodeLine{1420   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [runner, task] : to\_schedule) \{}
\DoxyCodeLine{1421     runner-\/>PostTask(std::move(task));}
\DoxyCodeLine{1422   \}}
\DoxyCodeLine{1423 \}}

\end{DoxyCode}


References v8\+::base\+::\+Vector$<$ T $>$\+::begin(), code, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::code\+\_\+to\+\_\+log, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::base\+::\+Vector$<$ T $>$\+::empty(), v8\+::base\+::\+Vector$<$ T $>$\+::end(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::foreground\+\_\+task\+\_\+runner, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Native\+Module\+Info\+::isolates, isolates\+\_\+, v8\+::internal\+::wasm\+::\+Native\+Module\+::log\+\_\+code(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::log\+\_\+codes, mutex\+\_\+, native\+\_\+modules\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::scripts, v8\+::internal\+::\+Isolate\+::stack\+\_\+guard(), and v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Native\+Module\+Info\+::weak\+\_\+ptr.



Referenced by v8\+::internal\+::wasm\+::\+Compile\+Lazy(), and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Publish\+Code().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a2b1c94eee0072e6f73f9262078571a4f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!LogOutstandingCodesForIsolate@{LogOutstandingCodesForIsolate}}
\index{LogOutstandingCodesForIsolate@{LogOutstandingCodesForIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{LogOutstandingCodesForIsolate()}{LogOutstandingCodesForIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Log\+Outstanding\+Codes\+For\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1516 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1516                                                                \{}
\DoxyCodeLine{1517   \textcolor{comment}{// Under the mutex, get the vector of wasm code to log. Then log and decrement}}
\DoxyCodeLine{1518   \textcolor{comment}{// the ref count without holding the mutex.}}
\DoxyCodeLine{1519   std::unordered\_map<int, IsolateInfo::CodeToLogPerScript> code\_to\_log\_map;}
\DoxyCodeLine{1520   \{}
\DoxyCodeLine{1521     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1522     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1523     code\_to\_log\_map.swap(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>code\_to\_log);}
\DoxyCodeLine{1524   \}}
\DoxyCodeLine{1525 }
\DoxyCodeLine{1526   \textcolor{comment}{// Check again whether we still need to log code.}}
\DoxyCodeLine{1527   \textcolor{keywordtype}{bool} should\_log = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode_acb261693fa04ffc206a9289658201454}{WasmCode::ShouldBeLogged}}(isolate);}
\DoxyCodeLine{1528 }
\DoxyCodeLine{1529   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.LogCode"{}});}
\DoxyCodeLine{1530   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [script\_id, code\_to\_log] : code\_to\_log\_map) \{}
\DoxyCodeLine{1531     \textcolor{keywordflow}{if} (should\_log) \{}
\DoxyCodeLine{1532       \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : code\_to\_log.code) \{}
\DoxyCodeLine{1533         \textcolor{keyword}{const} \textcolor{keywordtype}{char}* source\_url = code\_to\_log.source\_url.get();}
\DoxyCodeLine{1534         \textcolor{comment}{// The source URL can be empty for eval()'ed scripts.}}
\DoxyCodeLine{1535         \textcolor{keywordflow}{if} (!source\_url) source\_url = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{1536         \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>LogCode(isolate, source\_url, script\_id);}
\DoxyCodeLine{1537       \}}
\DoxyCodeLine{1538     \}}
\DoxyCodeLine{1539     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode_aabc336382e10df3a5f7c37ba95d15799}{WasmCode::DecrementRefCount}}(\mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(code\_to\_log.code));}
\DoxyCodeLine{1540   \}}
\DoxyCodeLine{1541 \}}

\end{DoxyCode}


References code, DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Wasm\+Code\+::\+Decrement\+Ref\+Count(), isolates\+\_\+, mutex\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Code\+::\+Should\+Be\+Logged(), TRACE\+\_\+\+EVENT0, and v8\+::base\+::\+Vector\+Of().



Referenced by v8\+::internal\+::wasm\+::\+Compile\+Lazy(), v8\+::internal\+::wasm\+::\+Compile\+To\+Native\+Module(), v8\+::internal\+::wasm\+::\+Wasm\+Import\+Wrapper\+Cache\+::\+Compile\+Wasm\+Js\+Fast\+Call\+Wrapper(), v8\+::internal\+::wasm\+::\+Wasm\+Import\+Wrapper\+Cache\+::\+Compile\+Wrapper(), v8\+::internal\+::\+Stack\+Guard\+::\+Handle\+Interrupts(), and v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Log\+Codes\+Task\+::\+Run\+Internal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a80a2af861380fd22a236025164b81737_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4176e62a5efdce84668b7f54c67e0244}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4176e62a5efdce84668b7f54c67e0244}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!LogWrapperCode@{LogWrapperCode}}
\index{LogWrapperCode@{LogWrapperCode}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{LogWrapperCode()}{LogWrapperCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Log\+Wrapper\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$}]{code }\end{DoxyParamCaption})}



Definition at line 1425 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1425                                               \{}
\DoxyCodeLine{1426   \textcolor{comment}{// Wrappers don't belong to any particular NativeModule.}}
\DoxyCodeLine{1427   \mbox{\hyperlink{src_2base_2logging_8h_a2209830df6b59d1ec1fdf66b9352924f}{DCHECK\_NULL}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>native\_module());}
\DoxyCodeLine{1428   \textcolor{comment}{// Fast path:}}
\DoxyCodeLine{1429   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.load(std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{1430     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1431   \}}
\DoxyCodeLine{1432 }
\DoxyCodeLine{1433   \textcolor{keyword}{using} TaskToSchedule =}
\DoxyCodeLine{1434       std::pair<std::shared\_ptr<v8::TaskRunner>, std::unique\_ptr<LogCodesTask>>;}
\DoxyCodeLine{1435   std::vector<TaskToSchedule> to\_schedule;}
\DoxyCodeLine{1436   \textcolor{keywordtype}{bool} did\_trigger\_code\_logging = \textcolor{keyword}{false};}
\DoxyCodeLine{1437   \{}
\DoxyCodeLine{1438     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1439     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& entry : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}) \{}
\DoxyCodeLine{1440       Isolate* isolate = entry.first;}
\DoxyCodeLine{1441       IsolateInfo* info = entry.second.get();}
\DoxyCodeLine{1442       \textcolor{keywordflow}{if} (info-\/>log\_codes == \textcolor{keyword}{false}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1443       did\_trigger\_code\_logging = \textcolor{keyword}{true};}
\DoxyCodeLine{1444 }
\DoxyCodeLine{1445       \textcolor{comment}{// If this is the first code to log in that isolate, request an interrupt}}
\DoxyCodeLine{1446       \textcolor{comment}{// to log the newly added code as soon as possible.}}
\DoxyCodeLine{1447       \textcolor{keywordflow}{if} (info-\/>code\_to\_log.empty()) \{}
\DoxyCodeLine{1448         isolate-\/>stack\_guard()-\/>RequestLogWasmCode();}
\DoxyCodeLine{1449         to\_schedule.emplace\_back(info-\/>foreground\_task\_runner,}
\DoxyCodeLine{1450                                  std::make\_unique<LogCodesTask>(isolate));}
\DoxyCodeLine{1451       \}}
\DoxyCodeLine{1452 }
\DoxyCodeLine{1453       constexpr \textcolor{keywordtype}{int} kNoScriptId = -\/1;}
\DoxyCodeLine{1454       \textcolor{keyword}{auto}\& log\_entry = info-\/>code\_to\_log[kNoScriptId];}
\DoxyCodeLine{1455       log\_entry.code.push\_back(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1456 }
\DoxyCodeLine{1457       \textcolor{comment}{// Increment the reference count for the added \{log\_entry.code\} entry.}}
\DoxyCodeLine{1458       \textcolor{comment}{// TODO(jkummerow): It might be nice to have a custom smart pointer}}
\DoxyCodeLine{1459       \textcolor{comment}{// that manages updating the refcount for the WasmCode it holds.}}
\DoxyCodeLine{1460       \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>IncRef();}
\DoxyCodeLine{1461     \}}
\DoxyCodeLine{1462     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(did\_trigger\_code\_logging, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}{num\_modules\_with\_code\_logging\_}}.load(}
\DoxyCodeLine{1463                                             std::memory\_order\_relaxed) > 0);}
\DoxyCodeLine{1464   \}}
\DoxyCodeLine{1465   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [runner, task] : to\_schedule) \{}
\DoxyCodeLine{1466     runner-\/>PostTask(std::move(task));}
\DoxyCodeLine{1467   \}}
\DoxyCodeLine{1468 }
\DoxyCodeLine{1469   \textcolor{keywordflow}{return} did\_trigger\_code\_logging;}
\DoxyCodeLine{1470 \}}

\end{DoxyCode}


References code, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::code\+\_\+to\+\_\+log, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NULL, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::foreground\+\_\+task\+\_\+runner, isolates\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::log\+\_\+codes, mutex\+\_\+, num\+\_\+modules\+\_\+with\+\_\+code\+\_\+logging\+\_\+, and v8\+::internal\+::\+Isolate\+::stack\+\_\+guard().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4176e62a5efdce84668b7f54c67e0244_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!MaybeGetNativeModule@{MaybeGetNativeModule}}
\index{MaybeGetNativeModule@{MaybeGetNativeModule}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{MaybeGetNativeModule()}{MaybeGetNativeModule()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Maybe\+Get\+Native\+Module (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80}{Module\+Origin}}}]{origin,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{wire\+\_\+bytes,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&}]{compile\+\_\+imports,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1604 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1606                                                                  \{}
\DoxyCodeLine{1607   \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.GetNativeModuleFromCache"{}}, \textcolor{stringliteral}{"{}wire\_bytes"{}},}
\DoxyCodeLine{1608                wire\_bytes.size());}
\DoxyCodeLine{1609   std::shared\_ptr<NativeModule> native\_module =}
\DoxyCodeLine{1610       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_a559f23d013462e166a90f82755428ebe}{MaybeGetNativeModule}}(origin, wire\_bytes,}
\DoxyCodeLine{1611                                                 compile\_imports);}
\DoxyCodeLine{1612   \textcolor{keywordtype}{bool} remove\_all\_code = \textcolor{keyword}{false};}
\DoxyCodeLine{1613   \textcolor{keywordflow}{if} (native\_module) \{}
\DoxyCodeLine{1614     \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}CacheHit"{}});}
\DoxyCodeLine{1615     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1616     \textcolor{keyword}{auto}\& native\_module\_info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module.get()];}
\DoxyCodeLine{1617     \textcolor{keywordflow}{if} (!native\_module\_info) \{}
\DoxyCodeLine{1618       native\_module\_info = std::make\_unique<NativeModuleInfo>(native\_module);}
\DoxyCodeLine{1619     \}}
\DoxyCodeLine{1620     native\_module\_info-\/>isolates.insert(isolate);}
\DoxyCodeLine{1621     \textcolor{keyword}{auto}* isolate\_data = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{1622     isolate\_data-\/>native\_modules.insert(native\_module.get());}
\DoxyCodeLine{1623     \textcolor{keywordflow}{if} (isolate\_data-\/>keep\_in\_debug\_state \&\& !native\_module-\/>IsInDebugState()) \{}
\DoxyCodeLine{1624       remove\_all\_code = \textcolor{keyword}{true};}
\DoxyCodeLine{1625       native\_module-\/>SetDebugState(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d}{kDebugging}});}
\DoxyCodeLine{1626     \}}
\DoxyCodeLine{1627     \textcolor{keywordflow}{if} (isolate\_data-\/>log\_codes \&\& !native\_module-\/>log\_code()) \{}
\DoxyCodeLine{1628       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{EnableCodeLogging}}(native\_module.get());}
\DoxyCodeLine{1629     \}}
\DoxyCodeLine{1630   \}}
\DoxyCodeLine{1631   \textcolor{keywordflow}{if} (remove\_all\_code) \{}
\DoxyCodeLine{1632     WasmCodeRefScope ref\_scope;}
\DoxyCodeLine{1633     native\_module-\/>RemoveCompiledCode(}
\DoxyCodeLine{1634         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd}{NativeModule::RemoveFilter::kRemoveNonDebugCode}});}
\DoxyCodeLine{1635   \}}
\DoxyCodeLine{1636   \textcolor{keywordflow}{return} native\_module;}
\DoxyCodeLine{1637 \}}

\end{DoxyCode}


References Enable\+Code\+Logging(), isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Debugging, v8\+::internal\+::wasm\+::\+Native\+Module\+::k\+Remove\+Non\+Debug\+Code, v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::\+Maybe\+Get\+Native\+Module(), mutex\+\_\+, native\+\_\+module\+\_\+cache\+\_\+, native\+\_\+modules\+\_\+, v8\+::base\+::\+Vector$<$ T $>$\+::size(), TRACE\+\_\+\+EVENT0, and TRACE\+\_\+\+EVENT1.



Referenced by v8\+::internal\+::wasm\+::\+Deserialize\+Native\+Module(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Get\+Or\+Compile\+New\+Native\+Module(), and v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Get\+Or\+Create\+Native\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a26391b903e117ed93787d080f0bc2fe4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a607eb9a1f2f1b6d542c11a0b030cd56f}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a607eb9a1f2f1b6d542c11a0b030cd56f}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!NativeModuleCount@{NativeModuleCount}}
\index{NativeModuleCount@{NativeModuleCount}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{NativeModuleCount()}{NativeModuleCount()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Native\+Module\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 149 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{149                                            \{}
\DoxyCodeLine{150   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{151   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.size();}
\DoxyCodeLine{152 \}}

\end{DoxyCode}


References mutex\+\_\+, and native\+\_\+modules\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!NewNativeModule@{NewNativeModule}}
\index{NewNativeModule@{NewNativeModule}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{NewNativeModule()}{NewNativeModule()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+New\+Native\+Module (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled\+\_\+features,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures}{Wasm\+Detected\+Features}}}]{detected\+\_\+features,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{std\+::shared\+\_\+ptr$<$ const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $>$}]{module,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{code\+\_\+size\+\_\+estimate }\end{DoxyParamCaption})}



Definition at line 1543 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1546                                                                        \{}
\DoxyCodeLine{1547   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.wasm.detailed"{}}),}
\DoxyCodeLine{1548                \textcolor{stringliteral}{"{}wasm.NewNativeModule"{}});}
\DoxyCodeLine{1549 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1550   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_gdb\_remote \&\& !gdb\_server\_) \{}
\DoxyCodeLine{1551     gdb\_server\_ = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1gdb__server_1_1GdbServer_aafdbc06ac4debd088989426e15a3265b}{gdb\_server::GdbServer::Create}}();}
\DoxyCodeLine{1552     gdb\_server\_-\/>AddIsolate(isolate);}
\DoxyCodeLine{1553   \}}
\DoxyCodeLine{1554 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1555 }
\DoxyCodeLine{1556   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless) \{}
\DoxyCodeLine{1557     \textcolor{comment}{// Initialize the import wrapper cache if that hasn't happened yet.}}
\DoxyCodeLine{1558     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a36345041662f17bb39d27709c1cb78ac}{GetWasmImportWrapperCache}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_a62f4cb8fc02e1bbfe2ed0f09ce2aa050}{LazyInitialize}}(isolate);}
\DoxyCodeLine{1559   \}}
\DoxyCodeLine{1560 }
\DoxyCodeLine{1561   std::shared\_ptr<NativeModule> native\_module =}
\DoxyCodeLine{1562       \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8cbd92108ae1c153f66f40609aed5783}{NewNativeModule}}(}
\DoxyCodeLine{1563           isolate, enabled\_features, detected\_features,}
\DoxyCodeLine{1564           std::move(compile\_imports), code\_size\_estimate, std::move(module));}
\DoxyCodeLine{1565   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1566   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.experimental\_wasm\_pgo\_to\_file)) \{}
\DoxyCodeLine{1567     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\_modules\_kept\_alive\_for\_pgo}}) \{}
\DoxyCodeLine{1568       \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\_modules\_kept\_alive\_for\_pgo}} =}
\DoxyCodeLine{1569           \textcolor{keyword}{new} std::vector<std::shared\_ptr<NativeModule>>;}
\DoxyCodeLine{1570     \}}
\DoxyCodeLine{1571     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\_modules\_kept\_alive\_for\_pgo}}-\/>emplace\_back(native\_module);}
\DoxyCodeLine{1572   \}}
\DoxyCodeLine{1573   \textcolor{keyword}{auto} [iterator, inserted] = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.insert(std::make\_pair(}
\DoxyCodeLine{1574       native\_module.get(), std::make\_unique<NativeModuleInfo>(native\_module)));}
\DoxyCodeLine{1575   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(inserted);}
\DoxyCodeLine{1576   NativeModuleInfo* native\_module\_info = iterator-\/>second.get();}
\DoxyCodeLine{1577   native\_module\_info-\/>isolates.insert(isolate);}
\DoxyCodeLine{1578   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1579   IsolateInfo* isolate\_info = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.find(isolate)-\/>second.get();}
\DoxyCodeLine{1580   isolate\_info-\/>native\_modules.insert(native\_module.get());}
\DoxyCodeLine{1581   \textcolor{keywordflow}{if} (isolate\_info-\/>keep\_in\_debug\_state) \{}
\DoxyCodeLine{1582     native\_module-\/>SetDebugState(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d}{kDebugging}});}
\DoxyCodeLine{1583   \}}
\DoxyCodeLine{1584   \textcolor{keywordflow}{if} (isolate\_info-\/>log\_codes) \{}
\DoxyCodeLine{1585     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{EnableCodeLogging}}(native\_module.get());}
\DoxyCodeLine{1586   \}}
\DoxyCodeLine{1587 }
\DoxyCodeLine{1588   \textcolor{comment}{// Record memory protection key support.}}
\DoxyCodeLine{1589   \textcolor{keywordflow}{if} (!isolate\_info-\/>pku\_support\_sampled) \{}
\DoxyCodeLine{1590     isolate\_info-\/>pku\_support\_sampled = \textcolor{keyword}{true};}
\DoxyCodeLine{1591     \textcolor{keyword}{auto}* histogram =}
\DoxyCodeLine{1592         isolate-\/>counters()-\/>wasm\_memory\_protection\_keys\_support();}
\DoxyCodeLine{1593     \textcolor{keywordtype}{bool} has\_mpk = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a3efdc870dd21f075b3c408101c23feeb}{WasmCodeManager::HasMemoryProtectionKeySupport}}();}
\DoxyCodeLine{1594     histogram-\/>AddSample(has\_mpk ? 1 : 0);}
\DoxyCodeLine{1595   \}}
\DoxyCodeLine{1596 }
\DoxyCodeLine{1597   isolate-\/>counters()-\/>wasm\_modules\_per\_isolate()-\/>AddSample(}
\DoxyCodeLine{1598       \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(isolate\_info-\/>native\_modules.size()));}
\DoxyCodeLine{1599   isolate-\/>counters()-\/>wasm\_modules\_per\_engine()-\/>AddSample(}
\DoxyCodeLine{1600       \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.size()));}
\DoxyCodeLine{1601   \textcolor{keywordflow}{return} native\_module;}
\DoxyCodeLine{1602 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::counters(), v8\+::internal\+::wasm\+::gdb\+\_\+server\+::\+Gdb\+Server\+::\+Create(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, Enable\+Code\+Logging(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Import\+Wrapper\+Cache(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Has\+Memory\+Protection\+Key\+Support(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Native\+Module\+Info\+::isolates, isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Debugging, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::keep\+\_\+in\+\_\+debug\+\_\+state, v8\+::internal\+::wasm\+::\+Wasm\+Import\+Wrapper\+Cache\+::\+Lazy\+Initialize(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::log\+\_\+codes, mutex\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::native\+\_\+modules, native\+\_\+modules\+\_\+, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::native\+\_\+modules\+\_\+kept\+\_\+alive\+\_\+for\+\_\+pgo, v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+New\+Native\+Module(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::pku\+\_\+support\+\_\+sampled, TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT0, v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.



Referenced by v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Create\+Native\+Module(), v8\+::internal\+::wasm\+::\+Deserialize\+Native\+Module(), and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Get\+Or\+Compile\+New\+Native\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ac7a8ec2f950e76dfa9e2ec483c15a372_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9d3649a654e59febca437472b29ba82d}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9d3649a654e59febca437472b29ba82d}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!NewOrphanedGlobalHandle@{NewOrphanedGlobalHandle}}
\index{NewOrphanedGlobalHandle@{NewOrphanedGlobalHandle}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{NewOrphanedGlobalHandle()}{NewOrphanedGlobalHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+New\+Orphaned\+Global\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmOrphanedGlobalHandle}{Wasm\+Orphaned\+Global\+Handle}} $\ast$$\ast$}]{pointer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 125 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{126                                         \{}
\DoxyCodeLine{127   \textcolor{comment}{// No need for additional locking: this is only ever called indirectly}}
\DoxyCodeLine{128   \textcolor{comment}{// from \{WasmEngine::ClearWeakScriptHandle()\}, which holds the engine-\/wide}}
\DoxyCodeLine{129   \textcolor{comment}{// \{mutex\_\}.}}
\DoxyCodeLine{130   WasmOrphanedGlobalHandle* orphan = \textcolor{keyword}{new} WasmOrphanedGlobalHandle();}
\DoxyCodeLine{131   orphan-\/>next\_ = *pointer;}
\DoxyCodeLine{132   orphan-\/>prev\_ptr\_ = pointer;}
\DoxyCodeLine{133   \textcolor{keywordflow}{if} (orphan-\/>next\_ != \textcolor{keyword}{nullptr}) orphan-\/>next\_-\/>prev\_ptr\_ = \&orphan-\/>next\_;}
\DoxyCodeLine{134   *pointer = orphan;}
\DoxyCodeLine{135   \textcolor{keywordflow}{return} orphan;}
\DoxyCodeLine{136 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Wasm\+Orphaned\+Global\+Handle\+::next\+\_\+, and v8\+::internal\+::wasm\+::\+Wasm\+Orphaned\+Global\+Handle\+::prev\+\_\+ptr\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_abb2608ebf20e9f161b6b3404100dd39a}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_abb2608ebf20e9f161b6b3404100dd39a}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!operator=@{operator=}}
\index{operator=@{operator=}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}}\& v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine}{Wasm\+Engine}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!PotentiallyFinishCurrentGC@{PotentiallyFinishCurrentGC}}
\index{PotentiallyFinishCurrentGC@{PotentiallyFinishCurrentGC}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{PotentiallyFinishCurrentGC()}{PotentiallyFinishCurrentGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Potentially\+Finish\+Current\+GC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1970 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1970                                             \{}
\DoxyCodeLine{1971   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1972   \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(}
\DoxyCodeLine{1973       \textcolor{stringliteral}{"{}Remaining dead code objects: \%zu; outstanding isolates: \%zu.\(\backslash\)n"{}},}
\DoxyCodeLine{1974       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.size(),}
\DoxyCodeLine{1975       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates.size());}
\DoxyCodeLine{1976 }
\DoxyCodeLine{1977   \textcolor{comment}{// If there are more outstanding isolates, return immediately.}}
\DoxyCodeLine{1978   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates.empty()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1979 }
\DoxyCodeLine{1980   \textcolor{comment}{// All remaining code in \{current\_gc\_info-\/>dead\_code\} is really dead.}}
\DoxyCodeLine{1981   \textcolor{comment}{// Remove it from the set of potentially dead code, and decrement its}}
\DoxyCodeLine{1982   \textcolor{comment}{// ref count.}}
\DoxyCodeLine{1983   \textcolor{keywordtype}{size\_t} num\_freed = 0;}
\DoxyCodeLine{1984   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a34ff6a2da3d8ef3b85ad087cc4316ebe}{DeadCodeMap}} dead\_code;}
\DoxyCodeLine{1985   std::vector<WasmCode*> dead\_wrappers;}
\DoxyCodeLine{1986   \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code) \{}
\DoxyCodeLine{1987     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}.contains(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}));}
\DoxyCodeLine{1988     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>is\_dying());}
\DoxyCodeLine{1989     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}.erase(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1990     \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>DecRefOnDeadCode()) \{}
\DoxyCodeLine{1991       NativeModule* native\_module = \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>native\_module();}
\DoxyCodeLine{1992       \textcolor{keywordflow}{if} (native\_module) \{}
\DoxyCodeLine{1993         dead\_code[native\_module].push\_back(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1994       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1995         dead\_wrappers.push\_back(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1996       \}}
\DoxyCodeLine{1997       ++num\_freed;}
\DoxyCodeLine{1998     \}}
\DoxyCodeLine{1999   \}}
\DoxyCodeLine{2000 }
\DoxyCodeLine{2001   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aebf17922093194860a0bbc0beea92716}{FreeDeadCodeLocked}}(dead\_code, dead\_wrappers);}
\DoxyCodeLine{2002 }
\DoxyCodeLine{2003   \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Found \%zu dead code objects, freed \%zu.\(\backslash\)n"{}},}
\DoxyCodeLine{2004                 \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.size(), num\_freed);}
\DoxyCodeLine{2005   \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(num\_freed);}
\DoxyCodeLine{2006 }
\DoxyCodeLine{2007   int8\_t next\_gc\_sequence\_index = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>next\_gc\_sequence\_index;}
\DoxyCodeLine{2008   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}.reset();}
\DoxyCodeLine{2009   \textcolor{keywordflow}{if} (next\_gc\_sequence\_index != 0) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea}{TriggerGC}}(next\_gc\_sequence\_index);}
\DoxyCodeLine{2010 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), code, current\+\_\+gc\+\_\+info\+\_\+, v8\+::internal\+::\+DCHECK(), Free\+Dead\+Code\+Locked(), mutex\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, TRACE\+\_\+\+CODE\+\_\+\+GC, Trigger\+GC(), and USE.



Referenced by Remove\+Isolate(), Report\+Live\+Code\+For\+GC(), and Trigger\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!PrintCurrentMemoryConsumptionEstimate@{PrintCurrentMemoryConsumptionEstimate}}
\index{PrintCurrentMemoryConsumptionEstimate@{PrintCurrentMemoryConsumptionEstimate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{PrintCurrentMemoryConsumptionEstimate()}{PrintCurrentMemoryConsumptionEstimate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Print\+Current\+Memory\+Consumption\+Estimate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 2063 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2063                                                              \{}
\DoxyCodeLine{2064   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_wasm\_offheap\_memory\_size);}
\DoxyCodeLine{2065   \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{PrintF}}(\textcolor{stringliteral}{"{}Off-\/heap memory size of WasmEngine: \%zu\(\backslash\)n"{}},}
\DoxyCodeLine{2066          \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5fba3adb4605b6aa26dd5da626734d6}{EstimateCurrentMemoryConsumption}}());}
\DoxyCodeLine{2067 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), Estimate\+Current\+Memory\+Consumption(), v8\+::internal\+::\+Print\+F(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::$\sim$\+Native\+Module(), and $\sim$\+Wasm\+Engine().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a32e34a8169c3a723824780c6ac126654_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!RemoveCompileJob@{RemoveCompileJob}}
\index{RemoveCompileJob@{RemoveCompileJob}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{RemoveCompileJob()}{RemoveCompileJob()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Remove\+Compile\+Job (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}} $\ast$}]{job }\end{DoxyParamCaption})}



Definition at line 1166 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1167                           \{}
\DoxyCodeLine{1168   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1169   \textcolor{keyword}{auto} item = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.find(job);}
\DoxyCodeLine{1170   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(item != \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.end());}
\DoxyCodeLine{1171   std::unique\_ptr<AsyncCompileJob> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = std::move(item-\/>second);}
\DoxyCodeLine{1172   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}{async\_compile\_jobs\_}}.erase(item);}
\DoxyCodeLine{1173   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{1174 \}}

\end{DoxyCode}


References async\+\_\+compile\+\_\+jobs\+\_\+, v8\+::internal\+::\+DCHECK(), mutex\+\_\+, and v8\+::base\+::internal\+::result.



Referenced by v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Abort(), v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Failed(), and v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Finish\+Successfully().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8378f5ecdd236147a0b3c590c12899b8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!RemoveIsolate@{RemoveIsolate}}
\index{RemoveIsolate@{RemoveIsolate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{RemoveIsolate()}{RemoveIsolate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Remove\+Isolate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1291 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1291                                                \{}
\DoxyCodeLine{1292 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1293   \textcolor{keywordflow}{if} (gdb\_server\_) \{}
\DoxyCodeLine{1294     gdb\_server\_-\/>RemoveIsolate(isolate);}
\DoxyCodeLine{1295   \}}
\DoxyCodeLine{1296 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WASM\_GDB\_REMOTE\_DEBUGGING}}
\DoxyCodeLine{1297 }
\DoxyCodeLine{1298   \textcolor{comment}{// Keep a WasmCodeRefScope which dies after the \{mutex\_\} is released, to avoid}}
\DoxyCodeLine{1299   \textcolor{comment}{// deadlock when code actually dies, as that requires taking the \{mutex\_\}.}}
\DoxyCodeLine{1300   \textcolor{comment}{// Also, keep the NativeModules themselves alive. The isolate is shutting}}
\DoxyCodeLine{1301   \textcolor{comment}{// down, so the heap will not do that any more.}}
\DoxyCodeLine{1302   std::set<std::shared\_ptr<NativeModule>> native\_modules\_with\_code\_to\_log;}
\DoxyCodeLine{1303   WasmCodeRefScope code\_ref\_scope\_for\_dead\_code;}
\DoxyCodeLine{1304 }
\DoxyCodeLine{1305   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1306 }
\DoxyCodeLine{1307   \textcolor{comment}{// Lookup the IsolateInfo; do not remove it yet (that happens below).}}
\DoxyCodeLine{1308   \textcolor{keyword}{auto} isolates\_it = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.find(isolate);}
\DoxyCodeLine{1309   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.end(), isolates\_it);}
\DoxyCodeLine{1310   IsolateInfo* isolate\_info = isolates\_it-\/>second.get();}
\DoxyCodeLine{1311 }
\DoxyCodeLine{1312   \textcolor{comment}{// Remove the isolate from the per-\/native-\/module info, and other cleanup.}}
\DoxyCodeLine{1313   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* native\_module : isolate\_info-\/>native\_modules) \{}
\DoxyCodeLine{1314     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module));}
\DoxyCodeLine{1315     NativeModuleInfo* native\_module\_info =}
\DoxyCodeLine{1316         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.find(native\_module)-\/>second.get();}
\DoxyCodeLine{1317 }
\DoxyCodeLine{1318     \textcolor{comment}{// Check that the \{NativeModule::log\_code\_\} field has the expected value,}}
\DoxyCodeLine{1319     \textcolor{comment}{// and update if the dying isolate was the last one with code logging}}
\DoxyCodeLine{1320     \textcolor{comment}{// enabled.}}
\DoxyCodeLine{1321     \textcolor{keyword}{auto} has\_isolate\_with\_code\_logging = [\textcolor{keyword}{this}, native\_module\_info] \{}
\DoxyCodeLine{1322       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_a0e542246e39cb25a93193a080e0e1148}{std::any\_of}}(native\_module\_info-\/>isolates.begin(),}
\DoxyCodeLine{1323                          native\_module\_info-\/>isolates.end(),}
\DoxyCodeLine{1324                          [\textcolor{keyword}{this}](Isolate* isolate) \{}
\DoxyCodeLine{1325                            return isolates\_.find(isolate)-\/>second-\/>log\_codes;}
\DoxyCodeLine{1326                          \});}
\DoxyCodeLine{1327     \};}
\DoxyCodeLine{1328     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(native\_module-\/>log\_code(), has\_isolate\_with\_code\_logging());}
\DoxyCodeLine{1329     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, native\_module\_info-\/>isolates.count(isolate));}
\DoxyCodeLine{1330     native\_module\_info-\/>isolates.erase(isolate);}
\DoxyCodeLine{1331     \textcolor{keywordflow}{if} (native\_module-\/>log\_code() \&\& !has\_isolate\_with\_code\_logging()) \{}
\DoxyCodeLine{1332       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a1f23ad6a455e30455551d8122228bd82}{DisableCodeLogging}}(native\_module);}
\DoxyCodeLine{1333     \}}
\DoxyCodeLine{1334 }
\DoxyCodeLine{1335     \textcolor{comment}{// Remove any debug code and other info for this isolate.}}
\DoxyCodeLine{1336     \textcolor{keywordflow}{if} (native\_module-\/>HasDebugInfo()) \{}
\DoxyCodeLine{1337       native\_module-\/>GetDebugInfo()-\/>RemoveIsolate(isolate);}
\DoxyCodeLine{1338     \}}
\DoxyCodeLine{1339   \}}
\DoxyCodeLine{1340 }
\DoxyCodeLine{1341   \textcolor{comment}{// Abort any outstanding GC.}}
\DoxyCodeLine{1342   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}) \{}
\DoxyCodeLine{1343     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55}{RemoveIsolateFromCurrentGC}}(isolate)) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}{PotentiallyFinishCurrentGC}}();}
\DoxyCodeLine{1344   \}}
\DoxyCodeLine{1345 }
\DoxyCodeLine{1346   \textcolor{comment}{// Clear the \{code\_to\_log\} vector.}}
\DoxyCodeLine{1347   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [script\_id, code\_to\_log] : isolate\_info-\/>code\_to\_log) \{}
\DoxyCodeLine{1348     \textcolor{keywordflow}{if} (code\_to\_log.native\_module == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{1349       \textcolor{comment}{// Wrapper code objects have neither Script nor NativeModule.}}
\DoxyCodeLine{1350       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(script\_id, -\/1);}
\DoxyCodeLine{1351     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1352       native\_modules\_with\_code\_to\_log.insert(code\_to\_log.native\_module);}
\DoxyCodeLine{1353     \}}
\DoxyCodeLine{1354     \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : code\_to\_log.code) \{}
\DoxyCodeLine{1355       \textcolor{comment}{// Keep a reference in the \{code\_ref\_scope\_for\_dead\_code\} such that the}}
\DoxyCodeLine{1356       \textcolor{comment}{// code cannot become dead immediately.}}
\DoxyCodeLine{1357       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_a9148e3cdeac9e7f3d97d518fa66f722c}{WasmCodeRefScope::AddRef}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1358       \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>DecRefOnLiveCode();}
\DoxyCodeLine{1359     \}}
\DoxyCodeLine{1360   \}}
\DoxyCodeLine{1361   isolate\_info-\/>code\_to\_log.clear();}
\DoxyCodeLine{1362 }
\DoxyCodeLine{1363   \textcolor{comment}{// Finally remove the \{IsolateInfo\} for this isolate.}}
\DoxyCodeLine{1364   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.erase(isolates\_it);}
\DoxyCodeLine{1365 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Wasm\+Code\+Ref\+Scope\+::\+Add\+Ref(), v8\+::base\+::any\+\_\+of(), code, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::code\+\_\+to\+\_\+log, current\+\_\+gc\+\_\+info\+\_\+, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NE, Disable\+Code\+Logging(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Native\+Module\+Info\+::isolates, isolates\+\_\+, mutex\+\_\+, v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Isolate\+Info\+::native\+\_\+modules, native\+\_\+modules\+\_\+, Potentially\+Finish\+Current\+GC(), and Remove\+Isolate\+From\+Current\+GC().



Referenced by v8\+::internal\+::\+Isolate\+::\+Deinit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_adb290a299b20f78b6b32641fc21325c5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!RemoveIsolateFromCurrentGC@{RemoveIsolateFromCurrentGC}}
\index{RemoveIsolateFromCurrentGC@{RemoveIsolateFromCurrentGC}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{RemoveIsolateFromCurrentGC()}{RemoveIsolateFromCurrentGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Remove\+Isolate\+From\+Current\+GC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1964 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1964                                                             \{}
\DoxyCodeLine{1965   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1966   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}});}
\DoxyCodeLine{1967   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates.erase(isolate) != 0;}
\DoxyCodeLine{1968 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), current\+\_\+gc\+\_\+info\+\_\+, DCHECK\+\_\+\+NOT\+\_\+\+NULL, and mutex\+\_\+.



Referenced by Remove\+Isolate(), and Report\+Live\+Code\+For\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!ReportLiveCodeForGC@{ReportLiveCodeForGC}}
\index{ReportLiveCodeForGC@{ReportLiveCodeForGC}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{ReportLiveCodeForGC()}{ReportLiveCodeForGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Report\+Live\+Code\+For\+GC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::unordered\+\_\+set$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$ $>$ \&}]{live\+\_\+code }\end{DoxyParamCaption})}



Definition at line 1745 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1746                                                                              \{}
\DoxyCodeLine{1747   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.ReportLiveCodeForGC"{}});}
\DoxyCodeLine{1748   \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Isolate \%d reporting \%zu live code objects.\(\backslash\)n"{}}, isolate-\/>id(),}
\DoxyCodeLine{1749                 live\_code.size());}
\DoxyCodeLine{1750   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1751   \textcolor{comment}{// This report might come in late (note that we trigger both a stack guard and}}
\DoxyCodeLine{1752   \textcolor{comment}{// a foreground task). In that case, ignore it.}}
\DoxyCodeLine{1753   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}} == \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1754   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad4c99b313fb0dcd2dc0e032f8a945b55}{RemoveIsolateFromCurrentGC}}(isolate)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1755   isolate-\/>counters()-\/>wasm\_module\_num\_triggered\_code\_gcs()-\/>AddSample(}
\DoxyCodeLine{1756       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>gc\_sequence\_index);}
\DoxyCodeLine{1757   \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : live\_code) \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.erase(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1758   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}{PotentiallyFinishCurrentGC}}();}
\DoxyCodeLine{1759 \}}

\end{DoxyCode}


References code, v8\+::internal\+::\+Isolate\+::counters(), current\+\_\+gc\+\_\+info\+\_\+, v8\+::internal\+::\+Isolate\+::id(), mutex\+\_\+, Potentially\+Finish\+Current\+GC(), Remove\+Isolate\+From\+Current\+GC(), TRACE\+\_\+\+CODE\+\_\+\+GC, and TRACE\+\_\+\+EVENT0.



Referenced by Report\+Live\+Code\+From\+Stack\+For\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!ReportLiveCodeFromStackForGC@{ReportLiveCodeFromStackForGC}}
\index{ReportLiveCodeFromStackForGC@{ReportLiveCodeFromStackForGC}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{ReportLiveCodeFromStackForGC()}{ReportLiveCodeFromStackForGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Report\+Live\+Code\+From\+Stack\+For\+GC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1787 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1787                                                               \{}
\DoxyCodeLine{1788   wasm::WasmCodeRefScope code\_ref\_scope;}
\DoxyCodeLine{1789   std::unordered\_set<wasm::WasmCode*> live\_wasm\_code;}
\DoxyCodeLine{1790 }
\DoxyCodeLine{1791   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} std::unique\_ptr<StackMemory>\& \mbox{\hyperlink{namespacev8_1_1internal_a2e748ee13f84c923e077d341045b1212}{stack}} : isolate-\/>wasm\_stacks()) \{}
\DoxyCodeLine{1792     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a2e748ee13f84c923e077d341045b1212}{stack}}-\/>IsActive()) \{}
\DoxyCodeLine{1793       \textcolor{comment}{// The active stack's jump buffer does not match the current state, use}}
\DoxyCodeLine{1794       \textcolor{comment}{// the thread info below instead.}}
\DoxyCodeLine{1795       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1796     \}}
\DoxyCodeLine{1797     \textcolor{keywordflow}{for} (StackFrameIterator it(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a2e748ee13f84c923e077d341045b1212}{stack}}.get()); !it.done();}
\DoxyCodeLine{1798          it.Advance()) \{}
\DoxyCodeLine{1799       StackFrame* \textcolor{keyword}{const} frame = it.frame();}
\DoxyCodeLine{1800       \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9}{ReportLiveCodeFromFrameForGC}}(isolate, frame, live\_wasm\_code);}
\DoxyCodeLine{1801     \}}
\DoxyCodeLine{1802   \}}
\DoxyCodeLine{1803 }
\DoxyCodeLine{1804   \textcolor{keywordflow}{for} (StackFrameIterator it(isolate, isolate-\/>thread\_local\_top(),}
\DoxyCodeLine{1805                              StackFrameIterator::FirstStackOnly\{\});}
\DoxyCodeLine{1806        !it.done(); it.Advance()) \{}
\DoxyCodeLine{1807     StackFrame* \textcolor{keyword}{const} frame = it.frame();}
\DoxyCodeLine{1808     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9}{ReportLiveCodeFromFrameForGC}}(isolate, frame, live\_wasm\_code);}
\DoxyCodeLine{1809   \}}
\DoxyCodeLine{1810 }
\DoxyCodeLine{1811   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0}{CheckNoArchivedThreads}}(isolate);}
\DoxyCodeLine{1812 }
\DoxyCodeLine{1813   \textcolor{comment}{// Flush the code lookup cache, since it may refer to some code we}}
\DoxyCodeLine{1814   \textcolor{comment}{// are going to release.}}
\DoxyCodeLine{1815   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_aa5c5ecc61ab174d77400fa3082e73537}{FlushCodeLookupCache}}(isolate);}
\DoxyCodeLine{1816 }
\DoxyCodeLine{1817   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a7322f883d6ce700b7a38c40727a78787}{ReportLiveCodeForGC}}(isolate, live\_wasm\_code);}
\DoxyCodeLine{1818 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::\+Check\+No\+Archived\+Threads(), v8\+::internal\+::\+Stack\+Frame\+Iterator\+Base\+::done(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Flush\+Code\+Lookup\+Cache(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), Report\+Live\+Code\+For\+GC(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::\+Report\+Live\+Code\+From\+Frame\+For\+GC(), v8\+::internal\+::stack, and v8\+::internal\+::\+Isolate\+::thread\+\_\+local\+\_\+top().



Referenced by v8\+::internal\+::\+Stack\+Guard\+::\+Handle\+Interrupts(), and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::\+Wasm\+GCForeground\+Task\+::\+Run\+Internal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a43921e4c5d6e746d3a75996e28361521_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6af21252e29d47e802fb0fb84a6739ad}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6af21252e29d47e802fb0fb84a6739ad}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!SampleTopTierCodeSizeInAllIsolates@{SampleTopTierCodeSizeInAllIsolates}}
\index{SampleTopTierCodeSizeInAllIsolates@{SampleTopTierCodeSizeInAllIsolates}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{SampleTopTierCodeSizeInAllIsolates()}{SampleTopTierCodeSizeInAllIsolates()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Sample\+Top\+Tier\+Code\+Size\+In\+All\+Isolates (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ \&}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!set\_had\_nondeterminism@{set\_had\_nondeterminism}}
\index{set\_had\_nondeterminism@{set\_had\_nondeterminism}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{set\_had\_nondeterminism()}{set\_had\_nondeterminism()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::set\+\_\+had\+\_\+nondeterminism (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 431 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{431                                        \{}
\DoxyCodeLine{432     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}{had\_nondeterminism\_}}.store(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{433   \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Grow().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a97fb0af7b57585ca92456077115b16a7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!StartStreamingCompilation@{StartStreamingCompilation}}
\index{StartStreamingCompilation@{StartStreamingCompilation}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{StartStreamingCompilation()}{StartStreamingCompilation()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1StreamingDecoder}{Streaming\+Decoder}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Start\+Streaming\+Compilation (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$}]{context,  }\item[{const char $\ast$}]{api\+\_\+method\+\_\+name,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompilationResultResolver}{Compilation\+Result\+Resolver}} $>$}]{resolver }\end{DoxyParamCaption})}



Definition at line 852 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{856                                                        \{}
\DoxyCodeLine{857   \textcolor{keywordtype}{int} compilation\_id = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}{next\_compilation\_id\_}}.fetch\_add(1);}
\DoxyCodeLine{858   \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.StartStreamingCompilation"{}}, \textcolor{stringliteral}{"{}id"{}},}
\DoxyCodeLine{859                compilation\_id);}
\DoxyCodeLine{860   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_async\_compilation) \{}
\DoxyCodeLine{861     AsyncCompileJob* job = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8d959cfc3867745d04ace1ec94bb5209}{CreateAsyncCompileJob}}(}
\DoxyCodeLine{862         isolate, enabled, std::move(compile\_imports), \{\}, context,}
\DoxyCodeLine{863         api\_method\_name, std::move(resolver), compilation\_id);}
\DoxyCodeLine{864     \textcolor{keywordflow}{return} job-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob_a5323277e186f3ae7566581ed5e08e518}{CreateStreamingDecoder}}();}
\DoxyCodeLine{865   \}}
\DoxyCodeLine{866   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1StreamingDecoder_a0c65cb3ee4998f270c5582fb588c582a}{StreamingDecoder::CreateSyncStreamingDecoder}}(}
\DoxyCodeLine{867       isolate, enabled, std::move(compile\_imports), context, api\_method\_name,}
\DoxyCodeLine{868       std::move(resolver));}
\DoxyCodeLine{869 \}}

\end{DoxyCode}


References Create\+Async\+Compile\+Job(), v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Create\+Streaming\+Decoder(), v8\+::internal\+::wasm\+::\+Streaming\+Decoder\+::\+Create\+Sync\+Streaming\+Decoder(), next\+\_\+compilation\+\_\+id\+\_\+, TRACE\+\_\+\+EVENT1, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Async\+Compile().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aeea968c225f6306c9b4e49d693ac436b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!StreamingCompilationFailed@{StreamingCompilationFailed}}
\index{StreamingCompilationFailed@{StreamingCompilationFailed}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{StreamingCompilationFailed()}{StreamingCompilationFailed()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Streaming\+Compilation\+Failed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{prefix\+\_\+hash,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}} \&}]{compile\+\_\+imports }\end{DoxyParamCaption})}



Definition at line 1686 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1687                                                                    \{}
\DoxyCodeLine{1688   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_a1f7bcde52e841f9779bf3ba25527bdfa}{StreamingCompilationFailed}}(prefix\_hash, compile\_imports);}
\DoxyCodeLine{1689 \}}

\end{DoxyCode}


References native\+\_\+module\+\_\+cache\+\_\+, and v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::\+Streaming\+Compilation\+Failed().



Referenced by v8\+::internal\+::wasm\+::\+Async\+Streaming\+Processor\+::\+On\+Abort(), and v8\+::internal\+::wasm\+::\+Async\+Streaming\+Processor\+::\+On\+Finished\+Stream().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a9df42171758a2a5af30388a2b7e97de8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!SyncCompile@{SyncCompile}}
\index{SyncCompile@{SyncCompile}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{SyncCompile()}{SyncCompile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Sync\+Compile (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$}]{thrower,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$}]{bytes }\end{DoxyParamCaption})}



Definition at line 669 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{672                                           \{}
\DoxyCodeLine{673   \textcolor{keywordtype}{int} compilation\_id = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}{next\_compilation\_id\_}}.fetch\_add(1);}
\DoxyCodeLine{674   \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.SyncCompile"{}}, \textcolor{stringliteral}{"{}id"{}}, compilation\_id);}
\DoxyCodeLine{675   \mbox{\hyperlink{classv8_1_1metrics_1_1Recorder_1_1ContextId}{v8::metrics::Recorder::ContextId}} context\_id =}
\DoxyCodeLine{676       isolate-\/>GetOrRegisterRecorderContextId(isolate-\/>native\_context());}
\DoxyCodeLine{677   std::shared\_ptr<WasmModule> module;}
\DoxyCodeLine{678   WasmDetectedFeatures detected\_features;}
\DoxyCodeLine{679   \{}
\DoxyCodeLine{680     \textcolor{comment}{// Normally modules are validated in \{CompileToNativeModule\} but in jitless}}
\DoxyCodeLine{681     \textcolor{comment}{// mode the only opportunity of validatiom is during decoding.}}
\DoxyCodeLine{682     \textcolor{keywordtype}{bool} validate\_module = \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_jitless;}
\DoxyCodeLine{683     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a24a40a897766a19d97d04ef9c02ea315}{ModuleResult}} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a83ed1297167cba9f8c8971bacab69dbf}{DecodeWasmModule}}(}
\DoxyCodeLine{684         enabled\_features, bytes.as\_vector(), validate\_module, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0}{kWasmOrigin}},}
\DoxyCodeLine{685         isolate-\/>counters(), isolate-\/>metrics\_recorder(), context\_id,}
\DoxyCodeLine{686         \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c}{DecodingMethod::kSync}}, \&detected\_features);}
\DoxyCodeLine{687     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.failed()) \{}
\DoxyCodeLine{688       thrower-\/>CompileFailed(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.error());}
\DoxyCodeLine{689       \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{690     \}}
\DoxyCodeLine{691     module = std::move(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}).value();}
\DoxyCodeLine{692     \textcolor{keywordflow}{if} (WasmError error =}
\DoxyCodeLine{693             \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a97644489c4ab86ae3156930153cd1b5e}{ValidateAndSetBuiltinImports}}(module.get(), bytes.as\_vector(),}
\DoxyCodeLine{694                                          compile\_imports, \&detected\_features)) \{}
\DoxyCodeLine{695       thrower-\/>CompileError(\textcolor{stringliteral}{"{}\%s @+\%u"{}}, error.message().c\_str(), error.offset());}
\DoxyCodeLine{696       \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{697     \}}
\DoxyCodeLine{698   \}}
\DoxyCodeLine{699 }
\DoxyCodeLine{700   \textcolor{comment}{// If experimental PGO via files is enabled, load profile information now.}}
\DoxyCodeLine{701   std::unique\_ptr<ProfileInformation> pgo\_info;}
\DoxyCodeLine{702   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.experimental\_wasm\_pgo\_from\_file)) \{}
\DoxyCodeLine{703     pgo\_info = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aca357743e710fa56c5fabec8b006584e}{LoadProfileFromFile}}(module.get(), bytes.as\_vector());}
\DoxyCodeLine{704   \}}
\DoxyCodeLine{705 }
\DoxyCodeLine{706   \textcolor{comment}{// Transfer ownership of the WasmModule to the \{Managed<WasmModule>\} generated}}
\DoxyCodeLine{707   \textcolor{comment}{// in \{CompileToNativeModule\}.}}
\DoxyCodeLine{708   std::shared\_ptr<NativeModule> native\_module = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a967972baab540f22d49f12d2fae66b46}{CompileToNativeModule}}(}
\DoxyCodeLine{709       isolate, enabled\_features, detected\_features, std::move(compile\_imports),}
\DoxyCodeLine{710       thrower, std::move(module), std::move(bytes), compilation\_id, context\_id,}
\DoxyCodeLine{711       pgo\_info.get());}
\DoxyCodeLine{712   \textcolor{keywordflow}{if} (!native\_module) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{713 }
\DoxyCodeLine{714 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{715   \textcolor{comment}{// Ensure that code GC will check this isolate for live code.}}
\DoxyCodeLine{716   \{}
\DoxyCodeLine{717     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{718     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{719     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>native\_modules.count(native\_module.get()));}
\DoxyCodeLine{720     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module.get()));}
\DoxyCodeLine{721     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module.get()]-\/>isolates.count(isolate));}
\DoxyCodeLine{722   \}}
\DoxyCodeLine{723 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{724 }
\DoxyCodeLine{725   constexpr base::Vector<const char> kNoSourceUrl;}
\DoxyCodeLine{726   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} =}
\DoxyCodeLine{727       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a88e0184f058142bc46a5b93f2f8061b3}{GetOrCreateScript}}(isolate, native\_module, kNoSourceUrl);}
\DoxyCodeLine{728 }
\DoxyCodeLine{729   native\_module-\/>LogWasmCodes(isolate, *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{730 }
\DoxyCodeLine{731   \textcolor{comment}{// Create the compiled module object and populate with compiled functions}}
\DoxyCodeLine{732   \textcolor{comment}{// and information needed at instantiation time. This object needs to be}}
\DoxyCodeLine{733   \textcolor{comment}{// serializable. Instantiation may occur off a deserialized version of this}}
\DoxyCodeLine{734   \textcolor{comment}{// object.}}
\DoxyCodeLine{735   DirectHandle<WasmModuleObject> module\_object =}
\DoxyCodeLine{736       \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject_a420d36fa31fab80f7dd6cf6bce2438c8}{WasmModuleObject::New}}(isolate, std::move(native\_module), \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{737 }
\DoxyCodeLine{738   \textcolor{comment}{// Finish the Wasm script now and make it public to the debugger.}}
\DoxyCodeLine{739   isolate-\/>debug()-\/>OnAfterCompile(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{740   \textcolor{keywordflow}{return} module\_object;}
\DoxyCodeLine{741 \}}

\end{DoxyCode}


References v8\+::base\+::\+Owned\+Vector$<$ T $>$\+::as\+\_\+vector(), v8\+::internal\+::wasm\+::\+Error\+Thrower\+::\+Compile\+Failed(), v8\+::internal\+::wasm\+::\+Compile\+To\+Native\+Module(), v8\+::internal\+::\+Isolate\+::counters(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Isolate\+::debug(), v8\+::internal\+::wasm\+::\+Decode\+Wasm\+Module(), Get\+Or\+Create\+Script(), v8\+::internal\+::\+Isolate\+::\+Get\+Or\+Register\+Recorder\+Context\+Id(), isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Sync, v8\+::internal\+::wasm\+::k\+Wasm\+Origin, v8\+::internal\+::wasm\+::\+Load\+Profile\+From\+File(), v8\+::internal\+::\+Isolate\+::metrics\+\_\+recorder(), mutex\+\_\+, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), native\+\_\+modules\+\_\+, v8\+::internal\+::\+Wasm\+Module\+Object\+::\+New(), next\+\_\+compilation\+\_\+id\+\_\+, v8\+::internal\+::\+Debug\+::\+On\+After\+Compile(), v8\+::base\+::internal\+::result, v8\+::internal\+::script, TRACE\+\_\+\+EVENT1, v8\+::internal\+::v8\+\_\+flags, V8\+\_\+\+UNLIKELY, and v8\+::internal\+::wasm\+::\+Validate\+And\+Set\+Builtin\+Imports().



Referenced by Async\+Compile(), v8\+::\+Wasm\+Module\+Object\+::\+Compile(), v8\+::internal\+::\+Create\+Wasm\+Object(), v8\+::internal\+::wasm\+::\+Sync\+Streaming\+Decoder\+::\+Finish(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Module\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a3f2610a2d8fa2c20a8569e4cb665d194_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!SyncCompileTranslatedAsmJs@{SyncCompileTranslatedAsmJs}}
\index{SyncCompileTranslatedAsmJs@{SyncCompileTranslatedAsmJs}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{SyncCompileTranslatedAsmJs()}{SyncCompileTranslatedAsmJs()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1AsmWasmData}{Asm\+Wasm\+Data}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Sync\+Compile\+Translated\+Asm\+Js (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$}]{thrower,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ const uint8\+\_\+t $>$}]{bytes,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$}]{script,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{asm\+\_\+js\+\_\+offset\+\_\+table\+\_\+bytes,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapNumber}{Heap\+Number}} $>$}]{uses\+\_\+bitset,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_aff2483f817f329c2b4c7c1d7149f858b}{Language\+Mode}}}]{language\+\_\+mode }\end{DoxyParamCaption})}



Definition at line 603 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{607                                                                       \{}
\DoxyCodeLine{608   \textcolor{keywordtype}{int} compilation\_id = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}{next\_compilation\_id\_}}.fetch\_add(1);}
\DoxyCodeLine{609   \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.SyncCompileTranslatedAsmJs"{}}, \textcolor{stringliteral}{"{}id"{}},}
\DoxyCodeLine{610                compilation\_id);}
\DoxyCodeLine{611   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80}{ModuleOrigin}} origin = language\_mode == \mbox{\hyperlink{namespacev8_1_1internal_aff2483f817f329c2b4c7c1d7149f858bafdfcb8a8ae5de069f4a41bedfe7892a4}{LanguageMode::kSloppy}}}
\DoxyCodeLine{612                             ? \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80ac6ac6a1c1201497a2ae73086bbc12902}{kAsmJsSloppyOrigin}}}
\DoxyCodeLine{613                             : \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80a4fc50005a65ea45b8fc5bc0fd990d63a}{kAsmJsStrictOrigin}};}
\DoxyCodeLine{614   \textcolor{comment}{// TODO(leszeks): If we want asm.js in UKM, we should figure out a way to pass}}
\DoxyCodeLine{615   \textcolor{comment}{// the context id in here.}}
\DoxyCodeLine{616   \mbox{\hyperlink{classv8_1_1metrics_1_1Recorder_1_1ContextId}{v8::metrics::Recorder::ContextId}} context\_id =}
\DoxyCodeLine{617       \mbox{\hyperlink{classv8_1_1metrics_1_1Recorder_1_1ContextId_a6504aab67861da09dc170cb1f5ec88b6}{v8::metrics::Recorder::ContextId::Empty}}();}
\DoxyCodeLine{618   WasmDetectedFeatures detected\_features;}
\DoxyCodeLine{619   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a24a40a897766a19d97d04ef9c02ea315}{ModuleResult}} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a83ed1297167cba9f8c8971bacab69dbf}{DecodeWasmModule}}(}
\DoxyCodeLine{620       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures_a8d8095ed772f16383b10d3abf6b8903c}{WasmEnabledFeatures::ForAsmjs}}(), bytes.as\_vector(), \textcolor{keyword}{false}, origin,}
\DoxyCodeLine{621       isolate-\/>counters(), isolate-\/>metrics\_recorder(), context\_id,}
\DoxyCodeLine{622       \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c}{DecodingMethod::kSync}}, \&detected\_features);}
\DoxyCodeLine{623   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.failed()) \{}
\DoxyCodeLine{624     \textcolor{comment}{// This happens once in a while when we have missed some limit check}}
\DoxyCodeLine{625     \textcolor{comment}{// in the asm parser. Output an error message to help diagnose, but crash.}}
\DoxyCodeLine{626     std::cout << \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.error().message();}
\DoxyCodeLine{627     \mbox{\hyperlink{namespacev8_1_1internal_acdec713c25068019f935e35976f5b666}{UNREACHABLE}}();}
\DoxyCodeLine{628   \}}
\DoxyCodeLine{629 }
\DoxyCodeLine{630   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.value()-\/>asm\_js\_offset\_information =}
\DoxyCodeLine{631       std::make\_unique<AsmJsOffsetInformation>(asm\_js\_offset\_table\_bytes);}
\DoxyCodeLine{632 }
\DoxyCodeLine{633   \textcolor{comment}{// Transfer ownership of the WasmModule to the \{Managed<WasmModule>\} generated}}
\DoxyCodeLine{634   \textcolor{comment}{// in \{CompileToNativeModule\}.}}
\DoxyCodeLine{635   constexpr ProfileInformation* kNoProfileInformation = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{636   std::shared\_ptr<NativeModule> native\_module = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a967972baab540f22d49f12d2fae66b46}{CompileToNativeModule}}(}
\DoxyCodeLine{637       isolate, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures_a8d8095ed772f16383b10d3abf6b8903c}{WasmEnabledFeatures::ForAsmjs}}(), detected\_features,}
\DoxyCodeLine{638       CompileTimeImports\{\}, thrower, std::move(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}).value(),}
\DoxyCodeLine{639       std::move(bytes), compilation\_id, context\_id, kNoProfileInformation);}
\DoxyCodeLine{640   \textcolor{keywordflow}{if} (!native\_module) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{641 }
\DoxyCodeLine{642   native\_module-\/>LogWasmCodes(isolate, *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{643   \{}
\DoxyCodeLine{644     \textcolor{comment}{// Register the script with the isolate. We do this unconditionally for}}
\DoxyCodeLine{645     \textcolor{comment}{// consistency; it is in particular required for logging lazy-\/compiled code.}}
\DoxyCodeLine{646     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{647     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{648     \textcolor{keyword}{auto}\& scripts = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>scripts;}
\DoxyCodeLine{649     \textcolor{comment}{// If the same asm.js module is instantiated repeatedly, then we}}
\DoxyCodeLine{650     \textcolor{comment}{// deduplicate the NativeModule, so the script exists already.}}
\DoxyCodeLine{651     \textcolor{keywordflow}{if} (scripts.count(native\_module.get()) == 0) \{}
\DoxyCodeLine{652       scripts.emplace(native\_module.get(), WeakScriptHandle(\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, isolate));}
\DoxyCodeLine{653     \}}
\DoxyCodeLine{654   \}}
\DoxyCodeLine{655 }
\DoxyCodeLine{656   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1AsmWasmData_acc0ab9f86a21e107f090ac2725be47ce}{AsmWasmData::New}}(isolate, std::move(native\_module), uses\_bitset);}
\DoxyCodeLine{657 \}}

\end{DoxyCode}


References v8\+::base\+::\+Owned\+Vector$<$ T $>$\+::as\+\_\+vector(), v8\+::internal\+::wasm\+::\+Compile\+To\+Native\+Module(), v8\+::internal\+::\+Isolate\+::counters(), DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Decode\+Wasm\+Module(), v8\+::metrics\+::\+Recorder\+::\+Context\+Id\+::\+Empty(), v8\+::internal\+::wasm\+::\+Wasm\+Enabled\+Features\+::\+For\+Asmjs(), isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Asm\+Js\+Sloppy\+Origin, v8\+::internal\+::wasm\+::k\+Asm\+Js\+Strict\+Origin, v8\+::internal\+::k\+Sloppy, v8\+::internal\+::wasm\+::k\+Sync, v8\+::internal\+::\+Isolate\+::metrics\+\_\+recorder(), mutex\+\_\+, v8\+::internal\+::\+Asm\+Wasm\+Data\+::\+New(), next\+\_\+compilation\+\_\+id\+\_\+, v8\+::base\+::internal\+::result, v8\+::internal\+::script, TRACE\+\_\+\+EVENT1, and v8\+::internal\+::\+UNREACHABLE().



Referenced by v8\+::internal\+::\+Asm\+Js\+Compilation\+Job\+::\+Finalize\+Job\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_acb16551c0447fba6c603b839a75ba21d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!SyncInstantiate@{SyncInstantiate}}
\index{SyncInstantiate@{SyncInstantiate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{SyncInstantiate()}{SyncInstantiate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmInstanceObject}{Wasm\+Instance\+Object}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Sync\+Instantiate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1ErrorThrower}{Error\+Thrower}} $\ast$}]{thrower,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$}]{module\+\_\+object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{imports,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{memory }\end{DoxyParamCaption})}



Definition at line 743 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{747                                              \{}
\DoxyCodeLine{748   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.SyncInstantiate"{}});}
\DoxyCodeLine{749   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a77c18a9b2eea67b5275dae58c7a9efa1}{InstantiateToInstanceObject}}(isolate, thrower, module\_object, imports,}
\DoxyCodeLine{750                                      memory);}
\DoxyCodeLine{751 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Instantiate\+To\+Instance\+Object(), and TRACE\+\_\+\+EVENT0.



Referenced by Async\+Instantiate(), and v8\+::internal\+::\+Create\+Wasm\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_af0771f813d154e4af40da6689bbd5e50_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!SyncValidate@{SyncValidate}}
\index{SyncValidate@{SyncValidate}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{SyncValidate()}{SyncValidate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Sync\+Validate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures}{Wasm\+Enabled\+Features}}}]{enabled,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CompileTimeImports}{Compile\+Time\+Imports}}}]{compile\+\_\+imports,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{bytes }\end{DoxyParamCaption})}



Definition at line 585 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{587                                                                \{}
\DoxyCodeLine{588   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\textcolor{stringliteral}{"{}v8.wasm"{}}, \textcolor{stringliteral}{"{}wasm.SyncValidate"{}});}
\DoxyCodeLine{589   \textcolor{keywordflow}{if} (bytes.empty()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{590 }
\DoxyCodeLine{591   WasmDetectedFeatures unused\_detected\_features;}
\DoxyCodeLine{592   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a83ed1297167cba9f8c8971bacab69dbf}{DecodeWasmModule}}(}
\DoxyCodeLine{593       enabled, bytes, \textcolor{keyword}{true}, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0}{kWasmOrigin}}, isolate-\/>counters(),}
\DoxyCodeLine{594       isolate-\/>metrics\_recorder(),}
\DoxyCodeLine{595       isolate-\/>GetOrRegisterRecorderContextId(isolate-\/>native\_context()),}
\DoxyCodeLine{596       \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a690faef021ab529c2506ff4cc19f23d3ae3bade32f12a5139b27ef40b3689b77c}{DecodingMethod::kSync}}, \&unused\_detected\_features);}
\DoxyCodeLine{597   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.failed()) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{598   WasmError error = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a97644489c4ab86ae3156930153cd1b5e}{ValidateAndSetBuiltinImports}}(}
\DoxyCodeLine{599       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.value().get(), bytes, compile\_imports, \&unused\_detected\_features);}
\DoxyCodeLine{600   \textcolor{keywordflow}{return} !error.has\_error();}
\DoxyCodeLine{601 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::counters(), v8\+::internal\+::wasm\+::\+Decode\+Wasm\+Module(), v8\+::base\+::\+Vector$<$ T $>$\+::empty(), v8\+::internal\+::\+Isolate\+::\+Get\+Or\+Register\+Recorder\+Context\+Id(), v8\+::internal\+::wasm\+::\+Wasm\+Error\+::has\+\_\+error(), v8\+::internal\+::wasm\+::k\+Sync, v8\+::internal\+::wasm\+::k\+Wasm\+Origin, v8\+::internal\+::\+Isolate\+::metrics\+\_\+recorder(), v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::base\+::internal\+::result, TRACE\+\_\+\+EVENT0, and v8\+::internal\+::wasm\+::\+Validate\+And\+Set\+Builtin\+Imports().



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Validate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aad8e9ffbc98ee56a23ee1e76a115b34f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!TriggerCodeGC\_Locked@{TriggerCodeGC\_Locked}}
\index{TriggerCodeGC\_Locked@{TriggerCodeGC\_Locked}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{TriggerCodeGC\_Locked()}{TriggerCodeGC\_Locked()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Trigger\+Code\+GC\+\_\+\+Locked (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{dead\+\_\+code\+\_\+limit }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1839 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1839                                                             \{}
\DoxyCodeLine{1840   \textcolor{keywordtype}{bool} inc\_gc\_count =}
\DoxyCodeLine{1841       num\_code\_gcs\_triggered\_ < std::numeric\_limits<int8\_t>::max();}
\DoxyCodeLine{1842   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}} == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{1843     \textcolor{keywordflow}{if} (inc\_gc\_count) ++\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}{num\_code\_gcs\_triggered\_}};}
\DoxyCodeLine{1844     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(}
\DoxyCodeLine{1845         \textcolor{stringliteral}{"{}Triggering GC (potentially dead: \%zu bytes; limit: \%zu bytes).\(\backslash\)n"{}},}
\DoxyCodeLine{1846         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}}, dead\_code\_limit);}
\DoxyCodeLine{1847     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea}{TriggerGC}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}{num\_code\_gcs\_triggered\_}});}
\DoxyCodeLine{1848   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>next\_gc\_sequence\_index == 0) \{}
\DoxyCodeLine{1849     \textcolor{keywordflow}{if} (inc\_gc\_count) ++\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}{num\_code\_gcs\_triggered\_}};}
\DoxyCodeLine{1850     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(}
\DoxyCodeLine{1851         \textcolor{stringliteral}{"{}Scheduling another GC after the current one (potentially dead: "{}}}
\DoxyCodeLine{1852         \textcolor{stringliteral}{"{}\%zu bytes; limit: \%zu bytes).\(\backslash\)n"{}},}
\DoxyCodeLine{1853         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}}, dead\_code\_limit);}
\DoxyCodeLine{1854     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>next\_gc\_sequence\_index = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}{num\_code\_gcs\_triggered\_}};}
\DoxyCodeLine{1855     \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(0, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>next\_gc\_sequence\_index);}
\DoxyCodeLine{1856   \}}
\DoxyCodeLine{1857 \}}

\end{DoxyCode}


References current\+\_\+gc\+\_\+info\+\_\+, DCHECK\+\_\+\+NE, new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+, num\+\_\+code\+\_\+gcs\+\_\+triggered\+\_\+, TRACE\+\_\+\+CODE\+\_\+\+GC, and Trigger\+GC().



Referenced by Add\+Potentially\+Dead\+Code(), and Trigger\+Code\+GCFor\+Testing().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!TriggerCodeGCForTesting@{TriggerCodeGCForTesting}}
\index{TriggerCodeGCForTesting@{TriggerCodeGCForTesting}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{TriggerCodeGCForTesting()}{TriggerCodeGCForTesting()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Trigger\+Code\+GCFor\+Testing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1859 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1859                                          \{}
\DoxyCodeLine{1860   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_code\_gc) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1861   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1862   \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}Wasm Code GC explicitly requested for testing:\(\backslash\)n"{}});}
\DoxyCodeLine{1863   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}} == 0) \{}
\DoxyCodeLine{1864     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}.empty());}
\DoxyCodeLine{1865     \textcolor{comment}{// Let's not waste a GC sequence index when there is no code to free.}}
\DoxyCodeLine{1866     \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(\textcolor{stringliteral}{"{}But there is nothing to do.\(\backslash\)n"{}});}
\DoxyCodeLine{1867     \textcolor{keywordflow}{return};}
\DoxyCodeLine{1868   \}}
\DoxyCodeLine{1869   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_aae7d7fff282f6e414ed462f4d7b0c8a0}{TriggerCodeGC\_Locked}}(0);}
\DoxyCodeLine{1870 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), mutex\+\_\+, new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, TRACE\+\_\+\+CODE\+\_\+\+GC, Trigger\+Code\+GC\+\_\+\+Locked(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a33a5d3973fe4bb4cdbe9d00c815d2d94_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!TriggerGC@{TriggerGC}}
\index{TriggerGC@{TriggerGC}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{TriggerGC()}{TriggerGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Trigger\+GC (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{gc\+\_\+sequence\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1930 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1930                                                    \{}
\DoxyCodeLine{1931   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{1932   \mbox{\hyperlink{src_2base_2logging_8h_a2209830df6b59d1ec1fdf66b9352924f}{DCHECK\_NULL}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}});}
\DoxyCodeLine{1933   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_code\_gc);}
\DoxyCodeLine{1934   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}{new\_potentially\_dead\_code\_size\_}} = 0;}
\DoxyCodeLine{1935   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}.reset(\textcolor{keyword}{new} CurrentGCInfo(gc\_sequence\_index));}
\DoxyCodeLine{1936   \textcolor{comment}{// Add all potentially dead code to this GC, and trigger a GC task in each}}
\DoxyCodeLine{1937   \textcolor{comment}{// known isolate. We can't limit the isolates to those that contributed}}
\DoxyCodeLine{1938   \textcolor{comment}{// potentially-\/dead WasmCode objects, because wrappers don't point back}}
\DoxyCodeLine{1939   \textcolor{comment}{// at a NativeModule or Isolate.}}
\DoxyCodeLine{1940   \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}{potentially\_dead\_code\_}}) \{}
\DoxyCodeLine{1941     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.insert(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1942   \}}
\DoxyCodeLine{1943   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& entry : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}) \{}
\DoxyCodeLine{1944     Isolate* isolate = entry.first;}
\DoxyCodeLine{1945     \textcolor{keyword}{auto}\& gc\_task = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates[isolate];}
\DoxyCodeLine{1946     \textcolor{keywordflow}{if} (!gc\_task) \{}
\DoxyCodeLine{1947       \textcolor{keyword}{auto} new\_task = std::make\_unique<WasmGCForegroundTask>(isolate);}
\DoxyCodeLine{1948       gc\_task = new\_task.get();}
\DoxyCodeLine{1949       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1950       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate]-\/>foreground\_task\_runner-\/>PostTask(std::move(new\_task));}
\DoxyCodeLine{1951     \}}
\DoxyCodeLine{1952     isolate-\/>stack\_guard()-\/>RequestWasmCodeGC();}
\DoxyCodeLine{1953   \}}
\DoxyCodeLine{1954   \mbox{\hyperlink{wasm-engine_8cc_aa11964a2fa0e69c324c74f7361b77a37}{TRACE\_CODE\_GC}}(}
\DoxyCodeLine{1955       \textcolor{stringliteral}{"{}Starting GC (nr \%d). Number of potentially dead code objects: \%zu\(\backslash\)n"{}},}
\DoxyCodeLine{1956       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>gc\_sequence\_index, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>dead\_code.size());}
\DoxyCodeLine{1957   \textcolor{comment}{// Ensure that there are outstanding isolates that will eventually finish this}}
\DoxyCodeLine{1958   \textcolor{comment}{// GC. If there are no outstanding isolates, we finish the GC immediately.}}
\DoxyCodeLine{1959   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a560f639666a3676d954d73ef3324b99e}{PotentiallyFinishCurrentGC}}();}
\DoxyCodeLine{1960   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}} == \textcolor{keyword}{nullptr} ||}
\DoxyCodeLine{1961          !\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}{current\_gc\_info\_}}-\/>outstanding\_isolates.empty());}
\DoxyCodeLine{1962 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), code, current\+\_\+gc\+\_\+info\+\_\+, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NULL, isolates\+\_\+, mutex\+\_\+, new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+, potentially\+\_\+dead\+\_\+code\+\_\+, Potentially\+Finish\+Current\+GC(), v8\+::internal\+::\+Isolate\+::stack\+\_\+guard(), TRACE\+\_\+\+CODE\+\_\+\+GC, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Potentially\+Finish\+Current\+GC(), and Trigger\+Code\+GC\+\_\+\+Locked().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_aef409600fd7f21493340e1b9372247ea_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a82694f241e35d38f8f882c255e49e743}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a82694f241e35d38f8f882c255e49e743}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!type\_canonicalizer@{type\_canonicalizer}}
\index{type\_canonicalizer@{type\_canonicalizer}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{type\_canonicalizer()}{type\_canonicalizer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer}{Type\+Canonicalizer}}$\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::type\+\_\+canonicalizer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 392 of file wasm-\/engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{392 \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_afd72ebd08e53260ccaf49d8c2ab00353}{type\_canonicalizer\_}}; \}}

\end{DoxyCode}


Referenced by v8\+::internal\+::\+Wasm\+JSFunction\+Data\+::\+Get\+Signature(), v8\+::internal\+::wasm\+::\+Get\+Type\+Canonicalizer(), v8\+::internal\+::wasm\+::\+JSTo\+Wasm\+Object(), v8\+::internal\+::\+Wasm\+Table\+Object\+::\+Update\+Dispatch\+Table(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Web\+Assembly\+Tag\+Impl().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_a82694f241e35d38f8f882c255e49e743_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!UpdateNativeModuleCache@{UpdateNativeModuleCache}}
\index{UpdateNativeModuleCache@{UpdateNativeModuleCache}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{UpdateNativeModuleCache()}{UpdateNativeModuleCache()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Update\+Native\+Module\+Cache (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{has\+\_\+error,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 1639 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1641                       \{}
\DoxyCodeLine{1642   \textcolor{comment}{// Keep the previous pointer, but as a `void*`, because we only want to use it}}
\DoxyCodeLine{1643   \textcolor{comment}{// later to compare pointers, and never need to dereference it.}}
\DoxyCodeLine{1644   \textcolor{keywordtype}{void}* prev = native\_module.get();}
\DoxyCodeLine{1645   native\_module =}
\DoxyCodeLine{1646       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}{native\_module\_cache\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache_ae0ec3986cfa081f17475ecfea81b6899}{Update}}(std::move(native\_module), has\_error);}
\DoxyCodeLine{1647   \textcolor{keywordflow}{if} (prev == native\_module.get()) \textcolor{keywordflow}{return} native\_module;}
\DoxyCodeLine{1648   \textcolor{keywordtype}{bool} remove\_all\_code = \textcolor{keyword}{false};}
\DoxyCodeLine{1649   \{}
\DoxyCodeLine{1650     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}{mutex\_}});}
\DoxyCodeLine{1651     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}.count(native\_module.get()));}
\DoxyCodeLine{1652     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}{native\_modules\_}}[native\_module.get()]-\/>isolates.insert(isolate);}
\DoxyCodeLine{1653     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(1, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}.count(isolate));}
\DoxyCodeLine{1654     \textcolor{keyword}{auto}* isolate\_data = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}{isolates\_}}[isolate].get();}
\DoxyCodeLine{1655     isolate\_data-\/>native\_modules.insert(native\_module.get());}
\DoxyCodeLine{1656     \textcolor{keywordflow}{if} (isolate\_data-\/>keep\_in\_debug\_state \&\& !native\_module-\/>IsInDebugState()) \{}
\DoxyCodeLine{1657       remove\_all\_code = \textcolor{keyword}{true};}
\DoxyCodeLine{1658       native\_module-\/>SetDebugState(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d}{kDebugging}});}
\DoxyCodeLine{1659     \}}
\DoxyCodeLine{1660     \textcolor{keywordflow}{if} (isolate\_data-\/>log\_codes \&\& !native\_module-\/>log\_code()) \{}
\DoxyCodeLine{1661       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmEngine_a75b254189555e5f2910b7759e78cb241}{EnableCodeLogging}}(native\_module.get());}
\DoxyCodeLine{1662     \}}
\DoxyCodeLine{1663   \}}
\DoxyCodeLine{1664   \textcolor{keywordflow}{if} (remove\_all\_code) \{}
\DoxyCodeLine{1665     WasmCodeRefScope ref\_scope;}
\DoxyCodeLine{1666     native\_module-\/>RemoveCompiledCode(}
\DoxyCodeLine{1667         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd}{NativeModule::RemoveFilter::kRemoveNonDebugCode}});}
\DoxyCodeLine{1668   \}}
\DoxyCodeLine{1669   \textcolor{keywordflow}{return} native\_module;}
\DoxyCodeLine{1670 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, Enable\+Code\+Logging(), isolates\+\_\+, v8\+::internal\+::wasm\+::k\+Debugging, v8\+::internal\+::wasm\+::\+Native\+Module\+::k\+Remove\+Non\+Debug\+Code, mutex\+\_\+, native\+\_\+module\+\_\+cache\+\_\+, native\+\_\+modules\+\_\+, and v8\+::internal\+::wasm\+::\+Native\+Module\+Cache\+::\+Update().



Referenced by v8\+::internal\+::wasm\+::\+Async\+Compile\+Job\+::\+Compilation\+State\+Callback\+::call(), v8\+::internal\+::wasm\+::\+Deserialize\+Native\+Module(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Get\+Or\+Compile\+New\+Native\+Module(), and v8\+::internal\+::wasm\+::\+Async\+Streaming\+Processor\+::\+On\+Finished\+Stream().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmEngine_ae049eb40219a3e542bf2811e42ac1bb8_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5da025226f11c1a8371a2e1c24ca7663}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5da025226f11c1a8371a2e1c24ca7663}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!allocator\_@{allocator\_}}
\index{allocator\_@{allocator\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{allocator\_}{allocator\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1AccountingAllocator}{Accounting\+Allocator}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::allocator\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 481 of file wasm-\/engine.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_aa7983ea4754315852b25c620f17514c3}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!async\_compile\_jobs\_@{async\_compile\_jobs\_}}
\index{async\_compile\_jobs\_@{async\_compile\_jobs\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{async\_compile\_jobs\_}{async\_compile\_jobs\_}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}}$\ast$, std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1AsyncCompileJob}{Async\+Compile\+Job}}$>$ $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::async\+\_\+compile\+\_\+jobs\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 507 of file wasm-\/engine.\+h.



Referenced by Create\+Async\+Compile\+Job(), Delete\+Compile\+Jobs\+On\+Context(), Delete\+Compile\+Jobs\+On\+Isolate(), Estimate\+Current\+Memory\+Consumption(), Has\+Running\+Compile\+Job(), Remove\+Compile\+Job(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab160110a4540fe336bc9834d389c6bc6}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab160110a4540fe336bc9834d389c6bc6}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!call\_descriptors\_@{call\_descriptors\_}}
\index{call\_descriptors\_@{call\_descriptors\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{call\_descriptors\_}{call\_descriptors\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1compiler_1_1WasmCallDescriptors}{compiler\+::\+Wasm\+Call\+Descriptors}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::call\+\_\+descriptors\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 495 of file wasm-\/engine.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72dc8534fb90f00e826c647469d1b3aa}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!code\_tracer\_@{code\_tracer\_}}
\index{code\_tracer\_@{code\_tracer\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{code\_tracer\_}{code\_tracer\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1CodeTracer}{Code\+Tracer}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::code\+\_\+tracer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 510 of file wasm-\/engine.\+h.



Referenced by Get\+Code\+Tracer().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_abd8499b0e2af398339967dd5a3297f51}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!compilation\_stats\_@{compilation\_stats\_}}
\index{compilation\_stats\_@{compilation\_stats\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{compilation\_stats\_}{compilation\_stats\_}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1CompilationStatistics}{Compilation\+Statistics}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::compilation\+\_\+stats\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 509 of file wasm-\/engine.\+h.



Referenced by Dump\+And\+Reset\+Turbo\+Statistics(), Dump\+Turbo\+Statistics(), and Get\+Or\+Create\+Turbo\+Statistics().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a0c6a7d8752e24482268ece80b48ad6aa}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!current\_gc\_info\_@{current\_gc\_info\_}}
\index{current\_gc\_info\_@{current\_gc\_info\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{current\_gc\_info\_}{current\_gc\_info\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1CurrentGCInfo}{Current\+GCInfo}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::current\+\_\+gc\+\_\+info\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 538 of file wasm-\/engine.\+h.



Referenced by Estimate\+Current\+Memory\+Consumption(), Free\+Native\+Module(), Potentially\+Finish\+Current\+GC(), Remove\+Isolate(), Remove\+Isolate\+From\+Current\+GC(), Report\+Live\+Code\+For\+GC(), Trigger\+Code\+GC\+\_\+\+Locked(), and Trigger\+GC().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4dcca0bc03dc84027c94cdba6950a8bb}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4dcca0bc03dc84027c94cdba6950a8bb}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!deopts\_executed\_@{deopts\_executed\_}}
\index{deopts\_executed\_@{deopts\_executed\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{deopts\_executed\_}{deopts\_executed\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{classint}{int}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::deopts\+\_\+executed\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 491 of file wasm-\/engine.\+h.



Referenced by Get\+Deopts\+Executed\+Count(), and Increment\+Deopts\+Executed\+Count().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a70430985b66280d5790dcc810f5994ce}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!had\_nondeterminism\_@{had\_nondeterminism\_}}
\index{had\_nondeterminism\_@{had\_nondeterminism\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{had\_nondeterminism\_}{had\_nondeterminism\_}}
{\footnotesize\ttfamily std\+::atomic$<$ int32\+\_\+t $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::had\+\_\+nondeterminism\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 479 of file wasm-\/engine.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a72ad51773362d235f993a28091ee23e1}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!isolates\_@{isolates\_}}
\index{isolates\_@{isolates\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{isolates\_}{isolates\_}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}}$\ast$, std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1IsolateInfo}{Isolate\+Info}}$>$ $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::isolates\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 513 of file wasm-\/engine.\+h.



Referenced by Add\+Isolate(), Clear\+Weak\+Script\+Handle(), Delete\+Compile\+Jobs\+On\+Isolate(), Enable\+Code\+Logging(), Enter\+Debugging\+For\+Isolate(), Estimate\+Current\+Memory\+Consumption(), Free\+Native\+Module(), Get\+Or\+Create\+Script(), Has\+Running\+Compile\+Job(), Import\+Native\+Module(), Leave\+Debugging\+For\+Isolate(), Log\+Code(), Log\+Outstanding\+Codes\+For\+Isolate(), Log\+Wrapper\+Code(), Maybe\+Get\+Native\+Module(), New\+Native\+Module(), Remove\+Isolate(), Sync\+Compile(), Sync\+Compile\+Translated\+Asm\+Js(), Trigger\+GC(), Update\+Native\+Module\+Cache(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a6a372578a0d4f4dec77a0530fda00e4d}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!mutex\_@{mutex\_}}
\index{mutex\_@{mutex\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{mutex\_}{mutex\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::mutex\+\_\+\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}



Definition at line 499 of file wasm-\/engine.\+h.



Referenced by Add\+Isolate(), Add\+Potentially\+Dead\+Code(), Clear\+Weak\+Script\+Handle(), Create\+Async\+Compile\+Job(), Decode\+All\+Name\+Sections(), Delete\+Compile\+Jobs\+On\+Context(), Delete\+Compile\+Jobs\+On\+Isolate(), Disable\+Code\+Logging(), Dump\+And\+Reset\+Turbo\+Statistics(), Dump\+Turbo\+Statistics(), Enable\+Code\+Logging(), Enter\+Debugging\+For\+Isolate(), Estimate\+Current\+Memory\+Consumption(), Flush\+Liftoff\+Code(), Free\+Dead\+Code(), Free\+Dead\+Code\+Locked(), Free\+Native\+Module(), Get\+Code\+Tracer(), Get\+Liftoff\+Code\+Size\+For\+Testing(), Get\+Or\+Create\+Script(), Get\+Or\+Create\+Turbo\+Statistics(), Has\+Running\+Compile\+Job(), Import\+Native\+Module(), Leave\+Debugging\+For\+Isolate(), Log\+Code(), Log\+Outstanding\+Codes\+For\+Isolate(), Log\+Wrapper\+Code(), Maybe\+Get\+Native\+Module(), Native\+Module\+Count(), New\+Native\+Module(), Potentially\+Finish\+Current\+GC(), Remove\+Compile\+Job(), Remove\+Isolate(), Remove\+Isolate\+From\+Current\+GC(), Report\+Live\+Code\+For\+GC(), Sync\+Compile(), Sync\+Compile\+Translated\+Asm\+Js(), Trigger\+Code\+GCFor\+Testing(), Trigger\+GC(), and Update\+Native\+Module\+Cache().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ad1e69cc46cc9e267fa715a15b711b7e0}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!native\_module\_cache\_@{native\_module\_cache\_}}
\index{native\_module\_cache\_@{native\_module\_cache\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{native\_module\_cache\_}{native\_module\_cache\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModuleCache}{Native\+Module\+Cache}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::native\+\_\+module\+\_\+cache\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 540 of file wasm-\/engine.\+h.



Referenced by Free\+Native\+Module(), Get\+Streaming\+Compilation\+Ownership(), Maybe\+Get\+Native\+Module(), Streaming\+Compilation\+Failed(), Update\+Native\+Module\+Cache(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a95f6343fe67074ef8fde62053ebc66c6}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!native\_modules\_@{native\_modules\_}}
\index{native\_modules\_@{native\_modules\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{native\_modules\_}{native\_modules\_}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}}$\ast$, std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmEngine_1_1NativeModuleInfo}{Native\+Module\+Info}}$>$ $>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::native\+\_\+modules\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 517 of file wasm-\/engine.\+h.



Referenced by Decode\+All\+Name\+Sections(), Delete\+Compile\+Jobs\+On\+Isolate(), Disable\+Code\+Logging(), Enable\+Code\+Logging(), Enter\+Debugging\+For\+Isolate(), Estimate\+Current\+Memory\+Consumption(), Flush\+Liftoff\+Code(), Free\+Native\+Module(), Get\+Liftoff\+Code\+Size\+For\+Testing(), Import\+Native\+Module(), Leave\+Debugging\+For\+Isolate(), Log\+Code(), Maybe\+Get\+Native\+Module(), Native\+Module\+Count(), New\+Native\+Module(), Remove\+Isolate(), Sync\+Compile(), Update\+Native\+Module\+Cache(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a4c61216c29ea0d396e4abdaa72f76646}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!new\_potentially\_dead\_code\_size\_@{new\_potentially\_dead\_code\_size\_}}
\index{new\_potentially\_dead\_code\_size\_@{new\_potentially\_dead\_code\_size\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{new\_potentially\_dead\_code\_size\_}{new\_potentially\_dead\_code\_size\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::new\+\_\+potentially\+\_\+dead\+\_\+code\+\_\+size\+\_\+ = 0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 529 of file wasm-\/engine.\+h.



Referenced by Add\+Potentially\+Dead\+Code(), Trigger\+Code\+GC\+\_\+\+Locked(), Trigger\+Code\+GCFor\+Testing(), and Trigger\+GC().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_ab5ecf5f37f1b52c347845f35cb19f3d9}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!next\_compilation\_id\_@{next\_compilation\_id\_}}
\index{next\_compilation\_id\_@{next\_compilation\_id\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{next\_compilation\_id\_}{next\_compilation\_id\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{classint}{int}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::next\+\_\+compilation\+\_\+id\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 488 of file wasm-\/engine.\+h.



Referenced by Async\+Compile(), Start\+Streaming\+Compilation(), Sync\+Compile(), and Sync\+Compile\+Translated\+Asm\+Js().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a5cd5883d148b99bfe98e8d55417c54a4}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!num\_code\_gcs\_triggered\_@{num\_code\_gcs\_triggered\_}}
\index{num\_code\_gcs\_triggered\_@{num\_code\_gcs\_triggered\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{num\_code\_gcs\_triggered\_}{num\_code\_gcs\_triggered\_}}
{\footnotesize\ttfamily int8\+\_\+t v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::num\+\_\+code\+\_\+gcs\+\_\+triggered\+\_\+ = 0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 534 of file wasm-\/engine.\+h.



Referenced by Trigger\+Code\+GC\+\_\+\+Locked().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a001b9bb450d4ae22f7902cf10a9cb8ed}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!num\_modules\_with\_code\_logging\_@{num\_modules\_with\_code\_logging\_}}
\index{num\_modules\_with\_code\_logging\_@{num\_modules\_with\_code\_logging\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{num\_modules\_with\_code\_logging\_}{num\_modules\_with\_code\_logging\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::num\+\_\+modules\+\_\+with\+\_\+code\+\_\+logging\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 525 of file wasm-\/engine.\+h.



Referenced by Disable\+Code\+Logging(), Enable\+Code\+Logging(), and Log\+Wrapper\+Code().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8e59070055e532fd16960fe100270492}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a8e59070055e532fd16960fe100270492}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!operations\_barrier\_@{operations\_barrier\_}}
\index{operations\_barrier\_@{operations\_barrier\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{operations\_barrier\_}{operations\_barrier\_}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1OperationsBarrier}{Operations\+Barrier}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::operations\+\_\+barrier\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{      std::make\_shared<OperationsBarrier>()\}}

\end{DoxyCode}


Definition at line 519 of file wasm-\/engine.\+h.



Referenced by Get\+Barrier\+For\+Background\+Compile(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_a221bbbae4525dca3ae997a18988fdbc8}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!potentially\_dead\_code\_@{potentially\_dead\_code\_}}
\index{potentially\_dead\_code\_@{potentially\_dead\_code\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{potentially\_dead\_code\_}{potentially\_dead\_code\_}}
{\footnotesize\ttfamily std\+::unordered\+\_\+set$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}}$\ast$$>$ v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::potentially\+\_\+dead\+\_\+code\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 533 of file wasm-\/engine.\+h.



Referenced by Add\+Potentially\+Dead\+Code(), Estimate\+Current\+Memory\+Consumption(), Free\+Native\+Module(), Potentially\+Finish\+Current\+GC(), Trigger\+Code\+GCFor\+Testing(), Trigger\+GC(), and $\sim$\+Wasm\+Engine().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmEngine_afd72ebd08e53260ccaf49d8c2ab00353}\label{classv8_1_1internal_1_1wasm_1_1WasmEngine_afd72ebd08e53260ccaf49d8c2ab00353}} 
\index{v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}!type\_canonicalizer\_@{type\_canonicalizer\_}}
\index{type\_canonicalizer\_@{type\_canonicalizer\_}!v8::internal::wasm::WasmEngine@{v8::internal::wasm::WasmEngine}}
\doxysubsubsection{\texorpdfstring{type\_canonicalizer\_}{type\_canonicalizer\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer}{Type\+Canonicalizer}} v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::type\+\_\+canonicalizer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 493 of file wasm-\/engine.\+h.



Referenced by Estimate\+Current\+Memory\+Consumption().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-engine_8h}{wasm-\/engine.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-engine_8cc}{wasm-\/engine.\+cc}}\end{DoxyCompactItemize}
