\hypertarget{classv8_1_1internal_1_1MathRandom}{}\doxysection{v8\+::internal\+::Math\+Random Class Reference}
\label{classv8_1_1internal_1_1MathRandom}\index{v8::internal::MathRandom@{v8::internal::MathRandom}}


{\ttfamily \#include $<$math-\/random.\+h$>$}



Inheritance diagram for v8\+::internal\+::Math\+Random\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{classv8_1_1internal_1_1MathRandom__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Math\+Random\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{classv8_1_1internal_1_1MathRandom__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1MathRandom_1_1State}{State}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_adfc60807d678fb1c81422e0045446406}{Initialize\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\+\_\+context}})
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe}{Reset\+Context}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\+\_\+context}})
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_a0fdcdc60fa79ec3355de0fabd3b8758a}{Refill\+Cache}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} raw\+\_\+native\+\_\+context)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}{k\+Cache\+Size}} = 64
\item 
static const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_a83d22c10ee41af5b270c62cc73f9bc7e}{k\+State\+Size}} = 2 $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_a191fd08d000c1fc6a1c0d14655f1b711}{k\+Int64\+Size}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 14 of file math-\/random.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MathRandom_adfc60807d678fb1c81422e0045446406}\label{classv8_1_1internal_1_1MathRandom_adfc60807d678fb1c81422e0045446406}} 
\index{v8::internal::MathRandom@{v8::internal::MathRandom}!InitializeContext@{InitializeContext}}
\index{InitializeContext@{InitializeContext}!v8::internal::MathRandom@{v8::internal::MathRandom}}
\doxysubsubsection{\texorpdfstring{InitializeContext()}{InitializeContext()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Math\+Random\+::\+Initialize\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$}]{native\+\_\+context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 17 of file math-\/random.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{18                                                                          \{}
\DoxyCodeLine{19   \textcolor{keyword}{auto} cache = Cast<FixedDoubleArray>(}
\DoxyCodeLine{20       isolate-\/>factory()-\/>NewFixedDoubleArray(\mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}{kCacheSize}}));}
\DoxyCodeLine{21   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}{kCacheSize}}; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) cache-\/>set(\mbox{\hyperlink{namespacev8_1_1internal}{i}}, 0);}
\DoxyCodeLine{22   \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_math\_random\_cache(*cache);}
\DoxyCodeLine{23   DirectHandle<PodArray<State>> pod =}
\DoxyCodeLine{24       \mbox{\hyperlink{classv8_1_1internal_1_1PodArray_a3f28a70fe5af7c7d45ec1d89d2afe748}{PodArray<State>::New}}(isolate, 1, \mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20aa0aa38c28f349d65a6819e03844b73dff}{AllocationType::kOld}});}
\DoxyCodeLine{25   \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_math\_random\_state(*pod);}
\DoxyCodeLine{26   \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe}{ResetContext}}(*\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}});}
\DoxyCodeLine{27 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::factory(), k\+Cache\+Size, v8\+::internal\+::k\+Old, v8\+::internal\+::native\+\_\+context, v8\+::internal\+::\+Pod\+Array$<$ T $>$\+::\+New(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Fixed\+Double\+Array(), and Reset\+Context().



Referenced by v8\+::internal\+::\+Genesis\+::\+Genesis().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MathRandom_adfc60807d678fb1c81422e0045446406_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MathRandom_adfc60807d678fb1c81422e0045446406_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MathRandom_a0fdcdc60fa79ec3355de0fabd3b8758a}\label{classv8_1_1internal_1_1MathRandom_a0fdcdc60fa79ec3355de0fabd3b8758a}} 
\index{v8::internal::MathRandom@{v8::internal::MathRandom}!RefillCache@{RefillCache}}
\index{RefillCache@{RefillCache}!v8::internal::MathRandom@{v8::internal::MathRandom}}
\doxysubsubsection{\texorpdfstring{RefillCache()}{RefillCache()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} v8\+::internal\+::\+Math\+Random\+::\+Refill\+Cache (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{raw\+\_\+native\+\_\+context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 35 of file math-\/random.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{35                                                                             \{}
\DoxyCodeLine{36   Tagged<Context> \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}} =}
\DoxyCodeLine{37       Cast<Context>(\mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}}(raw\_native\_context));}
\DoxyCodeLine{38   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{39   Tagged<PodArray<State>> pod =}
\DoxyCodeLine{40       Cast<PodArray<State>>(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>math\_random\_state());}
\DoxyCodeLine{41   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02conversions_8cc_03_a38fbaa06b6874aa41823cd9433129e5e}{State}} state = pod-\/>get(0);}
\DoxyCodeLine{42   \textcolor{comment}{// Initialize state if not yet initialized. If a fixed random seed was}}
\DoxyCodeLine{43   \textcolor{comment}{// requested, use it to reset our state the first time a script asks for}}
\DoxyCodeLine{44   \textcolor{comment}{// random numbers in this context. This ensures the script sees a consistent}}
\DoxyCodeLine{45   \textcolor{comment}{// sequence.}}
\DoxyCodeLine{46   \textcolor{keywordflow}{if} (state.s0 == 0 \&\& state.s1 == 0) \{}
\DoxyCodeLine{47     uint64\_t seed;}
\DoxyCodeLine{48     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.random\_seed != 0) \{}
\DoxyCodeLine{49       seed = \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.random\_seed;}
\DoxyCodeLine{50     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{51       isolate-\/>random\_number\_generator()-\/>NextBytes(\&seed, \textcolor{keyword}{sizeof}(seed));}
\DoxyCodeLine{52     \}}
\DoxyCodeLine{53     state.s0 = \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_ac780ac819aabd925ed250e66dc00a6b8}{base::RandomNumberGenerator::MurmurHash3}}(seed);}
\DoxyCodeLine{54     state.s1 = \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_ac780ac819aabd925ed250e66dc00a6b8}{base::RandomNumberGenerator::MurmurHash3}}(\string~seed);}
\DoxyCodeLine{55     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(state.s0 != 0 || state.s1 != 0);}
\DoxyCodeLine{56   \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   Tagged<FixedDoubleArray> cache =}
\DoxyCodeLine{59       Cast<FixedDoubleArray>(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>math\_random\_cache());}
\DoxyCodeLine{60   \textcolor{comment}{// Create random numbers.}}
\DoxyCodeLine{61   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}{kCacheSize}}; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{62     \textcolor{comment}{// Generate random numbers using xorshift128+.}}
\DoxyCodeLine{63     \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_aed81ac9a466d6f8c981f13909574b1cf}{base::RandomNumberGenerator::XorShift128}}(\&state.s0, \&state.s1);}
\DoxyCodeLine{64     cache-\/>set(\mbox{\hyperlink{namespacev8_1_1internal}{i}}, \mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_a654429611ff0993d6ef6a337c6943158}{base::RandomNumberGenerator::ToDouble}}(state.s0));}
\DoxyCodeLine{65   \}}
\DoxyCodeLine{66   pod-\/>set(0, state);}
\DoxyCodeLine{67 }
\DoxyCodeLine{68   \mbox{\hyperlink{namespacev8_1_1internal_ae5e657aba90e2d28950f7c96453e9736}{Tagged<Smi>}} new\_index = \mbox{\hyperlink{classv8_1_1internal_1_1Smi_afe7f07102d90ccce48cbe677c88a0645}{Smi::FromInt}}(\mbox{\hyperlink{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}{kCacheSize}});}
\DoxyCodeLine{69   \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_math\_random\_index(new\_index);}
\DoxyCodeLine{70   \textcolor{keywordflow}{return} new\_index.ptr();}
\DoxyCodeLine{71 \}}

\end{DoxyCode}


References CHECK, v8\+::internal\+::\+Smi\+::\+From\+Int(), k\+Cache\+Size, v8\+::base\+::\+Random\+Number\+Generator\+::\+Murmur\+Hash3(), v8\+::internal\+::native\+\_\+context, v8\+::base\+::\+Random\+Number\+Generator\+::\+Next\+Bytes(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::ptr(), v8\+::internal\+::\+Isolate\+::random\+\_\+number\+\_\+generator(), v8\+::base\+::\+Random\+Number\+Generator\+::\+To\+Double(), v8\+::internal\+::v8\+\_\+flags, and v8\+::base\+::\+Random\+Number\+Generator\+::\+Xor\+Shift128().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MathRandom_a0fdcdc60fa79ec3355de0fabd3b8758a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe}\label{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe}} 
\index{v8::internal::MathRandom@{v8::internal::MathRandom}!ResetContext@{ResetContext}}
\index{ResetContext@{ResetContext}!v8::internal::MathRandom@{v8::internal::MathRandom}}
\doxysubsubsection{\texorpdfstring{ResetContext()}{ResetContext()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Math\+Random\+::\+Reset\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Context}{Context}} $>$}]{native\+\_\+context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 29 of file math-\/random.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{29                                                             \{}
\DoxyCodeLine{30   \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_math\_random\_index(\mbox{\hyperlink{classv8_1_1internal_1_1Smi_a5386e0cc44bcfd6a13c8481b95f5652f}{Smi::zero}}());}
\DoxyCodeLine{31   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02conversions_8cc_03_a38fbaa06b6874aa41823cd9433129e5e}{State}} state = \{0, 0\};}
\DoxyCodeLine{32   Cast<PodArray<State>>(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>math\_random\_state())-\/>set(0, state);}
\DoxyCodeLine{33 \}}

\end{DoxyCode}


References v8\+::internal\+::native\+\_\+context, and v8\+::internal\+::\+Smi\+::zero().



Referenced by Initialize\+Context(), and v8\+::internal\+::\+Context\+Serializer\+::\+Serialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MathRandom_a66a264a94cd223579b09d25cfd95cdbe_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}\label{classv8_1_1internal_1_1MathRandom_aaefb4d2df5627f1918da50fa94f13e2b}} 
\index{v8::internal::MathRandom@{v8::internal::MathRandom}!kCacheSize@{kCacheSize}}
\index{kCacheSize@{kCacheSize}!v8::internal::MathRandom@{v8::internal::MathRandom}}
\doxysubsubsection{\texorpdfstring{kCacheSize}{kCacheSize}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Math\+Random\+::k\+Cache\+Size = 64\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 24 of file math-\/random.\+h.



Referenced by Initialize\+Context(), and Refill\+Cache().

\mbox{\Hypertarget{classv8_1_1internal_1_1MathRandom_a83d22c10ee41af5b270c62cc73f9bc7e}\label{classv8_1_1internal_1_1MathRandom_a83d22c10ee41af5b270c62cc73f9bc7e}} 
\index{v8::internal::MathRandom@{v8::internal::MathRandom}!kStateSize@{kStateSize}}
\index{kStateSize@{kStateSize}!v8::internal::MathRandom@{v8::internal::MathRandom}}
\doxysubsubsection{\texorpdfstring{kStateSize}{kStateSize}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Math\+Random\+::k\+State\+Size = 2 $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_a191fd08d000c1fc6a1c0d14655f1b711}{k\+Int64\+Size}}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 25 of file math-\/random.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/numbers/\mbox{\hyperlink{math-random_8h}{math-\/random.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/numbers/\mbox{\hyperlink{math-random_8cc}{math-\/random.\+cc}}\end{DoxyCompactItemize}
