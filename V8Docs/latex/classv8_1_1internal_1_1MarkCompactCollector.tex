\hypertarget{classv8_1_1internal_1_1MarkCompactCollector}{}\doxysection{v8\+::internal\+::Mark\+Compact\+Collector Class Reference}
\label{classv8_1_1internal_1_1MarkCompactCollector}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}


{\ttfamily \#include $<$mark-\/compact.\+h$>$}



Collaboration diagram for v8\+::internal\+::Mark\+Compact\+Collector\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem}{Clear\+Trivial\+Weak\+Ref\+Job\+Item}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor}{Custom\+Root\+Body\+Marking\+Visitor}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem}{Filter\+Non\+Trivial\+Weak\+Ref\+Job\+Item}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo}{Record\+Reloc\+Slot\+Info}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor}{Shared\+Heap\+Object\+Visitor}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}{Start\+Compaction\+Mode}} \{ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a4461e3132c6a68cc061f851d6b53fc15}{k\+Incremental}}
, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71}{k\+Atomic}}
 \}
\item 
enum class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abe}{Marking\+Worklist\+Processing\+Mode}} \{ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8}{k\+Default}}
, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7}{k\+Process\+Remembered\+Ephemerons}}
 \}
\item 
enum class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}{Call\+Origin}} \{ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba207a015d266ec0bfad7ac80475bed3ff}{k\+Incremental\+Marking\+Step}}
, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7}{k\+Atomic\+GC}}
 \}
\item 
enum class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}{Ephemeron\+Result}} \{ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}{k\+Unresolved}}
, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}{k\+Marked\+Value}}
, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}{k\+Resolved}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$Marking\+Worklist\+Processing\+Mode mode = Marking\+Worklist\+Processing\+Mode\+::k\+Default$>$ }\\std\+::pair$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412}{Process\+Marking\+Worklist}} (\mbox{\hyperlink{classv8_1_1base_1_1TimeDelta}{v8\+::base\+::\+Time\+Delta}} max\+\_\+duration, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+bytes\+\_\+to\+\_\+process)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac79654a97e006616402d89dcec98eac7}{Tear\+Down}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906}{Collect\+Garbage}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}{Collect\+Evacuation\+Candidates}} (\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}{Add\+Evacuation\+Candidate}} (\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$p)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c}{Prepare}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b}{Finish\+Concurrent\+Marking}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae}{Start\+Compaction}} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}{Start\+Compaction\+Mode}} \mbox{\hyperlink{flag-definitions_8h_adaf90f045d5cd2710edd625b8685472a}{mode}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3}{Start\+Marking}} (std\+::shared\+\_\+ptr$<$\+::\mbox{\hyperlink{classheap_1_1base_1_1IncrementalMarkingSchedule}{heap\+::base\+::\+Incremental\+Marking\+Schedule}} $>$ schedule=\{\})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0aefdd8b8b50a471f4ab14827b26c4ad}{is\+\_\+compacting}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4e2eab3d2c459df2d12cbdf972b1a48d}{Add\+Transition\+Array}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$ array)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a268c6d19f21e9b35d477806a33960d64}{Record\+Strong\+Descriptor\+Arrays\+For\+Weakening}} (\mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandleVector}{Global\+Handle\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ strong\+\_\+descriptor\+\_\+arrays)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff}{Verify\+Marking}} ()
\item 
unsigned \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984}{epoch}} () const
\item 
\mbox{\hyperlink{classv8_1_1base_1_1EnumSet}{base\+::\+Enum\+Set}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_aa9a47c3d58feefc8747cef370681925b}{Code\+Flush\+Mode}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074}{code\+\_\+flush\+\_\+mode}} () const
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists}{Marking\+Worklists}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c709cbcdf524f1f21d6780173a377b4}{marking\+\_\+worklists}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a941d07bdea68cc187975415adc4dac79}{Marking\+Worklists\+::\+Local}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9a770c9f4b80f0ac788fe5e0f1596713}{local\+\_\+marking\+\_\+worklists}} () const
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects}{Weak\+Objects}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3}{weak\+\_\+objects}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local}{Weak\+Objects\+::\+Local}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\+\_\+weak\+\_\+objects}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{Use\+Background\+Threads\+In\+Cycle}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea}{Maybe\+Enable\+Background\+Threads\+In\+Cycle}} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}{Call\+Origin}} origin)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}} ()
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af7e1a054489f11045c46e33fd3c17c97}{Mark\+Compact\+Collector}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a62f2fdb072e51e33c943ff1835035d9a}{$\sim$\+Mark\+Compact\+Collector}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba}{Is\+Unmarked\+Heap\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}, \mbox{\hyperlink{classv8_1_1internal_1_1FullObjectSlot}{Full\+Object\+Slot}} p)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe}{Is\+Unmarked\+Shared\+Heap\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}, \mbox{\hyperlink{classv8_1_1internal_1_1FullObjectSlot}{Full\+Object\+Slot}} p)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999}{Is\+On\+Evacuation\+Candidate}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_aa8509f8e21058aabbc6caa5f6425bd13}{Maybe\+Object}} $>$ obj)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39}{Should\+Record\+Reloc\+Slot}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$ host, \mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$rinfo, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ target)
\item 
static \mbox{\hyperlink{structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo}{Record\+Reloc\+Slot\+Info}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9}{Process\+Reloc\+Info}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$ host, \mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$rinfo, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ target)
\item 
static void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a}{Record\+Reloc\+Slot}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$ host, \mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$rinfo, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ target)
\item 
{\footnotesize template$<$typename THeap\+Object\+Slot $>$ }\\static void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{Record\+Slot}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ object, THeap\+Object\+Slot slot, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ target)
\item 
{\footnotesize template$<$typename THeap\+Object\+Slot $>$ }\\static void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a16b185ed1b8262db434462d3e8ed074d}{Record\+Slot}} (\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk}{Memory\+Chunk}} $\ast$source\+\_\+chunk, THeap\+Object\+Slot slot, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ target)
\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0991ed9064350d361c8328c21339d1ad}{Resize\+New\+Space\+Mode}} = \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a6f82eea8ed7b7ed46e19979091da00df}{Heap\+::\+Resize\+New\+Space\+Mode}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af}{Compute\+Evacuation\+Heuristics}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} area\+\_\+size, \mbox{\hyperlink{classint}{int}} $\ast$target\+\_\+fragmentation\+\_\+percent, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$max\+\_\+evacuated\+\_\+bytes)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896}{Record\+Object\+Stats}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b}{Finish}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c}{Sweep\+Array\+Buffer\+Extensions}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e}{Mark\+Live\+Objects}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280}{Mark\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ host, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj, \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267}{Marking\+Helper\+::\+Worklist\+Target}} target\+\_\+worklist)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea}{Mark\+Root\+Object}} (\mbox{\hyperlink{namespacev8_1_1internal_ae1439207c9f98c41dbdea3eca3572d54}{Root}} root, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj, \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267}{Marking\+Helper\+::\+Worklist\+Target}} target\+\_\+worklist)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb}{Mark\+Roots}} (\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$root\+\_\+visitor)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732}{Mark\+Roots\+From\+Conservative\+Stack}} (\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$root\+\_\+visitor)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb}{Mark\+Objects\+From\+Client\+Heaps}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab6e6080b49b981420d6462957e003821}{Mark\+Objects\+From\+Client\+Heap}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$client)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77}{Pin\+Precise\+Roots\+If\+Needed}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7}{Update\+Pointers\+In\+Client\+Heaps}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e}{Update\+Pointers\+In\+Client\+Heap}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$client)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce}{Update\+Pointers\+In\+Pointer\+Tables}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14908aaa211b8c1bbafb7e4496736114}{Mark\+Transitive\+Closure}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab744335a59a10dfc63766f57720f8a8b}{Verify\+Ephemeron\+Marking}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6}{Process\+Top\+Optimized\+Frame}} (\mbox{\hyperlink{classv8_1_1internal_1_1ObjectVisitor}{Object\+Visitor}} $\ast$visitor, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}{Ephemeron\+Result}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}{Apply\+Ephemeron\+Semantics}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a68f84b58f91bd059cec89f8b1a061775}{Process\+Ephemeron}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5}{Mark\+Transitive\+Closure\+Until\+Fixpoint}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872}{Mark\+Transitive\+Closure\+Linear}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835}{Process\+Ephemerons}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc}{Perform\+Wrapper\+Tracing}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3}{Retain\+Maps}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e}{Clear\+Non\+Live\+References}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5f4d0e2e67b039d30d737212e64b71fa}{Mark\+Dependent\+Code\+For\+Deoptimization}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887}{Special\+Clear\+Map\+Slot}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ host, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ dead\+\_\+target, \mbox{\hyperlink{namespacev8_1_1internal_a5f8b754678e24836a51be62e3f8c3682}{Heap\+Object\+Slot}} slot)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6}{Clear\+Potential\+Simple\+Map\+Transition}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ dead\+\_\+target)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a03e68bee93758940e2d106f7819cce9a}{Clear\+Potential\+Simple\+Map\+Transition}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ map, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ dead\+\_\+target)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358}{Flush\+Bytecode\+From\+SFI}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ shared\+\_\+info)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b}{Process\+Old\+Code\+Candidates}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c}{Process\+Old\+Bytecode\+SFI}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ flushing\+\_\+candidate)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ad34de0569d3f17ed9938be62ab5cda04}{Process\+Old\+Baseline\+SFI}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ flushing\+\_\+candidate)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4672c902176abf0363018f4b29435209}{Flush\+SFI}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ sfi, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} bytecode\+\_\+already\+\_\+decompiled)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90e4a47ecc544481e5d1d8217817a392}{Process\+Flushed\+Baseline\+Candidates}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af12dba7c5c1e1e2e5c8b30809005605b}{Clear\+Flushed\+Js\+Functions}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410}{Clear\+Full\+Map\+Transitions}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a71e8a1a84a4a8174d41df38622577ddb}{Trim\+Descriptor\+Array}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ map, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ descriptors)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a242069ae8205f32e03cf726bffa280b9}{Trim\+Enum\+Cache}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ map, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ descriptors)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1}{Compact\+Transition\+Array}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$ map, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$ transitions, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ descriptors)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902}{Transition\+Array\+Needs\+Compaction}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$ transitions, \mbox{\hyperlink{classint}{int}} num\+\_\+transitions)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a67923b4c8c39c7b225af81c264d2ee46}{Weaken\+Strong\+Descriptor\+Arrays}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a}{Clear\+Weak\+Collections}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4c690a1124b34af7925738d838255de0}{Clear\+Trivial\+Weak\+References}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a94a20caf915889d8ba10e3bd9bbc3778}{Clear\+Trusted\+Weak\+References}} ()
\item 
{\footnotesize template$<$typename TObject\+And\+Slot , typename TMaybe\+Slot $>$ }\\void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a6c5024e51f8944c9ad34e7f962490285}{Clear\+Weak\+References}} (\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_a7f664d7faebac274df585c5063ead655}{Weak\+Objects\+::\+Weak\+Object\+Worklist}}$<$ TObject\+And\+Slot $>$\+::\mbox{\hyperlink{classv8_1_1Local}{Local}} \&worklist, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_ad79ecfc717a11290d821ed1f220434f6}{Heap\+Object\+Reference}} $>$ cleared\+\_\+weak\+\_\+ref)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae8d1737f64ec1c402f115889a75d1cbf}{Filter\+Non\+Trivial\+Weak\+References}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c}{Clear\+Non\+Trivial\+Weak\+References}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811}{Clear\+JSWeak\+Refs}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe}{Sweep}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{Start\+Sweep\+Space}} (\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af5937c57f10e0293505055fc348ddde5}{Evacuate\+Prologue}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa457554fa770421e38516be33c3cd201}{Evacuate\+Epilogue}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa}{Evacuate}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31}{Evacuate\+Pages\+In\+Parallel}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8}{Update\+Pointers\+After\+Evacuation}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae07545bc19d80a27a63c760d875601c2}{Release\+Evacuation\+Candidates}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}{Release\+Page}} (\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpaceBase}{Paged\+Space\+Base}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}}, \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$page)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834}{Post\+Process\+Aborted\+Evacuation\+Candidates}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0c89184f88696445ac02aee44aa43de2}{Report\+Aborted\+Evacuation\+Candidate\+Due\+To\+OOM}} (\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} failed\+\_\+start, \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$page)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}{Report\+Aborted\+Evacuation\+Candidate\+Due\+To\+Flags}} (\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$page, \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk}{Memory\+Chunk}} $\ast$chunk)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9e736fa08fd40551bc05dc8ed6f691a6}{Number\+Of\+Parallel\+Ephemeron\+Visiting\+Tasks}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} elements)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa}{Right\+Trim\+Descriptor\+Array}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ array, \mbox{\hyperlink{classint}{int}} descriptors\+\_\+to\+\_\+trim)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0}{Start\+Sweep\+New\+Space}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{Sweep\+Large\+Space}} (\mbox{\hyperlink{classv8_1_1internal_1_1LargeObjectSpace}{Large\+Object\+Space}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1}{Reset\+And\+Relink\+Black\+Allocated\+Page}} (\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$, \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2e6250572f864eaa8bd93c57ae34215a}{mutex\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Semaphore}{base\+::\+Semaphore}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aec2b8f54a92b2195012b62dfdf64aa9b}{page\+\_\+parallel\+\_\+job\+\_\+semaphore\+\_\+}} \{0\}
\item 
const \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a76317965f702101c902adbdee2503103}{uses\+\_\+shared\+\_\+heap\+\_\+}}
\item 
const \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a56657163fc1e11db075fbc35242ca3ea}{is\+\_\+shared\+\_\+space\+\_\+isolate\+\_\+}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a40d1f44cfde0bb0390ea138370a4b591}{black\+\_\+allocation\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}{have\+\_\+code\+\_\+to\+\_\+deoptimize\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}{parallel\+\_\+marking\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists}{Marking\+Worklists}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\+\_\+worklists\+\_\+}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a941d07bdea68cc187975415adc4dac79}{Marking\+Worklists\+::\+Local}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\+\_\+marking\+\_\+worklists\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects}{Weak\+Objects}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\+\_\+objects\+\_\+}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1MainMarkingVisitor}{Main\+Marking\+Visitor}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}{marking\+\_\+visitor\+\_\+}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local}{Weak\+Objects\+::\+Local}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\+\_\+weak\+\_\+objects\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1NativeContextInferrer}{Native\+Context\+Inferrer}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a38d01cfcaa46efe4b24412d3eba66ca0}{native\+\_\+context\+\_\+inferrer\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1NativeContextStats}{Native\+Context\+Stats}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}{native\+\_\+context\+\_\+stats\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandleVector}{Global\+Handle\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}{strong\+\_\+descriptor\+\_\+arrays\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a512d50cdd47b6006d66ac9456259e69b}{strong\+\_\+descriptor\+\_\+arrays\+\_\+mutex\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\+\_\+candidates\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\+\_\+space\+\_\+evacuation\+\_\+pages\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\+\_\+space\+\_\+evacuation\+\_\+pages\+\_\+}}
\item 
std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}, \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\+\_\+evacuation\+\_\+candidates\+\_\+due\+\_\+to\+\_\+oom\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}{aborted\+\_\+evacuation\+\_\+candidates\+\_\+due\+\_\+to\+\_\+flags\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1LargePageMetadata}{Large\+Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}{promoted\+\_\+large\+\_\+pages\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata}{Mutable\+Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\+\_\+pages\+\_\+to\+\_\+be\+\_\+freed\+\_\+}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a28865ed3db2b1d0816122def6a86c92e}{Key\+To\+Values}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\+\_\+to\+\_\+values\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MarkingState}{Marking\+State}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\+\_\+state\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1NonAtomicMarkingState}{Non\+Atomic\+Marking\+State}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\+\_\+atomic\+\_\+marking\+\_\+state\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper}{Sweeper}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\+\_\+}}
\item 
unsigned \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a97165101e46c49ad2629345f1cb48da5}{epoch\+\_\+}} = 0
\item 
\mbox{\hyperlink{classv8_1_1base_1_1EnumSet}{base\+::\+Enum\+Set}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_aa9a47c3d58feefc8747cef370681925b}{Code\+Flush\+Mode}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a25ccbff2b71c818ffeab6970aad6510f}{code\+\_\+flush\+\_\+mode\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\+\_\+new\+\_\+space\+\_\+pages\+\_\+to\+\_\+be\+\_\+swept\+\_\+}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\+\_\+background\+\_\+threads\+\_\+in\+\_\+cycle\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}{in\+\_\+conservative\+\_\+stack\+\_\+scanning\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ad52a278306d82bfecdf2ee279d56967e}{k\+Ephemeron\+Chunk\+Size}} = 8 $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf862d3efb6e48b15fe21d283eebc6c5}{Evacuator}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9aac51e6e68df5e4add0792032864173}{Record\+Migrated\+Slot\+Visitor}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0a89e89941e2601a090655513f208c65}{Root\+Marking\+Visitor}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a03cb76c44646ccae2a33eb05bcdf0dc5}{Precise\+Page\+Pinning\+Visitor}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 57 of file mark-\/compact.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0991ed9064350d361c8328c21339d1ad}\label{classv8_1_1internal_1_1MarkCompactCollector_a0991ed9064350d361c8328c21339d1ad}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ResizeNewSpaceMode@{ResizeNewSpaceMode}}
\index{ResizeNewSpaceMode@{ResizeNewSpaceMode}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ResizeNewSpaceMode}{ResizeNewSpaceMode}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a6f82eea8ed7b7ed46e19979091da00df}{v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Resize\+New\+Space\+Mode}} =  \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a6f82eea8ed7b7ed46e19979091da00df}{Heap\+::\+Resize\+New\+Space\+Mode}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 195 of file mark-\/compact.\+h.



\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}\label{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!CallOrigin@{CallOrigin}}
\index{CallOrigin@{CallOrigin}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{CallOrigin}{CallOrigin}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}{v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Call\+Origin}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncrementalMarkingStep@{kIncrementalMarkingStep}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kIncrementalMarkingStep@{kIncrementalMarkingStep}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba207a015d266ec0bfad7ac80475bed3ff}\label{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba207a015d266ec0bfad7ac80475bed3ff}} 
k\+Incremental\+Marking\+Step&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kAtomicGC@{kAtomicGC}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kAtomicGC@{kAtomicGC}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7}\label{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7}} 
k\+Atomic\+GC&\\
\hline

\end{DoxyEnumFields}


Definition at line 72 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{72                         \{}
\DoxyCodeLine{73     kIncrementalMarkingStep,}
\DoxyCodeLine{74     kAtomicGC,}
\DoxyCodeLine{75   \};}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!EphemeronResult@{EphemeronResult}}
\index{EphemeronResult@{EphemeronResult}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{EphemeronResult}{EphemeronResult}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}{v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Ephemeron\+Result}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kUnresolved@{kUnresolved}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kUnresolved@{kUnresolved}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}} 
k\+Unresolved&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kMarkedValue@{kMarkedValue}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kMarkedValue@{kMarkedValue}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}} 
k\+Marked\+Value&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kResolved@{kResolved}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kResolved@{kResolved}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}} 
k\+Resolved&\\
\hline

\end{DoxyEnumFields}


Definition at line 77 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{77                              \{}
\DoxyCodeLine{78     \textcolor{comment}{// Both key and value are still unmarked.}}
\DoxyCodeLine{79     \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_aaf22dd277d797ea2a57d496631f034f6a8fae96c2c16a6e5bffe0ababb3ede10e}{kUnresolved}},}
\DoxyCodeLine{80     \textcolor{comment}{// Value got marked because key was already marked.}}
\DoxyCodeLine{81     kMarkedValue,}
\DoxyCodeLine{82     \textcolor{comment}{// Value is already marked or always live in this GC.}}
\DoxyCodeLine{83     kResolved,}
\DoxyCodeLine{84   \};}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abe}\label{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abe}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkingWorklistProcessingMode@{MarkingWorklistProcessingMode}}
\index{MarkingWorklistProcessingMode@{MarkingWorklistProcessingMode}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkingWorklistProcessingMode}{MarkingWorklistProcessingMode}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abe}{v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Marking\+Worklist\+Processing\+Mode}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kDefault@{kDefault}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kDefault@{kDefault}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8}\label{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8}} 
k\+Default&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kProcessRememberedEphemerons@{kProcessRememberedEphemerons}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kProcessRememberedEphemerons@{kProcessRememberedEphemerons}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7}\label{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7}} 
k\+Process\+Remembered\+Ephemerons&\\
\hline

\end{DoxyEnumFields}


Definition at line 67 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{67                                            \{}
\DoxyCodeLine{68     \mbox{\hyperlink{namespacev8_1_1base_a37a9b036b2bb53802e6b5d0842ca0fada6867faeaa475fda467e48267db2bb8a8}{kDefault}},}
\DoxyCodeLine{69     kProcessRememberedEphemerons}
\DoxyCodeLine{70   \};}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}\label{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!StartCompactionMode@{StartCompactionMode}}
\index{StartCompactionMode@{StartCompactionMode}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{StartCompactionMode}{StartCompactionMode}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}{v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Start\+Compaction\+Mode}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncremental@{kIncremental}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kIncremental@{kIncremental}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a4461e3132c6a68cc061f851d6b53fc15}\label{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a4461e3132c6a68cc061f851d6b53fc15}} 
k\+Incremental&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kAtomic@{kAtomic}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kAtomic@{kAtomic}}}\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71}\label{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71}} 
k\+Atomic&\\
\hline

\end{DoxyEnumFields}


Definition at line 62 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{62                                  \{}
\DoxyCodeLine{63     kIncremental,}
\DoxyCodeLine{64     \mbox{\hyperlink{namespacecppgc_1_1internal_ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71}{kAtomic}},}
\DoxyCodeLine{65   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af7e1a054489f11045c46e33fd3c17c97}\label{classv8_1_1internal_1_1MarkCompactCollector_af7e1a054489f11045c46e33fd3c17c97}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkCompactCollector@{MarkCompactCollector}}
\index{MarkCompactCollector@{MarkCompactCollector}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkCompactCollector()}{MarkCompactCollector()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Compact\+Collector (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 282 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{283     : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}(\mbox{\hyperlink{namespaceheap}{heap}}),}
\DoxyCodeLine{284 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{285       state\_(\mbox{\hyperlink{namespacev8_af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8}{IDLE}}),}
\DoxyCodeLine{286 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{287       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a76317965f702101c902adbdee2503103}{uses\_shared\_heap\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a8766ebe269e544125eaf0e70146ee2dc}{has\_shared\_space}}()),}
\DoxyCodeLine{288       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a56657163fc1e11db075fbc35242ca3ea}{is\_shared\_space\_isolate\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a24109659c4260d0c6f281510b6091015}{is\_shared\_space\_isolate}}()),}
\DoxyCodeLine{289       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a7bfaafb912d7be87fd7043b7629f7675}{marking\_state}}()),}
\DoxyCodeLine{290       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a81880e557d80731da98aebef763044e0}{non\_atomic\_marking\_state}}()),}
\DoxyCodeLine{291       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aad499bc7154a594f5a3e7036d683cdfa}{sweeper}}()) \{}
\DoxyCodeLine{292 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a62f2fdb072e51e33c943ff1835035d9a}\label{classv8_1_1internal_1_1MarkCompactCollector_a62f2fdb072e51e33c943ff1835035d9a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!````~MarkCompactCollector@{$\sim$MarkCompactCollector}}
\index{````~MarkCompactCollector@{$\sim$MarkCompactCollector}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{$\sim$MarkCompactCollector()}{~MarkCompactCollector()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Mark\+Compact\+Collector\+::$\sim$\+Mark\+Compact\+Collector (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}\label{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!AddEvacuationCandidate@{AddEvacuationCandidate}}
\index{AddEvacuationCandidate@{AddEvacuationCandidate}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{AddEvacuationCandidate()}{AddEvacuationCandidate()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Add\+Evacuation\+Candidate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$}]{p }\end{DoxyParamCaption})}



Definition at line 307 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{307                                                                  \{}
\DoxyCodeLine{308   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!p-\/>Chunk()-\/>NeverEvacuate());}
\DoxyCodeLine{309   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!p-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}}));}
\DoxyCodeLine{310 }
\DoxyCodeLine{311   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_evacuation\_candidates) \{}
\DoxyCodeLine{312     \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(}
\DoxyCodeLine{313         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{314         \textcolor{stringliteral}{"{}Evacuation candidate: Free bytes: \%6zu. Free Lists length: \%4d.\(\backslash\)n"{}},}
\DoxyCodeLine{315         p-\/>area\_size() -\/ p-\/>allocated\_bytes(), p-\/>ComputeFreeListsLength());}
\DoxyCodeLine{316   \}}
\DoxyCodeLine{317 }
\DoxyCodeLine{318   p-\/>MarkEvacuationCandidate();}
\DoxyCodeLine{319   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}}.push\_back(p);}
\DoxyCodeLine{320 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::allocated\+\_\+bytes(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::area\+\_\+size(), v8\+::internal\+::\+Memory\+Chunk\+::\+BLACK\+\_\+\+ALLOCATED, v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Compute\+Free\+Lists\+Length(), v8\+::internal\+::\+DCHECK(), evacuation\+\_\+candidates\+\_\+, heap\+\_\+, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Page\+Metadata\+::\+Mark\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Never\+Evacuate(), v8\+::internal\+::\+Print\+Isolate(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Evacuation\+Candidates().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4e2eab3d2c459df2d12cbdf972b1a48d}\label{classv8_1_1internal_1_1MarkCompactCollector_a4e2eab3d2c459df2d12cbdf972b1a48d}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!AddTransitionArray@{AddTransitionArray}}
\index{AddTransitionArray@{AddTransitionArray}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{AddTransitionArray()}{AddTransitionArray()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Add\+Transition\+Array (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$}]{array }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 104 of file mark-\/compact-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{104                                                                            \{}
\DoxyCodeLine{105   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>transition\_arrays\_local.Push(array);}
\DoxyCodeLine{106 \}}

\end{DoxyCode}


References local\+\_\+weak\+\_\+objects().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a4e2eab3d2c459df2d12cbdf972b1a48d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}\label{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ApplyEphemeronSemantics@{ApplyEphemeronSemantics}}
\index{ApplyEphemeronSemantics@{ApplyEphemeronSemantics}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ApplyEphemeronSemantics()}{ApplyEphemeronSemantics()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}{Mark\+Compact\+Collector\+::\+Ephemeron\+Result}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Apply\+Ephemeron\+Semantics (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{key,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2286 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2287                                                                         \{}
\DoxyCodeLine{2288   \textcolor{comment}{// Objects in the shared heap are prohibited from being used as keys in}}
\DoxyCodeLine{2289   \textcolor{comment}{// WeakMaps and WeakSets and therefore cannot be ephemeron keys, because that}}
\DoxyCodeLine{2290   \textcolor{comment}{// would enable thread local -\/> shared heap edges.}}
\DoxyCodeLine{2291   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}));}
\DoxyCodeLine{2292   \textcolor{comment}{// Usually values that should not be marked are not added to the ephemeron}}
\DoxyCodeLine{2293   \textcolor{comment}{// worklist. However, minor collection during incremental marking may promote}}
\DoxyCodeLine{2294   \textcolor{comment}{// strings from the younger generation into the shared heap. This}}
\DoxyCodeLine{2295   \textcolor{comment}{// ShouldMarkObject call catches those cases.}}
\DoxyCodeLine{2296   \textcolor{keyword}{const} \textcolor{keyword}{auto} target\_worklist = \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ac5e90f6e0c7ddb83975856969a4ad03f}{MarkingHelper::ShouldMarkObject}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{2297   \textcolor{keywordflow}{if} (!target\_worklist) \{}
\DoxyCodeLine{2298     \textcolor{comment}{// The value doesn't need to be marked in this GC, so no need to track}}
\DoxyCodeLine{2299     \textcolor{comment}{// ephemeron further.}}
\DoxyCodeLine{2300     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}{EphemeronResult::kResolved}};}
\DoxyCodeLine{2301   \}}
\DoxyCodeLine{2302 }
\DoxyCodeLine{2303   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}})) \{}
\DoxyCodeLine{2304     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a0e9d1ac5aa056d7bf0087bce379e3b7c}{MarkingHelper::TryMarkAndPush}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get(),}
\DoxyCodeLine{2305                                       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, target\_worklist.value(),}
\DoxyCodeLine{2306                                       \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{2307       \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}{EphemeronResult::kMarkedValue}};}
\DoxyCodeLine{2308     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2309       \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}{EphemeronResult::kResolved}};}
\DoxyCodeLine{2310     \}}
\DoxyCodeLine{2311   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2312     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_a13d4cff573da17af5b1532566911dfe9}{IsMarked}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{2313       \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a491e29db6c0c3ad263da3ba752e1e49b}{EphemeronResult::kResolved}};}
\DoxyCodeLine{2314     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2315       \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}{EphemeronResult::kUnresolved}};}
\DoxyCodeLine{2316     \}}
\DoxyCodeLine{2317   \}}
\DoxyCodeLine{2318 \}}

\end{DoxyCode}


References DCHECK, v8\+::internal\+::key, and v8\+::internal\+::value.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af12dba7c5c1e1e2e5c8b30809005605b}\label{classv8_1_1internal_1_1MarkCompactCollector_af12dba7c5c1e1e2e5c8b30809005605b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearFlushedJsFunctions@{ClearFlushedJsFunctions}}
\index{ClearFlushedJsFunctions@{ClearFlushedJsFunctions}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearFlushedJsFunctions()}{ClearFlushedJsFunctions()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Flushed\+Js\+Functions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3535 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3535                                                    \{}
\DoxyCodeLine{3536   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_bytecode ||}
\DoxyCodeLine{3537          \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.flushed\_js\_functions.IsEmpty());}
\DoxyCodeLine{3538   Tagged<JSFunction> flushed\_js\_function;}
\DoxyCodeLine{3539   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>flushed\_js\_functions\_local.Pop(}
\DoxyCodeLine{3540       \&flushed\_js\_function)) \{}
\DoxyCodeLine{3541     \textcolor{keyword}{auto} gc\_notify\_updated\_slot = [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} object, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3542                                      \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} target) \{}
\DoxyCodeLine{3543       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(\textcolor{keywordtype}{object}, slot, Cast<HeapObject>(target));}
\DoxyCodeLine{3544     \};}
\DoxyCodeLine{3545     flushed\_js\_function-\/>ResetIfCodeFlushed(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3546                                             gc\_notify\_updated\_slot);}
\DoxyCodeLine{3547   \}}
\DoxyCodeLine{3548 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410}\label{classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearFullMapTransitions@{ClearFullMapTransitions}}
\index{ClearFullMapTransitions@{ClearFullMapTransitions}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearFullMapTransitions()}{ClearFullMapTransitions()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Full\+Map\+Transitions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3580 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3580                                                    \{}
\DoxyCodeLine{3581   Tagged<TransitionArray> array;}
\DoxyCodeLine{3582   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{3583   ReadOnlyRoots roots(isolate);}
\DoxyCodeLine{3584   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>transition\_arrays\_local.Pop(\&array)) \{}
\DoxyCodeLine{3585     \textcolor{keywordtype}{int} num\_transitions = array-\/>number\_of\_transitions();}
\DoxyCodeLine{3586     \textcolor{keywordflow}{if} (num\_transitions > 0) \{}
\DoxyCodeLine{3587         Tagged<Map> map;}
\DoxyCodeLine{3588         \textcolor{comment}{// The array might contain "{}undefined"{} elements because it's not yet}}
\DoxyCodeLine{3589         \textcolor{comment}{// filled. Allow it.}}
\DoxyCodeLine{3590         \textcolor{keywordflow}{if} (array-\/>GetTargetIfExists(0, isolate, \&map)) \{}
\DoxyCodeLine{3591           \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!map.is\_null());  \textcolor{comment}{// Weak pointers aren't cleared yet.}}
\DoxyCodeLine{3592           \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} \mbox{\hyperlink{namespacev8_1_1internal_ae3cd5ae1226a4707d6e6834191b97c92}{constructor\_or\_back\_pointer}} =}
\DoxyCodeLine{3593               map-\/>constructor\_or\_back\_pointer();}
\DoxyCodeLine{3594           \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_ac299e59759eecb4621f6bad64d5db952}{IsSmi}}(\mbox{\hyperlink{namespacev8_1_1internal_ae3cd5ae1226a4707d6e6834191b97c92}{constructor\_or\_back\_pointer}})) \{}
\DoxyCodeLine{3595             \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(isolate-\/>has\_active\_deserializer());}
\DoxyCodeLine{3596             \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_ae3cd5ae1226a4707d6e6834191b97c92}{constructor\_or\_back\_pointer}},}
\DoxyCodeLine{3597                       \mbox{\hyperlink{classv8_1_1internal_1_1Smi_ad0e5f2cc37fd6c47148dda7839ba4892}{Smi::uninitialized\_deserialization\_value}}());}
\DoxyCodeLine{3598             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{3599           \}}
\DoxyCodeLine{3600           Tagged<Map> parent = Cast<Map>(map-\/>constructor\_or\_back\_pointer());}
\DoxyCodeLine{3601           \textcolor{keyword}{const} \textcolor{keywordtype}{bool} parent\_is\_alive = \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(}
\DoxyCodeLine{3602               \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, parent);}
\DoxyCodeLine{3603           \mbox{\hyperlink{namespacev8_1_1internal_a403f10ce1c7dc18ea5f622a1aaa56285}{Tagged<DescriptorArray>}} descriptors =}
\DoxyCodeLine{3604               parent\_is\_alive ? parent-\/>instance\_descriptors(isolate)}
\DoxyCodeLine{3605                               : \mbox{\hyperlink{namespacev8_1_1internal_a403f10ce1c7dc18ea5f622a1aaa56285}{Tagged<DescriptorArray>}}();}
\DoxyCodeLine{3606           \textcolor{keywordtype}{bool} descriptors\_owner\_died =}
\DoxyCodeLine{3607               \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1}{CompactTransitionArray}}(parent, array, descriptors);}
\DoxyCodeLine{3608           \textcolor{keywordflow}{if} (descriptors\_owner\_died) \{}
\DoxyCodeLine{3609             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a71e8a1a84a4a8174d41df38622577ddb}{TrimDescriptorArray}}(parent, descriptors);}
\DoxyCodeLine{3610           \}}
\DoxyCodeLine{3611         \}}
\DoxyCodeLine{3612       \}}
\DoxyCodeLine{3613   \}}
\DoxyCodeLine{3614 \}}

\end{DoxyCode}


References v8\+::internal\+::constructor\+\_\+or\+\_\+back\+\_\+pointer, DCHECK, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Isolate\+::has\+\_\+active\+\_\+deserializer(), v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::is\+\_\+null(), v8\+::internal\+::\+Factory\+::isolate(), v8\+::internal\+::\+Is\+Smi(), and v8\+::internal\+::\+Tagged$<$ Descriptor\+Array $>$.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811}\label{classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearJSWeakRefs@{ClearJSWeakRefs}}
\index{ClearJSWeakRefs@{ClearJSWeakRefs}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearJSWeakRefs()}{ClearJSWeakRefs()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+JSWeak\+Refs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3938 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3938                                            \{}
\DoxyCodeLine{3939   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_JS\_WEAK\_REFERENCES);}
\DoxyCodeLine{3940   Tagged<JSWeakRef> weak\_ref;}
\DoxyCodeLine{3941   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{3942   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>js\_weak\_refs\_local.Pop(\&weak\_ref)) \{}
\DoxyCodeLine{3943     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} target = Cast<HeapObject>(weak\_ref-\/>target());}
\DoxyCodeLine{3944     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3945             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, target)) \{}
\DoxyCodeLine{3946       weak\_ref-\/>set\_target(ReadOnlyRoots(isolate).undefined\_value());}
\DoxyCodeLine{3947     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3948       \textcolor{comment}{// The value of the JSWeakRef is alive.}}
\DoxyCodeLine{3949       \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot = weak\_ref-\/>RawField(JSWeakRef::kTargetOffset);}
\DoxyCodeLine{3950       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(weak\_ref, slot, target);}
\DoxyCodeLine{3951     \}}
\DoxyCodeLine{3952   \}}
\DoxyCodeLine{3953   Tagged<WeakCell> weak\_cell;}
\DoxyCodeLine{3954   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_cells\_local.Pop(\&weak\_cell)) \{}
\DoxyCodeLine{3955     \textcolor{keyword}{auto} gc\_notify\_updated\_slot = [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} object, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3956                                      \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} target) \{}
\DoxyCodeLine{3957       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(target)) \{}
\DoxyCodeLine{3958         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(\textcolor{keywordtype}{object}, slot, Cast<HeapObject>(target));}
\DoxyCodeLine{3959       \}}
\DoxyCodeLine{3960     \};}
\DoxyCodeLine{3961     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} target = Cast<HeapObject>(weak\_cell-\/>target());}
\DoxyCodeLine{3962     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3963             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, target)) \{}
\DoxyCodeLine{3964       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1Object_a3fa7e2f730543261b565d9f664e50d69}{Object::CanBeHeldWeakly}}(target));}
\DoxyCodeLine{3965       \textcolor{comment}{// The value of the WeakCell is dead.}}
\DoxyCodeLine{3966       Tagged<JSFinalizationRegistry> finalization\_registry =}
\DoxyCodeLine{3967           Cast<JSFinalizationRegistry>(weak\_cell-\/>finalization\_registry());}
\DoxyCodeLine{3968       \textcolor{keywordflow}{if} (!finalization\_registry-\/>scheduled\_for\_cleanup()) \{}
\DoxyCodeLine{3969         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a1a0c76c9c449dfc8e225855b9417a4ed}{EnqueueDirtyJSFinalizationRegistry}}(finalization\_registry,}
\DoxyCodeLine{3970                                                   gc\_notify\_updated\_slot);}
\DoxyCodeLine{3971       \}}
\DoxyCodeLine{3972       \textcolor{comment}{// We're modifying the pointers in WeakCell and JSFinalizationRegistry}}
\DoxyCodeLine{3973       \textcolor{comment}{// during GC; thus we need to record the slots it writes. The normal write}}
\DoxyCodeLine{3974       \textcolor{comment}{// barrier is not enough, since it's disabled before GC.}}
\DoxyCodeLine{3975       weak\_cell-\/>Nullify(isolate, gc\_notify\_updated\_slot);}
\DoxyCodeLine{3976       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(finalization\_registry-\/>NeedsCleanup());}
\DoxyCodeLine{3977       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(finalization\_registry-\/>scheduled\_for\_cleanup());}
\DoxyCodeLine{3978     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3979       \textcolor{comment}{// The value of the WeakCell is alive.}}
\DoxyCodeLine{3980       \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot = weak\_cell-\/>RawField(WeakCell::kTargetOffset);}
\DoxyCodeLine{3981       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(weak\_cell, slot, Cast<HeapObject>(*slot));}
\DoxyCodeLine{3982     \}}
\DoxyCodeLine{3983 }
\DoxyCodeLine{3984     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} unregister\_token = weak\_cell-\/>unregister\_token();}
\DoxyCodeLine{3985     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3986             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, unregister\_token)) \{}
\DoxyCodeLine{3987       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1Object_a3fa7e2f730543261b565d9f664e50d69}{Object::CanBeHeldWeakly}}(unregister\_token));}
\DoxyCodeLine{3988       \textcolor{comment}{// The unregister token is dead. Remove any corresponding entries in the}}
\DoxyCodeLine{3989       \textcolor{comment}{// key map. Multiple WeakCell with the same token will have all their}}
\DoxyCodeLine{3990       \textcolor{comment}{// unregister\_token field set to undefined when processing the first}}
\DoxyCodeLine{3991       \textcolor{comment}{// WeakCell. Like above, we're modifying pointers during GC, so record the}}
\DoxyCodeLine{3992       \textcolor{comment}{// slots.}}
\DoxyCodeLine{3993       Tagged<JSFinalizationRegistry> finalization\_registry =}
\DoxyCodeLine{3994           Cast<JSFinalizationRegistry>(weak\_cell-\/>finalization\_registry());}
\DoxyCodeLine{3995       finalization\_registry-\/>RemoveUnregisterToken(}
\DoxyCodeLine{3996           unregister\_token, isolate,}
\DoxyCodeLine{3997           \mbox{\hyperlink{classv8_1_1internal_1_1JSFinalizationRegistry_adc9713e6adaaa4c89bf5e814c6c8d9f7a8317217427808991ad5756a7e7528643}{JSFinalizationRegistry::kKeepMatchedCellsInRegistry}},}
\DoxyCodeLine{3998           gc\_notify\_updated\_slot);}
\DoxyCodeLine{3999     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4000       \textcolor{comment}{// The unregister\_token is alive.}}
\DoxyCodeLine{4001       \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot = weak\_cell-\/>RawField(WeakCell::kUnregisterTokenOffset);}
\DoxyCodeLine{4002       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(weak\_cell, slot, Cast<HeapObject>(*slot));}
\DoxyCodeLine{4003     \}}
\DoxyCodeLine{4004   \}}
\DoxyCodeLine{4005   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a72b166a99a37b8b2f1c8af535e70f8a4}{PostFinalizationRegistryCleanupTaskIfNeeded}}();}
\DoxyCodeLine{4006 \}}

\end{DoxyCode}


References DCHECK, v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Factory\+::isolate(), and TRACE\+\_\+\+GC.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e}\label{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearNonLiveReferences@{ClearNonLiveReferences}}
\index{ClearNonLiveReferences@{ClearNonLiveReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearNonLiveReferences()}{ClearNonLiveReferences()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Non\+Live\+References (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2922 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2922                                                   \{}
\DoxyCodeLine{2923   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR);}
\DoxyCodeLine{2924 }
\DoxyCodeLine{2925   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{2926   \textcolor{keywordflow}{if} (isolate-\/>OwnsStringTables()) \{}
\DoxyCodeLine{2927     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{2928              GCTracer::Scope::MC\_CLEAR\_STRING\_FORWARDING\_TABLE);}
\DoxyCodeLine{2929     \textcolor{comment}{// Clear string forwarding table. Live strings are transitioned to}}
\DoxyCodeLine{2930     \textcolor{comment}{// ThinStrings/ExternalStrings in the cleanup process, if this is a GC}}
\DoxyCodeLine{2931     \textcolor{comment}{// without stack.}}
\DoxyCodeLine{2932     \textcolor{comment}{// Clearing the string forwarding table must happen before clearing the}}
\DoxyCodeLine{2933     \textcolor{comment}{// string table, as entries in the forwarding table can keep internalized}}
\DoxyCodeLine{2934     \textcolor{comment}{// strings alive.}}
\DoxyCodeLine{2935     FullStringForwardingTableCleaner forwarding\_table\_cleaner(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{2936     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae4625769d6915289a7acd2c41144b9c3}{IsGCWithStack}}() ||}
\DoxyCodeLine{2937         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.transition\_strings\_during\_gc\_with\_stack) \{}
\DoxyCodeLine{2938       forwarding\_table\_cleaner.TransitionStrings();}
\DoxyCodeLine{2939     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2940       forwarding\_table\_cleaner.ProcessFullWithStack();}
\DoxyCodeLine{2941     \}}
\DoxyCodeLine{2942   \}}
\DoxyCodeLine{2943 }
\DoxyCodeLine{2944   \{}
\DoxyCodeLine{2945     \textcolor{comment}{// Clear Isolate::topmost\_script\_having\_context slot if it's not alive.}}
\DoxyCodeLine{2946     \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} maybe\_caller\_context =}
\DoxyCodeLine{2947         isolate-\/>topmost\_script\_having\_context();}
\DoxyCodeLine{2948     \textcolor{keywordflow}{if} (maybe\_caller\_context.IsHeapObject() \&\&}
\DoxyCodeLine{2949         \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{2950             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, Cast<HeapObject>(maybe\_caller\_context))) \{}
\DoxyCodeLine{2951       isolate-\/>clear\_topmost\_script\_having\_context();}
\DoxyCodeLine{2952     \}}
\DoxyCodeLine{2953   \}}
\DoxyCodeLine{2954 }
\DoxyCodeLine{2955   std::unique\_ptr<JobHandle> clear\_string\_table\_job\_handle;}
\DoxyCodeLine{2956   \{}
\DoxyCodeLine{2957     \textcolor{keyword}{auto} job = std::make\_unique<ParallelClearingJob>(\textcolor{keyword}{this});}
\DoxyCodeLine{2958     \textcolor{keyword}{auto} job\_item = std::make\_unique<ClearStringTableJobItem>(isolate);}
\DoxyCodeLine{2959     \textcolor{keyword}{const} uint64\_t trace\_id = job\_item-\/>trace\_id();}
\DoxyCodeLine{2960     job-\/>Add(std::move(job\_item));}
\DoxyCodeLine{2961     \mbox{\hyperlink{gc-tracer_8h_a17375713518e1833362b491ef9c163cc}{TRACE\_GC\_NOTE\_WITH\_FLOW}}(\textcolor{stringliteral}{"{}ClearStringTableJob started"{}}, trace\_id,}
\DoxyCodeLine{2962                             \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{2963     \textcolor{keywordflow}{if} (isolate-\/>is\_shared\_space\_isolate() \&\&}
\DoxyCodeLine{2964         isolate-\/>shared\_struct\_type\_registry()) \{}
\DoxyCodeLine{2965       \textcolor{keyword}{auto} registry\_job\_item =}
\DoxyCodeLine{2966           std::make\_unique<ClearSharedStructTypeRegistryJobItem>(isolate);}
\DoxyCodeLine{2967       job-\/>Add(std::move(registry\_job\_item));}
\DoxyCodeLine{2968     \}}
\DoxyCodeLine{2969     clear\_string\_table\_job\_handle = \mbox{\hyperlink{classv8_1_1internal_1_1V8_a5eb1d47c492fa1e85e7d7c31dd5cf2bb}{V8::GetCurrentPlatform}}()-\/>\mbox{\hyperlink{classv8_1_1Platform_a5a62780772e38f1f00317fce609ec0d4}{CreateJob}}(}
\DoxyCodeLine{2970         \mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{TaskPriority::kUserBlocking}}, std::move(job));}
\DoxyCodeLine{2971   \}}
\DoxyCodeLine{2972   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.parallel\_weak\_ref\_clearing \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{UseBackgroundThreadsInCycle}}()) \{}
\DoxyCodeLine{2973     clear\_string\_table\_job\_handle-\/>NotifyConcurrencyIncrease();}
\DoxyCodeLine{2974   \}}
\DoxyCodeLine{2975 }
\DoxyCodeLine{2976   \{}
\DoxyCodeLine{2977     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_EXTERNAL\_STRING\_TABLE);}
\DoxyCodeLine{2978     ExternalStringTableCleanerVisitor<ExternalStringTableCleaningMode::kAll>}
\DoxyCodeLine{2979         external\_visitor(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{2980     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a05dd2031222f6f74fe86e1e31452031b}{external\_string\_table\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1Heap_1_1ExternalStringTable_ad58f00e9f7ff69db380d0fe5560f3d21}{IterateAll}}(\&external\_visitor);}
\DoxyCodeLine{2981     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a05dd2031222f6f74fe86e1e31452031b}{external\_string\_table\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1Heap_1_1ExternalStringTable_a653b979077953650437e44b27c0365d5}{CleanUpAll}}();}
\DoxyCodeLine{2982   \}}
\DoxyCodeLine{2983 }
\DoxyCodeLine{2984   \{}
\DoxyCodeLine{2985     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_WEAK\_GLOBAL\_HANDLES);}
\DoxyCodeLine{2986     \textcolor{comment}{// We depend on `IterateWeakRootsForPhantomHandles()` being called before}}
\DoxyCodeLine{2987     \textcolor{comment}{// `ProcessOldCodeCandidates()` in order to identify flushed bytecode in the}}
\DoxyCodeLine{2988     \textcolor{comment}{// CPU profiler.}}
\DoxyCodeLine{2989     isolate-\/>global\_handles()-\/>IterateWeakRootsForPhantomHandles(}
\DoxyCodeLine{2990         \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba}{IsUnmarkedHeapObject}});}
\DoxyCodeLine{2991     isolate-\/>traced\_handles()-\/>ResetDeadNodes(\&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba}{IsUnmarkedHeapObject}});}
\DoxyCodeLine{2992 }
\DoxyCodeLine{2993     \textcolor{keywordflow}{if} (isolate-\/>is\_shared\_space\_isolate()) \{}
\DoxyCodeLine{2994       isolate-\/>global\_safepoint()-\/>IterateClientIsolates([](Isolate* client) \{}
\DoxyCodeLine{2995         client-\/>global\_handles()-\/>IterateWeakRootsForPhantomHandles(}
\DoxyCodeLine{2996             \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe}{IsUnmarkedSharedHeapObject}});}
\DoxyCodeLine{2997         \textcolor{comment}{// No need to reset traced handles since they are always strong.}}
\DoxyCodeLine{2998       \});}
\DoxyCodeLine{2999     \}}
\DoxyCodeLine{3000   \}}
\DoxyCodeLine{3001 }
\DoxyCodeLine{3002   \{}
\DoxyCodeLine{3003     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_FLUSHABLE\_BYTECODE);}
\DoxyCodeLine{3004     \textcolor{comment}{// `ProcessFlushedBaselineCandidates()` must be called after}}
\DoxyCodeLine{3005     \textcolor{comment}{// `ProcessOldCodeCandidates()` so that we correctly set the code object on}}
\DoxyCodeLine{3006     \textcolor{comment}{// the JSFunction after flushing.}}
\DoxyCodeLine{3007     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b}{ProcessOldCodeCandidates}}();}
\DoxyCodeLine{3008 \textcolor{preprocessor}{\#ifndef V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3009     \textcolor{comment}{// With leaptiering this is done during sweeping.}}
\DoxyCodeLine{3010     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90e4a47ecc544481e5d1d8217817a392}{ProcessFlushedBaselineCandidates}}();}
\DoxyCodeLine{3011 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// !V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3012   \}}
\DoxyCodeLine{3013 }
\DoxyCodeLine{3014 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3015   \{}
\DoxyCodeLine{3016     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_JS\_DISPATCH\_TABLE);}
\DoxyCodeLine{3017     JSDispatchTable* jdt = \mbox{\hyperlink{classv8_1_1internal_1_1IsolateGroup_a3ca6c5d3f2b884f5866595543d2e0fd7}{IsolateGroup::current}}()-\/>js\_dispatch\_table();}
\DoxyCodeLine{3018     Tagged<Code> compile\_lazy =}
\DoxyCodeLine{3019         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a6cb0edf57f829ea37a9a48a3e6bc007d}{builtins}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Builtins_a2260f6f209a0b9af26f64d5cf774018b}{code}}(Builtin::kCompileLazy);}
\DoxyCodeLine{3020     jdt-\/>Sweep(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>js\_dispatch\_table\_space(), isolate-\/>counters(),}
\DoxyCodeLine{3021                [\&](JSDispatchEntry\& entry) \{}
\DoxyCodeLine{3022                  Tagged<Code> code = entry.GetCode();}
\DoxyCodeLine{3023                  if (MarkingHelper::IsUnmarkedAndNotAlwaysLive(}
\DoxyCodeLine{3024                          heap\_, marking\_state\_, code)) \{}
\DoxyCodeLine{3025                    \textcolor{comment}{// Baseline flushing: if the Code object is no longer alive,}}
\DoxyCodeLine{3026                    \textcolor{comment}{// it must have been flushed and so we replace it with the}}
\DoxyCodeLine{3027                    \textcolor{comment}{// CompileLazy builtin. Once we use leaptiering on all}}
\DoxyCodeLine{3028                    \textcolor{comment}{// platforms, we can probably simplify the other code related}}
\DoxyCodeLine{3029                    \textcolor{comment}{// to baseline flushing.}}
\DoxyCodeLine{3030 }
\DoxyCodeLine{3031                    \textcolor{comment}{// Currently, we can also see optimized code here. This}}
\DoxyCodeLine{3032                    \textcolor{comment}{// happens when a FeedbackCell for which no JSFunctions}}
\DoxyCodeLine{3033                    \textcolor{comment}{// remain references optimized code. However, in that case we}}
\DoxyCodeLine{3034                    \textcolor{comment}{// probably do want to delete the optimized code, so that is}}
\DoxyCodeLine{3035                    \textcolor{comment}{// working as intended. It does mean, however, that we cannot}}
\DoxyCodeLine{3036                    \textcolor{comment}{// DCHECK here that we only see baseline code.}}
\DoxyCodeLine{3037                    DCHECK(code-\/>kind() == CodeKind::FOR\_TESTING ||}
\DoxyCodeLine{3038                           code-\/>kind() == CodeKind::BASELINE ||}
\DoxyCodeLine{3039                           code-\/>kind() == CodeKind::MAGLEV ||}
\DoxyCodeLine{3040                           code-\/>kind() == CodeKind::TURBOFAN\_JS);}
\DoxyCodeLine{3041                    entry.SetCodeAndEntrypointPointer(}
\DoxyCodeLine{3042                        compile\_lazy.ptr(), compile\_lazy-\/>instruction\_start());}
\DoxyCodeLine{3043                  \}}
\DoxyCodeLine{3044                \});}
\DoxyCodeLine{3045   \}}
\DoxyCodeLine{3046 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3047 }
\DoxyCodeLine{3048   \textcolor{comment}{// TODO(olivf, 42204201): If we make the bytecode accessible from the dispatch}}
\DoxyCodeLine{3049   \textcolor{comment}{// table this could also be implemented during JSDispatchTable::Sweep.}}
\DoxyCodeLine{3050   \{}
\DoxyCodeLine{3051     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_FLUSHED\_JS\_FUNCTIONS);}
\DoxyCodeLine{3052     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af12dba7c5c1e1e2e5c8b30809005605b}{ClearFlushedJsFunctions}}();}
\DoxyCodeLine{3053   \}}
\DoxyCodeLine{3054 }
\DoxyCodeLine{3055   \{}
\DoxyCodeLine{3056     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_WEAK\_LISTS);}
\DoxyCodeLine{3057     \textcolor{comment}{// Process the weak references.}}
\DoxyCodeLine{3058     MarkCompactWeakObjectRetainer mark\_compact\_object\_retainer(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}},}
\DoxyCodeLine{3059                                                                \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}});}
\DoxyCodeLine{3060     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a138e7c8eb416809cbda8fc2fbbc28b17}{ProcessAllWeakReferences}}(\&mark\_compact\_object\_retainer);}
\DoxyCodeLine{3061   \}}
\DoxyCodeLine{3062 }
\DoxyCodeLine{3063   \{}
\DoxyCodeLine{3064     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_MAPS);}
\DoxyCodeLine{3065     \textcolor{comment}{// ClearFullMapTransitions must be called before weak references are}}
\DoxyCodeLine{3066     \textcolor{comment}{// cleared.}}
\DoxyCodeLine{3067     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_acae633babe09a8fa47c416b37fba6410}{ClearFullMapTransitions}}();}
\DoxyCodeLine{3068     \textcolor{comment}{// Weaken recorded strong DescriptorArray objects. This phase can}}
\DoxyCodeLine{3069     \textcolor{comment}{// potentially move everywhere after `ClearFullMapTransitions()`.}}
\DoxyCodeLine{3070     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a67923b4c8c39c7b225af81c264d2ee46}{WeakenStrongDescriptorArrays}}();}
\DoxyCodeLine{3071   \}}
\DoxyCodeLine{3072 }
\DoxyCodeLine{3073   \textcolor{comment}{// Start two parallel jobs: one for clearing trivial weak references and one}}
\DoxyCodeLine{3074   \textcolor{comment}{// for filtering out non-\/trivial weak references that will not be cleared.}}
\DoxyCodeLine{3075   \textcolor{comment}{// Both jobs read the values of weak references and the corresponding}}
\DoxyCodeLine{3076   \textcolor{comment}{// mark bits. They cannot start before the following methods have finished,}}
\DoxyCodeLine{3077   \textcolor{comment}{// because these may change the values of weak references and/or mark more}}
\DoxyCodeLine{3078   \textcolor{comment}{// objects, thus creating data races:}}
\DoxyCodeLine{3079   \textcolor{comment}{//   -\/ ProcessOldCodeCandidates}}
\DoxyCodeLine{3080   \textcolor{comment}{//   -\/ ProcessAllWeakReferences}}
\DoxyCodeLine{3081   \textcolor{comment}{//   -\/ ClearFullMapTransitions}}
\DoxyCodeLine{3082   \textcolor{comment}{//   -\/ WeakenStrongDescriptorArrays}}
\DoxyCodeLine{3083   \textcolor{comment}{// The two jobs could be merged but it's convenient to keep them separate,}}
\DoxyCodeLine{3084   \textcolor{comment}{// as they are joined at different times. The filtering job must be joined}}
\DoxyCodeLine{3085   \textcolor{comment}{// before proceeding to the actual clearing of non-\/trivial weak references,}}
\DoxyCodeLine{3086   \textcolor{comment}{// whereas the job for clearing trivial weak references can be joined at the}}
\DoxyCodeLine{3087   \textcolor{comment}{// end of this method.}}
\DoxyCodeLine{3088   std::unique\_ptr<JobHandle> clear\_trivial\_weakrefs\_job\_handle;}
\DoxyCodeLine{3089   \{}
\DoxyCodeLine{3090     \textcolor{keyword}{auto} job = std::make\_unique<ParallelClearingJob>(\textcolor{keyword}{this});}
\DoxyCodeLine{3091     \textcolor{keyword}{auto} job\_item = std::make\_unique<ClearTrivialWeakRefJobItem>(\textcolor{keyword}{this});}
\DoxyCodeLine{3092     \textcolor{keyword}{const} uint64\_t trace\_id = job\_item-\/>trace\_id();}
\DoxyCodeLine{3093     job-\/>Add(std::move(job\_item));}
\DoxyCodeLine{3094     \mbox{\hyperlink{gc-tracer_8h_a17375713518e1833362b491ef9c163cc}{TRACE\_GC\_NOTE\_WITH\_FLOW}}(\textcolor{stringliteral}{"{}ClearTrivialWeakRefJob started"{}}, trace\_id,}
\DoxyCodeLine{3095                             \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{3096     clear\_trivial\_weakrefs\_job\_handle = \mbox{\hyperlink{classv8_1_1internal_1_1V8_a5eb1d47c492fa1e85e7d7c31dd5cf2bb}{V8::GetCurrentPlatform}}()-\/>\mbox{\hyperlink{classv8_1_1Platform_a5a62780772e38f1f00317fce609ec0d4}{CreateJob}}(}
\DoxyCodeLine{3097         \mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{TaskPriority::kUserBlocking}}, std::move(job));}
\DoxyCodeLine{3098   \}}
\DoxyCodeLine{3099   std::unique\_ptr<JobHandle> filter\_non\_trivial\_weakrefs\_job\_handle;}
\DoxyCodeLine{3100   \{}
\DoxyCodeLine{3101     \textcolor{keyword}{auto} job = std::make\_unique<ParallelClearingJob>(\textcolor{keyword}{this});}
\DoxyCodeLine{3102     \textcolor{keyword}{auto} job\_item = std::make\_unique<FilterNonTrivialWeakRefJobItem>(\textcolor{keyword}{this});}
\DoxyCodeLine{3103     \textcolor{keyword}{const} uint64\_t trace\_id = job\_item-\/>trace\_id();}
\DoxyCodeLine{3104     job-\/>Add(std::move(job\_item));}
\DoxyCodeLine{3105     \mbox{\hyperlink{gc-tracer_8h_a17375713518e1833362b491ef9c163cc}{TRACE\_GC\_NOTE\_WITH\_FLOW}}(\textcolor{stringliteral}{"{}FilterNonTrivialWeakRefJob started"{}}, trace\_id,}
\DoxyCodeLine{3106                             \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{3107     filter\_non\_trivial\_weakrefs\_job\_handle =}
\DoxyCodeLine{3108         \mbox{\hyperlink{classv8_1_1internal_1_1V8_a5eb1d47c492fa1e85e7d7c31dd5cf2bb}{V8::GetCurrentPlatform}}()-\/>\mbox{\hyperlink{classv8_1_1Platform_a5a62780772e38f1f00317fce609ec0d4}{CreateJob}}(\mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{TaskPriority::kUserBlocking}},}
\DoxyCodeLine{3109                                             std::move(job));}
\DoxyCodeLine{3110   \}}
\DoxyCodeLine{3111   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.parallel\_weak\_ref\_clearing \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{UseBackgroundThreadsInCycle}}()) \{}
\DoxyCodeLine{3112     clear\_trivial\_weakrefs\_job\_handle-\/>NotifyConcurrencyIncrease();}
\DoxyCodeLine{3113     filter\_non\_trivial\_weakrefs\_job\_handle-\/>NotifyConcurrencyIncrease();}
\DoxyCodeLine{3114   \}}
\DoxyCodeLine{3115 }
\DoxyCodeLine{3116 \textcolor{preprocessor}{\#ifdef V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{3117   \{}
\DoxyCodeLine{3118     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_EXTERNAL\_POINTER\_TABLE);}
\DoxyCodeLine{3119     \textcolor{comment}{// External pointer table sweeping needs to happen before evacuating live}}
\DoxyCodeLine{3120     \textcolor{comment}{// objects as it may perform table compaction, which requires objects to}}
\DoxyCodeLine{3121     \textcolor{comment}{// still be at the same location as during marking.}}
\DoxyCodeLine{3122     \textcolor{comment}{//}}
\DoxyCodeLine{3123     \textcolor{comment}{// Note we explicitly do NOT run SweepAndCompact on}}
\DoxyCodeLine{3124     \textcolor{comment}{// read\_only\_external\_pointer\_space since these entries are all immortal by}}
\DoxyCodeLine{3125     \textcolor{comment}{// definition.}}
\DoxyCodeLine{3126     isolate-\/>external\_pointer\_table().EvacuateAndSweepAndCompact(}
\DoxyCodeLine{3127         isolate-\/>heap()-\/>old\_external\_pointer\_space(),}
\DoxyCodeLine{3128         isolate-\/>heap()-\/>young\_external\_pointer\_space(), isolate-\/>counters());}
\DoxyCodeLine{3129     isolate-\/>heap()-\/>young\_external\_pointer\_space()-\/>AssertEmpty();}
\DoxyCodeLine{3130     \textcolor{keywordflow}{if} (isolate-\/>owns\_shareable\_data()) \{}
\DoxyCodeLine{3131       isolate-\/>shared\_external\_pointer\_table().SweepAndCompact(}
\DoxyCodeLine{3132           isolate-\/>shared\_external\_pointer\_space(), isolate-\/>counters());}
\DoxyCodeLine{3133     \}}
\DoxyCodeLine{3134     isolate-\/>cpp\_heap\_pointer\_table().SweepAndCompact(}
\DoxyCodeLine{3135         isolate-\/>heap()-\/>cpp\_heap\_pointer\_space(), isolate-\/>counters());}
\DoxyCodeLine{3136   \}}
\DoxyCodeLine{3137 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{3138 }
\DoxyCodeLine{3139 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3140   \{}
\DoxyCodeLine{3141     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_TRUSTED\_POINTER\_TABLE);}
\DoxyCodeLine{3142     isolate-\/>trusted\_pointer\_table().Sweep(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>trusted\_pointer\_space(),}
\DoxyCodeLine{3143                                            isolate-\/>counters());}
\DoxyCodeLine{3144     \textcolor{keywordflow}{if} (isolate-\/>owns\_shareable\_data()) \{}
\DoxyCodeLine{3145       isolate-\/>shared\_trusted\_pointer\_table().Sweep(}
\DoxyCodeLine{3146           isolate-\/>shared\_trusted\_pointer\_space(), isolate-\/>counters());}
\DoxyCodeLine{3147     \}}
\DoxyCodeLine{3148   \}}
\DoxyCodeLine{3149 }
\DoxyCodeLine{3150   \{}
\DoxyCodeLine{3151     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_CODE\_POINTER\_TABLE);}
\DoxyCodeLine{3152     \mbox{\hyperlink{classv8_1_1internal_1_1IsolateGroup_a3ca6c5d3f2b884f5866595543d2e0fd7}{IsolateGroup::current}}()-\/>code\_pointer\_table()-\/>Sweep(}
\DoxyCodeLine{3153         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>code\_pointer\_space(), isolate-\/>counters());}
\DoxyCodeLine{3154   \}}
\DoxyCodeLine{3155 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3156 }
\DoxyCodeLine{3157 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{3158   \{}
\DoxyCodeLine{3159     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{3160              GCTracer::Scope::MC\_SWEEP\_WASM\_CODE\_POINTER\_TABLE);}
\DoxyCodeLine{3161     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adbb89ce490c56aae60c8221f47b9f088}{wasm::GetProcessWideWasmCodePointerTable}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_aee92d168ffa2e3a975289b9e785d10cd}{SweepSegments}}();}
\DoxyCodeLine{3162   \}}
\DoxyCodeLine{3163 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_WEBASSEMBLY}}
\DoxyCodeLine{3164 }
\DoxyCodeLine{3165   \{}
\DoxyCodeLine{3166     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{3167              GCTracer::Scope::MC\_CLEAR\_WEAK\_REFERENCES\_JOIN\_FILTER\_JOB);}
\DoxyCodeLine{3168     filter\_non\_trivial\_weakrefs\_job\_handle-\/>Join();}
\DoxyCodeLine{3169   \}}
\DoxyCodeLine{3170 }
\DoxyCodeLine{3171   \{}
\DoxyCodeLine{3172     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_WEAKNESS\_HANDLING);}
\DoxyCodeLine{3173     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c}{ClearNonTrivialWeakReferences}}();}
\DoxyCodeLine{3174     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a}{ClearWeakCollections}}();}
\DoxyCodeLine{3175     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9de8db3fd9c732c14070a08203daa811}{ClearJSWeakRefs}}();}
\DoxyCodeLine{3176   \}}
\DoxyCodeLine{3177 }
\DoxyCodeLine{3178   \mbox{\hyperlink{code-events_8h_ad6ec92ea4475dc9e407f0963df52df64}{PROFILE}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), WeakCodeClearEvent());}
\DoxyCodeLine{3179 }
\DoxyCodeLine{3180   \{}
\DoxyCodeLine{3181     \textcolor{comment}{// This method may be called from within a DisallowDeoptimizations scope.}}
\DoxyCodeLine{3182     \textcolor{comment}{// Temporarily allow deopts for marking code for deopt. This is not doing}}
\DoxyCodeLine{3183     \textcolor{comment}{// the deopt yet and the actual deopts will be bailed out on later if the}}
\DoxyCodeLine{3184     \textcolor{comment}{// current safepoint is not safe for deopts.}}
\DoxyCodeLine{3185     \textcolor{comment}{// TODO(357636610): Reconsider whether the DisallowDeoptimization scopes are}}
\DoxyCodeLine{3186     \textcolor{comment}{// truly needed.}}
\DoxyCodeLine{3187     AllowDeoptimization allow\_deoptimization(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3188     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5f4d0e2e67b039d30d737212e64b71fa}{MarkDependentCodeForDeoptimization}}();}
\DoxyCodeLine{3189   \}}
\DoxyCodeLine{3190 }
\DoxyCodeLine{3191   \{}
\DoxyCodeLine{3192     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_JOIN\_JOB);}
\DoxyCodeLine{3193     clear\_string\_table\_job\_handle-\/>Join();}
\DoxyCodeLine{3194     clear\_trivial\_weakrefs\_job\_handle-\/>Join();}
\DoxyCodeLine{3195   \}}
\DoxyCodeLine{3196 }
\DoxyCodeLine{3197   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sticky\_mark\_bits) \{}
\DoxyCodeLine{3198     \textcolor{comment}{// TODO(333906585): Consider adjusting the dchecks that happen on clearing}}
\DoxyCodeLine{3199     \textcolor{comment}{// and move this phase into MarkingBarrier::DeactivateAll.}}
\DoxyCodeLine{3200     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae8c724166308f15dfcf3e1a02b7c2819}{DeactivateMajorGCInProgressFlag}}();}
\DoxyCodeLine{3201   \}}
\DoxyCodeLine{3202 }
\DoxyCodeLine{3203   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.transition\_arrays.IsEmpty());}
\DoxyCodeLine{3204   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.weak\_references\_trivial.IsEmpty());}
\DoxyCodeLine{3205   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.weak\_references\_non\_trivial.IsEmpty());}
\DoxyCodeLine{3206   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.weak\_references\_non\_trivial\_unmarked.IsEmpty());}
\DoxyCodeLine{3207   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.weak\_objects\_in\_code.IsEmpty());}
\DoxyCodeLine{3208   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.js\_weak\_refs.IsEmpty());}
\DoxyCodeLine{3209   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.weak\_cells.IsEmpty());}
\DoxyCodeLine{3210   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.code\_flushing\_candidates.IsEmpty());}
\DoxyCodeLine{3211   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.flushed\_js\_functions.IsEmpty());}
\DoxyCodeLine{3212 \textcolor{preprocessor}{\#ifndef V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3213   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.baseline\_flushing\_candidates.IsEmpty());}
\DoxyCodeLine{3214 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// !V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{3215 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::clear\+\_\+topmost\+\_\+script\+\_\+having\+\_\+context(), v8\+::internal\+::\+Isolate\+::counters(), v8\+::\+Platform\+::\+Create\+Job(), v8\+::debug\+::\+Get\+Current\+Platform(), v8\+::internal\+::\+Isolate\+::global\+\_\+handles(), v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Factory\+::isolate(), v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates(), v8\+::internal\+::\+Global\+Handles\+::\+Iterate\+Weak\+Roots\+For\+Phantom\+Handles(), v8\+::k\+User\+Blocking, v8\+::internal\+::\+Isolate\+::\+Owns\+String\+Tables(), v8\+::internal\+::\+Full\+String\+Forwarding\+Table\+Cleaner\+::\+Process\+Full\+With\+Stack(), v8\+::internal\+::\+Traced\+Handles\+::\+Reset\+Dead\+Nodes(), v8\+::internal\+::\+Isolate\+::shared\+\_\+struct\+\_\+type\+\_\+registry(), v8\+::internal\+::\+Isolate\+::topmost\+\_\+script\+\_\+having\+\_\+context(), TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+OUT, TRACE\+\_\+\+GC, TRACE\+\_\+\+GC\+\_\+\+NOTE\+\_\+\+WITH\+\_\+\+FLOW, v8\+::internal\+::\+Isolate\+::traced\+\_\+handles(), v8\+::internal\+::\+Full\+String\+Forwarding\+Table\+Cleaner\+::\+Transition\+Strings(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c}\label{classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearNonTrivialWeakReferences@{ClearNonTrivialWeakReferences}}
\index{ClearNonTrivialWeakReferences@{ClearNonTrivialWeakReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearNonTrivialWeakReferences()}{ClearNonTrivialWeakReferences()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Non\+Trivial\+Weak\+References (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3915 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3915                                                          \{}
\DoxyCodeLine{3916   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{3917            GCTracer::Scope::MC\_CLEAR\_WEAK\_REFERENCES\_NON\_TRIVIAL);}
\DoxyCodeLine{3918   \mbox{\hyperlink{namespacev8_1_1internal_ace58b122ce17abc7ea987b863574310a}{HeapObjectAndSlot}} slot;}
\DoxyCodeLine{3919   Tagged<HeapObjectReference> cleared\_weak\_ref = \mbox{\hyperlink{namespacev8_1_1internal_aa2b1520107e1a7067d5db8226721c882}{ClearedValue}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3920   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_references\_non\_trivial\_unmarked\_local.Pop(}
\DoxyCodeLine{3921       \&slot)) \{}
\DoxyCodeLine{3922     \textcolor{comment}{// The slot may not have been overwritten since it was filtered, so we can}}
\DoxyCodeLine{3923     \textcolor{comment}{// directly read its value.}}
\DoxyCodeLine{3924     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}} = (*slot.slot).GetHeapObjectAssumeWeak();}
\DoxyCodeLine{3925     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!IsWeakCell(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3926     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a91ac1680dc7f626bd8675e14ac660240}{HeapLayout::InReadOnlySpace}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3927     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.black\_allocated\_pages,}
\DoxyCodeLine{3928                    !\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_ac9879fed71642d70a0509695654ff874}{HeapLayout::InBlackAllocatedPage}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3929     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_a13d4cff573da17af5b1532566911dfe9}{IsMarked}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3930     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkingVisitorBase_a8ee1d72c4c9542c38144e805f83299f6}{MainMarkingVisitor::IsTrivialWeakReferenceValue}}(slot.heap\_object,}
\DoxyCodeLine{3931                                                             \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3932     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887}{SpecialClearMapSlot}}(slot.heap\_object, Cast<Map>(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}), slot.slot)) \{}
\DoxyCodeLine{3933       slot.slot.store(cleared\_weak\_ref);}
\DoxyCodeLine{3934     \}}
\DoxyCodeLine{3935   \}}
\DoxyCodeLine{3936 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Cleared\+Value(), DCHECK, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::detail\+::\+Heap\+Object\+And\+Slot\+POD$<$ TSlot\+Type $>$\+::heap\+\_\+object, v8\+::internal\+::detail\+::\+Heap\+Object\+And\+Slot\+POD$<$ TSlot\+Type $>$\+::slot, TRACE\+\_\+\+GC, v8\+::internal\+::v8\+\_\+flags, and v8\+::internal\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ab9f8058df74c7f0a2611b5af24a75f4c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6}\label{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearPotentialSimpleMapTransition@{ClearPotentialSimpleMapTransition}}
\index{ClearPotentialSimpleMapTransition@{ClearPotentialSimpleMapTransition}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearPotentialSimpleMapTransition()}{ClearPotentialSimpleMapTransition()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Potential\+Simple\+Map\+Transition (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{dead\+\_\+target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3237 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3238                              \{}
\DoxyCodeLine{3239   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_aaf1662a3d84f030521524b6bc605785e}{IsUnmarked}}(dead\_target));}
\DoxyCodeLine{3240   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} potential\_parent = dead\_target-\/>constructor\_or\_back\_pointer();}
\DoxyCodeLine{3241   \textcolor{keywordflow}{if} (IsMap(potential\_parent)) \{}
\DoxyCodeLine{3242     Tagged<Map> parent = Cast<Map>(potential\_parent);}
\DoxyCodeLine{3243     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} no\_gc\_obviously;}
\DoxyCodeLine{3244     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3245                                             parent) \&\&}
\DoxyCodeLine{3246         TransitionsAccessor(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), parent)}
\DoxyCodeLine{3247             .HasSimpleTransitionTo(dead\_target)) \{}
\DoxyCodeLine{3248       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6}{ClearPotentialSimpleMapTransition}}(parent, dead\_target);}
\DoxyCodeLine{3249     \}}
\DoxyCodeLine{3250   \}}
\DoxyCodeLine{3251 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::\+Transitions\+Accessor\+::\+Has\+Simple\+Transition\+To().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a03e68bee93758940e2d106f7819cce9a}\label{classv8_1_1internal_1_1MarkCompactCollector_a03e68bee93758940e2d106f7819cce9a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearPotentialSimpleMapTransition@{ClearPotentialSimpleMapTransition}}
\index{ClearPotentialSimpleMapTransition@{ClearPotentialSimpleMapTransition}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearPotentialSimpleMapTransition()}{ClearPotentialSimpleMapTransition()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Potential\+Simple\+Map\+Transition (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{map,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{dead\+\_\+target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3253 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3254                                               \{}
\DoxyCodeLine{3255   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!map-\/>is\_prototype\_map());}
\DoxyCodeLine{3256   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!dead\_target-\/>is\_prototype\_map());}
\DoxyCodeLine{3257   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(map-\/>raw\_transitions(), \mbox{\hyperlink{namespacev8_1_1internal_a96a98d1219c08bac1c5c91ba9dacd1d4}{MakeWeak}}(dead\_target));}
\DoxyCodeLine{3258   \textcolor{comment}{// Take ownership of the descriptor array.}}
\DoxyCodeLine{3259   \textcolor{keywordtype}{int} number\_of\_own\_descriptors = map-\/>NumberOfOwnDescriptors();}
\DoxyCodeLine{3260   \mbox{\hyperlink{namespacev8_1_1internal_a403f10ce1c7dc18ea5f622a1aaa56285}{Tagged<DescriptorArray>}} descriptors =}
\DoxyCodeLine{3261       map-\/>instance\_descriptors(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3262   \textcolor{keywordflow}{if} (descriptors == dead\_target-\/>instance\_descriptors(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()) \&\&}
\DoxyCodeLine{3263       number\_of\_own\_descriptors > 0) \{}
\DoxyCodeLine{3264     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a71e8a1a84a4a8174d41df38622577ddb}{TrimDescriptorArray}}(map, descriptors);}
\DoxyCodeLine{3265     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(descriptors-\/>number\_of\_descriptors() == number\_of\_own\_descriptors);}
\DoxyCodeLine{3266   \}}
\DoxyCodeLine{3267 \}}

\end{DoxyCode}


References DCHECK, DCHECK\+\_\+\+EQ, and v8\+::api\+\_\+internal\+::\+Make\+Weak().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a03e68bee93758940e2d106f7819cce9a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4c690a1124b34af7925738d838255de0}\label{classv8_1_1internal_1_1MarkCompactCollector_a4c690a1124b34af7925738d838255de0}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearTrivialWeakReferences@{ClearTrivialWeakReferences}}
\index{ClearTrivialWeakReferences@{ClearTrivialWeakReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearTrivialWeakReferences()}{ClearTrivialWeakReferences()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Trivial\+Weak\+References (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3875 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3875                                                       \{}
\DoxyCodeLine{3876   Tagged<HeapObjectReference> cleared\_weak\_ref = \mbox{\hyperlink{namespacev8_1_1internal_aa2b1520107e1a7067d5db8226721c882}{ClearedValue}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3877   ClearWeakReferences<HeapObjectAndSlot, MaybeObjectSlot>(}
\DoxyCodeLine{3878       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_references\_trivial\_local, cleared\_weak\_ref);}
\DoxyCodeLine{3879 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Cleared\+Value().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a4c690a1124b34af7925738d838255de0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a94a20caf915889d8ba10e3bd9bbc3778}\label{classv8_1_1internal_1_1MarkCompactCollector_a94a20caf915889d8ba10e3bd9bbc3778}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearTrustedWeakReferences@{ClearTrustedWeakReferences}}
\index{ClearTrustedWeakReferences@{ClearTrustedWeakReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearTrustedWeakReferences()}{ClearTrustedWeakReferences()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Trusted\+Weak\+References (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3881 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3881                                                       \{}
\DoxyCodeLine{3882   Tagged<HeapObjectReference> cleared\_weak\_ref = \mbox{\hyperlink{namespacev8_1_1internal_aaae66fce459a82ed75641e4543500b4d}{ClearedTrustedValue}}();}
\DoxyCodeLine{3883   ClearWeakReferences<TrustedObjectAndSlot, ProtectedMaybeObjectSlot>(}
\DoxyCodeLine{3884       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_references\_trusted\_local, cleared\_weak\_ref);}
\DoxyCodeLine{3885 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Cleared\+Trusted\+Value().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a94a20caf915889d8ba10e3bd9bbc3778_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a}\label{classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearWeakCollections@{ClearWeakCollections}}
\index{ClearWeakCollections@{ClearWeakCollections}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearWeakCollections()}{ClearWeakCollections()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Weak\+Collections (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3809 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3809                                                 \{}
\DoxyCodeLine{3810   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_CLEAR\_WEAK\_COLLECTIONS);}
\DoxyCodeLine{3811   Tagged<EphemeronHashTable> table;}
\DoxyCodeLine{3812   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>ephemeron\_hash\_tables\_local.Pop(\&table)) \{}
\DoxyCodeLine{3813     \textcolor{keywordflow}{for} (InternalIndex \mbox{\hyperlink{namespacev8_1_1internal}{i}} : table-\/>IterateEntries()) \{}
\DoxyCodeLine{3814       \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}} = Cast<HeapObject>(table-\/>KeyAt(\mbox{\hyperlink{namespacev8_1_1internal}{i}}));}
\DoxyCodeLine{3815 \textcolor{preprocessor}{\#ifdef VERIFY\_HEAP}}
\DoxyCodeLine{3816       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.verify\_heap) \{}
\DoxyCodeLine{3817         \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}} = table-\/>ValueAt(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3818         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{3819           \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object = Cast<HeapObject>(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{3820 }
\DoxyCodeLine{3821           \mbox{\hyperlink{src_2base_2logging_8h_a2c0c4cea27d0690467662bb05131b2af}{CHECK\_IMPLIES}}(\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(}
\DoxyCodeLine{3822                             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}),}
\DoxyCodeLine{3823                         \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(}
\DoxyCodeLine{3824                             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, heap\_object));}
\DoxyCodeLine{3825         \}}
\DoxyCodeLine{3826       \}}
\DoxyCodeLine{3827 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// VERIFY\_HEAP}}
\DoxyCodeLine{3828       \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3829               \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}})) \{}
\DoxyCodeLine{3830         table-\/>RemoveEntry(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3831       \}}
\DoxyCodeLine{3832     \}}
\DoxyCodeLine{3833   \}}
\DoxyCodeLine{3834   \textcolor{keyword}{auto}* table\_map = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aa9f43334d731d1a0692665bbb1920242}{ephemeron\_remembered\_set}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1EphemeronRememberedSet_a8d68560e40252101787ea8c9f9316c89}{tables}}();}
\DoxyCodeLine{3835   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = table\_map-\/>begin(); it != table\_map-\/>end();) \{}
\DoxyCodeLine{3836     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3837             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, it-\/>first)) \{}
\DoxyCodeLine{3838       it = table\_map-\/>erase(it);}
\DoxyCodeLine{3839     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3840       ++it;}
\DoxyCodeLine{3841     \}}
\DoxyCodeLine{3842   \}}
\DoxyCodeLine{3843 \}}

\end{DoxyCode}


References CHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Heap\+Object(), v8\+::internal\+::key, TRACE\+\_\+\+GC, v8\+::internal\+::v8\+\_\+flags, and v8\+::internal\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a8683f1e2a840f0b54efff9b4a3d30e6a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a6c5024e51f8944c9ad34e7f962490285}\label{classv8_1_1internal_1_1MarkCompactCollector_a6c5024e51f8944c9ad34e7f962490285}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ClearWeakReferences@{ClearWeakReferences}}
\index{ClearWeakReferences@{ClearWeakReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ClearWeakReferences()}{ClearWeakReferences()}}
{\footnotesize\ttfamily template$<$typename TObject\+And\+Slot , typename TMaybe\+Slot $>$ \\
void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Clear\+Weak\+References (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_a7f664d7faebac274df585c5063ead655}{Weak\+Objects\+::\+Weak\+Object\+Worklist}}$<$ TObject\+And\+Slot $>$\+::\mbox{\hyperlink{classv8_1_1Local}{Local}} \&}]{worklist,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_ad79ecfc717a11290d821ed1f220434f6}{Heap\+Object\+Reference}} $>$}]{cleared\+\_\+weak\+\_\+ref }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3846 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3848                                                   \{}
\DoxyCodeLine{3849   TObjectAndSlot slot;}
\DoxyCodeLine{3850   \textcolor{keywordflow}{while} (worklist.Pop(\&slot)) \{}
\DoxyCodeLine{3851     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}};}
\DoxyCodeLine{3852     \textcolor{comment}{// The slot could have been overwritten, so we have to treat it}}
\DoxyCodeLine{3853     \textcolor{comment}{// as [Protected]MaybeObjectSlot.}}
\DoxyCodeLine{3854     TMaybeSlot location(slot.slot);}
\DoxyCodeLine{3855     \textcolor{keywordflow}{if} (location.load().GetHeapObjectIfWeak(\&\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{3856       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!IsWeakCell(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3857       \textcolor{comment}{// Values in RO space have already been filtered, but a non-\/RO value may}}
\DoxyCodeLine{3858       \textcolor{comment}{// have been overwritten by a RO value since marking.}}
\DoxyCodeLine{3859       \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3860                                               \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{3861         \textcolor{comment}{// The value of the weak reference is alive.}}
\DoxyCodeLine{3862         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(slot.heap\_object, slot.slot, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{3863       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3864         \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkingVisitorBase_a8ee1d72c4c9542c38144e805f83299f6}{MainMarkingVisitor::IsTrivialWeakReferenceValue}}(slot.heap\_object,}
\DoxyCodeLine{3865                                                                \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3866         \textcolor{comment}{// The value of the weak reference is non-\/live.}}
\DoxyCodeLine{3867         \textcolor{comment}{// This is a non-\/atomic store, which is fine as long as we only have a}}
\DoxyCodeLine{3868         \textcolor{comment}{// single clearing job.}}
\DoxyCodeLine{3869         location.store(cleared\_weak\_ref);}
\DoxyCodeLine{3870       \}}
\DoxyCodeLine{3871     \}}
\DoxyCodeLine{3872   \}}
\DoxyCodeLine{3873 \}}

\end{DoxyCode}


References DCHECK, heap\+::base\+::\+Worklist$<$ Entry\+Type, Min\+Segment\+Size $>$\+::\+Local\+::\+Pop(), and v8\+::internal\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a6c5024e51f8944c9ad34e7f962490285_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074}\label{classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!code\_flush\_mode@{code\_flush\_mode}}
\index{code\_flush\_mode@{code\_flush\_mode}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{code\_flush\_mode()}{code\_flush\_mode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1EnumSet}{base\+::\+Enum\+Set}}$<$\mbox{\hyperlink{namespacev8_1_1internal_aa9a47c3d58feefc8747cef370681925b}{Code\+Flush\+Mode}}$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::code\+\_\+flush\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 170 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{170                                                      \{}
\DoxyCodeLine{171     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a25ccbff2b71c818ffeab6970aad6510f}{code\_flush\_mode\_}};}
\DoxyCodeLine{172   \}}

\end{DoxyCode}


References code\+\_\+flush\+\_\+mode\+\_\+.



Referenced by Start\+Marking(), and v8\+::internal\+::\+Concurrent\+Marking\+::\+Try\+Schedule\+Job().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}\label{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!CollectEvacuationCandidates@{CollectEvacuationCandidates}}
\index{CollectEvacuationCandidates@{CollectEvacuationCandidates}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{CollectEvacuationCandidates()}{CollectEvacuationCandidates()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Collect\+Evacuation\+Candidates (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$}]{space }\end{DoxyParamCaption})}



Definition at line 609 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{609                                                                         \{}
\DoxyCodeLine{610   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99}{OLD\_SPACE}} || \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500}{CODE\_SPACE}} ||}
\DoxyCodeLine{611          \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8}{SHARED\_SPACE}} ||}
\DoxyCodeLine{612          \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b}{TRUSTED\_SPACE}});}
\DoxyCodeLine{613 }
\DoxyCodeLine{614   \textcolor{keywordtype}{int} number\_of\_pages = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>CountTotalPages();}
\DoxyCodeLine{615   \textcolor{keywordtype}{size\_t} area\_size = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>AreaSize();}
\DoxyCodeLine{616 }
\DoxyCodeLine{617   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} in\_standard\_path =}
\DoxyCodeLine{618       !(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.manual\_evacuation\_candidates\_selection ||}
\DoxyCodeLine{619         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction\_random || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction ||}
\DoxyCodeLine{620         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_on\_every\_full\_gc);}
\DoxyCodeLine{621   \textcolor{comment}{// Those variables will only be initialized if |in\_standard\_path|, and are not}}
\DoxyCodeLine{622   \textcolor{comment}{// used otherwise.}}
\DoxyCodeLine{623   \textcolor{keywordtype}{size\_t} max\_evacuated\_bytes;}
\DoxyCodeLine{624   \textcolor{keywordtype}{int} target\_fragmentation\_percent;}
\DoxyCodeLine{625   \textcolor{keywordtype}{size\_t} free\_bytes\_threshold;}
\DoxyCodeLine{626   \textcolor{keywordflow}{if} (in\_standard\_path) \{}
\DoxyCodeLine{627     \textcolor{comment}{// We use two conditions to decide whether a page qualifies as an evacuation}}
\DoxyCodeLine{628     \textcolor{comment}{// candidate, or not:}}
\DoxyCodeLine{629     \textcolor{comment}{// * Target fragmentation: How fragmented is a page, i.e., how is the ratio}}
\DoxyCodeLine{630     \textcolor{comment}{//   between live bytes and capacity of this page (= area).}}
\DoxyCodeLine{631     \textcolor{comment}{// * Evacuation quota: A global quota determining how much bytes should be}}
\DoxyCodeLine{632     \textcolor{comment}{//   compacted.}}
\DoxyCodeLine{633     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af}{ComputeEvacuationHeuristics}}(area\_size, \&target\_fragmentation\_percent,}
\DoxyCodeLine{634                                 \&max\_evacuated\_bytes);}
\DoxyCodeLine{635     free\_bytes\_threshold = target\_fragmentation\_percent * (area\_size / 100);}
\DoxyCodeLine{636   \}}
\DoxyCodeLine{637 }
\DoxyCodeLine{638   \textcolor{comment}{// Pairs of (live\_bytes\_in\_page, page).}}
\DoxyCodeLine{639   \textcolor{keyword}{using} LiveBytesPagePair = std::pair<size\_t, PageMetadata*>;}
\DoxyCodeLine{640   std::vector<LiveBytesPagePair> pages;}
\DoxyCodeLine{641   pages.reserve(number\_of\_pages);}
\DoxyCodeLine{642 }
\DoxyCodeLine{643   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a01bad92ed163322fda20e965bec9e19e}{sweeping\_in\_progress}}());}
\DoxyCodeLine{644   \textcolor{keywordflow}{for} (PageMetadata* p : *\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}) \{}
\DoxyCodeLine{645     MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{646     \textcolor{keywordflow}{if} (chunk-\/>NeverEvacuate() || !chunk-\/>CanAllocate()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{647 }
\DoxyCodeLine{648     \textcolor{keywordflow}{if} (chunk-\/>IsPinned()) \{}
\DoxyCodeLine{649       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!chunk-\/>IsFlagSet(}
\DoxyCodeLine{650           \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef}{MemoryChunk::FORCE\_EVACUATION\_CANDIDATE\_FOR\_TESTING}}));}
\DoxyCodeLine{651       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{652     \}}
\DoxyCodeLine{653 }
\DoxyCodeLine{654     \textcolor{comment}{// Invariant: Evacuation candidates are just created when marking is}}
\DoxyCodeLine{655     \textcolor{comment}{// started. This means that sweeping has finished. Furthermore, at the end}}
\DoxyCodeLine{656     \textcolor{comment}{// of a GC all evacuation candidates are cleared and their slot buffers are}}
\DoxyCodeLine{657     \textcolor{comment}{// released.}}
\DoxyCodeLine{658     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!chunk-\/>IsEvacuationCandidate());}
\DoxyCodeLine{659     \mbox{\hyperlink{src_2base_2logging_8h_a7bf1ad59490562f507223cd6ca2cc6fa}{CHECK\_NULL}}(p-\/>slot\_set<\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7}{OLD\_TO\_OLD}}>());}
\DoxyCodeLine{660     \mbox{\hyperlink{src_2base_2logging_8h_a7bf1ad59490562f507223cd6ca2cc6fa}{CHECK\_NULL}}(p-\/>typed\_slot\_set<\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7}{OLD\_TO\_OLD}}>());}
\DoxyCodeLine{661     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{662     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(p-\/>area\_size() == area\_size);}
\DoxyCodeLine{663     \textcolor{keywordflow}{if} (in\_standard\_path) \{}
\DoxyCodeLine{664       \textcolor{comment}{// Only the pages with at more than |free\_bytes\_threshold| free bytes are}}
\DoxyCodeLine{665       \textcolor{comment}{// considered for evacuation.}}
\DoxyCodeLine{666       \textcolor{keywordflow}{if} (area\_size -\/ p-\/>allocated\_bytes() >= free\_bytes\_threshold) \{}
\DoxyCodeLine{667         pages.push\_back(std::make\_pair(p-\/>allocated\_bytes(), p));}
\DoxyCodeLine{668       \}}
\DoxyCodeLine{669     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{670       pages.push\_back(std::make\_pair(p-\/>allocated\_bytes(), p));}
\DoxyCodeLine{671     \}}
\DoxyCodeLine{672   \}}
\DoxyCodeLine{673 }
\DoxyCodeLine{674   \textcolor{keywordtype}{int} candidate\_count = 0;}
\DoxyCodeLine{675   \textcolor{keywordtype}{size\_t} total\_live\_bytes = 0;}
\DoxyCodeLine{676 }
\DoxyCodeLine{677   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} reduce\_memory = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afd52b490b8d03599fbf5510d6f54b117}{ShouldReduceMemory}}();}
\DoxyCodeLine{678   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.manual\_evacuation\_candidates\_selection) \{}
\DoxyCodeLine{679     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < pages.size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{680       PageMetadata* p = pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].second;}
\DoxyCodeLine{681       MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{682       \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(}
\DoxyCodeLine{683               \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef}{MemoryChunk::FORCE\_EVACUATION\_CANDIDATE\_FOR\_TESTING}})) \{}
\DoxyCodeLine{684         candidate\_count++;}
\DoxyCodeLine{685         total\_live\_bytes += pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].first;}
\DoxyCodeLine{686         chunk-\/>ClearFlagSlow(}
\DoxyCodeLine{687             \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef}{MemoryChunk::FORCE\_EVACUATION\_CANDIDATE\_FOR\_TESTING}});}
\DoxyCodeLine{688         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}{AddEvacuationCandidate}}(p);}
\DoxyCodeLine{689       \}}
\DoxyCodeLine{690     \}}
\DoxyCodeLine{691   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction\_random) \{}
\DoxyCodeLine{692     \textcolor{keywordtype}{double} fraction = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_af9cf39c5ddba566eeed46a1f5064a561}{fuzzer\_rng}}()-\/>\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_a3cb661fd70f4322d36792f98acd6ca7e}{NextDouble}}();}
\DoxyCodeLine{693     \textcolor{keywordtype}{size\_t} pages\_to\_mark\_count =}
\DoxyCodeLine{694         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(fraction * (pages.size() + 1));}
\DoxyCodeLine{695     \textcolor{keywordflow}{for} (uint64\_t \mbox{\hyperlink{namespacev8_1_1internal}{i}} : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_af9cf39c5ddba566eeed46a1f5064a561}{fuzzer\_rng}}()-\/>\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_a4090ec844e0f1cc4150db68cf69c6c7d}{NextSample}}(}
\DoxyCodeLine{696              pages.size(), pages\_to\_mark\_count)) \{}
\DoxyCodeLine{697       candidate\_count++;}
\DoxyCodeLine{698       total\_live\_bytes += pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].first;}
\DoxyCodeLine{699       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}{AddEvacuationCandidate}}(pages[\mbox{\hyperlink{namespacev8_1_1internal}{i}}].second);}
\DoxyCodeLine{700     \}}
\DoxyCodeLine{701   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction) \{}
\DoxyCodeLine{702     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < pages.size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{703       PageMetadata* p = pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].second;}
\DoxyCodeLine{704       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal}{i}} \% 2 == 0) \{}
\DoxyCodeLine{705         candidate\_count++;}
\DoxyCodeLine{706         total\_live\_bytes += pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].first;}
\DoxyCodeLine{707         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}{AddEvacuationCandidate}}(p);}
\DoxyCodeLine{708       \}}
\DoxyCodeLine{709     \}}
\DoxyCodeLine{710   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{711     \textcolor{comment}{// The following approach determines the pages that should be evacuated.}}
\DoxyCodeLine{712     \textcolor{comment}{//}}
\DoxyCodeLine{713     \textcolor{comment}{// Sort pages from the most free to the least free, then select}}
\DoxyCodeLine{714     \textcolor{comment}{// the first n pages for evacuation such that:}}
\DoxyCodeLine{715     \textcolor{comment}{// -\/ the total size of evacuated objects does not exceed the specified}}
\DoxyCodeLine{716     \textcolor{comment}{// limit.}}
\DoxyCodeLine{717     \textcolor{comment}{// -\/ fragmentation of (n+1)-\/th page does not exceed the specified limit.}}
\DoxyCodeLine{718     \mbox{\hyperlink{namespacev8_1_1base_ae8575343c68d7ad91cf7aaf24cd6643f}{std::sort}}(pages.begin(), pages.end(),}
\DoxyCodeLine{719               [](\textcolor{keyword}{const} LiveBytesPagePair\& a, \textcolor{keyword}{const} LiveBytesPagePair\& b) \{}
\DoxyCodeLine{720                 return a.first < b.first;}
\DoxyCodeLine{721               \});}
\DoxyCodeLine{722     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < pages.size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{723       \textcolor{keywordtype}{size\_t} live\_bytes = pages[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}].first;}
\DoxyCodeLine{724       \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(area\_size, live\_bytes);}
\DoxyCodeLine{725       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_on\_every\_full\_gc ||}
\DoxyCodeLine{726           ((total\_live\_bytes + live\_bytes) <= max\_evacuated\_bytes)) \{}
\DoxyCodeLine{727         candidate\_count++;}
\DoxyCodeLine{728         total\_live\_bytes += live\_bytes;}
\DoxyCodeLine{729       \}}
\DoxyCodeLine{730       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_fragmentation\_verbose) \{}
\DoxyCodeLine{731         \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{732                      \textcolor{stringliteral}{"{}compaction-\/selection-\/page: space=\%s free\_bytes\_page=\%zu "{}}}
\DoxyCodeLine{733                      \textcolor{stringliteral}{"{}fragmentation\_limit\_kb=\%zu "{}}}
\DoxyCodeLine{734                      \textcolor{stringliteral}{"{}fragmentation\_limit\_percent=\%d sum\_compaction\_kb=\%zu "{}}}
\DoxyCodeLine{735                      \textcolor{stringliteral}{"{}compaction\_limit\_kb=\%zu\(\backslash\)n"{}},}
\DoxyCodeLine{736                      \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity()), (area\_size -\/ live\_bytes) / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}},}
\DoxyCodeLine{737                      free\_bytes\_threshold / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}, target\_fragmentation\_percent,}
\DoxyCodeLine{738                      total\_live\_bytes / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}, max\_evacuated\_bytes / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}});}
\DoxyCodeLine{739       \}}
\DoxyCodeLine{740     \}}
\DoxyCodeLine{741     \textcolor{comment}{// How many pages we will allocated for the evacuated objects}}
\DoxyCodeLine{742     \textcolor{comment}{// in the worst case: ceil(total\_live\_bytes / area\_size)}}
\DoxyCodeLine{743     \textcolor{keywordtype}{int} estimated\_new\_pages =}
\DoxyCodeLine{744         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}((total\_live\_bytes + area\_size -\/ 1) / area\_size);}
\DoxyCodeLine{745     \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(estimated\_new\_pages, candidate\_count);}
\DoxyCodeLine{746     \textcolor{keywordtype}{int} estimated\_released\_pages = candidate\_count -\/ estimated\_new\_pages;}
\DoxyCodeLine{747     \textcolor{comment}{// Avoid (compact -\/> expand) cycles.}}
\DoxyCodeLine{748     \textcolor{keywordflow}{if} ((estimated\_released\_pages == 0) \&\& !\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_on\_every\_full\_gc) \{}
\DoxyCodeLine{749       candidate\_count = 0;}
\DoxyCodeLine{750     \}}
\DoxyCodeLine{751     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < candidate\_count; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{752       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a325b77c4c0ed550f8eb2c317f8d5ebd3}{AddEvacuationCandidate}}(pages[\mbox{\hyperlink{namespacev8_1_1internal}{i}}].second);}
\DoxyCodeLine{753     \}}
\DoxyCodeLine{754   \}}
\DoxyCodeLine{755 }
\DoxyCodeLine{756   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_fragmentation) \{}
\DoxyCodeLine{757     \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{758                  \textcolor{stringliteral}{"{}compaction-\/selection: space=\%s reduce\_memory=\%d pages=\%d "{}}}
\DoxyCodeLine{759                  \textcolor{stringliteral}{"{}total\_live\_bytes=\%zu\(\backslash\)n"{}},}
\DoxyCodeLine{760                  \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity()), reduce\_memory, candidate\_count,}
\DoxyCodeLine{761                  total\_live\_bytes / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}});}
\DoxyCodeLine{762   \}}
\DoxyCodeLine{763 \}}

\end{DoxyCode}


References Add\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Can\+Allocate(), CHECK, CHECK\+\_\+\+NULL, v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), v8\+::internal\+::\+Memory\+Chunk\+::\+Clear\+Flag\+Slow(), v8\+::internal\+::\+CODE\+\_\+\+SPACE, Compute\+Evacuation\+Heuristics(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+GE, DCHECK\+\_\+\+LE, v8\+::internal\+::\+Memory\+Chunk\+::\+FORCE\+\_\+\+EVACUATION\+\_\+\+CANDIDATE\+\_\+\+FOR\+\_\+\+TESTING, v8\+::internal\+::\+Isolate\+::fuzzer\+\_\+rng(), heap\+\_\+, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Pinned(), v8\+::internal\+::\+KB, v8\+::internal\+::\+Memory\+Chunk\+::\+Never\+Evacuate(), v8\+::base\+::\+Random\+Number\+Generator\+::\+Next\+Double(), v8\+::base\+::\+Random\+Number\+Generator\+::\+Next\+Sample(), v8\+::internal\+::\+OLD\+\_\+\+SPACE, v8\+::internal\+::\+OLD\+\_\+\+TO\+\_\+\+OLD, v8\+::internal\+::\+Print\+Isolate(), v8\+::internal\+::\+SHARED\+\_\+\+SPACE, v8\+::internal\+::\+Heap\+::\+Should\+Reduce\+Memory(), v8\+::base\+::sort(), space, sweeper\+\_\+, v8\+::internal\+::\+Sweeper\+::sweeping\+\_\+in\+\_\+progress(), v8\+::internal\+::\+To\+String(), v8\+::internal\+::\+TRUSTED\+\_\+\+SPACE, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Start\+Compaction().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906}\label{classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!CollectGarbage@{CollectGarbage}}
\index{CollectGarbage@{CollectGarbage}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{CollectGarbage()}{CollectGarbage()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Collect\+Garbage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 488 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{488                                           \{}
\DoxyCodeLine{489   \textcolor{comment}{// Make sure that Prepare() has been called. The individual steps below will}}
\DoxyCodeLine{490   \textcolor{comment}{// update the state as they proceed.}}
\DoxyCodeLine{491   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(state\_ == PREPARE\_GC);}
\DoxyCodeLine{492 }
\DoxyCodeLine{493   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea}{MaybeEnableBackgroundThreadsInCycle}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7}{CallOrigin::kAtomicGC}});}
\DoxyCodeLine{494 }
\DoxyCodeLine{495   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e}{MarkLiveObjects}}();}
\DoxyCodeLine{496 }
\DoxyCodeLine{497   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})) \{}
\DoxyCodeLine{498     cpp\_heap-\/>ProcessCrossThreadWeakness();}
\DoxyCodeLine{499   \}}
\DoxyCodeLine{500 }
\DoxyCodeLine{501   \textcolor{comment}{// This will walk dead object graphs and so requires that all references are}}
\DoxyCodeLine{502   \textcolor{comment}{// still intact.}}
\DoxyCodeLine{503   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896}{RecordObjectStats}}();}
\DoxyCodeLine{504   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a129119a903f3c2057d4a02d0ed5d0e7e}{ClearNonLiveReferences}}();}
\DoxyCodeLine{505   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff}{VerifyMarking}}();}
\DoxyCodeLine{506 }
\DoxyCodeLine{507   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})) \{}
\DoxyCodeLine{508     cpp\_heap-\/>FinishMarkingAndProcessWeakness();}
\DoxyCodeLine{509   \}}
\DoxyCodeLine{510 }
\DoxyCodeLine{511   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abee2b61d93cc55561134df8f2ebb3401}{memory\_measurement}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryMeasurement_a2b16af443017f8c53573e169987d6d93}{FinishProcessing}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}{native\_context\_stats\_}});}
\DoxyCodeLine{512 }
\DoxyCodeLine{513   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe}{Sweep}}();}
\DoxyCodeLine{514   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa}{Evacuate}}();}
\DoxyCodeLine{515   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b}{Finish}}();}
\DoxyCodeLine{516 \}}

\end{DoxyCode}


References Clear\+Non\+Live\+References(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap\+\_\+, v8\+::internal\+::\+DCHECK(), Evacuate(), Finish(), v8\+::internal\+::\+Memory\+Measurement\+::\+Finish\+Processing(), v8\+::internal\+::\+Cpp\+Heap\+::\+From(), heap\+\_\+, k\+Atomic\+GC, Mark\+Live\+Objects(), Maybe\+Enable\+Background\+Threads\+In\+Cycle(), v8\+::internal\+::\+Heap\+::memory\+\_\+measurement(), native\+\_\+context\+\_\+stats\+\_\+, Record\+Object\+Stats(), Sweep(), and Verify\+Marking().



Referenced by v8\+::internal\+::\+Heap\+::\+Mark\+Compact().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a82db441b928fc8abc959d3d4c7c18906_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1}\label{classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!CompactTransitionArray@{CompactTransitionArray}}
\index{CompactTransitionArray@{CompactTransitionArray}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{CompactTransitionArray()}{CompactTransitionArray()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Compact\+Transition\+Array (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{map,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$}]{transitions,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{descriptors }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3651 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3653                                          \{}
\DoxyCodeLine{3654   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!map-\/>is\_prototype\_map());}
\DoxyCodeLine{3655   \textcolor{keywordtype}{int} num\_transitions = transitions-\/>number\_of\_transitions();}
\DoxyCodeLine{3656   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902}{TransitionArrayNeedsCompaction}}(transitions, num\_transitions)) \{}
\DoxyCodeLine{3657     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3658   \}}
\DoxyCodeLine{3659   ReadOnlyRoots roots(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3660   \textcolor{keywordtype}{bool} descriptors\_owner\_died = \textcolor{keyword}{false};}
\DoxyCodeLine{3661   \textcolor{keywordtype}{int} transition\_index = 0;}
\DoxyCodeLine{3662   \textcolor{comment}{// Compact all live transitions to the left.}}
\DoxyCodeLine{3663   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < num\_transitions; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{3664     Tagged<Map> target = transitions-\/>GetTarget(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3665     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(target-\/>constructor\_or\_back\_pointer(), map);}
\DoxyCodeLine{3666 }
\DoxyCodeLine{3667     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3668             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, target)) \{}
\DoxyCodeLine{3669       \textcolor{keywordflow}{if} (!descriptors.is\_null() \&\&}
\DoxyCodeLine{3670           target-\/>instance\_descriptors(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()) == descriptors) \{}
\DoxyCodeLine{3671         \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!target-\/>is\_prototype\_map());}
\DoxyCodeLine{3672         descriptors\_owner\_died = \textcolor{keyword}{true};}
\DoxyCodeLine{3673       \}}
\DoxyCodeLine{3674       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{3675     \}}
\DoxyCodeLine{3676 }
\DoxyCodeLine{3677     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal}{i}} != transition\_index) \{}
\DoxyCodeLine{3678       Tagged<Name> \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}} = transitions-\/>GetKey(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3679       transitions-\/>SetKey(transition\_index, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}});}
\DoxyCodeLine{3680       \mbox{\hyperlink{namespacev8_1_1internal_a5f8b754678e24836a51be62e3f8c3682}{HeapObjectSlot}} key\_slot = transitions-\/>GetKeySlot(transition\_index);}
\DoxyCodeLine{3681       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(transitions, key\_slot, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}});}
\DoxyCodeLine{3682       Tagged<MaybeObject> raw\_target = transitions-\/>GetRawTarget(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3683       transitions-\/>SetRawTarget(transition\_index, raw\_target);}
\DoxyCodeLine{3684       \mbox{\hyperlink{namespacev8_1_1internal_a5f8b754678e24836a51be62e3f8c3682}{HeapObjectSlot}} target\_slot = transitions-\/>GetTargetSlot(transition\_index);}
\DoxyCodeLine{3685       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(transitions, target\_slot, raw\_target.GetHeapObject());}
\DoxyCodeLine{3686     \}}
\DoxyCodeLine{3687     transition\_index++;}
\DoxyCodeLine{3688   \}}
\DoxyCodeLine{3689   \textcolor{comment}{// If there are no transitions to be cleared, return.}}
\DoxyCodeLine{3690   \textcolor{keywordflow}{if} (transition\_index == num\_transitions) \{}
\DoxyCodeLine{3691     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!descriptors\_owner\_died);}
\DoxyCodeLine{3692     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3693   \}}
\DoxyCodeLine{3694   \textcolor{comment}{// Note that we never eliminate a transition array, though we might right-\/trim}}
\DoxyCodeLine{3695   \textcolor{comment}{// such that number\_of\_transitions() == 0. If this assumption changes,}}
\DoxyCodeLine{3696   \textcolor{comment}{// TransitionArray::Insert() will need to deal with the case that a transition}}
\DoxyCodeLine{3697   \textcolor{comment}{// array disappeared during GC.}}
\DoxyCodeLine{3698   \textcolor{keywordtype}{int} old\_capacity\_in\_entries = transitions-\/>Capacity();}
\DoxyCodeLine{3699   \textcolor{keywordflow}{if} (transition\_index < old\_capacity\_in\_entries) \{}
\DoxyCodeLine{3700     \textcolor{keywordtype}{int} old\_capacity = transitions-\/>length();}
\DoxyCodeLine{3701     static\_assert(\mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray_a4e1011740332650975335363489c1d9f}{TransitionArray::kEntryKeyIndex}} == 0);}
\DoxyCodeLine{3702     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray_a1921e0066146c0dd4219d05e660e636b}{TransitionArray::ToKeyIndex}}(old\_capacity\_in\_entries),}
\DoxyCodeLine{3703               old\_capacity);}
\DoxyCodeLine{3704     \textcolor{keywordtype}{int} new\_capacity = \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray_a1921e0066146c0dd4219d05e660e636b}{TransitionArray::ToKeyIndex}}(transition\_index);}
\DoxyCodeLine{3705     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab5eb8c07e5ff4c9cc6e8559c6d24468c}{RightTrimArray}}(transitions, new\_capacity, old\_capacity);}
\DoxyCodeLine{3706     transitions-\/>SetNumberOfTransitions(transition\_index);}
\DoxyCodeLine{3707   \}}
\DoxyCodeLine{3708   \textcolor{keywordflow}{return} descriptors\_owner\_died;}
\DoxyCodeLine{3709 \}}

\end{DoxyCode}


References DCHECK, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Get\+Heap\+Object(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::is\+\_\+null(), and v8\+::internal\+::key.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a05a22eaa8eafd6ae1bcfb066edd7acc1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af}\label{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ComputeEvacuationHeuristics@{ComputeEvacuationHeuristics}}
\index{ComputeEvacuationHeuristics@{ComputeEvacuationHeuristics}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ComputeEvacuationHeuristics()}{ComputeEvacuationHeuristics()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Compute\+Evacuation\+Heuristics (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{area\+\_\+size,  }\item[{\mbox{\hyperlink{classint}{int}} $\ast$}]{target\+\_\+fragmentation\+\_\+percent,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{max\+\_\+evacuated\+\_\+bytes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 561 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{563                                  \{}
\DoxyCodeLine{564   \textcolor{comment}{// For memory reducing and optimize for memory mode we directly define both}}
\DoxyCodeLine{565   \textcolor{comment}{// constants.}}
\DoxyCodeLine{566   \textcolor{keyword}{const} \textcolor{keywordtype}{int} kTargetFragmentationPercentForReduceMemory = 20;}
\DoxyCodeLine{567   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} kMaxEvacuatedBytesForReduceMemory = 12 * \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}};}
\DoxyCodeLine{568   \textcolor{keyword}{const} \textcolor{keywordtype}{int} kTargetFragmentationPercentForOptimizeMemory = 20;}
\DoxyCodeLine{569   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} kMaxEvacuatedBytesForOptimizeMemory = 6 * \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}};}
\DoxyCodeLine{570 }
\DoxyCodeLine{571   \textcolor{comment}{// For regular mode (which is latency critical) we define less aggressive}}
\DoxyCodeLine{572   \textcolor{comment}{// defaults to start and switch to a trace-\/based (using compaction speed)}}
\DoxyCodeLine{573   \textcolor{comment}{// approach as soon as we have enough samples.}}
\DoxyCodeLine{574   \textcolor{keyword}{const} \textcolor{keywordtype}{int} kTargetFragmentationPercent = 70;}
\DoxyCodeLine{575   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} kMaxEvacuatedBytes = 4 * \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}};}
\DoxyCodeLine{576   \textcolor{comment}{// Time to take for a single area (=payload of page). Used as soon as there}}
\DoxyCodeLine{577   \textcolor{comment}{// exist enough compaction speed samples.}}
\DoxyCodeLine{578   \textcolor{keyword}{const} \textcolor{keywordtype}{float} kTargetMsPerArea = .5;}
\DoxyCodeLine{579 }
\DoxyCodeLine{580   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afd52b490b8d03599fbf5510d6f54b117}{ShouldReduceMemory}}()) \{}
\DoxyCodeLine{581     *target\_fragmentation\_percent = kTargetFragmentationPercentForReduceMemory;}
\DoxyCodeLine{582     *max\_evacuated\_bytes = kMaxEvacuatedBytesForReduceMemory;}
\DoxyCodeLine{583   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2128865e219ddb70695e23563141da9}{ShouldOptimizeForMemoryUsage}}()) \{}
\DoxyCodeLine{584     *target\_fragmentation\_percent =}
\DoxyCodeLine{585         kTargetFragmentationPercentForOptimizeMemory;}
\DoxyCodeLine{586     *max\_evacuated\_bytes = kMaxEvacuatedBytesForOptimizeMemory;}
\DoxyCodeLine{587   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{588     \textcolor{keyword}{const} std::optional<double> estimated\_compaction\_speed =}
\DoxyCodeLine{589         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GCTracer_ad7d2f16e123b5303b24858b22ddde30f}{CompactionSpeedInBytesPerMillisecond}}();}
\DoxyCodeLine{590     \textcolor{keywordflow}{if} (estimated\_compaction\_speed.has\_value()) \{}
\DoxyCodeLine{591       \textcolor{comment}{// Estimate the target fragmentation based on traced compaction speed}}
\DoxyCodeLine{592       \textcolor{comment}{// and a goal for a single page.}}
\DoxyCodeLine{593       \textcolor{keyword}{const} \textcolor{keywordtype}{double} estimated\_ms\_per\_area =}
\DoxyCodeLine{594           1 + area\_size / *estimated\_compaction\_speed;}
\DoxyCodeLine{595       *target\_fragmentation\_percent = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{596           100 -\/ 100 * kTargetMsPerArea / estimated\_ms\_per\_area);}
\DoxyCodeLine{597       \textcolor{keywordflow}{if} (*target\_fragmentation\_percent <}
\DoxyCodeLine{598           kTargetFragmentationPercentForReduceMemory) \{}
\DoxyCodeLine{599         *target\_fragmentation\_percent =}
\DoxyCodeLine{600             kTargetFragmentationPercentForReduceMemory;}
\DoxyCodeLine{601       \}}
\DoxyCodeLine{602     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{603       *target\_fragmentation\_percent = kTargetFragmentationPercent;}
\DoxyCodeLine{604     \}}
\DoxyCodeLine{605     *max\_evacuated\_bytes = kMaxEvacuatedBytes;}
\DoxyCodeLine{606   \}}
\DoxyCodeLine{607 \}}

\end{DoxyCode}


References v8\+::internal\+::\+GCTracer\+::\+Compaction\+Speed\+In\+Bytes\+Per\+Millisecond(), heap\+\_\+, v8\+::internal\+::\+MB, v8\+::internal\+::\+Heap\+::\+Should\+Optimize\+For\+Memory\+Usage(), v8\+::internal\+::\+Heap\+::\+Should\+Reduce\+Memory(), and v8\+::internal\+::\+Heap\+::tracer().



Referenced by Collect\+Evacuation\+Candidates().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a5baec12608267c330286a39281ddf7af_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984}\label{classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!epoch@{epoch}}
\index{epoch@{epoch}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{epoch()}{epoch()}}
{\footnotesize\ttfamily unsigned v8\+::internal\+::\+Mark\+Compact\+Collector\+::epoch (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 168 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{168 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a97165101e46c49ad2629345f1cb48da5}{epoch\_}}; \}}

\end{DoxyCode}


References epoch\+\_\+.



Referenced by Start\+Marking(), v8\+::internal\+::\+Concurrent\+Marking\+::\+Try\+Schedule\+Job(), and v8\+::internal\+::\+Marking\+Barrier\+::\+Write().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa}\label{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!Evacuate@{Evacuate}}
\index{Evacuate@{Evacuate}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{Evacuate()}{Evacuate()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Evacuate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5054 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5054                                     \{}
\DoxyCodeLine{5055   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE);}
\DoxyCodeLine{5056 }
\DoxyCodeLine{5057   \{}
\DoxyCodeLine{5058     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_PROLOGUE);}
\DoxyCodeLine{5059     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af5937c57f10e0293505055fc348ddde5}{EvacuatePrologue}}();}
\DoxyCodeLine{5060   \}}
\DoxyCodeLine{5061 }
\DoxyCodeLine{5062   \{}
\DoxyCodeLine{5063     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_COPY);}
\DoxyCodeLine{5064     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31}{EvacuatePagesInParallel}}();}
\DoxyCodeLine{5065   \}}
\DoxyCodeLine{5066 }
\DoxyCodeLine{5067   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8}{UpdatePointersAfterEvacuation}}();}
\DoxyCodeLine{5068 }
\DoxyCodeLine{5069   \{}
\DoxyCodeLine{5070     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_CLEAN\_UP);}
\DoxyCodeLine{5071 }
\DoxyCodeLine{5072     \textcolor{keywordflow}{for} (PageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{5073       MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{5074       \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fef}{AllocationSpace}} owner\_identity = p-\/>owner\_identity();}
\DoxyCodeLine{5075       \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(owner\_identity);}
\DoxyCodeLine{5076       \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}})) \{}
\DoxyCodeLine{5077         chunk-\/>ClearFlagNonExecutable(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}});}
\DoxyCodeLine{5078         \textcolor{comment}{// The in-\/sandbox page flags may be corrupted, so we currently need}}
\DoxyCodeLine{5079         \textcolor{comment}{// this check here to make sure that this doesn't lead to further}}
\DoxyCodeLine{5080         \textcolor{comment}{// confusion about the state of MemoryChunkMetadata objects.}}
\DoxyCodeLine{5081         \textcolor{comment}{// TODO(377724745): if we move (some of) the flags into the trusted}}
\DoxyCodeLine{5082         \textcolor{comment}{// MemoryChunkMetadata object, then this wouldn't be necessary.}}
\DoxyCodeLine{5083         \mbox{\hyperlink{check_8h_a6e67d209c0a0c9c55b7b563275f63bdd}{SBXCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99}{OLD\_SPACE}}, owner\_identity);}
\DoxyCodeLine{5084         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_afe45a9e97df960e8895bffde73c4f7d2}{AddPage}}(\mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99}{OLD\_SPACE}}, p);}
\DoxyCodeLine{5085       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.minor\_ms) \{}
\DoxyCodeLine{5086         \textcolor{comment}{// Sweep non-\/promoted pages to add them back to the free list.}}
\DoxyCodeLine{5087         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621}{NEW\_SPACE}}, owner\_identity);}
\DoxyCodeLine{5088         \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, p-\/>live\_bytes());}
\DoxyCodeLine{5089         \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{5090         PagedNewSpace* \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}} = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_acdb258ef166633d7ea0912d882109e30}{paged\_new\_space}}();}
\DoxyCodeLine{5091         \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>ShouldReleaseEmptyPage()) \{}
\DoxyCodeLine{5092           \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}{ReleasePage}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>paged\_space(), p);}
\DoxyCodeLine{5093         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5094           \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_aca5b4d1317e28419219a4ef8982efc72}{SweepEmptyNewSpacePage}}(p);}
\DoxyCodeLine{5095         \}}
\DoxyCodeLine{5096       \}}
\DoxyCodeLine{5097     \}}
\DoxyCodeLine{5098     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\_space\_evacuation\_pages\_}}.clear();}
\DoxyCodeLine{5099 }
\DoxyCodeLine{5100     \textcolor{keywordflow}{for} (LargePageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}{promoted\_large\_pages\_}}) \{}
\DoxyCodeLine{5101       MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{5102       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}}));}
\DoxyCodeLine{5103       chunk-\/>ClearFlagNonExecutable(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}});}
\DoxyCodeLine{5104       \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object} = p-\/>GetObject();}
\DoxyCodeLine{5105       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sticky\_mark\_bits) \{}
\DoxyCodeLine{5106         \mbox{\hyperlink{classv8_1_1internal_1_1MarkBit_aeb6b550934b84cc75caeb8458ec4ddcb}{MarkBit::From}}(\textcolor{keywordtype}{object}).\mbox{\hyperlink{classv8_1_1internal_1_1MarkBit_a049af8353d54d6548c03b84daa9f616b}{Clear}}();}
\DoxyCodeLine{5107         p-\/>SetLiveBytes(0);}
\DoxyCodeLine{5108       \}}
\DoxyCodeLine{5109       p-\/>marking\_progress\_tracker().ResetIfEnabled();}
\DoxyCodeLine{5110     \}}
\DoxyCodeLine{5111     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}{promoted\_large\_pages\_}}.clear();}
\DoxyCodeLine{5112 }
\DoxyCodeLine{5113     \textcolor{keywordflow}{for} (PageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{5114       MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{5115       \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}})) \{}
\DoxyCodeLine{5116         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_afe45a9e97df960e8895bffde73c4f7d2}{AddPage}}(p-\/>owner\_identity(), p);}
\DoxyCodeLine{5117         chunk-\/>ClearFlagSlow(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}});}
\DoxyCodeLine{5118       \}}
\DoxyCodeLine{5119     \}}
\DoxyCodeLine{5120   \}}
\DoxyCodeLine{5121 }
\DoxyCodeLine{5122   \{}
\DoxyCodeLine{5123     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_EPILOGUE);}
\DoxyCodeLine{5124     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa457554fa770421e38516be33c3cd201}{EvacuateEpilogue}}();}
\DoxyCodeLine{5125   \}}
\DoxyCodeLine{5126 }
\DoxyCodeLine{5127 \textcolor{preprocessor}{\#ifdef VERIFY\_HEAP}}
\DoxyCodeLine{5128   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.verify\_heap \&\& !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a01bad92ed163322fda20e965bec9e19e}{sweeping\_in\_progress}}()) \{}
\DoxyCodeLine{5129     EvacuationVerifier verifier(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{5130     verifier.Run();}
\DoxyCodeLine{5131   \}}
\DoxyCodeLine{5132 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// VERIFY\_HEAP}}
\DoxyCodeLine{5133 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+::\+Clear\+Flag\+Non\+Executable(), v8\+::internal\+::\+Memory\+Chunk\+::\+Clear\+Flag\+Slow(), DCHECK, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+NEW\+\_\+\+SPACE, v8\+::internal\+::\+OLD\+\_\+\+SPACE, SBXCHECK\+\_\+\+EQ, space, TRACE\+\_\+\+GC, USE, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa553d7a0b23e5ce515c7dd3289ae84fa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa457554fa770421e38516be33c3cd201}\label{classv8_1_1internal_1_1MarkCompactCollector_aa457554fa770421e38516be33c3cd201}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!EvacuateEpilogue@{EvacuateEpilogue}}
\index{EvacuateEpilogue@{EvacuateEpilogue}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{EvacuateEpilogue()}{EvacuateEpilogue()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Evacuate\+Epilogue (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 4454 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4454                                             \{}
\DoxyCodeLine{4455   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}.clear();}
\DoxyCodeLine{4456   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}{aborted\_evacuation\_candidates\_due\_to\_flags\_}}.clear();}
\DoxyCodeLine{4457 }
\DoxyCodeLine{4458   \textcolor{comment}{// New space.}}
\DoxyCodeLine{4459   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{4460     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()-\/>Size());}
\DoxyCodeLine{4461   \}}
\DoxyCodeLine{4462 }
\DoxyCodeLine{4463   \textcolor{comment}{// Old generation. Deallocate evacuated candidate pages.}}
\DoxyCodeLine{4464   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae07545bc19d80a27a63c760d875601c2}{ReleaseEvacuationCandidates}}();}
\DoxyCodeLine{4465 }
\DoxyCodeLine{4466 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{4467   VerifyRememberedSetsAfterEvacuation(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}});}
\DoxyCodeLine{4468 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// DEBUG}}
\DoxyCodeLine{4469 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31}\label{classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!EvacuatePagesInParallel@{EvacuatePagesInParallel}}
\index{EvacuatePagesInParallel@{EvacuatePagesInParallel}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{EvacuatePagesInParallel()}{EvacuatePagesInParallel()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Evacuate\+Pages\+In\+Parallel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 4933 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4933                                                    \{}
\DoxyCodeLine{4934   std::vector<std::pair<ParallelWorkItem, MutablePageMetadata*>>}
\DoxyCodeLine{4935       evacuation\_items;}
\DoxyCodeLine{4936   intptr\_t live\_bytes = 0;}
\DoxyCodeLine{4937 }
\DoxyCodeLine{4938   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77}{PinPreciseRootsIfNeeded}}();}
\DoxyCodeLine{4939 }
\DoxyCodeLine{4940   \textcolor{comment}{// Evacuation of new space pages cannot be aborted, so it needs to run}}
\DoxyCodeLine{4941   \textcolor{comment}{// before old space evacuation.}}
\DoxyCodeLine{4942   \textcolor{keywordtype}{bool} force\_page\_promotion =}
\DoxyCodeLine{4943       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae4625769d6915289a7acd2c41144b9c3}{IsGCWithStack}}() \&\& !\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_with\_stack;}
\DoxyCodeLine{4944   \textcolor{keywordflow}{for} (PageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{4945     intptr\_t live\_bytes\_on\_page = page-\/>live\_bytes();}
\DoxyCodeLine{4946     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0, live\_bytes\_on\_page);}
\DoxyCodeLine{4947     live\_bytes += live\_bytes\_on\_page;}
\DoxyCodeLine{4948     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a06d1c585f64ca4267edf4dd4f4e55cce}{MemoryReductionMode}} memory\_reduction\_mode =}
\DoxyCodeLine{4949         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afd52b490b8d03599fbf5510d6f54b117}{ShouldReduceMemory}}() ? MemoryReductionMode::kShouldReduceMemory}
\DoxyCodeLine{4950                                     : MemoryReductionMode::kNone;}
\DoxyCodeLine{4951     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a1c549e86327fe563e6aeb70af865fb4c}{ShouldMovePage}}(page, live\_bytes\_on\_page, memory\_reduction\_mode) ||}
\DoxyCodeLine{4952         force\_page\_promotion || page-\/>Chunk()-\/>IsQuarantined()) \{}
\DoxyCodeLine{4953       \mbox{\hyperlink{classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_ab08bf909e4b9d6b8aa72af4c17767896}{EvacuateNewToOldSpacePageVisitor::Move}}(page);}
\DoxyCodeLine{4954       page-\/>Chunk()-\/>SetFlagNonExecutable(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}});}
\DoxyCodeLine{4955       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}(), page-\/>owner());}
\DoxyCodeLine{4956       \textcolor{comment}{// The move added page-\/>allocated\_bytes to the old space, but we are}}
\DoxyCodeLine{4957       \textcolor{comment}{// going to sweep the page and add page-\/>live\_byte\_count.}}
\DoxyCodeLine{4958       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpaceBase_a1697e447747302fed8259e89b12a4651}{DecreaseAllocatedBytes}}(page-\/>allocated\_bytes(), page);}
\DoxyCodeLine{4959     \}}
\DoxyCodeLine{4960     evacuation\_items.emplace\_back(ParallelWorkItem\{\}, page);}
\DoxyCodeLine{4961   \}}
\DoxyCodeLine{4962 }
\DoxyCodeLine{4963   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae4625769d6915289a7acd2c41144b9c3}{IsGCWithStack}}()) \{}
\DoxyCodeLine{4964     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_with\_stack) \{}
\DoxyCodeLine{4965       \textcolor{keywordflow}{for} (PageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{4966         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}{ReportAbortedEvacuationCandidateDueToFlags}}(page, page-\/>Chunk());}
\DoxyCodeLine{4967       \}}
\DoxyCodeLine{4968     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_code\_space\_with\_stack ||}
\DoxyCodeLine{4969                \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a44b6ca4cd581c053d46bab9d0b67943c}{InFastCCall}}()) \{}
\DoxyCodeLine{4970       \textcolor{comment}{// For fast C calls we cannot patch the return address in the native stack}}
\DoxyCodeLine{4971       \textcolor{comment}{// frame if we would relocate InstructionStream objects.}}
\DoxyCodeLine{4972       \textcolor{keywordflow}{for} (PageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{4973         \textcolor{keywordflow}{if} (page-\/>owner\_identity() != \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500}{CODE\_SPACE}}) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{4974         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}{ReportAbortedEvacuationCandidateDueToFlags}}(page, page-\/>Chunk());}
\DoxyCodeLine{4975       \}}
\DoxyCodeLine{4976     \}}
\DoxyCodeLine{4977   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4978     \textcolor{comment}{// There should always be a stack when we are in a fast c call.}}
\DoxyCodeLine{4979     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a44b6ca4cd581c053d46bab9d0b67943c}{InFastCCall}}());}
\DoxyCodeLine{4980   \}}
\DoxyCodeLine{4981 }
\DoxyCodeLine{4982   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_compaction\_random) \{}
\DoxyCodeLine{4983     \textcolor{comment}{// Stress aborting of evacuation by aborting \string~10\% of evacuation candidates}}
\DoxyCodeLine{4984     \textcolor{comment}{// when stress testing.}}
\DoxyCodeLine{4985     \textcolor{keyword}{const} \textcolor{keywordtype}{double} kFraction = 0.05;}
\DoxyCodeLine{4986 }
\DoxyCodeLine{4987     \textcolor{keywordflow}{for} (PageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{4988       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_af9cf39c5ddba566eeed46a1f5064a561}{fuzzer\_rng}}()-\/>\mbox{\hyperlink{classv8_1_1base_1_1RandomNumberGenerator_a3cb661fd70f4322d36792f98acd6ca7e}{NextDouble}}() < kFraction) \{}
\DoxyCodeLine{4989         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}{ReportAbortedEvacuationCandidateDueToFlags}}(page, page-\/>Chunk());}
\DoxyCodeLine{4990       \}}
\DoxyCodeLine{4991     \}}
\DoxyCodeLine{4992   \}}
\DoxyCodeLine{4993 }
\DoxyCodeLine{4994   \textcolor{keywordflow}{for} (PageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{4995     MemoryChunk* chunk = page-\/>Chunk();}
\DoxyCodeLine{4996     \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}})) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{4997 }
\DoxyCodeLine{4998     live\_bytes += page-\/>live\_bytes();}
\DoxyCodeLine{4999     evacuation\_items.emplace\_back(ParallelWorkItem\{\}, page);}
\DoxyCodeLine{5000   \}}
\DoxyCodeLine{5001 }
\DoxyCodeLine{5002   \textcolor{comment}{// Promote young generation large objects.}}
\DoxyCodeLine{5003   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* new\_lo\_space = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}()) \{}
\DoxyCodeLine{5004     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = new\_lo\_space-\/>begin(); it != new\_lo\_space-\/>end();) \{}
\DoxyCodeLine{5005       LargePageMetadata* current = *(it++);}
\DoxyCodeLine{5006       \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object} = current-\/>GetObject();}
\DoxyCodeLine{5007       \textcolor{comment}{// The black-\/allocated flag was already cleared in SweepLargeSpace().}}
\DoxyCodeLine{5008       \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.black\_allocated\_pages,}
\DoxyCodeLine{5009                      !\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_ac9879fed71642d70a0509695654ff874}{HeapLayout::InBlackAllocatedPage}}(\textcolor{keywordtype}{object}));}
\DoxyCodeLine{5010       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_a13d4cff573da17af5b1532566911dfe9}{IsMarked}}(\textcolor{keywordtype}{object})) \{}
\DoxyCodeLine{5011         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2f135c51e5752f90638521eee547129}{lo\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1OldLargeObjectSpace_a70a9bca669df225ca07123ffc66c5757}{PromoteNewLargeObject}}(current);}
\DoxyCodeLine{5012         current-\/>Chunk()-\/>SetFlagNonExecutable(}
\DoxyCodeLine{5013             \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a57fdc5dfe8adf74f457803f1a2c9902b}{MemoryChunk::PAGE\_NEW\_OLD\_PROMOTION}});}
\DoxyCodeLine{5014         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}{promoted\_large\_pages\_}}.push\_back(current);}
\DoxyCodeLine{5015         evacuation\_items.emplace\_back(ParallelWorkItem\{\}, current);}
\DoxyCodeLine{5016       \}}
\DoxyCodeLine{5017     \}}
\DoxyCodeLine{5018     new\_lo\_space-\/>set\_objects\_size(0);}
\DoxyCodeLine{5019   \}}
\DoxyCodeLine{5020 }
\DoxyCodeLine{5021   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} pages\_count = evacuation\_items.size();}
\DoxyCodeLine{5022   \textcolor{keywordtype}{size\_t} wanted\_num\_tasks = 0;}
\DoxyCodeLine{5023   \textcolor{keywordflow}{if} (!evacuation\_items.empty()) \{}
\DoxyCodeLine{5024     \mbox{\hyperlink{trace-event-no-perfetto_8h_ac437f27e15925a9bd53c69692a6c85fe}{TRACE\_EVENT1}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.gc"{}}),}
\DoxyCodeLine{5025                  \textcolor{stringliteral}{"{}MarkCompactCollector::EvacuatePagesInParallel"{}}, \textcolor{stringliteral}{"{}pages"{}},}
\DoxyCodeLine{5026                  evacuation\_items.size());}
\DoxyCodeLine{5027 }
\DoxyCodeLine{5028     wanted\_num\_tasks = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_aea90dbf5b664542f92e8f0e7a13cfc01}{CreateAndExecuteEvacuationTasks}}(}
\DoxyCodeLine{5029         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \textcolor{keyword}{this}, std::move(evacuation\_items));}
\DoxyCodeLine{5030   \}}
\DoxyCodeLine{5031 }
\DoxyCodeLine{5032   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} aborted\_pages = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834}{PostProcessAbortedEvacuationCandidates}}();}
\DoxyCodeLine{5033 }
\DoxyCodeLine{5034   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_evacuation) \{}
\DoxyCodeLine{5035     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a8401873f434983f85f97f0b3ded61cd9}{TraceEvacuation}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), pages\_count, wanted\_num\_tasks, live\_bytes,}
\DoxyCodeLine{5036                     aborted\_pages);}
\DoxyCodeLine{5037   \}}
\DoxyCodeLine{5038 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), v8\+::internal\+::\+CODE\+\_\+\+SPACE, v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Create\+And\+Execute\+Evacuation\+Tasks(), DCHECK, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, DCHECK\+\_\+\+LT, v8\+::internal\+::\+Large\+Page\+Metadata\+::\+Get\+Object(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Memory\+Chunk\+::\+Set\+Flag\+Non\+Executable(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Should\+Move\+Page(), TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT1, v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Trace\+Evacuation(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a819031ab4fbcb232c34b4ae3cd9b6b31_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af5937c57f10e0293505055fc348ddde5}\label{classv8_1_1internal_1_1MarkCompactCollector_af5937c57f10e0293505055fc348ddde5}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!EvacuatePrologue@{EvacuatePrologue}}
\index{EvacuatePrologue@{EvacuatePrologue}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{EvacuatePrologue()}{EvacuatePrologue()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Evacuate\+Prologue (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 4429 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4429                                             \{}
\DoxyCodeLine{4430   \textcolor{comment}{// New space.}}
\DoxyCodeLine{4431   \textcolor{keywordflow}{if} (NewSpace* new\_space = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{4432     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\_space\_evacuation\_pages\_}}.empty());}
\DoxyCodeLine{4433     std::copy\_if(new\_space-\/>begin(), new\_space-\/>end(),}
\DoxyCodeLine{4434                  std::back\_inserter(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}{new\_space\_evacuation\_pages\_}}),}
\DoxyCodeLine{4435                  [](PageMetadata* p) \{ return p-\/>live\_bytes() > 0; \});}
\DoxyCodeLine{4436     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.minor\_ms) \{}
\DoxyCodeLine{4437       \mbox{\hyperlink{classv8_1_1internal_1_1SemiSpaceNewSpace_a6a1e4d7add6a528eb4e3f406327e8ebf}{SemiSpaceNewSpace::From}}(new\_space)-\/>\mbox{\hyperlink{classv8_1_1internal_1_1SemiSpaceNewSpace_a0d9dea5f329c0ab598b5cc85f6f28600}{SwapSemiSpaces}}();}
\DoxyCodeLine{4438     \}}
\DoxyCodeLine{4439   \}}
\DoxyCodeLine{4440 }
\DoxyCodeLine{4441   \textcolor{comment}{// Large new space.}}
\DoxyCodeLine{4442   \textcolor{keywordflow}{if} (NewLargeObjectSpace* new\_lo\_space = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}()) \{}
\DoxyCodeLine{4443     new\_lo\_space-\/>Flip();}
\DoxyCodeLine{4444     new\_lo\_space-\/>ResetPendingObject();}
\DoxyCodeLine{4445   \}}
\DoxyCodeLine{4446 }
\DoxyCodeLine{4447   \textcolor{comment}{// Old space.}}
\DoxyCodeLine{4448   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}.empty());}
\DoxyCodeLine{4449   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}} = std::move(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}});}
\DoxyCodeLine{4450   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}}.clear();}
\DoxyCodeLine{4451   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}}.empty());}
\DoxyCodeLine{4452 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ae8d1737f64ec1c402f115889a75d1cbf}\label{classv8_1_1internal_1_1MarkCompactCollector_ae8d1737f64ec1c402f115889a75d1cbf}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!FilterNonTrivialWeakReferences@{FilterNonTrivialWeakReferences}}
\index{FilterNonTrivialWeakReferences@{FilterNonTrivialWeakReferences}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{FilterNonTrivialWeakReferences()}{FilterNonTrivialWeakReferences()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Filter\+Non\+Trivial\+Weak\+References (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3887 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3887                                                           \{}
\DoxyCodeLine{3888   \mbox{\hyperlink{namespacev8_1_1internal_ace58b122ce17abc7ea987b863574310a}{HeapObjectAndSlot}} slot;}
\DoxyCodeLine{3889   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_references\_non\_trivial\_local.Pop(\&slot)) \{}
\DoxyCodeLine{3890     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}};}
\DoxyCodeLine{3891     \textcolor{comment}{// The slot could have been overwritten, so we have to treat it}}
\DoxyCodeLine{3892     \textcolor{comment}{// as MaybeObjectSlot.}}
\DoxyCodeLine{3893     \mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} location(slot.slot);}
\DoxyCodeLine{3894     \textcolor{keywordflow}{if} ((*location).GetHeapObjectIfWeak(\&\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{3895       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!IsWeakCell(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3896       \textcolor{comment}{// Values in RO space have already been filtered, but a non-\/RO value may}}
\DoxyCodeLine{3897       \textcolor{comment}{// have been overwritten by a RO value since marking.}}
\DoxyCodeLine{3898       \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3899                                               \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})) \{}
\DoxyCodeLine{3900         \textcolor{comment}{// The value of the weak reference is alive.}}
\DoxyCodeLine{3901         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(slot.heap\_object, \mbox{\hyperlink{namespacev8_1_1internal_a5f8b754678e24836a51be62e3f8c3682}{HeapObjectSlot}}(location), \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{3902       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3903         \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkingVisitorBase_a8ee1d72c4c9542c38144e805f83299f6}{MainMarkingVisitor::IsTrivialWeakReferenceValue}}(}
\DoxyCodeLine{3904             slot.heap\_object, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}));}
\DoxyCodeLine{3905         \textcolor{comment}{// The value is non-\/live, defer the actual clearing.}}
\DoxyCodeLine{3906         \textcolor{comment}{// This is non-\/atomic, which is fine as long as we only have a single}}
\DoxyCodeLine{3907         \textcolor{comment}{// filtering job.}}
\DoxyCodeLine{3908         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}}-\/>weak\_references\_non\_trivial\_unmarked\_local.Push(}
\DoxyCodeLine{3909             slot);}
\DoxyCodeLine{3910       \}}
\DoxyCodeLine{3911     \}}
\DoxyCodeLine{3912   \}}
\DoxyCodeLine{3913 \}}

\end{DoxyCode}


References DCHECK, v8\+::internal\+::detail\+::\+Heap\+Object\+And\+Slot\+POD$<$ TSlot\+Type $>$\+::heap\+\_\+object, v8\+::internal\+::detail\+::\+Heap\+Object\+And\+Slot\+POD$<$ TSlot\+Type $>$\+::slot, and v8\+::internal\+::value.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b}\label{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!Finish@{Finish}}
\index{Finish@{Finish}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{Finish()}{Finish()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Finish (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 849 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{849                                   \{}
\DoxyCodeLine{850   \{}
\DoxyCodeLine{851     \mbox{\hyperlink{gc-tracer_8h_a44d6debe5f608aa9654172245625ef38}{TRACE\_GC\_EPOCH\_WITH\_FLOW}}(}
\DoxyCodeLine{852         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}},}
\DoxyCodeLine{853         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a374de26e99dae0ad5f32c1cbeab58285}{GetTraceIdForFlowEvent}}(GCTracer::Scope::MC\_SWEEP),}
\DoxyCodeLine{854         \mbox{\hyperlink{trace-event-no-perfetto_8h_afd116bac8e67a7eafb2b21a62f0a383f}{TRACE\_EVENT\_FLAG\_FLOW\_IN}} | \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{855 }
\DoxyCodeLine{856     \textcolor{comment}{// Delay releasing empty new space pages and dead new large object pages}}
\DoxyCodeLine{857     \textcolor{comment}{// until after pointer updating is done because dead old space objects may}}
\DoxyCodeLine{858     \textcolor{comment}{// have slots pointing to these pages and will need to be updated.}}
\DoxyCodeLine{859     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.minor\_ms,}
\DoxyCodeLine{860                    \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}.empty());}
\DoxyCodeLine{861     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}.empty()) \{}
\DoxyCodeLine{862       GCTracer::Scope sweep\_scope(}
\DoxyCodeLine{863           \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_NEW, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{864       \textcolor{keywordflow}{for} (PageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}) \{}
\DoxyCodeLine{865         \textcolor{comment}{// Sweeping empty pages already relinks them to the freelist.}}
\DoxyCodeLine{866         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_aca5b4d1317e28419219a4ef8982efc72}{SweepEmptyNewSpacePage}}(p);}
\DoxyCodeLine{867       \}}
\DoxyCodeLine{868       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}.clear();}
\DoxyCodeLine{869     \}}
\DoxyCodeLine{870 }
\DoxyCodeLine{871     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}()) \{}
\DoxyCodeLine{872       \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_NEW\_LO);}
\DoxyCodeLine{873       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{SweepLargeSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}());}
\DoxyCodeLine{874     \}}
\DoxyCodeLine{875 }
\DoxyCodeLine{876 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{877     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>VerifyCountersBeforeConcurrentSweeping(}
\DoxyCodeLine{878         \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}});}
\DoxyCodeLine{879 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// DEBUG}}
\DoxyCodeLine{880   \}}
\DoxyCodeLine{881 }
\DoxyCodeLine{882   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{883     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE);}
\DoxyCodeLine{884     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_REBALANCE);}
\DoxyCodeLine{885     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a4f77b61e4d779f97f1305eb1b7339bc4}{ResizeNewSpace}}();}
\DoxyCodeLine{886   \}}
\DoxyCodeLine{887 }
\DoxyCodeLine{888   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_FINISH);}
\DoxyCodeLine{889 }
\DoxyCodeLine{890   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{891     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a71a5010a2dde4bbad050c4947dc450e2}{allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1HeapAllocator_a021e4a3fc4d7ff340e494fa638d848ef}{new\_space\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MainAllocator_af63591da1398980234236b7168175772}{IsLabValid}}());}
\DoxyCodeLine{892     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1NewSpace_a6666d02587ff04156b91f1e56dbedbd7}{GarbageCollectionEpilogue}}();}
\DoxyCodeLine{893   \}}
\DoxyCodeLine{894 }
\DoxyCodeLine{895   \textcolor{keyword}{auto}* isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{896   isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a2714e74bceacf9555c6a02745a0319e2}{global\_handles}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandles_a286951f39aa659e819fdcbcf31cd7d9d}{ClearListOfYoungNodes}}();}
\DoxyCodeLine{897 }
\DoxyCodeLine{898   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c}{SweepArrayBufferExtensions}}();}
\DoxyCodeLine{899 }
\DoxyCodeLine{900   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}{marking\_visitor\_}}.reset();}
\DoxyCodeLine{901   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.reset();}
\DoxyCodeLine{902   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\_worklists\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_ad043c0f34b550badabc3d15a17c52943}{ReleaseContextWorklists}}();}
\DoxyCodeLine{903   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}{native\_context\_stats\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1NativeContextStats_af295a45eb3605b4771e84ae2aa4a7f48}{Clear}}();}
\DoxyCodeLine{904   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.clear();}
\DoxyCodeLine{905 }
\DoxyCodeLine{906   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.current\_ephemerons.IsEmpty());}
\DoxyCodeLine{907   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}}-\/>next\_ephemerons\_local.Publish();}
\DoxyCodeLine{908   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}}.reset();}
\DoxyCodeLine{909   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.next\_ephemerons.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_a0557b5c72151038a6d73b9d5aa6804eb}{Clear}}();}
\DoxyCodeLine{910 }
\DoxyCodeLine{911   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a18ffd1567b5bf06adae1fff80f4207d0}{StartMajorSweeperTasks}}();}
\DoxyCodeLine{912 }
\DoxyCodeLine{913   \textcolor{comment}{// Release empty pages now, when the pointer-\/update phase is done.}}
\DoxyCodeLine{914   \textcolor{keywordflow}{for} (MutablePageMetadata* page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\_pages\_to\_be\_freed\_}}) \{}
\DoxyCodeLine{915     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9564c4573a66c20043a7602155074b57}{memory\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a44f020919cc4a6c1859943003e577424}{Free}}(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5}{MemoryAllocator::FreeMode::kImmediately}},}
\DoxyCodeLine{916                                     page);}
\DoxyCodeLine{917   \}}
\DoxyCodeLine{918   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\_pages\_to\_be\_freed\_}}.clear();}
\DoxyCodeLine{919 }
\DoxyCodeLine{920   \textcolor{comment}{// Shrink pages if possible after processing and filtering slots.}}
\DoxyCodeLine{921   \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a2f28540a451fde6740ec4100c5e186ea}{ShrinkPagesToObjectSizes}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2f135c51e5752f90638521eee547129}{lo\_space}}());}
\DoxyCodeLine{922 }
\DoxyCodeLine{923 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{924   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(state\_ == SWEEP\_SPACES || state\_ == RELOCATE\_OBJECTS);}
\DoxyCodeLine{925   state\_ = \mbox{\hyperlink{namespacev8_af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8}{IDLE}};}
\DoxyCodeLine{926 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{927 }
\DoxyCodeLine{928   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}{have\_code\_to\_deoptimize\_}}) \{}
\DoxyCodeLine{929     \textcolor{comment}{// Some code objects were marked for deoptimization during the GC.}}
\DoxyCodeLine{930     \mbox{\hyperlink{classv8_1_1internal_1_1Deoptimizer_a7cbb81963c0529cc90612511d408db06}{Deoptimizer::DeoptimizeMarkedCode}}(isolate);}
\DoxyCodeLine{931     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}{have\_code\_to\_deoptimize\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{932   \}}
\DoxyCodeLine{933 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::allocator(), CHECK, v8\+::internal\+::\+Native\+Context\+Stats\+::\+Clear(), v8\+::internal\+::\+Weak\+Objects\+::\+Clear(), v8\+::internal\+::\+Global\+Handles\+::\+Clear\+List\+Of\+Young\+Nodes(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Deoptimizer\+::\+Deoptimize\+Marked\+Code(), empty\+\_\+new\+\_\+space\+\_\+pages\+\_\+to\+\_\+be\+\_\+swept\+\_\+, v8\+::internal\+::\+Memory\+Allocator\+::\+Free(), v8\+::internal\+::\+New\+Space\+::\+Garbage\+Collection\+Epilogue(), v8\+::internal\+::\+Sweeper\+::\+Get\+Trace\+Id\+For\+Flow\+Event(), v8\+::internal\+::\+Isolate\+::global\+\_\+handles(), have\+\_\+code\+\_\+to\+\_\+deoptimize\+\_\+, heap\+\_\+, v8\+::\+IDLE, v8\+::internal\+::\+Main\+Allocator\+::\+Is\+Lab\+Valid(), v8\+::internal\+::\+Heap\+::isolate(), key\+\_\+to\+\_\+values\+\_\+, v8\+::internal\+::\+Memory\+Allocator\+::k\+Immediately, v8\+::internal\+::k\+Main, v8\+::internal\+::\+Heap\+::lo\+\_\+space(), local\+\_\+marking\+\_\+worklists\+\_\+, local\+\_\+weak\+\_\+objects\+\_\+, v8\+::internal\+::\+MARK\+\_\+\+COMPACTOR, marking\+\_\+visitor\+\_\+, marking\+\_\+worklists\+\_\+, v8\+::internal\+::\+Heap\+::memory\+\_\+allocator(), native\+\_\+context\+\_\+stats\+\_\+, v8\+::internal\+::\+Heap\+::new\+\_\+lo\+\_\+space(), v8\+::internal\+::\+Heap\+::new\+\_\+space(), v8\+::internal\+::\+Heap\+Allocator\+::new\+\_\+space\+\_\+allocator(), queued\+\_\+pages\+\_\+to\+\_\+be\+\_\+freed\+\_\+, v8\+::internal\+::\+Marking\+Worklists\+::\+Release\+Context\+Worklists(), v8\+::internal\+::\+Heap\+::\+Resize\+New\+Space(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Shrink\+Pages\+To\+Object\+Sizes(), v8\+::internal\+::\+Sweeper\+::\+Start\+Major\+Sweeper\+Tasks(), Sweep\+Array\+Buffer\+Extensions(), v8\+::internal\+::\+Sweeper\+::\+Sweep\+Empty\+New\+Space\+Page(), sweeper\+\_\+, Sweep\+Large\+Space(), TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+IN, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+OUT, TRACE\+\_\+\+GC, TRACE\+\_\+\+GC\+\_\+\+EPOCH\+\_\+\+WITH\+\_\+\+FLOW, v8\+::internal\+::\+Heap\+::tracer(), v8\+::internal\+::v8\+\_\+flags, and weak\+\_\+objects\+\_\+.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa1bd78a56ac02e2696341af641334a6b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b}\label{classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!FinishConcurrentMarking@{FinishConcurrentMarking}}
\index{FinishConcurrentMarking@{FinishConcurrentMarking}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{FinishConcurrentMarking()}{FinishConcurrentMarking()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Finish\+Concurrent\+Marking (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 799 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{799                                                    \{}
\DoxyCodeLine{800   \textcolor{comment}{// FinishConcurrentMarking is called for both, concurrent and parallel,}}
\DoxyCodeLine{801   \textcolor{comment}{// marking. It is safe to call this function when tasks are already finished.}}
\DoxyCodeLine{802   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a884b7ca1bb9c41508d91ca620cdd29a9}{garbage\_collector}}(),}
\DoxyCodeLine{803             \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}});}
\DoxyCodeLine{804   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.parallel\_marking || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.concurrent\_marking) \{}
\DoxyCodeLine{805     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a43f88ef394ce90569543e44ab0381cf8}{Join}}();}
\DoxyCodeLine{806     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a3f1743cd46ce9240e4ffbb5098de064b}{FlushMemoryChunkData}}();}
\DoxyCodeLine{807     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a8eaf129f2de29cd9b015ed61b31babc5}{FlushNativeContexts}}(\&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}{native\_context\_stats\_}});}
\DoxyCodeLine{808   \}}
\DoxyCodeLine{809   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})) \{}
\DoxyCodeLine{810     cpp\_heap-\/>FinishConcurrentMarkingIfNeeded();}
\DoxyCodeLine{811   \}}
\DoxyCodeLine{812 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::concurrent\+\_\+marking(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap\+\_\+, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Concurrent\+Marking\+::\+Flush\+Memory\+Chunk\+Data(), v8\+::internal\+::\+Concurrent\+Marking\+::\+Flush\+Native\+Contexts(), v8\+::internal\+::\+Cpp\+Heap\+::\+From(), v8\+::internal\+::\+Concurrent\+Marking\+::garbage\+\_\+collector(), heap\+\_\+, v8\+::internal\+::\+Concurrent\+Marking\+::\+Join(), v8\+::internal\+::\+MARK\+\_\+\+COMPACTOR, native\+\_\+context\+\_\+stats\+\_\+, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358}\label{classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!FlushBytecodeFromSFI@{FlushBytecodeFromSFI}}
\index{FlushBytecodeFromSFI@{FlushBytecodeFromSFI}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{FlushBytecodeFromSFI()}{FlushBytecodeFromSFI()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Flush\+Bytecode\+From\+SFI (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{shared\+\_\+info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3303 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3304                                             \{}
\DoxyCodeLine{3305   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(shared\_info-\/>HasBytecodeArray());}
\DoxyCodeLine{3306 }
\DoxyCodeLine{3307   \textcolor{comment}{// Retain objects required for uncompiled data.}}
\DoxyCodeLine{3308   Tagged<String> inferred\_name = shared\_info-\/>inferred\_name();}
\DoxyCodeLine{3309   \textcolor{keywordtype}{int} start\_position = shared\_info-\/>StartPosition();}
\DoxyCodeLine{3310   \textcolor{keywordtype}{int} end\_position = shared\_info-\/>EndPosition();}
\DoxyCodeLine{3311 }
\DoxyCodeLine{3312   shared\_info-\/>DiscardCompiledMetadata(}
\DoxyCodeLine{3313       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3314       [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3315          \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} target) \{ RecordSlot(object, slot, target); \});}
\DoxyCodeLine{3316 }
\DoxyCodeLine{3317   \textcolor{comment}{// The size of the bytecode array should always be larger than an}}
\DoxyCodeLine{3318   \textcolor{comment}{// UncompiledData object.}}
\DoxyCodeLine{3319   static\_assert(\mbox{\hyperlink{classv8_1_1internal_1_1BytecodeArray_aecc5b608691b8af5c7a46f12b5e0e7bb}{BytecodeArray::SizeFor}}(0) >=}
\DoxyCodeLine{3320                 UncompiledDataWithoutPreparseData::kSize);}
\DoxyCodeLine{3321 }
\DoxyCodeLine{3322   \textcolor{comment}{// Replace the bytecode with an uncompiled data object.}}
\DoxyCodeLine{3323   Tagged<BytecodeArray> bytecode\_array =}
\DoxyCodeLine{3324       shared\_info-\/>GetBytecodeArray(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3325 }
\DoxyCodeLine{3326 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3327   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(shared\_info));}
\DoxyCodeLine{3328   \textcolor{comment}{// Zap the old entry in the trusted pointer table.}}
\DoxyCodeLine{3329   TrustedPointerTable\& table = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>trusted\_pointer\_table();}
\DoxyCodeLine{3330   IndirectPointerSlot self\_indirect\_pointer\_slot =}
\DoxyCodeLine{3331       bytecode\_array-\/>RawIndirectPointerField(}
\DoxyCodeLine{3332           BytecodeArray::kSelfIndirectPointerOffset,}
\DoxyCodeLine{3333           kBytecodeArrayIndirectPointerTag);}
\DoxyCodeLine{3334   table.Zap(self\_indirect\_pointer\_slot.Relaxed\_LoadHandle());}
\DoxyCodeLine{3335 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3336 }
\DoxyCodeLine{3337   \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} compiled\_data = bytecode\_array;}
\DoxyCodeLine{3338   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} compiled\_data\_start = compiled\_data.address();}
\DoxyCodeLine{3339   \textcolor{keywordtype}{int} compiled\_data\_size = \mbox{\hyperlink{common_2globals_8h_a76f936b13cc7401de647c23963eda5c1}{ALIGN\_TO\_ALLOCATION\_ALIGNMENT}}(compiled\_data-\/>Size());}
\DoxyCodeLine{3340   MutablePageMetadata* chunk =}
\DoxyCodeLine{3341       \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_a27e674b7d22c1799418a7fe14898e338}{MutablePageMetadata::FromAddress}}(compiled\_data\_start);}
\DoxyCodeLine{3342 }
\DoxyCodeLine{3343   \textcolor{comment}{// Clear any recorded slots for the compiled data as being invalid.}}
\DoxyCodeLine{3344   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_NEW>::RemoveRange}}(}
\DoxyCodeLine{3345       chunk, compiled\_data\_start, compiled\_data\_start + compiled\_data\_size,}
\DoxyCodeLine{3346       \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3347   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_NEW\_BACKGROUND>::RemoveRange}}(}
\DoxyCodeLine{3348       chunk, compiled\_data\_start, compiled\_data\_start + compiled\_data\_size,}
\DoxyCodeLine{3349       \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3350   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_SHARED>::RemoveRange}}(}
\DoxyCodeLine{3351       chunk, compiled\_data\_start, compiled\_data\_start + compiled\_data\_size,}
\DoxyCodeLine{3352       \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3353   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_OLD>::RemoveRange}}(}
\DoxyCodeLine{3354       chunk, compiled\_data\_start, compiled\_data\_start + compiled\_data\_size,}
\DoxyCodeLine{3355       \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3356   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<TRUSTED\_TO\_TRUSTED>::RemoveRange}}(}
\DoxyCodeLine{3357       chunk, compiled\_data\_start, compiled\_data\_start + compiled\_data\_size,}
\DoxyCodeLine{3358       \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3359 }
\DoxyCodeLine{3360   \textcolor{comment}{// Swap the map, using set\_map\_after\_allocation to avoid verify heap checks}}
\DoxyCodeLine{3361   \textcolor{comment}{// which are not necessary since we are doing this during the GC atomic pause.}}
\DoxyCodeLine{3362   compiled\_data-\/>set\_map\_after\_allocation(}
\DoxyCodeLine{3363       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3364       ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}).uncompiled\_data\_without\_preparse\_data\_map(),}
\DoxyCodeLine{3365       \mbox{\hyperlink{namespacev8_1_1internal_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75}{SKIP\_WRITE\_BARRIER}});}
\DoxyCodeLine{3366 }
\DoxyCodeLine{3367   \textcolor{comment}{// Create a filler object for any left over space in the bytecode array.}}
\DoxyCodeLine{3368   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afea8da4813bd01742ab9297c08f06985}{IsLargeObject}}(compiled\_data)) \{}
\DoxyCodeLine{3369     \textcolor{keyword}{const} \textcolor{keywordtype}{int} aligned\_filler\_offset =}
\DoxyCodeLine{3370         \mbox{\hyperlink{common_2globals_8h_a76f936b13cc7401de647c23963eda5c1}{ALIGN\_TO\_ALLOCATION\_ALIGNMENT}}(UncompiledDataWithoutPreparseData::kSize);}
\DoxyCodeLine{3371     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a4e77c4c4c45f64cd073d9e29b9d7fb91}{CreateFillerObjectAt}}(compiled\_data.address() + aligned\_filler\_offset,}
\DoxyCodeLine{3372                                 compiled\_data\_size -\/ aligned\_filler\_offset);}
\DoxyCodeLine{3373   \}}
\DoxyCodeLine{3374 }
\DoxyCodeLine{3375   \textcolor{comment}{// Initialize the uncompiled data.}}
\DoxyCodeLine{3376   Tagged<UncompiledData> uncompiled\_data = Cast<UncompiledData>(compiled\_data);}
\DoxyCodeLine{3377 }
\DoxyCodeLine{3378   uncompiled\_data-\/>InitAfterBytecodeFlush(}
\DoxyCodeLine{3379       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), inferred\_name, start\_position, end\_position,}
\DoxyCodeLine{3380       [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3381          \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} target) \{ RecordSlot(object, slot, target); \});}
\DoxyCodeLine{3382 }
\DoxyCodeLine{3383   \textcolor{comment}{// Mark the uncompiled data as black, and ensure all fields have already been}}
\DoxyCodeLine{3384   \textcolor{comment}{// marked.}}
\DoxyCodeLine{3385   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}},}
\DoxyCodeLine{3386                                              inferred\_name));}
\DoxyCodeLine{3387   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ada9b37f4e5abfa1ad3569dcfabea4ff1}{MarkingHelper::GetLivenessMode}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, uncompiled\_data) ==}
\DoxyCodeLine{3388       \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a4dc8cca289e4f7a300b90ed820cf9f0ba45867a604ddff7bf65264f5ddd2629f2}{MarkingHelper::LivenessMode::kMarkbit}}) \{}
\DoxyCodeLine{3389     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_a25369a80f635ffb368937574c7a4e6a6}{TryMarkAndAccountLiveBytes}}(uncompiled\_data);}
\DoxyCodeLine{3390   \}}
\DoxyCodeLine{3391 }
\DoxyCodeLine{3392 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3393   \textcolor{comment}{// Mark the new entry in the trusted pointer table as alive.}}
\DoxyCodeLine{3394   TrustedPointerTable::Space* \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}} = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>trusted\_pointer\_space();}
\DoxyCodeLine{3395   table.Mark(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, self\_indirect\_pointer\_slot.Relaxed\_LoadHandle());}
\DoxyCodeLine{3396 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3397 }
\DoxyCodeLine{3398   shared\_info-\/>set\_uncompiled\_data(uncompiled\_data);}
\DoxyCodeLine{3399   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!shared\_info-\/>is\_compiled());}
\DoxyCodeLine{3400 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::address(), ALIGN\+\_\+\+TO\+\_\+\+ALLOCATION\+\_\+\+ALIGNMENT, DCHECK, v8\+::internal\+::\+Indirect\+Pointer\+Slot\+::\+Relaxed\+\_\+\+Load\+Handle(), v8\+::internal\+::\+SKIP\+\_\+\+WRITE\+\_\+\+BARRIER, and space.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4672c902176abf0363018f4b29435209}\label{classv8_1_1internal_1_1MarkCompactCollector_a4672c902176abf0363018f4b29435209}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!FlushSFI@{FlushSFI}}
\index{FlushSFI@{FlushSFI}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{FlushSFI()}{FlushSFI()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Flush\+SFI (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{sfi,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{bytecode\+\_\+already\+\_\+decompiled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3517 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3518                                                                       \{}
\DoxyCodeLine{3519   \textcolor{comment}{// If baseline code flushing is disabled we should only flush bytecode}}
\DoxyCodeLine{3520   \textcolor{comment}{// from functions that don't have baseline data.}}
\DoxyCodeLine{3521   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_baseline\_code || !sfi-\/>HasBaselineCode());}
\DoxyCodeLine{3522 }
\DoxyCodeLine{3523   \textcolor{keywordflow}{if} (bytecode\_already\_decompiled) \{}
\DoxyCodeLine{3524     sfi-\/>DiscardCompiledMetadata(}
\DoxyCodeLine{3525         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3526         [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3527            \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} target) \{ RecordSlot(object, slot, target); \});}
\DoxyCodeLine{3528   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3529     \textcolor{comment}{// If the BytecodeArray is dead, flush it, which will replace the field}}
\DoxyCodeLine{3530     \textcolor{comment}{// with an uncompiled data object.}}
\DoxyCodeLine{3531     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afe3c91189f1c5ba073f1b8835017f358}{FlushBytecodeFromSFI}}(sfi);}
\DoxyCodeLine{3532   \}}
\DoxyCodeLine{3533 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}\label{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!heap@{heap}}
\index{heap@{heap}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{heap()}{heap()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}}$\ast$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::heap (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 189 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{189 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}; \}}

\end{DoxyCode}


References heap\+\_\+.



Referenced by v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Shared\+Heap\+Object\+Visitor\+::\+Check\+For\+Shared\+Object(), v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Custom\+Root\+Body\+Marking\+Visitor\+::\+Mark\+Object(), v8\+::internal\+::\+Root\+Marking\+Visitor\+::\+Mark\+Object\+By\+Pointer(), Maybe\+Enable\+Background\+Threads\+In\+Cycle(), and Start\+Marking().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0aefdd8b8b50a471f4ab14827b26c4ad}\label{classv8_1_1internal_1_1MarkCompactCollector_a0aefdd8b8b50a471f4ab14827b26c4ad}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!is\_compacting@{is\_compacting}}
\index{is\_compacting@{is\_compacting}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{is\_compacting()}{is\_compacting()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::is\+\_\+compacting (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 147 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{147 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\_}}; \}}

\end{DoxyCode}


References compacting\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999}\label{classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!IsOnEvacuationCandidate@{IsOnEvacuationCandidate}}
\index{IsOnEvacuationCandidate@{IsOnEvacuationCandidate}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{IsOnEvacuationCandidate()}{IsOnEvacuationCandidate()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Is\+On\+Evacuation\+Candidate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_aa8509f8e21058aabbc6caa5f6425bd13}{Maybe\+Object}} $>$}]{obj }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 119 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{119                                                                       \{}
\DoxyCodeLine{120     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a1c9e126ddfcab88ef54ab6a899ece138}{MemoryChunk::FromAddress}}(obj.ptr())-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a31917793e4e1f003c57c07b8dd2422fa}{IsEvacuationCandidate}}();}
\DoxyCodeLine{121   \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+::\+From\+Address(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), and v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::ptr().



Referenced by v8\+::internal\+::\+Iterate\+And\+Scavenge\+Promoted\+Objects\+Visitor\+::\+Handle\+Slot(), v8\+::internal\+::\+Paged\+Space\+Allocator\+Policy\+::\+Try\+Allocation\+From\+Free\+List(), and v8\+::internal\+::\+Evacuate\+New\+Space\+Visitor\+::\+Try\+Evacuate\+Without\+Copy().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a5f0477b3276f6b872199164ffc981999_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba}\label{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!IsUnmarkedHeapObject@{IsUnmarkedHeapObject}}
\index{IsUnmarkedHeapObject@{IsUnmarkedHeapObject}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{IsUnmarkedHeapObject()}{IsUnmarkedHeapObject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Is\+Unmarked\+Heap\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1FullObjectSlot}{Full\+Object\+Slot}}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1832 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1832                                                                             \{}
\DoxyCodeLine{1833   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} o = *p;}
\DoxyCodeLine{1834   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(o)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1835   \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object = Cast<HeapObject>(o);}
\DoxyCodeLine{1836   \textcolor{keywordflow}{return} \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{1837       \mbox{\hyperlink{namespaceheap}{heap}}, \mbox{\hyperlink{namespaceheap}{heap}}-\/>non\_atomic\_marking\_state(), heap\_object);}
\DoxyCodeLine{1838 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Is\+Heap\+Object(), and v8\+::internal\+::\+Marking\+Helper\+::\+Is\+Unmarked\+And\+Not\+Always\+Live().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac134d900ab0dbca461ef7cb20318c4ba_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe}\label{classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!IsUnmarkedSharedHeapObject@{IsUnmarkedSharedHeapObject}}
\index{IsUnmarkedSharedHeapObject@{IsUnmarkedSharedHeapObject}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{IsUnmarkedSharedHeapObject()}{IsUnmarkedSharedHeapObject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Is\+Unmarked\+Shared\+Heap\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1FullObjectSlot}{Full\+Object\+Slot}}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1841 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1842                                                                         \{}
\DoxyCodeLine{1843   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} o = *p;}
\DoxyCodeLine{1844   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(o)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1845   \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object = Cast<HeapObject>(o);}
\DoxyCodeLine{1846   Heap* shared\_space\_heap =}
\DoxyCodeLine{1847       client\_heap-\/>isolate()-\/>shared\_space\_isolate()-\/>heap();}
\DoxyCodeLine{1848   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(heap\_object)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1849   \textcolor{keywordflow}{return} \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{1850       shared\_space\_heap, shared\_space\_heap-\/>non\_atomic\_marking\_state(),}
\DoxyCodeLine{1851       heap\_object);}
\DoxyCodeLine{1852 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Heap\+Layout\+::\+In\+Writable\+Shared\+Space(), v8\+::internal\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Marking\+Helper\+::\+Is\+Unmarked\+And\+Not\+Always\+Live(), v8\+::internal\+::\+Heap\+::non\+\_\+atomic\+\_\+marking\+\_\+state(), and v8\+::internal\+::\+Isolate\+::shared\+\_\+space\+\_\+isolate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a45dbe9fb4c2e4b5ebdf19806b2de88fe_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a9a770c9f4b80f0ac788fe5e0f1596713}\label{classv8_1_1internal_1_1MarkCompactCollector_a9a770c9f4b80f0ac788fe5e0f1596713}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!local\_marking\_worklists@{local\_marking\_worklists}}
\index{local\_marking\_worklists@{local\_marking\_worklists}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{local\_marking\_worklists()}{local\_marking\_worklists()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a941d07bdea68cc187975415adc4dac79}{Marking\+Worklists\+::\+Local}}$\ast$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::local\+\_\+marking\+\_\+worklists (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 176 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{176                                                          \{}
\DoxyCodeLine{177     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get();}
\DoxyCodeLine{178   \}}

\end{DoxyCode}


References local\+\_\+marking\+\_\+worklists\+\_\+.



Referenced by v8\+::internal\+::\+Concurrent\+Marking\+::\+Reschedule\+Job\+If\+Needed(), v8\+::internal\+::\+Incremental\+Marking\+::\+Should\+Finalize(), v8\+::internal\+::\+Incremental\+Marking\+::\+Start\+Marking\+Major(), and v8\+::internal\+::\+Concurrent\+Marking\+::\+Try\+Schedule\+Job().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a9a770c9f4b80f0ac788fe5e0f1596713_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}\label{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!local\_weak\_objects@{local\_weak\_objects}}
\index{local\_weak\_objects@{local\_weak\_objects}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{local\_weak\_objects()}{local\_weak\_objects()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local}{Weak\+Objects\+::\+Local}}$\ast$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::local\+\_\+weak\+\_\+objects (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 181 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{181 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}}.get(); \}}

\end{DoxyCode}


References local\+\_\+weak\+\_\+objects\+\_\+.



Referenced by Add\+Transition\+Array(), and Tear\+Down().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a5f4d0e2e67b039d30d737212e64b71fa}\label{classv8_1_1internal_1_1MarkCompactCollector_a5f4d0e2e67b039d30d737212e64b71fa}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkDependentCodeForDeoptimization@{MarkDependentCodeForDeoptimization}}
\index{MarkDependentCodeForDeoptimization@{MarkDependentCodeForDeoptimization}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkDependentCodeForDeoptimization()}{MarkDependentCodeForDeoptimization()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Dependent\+Code\+For\+Deoptimization (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3217 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3217                                                               \{}
\DoxyCodeLine{3218   HeapObjectAndCode weak\_object\_in\_code;}
\DoxyCodeLine{3219   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>weak\_objects\_in\_code\_local.Pop(}
\DoxyCodeLine{3220       \&weak\_object\_in\_code)) \{}
\DoxyCodeLine{3221     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object} = weak\_object\_in\_code.heap\_object;}
\DoxyCodeLine{3222     Tagged<Code> \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = weak\_object\_in\_code.code;}
\DoxyCodeLine{3223     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3224             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, \textcolor{keywordtype}{object}) \&\&}
\DoxyCodeLine{3225         !\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>embedded\_objects\_cleared()) \{}
\DoxyCodeLine{3226       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>marked\_for\_deoptimization()) \{}
\DoxyCodeLine{3227         \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>SetMarkedForDeoptimization(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3228                                          LazyDeoptimizeReason::kWeakObjects);}
\DoxyCodeLine{3229         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}{have\_code\_to\_deoptimize\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{3230       \}}
\DoxyCodeLine{3231       \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>ClearEmbeddedObjectsAndJSDispatchHandles(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{3232       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>embedded\_objects\_cleared());}
\DoxyCodeLine{3233     \}}
\DoxyCodeLine{3234   \}}
\DoxyCodeLine{3235 \}}

\end{DoxyCode}


References code, v8\+::internal\+::\+Heap\+Object\+And\+Code\+::code, DCHECK, and v8\+::internal\+::\+Heap\+Object\+And\+Code\+::heap\+\_\+object.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a1c709cbcdf524f1f21d6780173a377b4}\label{classv8_1_1internal_1_1MarkCompactCollector_a1c709cbcdf524f1f21d6780173a377b4}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!marking\_worklists@{marking\_worklists}}
\index{marking\_worklists@{marking\_worklists}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{marking\_worklists()}{marking\_worklists()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists}{Marking\+Worklists}}$\ast$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::marking\+\_\+worklists (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 174 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{174 \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\_worklists\_}}; \}}

\end{DoxyCode}


References marking\+\_\+worklists\+\_\+.



Referenced by v8\+::internal\+::\+Marking\+Barrier\+::\+Activate(), v8\+::internal\+::\+Marking\+Barrier\+::\+Activate\+Shared(), and v8\+::internal\+::\+Concurrent\+Marking\+::\+Try\+Schedule\+Job().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a1c709cbcdf524f1f21d6780173a377b4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e}\label{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkLiveObjects@{MarkLiveObjects}}
\index{MarkLiveObjects@{MarkLiveObjects}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkLiveObjects()}{MarkLiveObjects()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Live\+Objects (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2477 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2477                                            \{}
\DoxyCodeLine{2478   \mbox{\hyperlink{gc-tracer_8h_ab1b9d31a6993723e2ab2a57d5d18ef5a}{TRACE\_GC\_ARG1}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK,}
\DoxyCodeLine{2479                 \textcolor{stringliteral}{"{}UseBackgroundThreads"{}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{UseBackgroundThreadsInCycle}}());}
\DoxyCodeLine{2480 }
\DoxyCodeLine{2481   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} was\_marked\_incrementally =}
\DoxyCodeLine{2482       !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_a421afcfedbad9dba889295ea646625fa}{IsStopped}}();}
\DoxyCodeLine{2483   \textcolor{keywordflow}{if} (was\_marked\_incrementally) \{}
\DoxyCodeLine{2484     \textcolor{keyword}{auto}* incremental\_marking = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}();}
\DoxyCodeLine{2485     \mbox{\hyperlink{gc-tracer_8h_a4b6fc205b8b8bbe4275672c2a66c5b94}{TRACE\_GC\_WITH\_FLOW}}(}
\DoxyCodeLine{2486         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_FINISH\_INCREMENTAL,}
\DoxyCodeLine{2487         incremental\_marking-\/>current\_trace\_id(), \mbox{\hyperlink{trace-event-no-perfetto_8h_afd116bac8e67a7eafb2b21a62f0a383f}{TRACE\_EVENT\_FLAG\_FLOW\_IN}});}
\DoxyCodeLine{2488     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(incremental\_marking-\/>IsMajorMarking());}
\DoxyCodeLine{2489     incremental\_marking-\/>Stop();}
\DoxyCodeLine{2490     \mbox{\hyperlink{classv8_1_1internal_1_1MarkingBarrier_a0961df883ba76c25aeba52b810d55f54}{MarkingBarrier::PublishAll}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{2491   \}}
\DoxyCodeLine{2492 }
\DoxyCodeLine{2493 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{2494   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(state\_ == PREPARE\_GC);}
\DoxyCodeLine{2495   state\_ = MARK\_LIVE\_OBJECTS;}
\DoxyCodeLine{2496 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{2497 }
\DoxyCodeLine{2498   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}}) \{}
\DoxyCodeLine{2499     \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})}
\DoxyCodeLine{2500         -\/>\mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a9171e6283279c509a9e40d2be7d9960e}{EnterFinalPause}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aa99fdd8be93666d20d90c1d5067aefbc}{embedder\_stack\_state\_}});}
\DoxyCodeLine{2501   \}}
\DoxyCodeLine{2502 }
\DoxyCodeLine{2503   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0a89e89941e2601a090655513f208c65}{RootMarkingVisitor}} root\_visitor(\textcolor{keyword}{this});}
\DoxyCodeLine{2504 }
\DoxyCodeLine{2505   \{}
\DoxyCodeLine{2506     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_ROOTS);}
\DoxyCodeLine{2507     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb}{MarkRoots}}(\&root\_visitor);}
\DoxyCodeLine{2508   \}}
\DoxyCodeLine{2509 }
\DoxyCodeLine{2510   \{}
\DoxyCodeLine{2511     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_CLIENT\_HEAPS);}
\DoxyCodeLine{2512     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb}{MarkObjectsFromClientHeaps}}();}
\DoxyCodeLine{2513   \}}
\DoxyCodeLine{2514 }
\DoxyCodeLine{2515   \{}
\DoxyCodeLine{2516     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_RETAIN\_MAPS);}
\DoxyCodeLine{2517     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3}{RetainMaps}}();}
\DoxyCodeLine{2518   \}}
\DoxyCodeLine{2519 }
\DoxyCodeLine{2520   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.parallel\_marking \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{UseBackgroundThreadsInCycle}}()) \{}
\DoxyCodeLine{2521     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_FULL\_CLOSURE\_PARALLEL);}
\DoxyCodeLine{2522     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}{parallel\_marking\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{2523     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_aaf8d90cff77b3890a4de513377521ce4}{RescheduleJobIfNeeded}}(}
\DoxyCodeLine{2524         \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}}, \mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{TaskPriority::kUserBlocking}});}
\DoxyCodeLine{2525     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14908aaa211b8c1bbafb7e4496736114}{MarkTransitiveClosure}}();}
\DoxyCodeLine{2526     \{}
\DoxyCodeLine{2527       \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{2528                GCTracer::Scope::MC\_MARK\_FULL\_CLOSURE\_PARALLEL\_JOIN);}
\DoxyCodeLine{2529       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a9d6f060a09240e70ae531c260c99650b}{FinishConcurrentMarking}}();}
\DoxyCodeLine{2530     \}}
\DoxyCodeLine{2531     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}{parallel\_marking\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{2532   \}}
\DoxyCodeLine{2533 }
\DoxyCodeLine{2534   \{}
\DoxyCodeLine{2535     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_ROOTS);}
\DoxyCodeLine{2536     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732}{MarkRootsFromConservativeStack}}(\&root\_visitor);}
\DoxyCodeLine{2537   \}}
\DoxyCodeLine{2538 }
\DoxyCodeLine{2539   \{}
\DoxyCodeLine{2540     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_FULL\_CLOSURE\_SERIAL);}
\DoxyCodeLine{2541     \textcolor{comment}{// Complete the transitive closure single-\/threaded to avoid races with}}
\DoxyCodeLine{2542     \textcolor{comment}{// multiple threads when processing weak maps and embedder heaps.}}
\DoxyCodeLine{2543     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a06980681d462120291c2047124cd6a3a}{IsStopped}}());}
\DoxyCodeLine{2544     \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a24145cfb85d15c42c670288e26308822}{cpp\_heap}}())) \{}
\DoxyCodeLine{2545       \textcolor{comment}{// Lock the process-\/global mutex here and mark cross-\/thread roots again.}}
\DoxyCodeLine{2546       \textcolor{comment}{// This is done as late as possible to keep locking durations short.}}
\DoxyCodeLine{2547       cpp\_heap-\/>EnterProcessGlobalAtomicPause();}
\DoxyCodeLine{2548     \}}
\DoxyCodeLine{2549     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14908aaa211b8c1bbafb7e4496736114}{MarkTransitiveClosure}}();}
\DoxyCodeLine{2550     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsEmpty());}
\DoxyCodeLine{2551     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(}
\DoxyCodeLine{2552         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2553     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_a9702f1cf0153510561af900313494b5e}{IsCppHeapMarkingFinished}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get()));}
\DoxyCodeLine{2554     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab744335a59a10dfc63766f57720f8a8b}{VerifyEphemeronMarking}}();}
\DoxyCodeLine{2555   \}}
\DoxyCodeLine{2556 }
\DoxyCodeLine{2557   \textcolor{keywordflow}{if} (was\_marked\_incrementally) \{}
\DoxyCodeLine{2558     \textcolor{comment}{// Disable the marking barrier after concurrent/parallel marking has}}
\DoxyCodeLine{2559     \textcolor{comment}{// finished as it will reset page flags that share the same bitmap as}}
\DoxyCodeLine{2560     \textcolor{comment}{// the evacuation candidate bit.}}
\DoxyCodeLine{2561     \mbox{\hyperlink{classv8_1_1internal_1_1MarkingBarrier_ad7b8156049672e805f8bfd48a300936c}{MarkingBarrier::DeactivateAll}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{2562     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a25a5f2cf26f80f049dbbe6ea6046b754}{traced\_handles}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1TracedHandles_a4f33ad5439a15d4844bc3d8ce48e5f48}{SetIsMarking}}(\textcolor{keyword}{false});}
\DoxyCodeLine{2563   \}}
\DoxyCodeLine{2564 }
\DoxyCodeLine{2565   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a97165101e46c49ad2629345f1cb48da5}{epoch\_}}++;}
\DoxyCodeLine{2566 \}}

\end{DoxyCode}


References CHECK, DCHECK, v8\+::internal\+::\+Is\+Cpp\+Heap\+Marking\+Finished(), v8\+::k\+User\+Blocking, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+IN, TRACE\+\_\+\+GC, TRACE\+\_\+\+GC\+\_\+\+ARG1, TRACE\+\_\+\+GC\+\_\+\+WITH\+\_\+\+FLOW, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a16935f51d75fd467f80fae7c7d960e5e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280}\label{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkObject@{MarkObject}}
\index{MarkObject@{MarkObject}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkObject()}{MarkObject()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{host,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267}{Marking\+Helper\+::\+Worklist\+Target}}}]{target\+\_\+worklist }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 28 of file mark-\/compact-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{30                                                  \{}
\DoxyCodeLine{31   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(obj) || \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a49599076f26bcf5567b86d2dc86cc7b2}{Contains}}(obj));}
\DoxyCodeLine{32   \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a0e9d1ac5aa056d7bf0087bce379e3b7c}{MarkingHelper::TryMarkAndPush}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get(),}
\DoxyCodeLine{33                                 \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, target\_worklist, obj);}
\DoxyCodeLine{34 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Read\+Only\+Heap\+::\+Contains(), v8\+::internal\+::\+Heap\+::\+Contains(), v8\+::internal\+::\+DCHECK(), heap\+\_\+, local\+\_\+marking\+\_\+worklists\+\_\+, marking\+\_\+state\+\_\+, and v8\+::internal\+::\+Marking\+Helper\+::\+Try\+Mark\+And\+Push().



Referenced by v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Custom\+Root\+Body\+Marking\+Visitor\+::\+Mark\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab6e6080b49b981420d6462957e003821}\label{classv8_1_1internal_1_1MarkCompactCollector_ab6e6080b49b981420d6462957e003821}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkObjectsFromClientHeap@{MarkObjectsFromClientHeap}}
\index{MarkObjectsFromClientHeap@{MarkObjectsFromClientHeap}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkObjectsFromClientHeap()}{MarkObjectsFromClientHeap()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Objects\+From\+Client\+Heap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{client }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1919 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1919                                                                     \{}
\DoxyCodeLine{1920   \textcolor{comment}{// There is no OLD\_TO\_SHARED remembered set for the young generation. We}}
\DoxyCodeLine{1921   \textcolor{comment}{// therefore need to iterate each object and check whether it points into the}}
\DoxyCodeLine{1922   \textcolor{comment}{// shared heap. As an optimization and to avoid a second heap iteration in the}}
\DoxyCodeLine{1923   \textcolor{comment}{// "{}update pointers"{} phase, all pointers into the shared heap are recorded in}}
\DoxyCodeLine{1924   \textcolor{comment}{// the OLD\_TO\_SHARED remembered set as well.}}
\DoxyCodeLine{1925   SharedHeapObjectVisitor visitor(\textcolor{keyword}{this});}
\DoxyCodeLine{1926 }
\DoxyCodeLine{1927   PtrComprCageBase cage\_base(client);}
\DoxyCodeLine{1928   Heap* client\_heap = client-\/>heap();}
\DoxyCodeLine{1929 }
\DoxyCodeLine{1930   \textcolor{comment}{// Finish sweeping quarantined pages for Scavenger's new space in order to}}
\DoxyCodeLine{1931   \textcolor{comment}{// iterate objects in it.}}
\DoxyCodeLine{1932   client\_heap-\/>EnsureQuarantinedPagesSweepingCompleted();}
\DoxyCodeLine{1933   \textcolor{comment}{// Finish sweeping for new space in order to iterate objects in it.}}
\DoxyCodeLine{1934   client\_heap-\/>sweeper()-\/>FinishMinorJobs();}
\DoxyCodeLine{1935   \textcolor{comment}{// Finish sweeping for old generation in order to iterate OLD\_TO\_SHARED.}}
\DoxyCodeLine{1936   client\_heap-\/>sweeper()-\/>FinishMajorJobs();}
\DoxyCodeLine{1937 }
\DoxyCodeLine{1938   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* new\_space = client\_heap-\/>new\_space()) \{}
\DoxyCodeLine{1939     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!client\_heap-\/>allocator()-\/>new\_space\_allocator()-\/>IsLabValid());}
\DoxyCodeLine{1940     \textcolor{keywordflow}{for} (PageMetadata* page : *new\_space) \{}
\DoxyCodeLine{1941       \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} obj : HeapObjectRange(page)) \{}
\DoxyCodeLine{1942         visitor.Visit(obj);}
\DoxyCodeLine{1943       \}}
\DoxyCodeLine{1944     \}}
\DoxyCodeLine{1945   \}}
\DoxyCodeLine{1946 }
\DoxyCodeLine{1947   \textcolor{keywordflow}{if} (client\_heap-\/>new\_lo\_space()) \{}
\DoxyCodeLine{1948     std::unique\_ptr<ObjectIterator> iterator =}
\DoxyCodeLine{1949         client\_heap-\/>new\_lo\_space()-\/>GetObjectIterator(client\_heap);}
\DoxyCodeLine{1950     \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} obj = iterator-\/>Next(); !obj.is\_null();}
\DoxyCodeLine{1951          obj = iterator-\/>Next()) \{}
\DoxyCodeLine{1952       visitor.Visit(obj);}
\DoxyCodeLine{1953     \}}
\DoxyCodeLine{1954   \}}
\DoxyCodeLine{1955 }
\DoxyCodeLine{1956   \textcolor{comment}{// In the old generation we can simply use the OLD\_TO\_SHARED remembered set to}}
\DoxyCodeLine{1957   \textcolor{comment}{// find all incoming pointers into the shared heap.}}
\DoxyCodeLine{1958   OldGenerationMemoryChunkIterator chunk\_iterator(client\_heap);}
\DoxyCodeLine{1959 }
\DoxyCodeLine{1960   \textcolor{comment}{// Tracking OLD\_TO\_SHARED requires the write barrier.}}
\DoxyCodeLine{1961   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.disable\_write\_barriers);}
\DoxyCodeLine{1962 }
\DoxyCodeLine{1963   \textcolor{keywordflow}{for} (MutablePageMetadata* chunk = chunk\_iterator.next(); chunk;}
\DoxyCodeLine{1964        chunk = chunk\_iterator.next()) \{}
\DoxyCodeLine{1965     \textcolor{keyword}{const} \textcolor{keyword}{auto} slot\_count = \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_af1f20aa96b6a02882a1fe0ce5e8b1da3}{RememberedSet<OLD\_TO\_SHARED>::Iterate}}(}
\DoxyCodeLine{1966         chunk,}
\DoxyCodeLine{1967         [collector = \textcolor{keyword}{this}, cage\_base](\mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} slot) \{}
\DoxyCodeLine{1968           Tagged<MaybeObject> obj = slot.Relaxed\_Load(cage\_base);}
\DoxyCodeLine{1969           \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object;}
\DoxyCodeLine{1970 }
\DoxyCodeLine{1971           \textcolor{keywordflow}{if} (obj.GetHeapObject(\&heap\_object) \&\&}
\DoxyCodeLine{1972               \mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(heap\_object)) \{}
\DoxyCodeLine{1973             \textcolor{comment}{// If the object points to the black allocated shared page, don't}}
\DoxyCodeLine{1974             \textcolor{comment}{// mark the object, but still keep the slot.}}
\DoxyCodeLine{1975             if (MarkingHelper::ShouldMarkObject(collector-\/>heap(),}
\DoxyCodeLine{1976                                                 heap\_object)) \{}
\DoxyCodeLine{1977               collector-\/>MarkRootObject(}
\DoxyCodeLine{1978                   Root::kClientHeap, heap\_object,}
\DoxyCodeLine{1979                   MarkingHelper::WorklistTarget::kRegular);}
\DoxyCodeLine{1980             \}}
\DoxyCodeLine{1981             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40}{KEEP\_SLOT}};}
\DoxyCodeLine{1982           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1983             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a}{REMOVE\_SLOT}};}
\DoxyCodeLine{1984           \}}
\DoxyCodeLine{1985         \},}
\DoxyCodeLine{1986         \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{1987     \textcolor{keywordflow}{if} (slot\_count == 0) \{}
\DoxyCodeLine{1988       chunk-\/>ReleaseSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b}{OLD\_TO\_SHARED}});}
\DoxyCodeLine{1989     \}}
\DoxyCodeLine{1990 }
\DoxyCodeLine{1991     \textcolor{keyword}{const} \textcolor{keyword}{auto} typed\_slot\_count = \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_a948ca4aacbb909303ffd8d7b78ceb9be}{RememberedSet<OLD\_TO\_SHARED>::IterateTyped}}(}
\DoxyCodeLine{1992         chunk,}
\DoxyCodeLine{1993         [collector = \textcolor{keyword}{this}, client\_heap](\mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1}{SlotType}} slot\_type, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} slot) \{}
\DoxyCodeLine{1994           \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object =}
\DoxyCodeLine{1995               \mbox{\hyperlink{classv8_1_1internal_1_1UpdateTypedSlotHelper_a4b52de1f32d1c5e37149e76eb8b3d387}{UpdateTypedSlotHelper::GetTargetObject}}(client\_heap, slot\_type,}
\DoxyCodeLine{1996                                                      slot);}
\DoxyCodeLine{1997           \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(heap\_object)) \{}
\DoxyCodeLine{1998             \textcolor{comment}{// If the object points to the black allocated shared page, don't}}
\DoxyCodeLine{1999             \textcolor{comment}{// mark the object, but still keep the slot.}}
\DoxyCodeLine{2000             \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ac5e90f6e0c7ddb83975856969a4ad03f}{MarkingHelper::ShouldMarkObject}}(collector-\/>heap(),}
\DoxyCodeLine{2001                                                 heap\_object)) \{}
\DoxyCodeLine{2002               collector-\/>MarkRootObject(}
\DoxyCodeLine{2003                   Root::kClientHeap, heap\_object,}
\DoxyCodeLine{2004                   \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa}{MarkingHelper::WorklistTarget::kRegular}});}
\DoxyCodeLine{2005             \}}
\DoxyCodeLine{2006             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40}{KEEP\_SLOT}};}
\DoxyCodeLine{2007           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2008             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a}{REMOVE\_SLOT}};}
\DoxyCodeLine{2009           \}}
\DoxyCodeLine{2010         \});}
\DoxyCodeLine{2011     \textcolor{keywordflow}{if} (typed\_slot\_count == 0) \{}
\DoxyCodeLine{2012       chunk-\/>ReleaseTypedSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b}{OLD\_TO\_SHARED}});}
\DoxyCodeLine{2013     \}}
\DoxyCodeLine{2014 }
\DoxyCodeLine{2015     \textcolor{keyword}{const} \textcolor{keyword}{auto} protected\_slot\_count =}
\DoxyCodeLine{2016         \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_af1f20aa96b6a02882a1fe0ce5e8b1da3}{RememberedSet<TRUSTED\_TO\_SHARED\_TRUSTED>::Iterate}}(}
\DoxyCodeLine{2017             chunk,}
\DoxyCodeLine{2018             [collector = \textcolor{keyword}{this}](\mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} slot) \{}
\DoxyCodeLine{2019               \mbox{\hyperlink{namespacev8_1_1internal_a69c3bdc8841db30ac59806f44663d229}{ProtectedPointerSlot}} protected\_slot(slot.address());}
\DoxyCodeLine{2020               Tagged<MaybeObject> obj = protected\_slot.Relaxed\_Load();}
\DoxyCodeLine{2021               \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_object;}
\DoxyCodeLine{2022 }
\DoxyCodeLine{2023               \textcolor{keywordflow}{if} (obj.GetHeapObject(\&heap\_object) \&\&}
\DoxyCodeLine{2024                   \mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a7125239f9673b20fca00902b11d24726}{HeapLayout::InWritableSharedSpace}}(heap\_object)) \{}
\DoxyCodeLine{2025                 \textcolor{comment}{// If the object points to the black allocated shared page,}}
\DoxyCodeLine{2026                 \textcolor{comment}{// don't mark the object, but still keep the slot.}}
\DoxyCodeLine{2027                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ac5e90f6e0c7ddb83975856969a4ad03f}{MarkingHelper::ShouldMarkObject}}(collector-\/>heap(),}
\DoxyCodeLine{2028                                                     heap\_object)) \{}
\DoxyCodeLine{2029                   collector-\/>MarkRootObject(}
\DoxyCodeLine{2030                       Root::kClientHeap, heap\_object,}
\DoxyCodeLine{2031                       \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa}{MarkingHelper::WorklistTarget::kRegular}});}
\DoxyCodeLine{2032                 \}}
\DoxyCodeLine{2033                 \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40}{KEEP\_SLOT}};}
\DoxyCodeLine{2034               \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2035                 \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceheap_1_1base_af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a}{REMOVE\_SLOT}};}
\DoxyCodeLine{2036               \}}
\DoxyCodeLine{2037             \},}
\DoxyCodeLine{2038             \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{2039     \textcolor{keywordflow}{if} (protected\_slot\_count == 0) \{}
\DoxyCodeLine{2040       chunk-\/>ReleaseSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31}{TRUSTED\_TO\_SHARED\_TRUSTED}});}
\DoxyCodeLine{2041     \}}
\DoxyCodeLine{2042   \}}
\DoxyCodeLine{2043 }
\DoxyCodeLine{2044 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{2045   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_ab2246faa71151b0796765b988d046828}{IsSharedExternalPointerType}}(\mbox{\hyperlink{namespacev8_1_1internal_aa5178998e7ae493acf744bc92b1fbdbca592a1b13d5f6454340f5d3e2be0f0909}{kExternalStringResourceTag}}));}
\DoxyCodeLine{2046   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_ab2246faa71151b0796765b988d046828}{IsSharedExternalPointerType}}(\mbox{\hyperlink{namespacev8_1_1internal_aa5178998e7ae493acf744bc92b1fbdbca9ffc9bd9f1613f7fdb6e42f391828ff7}{kExternalStringResourceDataTag}}));}
\DoxyCodeLine{2047   \textcolor{comment}{// All ExternalString resources are stored in the shared external pointer}}
\DoxyCodeLine{2048   \textcolor{comment}{// table. Mark entries from client heaps.}}
\DoxyCodeLine{2049   ExternalPointerTable\& shared\_table = client-\/>shared\_external\_pointer\_table();}
\DoxyCodeLine{2050   ExternalPointerTable::Space* shared\_space =}
\DoxyCodeLine{2051       client-\/>shared\_external\_pointer\_space();}
\DoxyCodeLine{2052   MarkExternalPointerFromExternalStringTable external\_string\_visitor(}
\DoxyCodeLine{2053       \&shared\_table, shared\_space);}
\DoxyCodeLine{2054   client\_heap-\/>external\_string\_table\_.IterateAll(\&external\_string\_visitor);}
\DoxyCodeLine{2055 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{2056 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::allocator(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Heap\+::\+Ensure\+Quarantined\+Pages\+Sweeping\+Completed(), v8\+::internal\+::\+Sweeper\+::\+Finish\+Major\+Jobs(), v8\+::internal\+::\+Sweeper\+::\+Finish\+Minor\+Jobs(), heap\+::base\+::\+Basic\+Slot\+Set$<$ k\+Tagged\+Size $>$\+::\+FREE\+\_\+\+EMPTY\+\_\+\+BUCKETS, v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+Get\+Heap\+Object(), v8\+::internal\+::\+Large\+Object\+Space\+::\+Get\+Object\+Iterator(), v8\+::internal\+::\+Update\+Typed\+Slot\+Helper\+::\+Get\+Target\+Object(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Heap\+Layout\+::\+In\+Writable\+Shared\+Space(), v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::is\+\_\+null(), v8\+::internal\+::\+Main\+Allocator\+::\+Is\+Lab\+Valid(), v8\+::internal\+::\+Remembered\+Set$<$ type $>$\+::\+Iterate(), v8\+::internal\+::\+Remembered\+Set$<$ type $>$\+::\+Iterate\+Typed(), heap\+::base\+::\+KEEP\+\_\+\+SLOT, v8\+::internal\+::\+Marking\+Helper\+::k\+Regular, v8\+::internal\+::\+Heap\+::new\+\_\+lo\+\_\+space(), v8\+::internal\+::\+Heap\+::new\+\_\+space(), v8\+::internal\+::\+Heap\+Allocator\+::new\+\_\+space\+\_\+allocator(), v8\+::internal\+::\+Old\+Generation\+Memory\+Chunk\+Iterator\+::next(), v8\+::internal\+::\+OLD\+\_\+\+TO\+\_\+\+SHARED, v8\+::internal\+::\+Full\+Object\+Slot\+::\+Relaxed\+\_\+\+Load(), v8\+::internal\+::\+Full\+Maybe\+Object\+Slot\+::\+Relaxed\+\_\+\+Load(), heap\+::base\+::\+REMOVE\+\_\+\+SLOT, v8\+::internal\+::\+Marking\+Helper\+::\+Should\+Mark\+Object(), v8\+::internal\+::\+Heap\+::sweeper(), v8\+::internal\+::\+TRUSTED\+\_\+\+TO\+\_\+\+SHARED\+\_\+\+TRUSTED, v8\+::internal\+::v8\+\_\+flags, and v8\+::internal\+::\+Heap\+Visitor$<$ Concrete\+Visitor $>$\+::\+Visit().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1MarkCompactCollector_ab6e6080b49b981420d6462957e003821_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb}\label{classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkObjectsFromClientHeaps@{MarkObjectsFromClientHeaps}}
\index{MarkObjectsFromClientHeaps@{MarkObjectsFromClientHeaps}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkObjectsFromClientHeaps()}{MarkObjectsFromClientHeaps()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Objects\+From\+Client\+Heaps (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1909 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1909                                                       \{}
\DoxyCodeLine{1910   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{1911   \textcolor{keywordflow}{if} (!isolate-\/>is\_shared\_space\_isolate()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{1912 }
\DoxyCodeLine{1913   isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a6bcede2c3a0b688eca7679947e4704d4}{global\_safepoint}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GlobalSafepoint_a32122b662818cfca794f899a8acac219}{IterateClientIsolates}}(}
\DoxyCodeLine{1914       [collector = \textcolor{keyword}{this}](Isolate* client) \{}
\DoxyCodeLine{1915         collector-\/>MarkObjectsFromClientHeap(client);}
\DoxyCodeLine{1916       \});}
\DoxyCodeLine{1917 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), heap\+\_\+, v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Heap\+::isolate(), and v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac8160c925310ee4a1b68a3ce930c2edb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea}\label{classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkRootObject@{MarkRootObject}}
\index{MarkRootObject@{MarkRootObject}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkRootObject()}{MarkRootObject()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Root\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_ae1439207c9f98c41dbdea3eca3572d54}{Root}}}]{root,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267}{Marking\+Helper\+::\+Worklist\+Target}}}]{target\+\_\+worklist }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 36 of file mark-\/compact-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{38                                                  \{}
\DoxyCodeLine{39   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(obj) || \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a49599076f26bcf5567b86d2dc86cc7b2}{Contains}}(obj));}
\DoxyCodeLine{40   \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a0e9d1ac5aa056d7bf0087bce379e3b7c}{MarkingHelper::TryMarkAndPush}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get(),}
\DoxyCodeLine{41                                 \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, target\_worklist, obj);}
\DoxyCodeLine{42   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}{in\_conservative\_stack\_scanning\_}})) \{}
\DoxyCodeLine{43     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(root, Root::kStackRoots);}
\DoxyCodeLine{44     MemoryChunk* chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(obj);}
\DoxyCodeLine{45     \textcolor{keywordflow}{if} (chunk-\/>IsEvacuationCandidate()) \{}
\DoxyCodeLine{46       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!chunk-\/>InYoungGeneration());}
\DoxyCodeLine{47       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}{ReportAbortedEvacuationCandidateDueToFlags}}(}
\DoxyCodeLine{48           \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata_a08ed4b4b38b8a49836598d6a447e30f5}{PageMetadata::cast}}(chunk-\/>Metadata()), chunk);}
\DoxyCodeLine{49     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (chunk-\/>InYoungGeneration() \&\& !chunk-\/>IsLargePage()) \{}
\DoxyCodeLine{50       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(chunk-\/>IsToPage());}
\DoxyCodeLine{51       \textcolor{keywordflow}{if} (!chunk-\/>IsQuarantined()) \{}
\DoxyCodeLine{52         chunk-\/>SetFlagNonExecutable(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a0ad4434a83e99cc953d26989c7caa7d4}{MemoryChunk::IS\_QUARANTINED}});}
\DoxyCodeLine{53       \}}
\DoxyCodeLine{54     \}}
\DoxyCodeLine{55   \}}
\DoxyCodeLine{56 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Page\+Metadata\+::cast(), v8\+::internal\+::\+Read\+Only\+Heap\+::\+Contains(), v8\+::internal\+::\+Heap\+::\+Contains(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Memory\+Chunk\+::\+From\+Heap\+Object(), heap\+\_\+, in\+\_\+conservative\+\_\+stack\+\_\+scanning\+\_\+, v8\+::internal\+::\+Memory\+Chunk\+::\+In\+Young\+Generation(), v8\+::internal\+::\+Memory\+Chunk\+::\+IS\+\_\+\+QUARANTINED, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Large\+Page(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Quarantined(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+To\+Page(), local\+\_\+marking\+\_\+worklists\+\_\+, marking\+\_\+state\+\_\+, v8\+::internal\+::\+Memory\+Chunk\+::\+Metadata(), Report\+Aborted\+Evacuation\+Candidate\+Due\+To\+Flags(), v8\+::internal\+::\+Memory\+Chunk\+::\+Set\+Flag\+Non\+Executable(), v8\+::internal\+::\+Marking\+Helper\+::\+Try\+Mark\+And\+Push(), and V8\+\_\+\+UNLIKELY.



Referenced by v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Shared\+Heap\+Object\+Visitor\+::\+Check\+For\+Shared\+Object(), and v8\+::internal\+::\+Root\+Marking\+Visitor\+::\+Mark\+Object\+By\+Pointer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a4ff3035e5f30676d376dfe540f5cb6ea_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb}\label{classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkRoots@{MarkRoots}}
\index{MarkRoots@{MarkRoots}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkRoots()}{MarkRoots()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Roots (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$}]{root\+\_\+visitor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1854 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1854                                                               \{}
\DoxyCodeLine{1855   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{1856 }
\DoxyCodeLine{1857   \textcolor{comment}{// Mark the heap roots including global variables, stack variables,}}
\DoxyCodeLine{1858   \textcolor{comment}{// etc., and all objects reachable from them.}}
\DoxyCodeLine{1859   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a888246e231dc6514e84cbad718195f2e}{IterateRoots}}(}
\DoxyCodeLine{1860       root\_visitor,}
\DoxyCodeLine{1861       base::EnumSet<SkipRoot>\{\mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562}{SkipRoot::kWeak}}, \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155}{SkipRoot::kTracedHandles}},}
\DoxyCodeLine{1862                               \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983}{SkipRoot::kConservativeStack}},}
\DoxyCodeLine{1863                               \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5}{SkipRoot::kReadOnlyBuiltins}}\});}
\DoxyCodeLine{1864 }
\DoxyCodeLine{1865   \textcolor{comment}{// Custom marking for top optimized frame.}}
\DoxyCodeLine{1866   CustomRootBodyMarkingVisitor custom\_root\_body\_visitor(\textcolor{keyword}{this});}
\DoxyCodeLine{1867   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6}{ProcessTopOptimizedFrame}}(\&custom\_root\_body\_visitor, isolate);}
\DoxyCodeLine{1868 }
\DoxyCodeLine{1869   \textcolor{keywordflow}{if} (isolate-\/>is\_shared\_space\_isolate()) \{}
\DoxyCodeLine{1870     ClientRootVisitor<> client\_root\_visitor(root\_visitor);}
\DoxyCodeLine{1871     ClientObjectVisitor<> client\_custom\_root\_body\_visitor(}
\DoxyCodeLine{1872         \&custom\_root\_body\_visitor);}
\DoxyCodeLine{1873 }
\DoxyCodeLine{1874     isolate-\/>global\_safepoint()-\/>IterateClientIsolates(}
\DoxyCodeLine{1875         [\textcolor{keyword}{this}, \&client\_root\_visitor,}
\DoxyCodeLine{1876          \&client\_custom\_root\_body\_visitor](Isolate* client) \{}
\DoxyCodeLine{1877           client-\/>heap()-\/>IterateRoots(}
\DoxyCodeLine{1878               \&client\_root\_visitor,}
\DoxyCodeLine{1879               base::EnumSet<SkipRoot>\{\mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562}{SkipRoot::kWeak}},}
\DoxyCodeLine{1880                                       \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983}{SkipRoot::kConservativeStack}},}
\DoxyCodeLine{1881                                       \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5}{SkipRoot::kReadOnlyBuiltins}}\});}
\DoxyCodeLine{1882           \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6}{ProcessTopOptimizedFrame}}(\&client\_custom\_root\_body\_visitor, client);}
\DoxyCodeLine{1883         \});}
\DoxyCodeLine{1884   \}}
\DoxyCodeLine{1885 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), v8\+::internal\+::\+Isolate\+::heap(), heap\+\_\+, v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates(), v8\+::internal\+::\+Heap\+::\+Iterate\+Roots(), v8\+::internal\+::k\+Conservative\+Stack, v8\+::internal\+::k\+Read\+Only\+Builtins, v8\+::internal\+::k\+Traced\+Handles, v8\+::internal\+::k\+Weak, and Process\+Top\+Optimized\+Frame().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1MarkCompactCollector_a158db1a522505fb3dd824882108797bb_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732}\label{classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkRootsFromConservativeStack@{MarkRootsFromConservativeStack}}
\index{MarkRootsFromConservativeStack@{MarkRootsFromConservativeStack}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkRootsFromConservativeStack()}{MarkRootsFromConservativeStack()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Roots\+From\+Conservative\+Stack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$}]{root\+\_\+visitor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 1887 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1888                                \{}
\DoxyCodeLine{1889   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::CONSERVATIVE\_STACK\_SCANNING);}
\DoxyCodeLine{1890   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}{in\_conservative\_stack\_scanning\_}});}
\DoxyCodeLine{1891   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}{in\_conservative\_stack\_scanning\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{1892   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a905002cc9f6743a32fc5456088997ff7}{IterateConservativeStackRoots}}(root\_visitor,}
\DoxyCodeLine{1893                                        \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d}{Heap::IterateRootsMode::kMainIsolate}});}
\DoxyCodeLine{1894 }
\DoxyCodeLine{1895   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{1896   \textcolor{keywordflow}{if} (isolate-\/>is\_shared\_space\_isolate()) \{}
\DoxyCodeLine{1897     ClientRootVisitor<> client\_root\_visitor(root\_visitor);}
\DoxyCodeLine{1898     \textcolor{comment}{// For client isolates, use the stack marker to conservatively scan the}}
\DoxyCodeLine{1899     \textcolor{comment}{// stack.}}
\DoxyCodeLine{1900     isolate-\/>global\_safepoint()-\/>IterateClientIsolates(}
\DoxyCodeLine{1901         [v = \&client\_root\_visitor](Isolate* client) \{}
\DoxyCodeLine{1902           client-\/>heap()-\/>IterateConservativeStackRoots(}
\DoxyCodeLine{1903               v, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0}{Heap::IterateRootsMode::kClientIsolate}});}
\DoxyCodeLine{1904         \});}
\DoxyCodeLine{1905   \}}
\DoxyCodeLine{1906   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}{in\_conservative\_stack\_scanning\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{1907 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), v8\+::internal\+::\+Isolate\+::heap(), heap\+\_\+, in\+\_\+conservative\+\_\+stack\+\_\+scanning\+\_\+, v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates(), v8\+::internal\+::\+Heap\+::\+Iterate\+Conservative\+Stack\+Roots(), v8\+::internal\+::\+Heap\+::k\+Client\+Isolate, v8\+::internal\+::\+Heap\+::k\+Main\+Isolate, TRACE\+\_\+\+GC, and v8\+::internal\+::\+Heap\+::tracer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_acedafe750c7420c9b300b28d35551732_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a14908aaa211b8c1bbafb7e4496736114}\label{classv8_1_1internal_1_1MarkCompactCollector_a14908aaa211b8c1bbafb7e4496736114}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkTransitiveClosure@{MarkTransitiveClosure}}
\index{MarkTransitiveClosure@{MarkTransitiveClosure}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkTransitiveClosure()}{MarkTransitiveClosure()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Transitive\+Closure (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2346 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2346                                                  \{}
\DoxyCodeLine{2347   \textcolor{comment}{// Incremental marking might leave ephemerons in main task's local}}
\DoxyCodeLine{2348   \textcolor{comment}{// buffer, flush it into global pool.}}
\DoxyCodeLine{2349   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{2350 }
\DoxyCodeLine{2351   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5}{MarkTransitiveClosureUntilFixpoint}}()) \{}
\DoxyCodeLine{2352     \textcolor{comment}{// Fixpoint iteration needed too many iterations and was cancelled. Use the}}
\DoxyCodeLine{2353     \textcolor{comment}{// guaranteed linear algorithm. But only in the final single-\/thread marking}}
\DoxyCodeLine{2354     \textcolor{comment}{// phase.}}
\DoxyCodeLine{2355     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}{parallel\_marking\_}}) \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872}{MarkTransitiveClosureLinear}}();}
\DoxyCodeLine{2356   \}}
\DoxyCodeLine{2357 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872}\label{classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkTransitiveClosureLinear@{MarkTransitiveClosureLinear}}
\index{MarkTransitiveClosureLinear@{MarkTransitiveClosureLinear}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkTransitiveClosureLinear()}{MarkTransitiveClosureLinear()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Transitive\+Closure\+Linear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2128 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2128                                                        \{}
\DoxyCodeLine{2129   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{2130            GCTracer::Scope::MC\_MARK\_WEAK\_CLOSURE\_EPHEMERON\_LINEAR);}
\DoxyCodeLine{2131   \textcolor{comment}{// This phase doesn't support parallel marking.}}
\DoxyCodeLine{2132   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_a06980681d462120291c2047124cd6a3a}{IsStopped}}());}
\DoxyCodeLine{2133   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.empty());}
\DoxyCodeLine{2134   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(}
\DoxyCodeLine{2135       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2136 }
\DoxyCodeLine{2137   \textcolor{comment}{// Update visitor to directly add new ephemerons to key\_to\_values\_.}}
\DoxyCodeLine{2138   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}{marking\_visitor\_}}-\/>SetKeyToValues(\&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}});}
\DoxyCodeLine{2139 }
\DoxyCodeLine{2140   Ephemeron ephemeron;}
\DoxyCodeLine{2141   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.Pop(\&ephemeron)) \{}
\DoxyCodeLine{2142     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}{ApplyEphemeronSemantics}}(ephemeron.key, ephemeron.value) ==}
\DoxyCodeLine{2143         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}{EphemeronResult::kUnresolved}}) \{}
\DoxyCodeLine{2144       \textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.try\_emplace(ephemeron.key).first;}
\DoxyCodeLine{2145       it-\/>second.push\_back(ephemeron.value);}
\DoxyCodeLine{2146     \}}
\DoxyCodeLine{2147   \}}
\DoxyCodeLine{2148 }
\DoxyCodeLine{2149   \textcolor{keywordtype}{bool} work\_to\_do;}
\DoxyCodeLine{2150 }
\DoxyCodeLine{2151   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{2152     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc}{PerformWrapperTracing}}();}
\DoxyCodeLine{2153 }
\DoxyCodeLine{2154     \{}
\DoxyCodeLine{2155       \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{2156                GCTracer::Scope::MC\_MARK\_WEAK\_CLOSURE\_EPHEMERON\_MARKING);}
\DoxyCodeLine{2157       \textcolor{comment}{// Drain marking worklist but:}}
\DoxyCodeLine{2158       \textcolor{comment}{// (1) push all new ephemerons directly into key\_to\_values\_.}}
\DoxyCodeLine{2159       \textcolor{comment}{// (2) look up all traced objects in key\_to\_values\_.}}
\DoxyCodeLine{2160       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412}{ProcessMarkingWorklist}}<}
\DoxyCodeLine{2161           \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7}{MarkingWorklistProcessingMode::kProcessRememberedEphemerons}}>(}
\DoxyCodeLine{2162           \mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1330af8b50fc0206f46945ea8d6922cf}{v8::base::TimeDelta::Max}}(), SIZE\_MAX);}
\DoxyCodeLine{2163     \}}
\DoxyCodeLine{2164 }
\DoxyCodeLine{2165     \textcolor{comment}{// Do NOT drain marking worklist here, otherwise the current checks}}
\DoxyCodeLine{2166     \textcolor{comment}{// for work\_to\_do are not sufficient for determining if another iteration}}
\DoxyCodeLine{2167     \textcolor{comment}{// is necessary.}}
\DoxyCodeLine{2168 }
\DoxyCodeLine{2169     work\_to\_do =}
\DoxyCodeLine{2170         !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsEmpty() ||}
\DoxyCodeLine{2171         !\mbox{\hyperlink{namespacev8_1_1internal_a9702f1cf0153510561af900313494b5e}{IsCppHeapMarkingFinished}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get());}
\DoxyCodeLine{2172     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2173   \} \textcolor{keywordflow}{while} (work\_to\_do);}
\DoxyCodeLine{2174 }
\DoxyCodeLine{2175   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsEmpty());}
\DoxyCodeLine{2176 }
\DoxyCodeLine{2177   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.current\_ephemerons.IsEmpty());}
\DoxyCodeLine{2178   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.next\_ephemerons.IsEmpty());}
\DoxyCodeLine{2179 }
\DoxyCodeLine{2180   \textcolor{comment}{// Flush local ephemerons for main task to global pool.}}
\DoxyCodeLine{2181   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>ephemeron\_hash\_tables\_local.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{2182   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{2183 \}}

\end{DoxyCode}


References CHECK, DCHECK, v8\+::internal\+::\+Is\+Cpp\+Heap\+Marking\+Finished(), v8\+::internal\+::\+Ephemeron\+::key, v8\+::base\+::\+Time\+Delta\+::\+Max(), TRACE\+\_\+\+GC, and v8\+::internal\+::\+Ephemeron\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aab5735ec944913ace7e63d14f47ba872_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5}\label{classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MarkTransitiveClosureUntilFixpoint@{MarkTransitiveClosureUntilFixpoint}}
\index{MarkTransitiveClosureUntilFixpoint@{MarkTransitiveClosureUntilFixpoint}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MarkTransitiveClosureUntilFixpoint()}{MarkTransitiveClosureUntilFixpoint()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Mark\+Transitive\+Closure\+Until\+Fixpoint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2058 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2058                                                               \{}
\DoxyCodeLine{2059   \textcolor{keywordtype}{int} iterations = 0;}
\DoxyCodeLine{2060   \textcolor{keywordtype}{int} max\_iterations = \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.ephemeron\_fixpoint\_iterations;}
\DoxyCodeLine{2061 }
\DoxyCodeLine{2062   \textcolor{keywordtype}{bool} another\_ephemeron\_iteration\_main\_thread;}
\DoxyCodeLine{2063 }
\DoxyCodeLine{2064   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{2065     \textcolor{keywordflow}{if} (iterations >= max\_iterations) \{}
\DoxyCodeLine{2066       \textcolor{comment}{// Give up fixpoint iteration and switch to linear algorithm.}}
\DoxyCodeLine{2067       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{2068     \}}
\DoxyCodeLine{2069 }
\DoxyCodeLine{2070     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc}{PerformWrapperTracing}}();}
\DoxyCodeLine{2071 }
\DoxyCodeLine{2072     \textcolor{comment}{// Move ephemerons from next\_ephemerons into current\_ephemerons to}}
\DoxyCodeLine{2073     \textcolor{comment}{// drain them in this iteration.}}
\DoxyCodeLine{2074     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(}
\DoxyCodeLine{2075         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2076     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.current\_ephemerons.Merge(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.next\_ephemerons);}
\DoxyCodeLine{2077     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_adad9b09397a5d864fbfc58c3ac91ccda}{set\_another\_ephemeron\_iteration}}(\textcolor{keyword}{false});}
\DoxyCodeLine{2078 }
\DoxyCodeLine{2079     \{}
\DoxyCodeLine{2080       \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{2081                GCTracer::Scope::MC\_MARK\_WEAK\_CLOSURE\_EPHEMERON\_MARKING);}
\DoxyCodeLine{2082       another\_ephemeron\_iteration\_main\_thread = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835}{ProcessEphemerons}}();}
\DoxyCodeLine{2083     \}}
\DoxyCodeLine{2084 }
\DoxyCodeLine{2085     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(}
\DoxyCodeLine{2086         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2087     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.IsLocalEmpty());}
\DoxyCodeLine{2088 }
\DoxyCodeLine{2089     ++iterations;}
\DoxyCodeLine{2090   \} \textcolor{keywordflow}{while} (another\_ephemeron\_iteration\_main\_thread ||}
\DoxyCodeLine{2091            \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_aece67b16f36fe0fcea37a7bd7de858f6}{another\_ephemeron\_iteration}}() ||}
\DoxyCodeLine{2092            !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsEmpty() ||}
\DoxyCodeLine{2093            !\mbox{\hyperlink{namespacev8_1_1internal_a9702f1cf0153510561af900313494b5e}{IsCppHeapMarkingFinished}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get()));}
\DoxyCodeLine{2094 }
\DoxyCodeLine{2095   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{2096 \}}

\end{DoxyCode}


References CHECK, DCHECK, v8\+::internal\+::\+Is\+Cpp\+Heap\+Marking\+Finished(), TRACE\+\_\+\+GC, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a29754ded838631a20e64ff72c4ebc7b5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea}\label{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!MaybeEnableBackgroundThreadsInCycle@{MaybeEnableBackgroundThreadsInCycle}}
\index{MaybeEnableBackgroundThreadsInCycle@{MaybeEnableBackgroundThreadsInCycle}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{MaybeEnableBackgroundThreadsInCycle()}{MaybeEnableBackgroundThreadsInCycle()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Maybe\+Enable\+Background\+Threads\+In\+Cycle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fb}{Call\+Origin}}}]{origin }\end{DoxyParamCaption})}



Definition at line 466 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{467                        \{}
\DoxyCodeLine{468   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.concurrent\_marking \&\& !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\_background\_threads\_in\_cycle\_}}) \{}
\DoxyCodeLine{469     \textcolor{comment}{// With -\/-\/parallel\_pause\_for\_gc\_in\_background we force background threads in}}
\DoxyCodeLine{470     \textcolor{comment}{// the atomic pause.}}
\DoxyCodeLine{471     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} force\_background\_threads =}
\DoxyCodeLine{472         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.parallel\_pause\_for\_gc\_in\_background \&\&}
\DoxyCodeLine{473         origin == \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7}{CallOrigin::kAtomicGC}};}
\DoxyCodeLine{474     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\_background\_threads\_in\_cycle\_}} =}
\DoxyCodeLine{475         force\_background\_threads || \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ac434b6b237146b5964c6b76d7a8ad2c6}{ShouldUseBackgroundThreads}}();}
\DoxyCodeLine{476 }
\DoxyCodeLine{477     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\_background\_threads\_in\_cycle\_}}) \{}
\DoxyCodeLine{478       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_aaf8d90cff77b3890a4de513377521ce4}{RescheduleJobIfNeeded}}(}
\DoxyCodeLine{479           \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}});}
\DoxyCodeLine{480 }
\DoxyCodeLine{481       \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})) \{}
\DoxyCodeLine{482         cpp\_heap-\/>ReEnableConcurrentMarking();}
\DoxyCodeLine{483       \}}
\DoxyCodeLine{484     \}}
\DoxyCodeLine{485   \}}
\DoxyCodeLine{486 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::concurrent\+\_\+marking(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap\+\_\+, v8\+::internal\+::\+Cpp\+Heap\+::\+From(), heap(), heap\+\_\+, k\+Atomic\+GC, v8\+::internal\+::\+MARK\+\_\+\+COMPACTOR, v8\+::internal\+::\+Concurrent\+Marking\+::\+Reschedule\+Job\+If\+Needed(), v8\+::internal\+::\+Heap\+::\+Should\+Use\+Background\+Threads(), use\+\_\+background\+\_\+threads\+\_\+in\+\_\+cycle\+\_\+, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage(), and v8\+::internal\+::\+Incremental\+Marking\+::\+Step().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a927eebc2a596cab74de9a052a849d0ea_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a9e736fa08fd40551bc05dc8ed6f691a6}\label{classv8_1_1internal_1_1MarkCompactCollector_a9e736fa08fd40551bc05dc8ed6f691a6}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!NumberOfParallelEphemeronVisitingTasks@{NumberOfParallelEphemeronVisitingTasks}}
\index{NumberOfParallelEphemeronVisitingTasks@{NumberOfParallelEphemeronVisitingTasks}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{NumberOfParallelEphemeronVisitingTasks()}{NumberOfParallelEphemeronVisitingTasks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Number\+Of\+Parallel\+Ephemeron\+Visiting\+Tasks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{elements }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc}\label{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!PerformWrapperTracing@{PerformWrapperTracing}}
\index{PerformWrapperTracing@{PerformWrapperTracing}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{PerformWrapperTracing()}{PerformWrapperTracing()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Perform\+Wrapper\+Tracing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2185 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2185                                                  \{}
\DoxyCodeLine{2186   \textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}});}
\DoxyCodeLine{2187   \textcolor{keywordflow}{if} (!cpp\_heap) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2188 }
\DoxyCodeLine{2189   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_EMBEDDER\_TRACING);}
\DoxyCodeLine{2190   cpp\_heap-\/>AdvanceMarking(\mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1330af8b50fc0206f46945ea8d6922cf}{v8::base::TimeDelta::Max}}(), SIZE\_MAX);}
\DoxyCodeLine{2191 \}}

\end{DoxyCode}


References v8\+::base\+::\+Time\+Delta\+::\+Max(), and TRACE\+\_\+\+GC.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa35f5f312b9c6ccc1965b9cba1ae14fc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77}\label{classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!PinPreciseRootsIfNeeded@{PinPreciseRootsIfNeeded}}
\index{PinPreciseRootsIfNeeded@{PinPreciseRootsIfNeeded}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{PinPreciseRootsIfNeeded()}{PinPreciseRootsIfNeeded()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Pin\+Precise\+Roots\+If\+Needed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 4909 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4909                                                    \{}
\DoxyCodeLine{4910   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8dda200b2e8be21825a3ced86867afe2}{ShouldUsePrecisePinningForMajorGC}}()) \{}
\DoxyCodeLine{4911     \textcolor{keywordflow}{return};}
\DoxyCodeLine{4912   \}}
\DoxyCodeLine{4913 }
\DoxyCodeLine{4914   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_PIN\_PAGES);}
\DoxyCodeLine{4915 }
\DoxyCodeLine{4916   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{4917 }
\DoxyCodeLine{4918   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a03cb76c44646ccae2a33eb05bcdf0dc5}{PrecisePagePinningVisitor}} root\_visitor(\textcolor{keyword}{this});}
\DoxyCodeLine{4919 }
\DoxyCodeLine{4920   \textcolor{comment}{// Mark the heap roots including global variables, stack variables,}}
\DoxyCodeLine{4921   \textcolor{comment}{// etc., and all objects reachable from them.}}
\DoxyCodeLine{4922   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9239c3dcfd5357b3597bbde97924923a}{IterateRootsForPrecisePinning}}(\&root\_visitor);}
\DoxyCodeLine{4923 }
\DoxyCodeLine{4924   \textcolor{keywordflow}{if} (isolate-\/>is\_shared\_space\_isolate()) \{}
\DoxyCodeLine{4925     ClientRootVisitor<> client\_root\_visitor(\&root\_visitor);}
\DoxyCodeLine{4926     isolate-\/>global\_safepoint()-\/>IterateClientIsolates(}
\DoxyCodeLine{4927         [\&client\_root\_visitor](Isolate* client) \{}
\DoxyCodeLine{4928           client-\/>heap()-\/>IterateRootsForPrecisePinning(\&client\_root\_visitor);}
\DoxyCodeLine{4929         \});}
\DoxyCodeLine{4930   \}}
\DoxyCodeLine{4931 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Factory\+::isolate(), v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates(), and TRACE\+\_\+\+GC.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_adcccd5bf69efe4a16b2f462192b42d77_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834}\label{classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!PostProcessAbortedEvacuationCandidates@{PostProcessAbortedEvacuationCandidates}}
\index{PostProcessAbortedEvacuationCandidates@{PostProcessAbortedEvacuationCandidates}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{PostProcessAbortedEvacuationCandidates()}{PostProcessAbortedEvacuationCandidates()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Post\+Process\+Aborted\+Evacuation\+Candidates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5926 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5926                                                                     \{}
\DoxyCodeLine{5927   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} start\_and\_page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}) \{}
\DoxyCodeLine{5928     PageMetadata* page = start\_and\_page.second;}
\DoxyCodeLine{5929     MemoryChunk* chunk = page-\/>Chunk();}
\DoxyCodeLine{5930     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}}));}
\DoxyCodeLine{5931     chunk-\/>SetFlagSlow(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}});}
\DoxyCodeLine{5932   \}}
\DoxyCodeLine{5933   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} start\_and\_page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}) \{}
\DoxyCodeLine{5934     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a58b90c1c7c35b855c401793183c9c13f}{ReRecordPage}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, start\_and\_page.first, start\_and\_page.second);}
\DoxyCodeLine{5935   \}}
\DoxyCodeLine{5936   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} page : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}{aborted\_evacuation\_candidates\_due\_to\_flags\_}}) \{}
\DoxyCodeLine{5937     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a58b90c1c7c35b855c401793183c9c13f}{ReRecordPage}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, page-\/>area\_start(), page);}
\DoxyCodeLine{5938   \}}
\DoxyCodeLine{5939   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} aborted\_pages =}
\DoxyCodeLine{5940       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}.size() +}
\DoxyCodeLine{5941       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}{aborted\_evacuation\_candidates\_due\_to\_flags\_}}.size();}
\DoxyCodeLine{5942   \textcolor{keywordtype}{size\_t} aborted\_pages\_verified = 0;}
\DoxyCodeLine{5943   \textcolor{keywordflow}{for} (PageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{5944     MemoryChunk* chunk = p-\/>Chunk();}
\DoxyCodeLine{5945     \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}})) \{}
\DoxyCodeLine{5946       \textcolor{comment}{// Only clear EVACUATION\_CANDIDATE flag after all slots were re-\/recorded}}
\DoxyCodeLine{5947       \textcolor{comment}{// on all aborted pages. Necessary since repopulating}}
\DoxyCodeLine{5948       \textcolor{comment}{// OLD\_TO\_OLD still requires the EVACUATION\_CANDIDATE flag. After clearing}}
\DoxyCodeLine{5949       \textcolor{comment}{// the evacuation candidate flag the page is again in a regular state.}}
\DoxyCodeLine{5950       p-\/>ClearEvacuationCandidate();}
\DoxyCodeLine{5951       aborted\_pages\_verified++;}
\DoxyCodeLine{5952     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5953       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(chunk-\/>IsEvacuationCandidate());}
\DoxyCodeLine{5954       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{5955     \}}
\DoxyCodeLine{5956   \}}
\DoxyCodeLine{5957   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(aborted\_pages\_verified, aborted\_pages);}
\DoxyCodeLine{5958   \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(aborted\_pages\_verified);}
\DoxyCodeLine{5959   \textcolor{keywordflow}{return} aborted\_pages;}
\DoxyCodeLine{5960 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), DCHECK, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Re\+Record\+Page(), v8\+::internal\+::\+Memory\+Chunk\+::\+Set\+Flag\+Slow(), and USE.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a22086e39ee1c3864010dac3a10135834_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c}\label{classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!Prepare@{Prepare}}
\index{Prepare@{Prepare}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{Prepare()}{Prepare()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Prepare (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 765 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{765                                    \{}
\DoxyCodeLine{766 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{767   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(state\_ == \mbox{\hyperlink{namespacev8_af4bd667bae597459fddd3443cbec0cb2ab7c9b8c4d5920370856a0fc30c2b6bb8}{IDLE}});}
\DoxyCodeLine{768   state\_ = PREPARE\_GC;}
\DoxyCodeLine{769 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// DEBUG}}
\DoxyCodeLine{770 }
\DoxyCodeLine{771   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a01bad92ed163322fda20e965bec9e19e}{sweeping\_in\_progress}}());}
\DoxyCodeLine{772 }
\DoxyCodeLine{773   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_a36f76d27a7a670a4b270804cef79cea1}{IsMarking}}(),}
\DoxyCodeLine{774                  \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_af7648dd98be368a6b882111f2c62441c}{IsMajorMarking}}());}
\DoxyCodeLine{775   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_a36f76d27a7a670a4b270804cef79cea1}{IsMarking}}()) \{}
\DoxyCodeLine{776     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae}{StartCompaction}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71}{StartCompactionMode::kAtomic}});}
\DoxyCodeLine{777     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3}{StartMarking}}();}
\DoxyCodeLine{778     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}}) \{}
\DoxyCodeLine{779       \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_EMBEDDER\_PROLOGUE);}
\DoxyCodeLine{780       \textcolor{comment}{// `StartMarking()` immediately starts marking which requires V8 worklists}}
\DoxyCodeLine{781       \textcolor{comment}{// to be set up.}}
\DoxyCodeLine{782       \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}})-\/>\mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_ae67d52cdcb6ee95629fe16a51437588c}{StartMarking}}();}
\DoxyCodeLine{783     \}}
\DoxyCodeLine{784   \}}
\DoxyCodeLine{785   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* new\_space = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{786     new\_space-\/>GarbageCollectionPrologue();}
\DoxyCodeLine{787   \}}
\DoxyCodeLine{788   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3498d35123e49efe70dd0921c5dda802}{use\_new\_space}}()) \{}
\DoxyCodeLine{789 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{790     \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} original\_top = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a71a5010a2dde4bbad050c4947dc450e2}{allocator}}()}
\DoxyCodeLine{791                                -\/>\mbox{\hyperlink{classv8_1_1internal_1_1HeapAllocator_a021e4a3fc4d7ff340e494fa638d848ef}{new\_space\_allocator}}()}
\DoxyCodeLine{792                                -\/>\mbox{\hyperlink{classv8_1_1internal_1_1MainAllocator_af8c189b36b71592dd9f3b3b98c636de9}{GetOriginalTopAndLimit}}()}
\DoxyCodeLine{793                                .first;}
\DoxyCodeLine{794     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a71a5010a2dde4bbad050c4947dc450e2}{allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1HeapAllocator_a021e4a3fc4d7ff340e494fa638d848ef}{new\_space\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MainAllocator_affcbea59347c2fdd71bfdf184be65197}{top}}(), original\_top);}
\DoxyCodeLine{795 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// DEBUG}}
\DoxyCodeLine{796   \}}
\DoxyCodeLine{797 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::allocator(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap\+\_\+, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Cpp\+Heap\+::\+From(), v8\+::internal\+::\+Main\+Allocator\+::\+Get\+Original\+Top\+And\+Limit(), heap\+\_\+, v8\+::\+IDLE, v8\+::internal\+::\+Heap\+::incremental\+\_\+marking(), v8\+::internal\+::\+Incremental\+Marking\+::\+Is\+Major\+Marking(), v8\+::internal\+::\+Incremental\+Marking\+::\+Is\+Marking(), k\+Atomic, v8\+::internal\+::\+Heap\+::new\+\_\+space(), v8\+::internal\+::\+Heap\+Allocator\+::new\+\_\+space\+\_\+allocator(), Start\+Compaction(), v8\+::internal\+::\+Cpp\+Heap\+::\+Start\+Marking(), Start\+Marking(), sweeper\+\_\+, v8\+::internal\+::\+Sweeper\+::sweeping\+\_\+in\+\_\+progress(), v8\+::internal\+::\+Main\+Allocator\+::top(), TRACE\+\_\+\+GC, v8\+::internal\+::\+Heap\+::tracer(), and v8\+::internal\+::\+Heap\+::use\+\_\+new\+\_\+space().



Referenced by v8\+::internal\+::\+Heap\+::\+Mark\+Compact().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a88bb504c9d7b76a16ab2f067e907574c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a68f84b58f91bd059cec89f8b1a061775}\label{classv8_1_1internal_1_1MarkCompactCollector_a68f84b58f91bd059cec89f8b1a061775}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessEphemeron@{ProcessEphemeron}}
\index{ProcessEphemeron@{ProcessEphemeron}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessEphemeron()}{ProcessEphemeron()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Ephemeron (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{key,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2273 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2274                                                                       \{}
\DoxyCodeLine{2275   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88}{EphemeronResult}} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}{ApplyEphemeronSemantics}}(\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{2276 }
\DoxyCodeLine{2277   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} == \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88a8fae96c2c16a6e5bffe0ababb3ede10e}{EphemeronResult::kUnresolved}}) \{}
\DoxyCodeLine{2278     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.Push(Ephemeron\{\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}\});}
\DoxyCodeLine{2279     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{2280   \}}
\DoxyCodeLine{2281 }
\DoxyCodeLine{2282   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} == \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}{EphemeronResult::kMarkedValue}};}
\DoxyCodeLine{2283 \}}

\end{DoxyCode}


References v8\+::internal\+::key, v8\+::base\+::internal\+::result, and v8\+::internal\+::value.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835}\label{classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessEphemerons@{ProcessEphemerons}}
\index{ProcessEphemerons@{ProcessEphemerons}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessEphemerons()}{ProcessEphemerons()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Ephemerons (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2098 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2098                                              \{}
\DoxyCodeLine{2099   Ephemeron ephemeron;}
\DoxyCodeLine{2100   \textcolor{keywordtype}{bool} another\_ephemeron\_iteration = \textcolor{keyword}{false};}
\DoxyCodeLine{2101 }
\DoxyCodeLine{2102   \textcolor{comment}{// Drain current\_ephemerons and push ephemerons where key and value are still}}
\DoxyCodeLine{2103   \textcolor{comment}{// unreachable into next\_ephemerons.}}
\DoxyCodeLine{2104   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.Pop(\&ephemeron)) \{}
\DoxyCodeLine{2105     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a68f84b58f91bd059cec89f8b1a061775}{ProcessEphemeron}}(ephemeron.key, ephemeron.value)) \{}
\DoxyCodeLine{2106       another\_ephemeron\_iteration = \textcolor{keyword}{true};}
\DoxyCodeLine{2107     \}}
\DoxyCodeLine{2108   \}}
\DoxyCodeLine{2109 }
\DoxyCodeLine{2110   \textcolor{comment}{// Drain marking worklist and push discovered ephemerons into}}
\DoxyCodeLine{2111   \textcolor{comment}{// next\_ephemerons.}}
\DoxyCodeLine{2112   \textcolor{keywordtype}{size\_t} objects\_processed;}
\DoxyCodeLine{2113   std::tie(\mbox{\hyperlink{namespacewasm_a1159abdb217149e8db975f0037d4bfe7}{std::ignore}}, objects\_processed) =}
\DoxyCodeLine{2114       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412}{ProcessMarkingWorklist}}(\mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1330af8b50fc0206f46945ea8d6922cf}{v8::base::TimeDelta::Max}}(), SIZE\_MAX);}
\DoxyCodeLine{2115 }
\DoxyCodeLine{2116   \textcolor{comment}{// As soon as a single object was processed and potentially marked another}}
\DoxyCodeLine{2117   \textcolor{comment}{// object we need another iteration. Otherwise we might miss to apply}}
\DoxyCodeLine{2118   \textcolor{comment}{// ephemeron semantics on it.}}
\DoxyCodeLine{2119   \textcolor{keywordflow}{if} (objects\_processed > 0) another\_ephemeron\_iteration = \textcolor{keyword}{true};}
\DoxyCodeLine{2120 }
\DoxyCodeLine{2121   \textcolor{comment}{// Flush local ephemerons for main task to global pool.}}
\DoxyCodeLine{2122   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>ephemeron\_hash\_tables\_local.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{2123   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>next\_ephemerons\_local.\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{2124 }
\DoxyCodeLine{2125   \textcolor{keywordflow}{return} another\_ephemeron\_iteration;}
\DoxyCodeLine{2126 \}}

\end{DoxyCode}


References wasm\+::ignore(), v8\+::internal\+::\+Ephemeron\+::key, v8\+::base\+::\+Time\+Delta\+::\+Max(), and v8\+::internal\+::\+Ephemeron\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a22174d94a0be4a06c478e30787da2835_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a90e4a47ecc544481e5d1d8217817a392}\label{classv8_1_1internal_1_1MarkCompactCollector_a90e4a47ecc544481e5d1d8217817a392}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessFlushedBaselineCandidates@{ProcessFlushedBaselineCandidates}}
\index{ProcessFlushedBaselineCandidates@{ProcessFlushedBaselineCandidates}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessFlushedBaselineCandidates()}{ProcessFlushedBaselineCandidates()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Flushed\+Baseline\+Candidates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3552 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3552                                                             \{}
\DoxyCodeLine{3553   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_baseline\_code ||}
\DoxyCodeLine{3554          \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.baseline\_flushing\_candidates.IsEmpty());}
\DoxyCodeLine{3555   Tagged<JSFunction> flushed\_js\_function;}
\DoxyCodeLine{3556   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>baseline\_flushing\_candidates\_local.Pop(}
\DoxyCodeLine{3557       \&flushed\_js\_function)) \{}
\DoxyCodeLine{3558     \textcolor{keyword}{auto} gc\_notify\_updated\_slot = [](\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} object, \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot,}
\DoxyCodeLine{3559                                      \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} target) \{}
\DoxyCodeLine{3560       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(\textcolor{keywordtype}{object}, slot, Cast<HeapObject>(target));}
\DoxyCodeLine{3561     \};}
\DoxyCodeLine{3562     flushed\_js\_function-\/>ResetIfCodeFlushed(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3563                                             gc\_notify\_updated\_slot);}
\DoxyCodeLine{3564 }
\DoxyCodeLine{3565 \textcolor{preprocessor}{\#ifndef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3566     \textcolor{comment}{// Record the code slot that has been updated either to CompileLazy,}}
\DoxyCodeLine{3567     \textcolor{comment}{// InterpreterEntryTrampoline or baseline code.}}
\DoxyCodeLine{3568     \textcolor{comment}{// This is only necessary when the sandbox is not enabled. If it is, the}}
\DoxyCodeLine{3569     \textcolor{comment}{// Code objects are referenced through a pointer table indirection and so}}
\DoxyCodeLine{3570     \textcolor{comment}{// remembered slots are not necessary as the Code object will update its}}
\DoxyCodeLine{3571     \textcolor{comment}{// entry in the pointer table when it is relocated.}}
\DoxyCodeLine{3572     \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot = flushed\_js\_function-\/>RawField(JSFunction::kCodeOffset);}
\DoxyCodeLine{3573     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(flushed\_js\_function, slot, Cast<HeapObject>(*slot));}
\DoxyCodeLine{3574 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3575   \}}
\DoxyCodeLine{3576 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412}\label{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessMarkingWorklist@{ProcessMarkingWorklist}}
\index{ProcessMarkingWorklist@{ProcessMarkingWorklist}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessMarkingWorklist()}{ProcessMarkingWorklist()}}
{\footnotesize\ttfamily template$<$Mark\+Compact\+Collector\+::\+Marking\+Worklist\+Processing\+Mode mode$>$ \\
std\+::pair$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Marking\+Worklist (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1TimeDelta}{v8\+::base\+::\+Time\+Delta}}}]{max\+\_\+duration,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+bytes\+\_\+to\+\_\+process }\end{DoxyParamCaption})}



Definition at line 2200 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2201                                                                \{}
\DoxyCodeLine{2202   \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} object;}
\DoxyCodeLine{2203   \textcolor{keywordtype}{size\_t} bytes\_processed = 0;}
\DoxyCodeLine{2204   \textcolor{keywordtype}{size\_t} objects\_processed = 0;}
\DoxyCodeLine{2205   \textcolor{keywordtype}{bool} is\_per\_context\_mode = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsPerContextMode();}
\DoxyCodeLine{2206   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{2207   \textcolor{keyword}{const} \textcolor{keyword}{auto} start = \mbox{\hyperlink{classv8_1_1base_1_1TimeTicks_ab0886bf0e84f1e1fcdc101021c2c0775}{v8::base::TimeTicks::Now}}();}
\DoxyCodeLine{2208   PtrComprCageBase cage\_base(isolate);}
\DoxyCodeLine{2209 }
\DoxyCodeLine{2210   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}{parallel\_marking\_}} \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}{UseBackgroundThreadsInCycle}}()) \{}
\DoxyCodeLine{2211     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aaac51e78398da9ba59e847682b3a62fa}{concurrent\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ConcurrentMarking_aaf8d90cff77b3890a4de513377521ce4}{RescheduleJobIfNeeded}}(}
\DoxyCodeLine{2212         \mbox{\hyperlink{namespacev8_1_1internal_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5}{GarbageCollector::MARK\_COMPACTOR}}, \mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{TaskPriority::kUserBlocking}});}
\DoxyCodeLine{2213   \}}
\DoxyCodeLine{2214 }
\DoxyCodeLine{2215   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>Pop(\&\textcolor{keywordtype}{object}) ||}
\DoxyCodeLine{2216          \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>PopOnHold(\&\textcolor{keywordtype}{object})) \{}
\DoxyCodeLine{2217     \textcolor{comment}{// The marking worklist should never contain filler objects.}}
\DoxyCodeLine{2218     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_abbf68b3bf1ca62b0645f031cdc769188}{IsFreeSpaceOrFiller}}(\textcolor{keywordtype}{object}, cage\_base));}
\DoxyCodeLine{2219     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(\textcolor{keywordtype}{object}));}
\DoxyCodeLine{2220     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a91ac1680dc7f626bd8675e14ac660240}{HeapLayout::InReadOnlySpace}}(\textcolor{keywordtype}{object}));}
\DoxyCodeLine{2221     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1HeapUtils_a0ca292749d64b1e6459e456cedc515b1}{HeapUtils::GetOwnerHeap}}(\textcolor{keywordtype}{object}), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{2222     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a49599076f26bcf5567b86d2dc86cc7b2}{Contains}}(\textcolor{keywordtype}{object}));}
\DoxyCodeLine{2223     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_aaf1662a3d84f030521524b6bc605785e}{IsUnmarked}}(\textcolor{keywordtype}{object})));}
\DoxyCodeLine{2224 }
\DoxyCodeLine{2225     \textcolor{keywordflow}{if} constexpr (\mbox{\hyperlink{flag-definitions_8h_adaf90f045d5cd2710edd625b8685472a}{mode}} ==}
\DoxyCodeLine{2226                   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7aa03799336160dde3614472c712abea3c71daec143e5c5ae23dd69c7d52c1a7}{MarkingWorklistProcessingMode::kProcessRememberedEphemerons}}) \{}
\DoxyCodeLine{2227       \textcolor{keyword}{auto} it = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.find(\textcolor{keywordtype}{object});}
\DoxyCodeLine{2228       \textcolor{keywordflow}{if} (it != \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.end()) \{}
\DoxyCodeLine{2229         \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}} : it-\/>second) \{}
\DoxyCodeLine{2230           \textcolor{keyword}{const} \textcolor{keyword}{auto} target\_worklist =}
\DoxyCodeLine{2231               \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ac5e90f6e0c7ddb83975856969a4ad03f}{MarkingHelper::ShouldMarkObject}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{2232           \textcolor{keywordflow}{if} (target\_worklist) \{}
\DoxyCodeLine{2233             \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a12d88c9886e76b0365ad7e70af83b280}{MarkObject}}(\textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}, target\_worklist.value());}
\DoxyCodeLine{2234           \}}
\DoxyCodeLine{2235         \}}
\DoxyCodeLine{2236         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}.erase(it);}
\DoxyCodeLine{2237       \}}
\DoxyCodeLine{2238     \}}
\DoxyCodeLine{2239 }
\DoxyCodeLine{2240     Tagged<Map> map = \textcolor{keywordtype}{object}-\/>map(cage\_base);}
\DoxyCodeLine{2241     \textcolor{keywordflow}{if} (is\_per\_context\_mode) \{}
\DoxyCodeLine{2242       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} context;}
\DoxyCodeLine{2243       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a38d01cfcaa46efe4b24412d3eba66ca0}{native\_context\_inferrer\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1NativeContextInferrer_a25a195accfb5080cb345588b4d0eae39}{Infer}}(cage\_base, map, \textcolor{keywordtype}{object}, \&context)) \{}
\DoxyCodeLine{2244         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>SwitchToContext(context);}
\DoxyCodeLine{2245       \}}
\DoxyCodeLine{2246     \}}
\DoxyCodeLine{2247     \textcolor{keyword}{const} \textcolor{keyword}{auto} visited\_size = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}{marking\_visitor\_}}-\/>Visit(map, \textcolor{keywordtype}{object});}
\DoxyCodeLine{2248     \textcolor{keywordflow}{if} (visited\_size) \{}
\DoxyCodeLine{2249       \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_afd76b7261895b2043b1715d180858d29}{MutablePageMetadata::FromHeapObject}}(\textcolor{keywordtype}{object})-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_a04ea75362eb0f4229d1f0e20704bf762}{IncrementLiveBytesAtomically}}(}
\DoxyCodeLine{2250           \mbox{\hyperlink{common_2globals_8h_a76f936b13cc7401de647c23963eda5c1}{ALIGN\_TO\_ALLOCATION\_ALIGNMENT}}(visited\_size));}
\DoxyCodeLine{2251     \}}
\DoxyCodeLine{2252     \textcolor{keywordflow}{if} (is\_per\_context\_mode) \{}
\DoxyCodeLine{2253       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}{native\_context\_stats\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1NativeContextStats_aa5379cd60bbd4871363334edcf7ef566}{IncrementSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>Context(),}
\DoxyCodeLine{2254                                           map, \textcolor{keywordtype}{object}, visited\_size);}
\DoxyCodeLine{2255     \}}
\DoxyCodeLine{2256     bytes\_processed += visited\_size;}
\DoxyCodeLine{2257     objects\_processed++;}
\DoxyCodeLine{2258     static\_assert(\mbox{\hyperlink{namespacev8_1_1base_1_1bits_af9eb752b538fa8a66badab8f26e0e000}{base::bits::IsPowerOfTwo}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a83d32f2ce33023f3050bedde123689c1}{kDeadlineCheckInterval}}),}
\DoxyCodeLine{2259                   \textcolor{stringliteral}{"{}kDeadlineCheckInterval must be power of 2"{}});}
\DoxyCodeLine{2260     \textcolor{comment}{// The below check is an optimized version of}}
\DoxyCodeLine{2261     \textcolor{comment}{// `(objects\_processed \% kDeadlineCheckInterval) == 0`}}
\DoxyCodeLine{2262     \textcolor{keywordflow}{if} ((objects\_processed \& (\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a83d32f2ce33023f3050bedde123689c1}{kDeadlineCheckInterval}} -\/1)) == 0 \&\&}
\DoxyCodeLine{2263         ((\mbox{\hyperlink{classv8_1_1base_1_1TimeTicks_ab0886bf0e84f1e1fcdc101021c2c0775}{v8::base::TimeTicks::Now}}() -\/ start) > max\_duration)) \{}
\DoxyCodeLine{2264       \textcolor{keywordflow}{break};}
\DoxyCodeLine{2265     \}}
\DoxyCodeLine{2266     \textcolor{keywordflow}{if} (bytes\_processed >= max\_bytes\_to\_process) \{}
\DoxyCodeLine{2267       \textcolor{keywordflow}{break};}
\DoxyCodeLine{2268     \}}
\DoxyCodeLine{2269   \}}
\DoxyCodeLine{2270   \textcolor{keywordflow}{return} std::make\_pair(bytes\_processed, objects\_processed);}
\DoxyCodeLine{2271 \}}

\end{DoxyCode}


References ALIGN\+\_\+\+TO\+\_\+\+ALLOCATION\+\_\+\+ALIGNMENT, CHECK, DCHECK, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Free\+Space\+Or\+Filler(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Factory\+::isolate(), v8\+::base\+::bits\+::\+Is\+Power\+Of\+Two(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::k\+Deadline\+Check\+Interval, v8\+::k\+User\+Blocking, v8\+::internal\+::anonymous\+\_\+namespace\{traced-\/handles.\+cc\}\+::\+Mark\+Object(), mode(), v8\+::base\+::\+Time\+Ticks\+::\+Now(), and v8\+::internal\+::value.



Referenced by v8\+::internal\+::\+Incremental\+Marking\+::\+Step().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a0af0fd7aa4d838723848a5c082e43412_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ad34de0569d3f17ed9938be62ab5cda04}\label{classv8_1_1internal_1_1MarkCompactCollector_ad34de0569d3f17ed9938be62ab5cda04}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessOldBaselineSFI@{ProcessOldBaselineSFI}}
\index{ProcessOldBaselineSFI@{ProcessOldBaselineSFI}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessOldBaselineSFI()}{ProcessOldBaselineSFI()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Old\+Baseline\+SFI (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{flushing\+\_\+candidate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3462 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3463                                                    \{}
\DoxyCodeLine{3464   Tagged<Code> baseline\_code = flushing\_candidate-\/>baseline\_code(\mbox{\hyperlink{namespacev8_aee4e677b8d8a86416617b3330778b98a}{kAcquireLoad}});}
\DoxyCodeLine{3465   \textcolor{comment}{// Safe to do a relaxed load here since the Code was acquire-\/loaded.}}
\DoxyCodeLine{3466   Tagged<InstructionStream> baseline\_istream =}
\DoxyCodeLine{3467       baseline\_code-\/>instruction\_stream(baseline\_code-\/>code\_cage\_base(),}
\DoxyCodeLine{3468                                         \mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}});}
\DoxyCodeLine{3469   \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} baseline\_bytecode\_or\_interpreter\_data =}
\DoxyCodeLine{3470       baseline\_code-\/>bytecode\_or\_interpreter\_data();}
\DoxyCodeLine{3471 }
\DoxyCodeLine{3472   \textcolor{comment}{// During flushing a BytecodeArray is transformed into an UncompiledData}}
\DoxyCodeLine{3473   \textcolor{comment}{// in place. Seeing an UncompiledData here implies that another}}
\DoxyCodeLine{3474   \textcolor{comment}{// SharedFunctionInfo had a reference to the same BytecodeArray and}}
\DoxyCodeLine{3475   \textcolor{comment}{// flushed it before processing this candidate. This can happen when using}}
\DoxyCodeLine{3476   \textcolor{comment}{// CloneSharedFunctionInfo().}}
\DoxyCodeLine{3477   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} bytecode\_already\_decompiled =}
\DoxyCodeLine{3478       IsUncompiledData(baseline\_bytecode\_or\_interpreter\_data, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3479   \textcolor{keywordtype}{bool} is\_bytecode\_live = \textcolor{keyword}{false};}
\DoxyCodeLine{3480   \textcolor{keywordflow}{if} (!bytecode\_already\_decompiled) \{}
\DoxyCodeLine{3481     Tagged<BytecodeArray> bytecode =}
\DoxyCodeLine{3482         flushing\_candidate-\/>GetBytecodeArray(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3483     is\_bytecode\_live = \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(}
\DoxyCodeLine{3484         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}, bytecode);}
\DoxyCodeLine{3485   \}}
\DoxyCodeLine{3486 }
\DoxyCodeLine{3487   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3488                                           baseline\_istream)) \{}
\DoxyCodeLine{3489     \textcolor{comment}{// Currently baseline code holds bytecode array strongly and it is}}
\DoxyCodeLine{3490     \textcolor{comment}{// always ensured that bytecode is live if baseline code is live. Hence}}
\DoxyCodeLine{3491     \textcolor{comment}{// baseline code can safely load bytecode array without any additional}}
\DoxyCodeLine{3492     \textcolor{comment}{// checks. In future if this changes we need to update these checks to}}
\DoxyCodeLine{3493     \textcolor{comment}{// flush code if the bytecode is not live and also update baseline code}}
\DoxyCodeLine{3494     \textcolor{comment}{// to bailout if there is no bytecode.}}
\DoxyCodeLine{3495     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(is\_bytecode\_live);}
\DoxyCodeLine{3496 }
\DoxyCodeLine{3497     \textcolor{comment}{// Regardless of whether the Code is a Code or}}
\DoxyCodeLine{3498     \textcolor{comment}{// the InstructionStream itself, if the InstructionStream is live then}}
\DoxyCodeLine{3499     \textcolor{comment}{// the Code has to be live and will have been marked via}}
\DoxyCodeLine{3500     \textcolor{comment}{// the owning JSFunction.}}
\DoxyCodeLine{3501     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3502                                                baseline\_code));}
\DoxyCodeLine{3503   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_bytecode\_live || bytecode\_already\_decompiled) \{}
\DoxyCodeLine{3504     \textcolor{comment}{// Reset the function\_data field to the BytecodeArray, InterpreterData,}}
\DoxyCodeLine{3505     \textcolor{comment}{// or UncompiledData found on the baseline code. We can skip this step}}
\DoxyCodeLine{3506     \textcolor{comment}{// if the BytecodeArray is not live and not already decompiled, because}}
\DoxyCodeLine{3507     \textcolor{comment}{// FlushBytecodeFromSFI below will set the function\_data field.}}
\DoxyCodeLine{3508     flushing\_candidate-\/>FlushBaselineCode();}
\DoxyCodeLine{3509   \}}
\DoxyCodeLine{3510 }
\DoxyCodeLine{3511   \textcolor{keywordflow}{if} (!is\_bytecode\_live) \{}
\DoxyCodeLine{3512     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4672c902176abf0363018f4b29435209}{FlushSFI}}(flushing\_candidate, bytecode\_already\_decompiled);}
\DoxyCodeLine{3513   \}}
\DoxyCodeLine{3514   \textcolor{keywordflow}{return} is\_bytecode\_live;}
\DoxyCodeLine{3515 \}}

\end{DoxyCode}


References DCHECK, v8\+::k\+Acquire\+Load, and v8\+::k\+Relaxed\+Load.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c}\label{classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessOldBytecodeSFI@{ProcessOldBytecodeSFI}}
\index{ProcessOldBytecodeSFI@{ProcessOldBytecodeSFI}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessOldBytecodeSFI()}{ProcessOldBytecodeSFI()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Old\+Bytecode\+SFI (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{flushing\+\_\+candidate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3438 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3439                                                    \{}
\DoxyCodeLine{3440   \textcolor{comment}{// During flushing a BytecodeArray is transformed into an UncompiledData}}
\DoxyCodeLine{3441   \textcolor{comment}{// in place. Seeing an UncompiledData here implies that another}}
\DoxyCodeLine{3442   \textcolor{comment}{// SharedFunctionInfo had a reference to the same BytecodeArray and}}
\DoxyCodeLine{3443   \textcolor{comment}{// flushed it before processing this candidate. This can happen when using}}
\DoxyCodeLine{3444   \textcolor{comment}{// CloneSharedFunctionInfo().}}
\DoxyCodeLine{3445   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{3446 }
\DoxyCodeLine{3447   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} bytecode\_already\_decompiled =}
\DoxyCodeLine{3448       flushing\_candidate-\/>HasUncompiledData(isolate);}
\DoxyCodeLine{3449   \textcolor{keywordflow}{if} (!bytecode\_already\_decompiled) \{}
\DoxyCodeLine{3450     \textcolor{comment}{// Check if the bytecode is still live.}}
\DoxyCodeLine{3451     Tagged<BytecodeArray> bytecode =}
\DoxyCodeLine{3452         flushing\_candidate-\/>GetBytecodeArray(isolate);}
\DoxyCodeLine{3453     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a526aa3d8b3fa085271b2f23137766544}{MarkingHelper::IsMarkedOrAlwaysLive}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3454                                             bytecode)) \{}
\DoxyCodeLine{3455       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{3456     \}}
\DoxyCodeLine{3457   \}}
\DoxyCodeLine{3458   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4672c902176abf0363018f4b29435209}{FlushSFI}}(flushing\_candidate, bytecode\_already\_decompiled);}
\DoxyCodeLine{3459   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3460 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Factory\+::isolate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b}\label{classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessOldCodeCandidates@{ProcessOldCodeCandidates}}
\index{ProcessOldCodeCandidates@{ProcessOldCodeCandidates}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessOldCodeCandidates()}{ProcessOldCodeCandidates()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Old\+Code\+Candidates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3402 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3402                                                     \{}
\DoxyCodeLine{3403   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_bytecode || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_baseline\_code ||}
\DoxyCodeLine{3404          \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.code\_flushing\_candidates.IsEmpty());}
\DoxyCodeLine{3405   Tagged<SharedFunctionInfo> flushing\_candidate;}
\DoxyCodeLine{3406   \textcolor{keywordtype}{int} number\_of\_flushed\_sfis = 0;}
\DoxyCodeLine{3407   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>code\_flushing\_candidates\_local.Pop(}
\DoxyCodeLine{3408       \&flushing\_candidate)) \{}
\DoxyCodeLine{3409     \textcolor{keywordtype}{bool} is\_bytecode\_live;}
\DoxyCodeLine{3410     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.flush\_baseline\_code \&\& flushing\_candidate-\/>HasBaselineCode()) \{}
\DoxyCodeLine{3411       is\_bytecode\_live = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ad34de0569d3f17ed9938be62ab5cda04}{ProcessOldBaselineSFI}}(flushing\_candidate);}
\DoxyCodeLine{3412     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3413       is\_bytecode\_live = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac98eb6a98516e575832b222b6312ce5c}{ProcessOldBytecodeSFI}}(flushing\_candidate);}
\DoxyCodeLine{3414     \}}
\DoxyCodeLine{3415 }
\DoxyCodeLine{3416     \textcolor{keywordflow}{if} (!is\_bytecode\_live) number\_of\_flushed\_sfis++;}
\DoxyCodeLine{3417 }
\DoxyCodeLine{3418     \textcolor{comment}{// Now record the data slots, which have been updated to an uncompiled}}
\DoxyCodeLine{3419     \textcolor{comment}{// data, Baseline code or BytecodeArray which is still alive.}}
\DoxyCodeLine{3420 \textcolor{preprocessor}{\#ifndef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{3421     \textcolor{comment}{// If the sandbox is enabled, the slot contains an indirect pointer which}}
\DoxyCodeLine{3422     \textcolor{comment}{// does not need to be updated during mark-\/compact (because the pointer in}}
\DoxyCodeLine{3423     \textcolor{comment}{// the pointer table will be updated), so no action is needed here.}}
\DoxyCodeLine{3424     \mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}} slot = flushing\_candidate-\/>RawField(}
\DoxyCodeLine{3425         SharedFunctionInfo::kTrustedFunctionDataOffset);}
\DoxyCodeLine{3426     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(*slot)) \{}
\DoxyCodeLine{3427       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(flushing\_candidate, slot, Cast<HeapObject>(*slot));}
\DoxyCodeLine{3428     \}}
\DoxyCodeLine{3429 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3430   \}}
\DoxyCodeLine{3431 }
\DoxyCodeLine{3432   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_flush\_code) \{}
\DoxyCodeLine{3433     \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), \textcolor{stringliteral}{"{}\%d flushed SharedFunctionInfo(s)\(\backslash\)n"{}},}
\DoxyCodeLine{3434                  number\_of\_flushed\_sfis);}
\DoxyCodeLine{3435   \}}
\DoxyCodeLine{3436 \}}

\end{DoxyCode}


References DCHECK, v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Print\+Isolate(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a2d909e79588ddfce09dd94ffa673417b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9}\label{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessRelocInfo@{ProcessRelocInfo}}
\index{ProcessRelocInfo@{ProcessRelocInfo}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessRelocInfo()}{ProcessRelocInfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo}{Mark\+Compact\+Collector\+::\+Record\+Reloc\+Slot\+Info}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Reloc\+Info (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$}]{host,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$}]{rinfo,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 4020 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4022                                                                   \{}
\DoxyCodeLine{4023   RecordRelocSlotInfo \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{4024   \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_ad2e613bbaf7c7a82f0db322c069cad8e}{RelocInfo::Mode}} rmode = rinfo-\/>rmode();}
\DoxyCodeLine{4025   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} addr;}
\DoxyCodeLine{4026   \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1}{SlotType}} slot\_type;}
\DoxyCodeLine{4027 }
\DoxyCodeLine{4028   \textcolor{keywordflow}{if} (rinfo-\/>IsInConstantPool()) \{}
\DoxyCodeLine{4029     addr = rinfo-\/>constant\_pool\_entry\_address();}
\DoxyCodeLine{4030 }
\DoxyCodeLine{4031     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_a4826de2c62c03505c8cef4fdd868a2a4}{RelocInfo::IsCodeTargetMode}}(rmode)) \{}
\DoxyCodeLine{4032       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1a84e830d99ff0fc2ffca020ebcd53bc7e}{SlotType::kConstPoolCodeEntry}};}
\DoxyCodeLine{4033     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_a4ccd6874ce735e6bc6a0cae35f22bd5b}{RelocInfo::IsCompressedEmbeddedObject}}(rmode)) \{}
\DoxyCodeLine{4034       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1a2069d81a5ee55f945623794c77b46f51}{SlotType::kConstPoolEmbeddedObjectCompressed}};}
\DoxyCodeLine{4035     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4036       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_ad2c46d09a8c7ae01c317b23aa491e645}{RelocInfo::IsFullEmbeddedObject}}(rmode));}
\DoxyCodeLine{4037       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1a8d47775a6a406ff857c7be2d08e80ddf}{SlotType::kConstPoolEmbeddedObjectFull}};}
\DoxyCodeLine{4038     \}}
\DoxyCodeLine{4039   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4040     addr = rinfo-\/>pc();}
\DoxyCodeLine{4041 }
\DoxyCodeLine{4042     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_a4826de2c62c03505c8cef4fdd868a2a4}{RelocInfo::IsCodeTargetMode}}(rmode)) \{}
\DoxyCodeLine{4043       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1a246718b5f20f9d5f30e4b5aa19e03e97}{SlotType::kCodeEntry}};}
\DoxyCodeLine{4044     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_ad2c46d09a8c7ae01c317b23aa491e645}{RelocInfo::IsFullEmbeddedObject}}(rmode)) \{}
\DoxyCodeLine{4045       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1ac737f9c74c47a8cb4929be46ace358a6}{SlotType::kEmbeddedObjectFull}};}
\DoxyCodeLine{4046     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4047       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo_a4ccd6874ce735e6bc6a0cae35f22bd5b}{RelocInfo::IsCompressedEmbeddedObject}}(rmode));}
\DoxyCodeLine{4048       slot\_type = \mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1af54ee7a8ad2a1189f6a0fa3a8a965abb}{SlotType::kEmbeddedObjectCompressed}};}
\DoxyCodeLine{4049     \}}
\DoxyCodeLine{4050   \}}
\DoxyCodeLine{4051 }
\DoxyCodeLine{4052   MemoryChunk* \textcolor{keyword}{const} source\_chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(host);}
\DoxyCodeLine{4053   MutablePageMetadata* \textcolor{keyword}{const} source\_page\_metadata =}
\DoxyCodeLine{4054       \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_acaa892e234b2fe3170fa488f5a9a3767}{MutablePageMetadata::cast}}(source\_chunk-\/>Metadata());}
\DoxyCodeLine{4055   \textcolor{keyword}{const} \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} offset = source\_chunk-\/>Offset(addr);}
\DoxyCodeLine{4056   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(offset, \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1TypedSlots_a0707d5403da240a6561a9262a7785c83}{TypedSlotSet::kMaxOffset}}));}
\DoxyCodeLine{4057   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.page\_metadata = source\_page\_metadata;}
\DoxyCodeLine{4058   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.slot\_type = slot\_type;}
\DoxyCodeLine{4059   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.offset = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(offset);}
\DoxyCodeLine{4060 }
\DoxyCodeLine{4061   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{4062 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Reloc\+Info\+::constant\+\_\+pool\+\_\+entry\+\_\+address(), DCHECK, DCHECK\+\_\+\+LT, v8\+::internal\+::\+Reloc\+Info\+::\+Is\+In\+Constant\+Pool(), v8\+::internal\+::compiler\+::k\+Code\+Entry, v8\+::internal\+::\+Memory\+Chunk\+::\+Metadata(), v8\+::internal\+::\+Memory\+Chunk\+::\+Offset(), v8\+::internal\+::\+Reloc\+Info\+::pc(), v8\+::base\+::internal\+::result, and v8\+::internal\+::\+Reloc\+Info\+::rmode().



Referenced by v8\+::internal\+::\+Write\+Barrier\+::\+Generational\+Barrier\+For\+Code\+Slow(), v8\+::internal\+::\+Concurrent\+Marking\+Visitor\+::\+Record\+Reloc\+Slot(), v8\+::internal\+::\+Marking\+Barrier\+::\+Record\+Reloc\+Slot(), and v8\+::internal\+::\+Write\+Barrier\+::\+Shared\+Slow().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ProcessTopOptimizedFrame@{ProcessTopOptimizedFrame}}
\index{ProcessTopOptimizedFrame@{ProcessTopOptimizedFrame}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ProcessTopOptimizedFrame()}{ProcessTopOptimizedFrame()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Process\+Top\+Optimized\+Frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1ObjectVisitor}{Object\+Visitor}} $\ast$}]{visitor,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2359 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2360                                                                       \{}
\DoxyCodeLine{2361   \textcolor{keywordflow}{for} (StackFrameIterator it(isolate, isolate-\/>thread\_local\_top()); !it.done();}
\DoxyCodeLine{2362        it.Advance()) \{}
\DoxyCodeLine{2363     \textcolor{keywordflow}{if} (it.frame()-\/>is\_unoptimized\_js()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2364     \textcolor{keywordflow}{if} (it.frame()-\/>is\_optimized\_js()) \{}
\DoxyCodeLine{2365       Tagged<GcSafeCode> lookup\_result = it.frame()-\/>GcSafeLookupCode();}
\DoxyCodeLine{2366       \textcolor{keywordflow}{if} (!lookup\_result-\/>has\_instruction\_stream()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2367       \textcolor{keywordflow}{if} (!lookup\_result-\/>CanDeoptAt(isolate,}
\DoxyCodeLine{2368                                      it.frame()-\/>maybe\_unauthenticated\_pc())) \{}
\DoxyCodeLine{2369         Tagged<InstructionStream> istream = UncheckedCast<InstructionStream>(}
\DoxyCodeLine{2370             lookup\_result-\/>raw\_instruction\_stream());}
\DoxyCodeLine{2371         PtrComprCageBase cage\_base(isolate);}
\DoxyCodeLine{2372         \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor_a3dc621f70c59e9b883069ff79ec147c2}{InstructionStream::BodyDescriptor::IterateBody}}(istream-\/>map(cage\_base),}
\DoxyCodeLine{2373                                                        istream, visitor);}
\DoxyCodeLine{2374       \}}
\DoxyCodeLine{2375       \textcolor{keywordflow}{return};}
\DoxyCodeLine{2376     \}}
\DoxyCodeLine{2377   \}}
\DoxyCodeLine{2378 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Stack\+Frame\+Iterator\+Base\+::done(), and v8\+::internal\+::\+Isolate\+::thread\+\_\+local\+\_\+top().



Referenced by Mark\+Roots().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aaf362cecdae97f4d77f1b446496fcbe6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896}\label{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordObjectStats@{RecordObjectStats}}
\index{RecordObjectStats@{RecordObjectStats}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordObjectStats()}{RecordObjectStats()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Object\+Stats (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2380 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2380                                              \{}
\DoxyCodeLine{2381   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a4f489f1b838163ab33f251c9e470d938}{V8\_LIKELY}}(!\mbox{\hyperlink{structv8_1_1internal_1_1TracingFlags_a6ae2ff9ff9df795354e7f9bcda063268}{TracingFlags::is\_gc\_stats\_enabled}}())) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2382   \textcolor{comment}{// Cannot run during bootstrapping due to incomplete objects.}}
\DoxyCodeLine{2383   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_afdec8e47c6d178bfb42aa203999cb707}{bootstrapper}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Bootstrapper_a2ed96a283695ebb5718bfa6922f489d1}{IsActive}}()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2384   \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{gc-tracer_8h_af107f5a2136b9fcf104fc8c23a5bdfaa}{TRACE\_GC\_CATEGORIES}}, \textcolor{stringliteral}{"{}V8.GC\_OBJECT\_DUMP\_STATISTICS"{}});}
\DoxyCodeLine{2385   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_affa42c4fc2313750c08caf4556f44790}{CreateObjectStats}}();}
\DoxyCodeLine{2386   ObjectStatsCollector collector(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a10cd06f973b444ae6d2613032f05549e}{live\_object\_stats\_}}.get(),}
\DoxyCodeLine{2387                                  \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3e00be60e3534f7fd22e1371474510ab}{dead\_object\_stats\_}}.get());}
\DoxyCodeLine{2388   collector.Collect();}
\DoxyCodeLine{2389   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{structv8_1_1internal_1_1TracingFlags_a2b550a4619e10cd8ccffb3bcb49922c1}{TracingFlags::gc\_stats}}.load(std::memory\_order\_relaxed) \&}
\DoxyCodeLine{2390                   \mbox{\hyperlink{classv8_1_1tracing_1_1TracingCategoryObserver_aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30}{v8::tracing::TracingCategoryObserver::ENABLED\_BY\_TRACING}})) \{}
\DoxyCodeLine{2391     std::stringstream live, dead;}
\DoxyCodeLine{2392     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a10cd06f973b444ae6d2613032f05549e}{live\_object\_stats\_}}-\/>Dump(live);}
\DoxyCodeLine{2393     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3e00be60e3534f7fd22e1371474510ab}{dead\_object\_stats\_}}-\/>Dump(dead);}
\DoxyCodeLine{2394     \mbox{\hyperlink{trace-event-no-perfetto_8h_a9caa02a30959b26112c2dcc35ed3727e}{TRACE\_EVENT\_INSTANT2}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.gc\_stats"{}}),}
\DoxyCodeLine{2395                          \textcolor{stringliteral}{"{}V8.GC\_Objects\_Stats"{}}, \mbox{\hyperlink{trace-event-no-perfetto_8h_a8b5bca924ef796a311bb5ba5c8d7f57d}{TRACE\_EVENT\_SCOPE\_THREAD}},}
\DoxyCodeLine{2396                          \textcolor{stringliteral}{"{}live"{}}, \mbox{\hyperlink{tracing_2trace-event_8h_a3e7918f87c057008134f23473b59c341}{TRACE\_STR\_COPY}}(live.str().c\_str()), \textcolor{stringliteral}{"{}dead"{}},}
\DoxyCodeLine{2397                          \mbox{\hyperlink{tracing_2trace-event_8h_a3e7918f87c057008134f23473b59c341}{TRACE\_STR\_COPY}}(dead.str().c\_str()));}
\DoxyCodeLine{2398   \}}
\DoxyCodeLine{2399   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_gc\_object\_stats) \{}
\DoxyCodeLine{2400     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a10cd06f973b444ae6d2613032f05549e}{live\_object\_stats\_}}-\/>PrintJSON(\textcolor{stringliteral}{"{}live"{}});}
\DoxyCodeLine{2401     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3e00be60e3534f7fd22e1371474510ab}{dead\_object\_stats\_}}-\/>PrintJSON(\textcolor{stringliteral}{"{}dead"{}});}
\DoxyCodeLine{2402   \}}
\DoxyCodeLine{2403   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a10cd06f973b444ae6d2613032f05549e}{live\_object\_stats\_}}-\/>CheckpointObjectStats();}
\DoxyCodeLine{2404   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3e00be60e3534f7fd22e1371474510ab}{dead\_object\_stats\_}}-\/>ClearObjectStats();}
\DoxyCodeLine{2405 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Object\+Stats\+Collector\+::\+Collect(), v8\+::tracing\+::\+Tracing\+Category\+Observer\+::\+ENABLED\+\_\+\+BY\+\_\+\+TRACING, TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT0, TRACE\+\_\+\+EVENT\+\_\+\+INSTANT2, TRACE\+\_\+\+EVENT\+\_\+\+SCOPE\+\_\+\+THREAD, TRACE\+\_\+\+GC\+\_\+\+CATEGORIES, TRACE\+\_\+\+STR\+\_\+\+COPY, v8\+::internal\+::v8\+\_\+flags, V8\+\_\+\+LIKELY, and V8\+\_\+\+UNLIKELY.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_adf2bc94ab3ef1e83c8e7f8df722f1896_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a}\label{classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordRelocSlot@{RecordRelocSlot}}
\index{RecordRelocSlot@{RecordRelocSlot}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordRelocSlot()}{RecordRelocSlot()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Reloc\+Slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$}]{host,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$}]{rinfo,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 4065 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4067                                                                       \{}
\DoxyCodeLine{4068   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39}{ShouldRecordRelocSlot}}(host, rinfo, target)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{4069   RecordRelocSlotInfo info = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_adb22d7642cc47c49db3b6f5041b129b9}{ProcessRelocInfo}}(host, rinfo, target);}
\DoxyCodeLine{4070 }
\DoxyCodeLine{4071   \textcolor{comment}{// Access to TypeSlots need to be protected, since LocalHeaps might}}
\DoxyCodeLine{4072   \textcolor{comment}{// publish code in the background thread.}}
\DoxyCodeLine{4073   std::optional<base::MutexGuard> opt\_guard;}
\DoxyCodeLine{4074   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.concurrent\_sparkplug) \{}
\DoxyCodeLine{4075     opt\_guard.emplace(info.page\_metadata-\/>mutex());}
\DoxyCodeLine{4076   \}}
\DoxyCodeLine{4077   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_a485fac2341c3c73c9caab6584c5d5d72}{RememberedSet<OLD\_TO\_OLD>::InsertTyped}}(info.page\_metadata, info.slot\_type,}
\DoxyCodeLine{4078                                          info.offset);}
\DoxyCodeLine{4079 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Mutable\+Page\+Metadata\+::mutex(), v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Reloc\+Slot\+Info\+::offset, v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Reloc\+Slot\+Info\+::page\+\_\+metadata, v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Reloc\+Slot\+Info\+::slot\+\_\+type, and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+Record\+Migrated\+Slot\+Visitor\+::\+Visit\+Code\+Target(), v8\+::internal\+::\+Record\+Migrated\+Slot\+Visitor\+::\+Visit\+Embedded\+Pointer(), and v8\+::internal\+::\+Marking\+Barrier\+::\+Write().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ae4455c0b37942d5616bb57730157eb6a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a16b185ed1b8262db434462d3e8ed074d}\label{classv8_1_1internal_1_1MarkCompactCollector_a16b185ed1b8262db434462d3e8ed074d}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordSlot@{RecordSlot}}
\index{RecordSlot@{RecordSlot}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordSlot()}{RecordSlot()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename THeap\+Object\+Slot $>$ \\
void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk}{Memory\+Chunk}} $\ast$}]{source\+\_\+chunk,  }\item[{THeap\+Object\+Slot}]{slot,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 71 of file mark-\/compact-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{73                                                                  \{}
\DoxyCodeLine{74   MemoryChunk* target\_chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(target);}
\DoxyCodeLine{75   \textcolor{keywordflow}{if} (target\_chunk-\/>IsEvacuationCandidate()) \{}
\DoxyCodeLine{76     MutablePageMetadata* source\_page =}
\DoxyCodeLine{77         \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_acaa892e234b2fe3170fa488f5a9a3767}{MutablePageMetadata::cast}}(source\_chunk-\/>Metadata());}
\DoxyCodeLine{78     \textcolor{keywordflow}{if} (target\_chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93}{MemoryChunk::IS\_EXECUTABLE}})) \{}
\DoxyCodeLine{79       \textcolor{comment}{// TODO(377724745): currently needed because flags are untrusted.}}
\DoxyCodeLine{80       \mbox{\hyperlink{check_8h_aee78f6fbdf206be23e949191f9408e4b}{SBXCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_a741cb77b6f267fbe178b0a59d98a32c4}{InsideSandbox}}(target\_chunk-\/>address()));}
\DoxyCodeLine{81       RememberedSet<TRUSTED\_TO\_CODE>::Insert<AccessMode::ATOMIC>(}
\DoxyCodeLine{82           source\_page, source\_chunk-\/>Offset(slot.address()));}
\DoxyCodeLine{83     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (source\_chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9}{MemoryChunk::IS\_TRUSTED}}) \&\&}
\DoxyCodeLine{84                target\_chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9}{MemoryChunk::IS\_TRUSTED}})) \{}
\DoxyCodeLine{85       \textcolor{comment}{// TODO(377724745): currently needed because flags are untrusted.}}
\DoxyCodeLine{86       \mbox{\hyperlink{check_8h_aee78f6fbdf206be23e949191f9408e4b}{SBXCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_a741cb77b6f267fbe178b0a59d98a32c4}{InsideSandbox}}(target\_chunk-\/>address()));}
\DoxyCodeLine{87       RememberedSet<TRUSTED\_TO\_TRUSTED>::Insert<AccessMode::ATOMIC>(}
\DoxyCodeLine{88           source\_page, source\_chunk-\/>Offset(slot.address()));}
\DoxyCodeLine{89     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a4f489f1b838163ab33f251c9e470d938}{V8\_LIKELY}}(!target\_chunk-\/>InWritableSharedSpace()) ||}
\DoxyCodeLine{90                source\_page-\/>heap()-\/>isolate()-\/>is\_shared\_space\_isolate()) \{}
\DoxyCodeLine{91       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(source\_page-\/>heap(), target\_chunk-\/>GetHeap());}
\DoxyCodeLine{92       RememberedSet<OLD\_TO\_OLD>::Insert<AccessMode::ATOMIC>(}
\DoxyCodeLine{93           source\_page, source\_chunk-\/>Offset(slot.address()));}
\DoxyCodeLine{94     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{95       \textcolor{comment}{// DCHECK here that we only don't record in case of local-\/>shared}}
\DoxyCodeLine{96       \textcolor{comment}{// references in a client GC.}}
\DoxyCodeLine{97       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!source\_page-\/>heap()-\/>isolate()-\/>is\_shared\_space\_isolate());}
\DoxyCodeLine{98       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(target\_chunk-\/>GetHeap()-\/>isolate()-\/>is\_shared\_space\_isolate());}
\DoxyCodeLine{99       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(target\_chunk-\/>InWritableSharedSpace());}
\DoxyCodeLine{100     \}}
\DoxyCodeLine{101   \}}
\DoxyCodeLine{102 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+::address(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::cast(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Memory\+Chunk\+::\+From\+Heap\+Object(), v8\+::internal\+::\+Memory\+Chunk\+::\+Get\+Heap(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::heap(), v8\+::internal\+::\+Inside\+Sandbox(), v8\+::internal\+::\+Memory\+Chunk\+::\+In\+Writable\+Shared\+Space(), v8\+::internal\+::\+Memory\+Chunk\+::\+IS\+\_\+\+EXECUTABLE, v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Memory\+Chunk\+::\+IS\+\_\+\+TRUSTED, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Heap\+::isolate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Metadata(), v8\+::internal\+::\+Memory\+Chunk\+::\+Offset(), SBXCHECK, and V8\+\_\+\+LIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a16b185ed1b8262db434462d3e8ed074d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}\label{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordSlot@{RecordSlot}}
\index{RecordSlot@{RecordSlot}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordSlot()}{RecordSlot()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename THeap\+Object\+Slot $>$ \\
void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{object,  }\item[{THeap\+Object\+Slot}]{slot,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 60 of file mark-\/compact-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{62                                                                  \{}
\DoxyCodeLine{63   MemoryChunk* source\_page = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(\textcolor{keywordtype}{object});}
\DoxyCodeLine{64   \textcolor{keywordflow}{if} (!source\_page-\/>ShouldSkipEvacuationSlotRecording()) \{}
\DoxyCodeLine{65     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10}{RecordSlot}}(source\_page, slot, target);}
\DoxyCodeLine{66   \}}
\DoxyCodeLine{67 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+::\+From\+Heap\+Object(), and v8\+::internal\+::\+Memory\+Chunk\+::\+Should\+Skip\+Evacuation\+Slot\+Recording().



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{heap-\/write-\/barrier.\+cc\}\+::\+For\+Range\+Impl(), v8\+::internal\+::\+Marking\+Barrier\+::\+Mark\+Range(), v8\+::internal\+::\+Concurrent\+Marking\+Visitor\+::\+Record\+Slot(), v8\+::internal\+::\+Main\+Marking\+Visitor\+::\+Record\+Slot(), v8\+::internal\+::\+Weak\+List\+Visitor$<$ Context $>$\+::\+Visit\+Live\+Object(), v8\+::internal\+::\+Visit\+Weak\+List(), and v8\+::internal\+::\+Marking\+Barrier\+::\+Write().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a48f19e21a6973a04ac052c06f045ac10_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a268c6d19f21e9b35d477806a33960d64}\label{classv8_1_1internal_1_1MarkCompactCollector_a268c6d19f21e9b35d477806a33960d64}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordStrongDescriptorArraysForWeakening@{RecordStrongDescriptorArraysForWeakening}}
\index{RecordStrongDescriptorArraysForWeakening@{RecordStrongDescriptorArraysForWeakening}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordStrongDescriptorArraysForWeakening()}{RecordStrongDescriptorArraysForWeakening()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Record\+Strong\+Descriptor\+Arrays\+For\+Weakening (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandleVector}{Global\+Handle\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{strong\+\_\+descriptor\+\_\+arrays }\end{DoxyParamCaption})}



Definition at line 3747 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3748                                                                   \{}
\DoxyCodeLine{3749   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_af7648dd98be368a6b882111f2c62441c}{IsMajorMarking}}());}
\DoxyCodeLine{3750   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a512d50cdd47b6006d66ac9456259e69b}{strong\_descriptor\_arrays\_mutex\_}});}
\DoxyCodeLine{3751   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}{strong\_descriptor\_arrays\_}}.push\_back(std::move(strong\_descriptor\_arrays));}
\DoxyCodeLine{3752 \}}

\end{DoxyCode}


References DCHECK.



Referenced by v8\+::internal\+::\+Heap\+::\+Weaken\+Descriptor\+Arrays().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a268c6d19f21e9b35d477806a33960d64_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ae07545bc19d80a27a63c760d875601c2}\label{classv8_1_1internal_1_1MarkCompactCollector_ae07545bc19d80a27a63c760d875601c2}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ReleaseEvacuationCandidates@{ReleaseEvacuationCandidates}}
\index{ReleaseEvacuationCandidates@{ReleaseEvacuationCandidates}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ReleaseEvacuationCandidates()}{ReleaseEvacuationCandidates()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Release\+Evacuation\+Candidates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5962 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5962                                                        \{}
\DoxyCodeLine{5963   \textcolor{keywordflow}{for} (PageMetadata* p : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}) \{}
\DoxyCodeLine{5964     \textcolor{keywordflow}{if} (!p-\/>Chunk()-\/>IsEvacuationCandidate()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{5965     PagedSpace* \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}} = \textcolor{keyword}{static\_cast<}PagedSpace*\textcolor{keyword}{>}(p-\/>owner());}
\DoxyCodeLine{5966     p-\/>SetLiveBytes(0);}
\DoxyCodeLine{5967     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{5968     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}{ReleasePage}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, p);}
\DoxyCodeLine{5969   \}}
\DoxyCodeLine{5970   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}{old\_space\_evacuation\_pages\_}}.clear();}
\DoxyCodeLine{5971   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{5972 \}}

\end{DoxyCode}


References CHECK, and space.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}\label{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ReleasePage@{ReleasePage}}
\index{ReleasePage@{ReleasePage}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ReleasePage()}{ReleasePage()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Release\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpaceBase}{Paged\+Space\+Base}} $\ast$}]{space,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$}]{page }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5974 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5975                                                            \{}
\DoxyCodeLine{5976   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>RemovePageFromSpace(page);}
\DoxyCodeLine{5977 }
\DoxyCodeLine{5978   \textcolor{keywordflow}{switch} (\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity()) \{}
\DoxyCodeLine{5979     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8}{SHARED\_SPACE}}: \{}
\DoxyCodeLine{5980       \textcolor{comment}{// Old-\/to-\/new slots in old objects may be overwritten with references to}}
\DoxyCodeLine{5981       \textcolor{comment}{// shared objects. Postpone releasing empty pages so that updating}}
\DoxyCodeLine{5982       \textcolor{comment}{// old-\/to-\/new slots in dead old objects may access the dead shared}}
\DoxyCodeLine{5983       \textcolor{comment}{// objects.}}
\DoxyCodeLine{5984       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\_pages\_to\_be\_freed\_}}.push\_back(page);}
\DoxyCodeLine{5985       \textcolor{keywordflow}{break};}
\DoxyCodeLine{5986     \}}
\DoxyCodeLine{5987 }
\DoxyCodeLine{5988     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99}{OLD\_SPACE}}:}
\DoxyCodeLine{5989     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621}{NEW\_SPACE}}: \{}
\DoxyCodeLine{5990       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9564c4573a66c20043a7602155074b57}{memory\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a44f020919cc4a6c1859943003e577424}{Free}}(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a1c5f0a0deae321ce11d19b7be506ed8ba7d701dccd8f3f5f8a6dfcd5f2c488795}{MemoryAllocator::FreeMode::kPool}}, page);}
\DoxyCodeLine{5991       \textcolor{keywordflow}{break};}
\DoxyCodeLine{5992     \}}
\DoxyCodeLine{5993 }
\DoxyCodeLine{5994     \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{5995       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9564c4573a66c20043a7602155074b57}{memory\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a44f020919cc4a6c1859943003e577424}{Free}}(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5}{MemoryAllocator::FreeMode::kImmediately}},}
\DoxyCodeLine{5996                                        page);}
\DoxyCodeLine{5997     \}}
\DoxyCodeLine{5998   \}}
\DoxyCodeLine{5999 \}}

\end{DoxyCode}


References heap(), v8\+::internal\+::\+NEW\+\_\+\+SPACE, v8\+::internal\+::\+OLD\+\_\+\+SPACE, v8\+::internal\+::\+SHARED\+\_\+\+SPACE, and space.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}\label{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ReportAbortedEvacuationCandidateDueToFlags@{ReportAbortedEvacuationCandidateDueToFlags}}
\index{ReportAbortedEvacuationCandidateDueToFlags@{ReportAbortedEvacuationCandidateDueToFlags}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ReportAbortedEvacuationCandidateDueToFlags()}{ReportAbortedEvacuationCandidateDueToFlags()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Report\+Aborted\+Evacuation\+Candidate\+Due\+To\+Flags (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$}]{page,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk}{Memory\+Chunk}} $\ast$}]{chunk }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5879 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5880                                             \{}
\DoxyCodeLine{5881   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(page-\/>Chunk(), chunk);}
\DoxyCodeLine{5882   \textcolor{keywordflow}{if} (chunk-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}})) \{}
\DoxyCodeLine{5883     \textcolor{keywordflow}{return};}
\DoxyCodeLine{5884   \}}
\DoxyCodeLine{5885   chunk-\/>SetFlagSlow(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9aa814ff590eb6370bd1b460781a510ccc}{MemoryChunk::COMPACTION\_WAS\_ABORTED}});}
\DoxyCodeLine{5886   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}{aborted\_evacuation\_candidates\_due\_to\_flags\_}}.push\_back(page);}
\DoxyCodeLine{5887 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), and v8\+::internal\+::\+Memory\+Chunk\+::\+Set\+Flag\+Slow().



Referenced by Mark\+Root\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a8c05858a7577a61d236de24903278946_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0c89184f88696445ac02aee44aa43de2}\label{classv8_1_1internal_1_1MarkCompactCollector_a0c89184f88696445ac02aee44aa43de2}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ReportAbortedEvacuationCandidateDueToOOM@{ReportAbortedEvacuationCandidateDueToOOM}}
\index{ReportAbortedEvacuationCandidateDueToOOM@{ReportAbortedEvacuationCandidateDueToOOM}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ReportAbortedEvacuationCandidateDueToOOM()}{ReportAbortedEvacuationCandidateDueToOOM()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Report\+Aborted\+Evacuation\+Candidate\+Due\+To\+OOM (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{failed\+\_\+start,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$}]{page }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5872 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5873                                               \{}
\DoxyCodeLine{5874   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a2e6250572f864eaa8bd93c57ae34215a}{mutex\_}});}
\DoxyCodeLine{5875   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}.push\_back(}
\DoxyCodeLine{5876       std::make\_pair(failed\_start, page));}
\DoxyCodeLine{5877 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1}\label{classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ResetAndRelinkBlackAllocatedPage@{ResetAndRelinkBlackAllocatedPage}}
\index{ResetAndRelinkBlackAllocatedPage@{ResetAndRelinkBlackAllocatedPage}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ResetAndRelinkBlackAllocatedPage()}{ResetAndRelinkBlackAllocatedPage()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Reset\+And\+Relink\+Black\+Allocated\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$}]{space,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}} $\ast$}]{page }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6035 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6036                                            \{}
\DoxyCodeLine{6037   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(page-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}}));}
\DoxyCodeLine{6038   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(page-\/>live\_bytes(), 0);}
\DoxyCodeLine{6039   \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(page-\/>allocated\_bytes(), 0);}
\DoxyCodeLine{6040   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(page-\/>marking\_bitmap()-\/>IsClean());}
\DoxyCodeLine{6041   std::optional<RwxMemoryWriteScope> scope;}
\DoxyCodeLine{6042   \textcolor{keywordflow}{if} (page-\/>Chunk()-\/>InCodeSpace()) \{}
\DoxyCodeLine{6043     scope.emplace(\textcolor{stringliteral}{"{}For writing flags."{}});}
\DoxyCodeLine{6044   \}}
\DoxyCodeLine{6045   page-\/>Chunk()-\/>ClearFlagUnlocked(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}});}
\DoxyCodeLine{6046   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>IncreaseAllocatedBytes(page-\/>allocated\_bytes(), page);}
\DoxyCodeLine{6047   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>RelinkFreeListCategories(page);}
\DoxyCodeLine{6048 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::allocated\+\_\+bytes(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), v8\+::internal\+::\+Memory\+Chunk\+::\+Clear\+Flag\+Unlocked(), DCHECK, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+GE, v8\+::internal\+::\+Memory\+Chunk\+::\+In\+Code\+Space(), v8\+::internal\+::\+Marking\+Bitmap\+::\+Is\+Clean(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::live\+\_\+bytes(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::marking\+\_\+bitmap(), and space.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3}\label{classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RetainMaps@{RetainMaps}}
\index{RetainMaps@{RetainMaps}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RetainMaps()}{RetainMaps()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Retain\+Maps (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2428 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2428                                       \{}
\DoxyCodeLine{2429   \textcolor{comment}{// Retaining maps increases the chances of reusing map transitions at some}}
\DoxyCodeLine{2430   \textcolor{comment}{// memory cost, hence disable it when trying to reduce memory footprint more}}
\DoxyCodeLine{2431   \textcolor{comment}{// aggressively.}}
\DoxyCodeLine{2432   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} should\_retain\_maps =}
\DoxyCodeLine{2433       !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afd52b490b8d03599fbf5510d6f54b117}{ShouldReduceMemory}}() \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.retain\_maps\_for\_n\_gc != 0;}
\DoxyCodeLine{2434 }
\DoxyCodeLine{2435   \textcolor{keywordflow}{for} (Tagged<WeakArrayList> retained\_maps : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad64f79b03a11d91fadac7e6c6ed6d973}{FindAllRetainedMaps}}()) \{}
\DoxyCodeLine{2436     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, retained\_maps-\/>length() \% 2);}
\DoxyCodeLine{2437     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < retained\_maps-\/>length(); \mbox{\hyperlink{namespacev8_1_1internal}{i}} += 2) \{}
\DoxyCodeLine{2438       Tagged<MaybeObject> \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}} = retained\_maps-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{2439       \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} map\_heap\_object;}
\DoxyCodeLine{2440       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}.GetHeapObjectIfWeak(\&map\_heap\_object)) \{}
\DoxyCodeLine{2441         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{2442       \}}
\DoxyCodeLine{2443       \textcolor{keywordtype}{int} age = retained\_maps-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}} + 1).ToSmi().value();}
\DoxyCodeLine{2444       \textcolor{keywordtype}{int} new\_age;}
\DoxyCodeLine{2445       Tagged<Map> map = Cast<Map>(map\_heap\_object);}
\DoxyCodeLine{2446       \textcolor{keywordflow}{if} (should\_retain\_maps \&\& \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{2447                                     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, map)) \{}
\DoxyCodeLine{2448         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a149d8c397d9b5e24f9f059e879b85ac2}{ShouldRetainMap}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, map, age)) \{}
\DoxyCodeLine{2449           \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ac5e90f6e0c7ddb83975856969a4ad03f}{MarkingHelper::ShouldMarkObject}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, map)) \{}
\DoxyCodeLine{2450             \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a0e9d1ac5aa056d7bf0087bce379e3b7c}{MarkingHelper::TryMarkAndPush}}(}
\DoxyCodeLine{2451                 \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}},}
\DoxyCodeLine{2452                 \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa}{MarkingHelper::WorklistTarget::kRegular}}, map);}
\DoxyCodeLine{2453           \}}
\DoxyCodeLine{2454         \}}
\DoxyCodeLine{2455         \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} \mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}} = map-\/>prototype();}
\DoxyCodeLine{2456         \textcolor{keywordflow}{if} (age > 0 \&\& \mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(\mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}}) \&\&}
\DoxyCodeLine{2457             \mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{2458                 \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}, Cast<HeapObject>(\mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}}))) \{}
\DoxyCodeLine{2459           \textcolor{comment}{// The prototype is not marked, age the map.}}
\DoxyCodeLine{2460           new\_age = age -\/ 1;}
\DoxyCodeLine{2461         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2462           \textcolor{comment}{// The prototype and the constructor are marked, this map keeps only}}
\DoxyCodeLine{2463           \textcolor{comment}{// transition tree alive, not JSObjects. Do not age the map.}}
\DoxyCodeLine{2464           new\_age = age;}
\DoxyCodeLine{2465         \}}
\DoxyCodeLine{2466       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2467         new\_age = \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.retain\_maps\_for\_n\_gc;}
\DoxyCodeLine{2468       \}}
\DoxyCodeLine{2469       \textcolor{comment}{// Compact the array and update the age.}}
\DoxyCodeLine{2470       \textcolor{keywordflow}{if} (new\_age != age) \{}
\DoxyCodeLine{2471         retained\_maps-\/>Set(\mbox{\hyperlink{namespacev8_1_1internal}{i}} + 1, \mbox{\hyperlink{classv8_1_1internal_1_1Smi_afe7f07102d90ccce48cbe677c88a0645}{Smi::FromInt}}(new\_age));}
\DoxyCodeLine{2472       \}}
\DoxyCodeLine{2473     \}}
\DoxyCodeLine{2474   \}}
\DoxyCodeLine{2475 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Heap\+Object(), v8\+\_\+inspector\+::anonymous\+\_\+namespace\{v8-\/console.\+cc\}\+::k\+Regular, v8\+::internal\+::prototype, v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Should\+Retain\+Map(), v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+To\+Smi(), v8\+::internal\+::v8\+\_\+flags, and v8\+::internal\+::value.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac29e4cf8c7be9c6a3e843b5695b16fb3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa}\label{classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RightTrimDescriptorArray@{RightTrimDescriptorArray}}
\index{RightTrimDescriptorArray@{RightTrimDescriptorArray}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RightTrimDescriptorArray()}{RightTrimDescriptorArray()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Right\+Trim\+Descriptor\+Array (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{array,  }\item[{\mbox{\hyperlink{classint}{int}}}]{descriptors\+\_\+to\+\_\+trim }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3711 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3712                                                             \{}
\DoxyCodeLine{3713   \textcolor{keywordtype}{int} old\_nof\_all\_descriptors = array-\/>number\_of\_all\_descriptors();}
\DoxyCodeLine{3714   \textcolor{keywordtype}{int} new\_nof\_all\_descriptors = old\_nof\_all\_descriptors -\/ descriptors\_to\_trim;}
\DoxyCodeLine{3715   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0, descriptors\_to\_trim);}
\DoxyCodeLine{3716   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(0, new\_nof\_all\_descriptors);}
\DoxyCodeLine{3717   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} start = array-\/>GetDescriptorSlot(new\_nof\_all\_descriptors).address();}
\DoxyCodeLine{3718   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}} = array-\/>GetDescriptorSlot(old\_nof\_all\_descriptors).address();}
\DoxyCodeLine{3719   MutablePageMetadata* chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_afd76b7261895b2043b1715d180858d29}{MutablePageMetadata::FromHeapObject}}(array);}
\DoxyCodeLine{3720   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_NEW>::RemoveRange}}(chunk, start, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}},}
\DoxyCodeLine{3721                                          \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3722   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_NEW\_BACKGROUND>::RemoveRange}}(}
\DoxyCodeLine{3723       chunk, start, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}}, \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3724   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_SHARED>::RemoveRange}}(chunk, start, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}},}
\DoxyCodeLine{3725                                             \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3726   \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_ada344e3a620e580d3b149474dd995124}{RememberedSet<OLD\_TO\_OLD>::RemoveRange}}(chunk, start, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}},}
\DoxyCodeLine{3727                                          \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{3728   \textcolor{keywordflow}{if} (\mbox{\hyperlink{common_2globals_8h_a69541a836e89979350b2e7634e2d5a0a}{V8\_COMPRESS\_POINTERS\_8GB\_BOOL}}) \{}
\DoxyCodeLine{3729     \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} aligned\_start = \mbox{\hyperlink{common_2globals_8h_a76f936b13cc7401de647c23963eda5c1}{ALIGN\_TO\_ALLOCATION\_ALIGNMENT}}(start);}
\DoxyCodeLine{3730     \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} aligned\_end = \mbox{\hyperlink{common_2globals_8h_a76f936b13cc7401de647c23963eda5c1}{ALIGN\_TO\_ALLOCATION\_ALIGNMENT}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}});}
\DoxyCodeLine{3731     \textcolor{keywordflow}{if} (aligned\_start < aligned\_end) \{}
\DoxyCodeLine{3732       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a4e77c4c4c45f64cd073d9e29b9d7fb91}{CreateFillerObjectAt}}(}
\DoxyCodeLine{3733           aligned\_start, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(aligned\_end -\/ aligned\_start));}
\DoxyCodeLine{3734     \}}
\DoxyCodeLine{3735     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1heap_abbe47cc01f1d548508ed123a8be3f4ca}{heap::ShouldZapGarbage}}()) \{}
\DoxyCodeLine{3736       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} zap\_end = std::min(aligned\_start, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}});}
\DoxyCodeLine{3737       \mbox{\hyperlink{namespacev8_1_1internal_a5b59223136254772ef018d90e009318d}{MemsetTagged}}(\mbox{\hyperlink{namespacev8_1_1internal_a0bc0ebcec45817212856f7d5e021224c}{ObjectSlot}}(start),}
\DoxyCodeLine{3738                    \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_a82c1746016699f0092cef67ba2e71956}{kZapValue}})),}
\DoxyCodeLine{3739                    (zap\_end -\/ start) >> \mbox{\hyperlink{namespacev8_1_1internal_a7b94dc2dd5250e9341c12941db8e9595}{kTaggedSizeLog2}});}
\DoxyCodeLine{3740     \}}
\DoxyCodeLine{3741   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3742     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a4e77c4c4c45f64cd073d9e29b9d7fb91}{CreateFillerObjectAt}}(start, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}} -\/ start));}
\DoxyCodeLine{3743   \}}
\DoxyCodeLine{3744   array-\/>set\_number\_of\_all\_descriptors(new\_nof\_all\_descriptors);}
\DoxyCodeLine{3745 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::address(), ALIGN\+\_\+\+TO\+\_\+\+ALLOCATION\+\_\+\+ALIGNMENT, DCHECK\+\_\+\+LE, DCHECK\+\_\+\+LT, v8\+::internal\+::compiler\+::end(), v8\+::internal\+::k\+Tagged\+Size\+Log2, v8\+::internal\+::k\+Zap\+Value, v8\+::internal\+::\+Memset\+Tagged(), v8\+::internal\+::heap\+::\+Should\+Zap\+Garbage(), and V8\+\_\+\+COMPRESS\+\_\+\+POINTERS\+\_\+8\+GB\+\_\+\+BOOL.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39}\label{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!ShouldRecordRelocSlot@{ShouldRecordRelocSlot}}
\index{ShouldRecordRelocSlot@{ShouldRecordRelocSlot}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{ShouldRecordRelocSlot()}{ShouldRecordRelocSlot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Should\+Record\+Reloc\+Slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStream}{Instruction\+Stream}} $>$}]{host,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RelocInfo}{Reloc\+Info}} $\ast$}]{rinfo,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{target }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 4009 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{4011                                                                             \{}
\DoxyCodeLine{4012   MemoryChunk* source\_chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(host);}
\DoxyCodeLine{4013   MemoryChunk* target\_chunk = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a0481ad8f68cb1d4a794d588d80cc8f54}{MemoryChunk::FromHeapObject}}(target);}
\DoxyCodeLine{4014   \textcolor{keywordflow}{return} target\_chunk-\/>IsEvacuationCandidate() \&\&}
\DoxyCodeLine{4015          !source\_chunk-\/>ShouldSkipEvacuationSlotRecording();}
\DoxyCodeLine{4016 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), and v8\+::internal\+::\+Memory\+Chunk\+::\+Should\+Skip\+Evacuation\+Slot\+Recording().



Referenced by v8\+::internal\+::\+Concurrent\+Marking\+Visitor\+::\+Record\+Reloc\+Slot(), and v8\+::internal\+::\+Marking\+Barrier\+::\+Record\+Reloc\+Slot().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac97a73ff845731485fa3556291425f39_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887}\label{classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!SpecialClearMapSlot@{SpecialClearMapSlot}}
\index{SpecialClearMapSlot@{SpecialClearMapSlot}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{SpecialClearMapSlot()}{SpecialClearMapSlot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Special\+Clear\+Map\+Slot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{host,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{dead\+\_\+target,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a5f8b754678e24836a51be62e3f8c3682}{Heap\+Object\+Slot}}}]{slot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3269 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3271                                                                     \{}
\DoxyCodeLine{3272   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a112747cd949c517326fef486c68a39f6}{ClearPotentialSimpleMapTransition}}(map);}
\DoxyCodeLine{3273 }
\DoxyCodeLine{3274   \textcolor{comment}{// Special handling for clearing field type entries, identified by their host}}
\DoxyCodeLine{3275   \textcolor{comment}{// being a descriptor array.}}
\DoxyCodeLine{3276   \textcolor{comment}{// TODO(olivf): This whole special handling of field-\/type clearing}}
\DoxyCodeLine{3277   \textcolor{comment}{// could be replaced by eagerly triggering field type dependencies and}}
\DoxyCodeLine{3278   \textcolor{comment}{// generalizing field types, as soon as a field-\/type map becomes}}
\DoxyCodeLine{3279   \textcolor{comment}{// unstable.}}
\DoxyCodeLine{3280   \textcolor{keywordflow}{if} (IsDescriptorArray(host)) \{}
\DoxyCodeLine{3281     \textcolor{comment}{// We want to distinguish two cases:}}
\DoxyCodeLine{3282     \textcolor{comment}{// 1. There are no instances of the descriptor owner's map left.}}
\DoxyCodeLine{3283     \textcolor{comment}{// 2. The field type is not up to date because the stored object}}
\DoxyCodeLine{3284     \textcolor{comment}{//    migrated away to a different map.}}
\DoxyCodeLine{3285     \textcolor{comment}{// In case (1) it makes sense to clear the field type such that we}}
\DoxyCodeLine{3286     \textcolor{comment}{// can learn a new one should we ever start creating instances}}
\DoxyCodeLine{3287     \textcolor{comment}{// again.}}
\DoxyCodeLine{3288     \textcolor{comment}{// In case (2) we must not re-\/learn a new field type. Doing so could}}
\DoxyCodeLine{3289     \textcolor{comment}{// lead us to learning a field type that is not consistent with}}
\DoxyCodeLine{3290     \textcolor{comment}{// still existing object's contents. To conservatively identify case}}
\DoxyCodeLine{3291     \textcolor{comment}{// (1) we check the stability of the dead map.}}
\DoxyCodeLine{3292     \mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} location(slot);}
\DoxyCodeLine{3293     \textcolor{keywordflow}{if} (map-\/>is\_stable() \&\& \mbox{\hyperlink{classv8_1_1internal_1_1FieldType_a83ff06a5c1e95cf1528eb7be762e8b22}{FieldType::kFieldTypesCanBeClearedOnGC}}) \{}
\DoxyCodeLine{3294       location.store(\mbox{\hyperlink{classv8_1_1internal_1_1FieldType_a850ca02db2d0bd0b2279e392a7b7a606}{FieldType::None}}());}
\DoxyCodeLine{3295     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3296       location.store(\mbox{\hyperlink{classv8_1_1internal_1_1FieldType_a83b2eae94beaffcfdd7b2465521b3c17}{FieldType::Any}}());}
\DoxyCodeLine{3297     \}}
\DoxyCodeLine{3298     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{3299   \}}
\DoxyCodeLine{3300   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3301 \}}

\end{DoxyCode}


References v8\+::\+None, and v8\+::internal\+::\+Full\+Maybe\+Object\+Slot\+::store().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a2f6c6946b314cbd396fedd9a8d3b1887_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae}\label{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!StartCompaction@{StartCompaction}}
\index{StartCompaction@{StartCompaction}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{StartCompaction()}{StartCompaction()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Start\+Compaction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897}{Start\+Compaction\+Mode}}}]{mode }\end{DoxyParamCaption})}



Definition at line 331 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{331                                                                    \{}
\DoxyCodeLine{332   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\_}});}
\DoxyCodeLine{333   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}}.empty());}
\DoxyCodeLine{334 }
\DoxyCodeLine{335   \textcolor{comment}{// Bailouts for completely disabled compaction.}}
\DoxyCodeLine{336   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact ||}
\DoxyCodeLine{337       (\mbox{\hyperlink{flag-definitions_8h_adaf90f045d5cd2710edd625b8685472a}{mode}} == \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71}{StartCompactionMode::kAtomic}} \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae4625769d6915289a7acd2c41144b9c3}{IsGCWithStack}}() \&\&}
\DoxyCodeLine{338        !\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_with\_stack) ||}
\DoxyCodeLine{339       (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.gc\_experiment\_less\_compaction \&\&}
\DoxyCodeLine{340        !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_afd52b490b8d03599fbf5510d6f54b117}{ShouldReduceMemory}}()) ||}
\DoxyCodeLine{341       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a10fb79c24c416de942fc05b82680b440}{serializer\_enabled}}()) \{}
\DoxyCodeLine{342     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{343   \}}
\DoxyCodeLine{344 }
\DoxyCodeLine{345   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}{CollectEvacuationCandidates}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}());}
\DoxyCodeLine{346 }
\DoxyCodeLine{347   \textcolor{comment}{// Don't compact shared space when CSS is enabled, since there may be}}
\DoxyCodeLine{348   \textcolor{comment}{// DirectHandles on stacks of client isolates.}}
\DoxyCodeLine{349   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8c6699d1a91a5f1e8d7748d80b068c7c}{ConservativeStackScanningModeForMajorGC}}() !=}
\DoxyCodeLine{350        \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a6a1078397aea6722948012db089cd96caa60924e124da4d51bd4dc74c8f85b158}{Heap::StackScanMode::kFull}}) \&\&}
\DoxyCodeLine{351       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()) \{}
\DoxyCodeLine{352     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}{CollectEvacuationCandidates}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}());}
\DoxyCodeLine{353   \}}
\DoxyCodeLine{354 }
\DoxyCodeLine{355   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}{CollectEvacuationCandidates}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a353eba8c85db23f30be40d7e297ded1d}{trusted\_space}}());}
\DoxyCodeLine{356 }
\DoxyCodeLine{357   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a939fb55411a48a11cd43f3de55ef5ff3}{AllowsCodeCompaction}}() \&\&}
\DoxyCodeLine{358       (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae4625769d6915289a7acd2c41144b9c3}{IsGCWithStack}}() || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.compact\_code\_space\_with\_stack)) \{}
\DoxyCodeLine{359     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a3cf7f62c683dbc4b89a6f71b7d60cc37}{CollectEvacuationCandidates}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a36ef98ceb504120eae6a5b3d0dcf9fd4}{code\_space}}());}
\DoxyCodeLine{360   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_fragmentation) \{}
\DoxyCodeLine{361     \mbox{\hyperlink{namespacev8_1_1internal_a95616b4a1de76737188bb25ce12243d7}{TraceFragmentation}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a36ef98ceb504120eae6a5b3d0dcf9fd4}{code\_space}}());}
\DoxyCodeLine{362   \}}
\DoxyCodeLine{363 }
\DoxyCodeLine{364   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\_}} = !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}{evacuation\_candidates\_}}.empty();}
\DoxyCodeLine{365   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}{compacting\_}};}
\DoxyCodeLine{366 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::\+Allows\+Code\+Compaction(), v8\+::internal\+::\+Heap\+::code\+\_\+space(), Collect\+Evacuation\+Candidates(), compacting\+\_\+, v8\+::internal\+::\+Heap\+::\+Conservative\+Stack\+Scanning\+Mode\+For\+Major\+GC(), v8\+::internal\+::\+DCHECK(), evacuation\+\_\+candidates\+\_\+, heap\+\_\+, v8\+::internal\+::\+Heap\+::\+Is\+GCWith\+Stack(), v8\+::internal\+::\+Heap\+::isolate(), k\+Atomic, v8\+::internal\+::\+Heap\+::k\+Full, mode(), v8\+::internal\+::\+Heap\+::old\+\_\+space(), v8\+::internal\+::\+Isolate\+::serializer\+\_\+enabled(), v8\+::internal\+::\+Heap\+::shared\+\_\+space(), v8\+::internal\+::\+Heap\+::\+Should\+Reduce\+Memory(), v8\+::internal\+::\+Trace\+Fragmentation(), v8\+::internal\+::\+Heap\+::trusted\+\_\+space(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by Prepare(), and v8\+::internal\+::\+Incremental\+Marking\+::\+Start\+Marking\+Major().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ab7e6a8160a88f451d394d7135403f3ae_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3}\label{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!StartMarking@{StartMarking}}
\index{StartMarking@{StartMarking}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{StartMarking()}{StartMarking()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Start\+Marking (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$\+::\mbox{\hyperlink{classheap_1_1base_1_1IncrementalMarkingSchedule}{heap\+::base\+::\+Incremental\+Marking\+Schedule}} $>$}]{schedule = {\ttfamily \{\}} }\end{DoxyParamCaption})}



Definition at line 406 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{407                                                                 \{}
\DoxyCodeLine{408   \textcolor{comment}{// The state for background thread is saved here and maintained for the whole}}
\DoxyCodeLine{409   \textcolor{comment}{// GC cycle. Both CppHeap and regular V8 heap will refer to this flag.}}
\DoxyCodeLine{410   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\_background\_threads\_in\_cycle\_}} = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ac434b6b237146b5964c6b76d7a8ad2c6}{ShouldUseBackgroundThreads}}();}
\DoxyCodeLine{411 }
\DoxyCodeLine{412   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sticky\_mark\_bits) \{}
\DoxyCodeLine{413     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ac689c784f01c1729d13aeb4dc389c398}{Unmark}}();}
\DoxyCodeLine{414   \}}
\DoxyCodeLine{415 }
\DoxyCodeLine{416 \textcolor{preprocessor}{\#ifdef V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{417   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>young\_external\_pointer\_space()-\/>StartCompactingIfNeeded();}
\DoxyCodeLine{418   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>old\_external\_pointer\_space()-\/>StartCompactingIfNeeded();}
\DoxyCodeLine{419   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>cpp\_heap\_pointer\_space()-\/>StartCompactingIfNeeded();}
\DoxyCodeLine{420 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{421 }
\DoxyCodeLine{422   \textcolor{comment}{// CppHeap's marker must be initialized before the V8 marker to allow}}
\DoxyCodeLine{423   \textcolor{comment}{// exchanging of worklists.}}
\DoxyCodeLine{424   \textcolor{keywordflow}{if} (\textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a24145cfb85d15c42c670288e26308822}{cpp\_heap}}())) \{}
\DoxyCodeLine{425     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>tracer(), GCTracer::Scope::MC\_MARK\_EMBEDDER\_PROLOGUE);}
\DoxyCodeLine{426     cpp\_heap-\/>InitializeMarking(\mbox{\hyperlink{namespacecppgc_1_1internal_a9a435919d5a4a3ecfdfe20fb93896a60a94f16e44c50fb544fc2b1f177b913cbc}{CppHeap::CollectionType::kMajor}}, schedule);}
\DoxyCodeLine{427   \}}
\DoxyCodeLine{428 }
\DoxyCodeLine{429   std::vector<Address> contexts =}
\DoxyCodeLine{430       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abee2b61d93cc55561134df8f2ebb3401}{memory\_measurement}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryMeasurement_a061d53ab3d6b57b6a76398a07172fdc0}{StartProcessing}}();}
\DoxyCodeLine{431   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.stress\_per\_context\_marking\_worklist) \{}
\DoxyCodeLine{432     contexts.clear();}
\DoxyCodeLine{433     HandleScope handle\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{434     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} context : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2046480742afeae3e40fc52ec9dd582}{FindAllNativeContexts}}()) \{}
\DoxyCodeLine{435       contexts.push\_back(context-\/>ptr());}
\DoxyCodeLine{436     \}}
\DoxyCodeLine{437   \}}
\DoxyCodeLine{438   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GCTracer_a9f2350f20960172b968c227996c3974d}{NotifyMarkingStart}}();}
\DoxyCodeLine{439   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a25ccbff2b71c818ffeab6970aad6510f}{code\_flush\_mode\_}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_add930103cc1c8f4e2b122d8a5086a7c7}{GetCodeFlushMode}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{440   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\_worklists\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a03bdf39a61570cea166a4c86c4dc404a}{CreateContextWorklists}}(contexts);}
\DoxyCodeLine{441   \textcolor{keyword}{auto}* cpp\_heap = \mbox{\hyperlink{classv8_1_1internal_1_1CppHeap_a8298280d36073a63d9787cd1167aaefa}{CppHeap::From}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a88c7a4389455ee71c26b5855a6a6ab82}{cpp\_heap\_}});}
\DoxyCodeLine{442   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}} = std::make\_unique<MarkingWorklists::Local>(}
\DoxyCodeLine{443       \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\_worklists\_}},}
\DoxyCodeLine{444       cpp\_heap ? cpp\_heap-\/>CreateCppMarkingStateForMutatorThread()}
\DoxyCodeLine{445                : MarkingWorklists::Local::kNoCppMarkingState);}
\DoxyCodeLine{446   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}} = std::make\_unique<WeakObjects::Local>(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3}{weak\_objects}}());}
\DoxyCodeLine{447   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}{marking\_visitor\_}} = std::make\_unique<MainMarkingVisitor>(}
\DoxyCodeLine{448       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}.get(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}{local\_weak\_objects\_}}.get(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab77b1f17c1aaf49a93ba2e394fd11984}{epoch}}(),}
\DoxyCodeLine{449       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a00b443b2076c56d087e7c0decad77074}{code\_flush\_mode}}(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a4b0a6b7b8b7d6daeff5de689c9008cbf}{ShouldCurrentGCKeepAgesUnchanged}}(),}
\DoxyCodeLine{450       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GCTracer_a52bba12f494cafdfa348e34457698eaf}{CodeFlushingIncrease}}());}
\DoxyCodeLine{451   \textcolor{comment}{// This method evicts SFIs with flushed bytecode from the cache before}}
\DoxyCodeLine{452   \textcolor{comment}{// iterating the compilation cache as part of the root set. SFIs that get}}
\DoxyCodeLine{453   \textcolor{comment}{// flushed in this GC cycle will get evicted out of the cache in the next GC}}
\DoxyCodeLine{454   \textcolor{comment}{// cycle. The SFI will remain in the cache until then and may remain in the}}
\DoxyCodeLine{455   \textcolor{comment}{// cache even longer in case the SFI is re-\/compiled.}}
\DoxyCodeLine{456   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ad4c4bcd709b46ec7bb94b592e1421e06}{compilation\_cache}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1CompilationCache_a6c6f1bec5e0eeb46801ff0f051fd381a}{MarkCompactPrologue}}();}
\DoxyCodeLine{457   \textcolor{comment}{// Marking bits are cleared by the sweeper or unmarker (if sticky mark-\/bits}}
\DoxyCodeLine{458   \textcolor{comment}{// are enabled).}}
\DoxyCodeLine{459 \textcolor{preprocessor}{\#ifdef VERIFY\_HEAP}}
\DoxyCodeLine{460   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.verify\_heap) \{}
\DoxyCodeLine{461     VerifyMarkbitsAreClean();}
\DoxyCodeLine{462   \}}
\DoxyCodeLine{463 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// VERIFY\_HEAP}}
\DoxyCodeLine{464 \}}

\end{DoxyCode}


References code\+\_\+flush\+\_\+mode(), code\+\_\+flush\+\_\+mode\+\_\+, v8\+::internal\+::\+GCTracer\+::\+Code\+Flushing\+Increase(), v8\+::internal\+::\+Isolate\+::compilation\+\_\+cache(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap(), v8\+::internal\+::\+Heap\+::cpp\+\_\+heap\+\_\+, v8\+::internal\+::\+Marking\+Worklists\+::\+Create\+Context\+Worklists(), epoch(), v8\+::internal\+::\+Heap\+::\+Find\+All\+Native\+Contexts(), v8\+::internal\+::\+Cpp\+Heap\+::\+From(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Get\+Code\+Flush\+Mode(), heap(), heap\+\_\+, v8\+::internal\+::\+Heap\+::isolate(), cppgc\+::internal\+::k\+Major, local\+\_\+marking\+\_\+worklists\+\_\+, local\+\_\+weak\+\_\+objects\+\_\+, v8\+::internal\+::\+Compilation\+Cache\+::\+Mark\+Compact\+Prologue(), marking\+\_\+visitor\+\_\+, marking\+\_\+worklists\+\_\+, v8\+::internal\+::\+Heap\+::memory\+\_\+measurement(), v8\+::internal\+::\+GCTracer\+::\+Notify\+Marking\+Start(), v8\+::internal\+::\+Heap\+::\+Should\+Current\+GCKeep\+Ages\+Unchanged(), v8\+::internal\+::\+Heap\+::\+Should\+Use\+Background\+Threads(), v8\+::internal\+::\+Memory\+Measurement\+::\+Start\+Processing(), TRACE\+\_\+\+GC, v8\+::internal\+::\+Heap\+::tracer(), v8\+::internal\+::\+Heap\+::\+Unmark(), use\+\_\+background\+\_\+threads\+\_\+in\+\_\+cycle\+\_\+, v8\+::internal\+::v8\+\_\+flags, and weak\+\_\+objects().



Referenced by Prepare(), and v8\+::internal\+::\+Incremental\+Marking\+::\+Start\+Marking\+Major().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a222eabb25bd3b1513f83bc63e6043bf3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0}\label{classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!StartSweepNewSpace@{StartSweepNewSpace}}
\index{StartSweepNewSpace@{StartSweepNewSpace}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{StartSweepNewSpace()}{StartSweepNewSpace()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Start\+Sweep\+New\+Space (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6001 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6001                                               \{}
\DoxyCodeLine{6002   PagedSpaceForNewSpace* paged\_space = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_acdb258ef166633d7ea0912d882109e30}{paged\_new\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1PagedNewSpace_ad0dd111dc068ebfadba6491a35652691}{paged\_space}}();}
\DoxyCodeLine{6003   paged\_space-\/>\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpaceBase_a940645ec1f2d133497dafeefaf5409e9}{ClearAllocatorState}}();}
\DoxyCodeLine{6004 }
\DoxyCodeLine{6005   \textcolor{keywordtype}{int} will\_be\_swept = 0;}
\DoxyCodeLine{6006 }
\DoxyCodeLine{6007   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a13bcd3b454833566a96155d9af581dfb}{StartResizeNewSpace}}();}
\DoxyCodeLine{6008 }
\DoxyCodeLine{6009   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}.empty());}
\DoxyCodeLine{6010   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = paged\_space-\/>begin(); it != paged\_space-\/>end();) \{}
\DoxyCodeLine{6011     PageMetadata* p = *(it++);}
\DoxyCodeLine{6012     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{6013     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!p-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}}));}
\DoxyCodeLine{6014 }
\DoxyCodeLine{6015     \textcolor{keywordflow}{if} (p-\/>live\_bytes() > 0) \{}
\DoxyCodeLine{6016       \textcolor{comment}{// Non-\/empty pages will be evacuated/promoted.}}
\DoxyCodeLine{6017       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{6018     \}}
\DoxyCodeLine{6019 }
\DoxyCodeLine{6020     \textcolor{keywordflow}{if} (paged\_space-\/>ShouldReleaseEmptyPage()) \{}
\DoxyCodeLine{6021       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}{ReleasePage}}(paged\_space, p);}
\DoxyCodeLine{6022     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6023       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}{empty\_new\_space\_pages\_to\_be\_swept\_}}.push\_back(p);}
\DoxyCodeLine{6024     \}}
\DoxyCodeLine{6025     will\_be\_swept++;}
\DoxyCodeLine{6026   \}}
\DoxyCodeLine{6027 }
\DoxyCodeLine{6028   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.gc\_verbose) \{}
\DoxyCodeLine{6029     \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{6030                  \textcolor{stringliteral}{"{}sweeping: space=\%s initialized\_for\_sweeping=\%d"{}},}
\DoxyCodeLine{6031                  \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(paged\_space-\/>identity()), will\_be\_swept);}
\DoxyCodeLine{6032   \}}
\DoxyCodeLine{6033 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Paged\+Space\+Base\+::begin(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), v8\+::internal\+::\+Paged\+Space\+Base\+::\+Clear\+Allocator\+State(), DCHECK, v8\+::internal\+::\+Paged\+Space\+Base\+::end(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::live\+\_\+bytes(), v8\+::internal\+::\+Print\+Isolate(), v8\+::internal\+::\+Paged\+Space\+For\+New\+Space\+::\+Should\+Release\+Empty\+Page(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Sweeping\+Done(), To\+String(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}\label{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!StartSweepSpace@{StartSweepSpace}}
\index{StartSweepSpace@{StartSweepSpace}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{StartSweepSpace()}{StartSweepSpace()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Start\+Sweep\+Space (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PagedSpace}{Paged\+Space}} $\ast$}]{space }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6050 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6050                                                             \{}
\DoxyCodeLine{6051   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621}{NEW\_SPACE}}, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity());}
\DoxyCodeLine{6052   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>ClearAllocatorState();}
\DoxyCodeLine{6053 }
\DoxyCodeLine{6054   \textcolor{keywordtype}{int} will\_be\_swept = 0;}
\DoxyCodeLine{6055   \textcolor{keywordtype}{bool} unused\_page\_present = \textcolor{keyword}{false};}
\DoxyCodeLine{6056 }
\DoxyCodeLine{6057   Sweeper* sweeper = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aad499bc7154a594f5a3e7036d683cdfa}{sweeper}}();}
\DoxyCodeLine{6058 }
\DoxyCodeLine{6059   \textcolor{comment}{// Loop needs to support deletion if live bytes == 0 for a page.}}
\DoxyCodeLine{6060   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>begin(); it != \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>end();) \{}
\DoxyCodeLine{6061     PageMetadata* p = *(it++);}
\DoxyCodeLine{6062     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(p-\/>SweepingDone());}
\DoxyCodeLine{6063 }
\DoxyCodeLine{6064     \textcolor{keywordflow}{if} (p-\/>Chunk()-\/>IsEvacuationCandidate()) \{}
\DoxyCodeLine{6065       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!p-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}}));}
\DoxyCodeLine{6066       \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621}{NEW\_SPACE}}, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity());}
\DoxyCodeLine{6067       \textcolor{comment}{// Will be processed in Evacuate.}}
\DoxyCodeLine{6068       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{6069     \}}
\DoxyCodeLine{6070 }
\DoxyCodeLine{6071     \textcolor{comment}{// If the page is black, just reset the flag and don't add the page to the}}
\DoxyCodeLine{6072     \textcolor{comment}{// sweeper.}}
\DoxyCodeLine{6073     \textcolor{keywordflow}{if} (p-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}})) \{}
\DoxyCodeLine{6074       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14b8e9f090e9c7641574ed9829b4fee1}{ResetAndRelinkBlackAllocatedPage}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, p);}
\DoxyCodeLine{6075       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{6076     \}}
\DoxyCodeLine{6077 }
\DoxyCodeLine{6078     \textcolor{comment}{// One unused page is kept, all further are released before sweeping them.}}
\DoxyCodeLine{6079     \textcolor{keywordflow}{if} (p-\/>live\_bytes() == 0) \{}
\DoxyCodeLine{6080       \textcolor{keywordflow}{if} (unused\_page\_present) \{}
\DoxyCodeLine{6081         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.gc\_verbose) \{}
\DoxyCodeLine{6082           \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), \textcolor{stringliteral}{"{}sweeping: released page: \%p"{}},}
\DoxyCodeLine{6083                        \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(p));}
\DoxyCodeLine{6084         \}}
\DoxyCodeLine{6085         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5fd86ee72dfc32e6d1e18f4c5e4a050d}{ReleasePage}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, p);}
\DoxyCodeLine{6086         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{6087       \}}
\DoxyCodeLine{6088       unused\_page\_present = \textcolor{keyword}{true};}
\DoxyCodeLine{6089     \}}
\DoxyCodeLine{6090 }
\DoxyCodeLine{6091     sweeper-\/>AddPage(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity(), p);}
\DoxyCodeLine{6092     will\_be\_swept++;}
\DoxyCodeLine{6093   \}}
\DoxyCodeLine{6094 }
\DoxyCodeLine{6095   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sticky\_mark\_bits \&\& \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99}{OLD\_SPACE}}) \{}
\DoxyCodeLine{6096     \textcolor{keyword}{static\_cast<}StickySpace*\textcolor{keyword}{>}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}})-\/>set\_old\_objects\_size(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>Size());}
\DoxyCodeLine{6097   \}}
\DoxyCodeLine{6098 }
\DoxyCodeLine{6099   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.gc\_verbose) \{}
\DoxyCodeLine{6100     \mbox{\hyperlink{namespacev8_1_1internal_ada9f491dce0173d9e92b0dfaeaf8b64c}{PrintIsolate}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{6101                  \textcolor{stringliteral}{"{}sweeping: space=\%s initialized\_for\_sweeping=\%d"{}},}
\DoxyCodeLine{6102                  \mbox{\hyperlink{namespacev8_1_1internal_a5571bf7a3fbdb542683ee282eefb035c}{ToString}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity()), will\_be\_swept);}
\DoxyCodeLine{6103   \}}
\DoxyCodeLine{6104 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Sweeper\+::\+Add\+Page(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), DCHECK, DCHECK\+\_\+\+NE, v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Evacuation\+Candidate(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::live\+\_\+bytes(), v8\+::internal\+::\+NEW\+\_\+\+SPACE, v8\+::internal\+::\+OLD\+\_\+\+SPACE, v8\+::internal\+::\+Print\+Isolate(), space, v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Sweeping\+Done(), To\+String(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe}\label{classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!Sweep@{Sweep}}
\index{Sweep@{Sweep}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{Sweep()}{Sweep()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Sweep (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6162 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6162                                  \{}
\DoxyCodeLine{6163   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a01bad92ed163322fda20e965bec9e19e}{sweeping\_in\_progress}}());}
\DoxyCodeLine{6164   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\_pages\_to\_be\_freed\_}}.empty());}
\DoxyCodeLine{6165 }
\DoxyCodeLine{6166   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a6e459e73319c624a5f3ae42017a86215}{InitializeMajorSweeping}}();}
\DoxyCodeLine{6167 }
\DoxyCodeLine{6168   \mbox{\hyperlink{gc-tracer_8h_a44d6debe5f608aa9654172245625ef38}{TRACE\_GC\_EPOCH\_WITH\_FLOW}}(}
\DoxyCodeLine{6169       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}},}
\DoxyCodeLine{6170       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a374de26e99dae0ad5f32c1cbeab58285}{GetTraceIdForFlowEvent}}(GCTracer::Scope::MC\_SWEEP),}
\DoxyCodeLine{6171       \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{6172 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{6173   state\_ = SWEEP\_SPACES;}
\DoxyCodeLine{6174 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6175 }
\DoxyCodeLine{6176   \{}
\DoxyCodeLine{6177     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_LO,}
\DoxyCodeLine{6178                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6179     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{SweepLargeSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2f135c51e5752f90638521eee547129}{lo\_space}}());}
\DoxyCodeLine{6180   \}}
\DoxyCodeLine{6181   \{}
\DoxyCodeLine{6182     GCTracer::Scope sweep\_scope(}
\DoxyCodeLine{6183         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_CODE\_LO, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6184     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{SweepLargeSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a5764a451d0ae89d86f93771f9bf7ab9b}{code\_lo\_space}}());}
\DoxyCodeLine{6185   \}}
\DoxyCodeLine{6186   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()) \{}
\DoxyCodeLine{6187     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{6188                                 GCTracer::Scope::MC\_SWEEP\_SHARED\_LO,}
\DoxyCodeLine{6189                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6190     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{SweepLargeSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ada935ffa58e146493f1455e2f0ade73b}{shared\_lo\_space}}());}
\DoxyCodeLine{6191   \}}
\DoxyCodeLine{6192   \{}
\DoxyCodeLine{6193     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_OLD,}
\DoxyCodeLine{6194                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6195     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{StartSweepSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}());}
\DoxyCodeLine{6196   \}}
\DoxyCodeLine{6197   \{}
\DoxyCodeLine{6198     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_CODE,}
\DoxyCodeLine{6199                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6200     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{StartSweepSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a36ef98ceb504120eae6a5b3d0dcf9fd4}{code\_space}}());}
\DoxyCodeLine{6201   \}}
\DoxyCodeLine{6202   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()) \{}
\DoxyCodeLine{6203     GCTracer::Scope sweep\_scope(}
\DoxyCodeLine{6204         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_SHARED, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6205     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{StartSweepSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}());}
\DoxyCodeLine{6206   \}}
\DoxyCodeLine{6207   \{}
\DoxyCodeLine{6208     GCTracer::Scope sweep\_scope(}
\DoxyCodeLine{6209         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_TRUSTED, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6210     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{StartSweepSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a353eba8c85db23f30be40d7e297ded1d}{trusted\_space}}());}
\DoxyCodeLine{6211   \}}
\DoxyCodeLine{6212   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a704ff577490f91d8180ed8de83fa7745}{shared\_trusted\_space}}()) \{}
\DoxyCodeLine{6213     GCTracer::Scope sweep\_scope(}
\DoxyCodeLine{6214         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_SHARED, \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6215     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a4dc475c535877a5a4773b74c0a06c78a}{StartSweepSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a704ff577490f91d8180ed8de83fa7745}{shared\_trusted\_space}}());}
\DoxyCodeLine{6216   \}}
\DoxyCodeLine{6217   \{}
\DoxyCodeLine{6218     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{6219                                 GCTracer::Scope::MC\_SWEEP\_TRUSTED\_LO,}
\DoxyCodeLine{6220                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6221     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}{SweepLargeSpace}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2af5297111d0e83b963f308d5b5e1d52}{trusted\_lo\_space}}());}
\DoxyCodeLine{6222   \}}
\DoxyCodeLine{6223   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.minor\_ms \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()) \{}
\DoxyCodeLine{6224     GCTracer::Scope sweep\_scope(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_SWEEP\_NEW,}
\DoxyCodeLine{6225                                 \mbox{\hyperlink{namespacev8_1_1internal_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07}{ThreadKind::kMain}});}
\DoxyCodeLine{6226     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a11314378dd877e87d1ee7cd836c4c0f0}{StartSweepNewSpace}}();}
\DoxyCodeLine{6227   \}}
\DoxyCodeLine{6228 }
\DoxyCodeLine{6229   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}{sweeper\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Sweeper_a5692acb1f35332f5ef482d954efa8b1f}{StartMajorSweeping}}();}
\DoxyCodeLine{6230 \}}

\end{DoxyCode}


References DCHECK, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+OUT, TRACE\+\_\+\+GC\+\_\+\+EPOCH\+\_\+\+WITH\+\_\+\+FLOW, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a10a5a2e6ceb32614eacab77deaa104fe_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c}\label{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!SweepArrayBufferExtensions@{SweepArrayBufferExtensions}}
\index{SweepArrayBufferExtensions@{SweepArrayBufferExtensions}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{SweepArrayBufferExtensions()}{SweepArrayBufferExtensions()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Sweep\+Array\+Buffer\+Extensions (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 935 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{935                                                       \{}
\DoxyCodeLine{936   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()-\/>Size() == 0);}
\DoxyCodeLine{937   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2dd38bcac0a916cc4eeedd9d14044882}{new\_lo\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1LargeObjectSpace_a2bffda9f3fd2a5766480a0b4f2c77a82}{Size}}() == 0);}
\DoxyCodeLine{938   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aad4ced219dceeeabe3f688dcc3b7736a}{array\_buffer\_sweeper}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferSweeper_a5fd86b603aaa53c5799679544e8b479f}{RequestSweep}}(}
\DoxyCodeLine{939       \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferSweeper_a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158}{ArrayBufferSweeper::SweepingType::kFull}},}
\DoxyCodeLine{940       \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferSweeper_a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9}{ArrayBufferSweeper::TreatAllYoungAsPromoted::kYes}});}
\DoxyCodeLine{941 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::array\+\_\+buffer\+\_\+sweeper(), DCHECK\+\_\+\+IMPLIES, heap\+\_\+, v8\+::internal\+::\+Array\+Buffer\+Sweeper\+::k\+Full, v8\+::internal\+::\+Array\+Buffer\+Sweeper\+::k\+Yes, v8\+::internal\+::\+Heap\+::new\+\_\+lo\+\_\+space(), v8\+::internal\+::\+Heap\+::new\+\_\+space(), v8\+::internal\+::\+Array\+Buffer\+Sweeper\+::\+Request\+Sweep(), and v8\+::internal\+::\+Large\+Object\+Space\+::\+Size().



Referenced by Finish().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a26199027fc8ec567b87add6be727214c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}\label{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!SweepLargeSpace@{SweepLargeSpace}}
\index{SweepLargeSpace@{SweepLargeSpace}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{SweepLargeSpace()}{SweepLargeSpace()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Sweep\+Large\+Space (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1LargeObjectSpace}{Large\+Object\+Space}} $\ast$}]{space }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 6120 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{6120                                                                   \{}
\DoxyCodeLine{6121   PtrComprCageBase cage\_base(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{6122   \textcolor{keywordtype}{size\_t} surviving\_object\_size = 0;}
\DoxyCodeLine{6123   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} postpone\_freeing = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a43d5122de51691bc0e40341d9be42cd4}{ShouldPostponeFreeingEmptyPages}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}});}
\DoxyCodeLine{6124   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} add\_to\_pool =}
\DoxyCodeLine{6125       \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.large\_page\_pool \&\& \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>identity() == \mbox{\hyperlink{namespacev8_1_1internal_aa131d4fd9972fd8dfbec01a9243d9fefa6f564dbff22ad6da21740d3143349d93}{NEW\_LO\_SPACE}};}
\DoxyCodeLine{6126   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(add\_to\_pool, !postpone\_freeing);}
\DoxyCodeLine{6127   std::vector<LargePageMetadata*> pages\_to\_pool;}
\DoxyCodeLine{6128   \textcolor{keywordflow}{if} (add\_to\_pool) \{}
\DoxyCodeLine{6129     pages\_to\_pool.reserve(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>memory\_chunk\_list().size());}
\DoxyCodeLine{6130   \}}
\DoxyCodeLine{6131   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>begin(); it != \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>end();) \{}
\DoxyCodeLine{6132     LargePageMetadata* current = *(it++);}
\DoxyCodeLine{6133     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!current-\/>Chunk()-\/>IsFlagSet(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryChunk_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48}{MemoryChunk::BLACK\_ALLOCATED}}));}
\DoxyCodeLine{6134     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \textcolor{keywordtype}{object} = current-\/>GetObject();}
\DoxyCodeLine{6135     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}{marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_a13d4cff573da17af5b1532566911dfe9}{IsMarked}}(\textcolor{keywordtype}{object})) \{}
\DoxyCodeLine{6136       \textcolor{comment}{// Object is dead and page can be released.}}
\DoxyCodeLine{6137       \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>RemovePage(current);}
\DoxyCodeLine{6138       \textcolor{keywordflow}{if} (postpone\_freeing) \{}
\DoxyCodeLine{6139         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}{queued\_pages\_to\_be\_freed\_}}.push\_back(current);}
\DoxyCodeLine{6140       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (add\_to\_pool) \{}
\DoxyCodeLine{6141         pages\_to\_pool.push\_back(current);}
\DoxyCodeLine{6142       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6143         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9564c4573a66c20043a7602155074b57}{memory\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a44f020919cc4a6c1859943003e577424}{Free}}(\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a1c5f0a0deae321ce11d19b7be506ed8ba40aff34e1505b9920e3a4ec8f3763fb5}{MemoryAllocator::FreeMode::kImmediately}},}
\DoxyCodeLine{6144                                         current);}
\DoxyCodeLine{6145       \}}
\DoxyCodeLine{6146       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{6147     \}}
\DoxyCodeLine{6148     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.sticky\_mark\_bits) \{}
\DoxyCodeLine{6149       \mbox{\hyperlink{classv8_1_1internal_1_1MarkBit_aeb6b550934b84cc75caeb8458ec4ddcb}{MarkBit::From}}(\textcolor{keywordtype}{object}).\mbox{\hyperlink{classv8_1_1internal_1_1MarkBit_a049af8353d54d6548c03b84daa9f616b}{Clear}}();}
\DoxyCodeLine{6150       current-\/>SetLiveBytes(0);}
\DoxyCodeLine{6151     \}}
\DoxyCodeLine{6152     current-\/>marking\_progress\_tracker().ResetIfEnabled();}
\DoxyCodeLine{6153     surviving\_object\_size += \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(\textcolor{keywordtype}{object}-\/>Size(cage\_base));}
\DoxyCodeLine{6154   \}}
\DoxyCodeLine{6155   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}-\/>set\_objects\_size(surviving\_object\_size);}
\DoxyCodeLine{6156 }
\DoxyCodeLine{6157   \textcolor{keywordflow}{if} (add\_to\_pool \&\& !pages\_to\_pool.empty()) \{}
\DoxyCodeLine{6158     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae19c3ac5994087b78c51c64221e1771c}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a9564c4573a66c20043a7602155074b57}{memory\_allocator}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MemoryAllocator_a92b1c064289b87fbe7e25514b46d0e4f}{FreeLargePagesPooled}}(std::move(pages\_to\_pool));}
\DoxyCodeLine{6159   \}}
\DoxyCodeLine{6160 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), DCHECK, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Large\+Page\+Metadata\+::\+Get\+Object(), heap(), v8\+::internal\+::\+Memory\+Chunk\+::\+Is\+Flag\+Set(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::marking\+\_\+progress\+\_\+tracker(), v8\+::internal\+::\+NEW\+\_\+\+LO\+\_\+\+SPACE, v8\+::internal\+::\+Marking\+Progress\+Tracker\+::\+Reset\+If\+Enabled(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Set\+Live\+Bytes(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Should\+Postpone\+Freeing\+Empty\+Pages(), space, and v8\+::internal\+::v8\+\_\+flags.



Referenced by Finish().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a14f47d0348b13ca89bea5f71604fa8f9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac79654a97e006616402d89dcec98eac7}\label{classv8_1_1internal_1_1MarkCompactCollector_ac79654a97e006616402d89dcec98eac7}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!TearDown@{TearDown}}
\index{TearDown@{TearDown}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{TearDown()}{TearDown()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Tear\+Down (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 296 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{296                                     \{}
\DoxyCodeLine{297   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_af7648dd98be368a6b882111f2c62441c}{IsMajorMarking}}()) \{}
\DoxyCodeLine{298     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>Publish();}
\DoxyCodeLine{299     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab6f9aac6bf996ce2f9945e0ff998c58a}{main\_thread\_local\_heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1LocalHeap_a2e77f2b0e778003862ff3351ded8e80a}{marking\_barrier}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingBarrier_a2d768331ca216e2dc7f88961d5f1f5fc}{PublishIfNeeded}}();}
\DoxyCodeLine{300     \textcolor{comment}{// Marking barriers of LocalHeaps will be published in their destructors.}}
\DoxyCodeLine{301     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}{marking\_worklists\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a89010874238d7f05fc609afa7119ef40}{Clear}}();}
\DoxyCodeLine{302     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local_ad05233ba4265300887d0800ff7d7f3f9}{Publish}}();}
\DoxyCodeLine{303     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3}{weak\_objects}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_a0557b5c72151038a6d73b9d5aa6804eb}{Clear}}();}
\DoxyCodeLine{304   \}}
\DoxyCodeLine{305 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Marking\+Worklists\+::\+Clear(), v8\+::internal\+::\+Weak\+Objects\+::\+Clear(), heap\+\_\+, v8\+::internal\+::\+Heap\+::incremental\+\_\+marking(), v8\+::internal\+::\+Incremental\+Marking\+::\+Is\+Major\+Marking(), local\+\_\+marking\+\_\+worklists\+\_\+, local\+\_\+weak\+\_\+objects(), v8\+::internal\+::\+Heap\+::main\+\_\+thread\+\_\+local\+\_\+heap\+\_\+, v8\+::internal\+::\+Local\+Heap\+::marking\+\_\+barrier(), marking\+\_\+worklists\+\_\+, v8\+::internal\+::\+Weak\+Objects\+::\+Local\+::\+Publish(), v8\+::internal\+::\+Marking\+Barrier\+::\+Publish\+If\+Needed(), and weak\+\_\+objects().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_ac79654a97e006616402d89dcec98eac7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902}\label{classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!TransitionArrayNeedsCompaction@{TransitionArrayNeedsCompaction}}
\index{TransitionArrayNeedsCompaction@{TransitionArrayNeedsCompaction}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{TransitionArrayNeedsCompaction()}{TransitionArrayNeedsCompaction()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Transition\+Array\+Needs\+Compaction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TransitionArray}{Transition\+Array}} $>$}]{transitions,  }\item[{\mbox{\hyperlink{classint}{int}}}]{num\+\_\+transitions }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3618 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3619                                                               \{}
\DoxyCodeLine{3620   ReadOnlyRoots roots(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{3621   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < num\_transitions; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{3622     Tagged<MaybeObject> raw\_target = transitions-\/>GetRawTarget(\mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{3623     \textcolor{keywordflow}{if} (raw\_target.IsSmi()) \{}
\DoxyCodeLine{3624       \textcolor{comment}{// This target is still being deserialized,}}
\DoxyCodeLine{3625       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac61ec4fa9a19159b6bbdf78952645d1c}{has\_active\_deserializer}}());}
\DoxyCodeLine{3626       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(raw\_target.ToSmi(), \mbox{\hyperlink{classv8_1_1internal_1_1Smi_ad0e5f2cc37fd6c47148dda7839ba4892}{Smi::uninitialized\_deserialization\_value}}());}
\DoxyCodeLine{3627 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{3628       \textcolor{comment}{// Targets can only be dead iff this array is fully deserialized.}}
\DoxyCodeLine{3629       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < num\_transitions; ++j) \{}
\DoxyCodeLine{3630         \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(}
\DoxyCodeLine{3631             !transitions-\/>GetRawTarget(j).IsSmi(),}
\DoxyCodeLine{3632             !\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1MarkingStateBase_aaf1662a3d84f030521524b6bc605785e}{IsUnmarked}}(transitions-\/>GetTarget(j)));}
\DoxyCodeLine{3633       \}}
\DoxyCodeLine{3634 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3635       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3636     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{structv8_1_1internal_1_1MarkingHelper_ab368d545a9f0cdd6db20243117cc8944}{MarkingHelper::IsUnmarkedAndNotAlwaysLive}}(}
\DoxyCodeLine{3637                    \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}{non\_atomic\_marking\_state\_}},}
\DoxyCodeLine{3638                    \mbox{\hyperlink{classv8_1_1internal_1_1TransitionsAccessor_a61f504e1bde73d0c277db02987c00fd9}{TransitionsAccessor::GetTargetFromRaw}}(raw\_target))) \{}
\DoxyCodeLine{3639 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{3640       \textcolor{comment}{// Targets can only be dead iff this array is fully deserialized.}}
\DoxyCodeLine{3641       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < num\_transitions; ++j) \{}
\DoxyCodeLine{3642         \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!transitions-\/>GetRawTarget(j).IsSmi());}
\DoxyCodeLine{3643       \}}
\DoxyCodeLine{3644 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3645       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{3646     \}}
\DoxyCodeLine{3647   \}}
\DoxyCodeLine{3648   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{3649 \}}

\end{DoxyCode}


References DCHECK, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::\+Tagged$<$ Heap\+Object $>$\+::\+Is\+Smi(), and v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::\+To\+Smi().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a859d6252de36904e629ec0cd26408902_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a71e8a1a84a4a8174d41df38622577ddb}\label{classv8_1_1internal_1_1MarkCompactCollector_a71e8a1a84a4a8174d41df38622577ddb}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!TrimDescriptorArray@{TrimDescriptorArray}}
\index{TrimDescriptorArray@{TrimDescriptorArray}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{TrimDescriptorArray()}{TrimDescriptorArray()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Trim\+Descriptor\+Array (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{map,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{descriptors }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3769 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3770                                                           \{}
\DoxyCodeLine{3771   \textcolor{keywordtype}{int} number\_of\_own\_descriptors = map-\/>NumberOfOwnDescriptors();}
\DoxyCodeLine{3772   \textcolor{keywordflow}{if} (number\_of\_own\_descriptors == 0) \{}
\DoxyCodeLine{3773     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(descriptors == ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}).empty\_descriptor\_array());}
\DoxyCodeLine{3774     \textcolor{keywordflow}{return};}
\DoxyCodeLine{3775   \}}
\DoxyCodeLine{3776   \textcolor{keywordtype}{int} to\_trim =}
\DoxyCodeLine{3777       descriptors-\/>number\_of\_all\_descriptors() -\/ number\_of\_own\_descriptors;}
\DoxyCodeLine{3778   \textcolor{keywordflow}{if} (to\_trim > 0) \{}
\DoxyCodeLine{3779     descriptors-\/>set\_number\_of\_descriptors(number\_of\_own\_descriptors);}
\DoxyCodeLine{3780     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aa5044d30e7d0db55493414748d740aaa}{RightTrimDescriptorArray}}(descriptors, to\_trim);}
\DoxyCodeLine{3781 }
\DoxyCodeLine{3782     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a242069ae8205f32e03cf726bffa280b9}{TrimEnumCache}}(map, descriptors);}
\DoxyCodeLine{3783     descriptors-\/>Sort();}
\DoxyCodeLine{3784   \}}
\DoxyCodeLine{3785   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(descriptors-\/>number\_of\_descriptors() == number\_of\_own\_descriptors);}
\DoxyCodeLine{3786   map-\/>set\_owns\_descriptors(\textcolor{keyword}{true});}
\DoxyCodeLine{3787 \}}

\end{DoxyCode}


References DCHECK.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a242069ae8205f32e03cf726bffa280b9}\label{classv8_1_1internal_1_1MarkCompactCollector_a242069ae8205f32e03cf726bffa280b9}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!TrimEnumCache@{TrimEnumCache}}
\index{TrimEnumCache@{TrimEnumCache}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{TrimEnumCache()}{TrimEnumCache()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Trim\+Enum\+Cache (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Map}{Map}} $>$}]{map,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{descriptors }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3789 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3790                                                                               \{}
\DoxyCodeLine{3791   \textcolor{keywordtype}{int} live\_enum = map-\/>EnumLength();}
\DoxyCodeLine{3792   \textcolor{keywordflow}{if} (live\_enum == \mbox{\hyperlink{namespacev8_1_1internal_a7fabf69c19f19fafd8f7b6c73fc6a3ee}{kInvalidEnumCacheSentinel}}) \{}
\DoxyCodeLine{3793     live\_enum = map-\/>NumberOfEnumerableProperties();}
\DoxyCodeLine{3794   \}}
\DoxyCodeLine{3795   \textcolor{keywordflow}{if} (live\_enum == 0) \textcolor{keywordflow}{return} descriptors-\/>ClearEnumCache();}
\DoxyCodeLine{3796   Tagged<EnumCache> enum\_cache = descriptors-\/>enum\_cache();}
\DoxyCodeLine{3797 }
\DoxyCodeLine{3798   \mbox{\hyperlink{namespacev8_1_1internal_a5aa5f5d8cabe2dbba29d92ffdf16e9fc}{Tagged<FixedArray>}} keys = enum\_cache-\/>keys();}
\DoxyCodeLine{3799   \textcolor{keywordtype}{int} keys\_length = keys-\/>length();}
\DoxyCodeLine{3800   \textcolor{keywordflow}{if} (live\_enum >= keys\_length) \textcolor{keywordflow}{return};}
\DoxyCodeLine{3801   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab5eb8c07e5ff4c9cc6e8559c6d24468c}{RightTrimArray}}(keys, live\_enum, keys\_length);}
\DoxyCodeLine{3802 }
\DoxyCodeLine{3803   \mbox{\hyperlink{namespacev8_1_1internal_a5aa5f5d8cabe2dbba29d92ffdf16e9fc}{Tagged<FixedArray>}} indices = enum\_cache-\/>indices();}
\DoxyCodeLine{3804   \textcolor{keywordtype}{int} indices\_length = indices-\/>length();}
\DoxyCodeLine{3805   \textcolor{keywordflow}{if} (live\_enum >= indices\_length) \textcolor{keywordflow}{return};}
\DoxyCodeLine{3806   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab5eb8c07e5ff4c9cc6e8559c6d24468c}{RightTrimArray}}(indices, live\_enum, indices\_length);}
\DoxyCodeLine{3807 \}}

\end{DoxyCode}


References v8\+::internal\+::k\+Invalid\+Enum\+Cache\+Sentinel.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8}\label{classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!UpdatePointersAfterEvacuation@{UpdatePointersAfterEvacuation}}
\index{UpdatePointersAfterEvacuation@{UpdatePointersAfterEvacuation}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{UpdatePointersAfterEvacuation()}{UpdatePointersAfterEvacuation()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Update\+Pointers\+After\+Evacuation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5613 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5613                                                          \{}
\DoxyCodeLine{5614   \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS);}
\DoxyCodeLine{5615 }
\DoxyCodeLine{5616   \{}
\DoxyCodeLine{5617     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{5618              GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS\_TO\_NEW\_ROOTS);}
\DoxyCodeLine{5619     \textcolor{comment}{// The external string table is updated at the end.}}
\DoxyCodeLine{5620     PointersUpdatingVisitor updating\_visitor(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{5621     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a065f31941b8c3f83d4cb37864fe9bd9b}{IterateRootsIncludingClients}}(}
\DoxyCodeLine{5622         \&updating\_visitor,}
\DoxyCodeLine{5623         base::EnumSet<SkipRoot>\{\mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885acd83ee2bd0fc454cf6eeff81ea783a04}{SkipRoot::kExternalStringTable}},}
\DoxyCodeLine{5624                                 \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983}{SkipRoot::kConservativeStack}},}
\DoxyCodeLine{5625                                 \mbox{\hyperlink{namespacev8_1_1internal_aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5}{SkipRoot::kReadOnlyBuiltins}}\});}
\DoxyCodeLine{5626   \}}
\DoxyCodeLine{5627 }
\DoxyCodeLine{5628   \{}
\DoxyCodeLine{5629     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{5630              GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS\_CLIENT\_HEAPS);}
\DoxyCodeLine{5631     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7}{UpdatePointersInClientHeaps}}();}
\DoxyCodeLine{5632   \}}
\DoxyCodeLine{5633 }
\DoxyCodeLine{5634   \{}
\DoxyCodeLine{5635     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{5636              GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS\_SLOTS\_MAIN);}
\DoxyCodeLine{5637     std::vector<std::unique\_ptr<UpdatingItem>> updating\_items;}
\DoxyCodeLine{5638 }
\DoxyCodeLine{5639     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}());}
\DoxyCodeLine{5640     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a36ef98ceb504120eae6a5b3d0dcf9fd4}{code\_space}}());}
\DoxyCodeLine{5641     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()) \{}
\DoxyCodeLine{5642       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}());}
\DoxyCodeLine{5643     \}}
\DoxyCodeLine{5644     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad2f135c51e5752f90638521eee547129}{lo\_space}}());}
\DoxyCodeLine{5645     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a5764a451d0ae89d86f93771f9bf7ab9b}{code\_lo\_space}}());}
\DoxyCodeLine{5646     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ada935ffa58e146493f1455e2f0ade73b}{shared\_lo\_space}}()) \{}
\DoxyCodeLine{5647       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items,}
\DoxyCodeLine{5648                                         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ada935ffa58e146493f1455e2f0ade73b}{shared\_lo\_space}}());}
\DoxyCodeLine{5649     \}}
\DoxyCodeLine{5650     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a353eba8c85db23f30be40d7e297ded1d}{trusted\_space}}());}
\DoxyCodeLine{5651     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items,}
\DoxyCodeLine{5652                                       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a2af5297111d0e83b963f308d5b5e1d52}{trusted\_lo\_space}}());}
\DoxyCodeLine{5653     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a704ff577490f91d8180ed8de83fa7745}{shared\_trusted\_space}}()) \{}
\DoxyCodeLine{5654       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items,}
\DoxyCodeLine{5655                                         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a704ff577490f91d8180ed8de83fa7745}{shared\_trusted\_space}}());}
\DoxyCodeLine{5656     \}}
\DoxyCodeLine{5657     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ac6a94f142432fdb1ca6715c6ba49b9dd}{shared\_trusted\_lo\_space}}()) \{}
\DoxyCodeLine{5658       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a5a7f4ec403000a5c1f0f0f70502e1774}{CollectRememberedSetUpdatingItems}}(\&updating\_items,}
\DoxyCodeLine{5659                                         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ac6a94f142432fdb1ca6715c6ba49b9dd}{shared\_trusted\_lo\_space}}());}
\DoxyCodeLine{5660     \}}
\DoxyCodeLine{5661 }
\DoxyCodeLine{5662     \textcolor{comment}{// Iterating to space may require a valid body descriptor for e.g.}}
\DoxyCodeLine{5663     \textcolor{comment}{// WasmStruct which races with updating a slot in Map. Since to space is}}
\DoxyCodeLine{5664     \textcolor{comment}{// empty after a full GC, such races can't happen.}}
\DoxyCodeLine{5665     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}(), \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8abe18f92f4794f8ba70937917325140}{new\_space}}()-\/>Size() == 0);}
\DoxyCodeLine{5666 }
\DoxyCodeLine{5667     updating\_items.push\_back(}
\DoxyCodeLine{5668         std::make\_unique<EphemeronTableUpdatingItem>(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}));}
\DoxyCodeLine{5669 }
\DoxyCodeLine{5670     \textcolor{keyword}{auto} pointers\_updating\_job = std::make\_unique<PointersUpdatingJob>(}
\DoxyCodeLine{5671         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(), \textcolor{keyword}{this}, std::move(updating\_items));}
\DoxyCodeLine{5672     \mbox{\hyperlink{gc-tracer_8h_a17375713518e1833362b491ef9c163cc}{TRACE\_GC\_NOTE\_WITH\_FLOW}}(\textcolor{stringliteral}{"{}PointersUpdatingJob started"{}},}
\DoxyCodeLine{5673                             pointers\_updating\_job-\/>trace\_id(),}
\DoxyCodeLine{5674                             \mbox{\hyperlink{trace-event-no-perfetto_8h_af086bb0f8b985835cc9f35cfe856155f}{TRACE\_EVENT\_FLAG\_FLOW\_OUT}});}
\DoxyCodeLine{5675     \mbox{\hyperlink{classv8_1_1internal_1_1V8_a5eb1d47c492fa1e85e7d7c31dd5cf2bb}{V8::GetCurrentPlatform}}()}
\DoxyCodeLine{5676         -\/>\mbox{\hyperlink{classv8_1_1Platform_a5a62780772e38f1f00317fce609ec0d4}{CreateJob}}(\mbox{\hyperlink{namespacev8_a680c1a715d1d5df94b21e8b1ee1bf051a495bb545d1c5053ead9743a8b7692209}{v8::TaskPriority::kUserBlocking}},}
\DoxyCodeLine{5677                     std::move(pointers\_updating\_job))}
\DoxyCodeLine{5678         -\/>Join();}
\DoxyCodeLine{5679   \}}
\DoxyCodeLine{5680 }
\DoxyCodeLine{5681   \{}
\DoxyCodeLine{5682     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{5683              GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS\_WEAK);}
\DoxyCodeLine{5684     \textcolor{comment}{// Update pointers from external string table.}}
\DoxyCodeLine{5685     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ad5389324ddf98758e5034523b9861a7e}{UpdateReferencesInExternalStringTable}}(}
\DoxyCodeLine{5686         \&\mbox{\hyperlink{namespacev8_1_1internal_a08ab6d4992ef16c0af0e8cecdd074f84}{UpdateReferenceInExternalStringTableEntry}});}
\DoxyCodeLine{5687 }
\DoxyCodeLine{5688     \textcolor{comment}{// Update pointers in string forwarding table.}}
\DoxyCodeLine{5689     \textcolor{comment}{// When GC was performed without a stack, the table was cleared and this}}
\DoxyCodeLine{5690     \textcolor{comment}{// does nothing. In the case this was a GC with stack, we need to update}}
\DoxyCodeLine{5691     \textcolor{comment}{// the entries for evacuated objects.}}
\DoxyCodeLine{5692     \textcolor{comment}{// All entries are objects in shared space (unless}}
\DoxyCodeLine{5693     \textcolor{comment}{// -\/-\/always-\/use-\/forwarding-\/table), so we only need to update pointers during}}
\DoxyCodeLine{5694     \textcolor{comment}{// a shared GC.}}
\DoxyCodeLine{5695     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a1d9bb224427c1714f358560957771946}{OwnsStringTables}}() ||}
\DoxyCodeLine{5696         \mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.always\_use\_string\_forwarding\_table)) \{}
\DoxyCodeLine{5697       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_acf580d271e1ea0e447b6bb1e361878d0}{string\_forwarding\_table}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1StringForwardingTable_ac6e2fa7bf0cfc813632d909019374a54}{UpdateAfterFullEvacuation}}();}
\DoxyCodeLine{5698     \}}
\DoxyCodeLine{5699 }
\DoxyCodeLine{5700     EvacuationWeakObjectRetainer evacuation\_object\_retainer;}
\DoxyCodeLine{5701     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a132ff2665961ba28fb59a6e2e0edf9bc}{ProcessWeakListRoots}}(\&evacuation\_object\_retainer);}
\DoxyCodeLine{5702   \}}
\DoxyCodeLine{5703 }
\DoxyCodeLine{5704   \{}
\DoxyCodeLine{5705     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(),}
\DoxyCodeLine{5706              GCTracer::Scope::MC\_EVACUATE\_UPDATE\_POINTERS\_POINTER\_TABLES);}
\DoxyCodeLine{5707     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce}{UpdatePointersInPointerTables}}();}
\DoxyCodeLine{5708   \}}
\DoxyCodeLine{5709 }
\DoxyCodeLine{5710   \textcolor{comment}{// Flush the inner\_pointer\_to\_code\_cache which may now have stale contents.}}
\DoxyCodeLine{5711   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a99949749b070698fd4b2dab6a5bcf27d}{inner\_pointer\_to\_code\_cache}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1InnerPointerToCodeCache_a9a529de6174a47e94e76191e20e59830}{Flush}}();}
\DoxyCodeLine{5712 \}}

\end{DoxyCode}


References v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Collect\+Remembered\+Set\+Updating\+Items(), v8\+::\+Platform\+::\+Create\+Job(), DCHECK\+\_\+\+IMPLIES, v8\+::debug\+::\+Get\+Current\+Platform(), v8\+::k\+User\+Blocking, TRACE\+\_\+\+EVENT\+\_\+\+FLAG\+\_\+\+FLOW\+\_\+\+OUT, TRACE\+\_\+\+GC, TRACE\+\_\+\+GC\+\_\+\+NOTE\+\_\+\+WITH\+\_\+\+FLOW, v8\+::internal\+::\+Update\+Reference\+In\+External\+String\+Table\+Entry(), v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a10156273473177e162f6a5cb30b1b7e8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e}\label{classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!UpdatePointersInClientHeap@{UpdatePointersInClientHeap}}
\index{UpdatePointersInClientHeap@{UpdatePointersInClientHeap}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{UpdatePointersInClientHeap()}{UpdatePointersInClientHeap()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Update\+Pointers\+In\+Client\+Heap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{client }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5722 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5722                                                                      \{}
\DoxyCodeLine{5723   PtrComprCageBase cage\_base(client);}
\DoxyCodeLine{5724   MemoryChunkIterator chunk\_iterator(client-\/>heap());}
\DoxyCodeLine{5725 }
\DoxyCodeLine{5726   \textcolor{keywordflow}{while} (chunk\_iterator.HasNext()) \{}
\DoxyCodeLine{5727     MutablePageMetadata* page = chunk\_iterator.Next();}
\DoxyCodeLine{5728     MemoryChunk* chunk = page-\/>Chunk();}
\DoxyCodeLine{5729 }
\DoxyCodeLine{5730     \textcolor{keyword}{const} \textcolor{keyword}{auto} slot\_count = \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_af1f20aa96b6a02882a1fe0ce5e8b1da3}{RememberedSet<OLD\_TO\_SHARED>::Iterate}}(}
\DoxyCodeLine{5731         page,}
\DoxyCodeLine{5732         [cage\_base](\mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} slot) \{}
\DoxyCodeLine{5733           \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a8e179782425b7be1054e814f897f2f32}{UpdateOldToSharedSlot}}(cage\_base, slot);}
\DoxyCodeLine{5734         \},}
\DoxyCodeLine{5735         \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{5736 }
\DoxyCodeLine{5737     \textcolor{keywordflow}{if} (slot\_count == 0 || chunk-\/>InYoungGeneration()) \{}
\DoxyCodeLine{5738       page-\/>ReleaseSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b}{OLD\_TO\_SHARED}});}
\DoxyCodeLine{5739     \}}
\DoxyCodeLine{5740 }
\DoxyCodeLine{5741     \textcolor{keyword}{const} PtrComprCageBase unused\_cage\_base(\mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}});}
\DoxyCodeLine{5742 }
\DoxyCodeLine{5743     \textcolor{keyword}{const} \textcolor{keyword}{auto} protected\_slot\_count =}
\DoxyCodeLine{5744         \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_af1f20aa96b6a02882a1fe0ce5e8b1da3}{RememberedSet<TRUSTED\_TO\_SHARED\_TRUSTED>::Iterate}}(}
\DoxyCodeLine{5745             page,}
\DoxyCodeLine{5746             [unused\_cage\_base](\mbox{\hyperlink{namespacev8_1_1internal_a5c81bf980e0cdd16e6f80a806701fd76}{MaybeObjectSlot}} slot) \{}
\DoxyCodeLine{5747               \mbox{\hyperlink{namespacev8_1_1internal_a69c3bdc8841db30ac59806f44663d229}{ProtectedPointerSlot}} protected\_slot(slot.address());}
\DoxyCodeLine{5748               \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_a8e179782425b7be1054e814f897f2f32}{UpdateOldToSharedSlot}}(unused\_cage\_base, protected\_slot);}
\DoxyCodeLine{5749             \},}
\DoxyCodeLine{5750             \mbox{\hyperlink{classheap_1_1base_1_1BasicSlotSet_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4}{SlotSet::FREE\_EMPTY\_BUCKETS}});}
\DoxyCodeLine{5751     \textcolor{keywordflow}{if} (protected\_slot\_count == 0) \{}
\DoxyCodeLine{5752       page-\/>ReleaseSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31}{TRUSTED\_TO\_SHARED\_TRUSTED}});}
\DoxyCodeLine{5753     \}}
\DoxyCodeLine{5754 }
\DoxyCodeLine{5755     \textcolor{keywordflow}{if} (!chunk-\/>executable()) \{}
\DoxyCodeLine{5756       \mbox{\hyperlink{src_2base_2logging_8h_a2209830df6b59d1ec1fdf66b9352924f}{DCHECK\_NULL}}(page-\/>typed\_slot\_set<\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b}{OLD\_TO\_SHARED}}>());}
\DoxyCodeLine{5757       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{5758     \}}
\DoxyCodeLine{5759 }
\DoxyCodeLine{5760     WritableJitPage jit\_page = \mbox{\hyperlink{classv8_1_1internal_1_1ThreadIsolation_a3dea4a5ba1f46f7a9f0f26ae04b68082}{ThreadIsolation::LookupWritableJitPage}}(}
\DoxyCodeLine{5761         page-\/>area\_start(), page-\/>area\_size());}
\DoxyCodeLine{5762     \textcolor{keyword}{const} \textcolor{keyword}{auto} typed\_slot\_count = \mbox{\hyperlink{classv8_1_1internal_1_1RememberedSet_a948ca4aacbb909303ffd8d7b78ceb9be}{RememberedSet<OLD\_TO\_SHARED>::IterateTyped}}(}
\DoxyCodeLine{5763         page, [\textcolor{keyword}{this}, \&jit\_page](\mbox{\hyperlink{namespacev8_1_1internal_acee9c59587b497961ec8549083c66fe1}{SlotType}} slot\_type, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} slot) \{}
\DoxyCodeLine{5764           \textcolor{comment}{// Using UpdateStrongSlot is OK here, because there are no weak}}
\DoxyCodeLine{5765           \textcolor{comment}{// typed slots.}}
\DoxyCodeLine{5766           PtrComprCageBase cage\_base = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{5767           WritableJitAllocation jit\_allocation =}
\DoxyCodeLine{5768               jit\_page.LookupAllocationContaining(slot);}
\DoxyCodeLine{5769           \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1UpdateTypedSlotHelper_a257a5b7025d9a06e70d70ac4c8a8af9d}{UpdateTypedSlotHelper::UpdateTypedSlot}}(}
\DoxyCodeLine{5770               jit\_allocation, \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}, slot\_type, slot,}
\DoxyCodeLine{5771               [cage\_base](FullMaybeObjectSlot slot) \{}
\DoxyCodeLine{5772                 \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02mark-compact_8cc_03_ae2720d5d6d34c434f5882ea31fc87f83}{UpdateStrongOldToSharedSlot}}(cage\_base, slot);}
\DoxyCodeLine{5773               \});}
\DoxyCodeLine{5774         \});}
\DoxyCodeLine{5775     \textcolor{keywordflow}{if} (typed\_slot\_count == 0 || chunk-\/>InYoungGeneration())}
\DoxyCodeLine{5776       page-\/>ReleaseTypedSlotSet(\mbox{\hyperlink{namespacev8_1_1internal_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b}{OLD\_TO\_SHARED}});}
\DoxyCodeLine{5777   \}}
\DoxyCodeLine{5778 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Slot\+Base$<$ Subclass, Data, Slot\+Data\+Alignment $>$\+::address(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::area\+\_\+size(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::area\+\_\+start(), v8\+::internal\+::\+Memory\+Chunk\+Metadata\+::\+Chunk(), DCHECK\+\_\+\+NULL, v8\+::internal\+::\+Memory\+Chunk\+::executable(), v8\+::internal\+::\+Memory\+Chunk\+Iterator\+::\+Has\+Next(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Memory\+Chunk\+::\+In\+Young\+Generation(), v8\+::base\+::k\+Null\+Address, v8\+::internal\+::\+Writable\+Jit\+Page\+::\+Lookup\+Allocation\+Containing(), v8\+::internal\+::\+Memory\+Chunk\+Iterator\+::\+Next(), v8\+::internal\+::\+OLD\+\_\+\+TO\+\_\+\+SHARED, v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Release\+Slot\+Set(), v8\+::internal\+::\+Mutable\+Page\+Metadata\+::\+Release\+Typed\+Slot\+Set(), v8\+::internal\+::\+TRUSTED\+\_\+\+TO\+\_\+\+SHARED\+\_\+\+TRUSTED, v8\+::internal\+::\+Mutable\+Page\+Metadata\+::typed\+\_\+slot\+\_\+set(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Update\+Old\+To\+Shared\+Slot(), and v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Update\+Strong\+Old\+To\+Shared\+Slot().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7}\label{classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!UpdatePointersInClientHeaps@{UpdatePointersInClientHeaps}}
\index{UpdatePointersInClientHeaps@{UpdatePointersInClientHeaps}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{UpdatePointersInClientHeaps()}{UpdatePointersInClientHeaps()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Update\+Pointers\+In\+Client\+Heaps (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5714 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5714                                                        \{}
\DoxyCodeLine{5715   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}();}
\DoxyCodeLine{5716   \textcolor{keywordflow}{if} (!isolate-\/>is\_shared\_space\_isolate()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{5717 }
\DoxyCodeLine{5718   isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a6bcede2c3a0b688eca7679947e4704d4}{global\_safepoint}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1GlobalSafepoint_a32122b662818cfca794f899a8acac219}{IterateClientIsolates}}(}
\DoxyCodeLine{5719       [\textcolor{keyword}{this}](Isolate* client) \{ \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aabe392e124b1967c0510c4eaaaad062e}{UpdatePointersInClientHeap}}(client); \});}
\DoxyCodeLine{5720 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::global\+\_\+safepoint(), v8\+::internal\+::\+Isolate\+::is\+\_\+shared\+\_\+space\+\_\+isolate(), v8\+::internal\+::\+Factory\+::isolate(), and v8\+::internal\+::\+Global\+Safepoint\+::\+Iterate\+Client\+Isolates().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a50a7b97f14aca94f87fa000d330fb3d7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce}\label{classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!UpdatePointersInPointerTables@{UpdatePointersInPointerTables}}
\index{UpdatePointersInPointerTables@{UpdatePointersInPointerTables}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{UpdatePointersInPointerTables()}{UpdatePointersInPointerTables()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Update\+Pointers\+In\+Pointer\+Tables (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 5780 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{5780                                                          \{}
\DoxyCodeLine{5781 \textcolor{preprocessor}{\#if defined(V8\_ENABLE\_SANDBOX) || defined(V8\_ENABLE\_LEAPTIERING)}}
\DoxyCodeLine{5782   \textcolor{comment}{// Process an entry of a pointer table, returning either the relocated object}}
\DoxyCodeLine{5783   \textcolor{comment}{// or a null pointer if the object wasn't relocated.}}
\DoxyCodeLine{5784   \textcolor{keyword}{auto} process\_entry = [\&](\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} content) -\/> Tagged<ExposedTrustedObject> \{}
\DoxyCodeLine{5785     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} heap\_obj = Cast<HeapObject>(\mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}}(content));}
\DoxyCodeLine{5786     MapWord map\_word = heap\_obj-\/>map\_word(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}});}
\DoxyCodeLine{5787     \textcolor{keywordflow}{if} (!map\_word.IsForwardingAddress()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{5788     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} relocated\_object =}
\DoxyCodeLine{5789         map\_word.ToForwardingAddress(heap\_obj);}
\DoxyCodeLine{5790     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsExposedTrustedObject(relocated\_object));}
\DoxyCodeLine{5791     \textcolor{keywordflow}{return} Cast<ExposedTrustedObject>(relocated\_object);}
\DoxyCodeLine{5792   \};}
\DoxyCodeLine{5793 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// defined(V8\_ENABLE\_SANDBOX) || defined(V8\_ENABLE\_LEAPTIERING)}}
\DoxyCodeLine{5794 }
\DoxyCodeLine{5795 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{5796   TrustedPointerTable* \textcolor{keyword}{const} tpt = \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>trusted\_pointer\_table();}
\DoxyCodeLine{5797   tpt-\/>IterateActiveEntriesIn(}
\DoxyCodeLine{5798       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>trusted\_pointer\_space(),}
\DoxyCodeLine{5799       [\&](\mbox{\hyperlink{namespacev8_1_1internal_a0a296b86b75a4d9bc50eacf78b049527}{TrustedPointerHandle}} \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} content) \{}
\DoxyCodeLine{5800         Tagged<ExposedTrustedObject> relocated\_object = process\_entry(content);}
\DoxyCodeLine{5801         if (!relocated\_object.is\_null()) \{}
\DoxyCodeLine{5802           DCHECK\_EQ(handle, relocated\_object-\/>self\_indirect\_pointer\_handle());}
\DoxyCodeLine{5803           auto instance\_type = relocated\_object-\/>map()-\/>instance\_type();}
\DoxyCodeLine{5804           bool shared = HeapLayout::InAnySharedSpace(relocated\_object);}
\DoxyCodeLine{5805           auto tag = IndirectPointerTagFromInstanceType(instance\_type, shared);}
\DoxyCodeLine{5806           tpt-\/>Set(handle, relocated\_object.ptr(), tag);}
\DoxyCodeLine{5807         \}}
\DoxyCodeLine{5808       \});}
\DoxyCodeLine{5809 }
\DoxyCodeLine{5810   TrustedPointerTable* \textcolor{keyword}{const} stpt =}
\DoxyCodeLine{5811       \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>shared\_trusted\_pointer\_table();}
\DoxyCodeLine{5812   stpt-\/>IterateActiveEntriesIn(}
\DoxyCodeLine{5813       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()-\/>shared\_trusted\_pointer\_space(),}
\DoxyCodeLine{5814       [\&](\mbox{\hyperlink{namespacev8_1_1internal_a0a296b86b75a4d9bc50eacf78b049527}{TrustedPointerHandle}} \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} content) \{}
\DoxyCodeLine{5815         Tagged<ExposedTrustedObject> relocated\_object = process\_entry(content);}
\DoxyCodeLine{5816         if (!relocated\_object.is\_null()) \{}
\DoxyCodeLine{5817           DCHECK\_EQ(handle, relocated\_object-\/>self\_indirect\_pointer\_handle());}
\DoxyCodeLine{5818           auto instance\_type = relocated\_object-\/>map()-\/>instance\_type();}
\DoxyCodeLine{5819           bool shared = HeapLayout::InAnySharedSpace(relocated\_object);}
\DoxyCodeLine{5820           auto tag = IndirectPointerTagFromInstanceType(instance\_type, shared);}
\DoxyCodeLine{5821           DCHECK(IsSharedTrustedPointerType(tag));}
\DoxyCodeLine{5822           stpt-\/>Set(handle, relocated\_object.ptr(), tag);}
\DoxyCodeLine{5823         \}}
\DoxyCodeLine{5824       \});}
\DoxyCodeLine{5825 }
\DoxyCodeLine{5826   CodePointerTable* \textcolor{keyword}{const} cpt = \mbox{\hyperlink{classv8_1_1internal_1_1IsolateGroup_a3ca6c5d3f2b884f5866595543d2e0fd7}{IsolateGroup::current}}()-\/>code\_pointer\_table();}
\DoxyCodeLine{5827   cpt-\/>IterateActiveEntriesIn(}
\DoxyCodeLine{5828       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>code\_pointer\_space(),}
\DoxyCodeLine{5829       [\&](\mbox{\hyperlink{namespacev8_1_1internal_a39897e02b04b4fcb3d49a8adf67b75b0}{CodePointerHandle}} \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} content) \{}
\DoxyCodeLine{5830         Tagged<ExposedTrustedObject> relocated\_object = process\_entry(content);}
\DoxyCodeLine{5831         if (!relocated\_object.is\_null()) \{}
\DoxyCodeLine{5832           DCHECK\_EQ(handle, relocated\_object-\/>self\_indirect\_pointer\_handle());}
\DoxyCodeLine{5833           cpt-\/>SetCodeObject(handle, relocated\_object.address());}
\DoxyCodeLine{5834         \}}
\DoxyCodeLine{5835       \});}
\DoxyCodeLine{5836 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_SANDBOX}}
\DoxyCodeLine{5837 }
\DoxyCodeLine{5838 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{5839   JSDispatchTable* \textcolor{keyword}{const} jdt = \mbox{\hyperlink{classv8_1_1internal_1_1IsolateGroup_a3ca6c5d3f2b884f5866595543d2e0fd7}{IsolateGroup::current}}()-\/>js\_dispatch\_table();}
\DoxyCodeLine{5840   \textcolor{keyword}{const} EmbeddedData\& embedded\_data = \mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedData_a5f046101e1ed7d746979f87acbcb60e5}{EmbeddedData::FromBlob}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}());}
\DoxyCodeLine{5841   jdt-\/>IterateActiveEntriesIn(}
\DoxyCodeLine{5842       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>js\_dispatch\_table\_space(), [\&](\mbox{\hyperlink{namespacev8_1_1internal_ae8f086a5ae078a9752085a6b967a135c}{JSDispatchHandle}} \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}) \{}
\DoxyCodeLine{5843         Address code\_address = jdt-\/>GetCodeAddress(handle);}
\DoxyCodeLine{5844         Address entrypoint\_address = jdt-\/>GetEntrypoint(handle);}
\DoxyCodeLine{5845         Tagged<TrustedObject> relocated\_code = process\_entry(code\_address);}
\DoxyCodeLine{5846         bool code\_object\_was\_relocated = !relocated\_code.is\_null();}
\DoxyCodeLine{5847         Tagged<Code> code = Cast<Code>(code\_object\_was\_relocated}
\DoxyCodeLine{5848                                            ? relocated\_code}
\DoxyCodeLine{5849                                            : Tagged<Object>(code\_address));}
\DoxyCodeLine{5850         bool instruction\_stream\_was\_relocated =}
\DoxyCodeLine{5851             code-\/>instruction\_start() != entrypoint\_address;}
\DoxyCodeLine{5852         if (code\_object\_was\_relocated || instruction\_stream\_was\_relocated) \{}
\DoxyCodeLine{5853           Address old\_entrypoint = jdt-\/>GetEntrypoint(handle);}
\DoxyCodeLine{5854           \textcolor{comment}{// Ensure tiering trampolines are not overwritten here.}}
\DoxyCodeLine{5855           Address new\_entrypoint = ([\&]() \{}
\DoxyCodeLine{5856 \#define CASE(name, ...)                                                       \(\backslash\)}
\DoxyCodeLine{5857   if (old\_entrypoint == embedded\_data.InstructionStartOf(Builtin::k\#\#name)) \{ \(\backslash\)}
\DoxyCodeLine{5858     return old\_entrypoint;                                                    \(\backslash\)}
\DoxyCodeLine{5859   \}}
\DoxyCodeLine{5860             BUILTIN\_LIST\_BASE\_TIERING(CASE)}
\DoxyCodeLine{5861 \#undef CASE}
\DoxyCodeLine{5862             return code-\/>instruction\_start();}
\DoxyCodeLine{5863           \})();}
\DoxyCodeLine{5864           jdt-\/>SetCodeAndEntrypointNoWriteBarrier(handle, code, new\_entrypoint);}
\DoxyCodeLine{5865           CHECK\_IMPLIES(jdt-\/>IsTieringRequested(handle),}
\DoxyCodeLine{5866                         old\_entrypoint == new\_entrypoint);}
\DoxyCodeLine{5867         \}}
\DoxyCodeLine{5868       \});}
\DoxyCodeLine{5869 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_LEAPTIERING}}
\DoxyCodeLine{5870 \}}

\end{DoxyCode}


References DCHECK, v8\+::internal\+::handle(), v8\+::internal\+::\+Map\+Word\+::\+Is\+Forwarding\+Address(), v8\+::k\+Relaxed\+Load, and v8\+::internal\+::\+Map\+Word\+::\+To\+Forwarding\+Address().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a8698e5fa48a17826dcf8640f7725bbce_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}\label{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!UseBackgroundThreadsInCycle@{UseBackgroundThreadsInCycle}}
\index{UseBackgroundThreadsInCycle@{UseBackgroundThreadsInCycle}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{UseBackgroundThreadsInCycle()}{UseBackgroundThreadsInCycle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Use\+Background\+Threads\+In\+Cycle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 183 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{183                                            \{}
\DoxyCodeLine{184     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}{use\_background\_threads\_in\_cycle\_}};}
\DoxyCodeLine{185   \}}

\end{DoxyCode}


References use\+\_\+background\+\_\+threads\+\_\+in\+\_\+cycle\+\_\+.



Referenced by v8\+::internal\+::\+Concurrent\+Marking\+::\+Join(), v8\+::internal\+::\+Concurrent\+Marking\+::\+Reschedule\+Job\+If\+Needed(), v8\+::internal\+::\+Cpp\+Heap\+::\+Select\+Marking\+Type(), and v8\+::internal\+::\+Concurrent\+Marking\+::\+Try\+Schedule\+Job().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_aa709baf43b9629ff0df85d2700caa88b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab744335a59a10dfc63766f57720f8a8b}\label{classv8_1_1internal_1_1MarkCompactCollector_ab744335a59a10dfc63766f57720f8a8b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!VerifyEphemeronMarking@{VerifyEphemeronMarking}}
\index{VerifyEphemeronMarking@{VerifyEphemeronMarking}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{VerifyEphemeronMarking()}{VerifyEphemeronMarking()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Verify\+Ephemeron\+Marking (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 2320 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2320                                                   \{}
\DoxyCodeLine{2321 \textcolor{preprocessor}{\#ifdef VERIFY\_HEAP}}
\DoxyCodeLine{2322   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.verify\_heap) \{}
\DoxyCodeLine{2323     Ephemeron ephemeron;}
\DoxyCodeLine{2324 }
\DoxyCodeLine{2325     \textcolor{comment}{// In the fixpoint iteration all unresolved ephemerons are in}}
\DoxyCodeLine{2326     \textcolor{comment}{// `next\_ephemerons\_`.}}
\DoxyCodeLine{2327     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(}
\DoxyCodeLine{2328         \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.IsLocalAndGlobalEmpty());}
\DoxyCodeLine{2329     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.current\_ephemerons.Merge(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}.next\_ephemerons);}
\DoxyCodeLine{2330     \textcolor{keywordflow}{while} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a5c26fb846b8fa0a693ab2d751fc7b1c9}{local\_weak\_objects}}()-\/>current\_ephemerons\_local.Pop(\&ephemeron)) \{}
\DoxyCodeLine{2331       \mbox{\hyperlink{src_2base_2logging_8h_aa958a8a4e5dda3abaa031977268ae60e}{CHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}{ApplyEphemeronSemantics}}(ephemeron.key, ephemeron.value),}
\DoxyCodeLine{2332                \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}{EphemeronResult::kMarkedValue}});}
\DoxyCodeLine{2333     \}}
\DoxyCodeLine{2334 }
\DoxyCodeLine{2335     \textcolor{comment}{// In the linear-\/time algorithm ephemerons are kept in `key\_to\_values\_`.}}
\DoxyCodeLine{2336     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& [\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, values] : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}{key\_to\_values\_}}) \{}
\DoxyCodeLine{2337       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}} : values) \{}
\DoxyCodeLine{2338         \mbox{\hyperlink{src_2base_2logging_8h_aa958a8a4e5dda3abaa031977268ae60e}{CHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ab610702a8f54d8e17897592b3047103c}{ApplyEphemeronSemantics}}(\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}}),}
\DoxyCodeLine{2339                  \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_aaf4a3c7fbd042b3a90c2c1e4f00cac88adfab4c23b06ef03db8cd7dc205de56c2}{EphemeronResult::kMarkedValue}});}
\DoxyCodeLine{2340       \}}
\DoxyCodeLine{2341     \}}
\DoxyCodeLine{2342   \}}
\DoxyCodeLine{2343 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// VERIFY\_HEAP}}
\DoxyCodeLine{2344 \}}

\end{DoxyCode}


References CHECK, CHECK\+\_\+\+NE, v8\+::internal\+::key, v8\+::internal\+::\+Ephemeron\+::key, v8\+::internal\+::v8\+\_\+flags, v8\+::internal\+::\+Ephemeron\+::value, and v8\+::internal\+::value.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff}\label{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!VerifyMarking@{VerifyMarking}}
\index{VerifyMarking@{VerifyMarking}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{VerifyMarking()}{VerifyMarking()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Verify\+Marking (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 814 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{814                                          \{}
\DoxyCodeLine{815   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}{local\_marking\_worklists\_}}-\/>IsEmpty());}
\DoxyCodeLine{816   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_aca549fb459876aff6e5a580c807d1607}{incremental\_marking}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IncrementalMarking_a421afcfedbad9dba889295ea646625fa}{IsStopped}}());}
\DoxyCodeLine{817 \textcolor{preprocessor}{\#ifdef VERIFY\_HEAP}}
\DoxyCodeLine{818   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.verify\_heap) \{}
\DoxyCodeLine{819     \mbox{\hyperlink{gc-tracer_8h_a5565074f0fda27fbaa5cace7ea4a4108}{TRACE\_GC}}(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_abdd7e3821604a14452281640366cc9bb}{tracer}}(), GCTracer::Scope::MC\_MARK\_VERIFY);}
\DoxyCodeLine{820     FullMarkingVerifier verifier(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}});}
\DoxyCodeLine{821     verifier.Run();}
\DoxyCodeLine{822     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a8d7b791efdd8818bc3dcd98ce920b06c}{old\_space}}()-\/>VerifyLiveBytes();}
\DoxyCodeLine{823     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a36ef98ceb504120eae6a5b3d0dcf9fd4}{code\_space}}()-\/>VerifyLiveBytes();}
\DoxyCodeLine{824     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()) \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a125e37c0ebec23dda96a152ac6881820}{shared\_space}}()-\/>VerifyLiveBytes();}
\DoxyCodeLine{825     \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a353eba8c85db23f30be40d7e297ded1d}{trusted\_space}}()-\/>VerifyLiveBytes();}
\DoxyCodeLine{826     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.minor\_ms \&\& \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_acdb258ef166633d7ea0912d882109e30}{paged\_new\_space}}())}
\DoxyCodeLine{827       \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_acdb258ef166633d7ea0912d882109e30}{paged\_new\_space}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1PagedNewSpace_ad0dd111dc068ebfadba6491a35652691}{paged\_space}}()-\/>VerifyLiveBytes();}
\DoxyCodeLine{828   \}}
\DoxyCodeLine{829 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// VERIFY\_HEAP}}
\DoxyCodeLine{830 \}}

\end{DoxyCode}


References CHECK, v8\+::internal\+::\+Heap\+::code\+\_\+space(), v8\+::internal\+::\+DCHECK(), heap\+\_\+, v8\+::internal\+::\+Heap\+::incremental\+\_\+marking(), v8\+::internal\+::\+Incremental\+Marking\+::\+Is\+Stopped(), local\+\_\+marking\+\_\+worklists\+\_\+, v8\+::internal\+::\+Heap\+::old\+\_\+space(), v8\+::internal\+::\+Heap\+::paged\+\_\+new\+\_\+space(), v8\+::internal\+::\+Paged\+New\+Space\+::paged\+\_\+space(), v8\+::internal\+::\+Heap\+::shared\+\_\+space(), TRACE\+\_\+\+GC, v8\+::internal\+::\+Heap\+::tracer(), v8\+::internal\+::\+Heap\+::trusted\+\_\+space(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by Collect\+Garbage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a17e6e45984b6757652c6611c22c17cff_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3}\label{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!weak\_objects@{weak\_objects}}
\index{weak\_objects@{weak\_objects}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{weak\_objects()}{weak\_objects()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects}{Weak\+Objects}}$\ast$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::weak\+\_\+objects (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 180 of file mark-\/compact.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{180 \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}{weak\_objects\_}}; \}}

\end{DoxyCode}


References weak\+\_\+objects\+\_\+.



Referenced by Start\+Marking(), and Tear\+Down().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MarkCompactCollector_a13bc63346bb82388df996ca28b39f6d3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a67923b4c8c39c7b225af81c264d2ee46}\label{classv8_1_1internal_1_1MarkCompactCollector_a67923b4c8c39c7b225af81c264d2ee46}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!WeakenStrongDescriptorArrays@{WeakenStrongDescriptorArrays}}
\index{WeakenStrongDescriptorArrays@{WeakenStrongDescriptorArrays}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{WeakenStrongDescriptorArrays()}{WeakenStrongDescriptorArrays()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Mark\+Compact\+Collector\+::\+Weaken\+Strong\+Descriptor\+Arrays (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 3754 of file mark-\/compact.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{3754                                                         \{}
\DoxyCodeLine{3755   Tagged<Map> descriptor\_array\_map =}
\DoxyCodeLine{3756       ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}()).descriptor\_array\_map();}
\DoxyCodeLine{3757   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& vec : \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}{strong\_descriptor\_arrays\_}}) \{}
\DoxyCodeLine{3758     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = vec.begin(); it != vec.end(); ++it) \{}
\DoxyCodeLine{3759       \mbox{\hyperlink{namespacev8_1_1internal_a403f10ce1c7dc18ea5f622a1aaa56285}{Tagged<DescriptorArray>}} raw = it.raw();}
\DoxyCodeLine{3760       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsStrongDescriptorArray(raw));}
\DoxyCodeLine{3761       raw-\/>set\_map\_safe\_transition\_no\_write\_barrier(\mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}{heap\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ae5160ad63bc51ff7b36e8f247be48f63}{isolate}}(),}
\DoxyCodeLine{3762                                                     descriptor\_array\_map);}
\DoxyCodeLine{3763       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(raw-\/>raw\_gc\_state(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}}), 0);}
\DoxyCodeLine{3764     \}}
\DoxyCodeLine{3765   \}}
\DoxyCodeLine{3766   \mbox{\hyperlink{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}{strong\_descriptor\_arrays\_}}.clear();}
\DoxyCodeLine{3767 \}}

\end{DoxyCode}


References DCHECK, DCHECK\+\_\+\+EQ, and v8\+::k\+Relaxed\+Load.



\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aaf862d3efb6e48b15fe21d283eebc6c5}\label{classv8_1_1internal_1_1MarkCompactCollector_aaf862d3efb6e48b15fe21d283eebc6c5}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!Evacuator@{Evacuator}}
\index{Evacuator@{Evacuator}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{Evacuator}{Evacuator}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classv8_1_1internal_1_1Evacuator}{Evacuator}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 477 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a03cb76c44646ccae2a33eb05bcdf0dc5}\label{classv8_1_1internal_1_1MarkCompactCollector_a03cb76c44646ccae2a33eb05bcdf0dc5}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!PrecisePagePinningVisitor@{PrecisePagePinningVisitor}}
\index{PrecisePagePinningVisitor@{PrecisePagePinningVisitor}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{PrecisePagePinningVisitor}{PrecisePagePinningVisitor}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classv8_1_1internal_1_1PrecisePagePinningVisitor}{Precise\+Page\+Pinning\+Visitor}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 480 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a9aac51e6e68df5e4add0792032864173}\label{classv8_1_1internal_1_1MarkCompactCollector_a9aac51e6e68df5e4add0792032864173}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RecordMigratedSlotVisitor@{RecordMigratedSlotVisitor}}
\index{RecordMigratedSlotVisitor@{RecordMigratedSlotVisitor}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RecordMigratedSlotVisitor}{RecordMigratedSlotVisitor}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classv8_1_1internal_1_1RecordMigratedSlotVisitor}{Record\+Migrated\+Slot\+Visitor}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 478 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0a89e89941e2601a090655513f208c65}\label{classv8_1_1internal_1_1MarkCompactCollector_a0a89e89941e2601a090655513f208c65}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!RootMarkingVisitor@{RootMarkingVisitor}}
\index{RootMarkingVisitor@{RootMarkingVisitor}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{RootMarkingVisitor}{RootMarkingVisitor}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classv8_1_1internal_1_1RootMarkingVisitor}{Root\+Marking\+Visitor}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 479 of file mark-\/compact.\+h.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}\label{classv8_1_1internal_1_1MarkCompactCollector_a07a4e5f537a84e8ed02f47c747e10f89}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!aborted\_evacuation\_candidates\_due\_to\_flags\_@{aborted\_evacuation\_candidates\_due\_to\_flags\_}}
\index{aborted\_evacuation\_candidates\_due\_to\_flags\_@{aborted\_evacuation\_candidates\_due\_to\_flags\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{aborted\_evacuation\_candidates\_due\_to\_flags\_}{aborted\_evacuation\_candidates\_due\_to\_flags\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::aborted\+\_\+evacuation\+\_\+candidates\+\_\+due\+\_\+to\+\_\+flags\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 444 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}\label{classv8_1_1internal_1_1MarkCompactCollector_a4dab80ef7a34c59ce69e9828d602bb9f}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!aborted\_evacuation\_candidates\_due\_to\_oom\_@{aborted\_evacuation\_candidates\_due\_to\_oom\_}}
\index{aborted\_evacuation\_candidates\_due\_to\_oom\_@{aborted\_evacuation\_candidates\_due\_to\_oom\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{aborted\_evacuation\_candidates\_due\_to\_oom\_}{aborted\_evacuation\_candidates\_due\_to\_oom\_}}
{\footnotesize\ttfamily std\+::vector$<$std\+::pair$<$\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}, \mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ $>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::aborted\+\_\+evacuation\+\_\+candidates\+\_\+due\+\_\+to\+\_\+oom\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 443 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a40d1f44cfde0bb0390ea138370a4b591}\label{classv8_1_1internal_1_1MarkCompactCollector_a40d1f44cfde0bb0390ea138370a4b591}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!black\_allocation\_@{black\_allocation\_}}
\index{black\_allocation\_@{black\_allocation\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{black\_allocation\_}{black\_allocation\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::black\+\_\+allocation\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 420 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a25ccbff2b71c818ffeab6970aad6510f}\label{classv8_1_1internal_1_1MarkCompactCollector_a25ccbff2b71c818ffeab6970aad6510f}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!code\_flush\_mode\_@{code\_flush\_mode\_}}
\index{code\_flush\_mode\_@{code\_flush\_mode\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{code\_flush\_mode\_}{code\_flush\_mode\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1EnumSet}{base\+::\+Enum\+Set}}$<$\mbox{\hyperlink{namespacev8_1_1internal_aa9a47c3d58feefc8747cef370681925b}{Code\+Flush\+Mode}}$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::code\+\_\+flush\+\_\+mode\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 469 of file mark-\/compact.\+h.



Referenced by code\+\_\+flush\+\_\+mode(), and Start\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}\label{classv8_1_1internal_1_1MarkCompactCollector_ade96b53880b218eba9217ef4f296dcdf}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!compacting\_@{compacting\_}}
\index{compacting\_@{compacting\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{compacting\_}{compacting\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::compacting\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 419 of file mark-\/compact.\+h.



Referenced by is\+\_\+compacting(), and Start\+Compaction().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}\label{classv8_1_1internal_1_1MarkCompactCollector_aa333a0a067ea24b0545c99392cc77848}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!empty\_new\_space\_pages\_to\_be\_swept\_@{empty\_new\_space\_pages\_to\_be\_swept\_}}
\index{empty\_new\_space\_pages\_to\_be\_swept\_@{empty\_new\_space\_pages\_to\_be\_swept\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{empty\_new\_space\_pages\_to\_be\_swept\_}{empty\_new\_space\_pages\_to\_be\_swept\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::empty\+\_\+new\+\_\+space\+\_\+pages\+\_\+to\+\_\+be\+\_\+swept\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 471 of file mark-\/compact.\+h.



Referenced by Finish().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a97165101e46c49ad2629345f1cb48da5}\label{classv8_1_1internal_1_1MarkCompactCollector_a97165101e46c49ad2629345f1cb48da5}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!epoch\_@{epoch\_}}
\index{epoch\_@{epoch\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{epoch\_}{epoch\_}}
{\footnotesize\ttfamily unsigned v8\+::internal\+::\+Mark\+Compact\+Collector\+::epoch\+\_\+ = 0\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 463 of file mark-\/compact.\+h.



Referenced by epoch().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}\label{classv8_1_1internal_1_1MarkCompactCollector_a57e6e0473e2cf52591357fcbeb4ebfca}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!evacuation\_candidates\_@{evacuation\_candidates\_}}
\index{evacuation\_candidates\_@{evacuation\_candidates\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{evacuation\_candidates\_}{evacuation\_candidates\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::evacuation\+\_\+candidates\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 438 of file mark-\/compact.\+h.



Referenced by Add\+Evacuation\+Candidate(), and Start\+Compaction().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}\label{classv8_1_1internal_1_1MarkCompactCollector_a2bf16e5a4b1908c7abfc22383d37980f}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!have\_code\_to\_deoptimize\_@{have\_code\_to\_deoptimize\_}}
\index{have\_code\_to\_deoptimize\_@{have\_code\_to\_deoptimize\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{have\_code\_to\_deoptimize\_}{have\_code\_to\_deoptimize\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::have\+\_\+code\+\_\+to\+\_\+deoptimize\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 421 of file mark-\/compact.\+h.



Referenced by Finish().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}\label{classv8_1_1internal_1_1MarkCompactCollector_ae03601e565734a2538c3452310efcf8a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!heap\_@{heap\_}}
\index{heap\_@{heap\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{heap\_}{heap\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}}$\ast$ const v8\+::internal\+::\+Mark\+Compact\+Collector\+::heap\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 396 of file mark-\/compact.\+h.



Referenced by Add\+Evacuation\+Candidate(), Collect\+Evacuation\+Candidates(), Collect\+Garbage(), Compute\+Evacuation\+Heuristics(), Finish(), Finish\+Concurrent\+Marking(), heap(), Mark\+Object(), Mark\+Objects\+From\+Client\+Heaps(), Mark\+Root\+Object(), Mark\+Roots(), Mark\+Roots\+From\+Conservative\+Stack(), Maybe\+Enable\+Background\+Threads\+In\+Cycle(), Prepare(), Start\+Compaction(), Start\+Marking(), Sweep\+Array\+Buffer\+Extensions(), Tear\+Down(), and Verify\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}\label{classv8_1_1internal_1_1MarkCompactCollector_a813f065fd20e706f633a1f94da96f839}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!in\_conservative\_stack\_scanning\_@{in\_conservative\_stack\_scanning\_}}
\index{in\_conservative\_stack\_scanning\_@{in\_conservative\_stack\_scanning\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{in\_conservative\_stack\_scanning\_}{in\_conservative\_stack\_scanning\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::in\+\_\+conservative\+\_\+stack\+\_\+scanning\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 475 of file mark-\/compact.\+h.



Referenced by Mark\+Root\+Object(), and Mark\+Roots\+From\+Conservative\+Stack().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a56657163fc1e11db075fbc35242ca3ea}\label{classv8_1_1internal_1_1MarkCompactCollector_a56657163fc1e11db075fbc35242ca3ea}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!is\_shared\_space\_isolate\_@{is\_shared\_space\_isolate\_}}
\index{is\_shared\_space\_isolate\_@{is\_shared\_space\_isolate\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{is\_shared\_space\_isolate\_}{is\_shared\_space\_isolate\_}}
{\footnotesize\ttfamily const \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::is\+\_\+shared\+\_\+space\+\_\+isolate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 415 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ad52a278306d82bfecdf2ee279d56967e}\label{classv8_1_1internal_1_1MarkCompactCollector_ad52a278306d82bfecdf2ee279d56967e}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!kEphemeronChunkSize@{kEphemeronChunkSize}}
\index{kEphemeronChunkSize@{kEphemeronChunkSize}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{kEphemeronChunkSize}{kEphemeronChunkSize}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::k\+Ephemeron\+Chunk\+Size = 8 $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 384 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}\label{classv8_1_1internal_1_1MarkCompactCollector_a081b322601a4f48341bab12890a37b11}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!key\_to\_values\_@{key\_to\_values\_}}
\index{key\_to\_values\_@{key\_to\_values\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{key\_to\_values\_}{key\_to\_values\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a28865ed3db2b1d0816122def6a86c92e}{Key\+To\+Values}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::key\+\_\+to\+\_\+values\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 452 of file mark-\/compact.\+h.



Referenced by Finish().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}\label{classv8_1_1internal_1_1MarkCompactCollector_a7aa3dd4e8cf79ce7342fd16773ecfb8a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!local\_marking\_worklists\_@{local\_marking\_worklists\_}}
\index{local\_marking\_worklists\_@{local\_marking\_worklists\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{local\_marking\_worklists\_}{local\_marking\_worklists\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists_a941d07bdea68cc187975415adc4dac79}{Marking\+Worklists\+::\+Local}}$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::local\+\_\+marking\+\_\+worklists\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 425 of file mark-\/compact.\+h.



Referenced by Finish(), local\+\_\+marking\+\_\+worklists(), Mark\+Object(), Mark\+Root\+Object(), Start\+Marking(), Tear\+Down(), and Verify\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}\label{classv8_1_1internal_1_1MarkCompactCollector_ab7a10b022d9f335231b5ea7dbbdbaa51}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!local\_weak\_objects\_@{local\_weak\_objects\_}}
\index{local\_weak\_objects\_@{local\_weak\_objects\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{local\_weak\_objects\_}{local\_weak\_objects\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects_1_1Local}{Weak\+Objects\+::\+Local}}$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::local\+\_\+weak\+\_\+objects\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 430 of file mark-\/compact.\+h.



Referenced by Finish(), local\+\_\+weak\+\_\+objects(), and Start\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}\label{classv8_1_1internal_1_1MarkCompactCollector_a93b2700c2f0bdd026ead1656ef7416c6}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!marking\_state\_@{marking\_state\_}}
\index{marking\_state\_@{marking\_state\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{marking\_state\_}{marking\_state\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MarkingState}{Marking\+State}}$\ast$ const v8\+::internal\+::\+Mark\+Compact\+Collector\+::marking\+\_\+state\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 454 of file mark-\/compact.\+h.



Referenced by Mark\+Object(), and Mark\+Root\+Object().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}\label{classv8_1_1internal_1_1MarkCompactCollector_af61342980b0507790efb15034d83162f}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!marking\_visitor\_@{marking\_visitor\_}}
\index{marking\_visitor\_@{marking\_visitor\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{marking\_visitor\_}{marking\_visitor\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1MainMarkingVisitor}{Main\+Marking\+Visitor}}$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::marking\+\_\+visitor\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 429 of file mark-\/compact.\+h.



Referenced by Finish(), and Start\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}\label{classv8_1_1internal_1_1MarkCompactCollector_a84cbdfc60879f899e3aca799e53e5e42}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!marking\_worklists\_@{marking\_worklists\_}}
\index{marking\_worklists\_@{marking\_worklists\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{marking\_worklists\_}{marking\_worklists\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MarkingWorklists}{Marking\+Worklists}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::marking\+\_\+worklists\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 424 of file mark-\/compact.\+h.



Referenced by Finish(), marking\+\_\+worklists(), Start\+Marking(), and Tear\+Down().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a2e6250572f864eaa8bd93c57ae34215a}\label{classv8_1_1internal_1_1MarkCompactCollector_a2e6250572f864eaa8bd93c57ae34215a}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!mutex\_@{mutex\_}}
\index{mutex\_@{mutex\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{mutex\_}{mutex\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::mutex\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 398 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a38d01cfcaa46efe4b24412d3eba66ca0}\label{classv8_1_1internal_1_1MarkCompactCollector_a38d01cfcaa46efe4b24412d3eba66ca0}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!native\_context\_inferrer\_@{native\_context\_inferrer\_}}
\index{native\_context\_inferrer\_@{native\_context\_inferrer\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{native\_context\_inferrer\_}{native\_context\_inferrer\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1NativeContextInferrer}{Native\+Context\+Inferrer}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::native\+\_\+context\+\_\+inferrer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 431 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}\label{classv8_1_1internal_1_1MarkCompactCollector_adebad6550fadebad8005f173c10359c6}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!native\_context\_stats\_@{native\_context\_stats\_}}
\index{native\_context\_stats\_@{native\_context\_stats\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{native\_context\_stats\_}{native\_context\_stats\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1NativeContextStats}{Native\+Context\+Stats}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::native\+\_\+context\+\_\+stats\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 432 of file mark-\/compact.\+h.



Referenced by Collect\+Garbage(), Finish(), and Finish\+Concurrent\+Marking().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}\label{classv8_1_1internal_1_1MarkCompactCollector_a90654b662fce79c4d158e494a7660987}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!new\_space\_evacuation\_pages\_@{new\_space\_evacuation\_pages\_}}
\index{new\_space\_evacuation\_pages\_@{new\_space\_evacuation\_pages\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{new\_space\_evacuation\_pages\_}{new\_space\_evacuation\_pages\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::new\+\_\+space\+\_\+evacuation\+\_\+pages\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 441 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}\label{classv8_1_1internal_1_1MarkCompactCollector_afae21b5cab72b362b1b379c2f3bda5f8}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!non\_atomic\_marking\_state\_@{non\_atomic\_marking\_state\_}}
\index{non\_atomic\_marking\_state\_@{non\_atomic\_marking\_state\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{non\_atomic\_marking\_state\_}{non\_atomic\_marking\_state\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1NonAtomicMarkingState}{Non\+Atomic\+Marking\+State}}$\ast$ const v8\+::internal\+::\+Mark\+Compact\+Collector\+::non\+\_\+atomic\+\_\+marking\+\_\+state\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 455 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}\label{classv8_1_1internal_1_1MarkCompactCollector_af8bdf9288a13d36c8c4c482145a20238}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!old\_space\_evacuation\_pages\_@{old\_space\_evacuation\_pages\_}}
\index{old\_space\_evacuation\_pages\_@{old\_space\_evacuation\_pages\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{old\_space\_evacuation\_pages\_}{old\_space\_evacuation\_pages\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1PageMetadata}{Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::old\+\_\+space\+\_\+evacuation\+\_\+pages\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 440 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_aec2b8f54a92b2195012b62dfdf64aa9b}\label{classv8_1_1internal_1_1MarkCompactCollector_aec2b8f54a92b2195012b62dfdf64aa9b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!page\_parallel\_job\_semaphore\_@{page\_parallel\_job\_semaphore\_}}
\index{page\_parallel\_job\_semaphore\_@{page\_parallel\_job\_semaphore\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{page\_parallel\_job\_semaphore\_}{page\_parallel\_job\_semaphore\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Semaphore}{base\+::\+Semaphore}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::page\+\_\+parallel\+\_\+job\+\_\+semaphore\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 399 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}\label{classv8_1_1internal_1_1MarkCompactCollector_a8ba2df1d2e1c47234008d809d596228c}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!parallel\_marking\_@{parallel\_marking\_}}
\index{parallel\_marking\_@{parallel\_marking\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{parallel\_marking\_}{parallel\_marking\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::parallel\+\_\+marking\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 422 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}\label{classv8_1_1internal_1_1MarkCompactCollector_af2e1364ab937f14cf763b58e79567d74}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!promoted\_large\_pages\_@{promoted\_large\_pages\_}}
\index{promoted\_large\_pages\_@{promoted\_large\_pages\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{promoted\_large\_pages\_}{promoted\_large\_pages\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1LargePageMetadata}{Large\+Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::promoted\+\_\+large\+\_\+pages\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 445 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}\label{classv8_1_1internal_1_1MarkCompactCollector_a18e20b7391f846e5f4c429eda5bf5cbe}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!queued\_pages\_to\_be\_freed\_@{queued\_pages\_to\_be\_freed\_}}
\index{queued\_pages\_to\_be\_freed\_@{queued\_pages\_to\_be\_freed\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{queued\_pages\_to\_be\_freed\_}{queued\_pages\_to\_be\_freed\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata}{Mutable\+Page\+Metadata}}$\ast$$>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::queued\+\_\+pages\+\_\+to\+\_\+be\+\_\+freed\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 449 of file mark-\/compact.\+h.



Referenced by Finish().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}\label{classv8_1_1internal_1_1MarkCompactCollector_a549e40a15f698fff626af735208769ae}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!strong\_descriptor\_arrays\_@{strong\_descriptor\_arrays\_}}
\index{strong\_descriptor\_arrays\_@{strong\_descriptor\_arrays\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{strong\_descriptor\_arrays\_}{strong\_descriptor\_arrays\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1GlobalHandleVector}{Global\+Handle\+Vector}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}}$>$ $>$ v8\+::internal\+::\+Mark\+Compact\+Collector\+::strong\+\_\+descriptor\+\_\+arrays\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 434 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a512d50cdd47b6006d66ac9456259e69b}\label{classv8_1_1internal_1_1MarkCompactCollector_a512d50cdd47b6006d66ac9456259e69b}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!strong\_descriptor\_arrays\_mutex\_@{strong\_descriptor\_arrays\_mutex\_}}
\index{strong\_descriptor\_arrays\_mutex\_@{strong\_descriptor\_arrays\_mutex\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{strong\_descriptor\_arrays\_mutex\_}{strong\_descriptor\_arrays\_mutex\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::strong\+\_\+descriptor\+\_\+arrays\+\_\+mutex\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 435 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}\label{classv8_1_1internal_1_1MarkCompactCollector_ac461786105da85b3815ffc21717d883d}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!sweeper\_@{sweeper\_}}
\index{sweeper\_@{sweeper\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{sweeper\_}{sweeper\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Sweeper}{Sweeper}}$\ast$ const v8\+::internal\+::\+Mark\+Compact\+Collector\+::sweeper\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 456 of file mark-\/compact.\+h.



Referenced by Collect\+Evacuation\+Candidates(), Finish(), and Prepare().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}\label{classv8_1_1internal_1_1MarkCompactCollector_a1c9a5589f6ebd3fd2eb5869923fe8e54}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!use\_background\_threads\_in\_cycle\_@{use\_background\_threads\_in\_cycle\_}}
\index{use\_background\_threads\_in\_cycle\_@{use\_background\_threads\_in\_cycle\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{use\_background\_threads\_in\_cycle\_}{use\_background\_threads\_in\_cycle\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::use\+\_\+background\+\_\+threads\+\_\+in\+\_\+cycle\+\_\+ = \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 473 of file mark-\/compact.\+h.



Referenced by Maybe\+Enable\+Background\+Threads\+In\+Cycle(), Start\+Marking(), and Use\+Background\+Threads\+In\+Cycle().

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a76317965f702101c902adbdee2503103}\label{classv8_1_1internal_1_1MarkCompactCollector_a76317965f702101c902adbdee2503103}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!uses\_shared\_heap\_@{uses\_shared\_heap\_}}
\index{uses\_shared\_heap\_@{uses\_shared\_heap\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{uses\_shared\_heap\_}{uses\_shared\_heap\_}}
{\footnotesize\ttfamily const \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::uses\+\_\+shared\+\_\+heap\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 414 of file mark-\/compact.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}\label{classv8_1_1internal_1_1MarkCompactCollector_a0fcc37fc5a17ba03b80c55849b314fec}} 
\index{v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}!weak\_objects\_@{weak\_objects\_}}
\index{weak\_objects\_@{weak\_objects\_}!v8::internal::MarkCompactCollector@{v8::internal::MarkCompactCollector}}
\doxysubsubsection{\texorpdfstring{weak\_objects\_}{weak\_objects\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1WeakObjects}{Weak\+Objects}} v8\+::internal\+::\+Mark\+Compact\+Collector\+::weak\+\_\+objects\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 427 of file mark-\/compact.\+h.



Referenced by Finish(), and weak\+\_\+objects().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/heap/\mbox{\hyperlink{mark-compact_8h}{mark-\/compact.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/\mbox{\hyperlink{mark-compact-inl_8h}{mark-\/compact-\/inl.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/\mbox{\hyperlink{mark-compact_8cc}{mark-\/compact.\+cc}}\end{DoxyCompactItemize}
