\hypertarget{classv8_1_1ValueSerializer_1_1Delegate}{}\doxysection{v8\+::Value\+Serializer\+::Delegate Class Reference}
\label{classv8_1_1ValueSerializer_1_1Delegate}\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}


{\ttfamily \#include $<$v8-\/value-\/serializer.\+h$>$}



Inheritance diagram for v8\+::Value\+Serializer\+::Delegate\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=187pt]{classv8_1_1ValueSerializer_1_1Delegate__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a477de3ffd3c45de3c7c4fede39729178}{$\sim$\+Delegate}} ()=default
\item 
virtual void \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a3681bfcd9a6c45f0b12bd7a8bdf34d85}{Throw\+Data\+Clone\+Error}} (\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$ message)=0
\item 
virtual bool \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ad18b51f3ad7e2a8aef524d056fb657bc}{Has\+Custom\+Host\+Object}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}})
\item 
virtual \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a65df03c67d39d9d7c50d21aad0db5075}{Is\+Host\+Object}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}}, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Object}{Object}} $>$ object)
\item 
virtual \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a9cdf9bb45300507456548161cbe656b5}{Write\+Host\+Object}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}}, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Object}{Object}} $>$ object)
\item 
virtual \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ac12b5cfd7480c19f0b9af0b47d05a77e}{Get\+Shared\+Array\+Buffer\+Id}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}}, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$ shared\+\_\+array\+\_\+buffer)
\item 
virtual \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a225eea0a4f9f47a9209721aa7a7d724f}{Get\+Wasm\+Module\+Transfer\+Id}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}}, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$ module)
\item 
virtual bool \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a53dc397f9c3662360a6d11c6fea8cf21}{Adopt\+Shared\+Value\+Conveyor}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{graph-builder_8cc_a9990dda08de44f6aee0aaf44c50da7d9}{isolate}}, \mbox{\hyperlink{classv8_1_1SharedValueConveyor}{Shared\+Value\+Conveyor}} \&\&conveyor)
\item 
virtual void $\ast$ \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_ade3ce68ebf5a3f3eba2f8f091177f155}{Reallocate\+Buffer\+Memory}} (void $\ast$old\+\_\+buffer, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t $\ast$actual\+\_\+size)
\item 
virtual void \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a9cd4ab0061b4a26b4b0d695d31992f82}{Free\+Buffer\+Memory}} (void $\ast$buffer)
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a477de3ffd3c45de3c7c4fede39729178}\label{classv8_1_1ValueSerializer_1_1Delegate_a477de3ffd3c45de3c7c4fede39729178}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!````~Delegate@{$\sim$Delegate}}
\index{````~Delegate@{$\sim$Delegate}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{$\sim$Delegate()}{~Delegate()}}
{\footnotesize\ttfamily virtual v8\+::\+Value\+Serializer\+::\+Delegate\+::$\sim$\+Delegate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a53dc397f9c3662360a6d11c6fea8cf21}\label{classv8_1_1ValueSerializer_1_1Delegate_a53dc397f9c3662360a6d11c6fea8cf21}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!AdoptSharedValueConveyor@{AdoptSharedValueConveyor}}
\index{AdoptSharedValueConveyor@{AdoptSharedValueConveyor}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{AdoptSharedValueConveyor()}{AdoptSharedValueConveyor()}}
{\footnotesize\ttfamily bool v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Adopt\+Shared\+Value\+Conveyor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1SharedValueConveyor}{Shared\+Value\+Conveyor}} \&\&}]{conveyor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Called when the first shared value is serialized. All subsequent shared values will use the same conveyor.

The embedder must ensure the lifetime of the conveyor matches the lifetime of the serialized data.

If the embedder supports serializing shared values, this method should return true. Otherwise the embedder should throw an exception and return false.

This method is called at most once per serializer. 

Reimplemented in \mbox{\hyperlink{classv8_1_1Serializer_a54d5467f7d1e9b35ec95f36f7f88b2b9}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a9cd4ab0061b4a26b4b0d695d31992f82}\label{classv8_1_1ValueSerializer_1_1Delegate_a9cd4ab0061b4a26b4b0d695d31992f82}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!FreeBufferMemory@{FreeBufferMemory}}
\index{FreeBufferMemory@{FreeBufferMemory}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{FreeBufferMemory()}{FreeBufferMemory()}}
{\footnotesize\ttfamily void v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Free\+Buffer\+Memory (\begin{DoxyParamCaption}\item[{void $\ast$}]{buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Frees a buffer allocated with $\vert$\+Reallocate\+Buffer\+Memory$\vert$.

The default implementation uses the stdlib\textquotesingle{}s {\ttfamily free()} function. 

Reimplemented in \mbox{\hyperlink{classv8_1_1Serializer_af406a9e21fccfce3a5faed52182a69a6}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_ac12b5cfd7480c19f0b9af0b47d05a77e}\label{classv8_1_1ValueSerializer_1_1Delegate_ac12b5cfd7480c19f0b9af0b47d05a77e}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!GetSharedArrayBufferId@{GetSharedArrayBufferId}}
\index{GetSharedArrayBufferId@{GetSharedArrayBufferId}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{GetSharedArrayBufferId()}{GetSharedArrayBufferId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Get\+Shared\+Array\+Buffer\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} $>$}]{shared\+\_\+array\+\_\+buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Called when the \mbox{\hyperlink{classv8_1_1ValueSerializer}{Value\+Serializer}} is going to serialize a \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} object. The embedder must return an ID for the object, using the same ID if this \mbox{\hyperlink{classv8_1_1SharedArrayBuffer}{Shared\+Array\+Buffer}} has already been serialized in this buffer. When deserializing, this ID will be passed to Value\+Deserializer\+::\+Get\+Shared\+Array\+Buffer\+From\+Id as $\vert$clone\+\_\+id$\vert$.

If the object cannot be serialized, an exception should be thrown and \mbox{\hyperlink{namespacev8_ada000f8d5f1f65a26be3b35f8f398d28}{Nothing$<$uint32\+\_\+t$>$()}} returned. 

Reimplemented in \mbox{\hyperlink{classv8_1_1Serializer_a573f904a1db660126a98ecec16f142be}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a225eea0a4f9f47a9209721aa7a7d724f}\label{classv8_1_1ValueSerializer_1_1Delegate_a225eea0a4f9f47a9209721aa7a7d724f}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!GetWasmModuleTransferId@{GetWasmModuleTransferId}}
\index{GetWasmModuleTransferId@{GetWasmModuleTransferId}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{GetWasmModuleTransferId()}{GetWasmModuleTransferId()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ uint32\+\_\+t $>$ v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Get\+Wasm\+Module\+Transfer\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1WasmModuleObject}{Wasm\+Module\+Object}} $>$}]{module }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Reimplemented in \mbox{\hyperlink{classv8_1_1Serializer_ad80848a9dfe7dbed01db35aec95e933a}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_ad18b51f3ad7e2a8aef524d056fb657bc}\label{classv8_1_1ValueSerializer_1_1Delegate_ad18b51f3ad7e2a8aef524d056fb657bc}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!HasCustomHostObject@{HasCustomHostObject}}
\index{HasCustomHostObject@{HasCustomHostObject}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{HasCustomHostObject()}{HasCustomHostObject()}}
{\footnotesize\ttfamily bool v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Has\+Custom\+Host\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The embedder overrides this method to enable custom host object filter with \mbox{\hyperlink{classv8_1_1ValueSerializer_1_1Delegate_a65df03c67d39d9d7c50d21aad0db5075}{Delegate\+::\+Is\+Host\+Object}}.

This method is called at most once per serializer. \mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a65df03c67d39d9d7c50d21aad0db5075}\label{classv8_1_1ValueSerializer_1_1Delegate_a65df03c67d39d9d7c50d21aad0db5075}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!IsHostObject@{IsHostObject}}
\index{IsHostObject@{IsHostObject}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{IsHostObject()}{IsHostObject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Is\+Host\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Object}{Object}} $>$}]{object }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The embedder overrides this method to determine if an JS object is a host object and needs to be serialized by the host. \mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_ade3ce68ebf5a3f3eba2f8f091177f155}\label{classv8_1_1ValueSerializer_1_1Delegate_ade3ce68ebf5a3f3eba2f8f091177f155}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!ReallocateBufferMemory@{ReallocateBufferMemory}}
\index{ReallocateBufferMemory@{ReallocateBufferMemory}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{ReallocateBufferMemory()}{ReallocateBufferMemory()}}
{\footnotesize\ttfamily void $\ast$ v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Reallocate\+Buffer\+Memory (\begin{DoxyParamCaption}\item[{void $\ast$}]{old\+\_\+buffer,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{actual\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Allocates memory for the buffer of at least the size provided. The actual size (which may be greater or equal) is written to $\vert$actual\+\_\+size$\vert$. If no buffer has been allocated yet, nullptr will be provided.

If the memory cannot be allocated, nullptr should be returned. $\vert$actual\+\_\+size$\vert$ will be ignored. It is assumed that $\vert$old\+\_\+buffer$\vert$ is still valid in this case and has not been modified.

The default implementation uses the stdlib\textquotesingle{}s {\ttfamily realloc()} function. 

Reimplemented in \mbox{\hyperlink{classv8_1_1Serializer_a0642983ee43067669e17c87411167a02}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a3681bfcd9a6c45f0b12bd7a8bdf34d85}\label{classv8_1_1ValueSerializer_1_1Delegate_a3681bfcd9a6c45f0b12bd7a8bdf34d85}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!ThrowDataCloneError@{ThrowDataCloneError}}
\index{ThrowDataCloneError@{ThrowDataCloneError}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{ThrowDataCloneError()}{ThrowDataCloneError()}}
{\footnotesize\ttfamily virtual void v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Throw\+Data\+Clone\+Error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$}]{message }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Handles the case where a Data\+Clone\+Error would be thrown in the structured clone spec. Other \mbox{\hyperlink{classv8_1_1V8}{V8}} embedders may throw some other appropriate exception type. 

Implemented in \mbox{\hyperlink{classv8_1_1Serializer_a97707713e9bfe28e117bd15d40e3afc6}{v8\+::\+Serializer}}.

\mbox{\Hypertarget{classv8_1_1ValueSerializer_1_1Delegate_a9cdf9bb45300507456548161cbe656b5}\label{classv8_1_1ValueSerializer_1_1Delegate_a9cdf9bb45300507456548161cbe656b5}} 
\index{v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}!WriteHostObject@{WriteHostObject}}
\index{WriteHostObject@{WriteHostObject}!v8::ValueSerializer::Delegate@{v8::ValueSerializer::Delegate}}
\doxysubsubsection{\texorpdfstring{WriteHostObject()}{WriteHostObject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ bool $>$ v8\+::\+Value\+Serializer\+::\+Delegate\+::\+Write\+Host\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Object}{Object}} $>$}]{object }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The embedder overrides this method to write some kind of host object, if possible. If not, a suitable exception should be thrown and \mbox{\hyperlink{namespacev8_ada000f8d5f1f65a26be3b35f8f398d28}{Nothing$<$bool$>$()}} returned. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{v8-value-serializer_8h}{v8-\/value-\/serializer.\+h}}\item 
\mbox{\hyperlink{api_8cc}{api.\+cc}}\end{DoxyCompactItemize}
