\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{regexp.\+cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_1_1RegExpCaptureIndexLess}{Reg\+Exp\+Capture\+Index\+Less}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a88859e5a9429b43375eb9b54772485bf}{Has\+Few\+Different\+Characters}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ pattern)
\item 
{\footnotesize template$<$typename SChar , typename PChar $>$ }\\\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a8556d89b1eba8e17b92e51dae636a6a1}{Atom\+Exec\+Raw\+Impl}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const SChar $>$ subject, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const PChar $>$ pattern, \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}, \mbox{\hyperlink{namespacev8_1_1internal_a8adefc3d0e54f7ba3acfa57e74967447}{Reg\+Exp\+Flags}} \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}, int32\+\_\+t $\ast$output, \mbox{\hyperlink{classint}{int}} output\+\_\+size, const \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{Disallow\+Garbage\+Collection}} \&no\+\_\+gc)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a69473619abc0892f605329fb0c6f2307}{Too\+Much\+Reg\+Exp\+Code}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ pattern)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a8556d89b1eba8e17b92e51dae636a6a1}\label{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a8556d89b1eba8e17b92e51dae636a6a1}} 
\index{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}!AtomExecRawImpl@{AtomExecRawImpl}}
\index{AtomExecRawImpl@{AtomExecRawImpl}!v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AtomExecRawImpl()}{AtomExecRawImpl()}}
{\footnotesize\ttfamily template$<$typename SChar , typename PChar $>$ \\
\mbox{\hyperlink{classint}{int}} v8\+::internal\+::anonymous\+\_\+namespace\{regexp.\+cc\}\+::Atom\+Exec\+Raw\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const SChar $>$}]{subject,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const PChar $>$}]{pattern,  }\item[{\mbox{\hyperlink{classint}{int}}}]{index,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a8adefc3d0e54f7ba3acfa57e74967447}{Reg\+Exp\+Flags}}}]{flags,  }\item[{int32\+\_\+t $\ast$}]{output,  }\item[{\mbox{\hyperlink{classint}{int}}}]{output\+\_\+size,  }\item[{const \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{Disallow\+Garbage\+Collection}} \&}]{no\+\_\+gc }\end{DoxyParamCaption})}



Definition at line 396 of file regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{399                                                             \{}
\DoxyCodeLine{400   \textcolor{keyword}{const} \textcolor{keywordtype}{int} subject\_length = subject.length();}
\DoxyCodeLine{401   \textcolor{keyword}{const} \textcolor{keywordtype}{int} pattern\_length = pattern.length();}
\DoxyCodeLine{402   \mbox{\hyperlink{src_2base_2logging_8h_afd957f297df7e9ee36c46185e961485f}{DCHECK\_GT}}(pattern\_length, 0);}
\DoxyCodeLine{403   \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_index = subject\_length -\/ pattern\_length;}
\DoxyCodeLine{404 }
\DoxyCodeLine{405   StringSearch<PChar, SChar> \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_af8a15e556ff7d16bc7c5bd1aa2084ef2}{search}}(isolate, pattern);}
\DoxyCodeLine{406   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < output\_size; \mbox{\hyperlink{namespacev8_1_1internal}{i}} += JSRegExp::kAtomRegisterCount) \{}
\DoxyCodeLine{407     \textcolor{keywordflow}{if} constexpr (std::is\_same\_v<SChar, uint16\_t>) \{}
\DoxyCodeLine{408       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} > 0 \&\& \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} < subject\_length \&\&}
\DoxyCodeLine{409           \mbox{\hyperlink{namespacev8_1_1internal_a56924b9aa4bcbb1dfa834bbeb67644b1}{ShouldOptionallyStepBackToLeadSurrogate}}(\mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}})) \{}
\DoxyCodeLine{410         \textcolor{comment}{// See https://github.com/tc39/ecma262/issues/128 and}}
\DoxyCodeLine{411         \textcolor{comment}{// https://codereview.chromium.org/1608693003.}}
\DoxyCodeLine{412         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classunibrow_1_1Utf16_abb3a01f7302f952deaad31b667fd83a8}{unibrow::Utf16::IsTrailSurrogate}}(subject[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}]) \&\&}
\DoxyCodeLine{413             \mbox{\hyperlink{classunibrow_1_1Utf16_ada29066756f075feb4786ec1b6d50f71}{unibrow::Utf16::IsLeadSurrogate}}(subject[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} -\/ 1])) \{}
\DoxyCodeLine{414           \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}-\/-\/;}
\DoxyCodeLine{415         \}}
\DoxyCodeLine{416       \}}
\DoxyCodeLine{417     \}}
\DoxyCodeLine{418 }
\DoxyCodeLine{419     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} > max\_index) \{}
\DoxyCodeLine{420       static\_assert(RegExp::RE\_FAILURE == 0);}
\DoxyCodeLine{421       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal}{i}} / JSRegExp::kAtomRegisterCount;  \textcolor{comment}{// Return number of matches.}}
\DoxyCodeLine{422     \}}
\DoxyCodeLine{423     \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_af8a15e556ff7d16bc7c5bd1aa2084ef2}{search}}.Search(subject, \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}});}
\DoxyCodeLine{424     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} == -\/1) \{}
\DoxyCodeLine{425       static\_assert(RegExp::RE\_FAILURE == 0);}
\DoxyCodeLine{426       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal}{i}} / JSRegExp::kAtomRegisterCount;  \textcolor{comment}{// Return number of matches.}}
\DoxyCodeLine{427     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{428       output[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}] = \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}};  \textcolor{comment}{// match start}}
\DoxyCodeLine{429       \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} += pattern\_length;}
\DoxyCodeLine{430       output[\mbox{\hyperlink{namespacev8_1_1internal}{i}} + 1] = \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}};  \textcolor{comment}{// match end}}
\DoxyCodeLine{431     \}}
\DoxyCodeLine{432   \}}
\DoxyCodeLine{433 }
\DoxyCodeLine{434   \textcolor{keywordflow}{return} output\_size / JSRegExp::kAtomRegisterCount;}
\DoxyCodeLine{435 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+GT, v8\+::internal\+::flags, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::index, unibrow\+::\+Utf16\+::\+Is\+Lead\+Surrogate(), unibrow\+::\+Utf16\+::\+Is\+Trail\+Surrogate(), v8\+::internal\+::\+JSReg\+Exp\+::k\+Atom\+Register\+Count, v8\+::base\+::\+Vector$<$ T $>$\+::length(), v8\+::internal\+::\+Reg\+Exp\+::\+RE\+\_\+\+FAILURE, v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::search(), and v8\+::internal\+::\+Should\+Optionally\+Step\+Back\+To\+Lead\+Surrogate().



Referenced by v8\+::internal\+::\+Reg\+Exp\+Impl\+::\+Atom\+Exec\+Raw().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a8556d89b1eba8e17b92e51dae636a6a1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a8556d89b1eba8e17b92e51dae636a6a1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a88859e5a9429b43375eb9b54772485bf}\label{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a88859e5a9429b43375eb9b54772485bf}} 
\index{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}!HasFewDifferentCharacters@{HasFewDifferentCharacters}}
\index{HasFewDifferentCharacters@{HasFewDifferentCharacters}!v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{HasFewDifferentCharacters()}{HasFewDifferentCharacters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{regexp.\+cc\}\+::Has\+Few\+Different\+Characters (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{pattern }\end{DoxyParamCaption})}



Definition at line 175 of file regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{175                                                              \{}
\DoxyCodeLine{176   uint32\_t \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = std::min(\mbox{\hyperlink{namespacev8_1_1internal_1_1regexp__compiler__constants_ae55928b59cf6de9317d6a3c9cd37c5ce}{kMaxLookaheadForBoyerMoore}}, pattern-\/>length());}
\DoxyCodeLine{177   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} <= \mbox{\hyperlink{namespacev8_1_1internal_1_1regexp__compiler__constants_ac40bd0cd73a50942845abc22360b9f86}{kPatternTooShortForBoyerMoore}}) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{178   \textcolor{keyword}{const} \textcolor{keywordtype}{int} kMod = 128;}
\DoxyCodeLine{179   \textcolor{keywordtype}{bool} character\_found[kMod];}
\DoxyCodeLine{180   uint32\_t different = 0;}
\DoxyCodeLine{181   memset(\&character\_found[0], 0, \textcolor{keyword}{sizeof}(character\_found));}
\DoxyCodeLine{182   \textcolor{keywordflow}{for} (uint32\_t \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{183     \textcolor{keywordtype}{int} ch = (pattern-\/>Get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}) \& (kMod -\/ 1));}
\DoxyCodeLine{184     \textcolor{keywordflow}{if} (!character\_found[ch]) \{}
\DoxyCodeLine{185       character\_found[ch] = \textcolor{keyword}{true};}
\DoxyCodeLine{186       different++;}
\DoxyCodeLine{187       \textcolor{comment}{// We declare a regexp low-\/alphabet if it has at least 3 times as many}}
\DoxyCodeLine{188       \textcolor{comment}{// characters as it has different characters.}}
\DoxyCodeLine{189       \textcolor{keywordflow}{if} (different * 3 > \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{190     \}}
\DoxyCodeLine{191   \}}
\DoxyCodeLine{192   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{193 \}}

\end{DoxyCode}


References v8\+::internal\+::regexp\+\_\+compiler\+\_\+constants\+::k\+Max\+Lookahead\+For\+Boyer\+Moore, v8\+::internal\+::regexp\+\_\+compiler\+\_\+constants\+::k\+Pattern\+Too\+Short\+For\+Boyer\+Moore, and v8\+::internal\+::length.



Referenced by v8\+::internal\+::\+Reg\+Exp\+::\+Compile().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a88859e5a9429b43375eb9b54772485bf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a69473619abc0892f605329fb0c6f2307}\label{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a69473619abc0892f605329fb0c6f2307}} 
\index{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}!TooMuchRegExpCode@{TooMuchRegExpCode}}
\index{TooMuchRegExpCode@{TooMuchRegExpCode}!v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{TooMuchRegExpCode()}{TooMuchRegExpCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{regexp.\+cc\}\+::Too\+Much\+Reg\+Exp\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{pattern }\end{DoxyParamCaption})}



Definition at line 934 of file regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{934                                                                        \{}
\DoxyCodeLine{935   \textcolor{comment}{// Limit the space regexps take up on the heap.  In order to limit this we}}
\DoxyCodeLine{936   \textcolor{comment}{// would like to keep track of the amount of regexp code on the heap.  This}}
\DoxyCodeLine{937   \textcolor{comment}{// is not tracked, however.  As a conservative approximation we track the}}
\DoxyCodeLine{938   \textcolor{comment}{// total regexp code compiled including code that has subsequently been freed}}
\DoxyCodeLine{939   \textcolor{comment}{// and the total executable memory at any point.}}
\DoxyCodeLine{940   \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{size\_t} kRegExpExecutableMemoryLimit = 16 * \mbox{\hyperlink{flag-definitions_8h_a67f6e75911a1c9e16076ff4db599e681}{MB}};}
\DoxyCodeLine{941   \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{size\_t} kRegExpCompiledLimit = 1 * \mbox{\hyperlink{flag-definitions_8h_a67f6e75911a1c9e16076ff4db599e681}{MB}};}
\DoxyCodeLine{942 }
\DoxyCodeLine{943   Heap* \mbox{\hyperlink{namespaceheap}{heap}} = isolate-\/>heap();}
\DoxyCodeLine{944   \textcolor{keywordflow}{if} (pattern-\/>length() > RegExp::kRegExpTooLargeToOptimize) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{945   \textcolor{keywordflow}{return} (isolate-\/>total\_regexp\_code\_generated() > kRegExpCompiledLimit \&\&}
\DoxyCodeLine{946           \mbox{\hyperlink{namespaceheap}{heap}}-\/>CommittedMemoryExecutable() > kRegExpExecutableMemoryLimit);}
\DoxyCodeLine{947 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Reg\+Exp\+::k\+Reg\+Exp\+Too\+Large\+To\+Optimize, v8\+::internal\+::\+MB, and v8\+::internal\+::\+Isolate\+::total\+\_\+regexp\+\_\+code\+\_\+generated().



Referenced by v8\+::internal\+::\+Reg\+Exp\+Impl\+::\+Compile().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a69473619abc0892f605329fb0c6f2307_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02regexp_8cc_03_a69473619abc0892f605329fb0c6f2307_icgraph}
\end{center}
\end{figure}
