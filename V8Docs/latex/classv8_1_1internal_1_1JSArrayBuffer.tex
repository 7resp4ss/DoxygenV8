\hypertarget{classv8_1_1internal_1_1JSArrayBuffer}{}\doxysection{v8\+::internal\+::JSArray\+Buffer Class Reference}
\label{classv8_1_1internal_1_1JSArrayBuffer}\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}


{\ttfamily \#include $<$js-\/array-\/buffer.\+h$>$}



Inheritance diagram for v8\+::internal\+::JSArray\+Buffer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{classv8_1_1internal_1_1JSArrayBuffer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::JSArray\+Buffer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_1_1BodyDescriptor}{Body\+Descriptor}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a0d9e7dd5794ee0974a5b42847cc45340}{byte\+\_\+length\+\_\+unchecked}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}{set\+\_\+backing\+\_\+store}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, void $\ast$\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87}{init\+\_\+extension}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a947dcf8e5b9cb2273d7330e8ba9746e7}{clear\+\_\+padding}} ()
\item 
\mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a5a05ea65e1b7c7912c362a21a3f3fda0}{Setup}} (\mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}} shared, \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}} resizable, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ backing\+\_\+store, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_afba6e8e57c308d87c254448db372440a}{Get\+Backing\+Store}} () const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aa07f429fe244475e3012a7f155ab53c3}{Get\+Byte\+Length}} () const
\item 
\mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension}{Array\+Buffer\+Extension}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195}{Create\+Extension}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ backing\+\_\+store)
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8}{Remove\+Extension}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a129db39f3ca66c0d2adbf66bda1bf7c6}{Mark\+Extension}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaad96b02bd2092e33276c6474166213c}{Young\+Mark\+Extension}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_afe2d8d43be82e4aa46488e385d97902e}{Young\+Mark\+Extension\+Promoted}} ()
\item 
uint32\+\_\+t \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a529dcbe2a9ab7d47cb22e0d3d731bdee}{Get\+Backing\+Store\+Ref\+For\+Deserialization}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a4af4d99253e151b6a891c2176d9b0274}{Set\+Backing\+Store\+Ref\+For\+Serialization}} (uint32\+\_\+t ref)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{src_2base_2macros_8h_ab08e353943a53678ac6baafc678f2d81}{V8\+\_\+\+EXPORT\+\_\+\+PRIVATE}} static \mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff}{Detach}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$ buffer, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} force\+\_\+for\+\_\+wasm\+\_\+memory=\mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}=\{\})
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a91221f9e7b7b7d00903754ee85ad1328}{Gsab\+Byte\+Length}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} raw\+\_\+array\+\_\+buffer)
\item 
static \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ab0647a5c412793b4ff6651cc366bf03b}{Get\+Resizable\+Backing\+Store\+Page\+Configuration}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} byte\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+byte\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_adbf2c933630f2f4bb419ce1ba04ce760}{Should\+Throw}} should\+\_\+throw, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$page\+\_\+size, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$initial\+\_\+pages, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$max\+\_\+pages)
\item 
static std\+::optional$<$ \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ae056f3ce3416ba853b02bb150728a05d}{Get\+Resizable\+Backing\+Store\+Page\+Configuration\+Impl}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} byte\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+byte\+\_\+length, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$page\+\_\+size, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$initial\+\_\+pages, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$max\+\_\+pages)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{k\+Max\+Byte\+Length}} = \mbox{\hyperlink{namespacev8_1_1internal_a169aca39c9a05f77900ed76a775a4622}{k\+Max\+Safe\+Integer}}
\item 
static constexpr \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a8eb4edf51c945dbaf9b4898a78d9fb33}{k\+Size\+With\+Embedder\+Fields}}
\item 
static constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ab60febf4c8d43dcf4c46a9682eecd5fd}{k\+Contains\+Embedder\+Fields}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a6d87c738b790ece6f5056a88c7f6e2c3}{Detach\+Internal}} (\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} force\+\_\+for\+\_\+wasm\+\_\+memory, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension}{Array\+Buffer\+Extension}} $\ast$$\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_af30de56895f8b681720b9b8511e07941}{extension\+\_\+location}} () const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 25 of file js-\/array-\/buffer.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a0d9e7dd5794ee0974a5b42847cc45340}\label{classv8_1_1internal_1_1JSArrayBuffer_a0d9e7dd5794ee0974a5b42847cc45340}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!byte\_length\_unchecked@{byte\_length\_unchecked}}
\index{byte\_length\_unchecked@{byte\_length\_unchecked}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{byte\_length\_unchecked()}{byte\_length\_unchecked()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+JSArray\+Buffer\+::byte\+\_\+length\+\_\+unchecked (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Referenced by Get\+Byte\+Length().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a0d9e7dd5794ee0974a5b42847cc45340_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a947dcf8e5b9cb2273d7330e8ba9746e7}\label{classv8_1_1internal_1_1JSArrayBuffer_a947dcf8e5b9cb2273d7330e8ba9746e7}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!clear\_padding@{clear\_padding}}
\index{clear\_padding@{clear\_padding}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{clear\_padding()}{clear\_padding()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::clear\+\_\+padding (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 164 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{164                                   \{}
\DoxyCodeLine{165   \textcolor{keywordflow}{if} (\mbox{\hyperlink{utils_2utils_8h_a079f030398b2bcdfef330efd2d3422b1}{FIELD\_SIZE}}(kOptionalPaddingOffset) != 0) \{}
\DoxyCodeLine{166     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(4, \mbox{\hyperlink{utils_2utils_8h_a079f030398b2bcdfef330efd2d3422b1}{FIELD\_SIZE}}(kOptionalPaddingOffset));}
\DoxyCodeLine{167     memset(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(address() + kOptionalPaddingOffset), 0,}
\DoxyCodeLine{168            \mbox{\hyperlink{utils_2utils_8h_a079f030398b2bcdfef330efd2d3422b1}{FIELD\_SIZE}}(kOptionalPaddingOffset));}
\DoxyCodeLine{169   \}}
\DoxyCodeLine{170 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, and FIELD\+\_\+\+SIZE.



Referenced by Setup().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a947dcf8e5b9cb2273d7330e8ba9746e7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195}\label{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!CreateExtension@{CreateExtension}}
\index{CreateExtension@{CreateExtension}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{CreateExtension()}{CreateExtension()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension}{Array\+Buffer\+Extension}} $\ast$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Create\+Extension (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$}]{backing\+\_\+store }\end{DoxyParamCaption})}



Definition at line 248 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{249                                                                  \{}
\DoxyCodeLine{250   \textcolor{comment}{// `Heap::InYoungGeneration` during full GC with sticky markbits is generally}}
\DoxyCodeLine{251   \textcolor{comment}{// inaccurate. However, a full GC will sweep both lists and promote all to}}
\DoxyCodeLine{252   \textcolor{comment}{// old, so it doesn't matter which list initially holds the extension in this}}
\DoxyCodeLine{253   \textcolor{comment}{// case.}}
\DoxyCodeLine{254   \textcolor{keyword}{const} \textcolor{keyword}{auto} age =}
\DoxyCodeLine{255       \mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_a597d0e70459c694743e92d98a9292f92}{HeapLayout::InYoungGeneration}}(UncheckedCast<JSArrayBuffer>(*\textcolor{keyword}{this}))}
\DoxyCodeLine{256           ? \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension_adbc17f1bcc6c0a600da040333ffecb72a492ef7cfa083cd677493179d45c9961e}{ArrayBufferExtension::Age::kYoung}}}
\DoxyCodeLine{257           : \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension_adbc17f1bcc6c0a600da040333ffecb72a0aa38c28f349d65a6819e03844b73dff}{ArrayBufferExtension::Age::kOld}};}
\DoxyCodeLine{258   ArrayBufferExtension* extension =}
\DoxyCodeLine{259       \textcolor{keyword}{new} ArrayBufferExtension(std::move(backing\_store), age);}
\DoxyCodeLine{260   set\_extension(extension);}
\DoxyCodeLine{261   isolate-\/>heap()-\/>AppendArrayBufferExtension(extension);}
\DoxyCodeLine{262   \textcolor{keywordflow}{return} extension;}
\DoxyCodeLine{263 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::\+Append\+Array\+Buffer\+Extension(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::\+Heap\+Layout\+::\+In\+Young\+Generation(), v8\+::internal\+::\+Array\+Buffer\+Extension\+::k\+Old, and v8\+::internal\+::\+Array\+Buffer\+Extension\+::k\+Young.



Referenced by Setup().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff}\label{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!Detach@{Detach}}
\index{Detach@{Detach}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{Detach()}{Detach()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Detach (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer}{JSArray\+Buffer}} $>$}]{buffer,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{force\+\_\+for\+\_\+wasm\+\_\+memory = {\ttfamily \mbox{\hyperlink{flag-definitions_8h_a3a9beadc89284d3f78a7d4945b1b4d8c}{false}}},  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{key = {\ttfamily \{\}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 123 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{125                                                                   \{}
\DoxyCodeLine{126   Isolate* \textcolor{keyword}{const} isolate = \mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a05a2b08b2b0f2d5aef8dc053e2ea3d9b}{Isolate::Current}}();}
\DoxyCodeLine{127 }
\DoxyCodeLine{128   DirectHandle<Object> detach\_key(buffer-\/>detach\_key(), isolate);}
\DoxyCodeLine{129 }
\DoxyCodeLine{130   \textcolor{keywordtype}{bool} key\_mismatch = \textcolor{keyword}{false};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132   \textcolor{keywordflow}{if} (!IsUndefined(*detach\_key, isolate)) \{}
\DoxyCodeLine{133     key\_mismatch =}
\DoxyCodeLine{134         maybe\_key.is\_null() || !\mbox{\hyperlink{classv8_1_1internal_1_1Object_ad14e1354c3909454dc7216e4ab1a804c}{Object::StrictEquals}}(*maybe\_key, *detach\_key);}
\DoxyCodeLine{135   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{136     \textcolor{comment}{// Detach key is undefined; allow not passing maybe\_key but disallow passing}}
\DoxyCodeLine{137     \textcolor{comment}{// something else than undefined.}}
\DoxyCodeLine{138     key\_mismatch =}
\DoxyCodeLine{139         !maybe\_key.is\_null() \&\& !\mbox{\hyperlink{classv8_1_1internal_1_1Object_ad14e1354c3909454dc7216e4ab1a804c}{Object::StrictEquals}}(*maybe\_key, *detach\_key);}
\DoxyCodeLine{140   \}}
\DoxyCodeLine{141   \textcolor{keywordflow}{if} (key\_mismatch) \{}
\DoxyCodeLine{142     \mbox{\hyperlink{execution_2isolate_8h_a06699c63279f3987fe082aeaaab74b7e}{THROW\_NEW\_ERROR\_RETURN\_VALUE}}(}
\DoxyCodeLine{143         isolate,}
\DoxyCodeLine{144         NewTypeError(MessageTemplate::kArrayBufferDetachKeyDoesntMatch),}
\DoxyCodeLine{145         Nothing<bool>());}
\DoxyCodeLine{146   \}}
\DoxyCodeLine{147 }
\DoxyCodeLine{148   \textcolor{keywordflow}{if} (buffer-\/>was\_detached()) \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{149 }
\DoxyCodeLine{150   \textcolor{keywordflow}{if} (force\_for\_wasm\_memory) \{}
\DoxyCodeLine{151     \textcolor{comment}{// Skip the is\_detachable() check.}}
\DoxyCodeLine{152   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!buffer-\/>is\_detachable()) \{}
\DoxyCodeLine{153     \textcolor{comment}{// Not detachable, do nothing.}}
\DoxyCodeLine{154     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{155   \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   buffer-\/>DetachInternal(force\_for\_wasm\_memory, isolate);}
\DoxyCodeLine{158   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{159 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::\+Current(), v8\+::internal\+::\+Direct\+Handle$<$ T $>$\+::is\+\_\+null(), v8\+::\+Just(), v8\+::internal\+::\+Object\+::\+Strict\+Equals(), and THROW\+\_\+\+NEW\+\_\+\+ERROR\+\_\+\+RETURN\+\_\+\+VALUE.



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::\+Array\+Buffer\+Transfer(), v8\+::\+Array\+Buffer\+::\+Detach(), v8\+::internal\+::\+Wasm\+Memory\+Object\+::\+Refresh\+Buffer(), and v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a98d48c4b2a6e4e7d80037a26ed2de8ff_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a6d87c738b790ece6f5056a88c7f6e2c3}\label{classv8_1_1internal_1_1JSArrayBuffer_a6d87c738b790ece6f5056a88c7f6e2c3}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!DetachInternal@{DetachInternal}}
\index{DetachInternal@{DetachInternal}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{DetachInternal()}{DetachInternal()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Detach\+Internal (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}}]{force\+\_\+for\+\_\+wasm\+\_\+memory,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 161 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{162                                                      \{}
\DoxyCodeLine{163   ArrayBufferExtension* extension = this-\/>extension();}
\DoxyCodeLine{164 }
\DoxyCodeLine{165   \textcolor{keywordflow}{if} (extension) \{}
\DoxyCodeLine{166     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} disallow\_gc;}
\DoxyCodeLine{167     isolate-\/>heap()-\/>DetachArrayBufferExtension(extension);}
\DoxyCodeLine{168     std::shared\_ptr<BackingStore> backing\_store = \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8}{RemoveExtension}}();}
\DoxyCodeLine{169     \mbox{\hyperlink{src_2base_2logging_8h_a2c0c4cea27d0690467662bb05131b2af}{CHECK\_IMPLIES}}(force\_for\_wasm\_memory, backing\_store-\/>is\_wasm\_memory());}
\DoxyCodeLine{170   \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172   \textcolor{keywordflow}{if} (Protectors::IsArrayBufferDetachingIntact(isolate)) \{}
\DoxyCodeLine{173     Protectors::InvalidateArrayBufferDetaching(isolate);}
\DoxyCodeLine{174   \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_adee95482032a93e07f59341fed5c909f}{is\_shared}}());}
\DoxyCodeLine{177   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}{set\_backing\_store}}(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a274585e1c399e58d90a0ed65a3900084}{EmptyBackingStoreBuffer}}());}
\DoxyCodeLine{178   set\_byte\_length(0);}
\DoxyCodeLine{179   set\_was\_detached(\textcolor{keyword}{true});}
\DoxyCodeLine{180 \}}

\end{DoxyCode}


References CHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Heap\+::\+Detach\+Array\+Buffer\+Extension(), v8\+::internal\+::\+Empty\+Backing\+Store\+Buffer(), v8\+::internal\+::\+Isolate\+::heap(), v8\+::internal\+::is\+\_\+shared, Remove\+Extension(), and set\+\_\+backing\+\_\+store().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a6d87c738b790ece6f5056a88c7f6e2c3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_af30de56895f8b681720b9b8511e07941}\label{classv8_1_1internal_1_1JSArrayBuffer_af30de56895f8b681720b9b8511e07941}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!extension\_location@{extension\_location}}
\index{extension\_location@{extension\_location}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{extension\_location()}{extension\_location()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension}{Array\+Buffer\+Extension}} $\ast$$\ast$ v8\+::internal\+::\+JSArray\+Buffer\+::extension\+\_\+location (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 158 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{158                                                                \{}
\DoxyCodeLine{159   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} location = field\_address(kExtensionOffset);}
\DoxyCodeLine{160   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}ArrayBufferExtension**\textcolor{keyword}{>}(location);}
\DoxyCodeLine{161 \}}

\end{DoxyCode}


Referenced by init\+\_\+extension().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_af30de56895f8b681720b9b8511e07941_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_afba6e8e57c308d87c254448db372440a}\label{classv8_1_1internal_1_1JSArrayBuffer_afba6e8e57c308d87c254448db372440a}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GetBackingStore@{GetBackingStore}}
\index{GetBackingStore@{GetBackingStore}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GetBackingStore()}{GetBackingStore()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Backing\+Store (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 66 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{66                                                                  \{}
\DoxyCodeLine{67   \textcolor{keywordflow}{if} (!extension()) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{68   \textcolor{keywordflow}{return} extension()-\/>backing\_store();}
\DoxyCodeLine{69 \}}

\end{DoxyCode}


Referenced by Get\+Byte\+Length().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_afba6e8e57c308d87c254448db372440a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a529dcbe2a9ab7d47cb22e0d3d731bdee}\label{classv8_1_1internal_1_1JSArrayBuffer_a529dcbe2a9ab7d47cb22e0d3d731bdee}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GetBackingStoreRefForDeserialization@{GetBackingStoreRefForDeserialization}}
\index{GetBackingStoreRefForDeserialization@{GetBackingStoreRefForDeserialization}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GetBackingStoreRefForDeserialization()}{GetBackingStoreRefForDeserialization()}}
{\footnotesize\ttfamily uint32\+\_\+t v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Backing\+Store\+Ref\+For\+Deserialization (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 92 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{92                                                                    \{}
\DoxyCodeLine{93   \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(ReadField<Address>(kBackingStoreOffset));}
\DoxyCodeLine{94 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_aa07f429fe244475e3012a7f155ab53c3}\label{classv8_1_1internal_1_1JSArrayBuffer_aa07f429fe244475e3012a7f155ab53c3}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GetByteLength@{GetByteLength}}
\index{GetByteLength@{GetByteLength}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GetByteLength()}{GetByteLength()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Byte\+Length (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 71 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{71                                           \{}
\DoxyCodeLine{72   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_adee95482032a93e07f59341fed5c909f}{is\_shared}}() \&\& is\_resizable\_by\_js())) \{}
\DoxyCodeLine{73     \textcolor{comment}{// Invariant: byte\_length for GSAB is 0 (it needs to be read from the}}
\DoxyCodeLine{74     \textcolor{comment}{// BackingStore). Don't use the byte\_length getter, which DCHECKs that it's}}
\DoxyCodeLine{75     \textcolor{comment}{// not used on growable SharedArrayBuffers.}}
\DoxyCodeLine{76     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a0d9e7dd5794ee0974a5b42847cc45340}{byte\_length\_unchecked}}());}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     \textcolor{comment}{// If the byte length is read after the JSArrayBuffer object is allocated}}
\DoxyCodeLine{79     \textcolor{comment}{// but before it's attached to the backing store, GetBackingStore returns}}
\DoxyCodeLine{80     \textcolor{comment}{// nullptr. This is rare, but can happen e.g., when memory measurements}}
\DoxyCodeLine{81     \textcolor{comment}{// are enabled (via performance.measureMemory()).}}
\DoxyCodeLine{82     \textcolor{keyword}{auto} backing\_store = \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_afba6e8e57c308d87c254448db372440a}{GetBackingStore}}();}
\DoxyCodeLine{83     \textcolor{keywordflow}{if} (!backing\_store) \{}
\DoxyCodeLine{84       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{85     \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{keywordflow}{return} backing\_store-\/>byte\_length(std::memory\_order\_seq\_cst);}
\DoxyCodeLine{88   \}}
\DoxyCodeLine{89   \textcolor{keywordflow}{return} byte\_length();}
\DoxyCodeLine{90 \}}

\end{DoxyCode}


References byte\+\_\+length\+\_\+unchecked(), DCHECK\+\_\+\+EQ, Get\+Backing\+Store(), v8\+::internal\+::is\+\_\+shared, and V8\+\_\+\+UNLIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_aa07f429fe244475e3012a7f155ab53c3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_ab0647a5c412793b4ff6651cc366bf03b}\label{classv8_1_1internal_1_1JSArrayBuffer_ab0647a5c412793b4ff6651cc366bf03b}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GetResizableBackingStorePageConfiguration@{GetResizableBackingStorePageConfiguration}}
\index{GetResizableBackingStorePageConfiguration@{GetResizableBackingStorePageConfiguration}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GetResizableBackingStorePageConfiguration()}{GetResizableBackingStorePageConfiguration()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Resizable\+Backing\+Store\+Page\+Configuration (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{byte\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+byte\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_adbf2c933630f2f4bb419ce1ba04ce760}{Should\+Throw}}}]{should\+\_\+throw,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{page\+\_\+size,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{initial\+\_\+pages,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{max\+\_\+pages }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 196 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{199                        \{}
\DoxyCodeLine{200   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(page\_size);}
\DoxyCodeLine{201   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(initial\_pages);}
\DoxyCodeLine{202   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(max\_pages);}
\DoxyCodeLine{203 }
\DoxyCodeLine{204   *page\_size = \mbox{\hyperlink{namespacev8_1_1internal_a9f5507dc03f0b35f38b119fc3285586a}{AllocatePageSize}}();}
\DoxyCodeLine{205 }
\DoxyCodeLine{206   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a6a1f3d6b7cd6594565b3bd1b98293248}{RoundUpToPageSize}}(byte\_length, *page\_size, \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{JSArrayBuffer::kMaxByteLength}},}
\DoxyCodeLine{207                          initial\_pages)) \{}
\DoxyCodeLine{208     \textcolor{keywordflow}{if} (should\_throw == \mbox{\hyperlink{namespacev8_1_1internal_adbf2c933630f2f4bb419ce1ba04ce760a4b0c7b00af69f6f81914acaa3a9849ee}{kDontThrow}}) \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{209     \mbox{\hyperlink{execution_2isolate_8h_a06699c63279f3987fe082aeaaab74b7e}{THROW\_NEW\_ERROR\_RETURN\_VALUE}}(}
\DoxyCodeLine{210         isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferLength),}
\DoxyCodeLine{211         Nothing<bool>());}
\DoxyCodeLine{212   \}}
\DoxyCodeLine{213 }
\DoxyCodeLine{214   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a6a1f3d6b7cd6594565b3bd1b98293248}{RoundUpToPageSize}}(max\_byte\_length, *page\_size,}
\DoxyCodeLine{215                          \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{JSArrayBuffer::kMaxByteLength}}, max\_pages)) \{}
\DoxyCodeLine{216     \textcolor{keywordflow}{if} (should\_throw == \mbox{\hyperlink{namespacev8_1_1internal_adbf2c933630f2f4bb419ce1ba04ce760a4b0c7b00af69f6f81914acaa3a9849ee}{kDontThrow}}) \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{217     \mbox{\hyperlink{execution_2isolate_8h_a06699c63279f3987fe082aeaaab74b7e}{THROW\_NEW\_ERROR\_RETURN\_VALUE}}(}
\DoxyCodeLine{218         isolate, NewRangeError(MessageTemplate::kInvalidArrayBufferMaxLength),}
\DoxyCodeLine{219         Nothing<bool>());}
\DoxyCodeLine{220   \}}
\DoxyCodeLine{221 }
\DoxyCodeLine{222   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{223 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Allocate\+Page\+Size(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::\+Just(), v8\+::internal\+::k\+Dont\+Throw, k\+Max\+Byte\+Length, v8\+::internal\+::\+Round\+Up\+To\+Page\+Size(), and THROW\+\_\+\+NEW\+\_\+\+ERROR\+\_\+\+RETURN\+\_\+\+VALUE.



Referenced by v8\+::internal\+::\+Factory\+::\+New\+JSArray\+Buffer\+And\+Backing\+Store(), and v8\+::\+Array\+Buffer\+::\+New\+Resizable\+Backing\+Store().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ab0647a5c412793b4ff6651cc366bf03b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ab0647a5c412793b4ff6651cc366bf03b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_ae056f3ce3416ba853b02bb150728a05d}\label{classv8_1_1internal_1_1JSArrayBuffer_ae056f3ce3416ba853b02bb150728a05d}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GetResizableBackingStorePageConfigurationImpl@{GetResizableBackingStorePageConfigurationImpl}}
\index{GetResizableBackingStorePageConfigurationImpl@{GetResizableBackingStorePageConfigurationImpl}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GetResizableBackingStorePageConfigurationImpl()}{GetResizableBackingStorePageConfigurationImpl()}}
{\footnotesize\ttfamily std\+::optional$<$ \mbox{\hyperlink{namespacev8_1_1internal_a1c7888272df599e45fcab531e38f9523}{Message\+Template}} $>$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Get\+Resizable\+Backing\+Store\+Page\+Configuration\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{byte\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+byte\+\_\+length,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{page\+\_\+size,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{initial\+\_\+pages,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $\ast$}]{max\+\_\+pages }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 227 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{229                                                                  \{}
\DoxyCodeLine{230   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(page\_size);}
\DoxyCodeLine{231   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(initial\_pages);}
\DoxyCodeLine{232   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(max\_pages);}
\DoxyCodeLine{233 }
\DoxyCodeLine{234   *page\_size = \mbox{\hyperlink{namespacev8_1_1internal_a9f5507dc03f0b35f38b119fc3285586a}{AllocatePageSize}}();}
\DoxyCodeLine{235 }
\DoxyCodeLine{236   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a6a1f3d6b7cd6594565b3bd1b98293248}{RoundUpToPageSize}}(byte\_length, *page\_size, \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{JSArrayBuffer::kMaxByteLength}},}
\DoxyCodeLine{237                          initial\_pages)) \{}
\DoxyCodeLine{238     \textcolor{keywordflow}{return} MessageTemplate::kInvalidArrayBufferLength;}
\DoxyCodeLine{239   \}}
\DoxyCodeLine{240 }
\DoxyCodeLine{241   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_a6a1f3d6b7cd6594565b3bd1b98293248}{RoundUpToPageSize}}(max\_byte\_length, *page\_size,}
\DoxyCodeLine{242                          \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{JSArrayBuffer::kMaxByteLength}}, max\_pages)) \{}
\DoxyCodeLine{243     \textcolor{keywordflow}{return} MessageTemplate::kInvalidArrayBufferMaxLength;}
\DoxyCodeLine{244   \}}
\DoxyCodeLine{245   \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{246 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Allocate\+Page\+Size(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, k\+Max\+Byte\+Length, and v8\+::internal\+::\+Round\+Up\+To\+Page\+Size().



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::\+Try\+Allocate\+Backing\+Store().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ae056f3ce3416ba853b02bb150728a05d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ae056f3ce3416ba853b02bb150728a05d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a91221f9e7b7b7d00903754ee85ad1328}\label{classv8_1_1internal_1_1JSArrayBuffer_a91221f9e7b7b7d00903754ee85ad1328}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!GsabByteLength@{GsabByteLength}}
\index{GsabByteLength@{GsabByteLength}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{GsabByteLength()}{GsabByteLength()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+JSArray\+Buffer\+::\+Gsab\+Byte\+Length (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{raw\+\_\+array\+\_\+buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 182 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{183                                                                \{}
\DoxyCodeLine{184   \textcolor{comment}{// TODO(v8:11111): Cache the last seen length in JSArrayBuffer and use it}}
\DoxyCodeLine{185   \textcolor{comment}{// in bounds checks to minimize the need for calling this function.}}
\DoxyCodeLine{186   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{187   DisallowJavascriptExecution no\_js(isolate);}
\DoxyCodeLine{188   Tagged<JSArrayBuffer> buffer =}
\DoxyCodeLine{189       Cast<JSArrayBuffer>(\mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}}(raw\_array\_buffer));}
\DoxyCodeLine{190   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(buffer-\/>is\_resizable\_by\_js());}
\DoxyCodeLine{191   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(buffer-\/>is\_shared());}
\DoxyCodeLine{192   \textcolor{keywordflow}{return} buffer-\/>GetBackingStore()-\/>byte\_length(std::memory\_order\_seq\_cst);}
\DoxyCodeLine{193 \}}

\end{DoxyCode}


References CHECK, and v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc.

\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87}\label{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!init\_extension@{init\_extension}}
\index{init\_extension@{init\_extension}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{init\_extension()}{init\_extension()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::init\+\_\+extension (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 100 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{100                                    \{}
\DoxyCodeLine{101 \textcolor{preprocessor}{\#if V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{102   \textcolor{comment}{// The extension field is lazily-\/initialized, so set it to null initially.}}
\DoxyCodeLine{103   \mbox{\hyperlink{classv8_1_1base_1_1AsAtomicImpl_a8222a16fd1a4535ff592b2ae0e4762fa}{base::AsAtomic32::Release\_Store}}(extension\_handle\_location(),}
\DoxyCodeLine{104                                   \mbox{\hyperlink{namespacev8_1_1internal_a7d9d03c72a6418e2aba25f8a52114027}{kNullExternalPointerHandle}});}
\DoxyCodeLine{105 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{106   \mbox{\hyperlink{classv8_1_1base_1_1AsAtomicImpl_a8222a16fd1a4535ff592b2ae0e4762fa}{base::AsAtomicPointer::Release\_Store}}(\mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_af30de56895f8b681720b9b8511e07941}{extension\_location}}(), \textcolor{keyword}{nullptr});}
\DoxyCodeLine{107 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_COMPRESS\_POINTERS}}
\DoxyCodeLine{108 \}}

\end{DoxyCode}


References extension\+\_\+location(), v8\+::internal\+::k\+Null\+External\+Pointer\+Handle, and v8\+::base\+::\+As\+Atomic\+Impl$<$ TAtomic\+Storage\+Type $>$\+::\+Release\+\_\+\+Store().



Referenced by Setup().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a129db39f3ca66c0d2adbf66bda1bf7c6}\label{classv8_1_1internal_1_1JSArrayBuffer_a129db39f3ca66c0d2adbf66bda1bf7c6}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!MarkExtension@{MarkExtension}}
\index{MarkExtension@{MarkExtension}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{MarkExtension()}{MarkExtension()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Mark\+Extension (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 275 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{275                                   \{}
\DoxyCodeLine{276   ArrayBufferExtension* extension = this-\/>extension();}
\DoxyCodeLine{277   \textcolor{keywordflow}{if} (extension) \{}
\DoxyCodeLine{278     extension-\/>Mark();}
\DoxyCodeLine{279   \}}
\DoxyCodeLine{280 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Array\+Buffer\+Extension\+::\+Mark().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a129db39f3ca66c0d2adbf66bda1bf7c6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8}\label{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!RemoveExtension@{RemoveExtension}}
\index{RemoveExtension@{RemoveExtension}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{RemoveExtension()}{RemoveExtension()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$ v8\+::internal\+::\+JSArray\+Buffer\+::\+Remove\+Extension (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 265 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{265                                                            \{}
\DoxyCodeLine{266   ArrayBufferExtension* extension = this-\/>extension();}
\DoxyCodeLine{267   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(extension);}
\DoxyCodeLine{268   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = extension-\/>RemoveBackingStore();}
\DoxyCodeLine{269   \textcolor{comment}{// Remove pointer to extension such that the next GC will free it}}
\DoxyCodeLine{270   \textcolor{comment}{// automatically.}}
\DoxyCodeLine{271   set\_extension(\textcolor{keyword}{nullptr});}
\DoxyCodeLine{272   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{273 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::\+Array\+Buffer\+Extension\+::\+Remove\+Backing\+Store(), and v8\+::base\+::internal\+::result.



Referenced by Detach\+Internal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a1470b51f909ca42a22f70f99605c7ec8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}\label{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!set\_backing\_store@{set\_backing\_store}}
\index{set\_backing\_store@{set\_backing\_store}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{set\_backing\_store()}{set\_backing\_store()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::set\+\_\+backing\+\_\+store (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{void $\ast$}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 61 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                                                    \{}
\DoxyCodeLine{62   \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} addr = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_ac1a33b5fd9af1653d346746cdb5c1ac0}{value}});}
\DoxyCodeLine{63   \mbox{\hyperlink{namespacev8_1_1internal_a47c91e58cb46c7e3420411a8be6c52ee}{WriteSandboxedPointerField}}(kBackingStoreOffset, isolate, addr);}
\DoxyCodeLine{64 \}}

\end{DoxyCode}


References v8\+::internal\+::value, and v8\+::internal\+::\+Write\+Sandboxed\+Pointer\+Field().



Referenced by Detach\+Internal(), and Setup().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a4af4d99253e151b6a891c2176d9b0274}\label{classv8_1_1internal_1_1JSArrayBuffer_a4af4d99253e151b6a891c2176d9b0274}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!SetBackingStoreRefForSerialization@{SetBackingStoreRefForSerialization}}
\index{SetBackingStoreRefForSerialization@{SetBackingStoreRefForSerialization}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{SetBackingStoreRefForSerialization()}{SetBackingStoreRefForSerialization()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Set\+Backing\+Store\+Ref\+For\+Serialization (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{ref }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 96 of file js-\/array-\/buffer-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{96                                                                    \{}
\DoxyCodeLine{97   WriteField<Address>(kBackingStoreOffset, \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(ref));}
\DoxyCodeLine{98 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a5a05ea65e1b7c7912c362a21a3f3fda0}\label{classv8_1_1internal_1_1JSArrayBuffer_a5a05ea65e1b7c7912c362a21a3f3fda0}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!Setup@{Setup}}
\index{Setup@{Setup}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{Setup()}{Setup()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Setup (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160}{Shared\+Flag}}}]{shared,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348}{Resizable\+Flag}}}]{resizable,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackingStore}{Backing\+Store}} $>$}]{backing\+\_\+store,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 47 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                                             \{}
\DoxyCodeLine{50   \textcolor{keyword}{auto} finish\_setup = [shared, isolate]() \{}
\DoxyCodeLine{51     \textcolor{comment}{// Count usage may lead to a blink allocation, through the callback, which}}
\DoxyCodeLine{52     \textcolor{comment}{// may trigger a GC. It is important to delay this, until the array buffer}}
\DoxyCodeLine{53     \textcolor{comment}{// is properly initialized.}}
\DoxyCodeLine{54     \textcolor{keywordflow}{if} (shared == \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16}{SharedFlag::kShared}}) \{}
\DoxyCodeLine{55       isolate-\/>CountUsage(}
\DoxyCodeLine{56           v8::Isolate::UseCounterFeature::kSharedArrayBufferConstructed);}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58   \};}
\DoxyCodeLine{59   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a947dcf8e5b9cb2273d7330e8ba9746e7}{clear\_padding}}();}
\DoxyCodeLine{60   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a46fee24f1912e006ff6e35a3f988bf87}{init\_extension}}();}
\DoxyCodeLine{61   set\_detach\_key(ReadOnlyRoots(isolate).undefined\_value());}
\DoxyCodeLine{62   set\_bit\_field(0);}
\DoxyCodeLine{63   set\_is\_shared(shared == \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16}{SharedFlag::kShared}});}
\DoxyCodeLine{64   set\_is\_resizable\_by\_js(resizable == \mbox{\hyperlink{namespacev8_1_1internal_ab10416aabce855093f2c91151df24348a791e8c43bffb7c8241a98ff4a7f315f0}{ResizableFlag::kResizable}});}
\DoxyCodeLine{65   set\_is\_detachable(shared != \mbox{\hyperlink{namespacev8_1_1internal_a680ace1d3e86dae2df93867132a3c160a767e1337acb2aa20d7ce4e903a75ca16}{SharedFlag::kShared}});}
\DoxyCodeLine{66   SetupLazilyInitializedCppHeapPointerField(}
\DoxyCodeLine{67       JSAPIObjectWithEmbedderSlots::kCppHeapWrappableOffset);}
\DoxyCodeLine{68   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{classv8_1_1ArrayBuffer_a283a36cbfa2ae71b2fc2a876cac7b792}{v8::ArrayBuffer::kEmbedderFieldCount}}; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{69     SetEmbedderField(\mbox{\hyperlink{namespacev8_1_1internal}{i}}, \mbox{\hyperlink{classv8_1_1internal_1_1Smi_a5386e0cc44bcfd6a13c8481b95f5652f}{Smi::zero}}());}
\DoxyCodeLine{70   \}}
\DoxyCodeLine{71   \textcolor{keywordflow}{if} (!backing\_store) \{}
\DoxyCodeLine{72     \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}{set\_backing\_store}}(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a274585e1c399e58d90a0ed65a3900084}{EmptyBackingStoreBuffer}}());}
\DoxyCodeLine{73     set\_byte\_length(0);}
\DoxyCodeLine{74     set\_max\_byte\_length(0);}
\DoxyCodeLine{75     finish\_setup();}
\DoxyCodeLine{76     \textcolor{keywordflow}{return};}
\DoxyCodeLine{77   \}}
\DoxyCodeLine{78   \textcolor{comment}{// Rest of the code here deals with attaching the BackingStore.}}
\DoxyCodeLine{79   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_adee95482032a93e07f59341fed5c909f}{is\_shared}}(), backing\_store-\/>is\_shared());}
\DoxyCodeLine{80   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}((is\_resizable\_by\_js() == backing\_store-\/>is\_resizable\_by\_js()) ||}
\DoxyCodeLine{81          (backing\_store-\/>is\_wasm\_memory() \&\& \mbox{\hyperlink{namespacev8_1_1internal_adee95482032a93e07f59341fed5c909f}{is\_shared}}()));}
\DoxyCodeLine{82   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(}
\DoxyCodeLine{83       !backing\_store-\/>is\_wasm\_memory() \&\& !backing\_store-\/>is\_resizable\_by\_js(),}
\DoxyCodeLine{84       backing\_store-\/>byte\_length() == backing\_store-\/>max\_byte\_length());}
\DoxyCodeLine{85 }
\DoxyCodeLine{86   \textcolor{keywordtype}{void}* backing\_store\_buffer = backing\_store-\/>buffer\_start();}
\DoxyCodeLine{87   \textcolor{comment}{// Wasm memory always needs a backing store; this is guaranteed by reserving}}
\DoxyCodeLine{88   \textcolor{comment}{// at least one page for the BackingStore (so \{IsEmpty()\} is always false).}}
\DoxyCodeLine{89   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(backing\_store-\/>is\_wasm\_memory(), !backing\_store-\/>IsEmpty());}
\DoxyCodeLine{90   \textcolor{comment}{// Non-\/empty backing stores must start at a non-\/null pointer.}}
\DoxyCodeLine{91   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(backing\_store\_buffer == \mbox{\hyperlink{namespacev8_1_1internal_a274585e1c399e58d90a0ed65a3900084}{EmptyBackingStoreBuffer}}(),}
\DoxyCodeLine{92                  backing\_store-\/>IsEmpty());}
\DoxyCodeLine{93   \textcolor{comment}{// Empty backing stores can be backed by an empty buffer pointer or by an}}
\DoxyCodeLine{94   \textcolor{comment}{// externally provided pointer: Either is acceptable. However, the pointer}}
\DoxyCodeLine{95   \textcolor{comment}{// must always point into the sandbox, so nullptr is not acceptable if the}}
\DoxyCodeLine{96   \textcolor{comment}{// sandbox is enabled.}}
\DoxyCodeLine{97   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{common_2globals_8h_a9fbe5720e523e0d3c9202480f33405d7}{V8\_ENABLE\_SANDBOX\_BOOL}}, backing\_store\_buffer != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{98   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_ac80b4ff3d8d0d8c8468bc8880d7ea020}{set\_backing\_store}}(isolate, backing\_store\_buffer);}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   \textcolor{comment}{// GSABs need to read their byte\_length from the BackingStore. Maintain the}}
\DoxyCodeLine{101   \textcolor{comment}{// invariant that their byte\_length field is always 0.}}
\DoxyCodeLine{102   \textcolor{keyword}{auto} byte\_len =}
\DoxyCodeLine{103       (\mbox{\hyperlink{namespacev8_1_1internal_adee95482032a93e07f59341fed5c909f}{is\_shared}}() \&\& is\_resizable\_by\_js()) ? 0 : backing\_store-\/>byte\_length();}
\DoxyCodeLine{104   \mbox{\hyperlink{src_2base_2logging_8h_a56e883b55c80205b4d1727679c68b2bd}{CHECK\_LE}}(backing\_store-\/>byte\_length(), \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}{kMaxByteLength}});}
\DoxyCodeLine{105   set\_byte\_length(byte\_len);}
\DoxyCodeLine{106 }
\DoxyCodeLine{107   \textcolor{comment}{// For Wasm memories, it is possible for the backing store maximum to be}}
\DoxyCodeLine{108   \textcolor{comment}{// different from the JSArrayBuffer maximum. The maximum pages allowed on a}}
\DoxyCodeLine{109   \textcolor{comment}{// Wasm memory are tracked on the Wasm memory object, and not the}}
\DoxyCodeLine{110   \textcolor{comment}{// JSArrayBuffer associated with it.}}
\DoxyCodeLine{111   \textcolor{keyword}{auto} max\_byte\_len = is\_resizable\_by\_js() ? backing\_store-\/>max\_byte\_length()}
\DoxyCodeLine{112                                            : backing\_store-\/>byte\_length();}
\DoxyCodeLine{113   set\_max\_byte\_length(max\_byte\_len);}
\DoxyCodeLine{114 }
\DoxyCodeLine{115   \textcolor{keywordflow}{if} (backing\_store-\/>is\_wasm\_memory()) \{}
\DoxyCodeLine{116     set\_is\_detachable(\textcolor{keyword}{false});}
\DoxyCodeLine{117   \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119   \mbox{\hyperlink{classv8_1_1internal_1_1JSArrayBuffer_a2bf8d8f5bb863a59ee4197a7510a0195}{CreateExtension}}(isolate, std::move(backing\_store));}
\DoxyCodeLine{120   finish\_setup();}
\DoxyCodeLine{121 \}}

\end{DoxyCode}


References CHECK\+\_\+\+LE, clear\+\_\+padding(), v8\+::internal\+::\+Isolate\+::\+Count\+Usage(), Create\+Extension(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Empty\+Backing\+Store\+Buffer(), init\+\_\+extension(), v8\+::internal\+::is\+\_\+shared, v8\+::\+Array\+Buffer\+::k\+Embedder\+Field\+Count, k\+Max\+Byte\+Length, v8\+::internal\+::k\+Resizable, v8\+::internal\+::k\+Shared, set\+\_\+backing\+\_\+store(), V8\+\_\+\+ENABLE\+\_\+\+SANDBOX\+\_\+\+BOOL, and v8\+::internal\+::\+Smi\+::zero().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_a5a05ea65e1b7c7912c362a21a3f3fda0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_aaad96b02bd2092e33276c6474166213c}\label{classv8_1_1internal_1_1JSArrayBuffer_aaad96b02bd2092e33276c6474166213c}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!YoungMarkExtension@{YoungMarkExtension}}
\index{YoungMarkExtension@{YoungMarkExtension}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{YoungMarkExtension()}{YoungMarkExtension()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Young\+Mark\+Extension (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 282 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{282                                        \{}
\DoxyCodeLine{283   ArrayBufferExtension* extension = this-\/>extension();}
\DoxyCodeLine{284   \textcolor{keywordflow}{if} (extension) \{}
\DoxyCodeLine{285     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1ArrayBufferExtension_adbc17f1bcc6c0a600da040333ffecb72a492ef7cfa083cd677493179d45c9961e}{ArrayBufferExtension::Age::kYoung}}, extension-\/>age());}
\DoxyCodeLine{286     extension-\/>YoungMark();}
\DoxyCodeLine{287   \}}
\DoxyCodeLine{288 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Array\+Buffer\+Extension\+::age(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Array\+Buffer\+Extension\+::k\+Young, and v8\+::internal\+::\+Array\+Buffer\+Extension\+::\+Young\+Mark().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_aaad96b02bd2092e33276c6474166213c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_afe2d8d43be82e4aa46488e385d97902e}\label{classv8_1_1internal_1_1JSArrayBuffer_afe2d8d43be82e4aa46488e385d97902e}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!YoungMarkExtensionPromoted@{YoungMarkExtensionPromoted}}
\index{YoungMarkExtensionPromoted@{YoungMarkExtensionPromoted}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{YoungMarkExtensionPromoted()}{YoungMarkExtensionPromoted()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+JSArray\+Buffer\+::\+Young\+Mark\+Extension\+Promoted (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 290 of file js-\/array-\/buffer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{290                                                \{}
\DoxyCodeLine{291   ArrayBufferExtension* extension = this-\/>extension();}
\DoxyCodeLine{292   \textcolor{keywordflow}{if} (extension) \{}
\DoxyCodeLine{293     extension-\/>YoungMarkPromoted();}
\DoxyCodeLine{294   \}}
\DoxyCodeLine{295 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Array\+Buffer\+Extension\+::\+Young\+Mark\+Promoted().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSArrayBuffer_afe2d8d43be82e4aa46488e385d97902e_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_ab60febf4c8d43dcf4c46a9682eecd5fd}\label{classv8_1_1internal_1_1JSArrayBuffer_ab60febf4c8d43dcf4c46a9682eecd5fd}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!kContainsEmbedderFields@{kContainsEmbedderFields}}
\index{kContainsEmbedderFields@{kContainsEmbedderFields}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{kContainsEmbedderFields}{kContainsEmbedderFields}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+JSArray\+Buffer\+::k\+Contains\+Embedder\+Fields\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{      \mbox{\hyperlink{classv8_1_1ArrayBuffer_a283a36cbfa2ae71b2fc2a876cac7b792}{v8::ArrayBuffer::kEmbedderFieldCount}} > 0}

\end{DoxyCode}


Definition at line 166 of file js-\/array-\/buffer.\+h.



Referenced by v8\+::internal\+::\+JSArray\+Buffer\+::\+Body\+Descriptor\+::\+Iterate\+Body().

\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}\label{classv8_1_1internal_1_1JSArrayBuffer_aaa9641b33f3b26b38930cbb552f8770c}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!kMaxByteLength@{kMaxByteLength}}
\index{kMaxByteLength@{kMaxByteLength}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{kMaxByteLength}{kMaxByteLength}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+JSArray\+Buffer\+::k\+Max\+Byte\+Length = \mbox{\hyperlink{namespacev8_1_1internal_a169aca39c9a05f77900ed76a775a4622}{k\+Max\+Safe\+Integer}}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 38 of file js-\/array-\/buffer.\+h.



Referenced by v8\+::\+Isolate\+::\+Adjust\+Amount\+Of\+External\+Allocated\+Memory\+Impl(), v8\+::internal\+::\+Heap\+::\+Allocate\+External\+Backing\+Store(), v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::\+Array\+Buffer\+Transfer(), v8\+::internal\+::\+Runtime\+::\+Get\+Internal\+Properties(), Get\+Resizable\+Backing\+Store\+Page\+Configuration(), Get\+Resizable\+Backing\+Store\+Page\+Configuration\+Impl(), v8\+::internal\+::\+Backing\+Store\+::\+Grow\+In\+Place(), v8\+::internal\+::wasm\+::max\+\_\+mem32\+\_\+pages(), v8\+::internal\+::wasm\+::max\+\_\+mem64\+\_\+pages(), v8\+::\+Array\+Buffer\+::\+New\+Backing\+Store(), v8\+::\+Shared\+Array\+Buffer\+::\+New\+Backing\+Store(), v8\+::\+Array\+Buffer\+::\+New\+Resizable\+Backing\+Store(), v8\+::internal\+::\+Backing\+Store\+::\+Resize\+In\+Place(), Setup(), and v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/arraybuffer.\+cc\}\+::\+Try\+Allocate\+Backing\+Store().

\mbox{\Hypertarget{classv8_1_1internal_1_1JSArrayBuffer_a8eb4edf51c945dbaf9b4898a78d9fb33}\label{classv8_1_1internal_1_1JSArrayBuffer_a8eb4edf51c945dbaf9b4898a78d9fb33}} 
\index{v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}!kSizeWithEmbedderFields@{kSizeWithEmbedderFields}}
\index{kSizeWithEmbedderFields@{kSizeWithEmbedderFields}!v8::internal::JSArrayBuffer@{v8::internal::JSArrayBuffer}}
\doxysubsubsection{\texorpdfstring{kSizeWithEmbedderFields}{kSizeWithEmbedderFields}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+JSArray\+Buffer\+::k\+Size\+With\+Embedder\+Fields\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{      kHeaderSize +}
\DoxyCodeLine{      \mbox{\hyperlink{classv8_1_1ArrayBuffer_a283a36cbfa2ae71b2fc2a876cac7b792}{v8::ArrayBuffer::kEmbedderFieldCount}} * \mbox{\hyperlink{namespacev8_1_1internal_a3f0d650c7e8c48dbabf04b36f7a03ba5}{kEmbedderDataSlotSize}}}

\end{DoxyCode}


Definition at line 163 of file js-\/array-\/buffer.\+h.



Referenced by v8\+::internal\+::\+Typed\+Array\+Builtins\+Assembler\+::\+Allocate\+Empty\+On\+Heap\+Buffer(), and v8\+::internal\+::\+Genesis\+::\+Create\+Array\+Buffer().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{js-array-buffer_8h}{js-\/array-\/buffer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{js-array-buffer-inl_8h}{js-\/array-\/buffer-\/inl.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{js-array-buffer_8cc}{js-\/array-\/buffer.\+cc}}\end{DoxyCompactItemize}
