\hypertarget{classv8_1_1internal_1_1MemoryController}{}\doxysection{v8\+::internal\+::Memory\+Controller$<$ Trait $>$ Class Template Reference}
\label{classv8_1_1internal_1_1MemoryController}\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}


{\ttfamily \#include $<$heap-\/controller.\+h$>$}



Inheritance diagram for v8\+::internal\+::Memory\+Controller$<$ Trait $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{classv8_1_1internal_1_1MemoryController__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Memory\+Controller$<$ Trait $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{classv8_1_1internal_1_1MemoryController__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a4e89147ea90ad613f53e3e6944f5a64d}{Minimum\+Allocation\+Limit\+Growing\+Step}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}} growing\+\_\+mode)
\item 
static double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a154dc89529430039990be16d61d3bce5}{Growing\+Factor}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a761e4e5929b1553283fd6a532822bb17}{heap}}, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+heap\+\_\+size, std\+::optional$<$ double $>$ gc\+\_\+speed, double mutator\+\_\+speed, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}} growing\+\_\+mode)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_ab589c4eeb07600fb613b6116cf71eb11}{Bound\+Allocation\+Limit}} (\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$\mbox{\hyperlink{flag-definitions_8h_a761e4e5929b1553283fd6a532822bb17}{heap}}, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} current\+\_\+size, uint64\+\_\+t limit, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} min\+\_\+size, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+size, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} new\+\_\+space\+\_\+capacity, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}} growing\+\_\+mode)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a6b085708eec6f320b592805a29027205}{FRIEND\+\_\+\+TEST}} (Memory\+Controller\+Test, Heap\+Growing\+Factor)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a0a2941e391759fd6c8c67877de193c2b}{FRIEND\+\_\+\+TEST}} (Memory\+Controller\+Test, Max\+Heap\+Growing\+Factor)
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_ab8a63addd2ba946a532141f108b98bcc}{Max\+Growing\+Factor}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} max\+\_\+heap\+\_\+size)
\item 
static double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a1a372ad1c75c6d52ec519c97be8a0912}{Dynamic\+Growing\+Factor}} (std\+::optional$<$ double $>$ gc\+\_\+speed, double mutator\+\_\+speed, double max\+\_\+factor)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename Trait$>$\newline
class v8\+::internal\+::\+Memory\+Controller$<$ Trait $>$}



Definition at line 32 of file heap-\/controller.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_ab589c4eeb07600fb613b6116cf71eb11}\label{classv8_1_1internal_1_1MemoryController_ab589c4eeb07600fb613b6116cf71eb11}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!BoundAllocationLimit@{BoundAllocationLimit}}
\index{BoundAllocationLimit@{BoundAllocationLimit}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{BoundAllocationLimit()}{BoundAllocationLimit()}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::Bound\+Allocation\+Limit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{current\+\_\+size,  }\item[{uint64\+\_\+t}]{limit,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{min\+\_\+size,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+size,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{new\+\_\+space\+\_\+capacity,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}}}]{growing\+\_\+mode }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 141 of file heap-\/controller.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{144                                       \{}
\DoxyCodeLine{145   \mbox{\hyperlink{src_2base_2logging_8h_a45a0717f39b7011dc823c1fe7b83e6fc}{CHECK\_LT}}(0, current\_size);}
\DoxyCodeLine{146   limit = std::max(limit, \textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(current\_size) +}
\DoxyCodeLine{147                               \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a4e89147ea90ad613f53e3e6944f5a64d}{MinimumAllocationLimitGrowingStep}}(growing\_mode)) +}
\DoxyCodeLine{148           new\_space\_capacity;}
\DoxyCodeLine{149   \textcolor{keyword}{const} uint64\_t halfway\_to\_the\_max =}
\DoxyCodeLine{150       (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(current\_size) + max\_size) / 2;}
\DoxyCodeLine{151   \textcolor{keyword}{const} uint64\_t limit\_or\_halfway =}
\DoxyCodeLine{152       std::min<uint64\_t>(limit, halfway\_to\_the\_max);}
\DoxyCodeLine{153   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{154       \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(std::max<uint64\_t>(limit\_or\_halfway, min\_size));}
\DoxyCodeLine{155   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_gc\_verbose)) \{}
\DoxyCodeLine{156     \mbox{\hyperlink{classv8_1_1internal_1_1Isolate_aa4fc16731ddc7000e4eb0dfe81392a38}{Isolate::FromHeap}}(\mbox{\hyperlink{namespaceheap}{heap}})-\/>PrintWithTimestamp(}
\DoxyCodeLine{157         \textcolor{stringliteral}{"{}[\%s] Limit: old size: \%zu KB, new limit: \%zu KB\(\backslash\)n"{}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02ic_8cc_03_a4631bacb0230cb3812dd449094232bc8ab29ee0f200b80e06ab759be550b518d0}{Trait::kName}},}
\DoxyCodeLine{158         current\_size / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}}, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} / \mbox{\hyperlink{namespacev8_1_1internal_a93b2e7c72fa0878021b495b6f3cec820}{KB}});}
\DoxyCodeLine{159   \}}
\DoxyCodeLine{160   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{161 \}}

\end{DoxyCode}


References CHECK\+\_\+\+LT, v8\+::internal\+::\+Isolate\+::\+From\+Heap(), v8\+::internal\+::\+KB, v8\+::internal\+::anonymous\+\_\+namespace\{ic.\+cc\}\+::k\+Name, v8\+::base\+::internal\+::result, v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.



Referenced by v8\+::internal\+::\+Heap\+::\+Compute\+New\+Allocation\+Limits().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_ab589c4eeb07600fb613b6116cf71eb11_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_ab589c4eeb07600fb613b6116cf71eb11_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_a1a372ad1c75c6d52ec519c97be8a0912}\label{classv8_1_1internal_1_1MemoryController_a1a372ad1c75c6d52ec519c97be8a0912}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!DynamicGrowingFactor@{DynamicGrowingFactor}}
\index{DynamicGrowingFactor@{DynamicGrowingFactor}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{DynamicGrowingFactor()}{DynamicGrowingFactor()}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::Dynamic\+Growing\+Factor (\begin{DoxyParamCaption}\item[{std\+::optional$<$ double $>$}]{gc\+\_\+speed,  }\item[{double}]{mutator\+\_\+speed,  }\item[{double}]{max\+\_\+factor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 110 of file heap-\/controller.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{111                                                                            \{}
\DoxyCodeLine{112   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(Trait::kMinGrowingFactor, max\_factor);}
\DoxyCodeLine{113   \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(Trait::kMaxGrowingFactor, max\_factor);}
\DoxyCodeLine{114   \textcolor{keywordflow}{if} (!gc\_speed || mutator\_speed == 0) \textcolor{keywordflow}{return} max\_factor;}
\DoxyCodeLine{115 }
\DoxyCodeLine{116   \textcolor{keyword}{const} \textcolor{keywordtype}{double} speed\_ratio = *gc\_speed / mutator\_speed;}
\DoxyCodeLine{117 }
\DoxyCodeLine{118   \textcolor{keyword}{const} \textcolor{keywordtype}{double} a = speed\_ratio * (1 -\/ Trait::kTargetMutatorUtilization);}
\DoxyCodeLine{119   \textcolor{keyword}{const} \textcolor{keywordtype}{double} b = speed\_ratio * (1 -\/ Trait::kTargetMutatorUtilization) -\/}
\DoxyCodeLine{120                    Trait::kTargetMutatorUtilization;}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   \textcolor{comment}{// The factor is a / b, but we need to check for small b first.}}
\DoxyCodeLine{123   \textcolor{keywordtype}{double} factor = (a < b * max\_factor) ? a / b : max\_factor;}
\DoxyCodeLine{124   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(factor, max\_factor);}
\DoxyCodeLine{125   factor = std::max(\{factor, Trait::kMinGrowingFactor\});}
\DoxyCodeLine{126   \textcolor{keywordflow}{return} factor;}
\DoxyCodeLine{127 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+GE, and DCHECK\+\_\+\+LE.

\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_a6b085708eec6f320b592805a29027205}\label{classv8_1_1internal_1_1MemoryController_a6b085708eec6f320b592805a29027205}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!FRIEND\_TEST@{FRIEND\_TEST}}
\index{FRIEND\_TEST@{FRIEND\_TEST}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{FRIEND\_TEST()}{FRIEND\_TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
\mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::FRIEND\+\_\+\+TEST (\begin{DoxyParamCaption}\item[{Memory\+Controller\+Test}]{,  }\item[{Heap\+Growing\+Factor}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_a0a2941e391759fd6c8c67877de193c2b}\label{classv8_1_1internal_1_1MemoryController_a0a2941e391759fd6c8c67877de193c2b}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!FRIEND\_TEST@{FRIEND\_TEST}}
\index{FRIEND\_TEST@{FRIEND\_TEST}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{FRIEND\_TEST()}{FRIEND\_TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
\mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::FRIEND\+\_\+\+TEST (\begin{DoxyParamCaption}\item[{Memory\+Controller\+Test}]{,  }\item[{Max\+Heap\+Growing\+Factor}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_a154dc89529430039990be16d61d3bce5}\label{classv8_1_1internal_1_1MemoryController_a154dc89529430039990be16d61d3bce5}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!GrowingFactor@{GrowingFactor}}
\index{GrowingFactor@{GrowingFactor}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{GrowingFactor()}{GrowingFactor()}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::Growing\+Factor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap}{Heap}} $\ast$}]{heap,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+heap\+\_\+size,  }\item[{std\+::optional$<$ double $>$}]{gc\+\_\+speed,  }\item[{double}]{mutator\+\_\+speed,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}}}]{growing\+\_\+mode }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 15 of file heap-\/controller.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{17                                                             \{}
\DoxyCodeLine{18   \textcolor{keyword}{const} \textcolor{keywordtype}{double} max\_factor = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_ab8a63addd2ba946a532141f108b98bcc}{MaxGrowingFactor}}(max\_heap\_size);}
\DoxyCodeLine{19   \textcolor{keywordtype}{double} factor = \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController_a1a372ad1c75c6d52ec519c97be8a0912}{DynamicGrowingFactor}}(gc\_speed, mutator\_speed, max\_factor);}
\DoxyCodeLine{20   \textcolor{keywordflow}{switch} (growing\_mode) \{}
\DoxyCodeLine{21     \textcolor{keywordflow}{case} \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cca7b697f8fe7d22de00bc0426ff6a76f7b}{Heap::HeapGrowingMode::kConservative}}:}
\DoxyCodeLine{22     \textcolor{keywordflow}{case} \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cca75805a3bb93806d0866f78b38555dd48}{Heap::HeapGrowingMode::kSlow}}:}
\DoxyCodeLine{23       factor = std::min(\{factor, Trait::kConservativeGrowingFactor\});}
\DoxyCodeLine{24       \textcolor{keywordflow}{break};}
\DoxyCodeLine{25     \textcolor{keywordflow}{case} \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cca8b1164c65f88adb0ab22378f0fde15af}{Heap::HeapGrowingMode::kMinimal}}:}
\DoxyCodeLine{26       factor = Trait::kMinGrowingFactor;}
\DoxyCodeLine{27       \textcolor{keywordflow}{break};}
\DoxyCodeLine{28     \textcolor{keywordflow}{case} \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cca6867faeaa475fda467e48267db2bb8a8}{Heap::HeapGrowingMode::kDefault}}:}
\DoxyCodeLine{29       \textcolor{keywordflow}{break};}
\DoxyCodeLine{30   \}}
\DoxyCodeLine{31   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.heap\_growing\_percent > 0) \{}
\DoxyCodeLine{32     factor = 1.0 + \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.heap\_growing\_percent / 100.0;}
\DoxyCodeLine{33   \}}
\DoxyCodeLine{34   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_gc\_verbose)) \{}
\DoxyCodeLine{35     \mbox{\hyperlink{classv8_1_1internal_1_1Isolate_aa4fc16731ddc7000e4eb0dfe81392a38}{Isolate::FromHeap}}(\mbox{\hyperlink{namespaceheap}{heap}})-\/>PrintWithTimestamp(}
\DoxyCodeLine{36         \textcolor{stringliteral}{"{}[\%s] factor \%.1f based on mu=\%.3f, speed\_ratio=\%.f "{}}}
\DoxyCodeLine{37         \textcolor{stringliteral}{"{}(gc=\%.f, mutator=\%.f)\(\backslash\)n"{}},}
\DoxyCodeLine{38         \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02ic_8cc_03_a4631bacb0230cb3812dd449094232bc8ab29ee0f200b80e06ab759be550b518d0}{Trait::kName}}, factor, Trait::kTargetMutatorUtilization,}
\DoxyCodeLine{39         gc\_speed.value\_or(0) / mutator\_speed, gc\_speed.value\_or(0),}
\DoxyCodeLine{40         mutator\_speed);}
\DoxyCodeLine{41   \}}
\DoxyCodeLine{42   \textcolor{keywordflow}{return} factor;}
\DoxyCodeLine{43 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::\+From\+Heap(), v8\+::internal\+::\+Heap\+::k\+Conservative, v8\+::internal\+::\+Heap\+::k\+Default, v8\+::internal\+::\+Heap\+::k\+Minimal, v8\+::internal\+::anonymous\+\_\+namespace\{ic.\+cc\}\+::k\+Name, v8\+::internal\+::\+Heap\+::k\+Slow, v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.



Referenced by v8\+::internal\+::\+Heap\+::\+Compute\+New\+Allocation\+Limits().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_a154dc89529430039990be16d61d3bce5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_a154dc89529430039990be16d61d3bce5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_ab8a63addd2ba946a532141f108b98bcc}\label{classv8_1_1internal_1_1MemoryController_ab8a63addd2ba946a532141f108b98bcc}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!MaxGrowingFactor@{MaxGrowingFactor}}
\index{MaxGrowingFactor@{MaxGrowingFactor}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{MaxGrowingFactor()}{MaxGrowingFactor()}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
double \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::Max\+Growing\+Factor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{max\+\_\+heap\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 46 of file heap-\/controller.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{46                                                                      \{}
\DoxyCodeLine{47   constexpr \textcolor{keywordtype}{double} kMinSmallFactor = 1.3;}
\DoxyCodeLine{48   constexpr \textcolor{keywordtype}{double} kMaxSmallFactor = 2.0;}
\DoxyCodeLine{49   constexpr \textcolor{keywordtype}{double} kHighFactor = 4.0;}
\DoxyCodeLine{50 }
\DoxyCodeLine{51   \textcolor{comment}{// If we are on a device with lots of memory, we allow a high heap}}
\DoxyCodeLine{52   \textcolor{comment}{// growing factor.}}
\DoxyCodeLine{53   \textcolor{keywordflow}{if} (max\_heap\_size >= \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a77088933ac311d83c135c5c1a99b3562}{Heap::DefaulMaxHeapSize}}()) \{}
\DoxyCodeLine{54     \textcolor{keywordflow}{return} kHighFactor;}
\DoxyCodeLine{55   \}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57   \textcolor{keywordtype}{size\_t} max\_size = std::max(\{max\_heap\_size, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f286d5e9112290cd5b19479de3302b3}{Heap::DefaulMinHeapSize}}()\});}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(max\_size, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f286d5e9112290cd5b19479de3302b3}{Heap::DefaulMinHeapSize}}());}
\DoxyCodeLine{60   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(max\_size, \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a77088933ac311d83c135c5c1a99b3562}{Heap::DefaulMaxHeapSize}}());}
\DoxyCodeLine{61 }
\DoxyCodeLine{62   \textcolor{comment}{// On smaller devices we linearly scale the factor: C+(D-\/C)*(X-\/A)/(B-\/A)}}
\DoxyCodeLine{63   \textcolor{keywordtype}{double} factor = kMinSmallFactor +}
\DoxyCodeLine{64                   (kMaxSmallFactor -\/ kMinSmallFactor) *}
\DoxyCodeLine{65                       (max\_size -\/ \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f286d5e9112290cd5b19479de3302b3}{Heap::DefaulMinHeapSize}}()) /}
\DoxyCodeLine{66                       (\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a77088933ac311d83c135c5c1a99b3562}{Heap::DefaulMaxHeapSize}}() -\/ \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f286d5e9112290cd5b19479de3302b3}{Heap::DefaulMinHeapSize}}());}
\DoxyCodeLine{67   \textcolor{keywordflow}{return} factor;}
\DoxyCodeLine{68 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+GE, DCHECK\+\_\+\+LT, v8\+::internal\+::\+Heap\+::\+Defaul\+Max\+Heap\+Size(), and v8\+::internal\+::\+Heap\+::\+Defaul\+Min\+Heap\+Size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_ab8a63addd2ba946a532141f108b98bcc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1MemoryController_a4e89147ea90ad613f53e3e6944f5a64d}\label{classv8_1_1internal_1_1MemoryController_a4e89147ea90ad613f53e3e6944f5a64d}} 
\index{v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}!MinimumAllocationLimitGrowingStep@{MinimumAllocationLimitGrowingStep}}
\index{MinimumAllocationLimitGrowingStep@{MinimumAllocationLimitGrowingStep}!v8::internal::MemoryController$<$ Trait $>$@{v8::internal::MemoryController$<$ Trait $>$}}
\doxysubsubsection{\texorpdfstring{MinimumAllocationLimitGrowingStep()}{MinimumAllocationLimitGrowingStep()}}
{\footnotesize\ttfamily template$<$typename Trait $>$ \\
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1MemoryController}{v8\+::internal\+::\+Memory\+Controller}}$<$ Trait $>$\+::Minimum\+Allocation\+Limit\+Growing\+Step (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cc}{Heap\+::\+Heap\+Growing\+Mode}}}]{growing\+\_\+mode }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 130 of file heap-\/controller.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{131                                       \{}
\DoxyCodeLine{132   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} kRegularAllocationLimitGrowingStep = 8;}
\DoxyCodeLine{133   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} kLowMemoryAllocationLimitGrowingStep = 2;}
\DoxyCodeLine{134   \textcolor{keywordtype}{size\_t} limit = (\mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_a8ca68362b7531b2ab93a045cdcedfdde}{PageMetadata::kPageSize}} > \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}} ? \mbox{\hyperlink{classv8_1_1internal_1_1MutablePageMetadata_a8ca68362b7531b2ab93a045cdcedfdde}{PageMetadata::kPageSize}} : \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}});}
\DoxyCodeLine{135   \textcolor{keywordflow}{return} limit * (growing\_mode == \mbox{\hyperlink{classv8_1_1internal_1_1Heap_ab0ee48f84010f18f6042c712d53be7cca7b697f8fe7d22de00bc0426ff6a76f7b}{Heap::HeapGrowingMode::kConservative}}}
\DoxyCodeLine{136                       ? kLowMemoryAllocationLimitGrowingStep}
\DoxyCodeLine{137                       : kRegularAllocationLimitGrowingStep);}
\DoxyCodeLine{138 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Heap\+::k\+Conservative, v8\+::internal\+::\+Mutable\+Page\+Metadata\+::k\+Page\+Size, and v8\+::internal\+::\+MB.



Referenced by v8\+::internal\+::\+Heap\+::\+Shrink\+Old\+Generation\+Allocation\+Limit\+If\+Not\+Configured().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1MemoryController_a4e89147ea90ad613f53e3e6944f5a64d_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/heap/\mbox{\hyperlink{heap-controller_8h}{heap-\/controller.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/\mbox{\hyperlink{heap-controller_8cc}{heap-\/controller.\+cc}}\end{DoxyCompactItemize}
