\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{embedded-\/data.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a666423153df5f03065c0a4af91d9cef8}{Finalize\+Embedded\+Code\+Targets}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedData}{Embedded\+Data}} $\ast$blob)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a5940e13ada2b6faff53794fb7837f7aa}{Ensure\+Relocatable}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$ \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a5940e13ada2b6faff53794fb7837f7aa}\label{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a5940e13ada2b6faff53794fb7837f7aa}} 
\index{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}}!EnsureRelocatable@{EnsureRelocatable}}
\index{EnsureRelocatable@{EnsureRelocatable}!v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{EnsureRelocatable()}{EnsureRelocatable()}}
{\footnotesize\ttfamily void v8\+::internal\+::anonymous\+\_\+namespace\{embedded-\/data.\+cc\}\+::Ensure\+Relocatable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$}]{code }\end{DoxyParamCaption})}



Definition at line 224 of file embedded-\/data.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{224                                           \{}
\DoxyCodeLine{225   \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>relocation\_size() == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{226 }
\DoxyCodeLine{227   \textcolor{comment}{// On some architectures (arm) the builtin might have a non-\/empty reloc}}
\DoxyCodeLine{228   \textcolor{comment}{// info containing a CONST\_POOL entry. These entries don't have to be}}
\DoxyCodeLine{229   \textcolor{comment}{// updated when InstructionStream object is relocated, so it's safe to drop}}
\DoxyCodeLine{230   \textcolor{comment}{// the reloc info alltogether. If it wasn't the case then we'd have to store}}
\DoxyCodeLine{231   \textcolor{comment}{// it in the metadata.}}
\DoxyCodeLine{232   \textcolor{keywordflow}{for} (RelocIterator it(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}); !it.done(); it.next()) \{}
\DoxyCodeLine{233     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(it.rinfo()-\/>rmode(), RelocInfo::CONST\_POOL);}
\DoxyCodeLine{234   \}}
\DoxyCodeLine{235 \}}

\end{DoxyCode}


References CHECK\+\_\+\+EQ, code, v8\+::internal\+::\+Reloc\+Info\+::\+CONST\+\_\+\+POOL, and v8\+::internal\+::\+Reloc\+Iterator\+Base$<$ Reloc\+Info\+T $>$\+::done().



Referenced by v8\+::internal\+::\+Embedded\+Data\+::\+New\+From\+Isolate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a5940e13ada2b6faff53794fb7837f7aa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a5940e13ada2b6faff53794fb7837f7aa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a666423153df5f03065c0a4af91d9cef8}\label{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a666423153df5f03065c0a4af91d9cef8}} 
\index{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}}!FinalizeEmbeddedCodeTargets@{FinalizeEmbeddedCodeTargets}}
\index{FinalizeEmbeddedCodeTargets@{FinalizeEmbeddedCodeTargets}!v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}embedded-\/data.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{FinalizeEmbeddedCodeTargets()}{FinalizeEmbeddedCodeTargets()}}
{\footnotesize\ttfamily void v8\+::internal\+::anonymous\+\_\+namespace\{embedded-\/data.\+cc\}\+::Finalize\+Embedded\+Code\+Targets (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedData}{Embedded\+Data}} $\ast$}]{blob }\end{DoxyParamCaption})}



Definition at line 177 of file embedded-\/data.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{177                                                                        \{}
\DoxyCodeLine{178   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} kRelocMask =}
\DoxyCodeLine{179       RelocInfo::ModeMask(RelocInfo::CODE\_TARGET) |}
\DoxyCodeLine{180       RelocInfo::ModeMask(RelocInfo::RELATIVE\_CODE\_TARGET);}
\DoxyCodeLine{181 }
\DoxyCodeLine{182   static\_assert(Builtins::kAllBuiltinsAreIsolateIndependent);}
\DoxyCodeLine{183   \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_acc2e164143496f18b5ec68f8ab70af52}{Builtin}} builtin = Builtins::kFirst; builtin <= Builtins::kLast;}
\DoxyCodeLine{184        ++builtin) \{}
\DoxyCodeLine{185     Tagged<Code> \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = isolate-\/>builtins()-\/>code(builtin);}
\DoxyCodeLine{186     RelocIterator on\_heap\_it(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}, kRelocMask);}
\DoxyCodeLine{187     RelocIterator off\_heap\_it(blob, \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}, kRelocMask);}
\DoxyCodeLine{188 }
\DoxyCodeLine{189 \textcolor{preprocessor}{\#if defined(V8\_TARGET\_ARCH\_X64) || defined(V8\_TARGET\_ARCH\_ARM64) ||     \(\backslash\)}}
\DoxyCodeLine{190 \textcolor{preprocessor}{    defined(V8\_TARGET\_ARCH\_ARM) || defined(V8\_TARGET\_ARCH\_IA32) ||      \(\backslash\)}}
\DoxyCodeLine{191 \textcolor{preprocessor}{    defined(V8\_TARGET\_ARCH\_S390X) || defined(V8\_TARGET\_ARCH\_RISCV64) || \(\backslash\)}}
\DoxyCodeLine{192 \textcolor{preprocessor}{    defined(V8\_TARGET\_ARCH\_LOONG64) || defined(V8\_TARGET\_ARCH\_RISCV32)}}
\DoxyCodeLine{193     \textcolor{comment}{// On these platforms we emit relative builtin-\/to-\/builtin}}
\DoxyCodeLine{194     \textcolor{comment}{// jumps for isolate independent builtins in the snapshot. This fixes up the}}
\DoxyCodeLine{195     \textcolor{comment}{// relative jumps to the right offsets in the snapshot.}}
\DoxyCodeLine{196     \textcolor{comment}{// See also: InstructionStream::IsIsolateIndependent.}}
\DoxyCodeLine{197     \textcolor{keywordflow}{while} (!on\_heap\_it.done()) \{}
\DoxyCodeLine{198       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!off\_heap\_it.done());}
\DoxyCodeLine{199 }
\DoxyCodeLine{200       RelocInfo* rinfo = on\_heap\_it.rinfo();}
\DoxyCodeLine{201       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(rinfo-\/>rmode(), off\_heap\_it.rinfo()-\/>rmode());}
\DoxyCodeLine{202       Tagged<Code> target\_code =}
\DoxyCodeLine{203           Code::FromTargetAddress(rinfo-\/>target\_address());}
\DoxyCodeLine{204       \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(Builtins::IsIsolateIndependentBuiltin(target\_code));}
\DoxyCodeLine{205 }
\DoxyCodeLine{206       \textcolor{comment}{// Do not emit write-\/barrier for off-\/heap writes.}}
\DoxyCodeLine{207       off\_heap\_it.rinfo()-\/>set\_off\_heap\_target\_address(}
\DoxyCodeLine{208           blob-\/>InstructionStartOf(target\_code-\/>builtin\_id()));}
\DoxyCodeLine{209 }
\DoxyCodeLine{210       on\_heap\_it.next();}
\DoxyCodeLine{211       off\_heap\_it.next();}
\DoxyCodeLine{212     \}}
\DoxyCodeLine{213     \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(off\_heap\_it.done());}
\DoxyCodeLine{214 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{215     \textcolor{comment}{// Architectures other than x64 and arm/arm64 do not use pc-\/relative calls}}
\DoxyCodeLine{216     \textcolor{comment}{// and thus must not contain embedded code targets. Instead, we use an}}
\DoxyCodeLine{217     \textcolor{comment}{// indirection through the root register.}}
\DoxyCodeLine{218     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(on\_heap\_it.done());}
\DoxyCodeLine{219     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(off\_heap\_it.done());}
\DoxyCodeLine{220 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{221   \}}
\DoxyCodeLine{222 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::builtins(), CHECK, v8\+::internal\+::\+Builtins\+::code(), code, v8\+::internal\+::\+Reloc\+Info\+::\+CODE\+\_\+\+TARGET, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Reloc\+Iterator\+Base$<$ Reloc\+Info\+T $>$\+::done(), v8\+::internal\+::\+Code\+::\+From\+Target\+Address(), v8\+::internal\+::\+Embedded\+Data\+::\+Instruction\+Start\+Of(), v8\+::internal\+::\+Builtins\+::\+Is\+Isolate\+Independent\+Builtin(), v8\+::internal\+::\+Builtins\+::k\+All\+Builtins\+Are\+Isolate\+Independent, v8\+::internal\+::\+Builtins\+::k\+First, v8\+::internal\+::\+Builtins\+::k\+Last, v8\+::internal\+::\+Reloc\+Info\+::\+Mode\+Mask(), v8\+::internal\+::\+Reloc\+Iterator\+Base$<$ Reloc\+Info\+T $>$\+::next(), v8\+::internal\+::\+Reloc\+Info\+::\+RELATIVE\+\_\+\+CODE\+\_\+\+TARGET, v8\+::internal\+::\+Reloc\+Iterator\+Base$<$ Reloc\+Info\+T $>$\+::rinfo(), v8\+::internal\+::\+Reloc\+Info\+::rmode(), v8\+::internal\+::\+Reloc\+Info\+::set\+\_\+off\+\_\+heap\+\_\+target\+\_\+address(), and v8\+::internal\+::\+Reloc\+Info\+::target\+\_\+address().



Referenced by v8\+::internal\+::\+Embedded\+Data\+::\+New\+From\+Isolate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a666423153df5f03065c0a4af91d9cef8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02embedded-data_8cc_03_a666423153df5f03065c0a4af91d9cef8_icgraph}
\end{center}
\end{figure}
