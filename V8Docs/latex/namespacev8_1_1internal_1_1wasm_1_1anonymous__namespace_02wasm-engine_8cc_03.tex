\hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03}{}\doxysection{v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03}\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1WasmGCForegroundTask}{Wasm\+GCForeground\+Task}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1ClearWeakScriptHandleTask}{Clear\+Weak\+Script\+Handle\+Task}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1WeakScriptHandle}{Weak\+Script\+Handle}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1GlobalWasmState}{Global\+Wasm\+State}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0}{Check\+No\+Archived\+Threads}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5}{Create\+Wasm\+Script}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ native\+\_\+module, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$ source\+\_\+url)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9}{Report\+Live\+Code\+From\+Frame\+For\+GC}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1StackFrame}{Stack\+Frame}} $\ast$frame, std\+::unordered\+\_\+set$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{wasm\+::\+Wasm\+Code}} $\ast$ $>$ \&live\+\_\+wasm\+\_\+code)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$ $>$ $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}{native\+\_\+modules\+\_\+kept\+\_\+alive\+\_\+for\+\_\+pgo}}
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1GlobalWasmState}{Global\+Wasm\+State}} $\ast$ \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}{global\+\_\+wasm\+\_\+state}} = \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0}\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}!CheckNoArchivedThreads@{CheckNoArchivedThreads}}
\index{CheckNoArchivedThreads@{CheckNoArchivedThreads}!v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CheckNoArchivedThreads()}{CheckNoArchivedThreads()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::Check\+No\+Archived\+Threads (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 173 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{173                                               \{}
\DoxyCodeLine{174   \textcolor{keyword}{class }ArchivedThreadsVisitor : \textcolor{keyword}{public} ThreadVisitor \{}
\DoxyCodeLine{175     \textcolor{keywordtype}{void} VisitThread(Isolate* isolate, ThreadLocalTop* top)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{176       \textcolor{comment}{// Archived threads are rarely used, and not combined with Wasm at the}}
\DoxyCodeLine{177       \textcolor{comment}{// moment. Implement this and test it properly once we have a use case for}}
\DoxyCodeLine{178       \textcolor{comment}{// that.}}
\DoxyCodeLine{179       \mbox{\hyperlink{src_2base_2logging_8h_a0d093cb749cfc7ab5993726392df681f}{FATAL}}(\textcolor{stringliteral}{"{}archived threads in combination with wasm not supported"{}});}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181   \} archived\_threads\_visitor;}
\DoxyCodeLine{182   isolate-\/>thread\_manager()-\/>IterateArchivedThreads(\&archived\_threads\_visitor);}
\DoxyCodeLine{183 \}}

\end{DoxyCode}


References FATAL, v8\+::internal\+::\+Thread\+Manager\+::\+Iterate\+Archived\+Threads(), and v8\+::internal\+::\+Isolate\+::thread\+\_\+manager().



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Report\+Live\+Code\+From\+Stack\+For\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_aef66645c369e2ac73d5c9a7d9ca821f0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5}\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}!CreateWasmScript@{CreateWasmScript}}
\index{CreateWasmScript@{CreateWasmScript}!v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CreateWasmScript()}{CreateWasmScript()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Script}{Script}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::Create\+Wasm\+Script (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $>$}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const char $>$}]{source\+\_\+url }\end{DoxyParamCaption})}



Definition at line 953 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{955                                        \{}
\DoxyCodeLine{956   base::Vector<const uint8\_t> wire\_bytes = native\_module-\/>wire\_bytes();}
\DoxyCodeLine{957 }
\DoxyCodeLine{958   \textcolor{comment}{// The source URL of the script is}}
\DoxyCodeLine{959   \textcolor{comment}{// -\/ the original source URL if available (from the streaming API),}}
\DoxyCodeLine{960   \textcolor{comment}{// -\/ wasm://wasm/<module name>-\/<hash> if a module name has been set, or}}
\DoxyCodeLine{961   \textcolor{comment}{// -\/ wasm://wasm/<hash> otherwise.}}
\DoxyCodeLine{962   \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_a09dbf9baefb793fd78912d6ef89f9dde}{WasmModule}}* module = native\_module-\/>module();}
\DoxyCodeLine{963   DirectHandle<String> url\_str;}
\DoxyCodeLine{964   \textcolor{keywordflow}{if} (!source\_url.empty()) \{}
\DoxyCodeLine{965     url\_str = isolate-\/>factory()}
\DoxyCodeLine{966                   -\/>NewStringFromUtf8(source\_url, AllocationType::kOld)}
\DoxyCodeLine{967                   .ToHandleChecked();}
\DoxyCodeLine{968   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{969     \textcolor{comment}{// Limit the printed hash to 8 characters.}}
\DoxyCodeLine{970     uint32\_t hash = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a716eb92980e15ae4e9894148e2066cb3}{GetWireBytesHash}}(wire\_bytes));}
\DoxyCodeLine{971     base::EmbeddedVector<char, 32> buffer;}
\DoxyCodeLine{972     \textcolor{keywordflow}{if} (module-\/>name.is\_empty()) \{}
\DoxyCodeLine{973       \textcolor{comment}{// Build the URL in the form "{}wasm://wasm/<hash>"{}.}}
\DoxyCodeLine{974       \textcolor{keywordtype}{int} url\_len = \mbox{\hyperlink{namespacev8_1_1base_a36caaf43a3f7761ae90d699b961f0239}{SNPrintF}}(buffer, \textcolor{stringliteral}{"{}wasm://wasm/\%08x"{}}, hash);}
\DoxyCodeLine{975       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(url\_len >= 0 \&\& url\_len < buffer.length());}
\DoxyCodeLine{976       url\_str = isolate-\/>factory()}
\DoxyCodeLine{977                     -\/>NewStringFromUtf8(buffer.SubVector(0, url\_len),}
\DoxyCodeLine{978                                         AllocationType::kOld)}
\DoxyCodeLine{979                     .ToHandleChecked();}
\DoxyCodeLine{980     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{981       \textcolor{comment}{// Build the URL in the form "{}wasm://wasm/<module name>-\/<hash>"{}.}}
\DoxyCodeLine{982       \textcolor{keywordtype}{int} hash\_len = \mbox{\hyperlink{namespacev8_1_1base_a36caaf43a3f7761ae90d699b961f0239}{SNPrintF}}(buffer, \textcolor{stringliteral}{"{}-\/\%08x"{}}, hash);}
\DoxyCodeLine{983       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(hash\_len >= 0 \&\& hash\_len < buffer.length());}
\DoxyCodeLine{984       DirectHandle<String> prefix =}
\DoxyCodeLine{985           isolate-\/>factory()-\/>NewStringFromStaticChars(\textcolor{stringliteral}{"{}wasm://wasm/"{}});}
\DoxyCodeLine{986       DirectHandle<String> module\_name =}
\DoxyCodeLine{987           WasmModuleObject::ExtractUtf8StringFromModuleBytes(}
\DoxyCodeLine{988               isolate, wire\_bytes, module-\/>name, \mbox{\hyperlink{namespacev8_1_1internal_a00e6a81b8b499c814a011d90853897fba81b23a97077ceef0f9633d2041ae1737}{kNoInternalize}});}
\DoxyCodeLine{989       DirectHandle<String> hash\_str =}
\DoxyCodeLine{990           isolate-\/>factory()}
\DoxyCodeLine{991               -\/>NewStringFromUtf8(buffer.SubVector(0, hash\_len))}
\DoxyCodeLine{992               .ToHandleChecked();}
\DoxyCodeLine{993       \textcolor{comment}{// Concatenate the three parts.}}
\DoxyCodeLine{994       url\_str = isolate-\/>factory()}
\DoxyCodeLine{995                     -\/>NewConsString(prefix, module\_name)}
\DoxyCodeLine{996                     .ToHandleChecked();}
\DoxyCodeLine{997       url\_str = isolate-\/>factory()}
\DoxyCodeLine{998                     -\/>NewConsString(url\_str, hash\_str)}
\DoxyCodeLine{999                     .ToHandleChecked();}
\DoxyCodeLine{1000     \}}
\DoxyCodeLine{1001   \}}
\DoxyCodeLine{1002   DirectHandle<PrimitiveHeapObject> source\_map\_url =}
\DoxyCodeLine{1003       isolate-\/>factory()-\/>undefined\_value();}
\DoxyCodeLine{1004   \textcolor{keywordflow}{if} (module-\/>debug\_symbols[WasmDebugSymbols::Type::SourceMap].type !=}
\DoxyCodeLine{1005       \mbox{\hyperlink{namespacev8_a05f25f935e108a1ea2d150e274602b87a7ab4d58719c33b3ea2dfaefa29b111df}{WasmDebugSymbols::Type::None}}) \{}
\DoxyCodeLine{1006     \textcolor{keyword}{auto} source\_map\_symbols =}
\DoxyCodeLine{1007         module-\/>debug\_symbols[WasmDebugSymbols::Type::SourceMap];}
\DoxyCodeLine{1008     base::Vector<const char> external\_url =}
\DoxyCodeLine{1009         ModuleWireBytes(wire\_bytes)}
\DoxyCodeLine{1010             .GetNameOrNull(source\_map\_symbols.external\_url);}
\DoxyCodeLine{1011     MaybeDirectHandle<String> src\_map\_str =}
\DoxyCodeLine{1012         isolate-\/>factory()-\/>NewStringFromUtf8(external\_url,}
\DoxyCodeLine{1013                                               AllocationType::kOld);}
\DoxyCodeLine{1014     source\_map\_url = src\_map\_str.ToHandleChecked();}
\DoxyCodeLine{1015   \}}
\DoxyCodeLine{1016 }
\DoxyCodeLine{1017   \textcolor{comment}{// Use the given shared \{NativeModule\}, but increase its reference count by}}
\DoxyCodeLine{1018   \textcolor{comment}{// allocating a new \{Managed<T>\} that the \{Script\} references.}}
\DoxyCodeLine{1019   \textcolor{keywordtype}{size\_t} code\_size\_estimate = native\_module-\/>committed\_code\_space();}
\DoxyCodeLine{1020   \textcolor{keywordtype}{size\_t} memory\_estimate =}
\DoxyCodeLine{1021       code\_size\_estimate +}
\DoxyCodeLine{1022       wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize(module);}
\DoxyCodeLine{1023   DirectHandle<Managed<wasm::NativeModule>> managed\_native\_module =}
\DoxyCodeLine{1024       Managed<wasm::NativeModule>::From(isolate, memory\_estimate,}
\DoxyCodeLine{1025                                         std::move(native\_module));}
\DoxyCodeLine{1026 }
\DoxyCodeLine{1027   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}} =}
\DoxyCodeLine{1028       isolate-\/>factory()-\/>NewScript(isolate-\/>factory()-\/>undefined\_value());}
\DoxyCodeLine{1029   \{}
\DoxyCodeLine{1030     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{1031     Tagged<Script> raw\_script = *\mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}};}
\DoxyCodeLine{1032     raw\_script-\/>set\_compilation\_state(Script::CompilationState::kCompiled);}
\DoxyCodeLine{1033     raw\_script-\/>set\_context\_data(isolate-\/>native\_context()-\/>debug\_context\_id());}
\DoxyCodeLine{1034     raw\_script-\/>set\_name(*url\_str);}
\DoxyCodeLine{1035     raw\_script-\/>set\_type(Script::Type::kWasm);}
\DoxyCodeLine{1036     raw\_script-\/>set\_source\_mapping\_url(*source\_map\_url);}
\DoxyCodeLine{1037     raw\_script-\/>set\_line\_ends(ReadOnlyRoots(isolate).empty\_fixed\_array(),}
\DoxyCodeLine{1038                               \mbox{\hyperlink{namespacev8_1_1internal_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75}{SKIP\_WRITE\_BARRIER}});}
\DoxyCodeLine{1039     raw\_script-\/>set\_wasm\_managed\_native\_module(*managed\_native\_module);}
\DoxyCodeLine{1040     raw\_script-\/>set\_wasm\_breakpoint\_infos(}
\DoxyCodeLine{1041         ReadOnlyRoots(isolate).empty\_fixed\_array(), \mbox{\hyperlink{namespacev8_1_1internal_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75}{SKIP\_WRITE\_BARRIER}});}
\DoxyCodeLine{1042     raw\_script-\/>set\_wasm\_weak\_instance\_list(}
\DoxyCodeLine{1043         ReadOnlyRoots(isolate).empty\_weak\_array\_list(), \mbox{\hyperlink{namespacev8_1_1internal_a20c66a96ddfae551866ceae989a8ba13a6719428bfb5874884bca62eb8fe3de75}{SKIP\_WRITE\_BARRIER}});}
\DoxyCodeLine{1044 }
\DoxyCodeLine{1045     \textcolor{comment}{// For correct exception handling (in particular, the onunhandledrejection}}
\DoxyCodeLine{1046     \textcolor{comment}{// callback), we must set the origin options from the nearest calling JS}}
\DoxyCodeLine{1047     \textcolor{comment}{// frame.}}
\DoxyCodeLine{1048     \textcolor{comment}{// Considering all Wasm modules as shared across origins isn't a privacy}}
\DoxyCodeLine{1049     \textcolor{comment}{// issue, because in order to instantiate and use them, a site needs to}}
\DoxyCodeLine{1050     \textcolor{comment}{// already have access to their wire bytes anyway.}}
\DoxyCodeLine{1051     \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{bool} kIsSharedCrossOrigin = \textcolor{keyword}{true};}
\DoxyCodeLine{1052     \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{bool} kIsOpaque = \textcolor{keyword}{false};}
\DoxyCodeLine{1053     \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{bool} kIsWasm = \textcolor{keyword}{true};}
\DoxyCodeLine{1054     \textcolor{keyword}{static} constexpr \textcolor{keywordtype}{bool} kIsModule = \textcolor{keyword}{false};}
\DoxyCodeLine{1055     raw\_script-\/>set\_origin\_options(ScriptOriginOptions(}
\DoxyCodeLine{1056         kIsSharedCrossOrigin, kIsOpaque, kIsWasm, kIsModule));}
\DoxyCodeLine{1057   \}}
\DoxyCodeLine{1058 }
\DoxyCodeLine{1059   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}};}
\DoxyCodeLine{1060 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::debug\+\_\+symbols, v8\+::base\+::\+Vector$<$ T $>$\+::empty(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Estimate\+Native\+Module\+Meta\+Data\+Size(), v8\+::internal\+::\+Wasm\+Module\+Object\+::\+Extract\+Utf8\+String\+From\+Module\+Bytes(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Managed$<$ Cpp\+Type $>$\+::\+From(), v8\+::internal\+::wasm\+::\+Module\+Wire\+Bytes\+::\+Get\+Name\+Or\+Null(), v8\+::internal\+::wasm\+::\+Get\+Wire\+Bytes\+Hash(), v8\+::internal\+::wasm\+::\+Wire\+Bytes\+Ref\+::is\+\_\+empty(), v8\+::internal\+::\+Script\+::k\+Compiled, v8\+::internal\+::k\+No\+Internalize, v8\+::internal\+::k\+Old, v8\+::base\+::\+Vector$<$ T $>$\+::length(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::name, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Cons\+String(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Script(), v8\+::internal\+::\+Factory\+::\+New\+String\+From\+Static\+Chars(), v8\+::internal\+::\+Factory\+::\+New\+String\+From\+Utf8(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::\+None, v8\+::internal\+::script, v8\+::internal\+::\+SKIP\+\_\+\+WRITE\+\_\+\+BARRIER, v8\+::base\+::\+SNPrint\+F(), v8\+::base\+::\+Vector$<$ T $>$\+::\+Sub\+Vector(), and v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::\+To\+Handle\+Checked().



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Get\+Or\+Create\+Script().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_af8b90209b5adee4094c41b0048374eb5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9}\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}!ReportLiveCodeFromFrameForGC@{ReportLiveCodeFromFrameForGC}}
\index{ReportLiveCodeFromFrameForGC@{ReportLiveCodeFromFrameForGC}!v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ReportLiveCodeFromFrameForGC()}{ReportLiveCodeFromFrameForGC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::Report\+Live\+Code\+From\+Frame\+For\+GC (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1StackFrame}{Stack\+Frame}} $\ast$}]{frame,  }\item[{std\+::unordered\+\_\+set$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{wasm\+::\+Wasm\+Code}} $\ast$ $>$ \&}]{live\+\_\+wasm\+\_\+code }\end{DoxyParamCaption})}



Definition at line 1762 of file wasm-\/engine.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{1764                                                      \{}
\DoxyCodeLine{1765   \textcolor{keywordflow}{if} (frame-\/>type() == StackFrame::WASM) \{}
\DoxyCodeLine{1766     WasmFrame* wasm\_frame = WasmFrame::cast(frame);}
\DoxyCodeLine{1767     WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} = wasm\_frame-\/>wasm\_code();}
\DoxyCodeLine{1768     live\_wasm\_code.insert(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{1769 \textcolor{preprocessor}{\#if V8\_TARGET\_ARCH\_X64}}
\DoxyCodeLine{1770     \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>for\_debugging()) \{}
\DoxyCodeLine{1771       \mbox{\hyperlink{namespacev8_1_1base_aed4219b45684a3840c8b930b5df90ea9}{Address}} osr\_target =}
\DoxyCodeLine{1772           base::Memory<Address>(wasm\_frame-\/>fp() -\/ kOSRTargetOffset);}
\DoxyCodeLine{1773       \textcolor{keywordflow}{if} (osr\_target) \{}
\DoxyCodeLine{1774         WasmCode* osr\_code =}
\DoxyCodeLine{1775             \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a8b17776c8a4fe19718f2b1931544253f}{LookupCode}}(isolate, osr\_target);}
\DoxyCodeLine{1776         \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(osr\_code);}
\DoxyCodeLine{1777         live\_wasm\_code.insert(osr\_code);}
\DoxyCodeLine{1778       \}}
\DoxyCodeLine{1779     \}}
\DoxyCodeLine{1780 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1781   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (frame-\/>type() == StackFrame::WASM\_TO\_JS) \{}
\DoxyCodeLine{1782     live\_wasm\_code.insert(\textcolor{keyword}{static\_cast<}WasmToJsFrame*\textcolor{keyword}{>}(frame)-\/>wasm\_code());}
\DoxyCodeLine{1783   \}}
\DoxyCodeLine{1784 \}}

\end{DoxyCode}


References code, DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Lookup\+Code(), and v8\+::internal\+::\+Stack\+Frame\+::type().



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Report\+Live\+Code\+From\+Stack\+For\+GC().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a5da809708435a4f9ea416252060ce7f9_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a9a81c7e39ba946987239720929adfd44}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}!global\_wasm\_state@{global\_wasm\_state}}
\index{global\_wasm\_state@{global\_wasm\_state}!v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{global\_wasm\_state}{global\_wasm\_state}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_1_1GlobalWasmState}{Global\+Wasm\+State}}$\ast$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::global\+\_\+wasm\+\_\+state = \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}}



Definition at line 2090 of file wasm-\/engine.\+cc.



Referenced by v8\+::internal\+::wasm\+::\+Get\+Canonical\+Type\+Names\+Provider(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Engine(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Import\+Wrapper\+Cache(), v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Global\+Tear\+Down(), and v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+Initialize\+Once\+Per\+Process().

\mbox{\Hypertarget{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}\label{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-engine_8cc_03_a01ea512b0721f1f5ced70d87c6ae028b}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}!native\_modules\_kept\_alive\_for\_pgo@{native\_modules\_kept\_alive\_for\_pgo}}
\index{native\_modules\_kept\_alive\_for\_pgo@{native\_modules\_kept\_alive\_for\_pgo}!v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}@{v8::internal::wasm::anonymous\_namespace\lcurly{}wasm-\/engine.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{native\_modules\_kept\_alive\_for\_pgo}{native\_modules\_kept\_alive\_for\_pgo}}
{\footnotesize\ttfamily std\+::vector$<$std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}}$>$ $>$$\ast$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/engine.\+cc\}\+::native\+\_\+modules\+\_\+kept\+\_\+alive\+\_\+for\+\_\+pgo}



Definition at line 291 of file wasm-\/engine.\+cc.



Referenced by v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::\+New\+Native\+Module(), and v8\+::internal\+::wasm\+::\+Wasm\+Engine\+::$\sim$\+Wasm\+Engine().

