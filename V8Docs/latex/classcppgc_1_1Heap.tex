\hypertarget{classcppgc_1_1Heap}{}\doxysection{cppgc\+::Heap Class Reference}
\label{classcppgc_1_1Heap}\index{cppgc::Heap@{cppgc::Heap}}


{\ttfamily \#include $<$heap.\+h$>$}



Inheritance diagram for cppgc\+::Heap\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{classcppgc_1_1Heap__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions}{Heap\+Options}}
\item 
struct \mbox{\hyperlink{structcppgc_1_1Heap_1_1ResourceConstraints}{Resource\+Constraints}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27}{Stack\+Support}} \+: uint8\+\_\+t \{ \mbox{\hyperlink{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27a59c6cb8f57b8d83710b7cf293a08d820}{k\+Supports\+Conservative\+Stack\+Scan}}
, \mbox{\hyperlink{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27afb089d072f99cd4e4deaa88c1bd80cae}{k\+No\+Conservative\+Stack\+Scan}}
 \}
\item 
enum class \mbox{\hyperlink{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20}{Marking\+Type}} \+: uint8\+\_\+t \{ \mbox{\hyperlink{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a726d9cf5163c50b3cf8e05800e3cef71}{k\+Atomic}}
, \mbox{\hyperlink{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a4461e3132c6a68cc061f851d6b53fc15}{k\+Incremental}}
, \mbox{\hyperlink{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a13b93ce70f628c016cca112357cc51b1}{k\+Incremental\+And\+Concurrent}}
 \}
\item 
enum class \mbox{\hyperlink{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2}{Sweeping\+Type}} \+: uint8\+\_\+t \{ \mbox{\hyperlink{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a726d9cf5163c50b3cf8e05800e3cef71}{k\+Atomic}}
, \mbox{\hyperlink{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a4461e3132c6a68cc061f851d6b53fc15}{k\+Incremental}}
, \mbox{\hyperlink{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a13b93ce70f628c016cca112357cc51b1}{k\+Incremental\+And\+Concurrent}}
 \}
\item 
using \mbox{\hyperlink{classcppgc_1_1Heap_accb0c89fed4aa98a9784072f300a2189}{Stack\+State}} = \mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classcppgc_1_1Heap_adb70bd8ece968e9201c13985c412d562}{$\sim$\+Heap}} ()=default
\item 
void \mbox{\hyperlink{classcppgc_1_1Heap_aa8ef2e6a66b5512a189ddfb7a3ab4f3d}{Force\+Garbage\+Collection\+Slow}} (const char $\ast$\mbox{\hyperlink{maglev-code-generator_8cc_ada8b48e004e823cabe5fcb41baf29163}{source}}, const char $\ast$reason, \mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Stack\+State}} stack\+\_\+state=Stack\+State\+::k\+May\+Contain\+Heap\+Pointers)
\item 
\mbox{\hyperlink{classcppgc_1_1AllocationHandle}{Allocation\+Handle}} \& \mbox{\hyperlink{classcppgc_1_1Heap_ab3137d30e4a524fc997ddae411640442}{Get\+Allocation\+Handle}} ()
\item 
\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \& \mbox{\hyperlink{classcppgc_1_1Heap_a3c9d9dcc6a11d868f1cf7d60ac53e27d}{Get\+Heap\+Handle}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classcppgc_1_1Heap}{Heap}} $>$ \mbox{\hyperlink{classcppgc_1_1Heap_ae70ae70a49fe0af30a8878515cda4afc}{Create}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classcppgc_1_1Platform}{Platform}} $>$ platform, \mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions}{Heap\+Options}} options=\mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions_ac9277328aa23b093cc19a10a32c2e96b}{Heap\+Options\+::\+Default}}())
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcppgc_1_1Heap_a20a566310503e50c1b32668c772a14b2}{internal\+::\+Heap}}
\end{DoxyCompactItemize}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classcppgc_1_1Heap_accb0c89fed4aa98a9784072f300a2189}\label{classcppgc_1_1Heap_accb0c89fed4aa98a9784072f300a2189}} 
\index{cppgc::Heap@{cppgc::Heap}!StackState@{StackState}}
\index{StackState@{StackState}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{StackState}{StackState}}
{\footnotesize\ttfamily using \mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{cppgc\+::\+Heap\+::\+Stack\+State}} =  \mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}}}

Specifies the stack state the embedder is in. 

\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20}\label{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20}} 
\index{cppgc::Heap@{cppgc::Heap}!MarkingType@{MarkingType}}
\index{MarkingType@{MarkingType}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{MarkingType}{MarkingType}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20}{cppgc\+::\+Heap\+::\+Marking\+Type}} \+: uint8\+\_\+t\hspace{0.3cm}{\ttfamily [strong]}}

Specifies supported marking types. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kAtomic@{kAtomic}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kAtomic@{kAtomic}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a726d9cf5163c50b3cf8e05800e3cef71}\label{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a726d9cf5163c50b3cf8e05800e3cef71}} 
k\+Atomic&Atomic stop-\/the-\/world marking. This option does not require any write barriers but is the most intrusive in terms of jank. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncremental@{kIncremental}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kIncremental@{kIncremental}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a4461e3132c6a68cc061f851d6b53fc15}\label{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a4461e3132c6a68cc061f851d6b53fc15}} 
k\+Incremental&Incremental marking interleaves marking with the rest of the application workload on the same thread. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncrementalAndConcurrent@{kIncrementalAndConcurrent}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kIncrementalAndConcurrent@{kIncrementalAndConcurrent}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a13b93ce70f628c016cca112357cc51b1}\label{classcppgc_1_1Heap_a3094861cfe8c736974723e4ad9ca3e20a13b93ce70f628c016cca112357cc51b1}} 
k\+Incremental\+And\+Concurrent&Incremental and concurrent marking. \\
\hline

\end{DoxyEnumFields}
\mbox{\Hypertarget{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27}\label{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27}} 
\index{cppgc::Heap@{cppgc::Heap}!StackSupport@{StackSupport}}
\index{StackSupport@{StackSupport}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{StackSupport}{StackSupport}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27}{cppgc\+::\+Heap\+::\+Stack\+Support}} \+: uint8\+\_\+t\hspace{0.3cm}{\ttfamily [strong]}}

Specifies whether conservative stack scanning is supported. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kSupportsConservativeStackScan@{kSupportsConservativeStackScan}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kSupportsConservativeStackScan@{kSupportsConservativeStackScan}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27a59c6cb8f57b8d83710b7cf293a08d820}\label{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27a59c6cb8f57b8d83710b7cf293a08d820}} 
k\+Supports\+Conservative\+Stack\+Scan&Conservative stack scan is supported. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kNoConservativeStackScan@{kNoConservativeStackScan}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kNoConservativeStackScan@{kNoConservativeStackScan}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27afb089d072f99cd4e4deaa88c1bd80cae}\label{classcppgc_1_1Heap_a4be1c0d603f8273f64e771f60e22bb27afb089d072f99cd4e4deaa88c1bd80cae}} 
k\+No\+Conservative\+Stack\+Scan&Conservative stack scan is not supported. Embedders may use this option when using custom infrastructure that is unsupported by the library. \\
\hline

\end{DoxyEnumFields}
\mbox{\Hypertarget{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2}\label{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2}} 
\index{cppgc::Heap@{cppgc::Heap}!SweepingType@{SweepingType}}
\index{SweepingType@{SweepingType}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{SweepingType}{SweepingType}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2}{cppgc\+::\+Heap\+::\+Sweeping\+Type}} \+: uint8\+\_\+t\hspace{0.3cm}{\ttfamily [strong]}}

Specifies supported sweeping types. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kAtomic@{kAtomic}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kAtomic@{kAtomic}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a726d9cf5163c50b3cf8e05800e3cef71}\label{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a726d9cf5163c50b3cf8e05800e3cef71}} 
k\+Atomic&Atomic stop-\/the-\/world sweeping. All of sweeping is performed at once. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncremental@{kIncremental}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kIncremental@{kIncremental}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a4461e3132c6a68cc061f851d6b53fc15}\label{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a4461e3132c6a68cc061f851d6b53fc15}} 
k\+Incremental&Incremental sweeping interleaves sweeping with the rest of the application workload on the same thread. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kIncrementalAndConcurrent@{kIncrementalAndConcurrent}!cppgc::Heap@{cppgc::Heap}}\index{cppgc::Heap@{cppgc::Heap}!kIncrementalAndConcurrent@{kIncrementalAndConcurrent}}}\mbox{\Hypertarget{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a13b93ce70f628c016cca112357cc51b1}\label{classcppgc_1_1Heap_a9005da6b2685669d9b1419324e26b8a2a13b93ce70f628c016cca112357cc51b1}} 
k\+Incremental\+And\+Concurrent&Incremental and concurrent sweeping. Sweeping is split and interleaved with the rest of the application. \\
\hline

\end{DoxyEnumFields}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcppgc_1_1Heap_adb70bd8ece968e9201c13985c412d562}\label{classcppgc_1_1Heap_adb70bd8ece968e9201c13985c412d562}} 
\index{cppgc::Heap@{cppgc::Heap}!````~Heap@{$\sim$Heap}}
\index{````~Heap@{$\sim$Heap}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{$\sim$Heap()}{~Heap()}}
{\footnotesize\ttfamily virtual cppgc\+::\+Heap\+::$\sim$\+Heap (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



Reimplemented in \mbox{\hyperlink{classcppgc_1_1internal_1_1Heap_a99d5f2206911d1235596a5bbda2ad1db}{cppgc\+::internal\+::\+Heap}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1Heap_ae70ae70a49fe0af30a8878515cda4afc}\label{classcppgc_1_1Heap_ae70ae70a49fe0af30a8878515cda4afc}} 
\index{cppgc::Heap@{cppgc::Heap}!Create@{Create}}
\index{Create@{Create}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{Create()}{Create()}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classcppgc_1_1Heap}{Heap}} $>$ cppgc\+::\+Heap\+::\+Create (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classcppgc_1_1Platform}{Platform}} $>$}]{platform,  }\item[{\mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions}{Heap\+Options}}}]{options = {\ttfamily \mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions_ac9277328aa23b093cc19a10a32c2e96b}{Heap\+Options\+::\+Default}}()} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Creates a new heap that can be used for object allocation.


\begin{DoxyParams}{Parameters}
{\em platform} & implemented and provided by the embedder. \\
\hline
{\em options} & \mbox{\hyperlink{structcppgc_1_1Heap_1_1HeapOptions}{Heap\+Options}} specifying various properties for the \mbox{\hyperlink{classcppgc_1_1Heap}{Heap}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a new \mbox{\hyperlink{classcppgc_1_1Heap}{Heap}} instance. 
\end{DoxyReturn}
\mbox{\Hypertarget{classcppgc_1_1Heap_aa8ef2e6a66b5512a189ddfb7a3ab4f3d}\label{classcppgc_1_1Heap_aa8ef2e6a66b5512a189ddfb7a3ab4f3d}} 
\index{cppgc::Heap@{cppgc::Heap}!ForceGarbageCollectionSlow@{ForceGarbageCollectionSlow}}
\index{ForceGarbageCollectionSlow@{ForceGarbageCollectionSlow}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{ForceGarbageCollectionSlow()}{ForceGarbageCollectionSlow()}}
{\footnotesize\ttfamily void cppgc\+::\+Heap\+::\+Force\+Garbage\+Collection\+Slow (\begin{DoxyParamCaption}\item[{const char $\ast$}]{source,  }\item[{const char $\ast$}]{reason,  }\item[{\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Heap\+::\+Stack\+State}}}]{stack\+\_\+state = {\ttfamily StackState\+:\+:kMayContainHeapPointers} }\end{DoxyParamCaption})}

Forces garbage collection.


\begin{DoxyParams}{Parameters}
{\em source} & String specifying the source (or caller) triggering a forced garbage collection. \\
\hline
{\em reason} & String specifying the reason for the forced garbage collection. \\
\hline
{\em stack\+\_\+state} & The embedder stack state, see Stack\+State. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcppgc_1_1Heap_ab3137d30e4a524fc997ddae411640442}\label{classcppgc_1_1Heap_ab3137d30e4a524fc997ddae411640442}} 
\index{cppgc::Heap@{cppgc::Heap}!GetAllocationHandle@{GetAllocationHandle}}
\index{GetAllocationHandle@{GetAllocationHandle}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{GetAllocationHandle()}{GetAllocationHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1AllocationHandle}{Allocation\+Handle}} \& cppgc\+::\+Heap\+::\+Get\+Allocation\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyReturn}{Returns}
the opaque handle for allocating objects using {\ttfamily \mbox{\hyperlink{namespacecppgc_a30a9dfe65b0ca9f09ed6814a3604afc1}{Make\+Garbage\+Collected()}}}. 
\end{DoxyReturn}
\mbox{\Hypertarget{classcppgc_1_1Heap_a3c9d9dcc6a11d868f1cf7d60ac53e27d}\label{classcppgc_1_1Heap_a3c9d9dcc6a11d868f1cf7d60ac53e27d}} 
\index{cppgc::Heap@{cppgc::Heap}!GetHeapHandle@{GetHeapHandle}}
\index{GetHeapHandle@{GetHeapHandle}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{GetHeapHandle()}{GetHeapHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \& cppgc\+::\+Heap\+::\+Get\+Heap\+Handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyReturn}{Returns}
the opaque heap handle which may be used to refer to this heap in other APIs. Valid as long as the underlying {\ttfamily \mbox{\hyperlink{classcppgc_1_1Heap}{Heap}}} is alive. 
\end{DoxyReturn}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1Heap_a20a566310503e50c1b32668c772a14b2}\label{classcppgc_1_1Heap_a20a566310503e50c1b32668c772a14b2}} 
\index{cppgc::Heap@{cppgc::Heap}!internal::Heap@{internal::Heap}}
\index{internal::Heap@{internal::Heap}!cppgc::Heap@{cppgc::Heap}}
\doxysubsubsection{\texorpdfstring{internal::Heap}{internal::Heap}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classcppgc_1_1internal_1_1Heap}{internal\+::\+Heap}}\hspace{0.3cm}{\ttfamily [friend]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{include_2cppgc_2heap_8h}{include/cppgc/heap.\+h}}\item 
\mbox{\hyperlink{cppgc_2heap_8cc}{cppgc/heap.\+cc}}\end{DoxyCompactItemize}
