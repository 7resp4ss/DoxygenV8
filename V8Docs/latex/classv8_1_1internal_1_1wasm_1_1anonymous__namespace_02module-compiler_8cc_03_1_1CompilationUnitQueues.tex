\hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues}{}\doxysection{v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.cc\}\+::Compilation\+Unit\+Queues Class Reference}
\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues}\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}


Collaboration diagram for v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.cc\}\+::Compilation\+Unit\+Queues\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnit}{Big\+Unit}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue}{Big\+Units\+Queue}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1TopTierPriorityUnit}{Top\+Tier\+Priority\+Unit}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a72c16e7a9412689bbc092e6cec45199f}{Compilation\+Unit\+Queues}} (\mbox{\hyperlink{classint}{int}} num\+\_\+imported\+\_\+functions, \mbox{\hyperlink{classint}{int}} num\+\_\+declared\+\_\+functions)
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aef9c5e4fddae1550ab5ca318583d4c6d}{Get\+Queue\+For\+Task}} (\mbox{\hyperlink{classint}{int}} task\+\_\+id)
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a3e5e5349a621aac9f3111fe61b580c43}{Get\+Next\+Unit}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}} $\ast$queue, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5}{Compilation\+Tier}} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31357ad240d5b25fb61558f17ae39c94}{Add\+Units}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ baseline\+\_\+units, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ top\+\_\+tier\+\_\+units, const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $\ast$module)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a91aaa8c461c03f44c2d900f81526d1d4}{Add\+Top\+Tier\+Priority\+Unit}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} unit, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} priority)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd58ed5c7aa92fd01ef858dd4a885a68}{Get\+Size\+For\+Tier}} (\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5}{Compilation\+Tier}} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}) const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ac5cf3ece9a08ba65c92468996df796f6}{Allow\+Another\+Top\+Tier\+Job}} (uint32\+\_\+t func\+\_\+index)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a5b2dc02f4ff6da74814b0b2def2df264}{Estimate\+Current\+Memory\+Consumption}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31d34448ce13cf296171c77f1d498b9f}{next\+\_\+task\+\_\+id}} (\mbox{\hyperlink{classint}{int}} task\+\_\+id, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} num\+\_\+queues) const
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aa477a5485afbdc372a13736797e2c0cf}{Get\+Next\+Unit\+Of\+Tier}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}} $\ast$public\+\_\+queue, \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd207574701d74f08e9dd7875aa71269}{Get\+Big\+Unit\+Of\+Tier}} (\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a04f890a174602830b61b1a0423852c4c}{Get\+Top\+Tier\+Priority\+Unit}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$queue)
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9e79ae6cf67a501ea13f057de7cbd852}{Steal\+Units\+And\+Get\+First}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$queue, \mbox{\hyperlink{classint}{int}} steal\+\_\+from\+\_\+task\+\_\+id, \mbox{\hyperlink{classint}{int}} wanted\+\_\+tier)
\item 
std\+::optional$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aba1d01818282df3fa67d79db5f02a9f3}{Steal\+Top\+Tier\+Priority\+Unit}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$queue, \mbox{\hyperlink{classint}{int}} steal\+\_\+from\+\_\+task\+\_\+id)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}{declared\+\_\+function\+\_\+index}} (\mbox{\hyperlink{classint}{int}} func\+\_\+index) const
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\+\_\+mutex\+\_\+}}
\item 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $>$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\+\_\+}}
\item 
const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}{num\+\_\+imported\+\_\+functions\+\_\+}}
\item 
const \mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}{num\+\_\+declared\+\_\+functions\+\_\+}}
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue}{Big\+Units\+Queue}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\+\_\+units\+\_\+queue\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\+\_\+units\+\_\+}} \mbox{[}Compilation\+Tier\+::k\+Num\+Tiers\mbox{]}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}{num\+\_\+priority\+\_\+units\+\_\+}} \{0\}
\item 
std\+::unique\+\_\+ptr$<$ std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$\mbox{[}$\,$\mbox{]}$>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\+\_\+tier\+\_\+compiled\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{classint}{int}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}{next\+\_\+queue\+\_\+to\+\_\+add}} \{0\}
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aaa71680e1fa9e16dc8456969e7c4ef19}{k\+Big\+Units\+Limit}} = 4096
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 108 of file module-\/compiler.\+cc.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a72c16e7a9412689bbc092e6cec45199f}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a72c16e7a9412689bbc092e6cec45199f}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!CompilationUnitQueues@{CompilationUnitQueues}}
\index{CompilationUnitQueues@{CompilationUnitQueues}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{CompilationUnitQueues()}{CompilationUnitQueues()}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Compilation\+Unit\+Queues (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{num\+\_\+imported\+\_\+functions,  }\item[{\mbox{\hyperlink{classint}{int}}}]{num\+\_\+declared\+\_\+functions }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line 115 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{117       : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}{num\_imported\_functions\_}}(num\_imported\_functions),}
\DoxyCodeLine{118         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}{num\_declared\_functions\_}}(num\_declared\_functions) \{}
\DoxyCodeLine{119     \textcolor{comment}{// Add one first queue, to add units to.}}
\DoxyCodeLine{120     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.emplace\_back(std::make\_unique<QueueImpl>(0));}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 \textcolor{preprocessor}{\#if !defined(\_\_cpp\_lib\_atomic\_value\_initialization) || \(\backslash\)}}
\DoxyCodeLine{123 \textcolor{preprocessor}{    \_\_cpp\_lib\_atomic\_value\_initialization < 201911L}}
\DoxyCodeLine{124     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& atomic\_counter : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}) \{}
\DoxyCodeLine{125       std::atomic\_init(\&atomic\_counter, \textcolor{keywordtype}{size\_t}\{0\});}
\DoxyCodeLine{126     \}}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\_tier\_compiled\_}} =}
\DoxyCodeLine{130         std::make\_unique<std::atomic<bool>[]>(num\_declared\_functions);}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \textcolor{preprocessor}{\#if !defined(\_\_cpp\_lib\_atomic\_value\_initialization) || \(\backslash\)}}
\DoxyCodeLine{133 \textcolor{preprocessor}{    \_\_cpp\_lib\_atomic\_value\_initialization < 201911L}}
\DoxyCodeLine{134     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < num\_declared\_functions; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{135       std::atomic\_init(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\_tier\_compiled\_}}.get()[\mbox{\hyperlink{namespacev8_1_1internal}{i}}], \textcolor{keyword}{false});}
\DoxyCodeLine{136     \}}
\DoxyCodeLine{137 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{138   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a91aaa8c461c03f44c2d900f81526d1d4}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a91aaa8c461c03f44c2d900f81526d1d4}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!AddTopTierPriorityUnit@{AddTopTierPriorityUnit}}
\index{AddTopTierPriorityUnit@{AddTopTierPriorityUnit}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{AddTopTierPriorityUnit()}{AddTopTierPriorityUnit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Add\+Top\+Tier\+Priority\+Unit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}}]{unit,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{priority }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 234 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{234                                                                          \{}
\DoxyCodeLine{235     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} queues\_guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{236     \textcolor{comment}{// Add to the individual queues in a round-\/robin fashion. No special care is}}
\DoxyCodeLine{237     \textcolor{comment}{// taken to balance them; they will be balanced by work stealing.}}
\DoxyCodeLine{238     \textcolor{comment}{// Priorities should only be seen as a hint here; without balancing, we}}
\DoxyCodeLine{239     \textcolor{comment}{// might pop a unit with lower priority from one queue while other queues}}
\DoxyCodeLine{240     \textcolor{comment}{// still hold higher-\/priority units.}}
\DoxyCodeLine{241     \textcolor{comment}{// Since updating priorities in a std::priority\_queue is difficult, we just}}
\DoxyCodeLine{242     \textcolor{comment}{// add new units with higher priorities, and use the}}
\DoxyCodeLine{243     \textcolor{comment}{// \{CompilationUnitQueues::top\_tier\_compiled\_\} array to discard units for}}
\DoxyCodeLine{244     \textcolor{comment}{// functions which are already being compiled.}}
\DoxyCodeLine{245     \textcolor{keywordtype}{int} queue\_to\_add = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}{next\_queue\_to\_add}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{246     \textcolor{keywordflow}{while} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}{next\_queue\_to\_add}}.compare\_exchange\_weak(}
\DoxyCodeLine{247         queue\_to\_add, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31d34448ce13cf296171c77f1d498b9f}{next\_task\_id}}(queue\_to\_add, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size()),}
\DoxyCodeLine{248         std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{249       \textcolor{comment}{// Retry with updated \{queue\_to\_add\}.}}
\DoxyCodeLine{250     \}}
\DoxyCodeLine{251 }
\DoxyCodeLine{252     \{}
\DoxyCodeLine{253       \textcolor{keyword}{auto}* queue = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[queue\_to\_add].get();}
\DoxyCodeLine{254       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&queue-\/>mutex);}
\DoxyCodeLine{255       queue-\/>top\_tier\_priority\_units.emplace(priority, unit);}
\DoxyCodeLine{256       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}{num\_priority\_units\_}}.fetch\_add(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{257       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf}{CompilationTier::kTopTier}}].fetch\_add(}
\DoxyCodeLine{258           1, std::memory\_order\_relaxed);}
\DoxyCodeLine{259     \}}
\DoxyCodeLine{260   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Top\+Tier.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Add\+Top\+Tier\+Priority\+Compilation\+Unit().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a91aaa8c461c03f44c2d900f81526d1d4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31357ad240d5b25fb61558f17ae39c94}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31357ad240d5b25fb61558f17ae39c94}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!AddUnits@{AddUnits}}
\index{AddUnits@{AddUnits}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{AddUnits()}{AddUnits()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Add\+Units (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$}]{baseline\+\_\+units,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}} $>$}]{top\+\_\+tier\+\_\+units,  }\item[{const \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmModule}{Wasm\+Module}} $\ast$}]{module }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 191 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{193                                           \{}
\DoxyCodeLine{194     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0, baseline\_units.size() + top\_tier\_units.size());}
\DoxyCodeLine{195     \textcolor{comment}{// Add to the individual queues in a round-\/robin fashion. No special care is}}
\DoxyCodeLine{196     \textcolor{comment}{// taken to balance them; they will be balanced by work stealing.}}
\DoxyCodeLine{197     QueueImpl* queue;}
\DoxyCodeLine{198     \{}
\DoxyCodeLine{199       \textcolor{keywordtype}{int} queue\_to\_add = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}{next\_queue\_to\_add}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{200       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} queues\_guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{201       \textcolor{keywordflow}{while} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}{next\_queue\_to\_add}}.compare\_exchange\_weak(}
\DoxyCodeLine{202           queue\_to\_add, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31d34448ce13cf296171c77f1d498b9f}{next\_task\_id}}(queue\_to\_add, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size()),}
\DoxyCodeLine{203           std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{204         \textcolor{comment}{// Retry with updated \{queue\_to\_add\}.}}
\DoxyCodeLine{205       \}}
\DoxyCodeLine{206       queue = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[queue\_to\_add].get();}
\DoxyCodeLine{207     \}}
\DoxyCodeLine{208 }
\DoxyCodeLine{209     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&queue-\/>mutex);}
\DoxyCodeLine{210     std::optional<base::MutexGuard> big\_units\_guard;}
\DoxyCodeLine{211     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} pair :}
\DoxyCodeLine{212          \{std::make\_pair(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a2a11c6a5dff5cdb0647ee1f3988baf5f}{CompilationTier::kBaseline}}, baseline\_units),}
\DoxyCodeLine{213           std::make\_pair(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf}{CompilationTier::kTopTier}}, top\_tier\_units)\}) \{}
\DoxyCodeLine{214       \textcolor{keywordtype}{int} \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}} = pair.first;}
\DoxyCodeLine{215       base::Vector<WasmCompilationUnit> units = pair.second;}
\DoxyCodeLine{216       \textcolor{keywordflow}{if} (units.empty()) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{217       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].fetch\_add(units.size(), std::memory\_order\_relaxed);}
\DoxyCodeLine{218       \textcolor{keywordflow}{for} (WasmCompilationUnit unit : units) \{}
\DoxyCodeLine{219         \textcolor{keywordtype}{size\_t} func\_size = module-\/>functions[unit.func\_index()].code.length();}
\DoxyCodeLine{220         \textcolor{keywordflow}{if} (func\_size <= \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aaa71680e1fa9e16dc8456969e7c4ef19}{kBigUnitsLimit}}) \{}
\DoxyCodeLine{221           queue-\/>units[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].push\_back(unit);}
\DoxyCodeLine{222         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{223           \textcolor{keywordflow}{if} (!big\_units\_guard) \{}
\DoxyCodeLine{224             big\_units\_guard.emplace(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_acb7941e826d5a0c58c9e008ed08135ae}{mutex}});}
\DoxyCodeLine{225           \}}
\DoxyCodeLine{226           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_ab9e68aeeb2416eb5875e31cd2a54370a}{has\_units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].store(\textcolor{keyword}{true},}
\DoxyCodeLine{227                                                  std::memory\_order\_relaxed);}
\DoxyCodeLine{228           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].emplace(func\_size, unit);}
\DoxyCodeLine{229         \}}
\DoxyCodeLine{230       \}}
\DoxyCodeLine{231     \}}
\DoxyCodeLine{232   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+LT, v8\+::base\+::\+Vector$<$ T $>$\+::empty(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::functions, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Baseline, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Top\+Tier, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::mutex, v8\+::base\+::\+Vector$<$ T $>$\+::size(), and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::units.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Commit\+Compilation\+Units().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31357ad240d5b25fb61558f17ae39c94_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31357ad240d5b25fb61558f17ae39c94_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ac5cf3ece9a08ba65c92468996df796f6}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ac5cf3ece9a08ba65c92468996df796f6}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!AllowAnotherTopTierJob@{AllowAnotherTopTierJob}}
\index{AllowAnotherTopTierJob@{AllowAnotherTopTierJob}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{AllowAnotherTopTierJob()}{AllowAnotherTopTierJob()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Allow\+Another\+Top\+Tier\+Job (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{func\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 270 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{270                                                    \{}
\DoxyCodeLine{271     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\_tier\_compiled\_}}[\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}{declared\_function\_index}}(func\_index)].store(}
\DoxyCodeLine{272         \textcolor{keyword}{false}, std::memory\_order\_relaxed);}
\DoxyCodeLine{273   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::declared\+\_\+function\+\_\+index().



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+On\+Finished\+Units().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ac5cf3ece9a08ba65c92468996df796f6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ac5cf3ece9a08ba65c92468996df796f6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!declared\_function\_index@{declared\_function\_index}}
\index{declared\_function\_index@{declared\_function\_index}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{declared\_function\_index()}{declared\_function\_index()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::declared\+\_\+function\+\_\+index (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{func\+\_\+index }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 509 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{509                                                     \{}
\DoxyCodeLine{510     \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}{num\_imported\_functions\_}}, func\_index);}
\DoxyCodeLine{511     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(func\_index, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}{num\_imported\_functions\_}} + \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}{num\_declared\_functions\_}});}
\DoxyCodeLine{512     \textcolor{keywordflow}{return} func\_index -\/ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}{num\_imported\_functions\_}};}
\DoxyCodeLine{513   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+LE, and DCHECK\+\_\+\+LT.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a5b2dc02f4ff6da74814b0b2def2df264}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a5b2dc02f4ff6da74814b0b2def2df264}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!EstimateCurrentMemoryConsumption@{EstimateCurrentMemoryConsumption}}
\index{EstimateCurrentMemoryConsumption@{EstimateCurrentMemoryConsumption}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{EstimateCurrentMemoryConsumption()}{EstimateCurrentMemoryConsumption()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Estimate\+Current\+Memory\+Consumption (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 530 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{530                                                                      \{}
\DoxyCodeLine{531   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a72c16e7a9412689bbc092e6cec45199f}{CompilationUnitQueues}}, 176);}
\DoxyCodeLine{532   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(QueueImpl, 112);}
\DoxyCodeLine{533   \mbox{\hyperlink{std-object-sizes_8h_a56caa02a4280c4f0c82adab429400770}{UPDATE\_WHEN\_CLASS\_CHANGES}}(BigUnitsQueue, 88);}
\DoxyCodeLine{534   \textcolor{comment}{// Not including sizeof(CompilationUnitQueues) because that's included in}}
\DoxyCodeLine{535   \textcolor{comment}{// sizeof(CompilationStateImpl).}}
\DoxyCodeLine{536   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = 0;}
\DoxyCodeLine{537   \{}
\DoxyCodeLine{538     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} mutex\_guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}});}
\DoxyCodeLine{539     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}) + \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size() * \textcolor{keyword}{sizeof}(QueueImpl);}
\DoxyCodeLine{540     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& q : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}) \{}
\DoxyCodeLine{541       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&q-\/>mutex);}
\DoxyCodeLine{542       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_aa122591443234c1d0b597dadc9d55c5e}{ContentSize}}(*q-\/>units);}
\DoxyCodeLine{543       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += q-\/>top\_tier\_priority\_units.size() * \textcolor{keyword}{sizeof}(TopTierPriorityUnit);}
\DoxyCodeLine{544     \}}
\DoxyCodeLine{545   \}}
\DoxyCodeLine{546   \{}
\DoxyCodeLine{547     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} lock(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_acb7941e826d5a0c58c9e008ed08135ae}{mutex}});}
\DoxyCodeLine{548     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[0].size() * \textcolor{keyword}{sizeof}(BigUnit);}
\DoxyCodeLine{549     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[1].size() * \textcolor{keyword}{sizeof}(BigUnit);}
\DoxyCodeLine{550   \}}
\DoxyCodeLine{551   \textcolor{comment}{// For \{top\_tier\_compiled\_\}.}}
\DoxyCodeLine{552   \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} += \textcolor{keyword}{sizeof}(std::atomic<bool>) * \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}{num\_declared\_functions\_}};}
\DoxyCodeLine{553   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{554 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Content\+Size(), v8\+::base\+::internal\+::result, and UPDATE\+\_\+\+WHEN\+\_\+\+CLASS\+\_\+\+CHANGES.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a5b2dc02f4ff6da74814b0b2def2df264_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd207574701d74f08e9dd7875aa71269}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd207574701d74f08e9dd7875aa71269}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetBigUnitOfTier@{GetBigUnitOfTier}}
\index{GetBigUnitOfTier@{GetBigUnitOfTier}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetBigUnitOfTier()}{GetBigUnitOfTier()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Big\+Unit\+Of\+Tier (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{tier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 392 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{392                                                               \{}
\DoxyCodeLine{393     \textcolor{comment}{// Fast path without locking.}}
\DoxyCodeLine{394     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_ab9e68aeeb2416eb5875e31cd2a54370a}{has\_units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].load(std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{395       \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{396     \}}
\DoxyCodeLine{397     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_acb7941e826d5a0c58c9e008ed08135ae}{mutex}});}
\DoxyCodeLine{398     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].empty()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{399     WasmCompilationUnit unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].top().unit;}
\DoxyCodeLine{400     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].pop();}
\DoxyCodeLine{401     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_a013b110c7926e2893ca1b791d6857526}{units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].empty()) \{}
\DoxyCodeLine{402       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}{big\_units\_queue\_}}.\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue_ab9e68aeeb2416eb5875e31cd2a54370a}{has\_units}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].store(\textcolor{keyword}{false}, std::memory\_order\_relaxed);}
\DoxyCodeLine{403     \}}
\DoxyCodeLine{404     \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{405   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a3e5e5349a621aac9f3111fe61b580c43}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a3e5e5349a621aac9f3111fe61b580c43}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetNextUnit@{GetNextUnit}}
\index{GetNextUnit@{GetNextUnit}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetNextUnit()}{GetNextUnit()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Next\+Unit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}} $\ast$}]{queue,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5}{Compilation\+Tier}}}]{tier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 179 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{180                                                                        \{}
\DoxyCodeLine{181     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c}{CompilationTier::kNumTiers}});}
\DoxyCodeLine{182     \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aa477a5485afbdc372a13736797e2c0cf}{GetNextUnitOfTier}}(queue, \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})) \{}
\DoxyCodeLine{183       [[maybe\_unused]] \textcolor{keywordtype}{size\_t} old\_units\_count =}
\DoxyCodeLine{184           \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].fetch\_sub(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{185       \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(1, old\_units\_count);}
\DoxyCodeLine{186       \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{187     \}}
\DoxyCodeLine{188     \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{189   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+LE, DCHECK\+\_\+\+LT, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Num\+Tiers.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Get\+Next\+Compilation\+Unit().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a3e5e5349a621aac9f3111fe61b580c43_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aa477a5485afbdc372a13736797e2c0cf}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aa477a5485afbdc372a13736797e2c0cf}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetNextUnitOfTier@{GetNextUnitOfTier}}
\index{GetNextUnitOfTier@{GetNextUnitOfTier}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetNextUnitOfTier()}{GetNextUnitOfTier()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Next\+Unit\+Of\+Tier (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}} $\ast$}]{public\+\_\+queue,  }\item[{\mbox{\hyperlink{classint}{int}}}]{tier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 346 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{347                                                                  \{}
\DoxyCodeLine{348     QueueImpl* queue = \textcolor{keyword}{static\_cast<}QueueImpl*\textcolor{keyword}{>}(public\_queue);}
\DoxyCodeLine{349 }
\DoxyCodeLine{350     \textcolor{comment}{// First check whether there is a priority unit. Execute that first.}}
\DoxyCodeLine{351     \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}} == \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf}{CompilationTier::kTopTier}}) \{}
\DoxyCodeLine{352       \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a04f890a174602830b61b1a0423852c4c}{GetTopTierPriorityUnit}}(queue)) \{}
\DoxyCodeLine{353         \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{354       \}}
\DoxyCodeLine{355     \}}
\DoxyCodeLine{356 }
\DoxyCodeLine{357     \textcolor{comment}{// Then check whether there is a big unit of that tier.}}
\DoxyCodeLine{358     \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd207574701d74f08e9dd7875aa71269}{GetBigUnitOfTier}}(\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})) \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{359 }
\DoxyCodeLine{360     \textcolor{comment}{// Finally check whether our own queue has a unit of the wanted tier. If}}
\DoxyCodeLine{361     \textcolor{comment}{// so, return it, otherwise get the task id to steal from.}}
\DoxyCodeLine{362     \textcolor{keywordtype}{int} steal\_task\_id;}
\DoxyCodeLine{363     \{}
\DoxyCodeLine{364       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} mutex\_guard(\&queue-\/>mutex);}
\DoxyCodeLine{365       \textcolor{keywordflow}{if} (!queue-\/>units[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].empty()) \{}
\DoxyCodeLine{366         \textcolor{keyword}{auto} unit = queue-\/>units[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].back();}
\DoxyCodeLine{367         queue-\/>units[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].pop\_back();}
\DoxyCodeLine{368         \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{369       \}}
\DoxyCodeLine{370       steal\_task\_id = queue-\/>next\_steal\_task\_id;}
\DoxyCodeLine{371     \}}
\DoxyCodeLine{372 }
\DoxyCodeLine{373     \textcolor{comment}{// Try to steal from all other queues. If this succeeds, return one of the}}
\DoxyCodeLine{374     \textcolor{comment}{// stolen units.}}
\DoxyCodeLine{375     \{}
\DoxyCodeLine{376       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{377       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} steal\_trials = 0; steal\_trials < \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size();}
\DoxyCodeLine{378            ++steal\_trials, ++steal\_task\_id) \{}
\DoxyCodeLine{379         \textcolor{keywordflow}{if} (steal\_task\_id >= \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size())) \{}
\DoxyCodeLine{380           steal\_task\_id = 0;}
\DoxyCodeLine{381         \}}
\DoxyCodeLine{382         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9e79ae6cf67a501ea13f057de7cbd852}{StealUnitsAndGetFirst}}(queue, steal\_task\_id, \mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}})) \{}
\DoxyCodeLine{383           \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{384         \}}
\DoxyCodeLine{385       \}}
\DoxyCodeLine{386     \}}
\DoxyCodeLine{387 }
\DoxyCodeLine{388     \textcolor{comment}{// If we reach here, we didn't find any unit of the requested tier.}}
\DoxyCodeLine{389     \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{390   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Top\+Tier, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::mutex, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::next\+\_\+steal\+\_\+task\+\_\+id, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::units.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aef9c5e4fddae1550ab5ca318583d4c6d}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aef9c5e4fddae1550ab5ca318583d4c6d}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetQueueForTask@{GetQueueForTask}}
\index{GetQueueForTask@{GetQueueForTask}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetQueueForTask()}{GetQueueForTask()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1Queue}{Queue}}$\ast$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Queue\+For\+Task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{task\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 140 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{140                                       \{}
\DoxyCodeLine{141     \textcolor{keywordtype}{int} required\_queues = task\_id + 1;}
\DoxyCodeLine{142     \{}
\DoxyCodeLine{143       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} queues\_guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{144       \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a4f489f1b838163ab33f251c9e470d938}{V8\_LIKELY}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size()) >= required\_queues)) \{}
\DoxyCodeLine{145         \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[task\_id].get();}
\DoxyCodeLine{146       \}}
\DoxyCodeLine{147     \}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \textcolor{comment}{// Otherwise increase the number of queues.}}
\DoxyCodeLine{150     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} queues\_guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{151     \textcolor{keywordtype}{int} num\_queues = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size());}
\DoxyCodeLine{152     \textcolor{keywordflow}{while} (num\_queues < required\_queues) \{}
\DoxyCodeLine{153       \textcolor{keywordtype}{int} steal\_from = num\_queues + 1;}
\DoxyCodeLine{154       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.emplace\_back(std::make\_unique<QueueImpl>(steal\_from));}
\DoxyCodeLine{155       ++num\_queues;}
\DoxyCodeLine{156     \}}
\DoxyCodeLine{157 }
\DoxyCodeLine{158     \textcolor{comment}{// Update the \{publish\_limit\}s of all queues.}}
\DoxyCodeLine{159 }
\DoxyCodeLine{160     \textcolor{comment}{// We want background threads to publish regularly (to avoid contention when}}
\DoxyCodeLine{161     \textcolor{comment}{// they are all publishing at the end). On the other side, each publishing}}
\DoxyCodeLine{162     \textcolor{comment}{// has some overhead (part of it for synchronizing between threads), so it}}
\DoxyCodeLine{163     \textcolor{comment}{// should not happen *too* often. Thus aim for 4-\/8 publishes per thread, but}}
\DoxyCodeLine{164     \textcolor{comment}{// distribute it such that publishing is likely to happen at different}}
\DoxyCodeLine{165     \textcolor{comment}{// times.}}
\DoxyCodeLine{166     \textcolor{keywordtype}{int} units\_per\_thread = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}{num\_declared\_functions\_}} / num\_queues;}
\DoxyCodeLine{167     \textcolor{keywordtype}{int} min = std::max(10, units\_per\_thread / 8);}
\DoxyCodeLine{168     \textcolor{keywordtype}{int} queue\_id = 0;}
\DoxyCodeLine{169     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& queue : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}) \{}
\DoxyCodeLine{170       \textcolor{comment}{// Set a limit between \{min\} and \{2*min\}, but not smaller than \{10\}.}}
\DoxyCodeLine{171       \textcolor{keywordtype}{int} limit = min + (min * queue\_id / num\_queues);}
\DoxyCodeLine{172       queue-\/>publish\_limit.store(limit, std::memory\_order\_relaxed);}
\DoxyCodeLine{173       ++queue\_id;}
\DoxyCodeLine{174     \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[task\_id].get();}
\DoxyCodeLine{177   \}}

\end{DoxyCode}


References V8\+\_\+\+LIKELY.



Referenced by v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+State\+Impl\+::\+Get\+Queue\+For\+Compile\+Task().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aef9c5e4fddae1550ab5ca318583d4c6d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd58ed5c7aa92fd01ef858dd4a885a68}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_acd58ed5c7aa92fd01ef858dd4a885a68}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetSizeForTier@{GetSizeForTier}}
\index{GetSizeForTier@{GetSizeForTier}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetSizeForTier()}{GetSizeForTier()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Size\+For\+Tier (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5}{Compilation\+Tier}}}]{tier }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 265 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{265                                                     \{}
\DoxyCodeLine{266     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a858dc986c63dc1a7d53bf74bbe83d40c}{CompilationTier::kNumTiers}});}
\DoxyCodeLine{267     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{flag-definitions_8h_a878783ad616ead06040f7d4b080f6a02}{tier}}].load(std::memory\_order\_relaxed);}
\DoxyCodeLine{268   \}}

\end{DoxyCode}


References DCHECK\+\_\+\+LT, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Num\+Tiers.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a04f890a174602830b61b1a0423852c4c}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a04f890a174602830b61b1a0423852c4c}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!GetTopTierPriorityUnit@{GetTopTierPriorityUnit}}
\index{GetTopTierPriorityUnit@{GetTopTierPriorityUnit}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{GetTopTierPriorityUnit()}{GetTopTierPriorityUnit()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Get\+Top\+Tier\+Priority\+Unit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$}]{queue }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 407 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{407                                                                             \{}
\DoxyCodeLine{408     \textcolor{comment}{// Fast path without locking.}}
\DoxyCodeLine{409     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}{num\_priority\_units\_}}.load(std::memory\_order\_relaxed) == 0) \{}
\DoxyCodeLine{410       \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{411     \}}
\DoxyCodeLine{412 }
\DoxyCodeLine{413     \textcolor{keywordtype}{int} steal\_task\_id;}
\DoxyCodeLine{414     \{}
\DoxyCodeLine{415       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} mutex\_guard(\&queue-\/>mutex);}
\DoxyCodeLine{416       \textcolor{keywordflow}{while} (!queue-\/>top\_tier\_priority\_units.empty()) \{}
\DoxyCodeLine{417         \textcolor{keyword}{auto} unit = queue-\/>top\_tier\_priority\_units.top().unit;}
\DoxyCodeLine{418         queue-\/>top\_tier\_priority\_units.pop();}
\DoxyCodeLine{419         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}{num\_priority\_units\_}}.fetch\_sub(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{420 }
\DoxyCodeLine{421         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\_tier\_compiled\_}}[\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}{declared\_function\_index}}(unit.func\_index())]}
\DoxyCodeLine{422                  .exchange(\textcolor{keyword}{true}, std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{423           \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{424         \}}
\DoxyCodeLine{425         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf}{CompilationTier::kTopTier}}].fetch\_sub(}
\DoxyCodeLine{426             1, std::memory\_order\_relaxed);}
\DoxyCodeLine{427       \}}
\DoxyCodeLine{428       steal\_task\_id = queue-\/>next\_steal\_task\_id;}
\DoxyCodeLine{429     \}}
\DoxyCodeLine{430 }
\DoxyCodeLine{431     \textcolor{comment}{// Try to steal from all other queues. If this succeeds, return one of the}}
\DoxyCodeLine{432     \textcolor{comment}{// stolen units.}}
\DoxyCodeLine{433     \{}
\DoxyCodeLine{434       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard\{\&\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}{queues\_mutex\_}}\};}
\DoxyCodeLine{435       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} steal\_trials = 0; steal\_trials < \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size();}
\DoxyCodeLine{436            ++steal\_trials, ++steal\_task\_id) \{}
\DoxyCodeLine{437         \textcolor{keywordflow}{if} (steal\_task\_id >= \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}.size())) \{}
\DoxyCodeLine{438           steal\_task\_id = 0;}
\DoxyCodeLine{439         \}}
\DoxyCodeLine{440         \textcolor{keywordflow}{if} (\textcolor{keyword}{auto} unit = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aba1d01818282df3fa67d79db5f02a9f3}{StealTopTierPriorityUnit}}(queue, steal\_task\_id)) \{}
\DoxyCodeLine{441           \textcolor{keywordflow}{return} unit;}
\DoxyCodeLine{442         \}}
\DoxyCodeLine{443       \}}
\DoxyCodeLine{444     \}}
\DoxyCodeLine{445 }
\DoxyCodeLine{446     \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{447   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::declared\+\_\+function\+\_\+index(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Top\+Tier, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::mutex, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::next\+\_\+steal\+\_\+task\+\_\+id, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::top\+\_\+tier\+\_\+priority\+\_\+units.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a04f890a174602830b61b1a0423852c4c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31d34448ce13cf296171c77f1d498b9f}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a31d34448ce13cf296171c77f1d498b9f}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!next\_task\_id@{next\_task\_id}}
\index{next\_task\_id@{next\_task\_id}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{next\_task\_id()}{next\_task\_id()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::next\+\_\+task\+\_\+id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{task\+\_\+id,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{num\+\_\+queues }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 341 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{341                                                          \{}
\DoxyCodeLine{342     \textcolor{keywordtype}{int} next = task\_id + 1;}
\DoxyCodeLine{343     \textcolor{keywordflow}{return} next == \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(num\_queues) ? 0 : next;}
\DoxyCodeLine{344   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aba1d01818282df3fa67d79db5f02a9f3}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aba1d01818282df3fa67d79db5f02a9f3}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!StealTopTierPriorityUnit@{StealTopTierPriorityUnit}}
\index{StealTopTierPriorityUnit@{StealTopTierPriorityUnit}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{StealTopTierPriorityUnit()}{StealTopTierPriorityUnit()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Steal\+Top\+Tier\+Priority\+Unit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$}]{queue,  }\item[{\mbox{\hyperlink{classint}{int}}}]{steal\+\_\+from\+\_\+task\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 480 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{481                                                 \{}
\DoxyCodeLine{482     \textcolor{keyword}{auto}* steal\_queue = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[steal\_from\_task\_id].get();}
\DoxyCodeLine{483     \textcolor{comment}{// Cannot steal from own queue.}}
\DoxyCodeLine{484     \textcolor{keywordflow}{if} (steal\_queue == queue) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{485     std::optional<WasmCompilationUnit> returned\_unit;}
\DoxyCodeLine{486     \{}
\DoxyCodeLine{487       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&steal\_queue-\/>mutex);}
\DoxyCodeLine{488       \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{489         \textcolor{keywordflow}{if} (steal\_queue-\/>top\_tier\_priority\_units.empty()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{490 }
\DoxyCodeLine{491         \textcolor{keyword}{auto} unit = steal\_queue-\/>top\_tier\_priority\_units.top().unit;}
\DoxyCodeLine{492         steal\_queue-\/>top\_tier\_priority\_units.pop();}
\DoxyCodeLine{493         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}{num\_priority\_units\_}}.fetch\_sub(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{494 }
\DoxyCodeLine{495         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}{top\_tier\_compiled\_}}[\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9501c1c937476a50964a10f42632fc5c}{declared\_function\_index}}(unit.func\_index())]}
\DoxyCodeLine{496                  .exchange(\textcolor{keyword}{true}, std::memory\_order\_relaxed)) \{}
\DoxyCodeLine{497           returned\_unit = unit;}
\DoxyCodeLine{498           \textcolor{keywordflow}{break};}
\DoxyCodeLine{499         \}}
\DoxyCodeLine{500         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}{num\_units\_}}[\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_aef575f4d4842a6dcdb81b8c172df9eb5a7d4e18577ff3900f63c397998a03e7cf}{CompilationTier::kTopTier}}].fetch\_sub(}
\DoxyCodeLine{501             1, std::memory\_order\_relaxed);}
\DoxyCodeLine{502       \}}
\DoxyCodeLine{503     \}}
\DoxyCodeLine{504     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&queue-\/>mutex);}
\DoxyCodeLine{505     queue-\/>next\_steal\_task\_id = steal\_from\_task\_id + 1;}
\DoxyCodeLine{506     \textcolor{keywordflow}{return} returned\_unit;}
\DoxyCodeLine{507   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::declared\+\_\+function\+\_\+index(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::k\+Top\+Tier, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::mutex, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::next\+\_\+steal\+\_\+task\+\_\+id.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aba1d01818282df3fa67d79db5f02a9f3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9e79ae6cf67a501ea13f057de7cbd852}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a9e79ae6cf67a501ea13f057de7cbd852}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!StealUnitsAndGetFirst@{StealUnitsAndGetFirst}}
\index{StealUnitsAndGetFirst@{StealUnitsAndGetFirst}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{StealUnitsAndGetFirst()}{StealUnitsAndGetFirst()}}
{\footnotesize\ttfamily std\+::optional$<$\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCompilationUnit}{Wasm\+Compilation\+Unit}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::\+Steal\+Units\+And\+Get\+First (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}} $\ast$}]{queue,  }\item[{\mbox{\hyperlink{classint}{int}}}]{steal\+\_\+from\+\_\+task\+\_\+id,  }\item[{\mbox{\hyperlink{classint}{int}}}]{wanted\+\_\+tier }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 453 of file module-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{454                                                                  \{}
\DoxyCodeLine{455     \textcolor{keyword}{auto}* steal\_queue = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}{queues\_}}[steal\_from\_task\_id].get();}
\DoxyCodeLine{456     \textcolor{comment}{// Cannot steal from own queue.}}
\DoxyCodeLine{457     \textcolor{keywordflow}{if} (steal\_queue == queue) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{458     std::vector<WasmCompilationUnit> stolen;}
\DoxyCodeLine{459     std::optional<WasmCompilationUnit> returned\_unit;}
\DoxyCodeLine{460     \{}
\DoxyCodeLine{461       \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&steal\_queue-\/>mutex);}
\DoxyCodeLine{462       \textcolor{keyword}{auto}* steal\_from\_vector = \&steal\_queue-\/>units[wanted\_tier];}
\DoxyCodeLine{463       \textcolor{keywordflow}{if} (steal\_from\_vector-\/>empty()) \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{464       \textcolor{keywordtype}{size\_t} remaining = steal\_from\_vector-\/>size() / 2;}
\DoxyCodeLine{465       \textcolor{keyword}{auto} steal\_begin = steal\_from\_vector-\/>begin() + remaining;}
\DoxyCodeLine{466       returned\_unit = *steal\_begin;}
\DoxyCodeLine{467       stolen.assign(steal\_begin + 1, steal\_from\_vector-\/>end());}
\DoxyCodeLine{468       steal\_from\_vector-\/>erase(steal\_begin, steal\_from\_vector-\/>end());}
\DoxyCodeLine{469     \}}
\DoxyCodeLine{470     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} guard(\&queue-\/>mutex);}
\DoxyCodeLine{471     \textcolor{keyword}{auto}* target\_queue = \&queue-\/>units[wanted\_tier];}
\DoxyCodeLine{472     target\_queue-\/>insert(target\_queue-\/>end(), stolen.begin(), stolen.end());}
\DoxyCodeLine{473     queue-\/>next\_steal\_task\_id = steal\_from\_task\_id + 1;}
\DoxyCodeLine{474     \textcolor{keywordflow}{return} returned\_unit;}
\DoxyCodeLine{475   \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::mutex, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::next\+\_\+steal\+\_\+task\+\_\+id, and v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::\+Compilation\+Unit\+Queues\+::\+Queue\+Impl\+::units.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a8989f95757602c9431351e25ac1cc181}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!big\_units\_queue\_@{big\_units\_queue\_}}
\index{big\_units\_queue\_@{big\_units\_queue\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{big\_units\_queue\_}{big\_units\_queue\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1BigUnitsQueue}{Big\+Units\+Queue}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::big\+\_\+units\+\_\+queue\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 522 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aaa71680e1fa9e16dc8456969e7c4ef19}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_aaa71680e1fa9e16dc8456969e7c4ef19}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!kBigUnitsLimit@{kBigUnitsLimit}}
\index{kBigUnitsLimit@{kBigUnitsLimit}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{kBigUnitsLimit}{kBigUnitsLimit}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::k\+Big\+Units\+Limit = 4096\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [private]}}



Definition at line 280 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ad9edee14a7152db86eea9b33e49847db}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!next\_queue\_to\_add@{next\_queue\_to\_add}}
\index{next\_queue\_to\_add@{next\_queue\_to\_add}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{next\_queue\_to\_add}{next\_queue\_to\_add}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{classint}{int}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::next\+\_\+queue\+\_\+to\+\_\+add \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 527 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a910e2a4d32ed0858ce4e69e2ff8b5c52}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!num\_declared\_functions\_@{num\_declared\_functions\_}}
\index{num\_declared\_functions\_@{num\_declared\_functions\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{num\_declared\_functions\_}{num\_declared\_functions\_}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::num\+\_\+declared\+\_\+functions\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 520 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae86f836350eec97e4895fa52b07307fd}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!num\_imported\_functions\_@{num\_imported\_functions\_}}
\index{num\_imported\_functions\_@{num\_imported\_functions\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{num\_imported\_functions\_}{num\_imported\_functions\_}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classint}{int}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::num\+\_\+imported\+\_\+functions\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 519 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a1a058b7cad0b977e75dacecdedd4374e}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!num\_priority\_units\_@{num\_priority\_units\_}}
\index{num\_priority\_units\_@{num\_priority\_units\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{num\_priority\_units\_}{num\_priority\_units\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::num\+\_\+priority\+\_\+units\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 525 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_ae2bac67185659a6b28f81f7369ebbea9}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!num\_units\_@{num\_units\_}}
\index{num\_units\_@{num\_units\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{num\_units\_}{num\_units\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::num\+\_\+units\+\_\+\mbox{[}Compilation\+Tier\+::k\+Num\+Tiers\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 524 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a53ed0704366f808515d01af92d818889}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!queues\_@{queues\_}}
\index{queues\_@{queues\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{queues\_}{queues\_}}
{\footnotesize\ttfamily std\+::vector$<$std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_1_1QueueImpl}{Queue\+Impl}}$>$ $>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::queues\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 517 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a807c3257bde86da495fc00d456573adc}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!queues\_mutex\_@{queues\_mutex\_}}
\index{queues\_mutex\_@{queues\_mutex\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{queues\_mutex\_}{queues\_mutex\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::queues\+\_\+mutex\+\_\+\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}



Definition at line 516 of file module-\/compiler.\+cc.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}\label{classv8_1_1internal_1_1wasm_1_1anonymous__namespace_02module-compiler_8cc_03_1_1CompilationUnitQueues_a97b3d3e8de6b1cfcb7b063878d837de9}} 
\index{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}!top\_tier\_compiled\_@{top\_tier\_compiled\_}}
\index{top\_tier\_compiled\_@{top\_tier\_compiled\_}!v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues@{v8::internal::wasm::anonymous\_namespace\lcurly{}module-\/compiler.cc\rcurly{}::CompilationUnitQueues}}
\doxysubsubsection{\texorpdfstring{top\_tier\_compiled\_}{top\_tier\_compiled\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}}$>$\mbox{[}$\,$\mbox{]}$>$ v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{module-\/compiler.\+cc\}\+::Compilation\+Unit\+Queues\+::top\+\_\+tier\+\_\+compiled\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 526 of file module-\/compiler.\+cc.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{module-compiler_8cc}{module-\/compiler.\+cc}}\end{DoxyCompactItemize}
