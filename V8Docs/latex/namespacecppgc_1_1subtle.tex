\hypertarget{namespacecppgc_1_1subtle}{}\doxysection{cppgc\+::subtle Namespace Reference}
\label{namespacecppgc_1_1subtle}\index{cppgc::subtle@{cppgc::subtle}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcppgc_1_1subtle_1_1HeapConsistency}{Heap\+Consistency}}
\begin{DoxyCompactList}\small\item\em {\bfseries{DO NOT USE\+: Use the appropriate managed types. }}\end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcppgc_1_1subtle_1_1DisallowGarbageCollectionScope}{Disallow\+Garbage\+Collection\+Scope}}
\begin{DoxyCompactList}\small\item\em Disallows garbage collection finalizations. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcppgc_1_1subtle_1_1NoGarbageCollectionScope}{No\+Garbage\+Collection\+Scope}}
\begin{DoxyCompactList}\small\item\em Avoids invoking garbage collection finalizations. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcppgc_1_1subtle_1_1HeapState}{Heap\+State}}
\begin{DoxyCompactList}\small\item\em Helpers to peek into heap-\/internal state. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classcppgc_1_1subtle_1_1TaggedUncompressedMember}{Tagged\+Uncompressed\+Member}}
\item 
struct \mbox{\hyperlink{structcppgc_1_1subtle_1_1ObjectSizeTrait}{Object\+Size\+Trait}}
\begin{DoxyCompactList}\small\item\em Trait specifying how to get the size of an object that was allocated using {\ttfamily \mbox{\hyperlink{namespacecppgc_a64d5bf849f628abd7c652091db8a8438}{Make\+Garbage\+Collected()}}}. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structcppgc_1_1subtle_1_1ObjectSizeTrait_3_01T_00_01false_01_4}{Object\+Size\+Trait$<$ T, false $>$}}
\item 
struct \mbox{\hyperlink{structcppgc_1_1subtle_1_1ObjectSizeTrait_3_01T_00_01true_01_4}{Object\+Size\+Trait$<$ T, true $>$}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\using \mbox{\hyperlink{namespacecppgc_1_1subtle_a9f22a6a0f1a04fa02cede3d0fec7a7a1}{Cross\+Thread\+Persistent}} = \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicCrossThreadPersistent}{internal\+::\+Basic\+Cross\+Thread\+Persistent}}$<$ \mbox{\hyperlink{classT}{T}}, \mbox{\hyperlink{structcppgc_1_1internal_1_1StrongCrossThreadPersistentPolicy}{internal\+::\+Strong\+Cross\+Thread\+Persistent\+Policy}} $>$
\begin{DoxyCompactList}\small\item\em {\bfseries{DO NOT USE\+: Has known caveats, see below. }}\end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\using \mbox{\hyperlink{namespacecppgc_1_1subtle_a5791fd10849f52326a84518bad4fef21}{Weak\+Cross\+Thread\+Persistent}} = \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicCrossThreadPersistent}{internal\+::\+Basic\+Cross\+Thread\+Persistent}}$<$ \mbox{\hyperlink{classT}{T}}, \mbox{\hyperlink{structcppgc_1_1internal_1_1WeakCrossThreadPersistentPolicy}{internal\+::\+Weak\+Cross\+Thread\+Persistent\+Policy}} $>$
\begin{DoxyCompactList}\small\item\em {\bfseries{DO NOT USE\+: Has known caveats, see below. }}\end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\using \mbox{\hyperlink{namespacecppgc_1_1subtle_acd6db2e89442920461706a52587c1bcf}{Uncompressed\+Member}} = \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicMember}{internal\+::\+Basic\+Member}}$<$ \mbox{\hyperlink{classT}{T}}, internal\+::\+Strong\+Member\+Tag, \mbox{\hyperlink{structcppgc_1_1internal_1_1DijkstraWriteBarrierPolicy}{internal\+::\+Dijkstra\+Write\+Barrier\+Policy}}, \mbox{\hyperlink{namespacecppgc_1_1internal_ad1bf2727769e8e94ad50da4518a164e5}{internal\+::\+Default\+Member\+Checking\+Policy}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1RawPointer}{internal\+::\+Raw\+Pointer}} $>$
\begin{DoxyCompactList}\small\item\em Uncompressed\+Member. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}{Free\+Unreferenced\+Object}} (\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \&heap\+\_\+handle, \mbox{\hyperlink{classT}{T}} \&object)
\begin{DoxyCompactList}\small\item\em Informs the garbage collector that {\ttfamily object} can be immediately reclaimed. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\bool \mbox{\hyperlink{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}{Resize}} (\mbox{\hyperlink{classT}{T}} \&object, \mbox{\hyperlink{structcppgc_1_1AdditionalBytes}{Additional\+Bytes}} additional\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Tries to resize {\ttfamily object} of type {\ttfamily \mbox{\hyperlink{classT}{T}}} with additional bytes on top of sizeof(\+T). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{namespacecppgc_1_1subtle_a9f22a6a0f1a04fa02cede3d0fec7a7a1}\label{namespacecppgc_1_1subtle_a9f22a6a0f1a04fa02cede3d0fec7a7a1}} 
\index{cppgc::subtle@{cppgc::subtle}!CrossThreadPersistent@{CrossThreadPersistent}}
\index{CrossThreadPersistent@{CrossThreadPersistent}!cppgc::subtle@{cppgc::subtle}}
\doxysubsubsection{\texorpdfstring{CrossThreadPersistent}{CrossThreadPersistent}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
using \mbox{\hyperlink{namespacecppgc_1_1subtle_a9f22a6a0f1a04fa02cede3d0fec7a7a1}{cppgc\+::subtle\+::\+Cross\+Thread\+Persistent}} = typedef \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicCrossThreadPersistent}{internal\+::\+Basic\+Cross\+Thread\+Persistent}}$<$ \mbox{\hyperlink{classT}{T}}, \mbox{\hyperlink{structcppgc_1_1internal_1_1StrongCrossThreadPersistentPolicy}{internal\+::\+Strong\+Cross\+Thread\+Persistent\+Policy}}$>$}



{\bfseries{DO NOT USE\+: Has known caveats, see below. }}

Cross\+Thread\+Persistent allows retaining objects from threads other than the thread the owning heap is operating on.

Known caveats\+:
\begin{DoxyItemize}
\item Does not protect the heap owning an object from terminating.
\item Reaching transitively through the graph is unsupported as objects may be moved concurrently on the thread owning the object. 
\end{DoxyItemize}

Definition at line 445 of file cross-\/thread-\/persistent.\+h.

\mbox{\Hypertarget{namespacecppgc_1_1subtle_acd6db2e89442920461706a52587c1bcf}\label{namespacecppgc_1_1subtle_acd6db2e89442920461706a52587c1bcf}} 
\index{cppgc::subtle@{cppgc::subtle}!UncompressedMember@{UncompressedMember}}
\index{UncompressedMember@{UncompressedMember}!cppgc::subtle@{cppgc::subtle}}
\doxysubsubsection{\texorpdfstring{UncompressedMember}{UncompressedMember}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
using \mbox{\hyperlink{namespacecppgc_1_1subtle_acd6db2e89442920461706a52587c1bcf}{cppgc\+::subtle\+::\+Uncompressed\+Member}} = typedef \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicMember}{internal\+::\+Basic\+Member}}$<$ \mbox{\hyperlink{classT}{T}}, internal\+::\+Strong\+Member\+Tag, \mbox{\hyperlink{structcppgc_1_1internal_1_1DijkstraWriteBarrierPolicy}{internal\+::\+Dijkstra\+Write\+Barrier\+Policy}}, \mbox{\hyperlink{namespacecppgc_1_1internal_ad1bf2727769e8e94ad50da4518a164e5}{internal\+::\+Default\+Member\+Checking\+Policy}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1RawPointer}{internal\+::\+Raw\+Pointer}}$>$}



Uncompressed\+Member. 

Use with care in hot paths that would otherwise cause many decompression cycles. 

Definition at line 605 of file member.\+h.

\mbox{\Hypertarget{namespacecppgc_1_1subtle_a5791fd10849f52326a84518bad4fef21}\label{namespacecppgc_1_1subtle_a5791fd10849f52326a84518bad4fef21}} 
\index{cppgc::subtle@{cppgc::subtle}!WeakCrossThreadPersistent@{WeakCrossThreadPersistent}}
\index{WeakCrossThreadPersistent@{WeakCrossThreadPersistent}!cppgc::subtle@{cppgc::subtle}}
\doxysubsubsection{\texorpdfstring{WeakCrossThreadPersistent}{WeakCrossThreadPersistent}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
using \mbox{\hyperlink{namespacecppgc_1_1subtle_a5791fd10849f52326a84518bad4fef21}{cppgc\+::subtle\+::\+Weak\+Cross\+Thread\+Persistent}} = typedef \mbox{\hyperlink{classcppgc_1_1internal_1_1BasicCrossThreadPersistent}{internal\+::\+Basic\+Cross\+Thread\+Persistent}}$<$ \mbox{\hyperlink{classT}{T}}, \mbox{\hyperlink{structcppgc_1_1internal_1_1WeakCrossThreadPersistentPolicy}{internal\+::\+Weak\+Cross\+Thread\+Persistent\+Policy}}$>$}



{\bfseries{DO NOT USE\+: Has known caveats, see below. }}

Cross\+Thread\+Persistent allows weakly retaining objects from threads other than the thread the owning heap is operating on.

Known caveats\+:
\begin{DoxyItemize}
\item Does not protect the heap owning an object from terminating.
\item Reaching transitively through the graph is unsupported as objects may be moved concurrently on the thread owning the object. 
\end{DoxyItemize}

Definition at line 460 of file cross-\/thread-\/persistent.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}\label{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}} 
\index{cppgc::subtle@{cppgc::subtle}!FreeUnreferencedObject@{FreeUnreferencedObject}}
\index{FreeUnreferencedObject@{FreeUnreferencedObject}!cppgc::subtle@{cppgc::subtle}}
\doxysubsubsection{\texorpdfstring{FreeUnreferencedObject()}{FreeUnreferencedObject()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void cppgc\+::subtle\+::\+Free\+Unreferenced\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \&}]{heap\+\_\+handle,  }\item[{\mbox{\hyperlink{classT}{T}} \&}]{object }\end{DoxyParamCaption})}



Informs the garbage collector that {\ttfamily object} can be immediately reclaimed. 

The destructor may not be invoked immediately but only on next garbage collection.

It is up to the embedder to guarantee that no other object holds a reference to {\ttfamily object} after calling {\ttfamily \mbox{\hyperlink{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}{Free\+Unreferenced\+Object()}}}. In case such a reference exists, it\textquotesingle{}s use results in a use-\/after-\/free.

To aid in using the API, {\ttfamily \mbox{\hyperlink{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}{Free\+Unreferenced\+Object()}}} may be called from destructors on objects that would be reclaimed in the same garbage collection cycle.


\begin{DoxyParams}{Parameters}
{\em heap\+\_\+handle} & The corresponding heap. \\
\hline
{\em object} & Reference to an object that is of type {\ttfamily \mbox{\hyperlink{classcppgc_1_1GarbageCollected}{Garbage\+Collected}}} and should be immediately reclaimed. \\
\hline
\end{DoxyParams}


Definition at line 61 of file explicit-\/management.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                                                 \{}
\DoxyCodeLine{62   static\_assert(IsGarbageCollectedTypeV<T>,}
\DoxyCodeLine{63                 \textcolor{stringliteral}{"{}Object must be of type GarbageCollected."{}});}
\DoxyCodeLine{64   \mbox{\hyperlink{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d}{internal::ExplicitManagementImpl::FreeUnreferencedObject}}(heap\_handle,}
\DoxyCodeLine{65                                                            \&\textcolor{keywordtype}{object});}
\DoxyCodeLine{66 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Explicit\+Management\+Impl\+::\+Free\+Unreferenced\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1subtle_a444d00edcf7972bc6a11535fcd2fac4d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}\label{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}} 
\index{cppgc::subtle@{cppgc::subtle}!Resize@{Resize}}
\index{Resize@{Resize}!cppgc::subtle@{cppgc::subtle}}
\doxysubsubsection{\texorpdfstring{Resize()}{Resize()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
bool cppgc\+::subtle\+::\+Resize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classT}{T}} \&}]{object,  }\item[{\mbox{\hyperlink{structcppgc_1_1AdditionalBytes}{Additional\+Bytes}}}]{additional\+\_\+bytes }\end{DoxyParamCaption})}



Tries to resize {\ttfamily object} of type {\ttfamily \mbox{\hyperlink{classT}{T}}} with additional bytes on top of sizeof(\+T). 

Resizing is only useful with trailing inlined storage, see e.\+g. {\ttfamily Make\+Garbage\+Collected(\+Allocation\+Handle\&, Additional\+Bytes)}.

{\ttfamily \mbox{\hyperlink{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}{Resize()}}} performs growing or shrinking as needed and may skip the operation for internal reasons, see return value.

It is up to the embedder to guarantee that in case of shrinking a larger object down, the reclaimed area is not used anymore. Any subsequent use results in a use-\/after-\/free.

The {\ttfamily object} must be live when calling {\ttfamily \mbox{\hyperlink{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}{Resize()}}}.


\begin{DoxyParams}{Parameters}
{\em object} & Reference to an object that is of type {\ttfamily \mbox{\hyperlink{classcppgc_1_1GarbageCollected}{Garbage\+Collected}}} and should be resized. \\
\hline
{\em additional\+\_\+bytes} & Bytes in addition to sizeof(\+T) that the object should provide. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true when the operation was successful and the result can be relied on, and false otherwise. 
\end{DoxyReturn}


Definition at line 90 of file explicit-\/management.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{90                                                          \{}
\DoxyCodeLine{91   static\_assert(IsGarbageCollectedTypeV<T>,}
\DoxyCodeLine{92                 \textcolor{stringliteral}{"{}Object must be of type GarbageCollected."{}});}
\DoxyCodeLine{93   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3}{internal::ExplicitManagementImpl::Resize}}(}
\DoxyCodeLine{94       \&\textcolor{keywordtype}{object}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classT}{T}}) + additional\_bytes.value);}
\DoxyCodeLine{95 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Explicit\+Management\+Impl\+::\+Resize(), and cppgc\+::\+Additional\+Bytes\+::value.



Referenced by v8\+::internal\+::\+Zone\+List$<$ T $>$\+::\+Add\+All(), v8\+::base\+::\+Template\+Hash\+Map\+Impl$<$ Key, Value, Match\+Fun, Allocation\+Policy $>$\+::\+Fill\+Empty\+Entry(), and v8\+::internal\+::\+Zone\+List$<$ T $>$\+::\+Resize\+Add\+Internal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1subtle_a15081e30a107ba2783a1c2eb12ab93f3_icgraph}
\end{center}
\end{figure}
