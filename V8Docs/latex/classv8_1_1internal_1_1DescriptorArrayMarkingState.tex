\hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState}{}\doxysection{v8\+::internal\+::Descriptor\+Array\+Marking\+State Class Reference}
\label{classv8_1_1internal_1_1DescriptorArrayMarkingState}\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}


{\ttfamily \#include $<$descriptor-\/array.\+h$>$}



Collaboration diagram for v8\+::internal\+::Descriptor\+Array\+Marking\+State\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} = uint16\+\_\+t
\item 
using \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} = uint32\+\_\+t
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a1c3330a067d291c1fdff031ee657e72e}{Get\+Fully\+Marked\+State}} (unsigned epoch, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} \mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\+\_\+of\+\_\+descriptors}})
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad628c12dea4bf247a4367f27e2eaf11a}{Try\+Update\+Indices\+To\+Mark}} (unsigned gc\+\_\+epoch, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ array, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} index\+\_\+to\+\_\+mark)
\item 
static std\+::pair$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}}, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a0cfdd735298315c8999fe13ffef18330}{Acquire\+Descriptor\+Range\+To\+Mark}} (unsigned gc\+\_\+epoch, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ array)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a731064217f87809f0342753432d65ed3}{k\+Initial\+GCState}} = 0
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{New\+State}} (unsigned masked\+\_\+epoch, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} marked, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}} delta)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}{Swap\+State}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$ array, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} old\+\_\+state, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} new\+\_\+state)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 291 of file descriptor-\/array.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!DescriptorIndex@{DescriptorIndex}}
\index{DescriptorIndex@{DescriptorIndex}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{DescriptorIndex}{DescriptorIndex}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Descriptor\+Index}} =  uint16\+\_\+t}



Definition at line 302 of file descriptor-\/array.\+h.

\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!RawGCStateType@{RawGCStateType}}
\index{RawGCStateType@{RawGCStateType}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{RawGCStateType}{RawGCStateType}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Raw\+GCState\+Type}} =  uint32\+\_\+t}



Definition at line 303 of file descriptor-\/array.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_a0cfdd735298315c8999fe13ffef18330}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_a0cfdd735298315c8999fe13ffef18330}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!AcquireDescriptorRangeToMark@{AcquireDescriptorRangeToMark}}
\index{AcquireDescriptorRangeToMark@{AcquireDescriptorRangeToMark}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{AcquireDescriptorRangeToMark()}{AcquireDescriptorRangeToMark()}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Array\+Marking\+State\+::\+Descriptor\+Index}}, \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Array\+Marking\+State\+::\+Descriptor\+Index}} $>$ v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Acquire\+Descriptor\+Range\+To\+Mark (\begin{DoxyParamCaption}\item[{unsigned}]{gc\+\_\+epoch,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{array }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 414 of file descriptor-\/array-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{415                                                       \{}
\DoxyCodeLine{416   \textcolor{keyword}{const} \textcolor{keyword}{auto} current\_epoch = gc\_epoch \& Epoch::kMask;}
\DoxyCodeLine{417   \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{418     \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{RawGCStateType}} raw\_gc\_state = array-\/>raw\_gc\_state(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}});}
\DoxyCodeLine{419     \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{DescriptorIndex}} marked = Marked::decode(raw\_gc\_state);}
\DoxyCodeLine{420     \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{DescriptorIndex}} delta = Delta::decode(raw\_gc\_state);}
\DoxyCodeLine{421     \textcolor{comment}{// We may encounter an array here that was merely pushed to the marker. In}}
\DoxyCodeLine{422     \textcolor{comment}{// such a case, we process all descriptors (if we succeed). The cases to}}
\DoxyCodeLine{423     \textcolor{comment}{// check are:}}
\DoxyCodeLine{424     \textcolor{comment}{// 1. Epoch mismatch: Happens when descriptors survive a GC cycle.}}
\DoxyCodeLine{425     \textcolor{comment}{// 2. Epoch matches but marked/delta is 0: Can happen when descriptors are}}
\DoxyCodeLine{426     \textcolor{comment}{//    newly allocated in the current cycle.}}
\DoxyCodeLine{427     \textcolor{keywordflow}{if} (current\_epoch != Epoch::decode(raw\_gc\_state) || (marked + delta) == 0) \{}
\DoxyCodeLine{428       \textcolor{comment}{// In case number of descriptors is 0 and we reach the array through roots}}
\DoxyCodeLine{429       \textcolor{comment}{// marking, mark also slack to get a proper transition from 0 marked to X}}
\DoxyCodeLine{430       \textcolor{comment}{// marked. Otherwise, we would need to treat the state [0,0[ for marked}}
\DoxyCodeLine{431       \textcolor{comment}{// and delta as valid state which leads to double-\/accounting through the}}
\DoxyCodeLine{432       \textcolor{comment}{// marking barrier (when nof>1 in the barrier).}}
\DoxyCodeLine{433       \textcolor{keyword}{const} \mbox{\hyperlink{namespaceunibrow_a511cc0636aed6a00d37d3e7cc0ec4e7c}{int16\_t}} \mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\_of\_descriptors}} =}
\DoxyCodeLine{434           array-\/>number\_of\_descriptors() ? array-\/>number\_of\_descriptors()}
\DoxyCodeLine{435                                          : array-\/>number\_of\_all\_descriptors();}
\DoxyCodeLine{436       \mbox{\hyperlink{src_2base_2logging_8h_afd957f297df7e9ee36c46185e961485f}{DCHECK\_GT}}(\mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\_of\_descriptors}}, 0);}
\DoxyCodeLine{437       \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}{SwapState}}(array, raw\_gc\_state,}
\DoxyCodeLine{438                     \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{NewState}}(current\_epoch, \mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\_of\_descriptors}}, 0))) \{}
\DoxyCodeLine{439         \textcolor{keywordflow}{return} \{0, \mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\_of\_descriptors}}\};}
\DoxyCodeLine{440       \}}
\DoxyCodeLine{441       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{442     \}}
\DoxyCodeLine{443 }
\DoxyCodeLine{444     \textcolor{comment}{// The delta is 0, so everything has been processed. Return the marked}}
\DoxyCodeLine{445     \textcolor{comment}{// indices.}}
\DoxyCodeLine{446     \textcolor{keywordflow}{if} (delta == 0) \{}
\DoxyCodeLine{447       \textcolor{keywordflow}{return} \{marked, marked\};}
\DoxyCodeLine{448     \}}
\DoxyCodeLine{449 }
\DoxyCodeLine{450     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}{SwapState}}(array, raw\_gc\_state,}
\DoxyCodeLine{451                   \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{NewState}}(current\_epoch, marked + delta, 0))) \{}
\DoxyCodeLine{452       \textcolor{keywordflow}{return} \{marked, marked + delta\};}
\DoxyCodeLine{453     \}}
\DoxyCodeLine{454   \}}
\DoxyCodeLine{455 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+GT, v8\+::k\+Relaxed\+Load, New\+State(), v8\+::internal\+::number\+\_\+of\+\_\+descriptors, and Swap\+State().



Referenced by v8\+::internal\+::\+Marking\+Visitor\+Base$<$ Concrete\+Visitor $>$\+::\+Visit\+Descriptor\+Array().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_a0cfdd735298315c8999fe13ffef18330_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_a0cfdd735298315c8999fe13ffef18330_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_a1c3330a067d291c1fdff031ee657e72e}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_a1c3330a067d291c1fdff031ee657e72e}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!GetFullyMarkedState@{GetFullyMarkedState}}
\index{GetFullyMarkedState@{GetFullyMarkedState}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{GetFullyMarkedState()}{GetFullyMarkedState()}}
{\footnotesize\ttfamily static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Get\+Fully\+Marked\+State (\begin{DoxyParamCaption}\item[{unsigned}]{epoch,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}}}]{number\+\_\+of\+\_\+descriptors }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 307 of file descriptor-\/array.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{308                                                              \{}
\DoxyCodeLine{309     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{NewState}}(epoch \& Epoch::kMask, \mbox{\hyperlink{namespacev8_1_1internal_a8148d2ce46612cbef43222373e5d7729}{number\_of\_descriptors}}, 0);}
\DoxyCodeLine{310   \}}

\end{DoxyCode}


References v8\+::internal\+::number\+\_\+of\+\_\+descriptors.



Referenced by v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Descriptor\+Array().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_a1c3330a067d291c1fdff031ee657e72e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!NewState@{NewState}}
\index{NewState@{NewState}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{NewState()}{NewState()}}
{\footnotesize\ttfamily static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+New\+State (\begin{DoxyParamCaption}\item[{unsigned}]{masked\+\_\+epoch,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}}}]{marked,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}}}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [private]}}



Definition at line 331 of file descriptor-\/array.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{333                                                                   \{}
\DoxyCodeLine{334     \textcolor{keywordflow}{return} Epoch::encode(masked\_epoch) | Marked::encode(marked) |}
\DoxyCodeLine{335            Delta::encode(delta);}
\DoxyCodeLine{336   \}}

\end{DoxyCode}


Referenced by Acquire\+Descriptor\+Range\+To\+Mark(), and Try\+Update\+Indices\+To\+Mark().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!SwapState@{SwapState}}
\index{SwapState@{SwapState}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{SwapState()}{SwapState()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Swap\+State (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{array,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}}}]{old\+\_\+state,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}}}]{new\+\_\+state }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 338 of file descriptor-\/array.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{339                                                   \{}
\DoxyCodeLine{340     \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{RawGCStateType}}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1base_af18fed44cbab8ec804cf910ac80d9d66}{base::AcquireRelease\_CompareAndSwap}}(}
\DoxyCodeLine{341                \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1base_a68ac997a53e79e816fbbd1d6b9982c74}{base::Atomic32}}*\textcolor{keyword}{>}(}
\DoxyCodeLine{342                    \mbox{\hyperlink{object-macros_8h_a22b5d567a09f13e46a5b7c1044c87671}{FIELD\_ADDR}}(array, DescriptorArray::kRawGcStateOffset)),}
\DoxyCodeLine{343                old\_state, new\_state)) == old\_state;}
\DoxyCodeLine{344   \}}

\end{DoxyCode}


References v8\+::base\+::\+Acquire\+Release\+\_\+\+Compare\+And\+Swap(), and FIELD\+\_\+\+ADDR.



Referenced by Acquire\+Descriptor\+Range\+To\+Mark(), and Try\+Update\+Indices\+To\+Mark().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad628c12dea4bf247a4367f27e2eaf11a}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad628c12dea4bf247a4367f27e2eaf11a}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!TryUpdateIndicesToMark@{TryUpdateIndicesToMark}}
\index{TryUpdateIndicesToMark@{TryUpdateIndicesToMark}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{TryUpdateIndicesToMark()}{TryUpdateIndicesToMark()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::\+Try\+Update\+Indices\+To\+Mark (\begin{DoxyParamCaption}\item[{unsigned}]{gc\+\_\+epoch,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArray}{Descriptor\+Array}} $>$}]{array,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{Descriptor\+Index}}}]{index\+\_\+to\+\_\+mark }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 381 of file descriptor-\/array-\/inl.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{383                                    \{}
\DoxyCodeLine{384   \textcolor{keyword}{const} \textcolor{keyword}{auto} current\_epoch = gc\_epoch \& Epoch::kMask;}
\DoxyCodeLine{385   \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{386     \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{RawGCStateType}} raw\_gc\_state = array-\/>raw\_gc\_state(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}});}
\DoxyCodeLine{387     \textcolor{keyword}{const} \textcolor{keyword}{auto} epoch\_from\_state = Epoch::decode(raw\_gc\_state);}
\DoxyCodeLine{388     \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{RawGCStateType}} new\_raw\_gc\_state = 0;}
\DoxyCodeLine{389     \textcolor{keywordflow}{if} (current\_epoch != epoch\_from\_state) \{}
\DoxyCodeLine{390       \textcolor{comment}{// If the epochs do not match, then either the raw\_gc\_state is zero}}
\DoxyCodeLine{391       \textcolor{comment}{// (freshly allocated descriptor array) or the epoch from value lags}}
\DoxyCodeLine{392       \textcolor{comment}{// by 1.}}
\DoxyCodeLine{393       \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(raw\_gc\_state != 0,}
\DoxyCodeLine{394                      Epoch::decode(epoch\_from\_state + 1) == current\_epoch);}
\DoxyCodeLine{395       new\_raw\_gc\_state = \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{NewState}}(current\_epoch, 0, index\_to\_mark);}
\DoxyCodeLine{396     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{397       \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{DescriptorIndex}} already\_marked = Marked::decode(raw\_gc\_state);}
\DoxyCodeLine{398       \textcolor{keyword}{const} \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a2aa80b3469a28e9b73fea5b10f9c6a99}{DescriptorIndex}} delta = Delta::decode(raw\_gc\_state);}
\DoxyCodeLine{399       \textcolor{keywordflow}{if} ((already\_marked + delta) >= index\_to\_mark) \{}
\DoxyCodeLine{400         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{401       \}}
\DoxyCodeLine{402       new\_raw\_gc\_state = \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_abf5c119f1e9c82e750b985d551ced482}{NewState}}(current\_epoch, already\_marked,}
\DoxyCodeLine{403                                   index\_to\_mark -\/ already\_marked);}
\DoxyCodeLine{404     \}}
\DoxyCodeLine{405     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad3e1e13e30db73dcd169ec896def10c6}{SwapState}}(array, raw\_gc\_state, new\_raw\_gc\_state)) \{}
\DoxyCodeLine{406       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{407     \}}
\DoxyCodeLine{408   \}}
\DoxyCodeLine{409 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+IMPLIES, v8\+::k\+Relaxed\+Load, New\+State(), and Swap\+State().



Referenced by v8\+::internal\+::\+Marking\+Visitor\+Base$<$ Concrete\+Visitor $>$\+::\+Visit\+Descriptors\+For\+Map(), and v8\+::internal\+::\+Marking\+Barrier\+::\+Write().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad628c12dea4bf247a4367f27e2eaf11a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1DescriptorArrayMarkingState_ad628c12dea4bf247a4367f27e2eaf11a_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1DescriptorArrayMarkingState_a731064217f87809f0342753432d65ed3}\label{classv8_1_1internal_1_1DescriptorArrayMarkingState_a731064217f87809f0342753432d65ed3}} 
\index{v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}!kInitialGCState@{kInitialGCState}}
\index{kInitialGCState@{kInitialGCState}!v8::internal::DescriptorArrayMarkingState@{v8::internal::DescriptorArrayMarkingState}}
\doxysubsubsection{\texorpdfstring{kInitialGCState}{kInitialGCState}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{classv8_1_1internal_1_1DescriptorArrayMarkingState_a16ec60fb0f20908d93b18a7445f55766}{Raw\+GCState\+Type}} v8\+::internal\+::\+Descriptor\+Array\+Marking\+State\+::k\+Initial\+GCState = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 305 of file descriptor-\/array.\+h.



Referenced by v8\+::internal\+::\+Heap\+::\+Create\+Early\+Read\+Only\+Maps\+And\+Objects(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Descriptor\+Array(), and v8\+::internal\+::\+Serializer\+::\+Object\+Serializer\+::\+Output\+Raw\+Data().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{descriptor-array_8h}{descriptor-\/array.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{descriptor-array-inl_8h}{descriptor-\/array-\/inl.\+h}}\end{DoxyCompactItemize}
