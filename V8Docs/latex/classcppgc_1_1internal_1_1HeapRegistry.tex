\hypertarget{classcppgc_1_1internal_1_1HeapRegistry}{}\doxysection{cppgc\+::internal\+::Heap\+Registry Class Reference}
\label{classcppgc_1_1internal_1_1HeapRegistry}\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}


{\ttfamily \#include $<$process-\/heap.\+h$>$}



Collaboration diagram for cppgc\+::internal\+::Heap\+Registry\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=265pt]{classcppgc_1_1internal_1_1HeapRegistry__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_1_1Subscription}{Subscription}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}{Storage}} = std\+::vector$<$ \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} $\ast$ $>$
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a064d6fa2a2f6e88cf466d4e9cdebfafc}{Try\+From\+Managed\+Pointer}} (const void $\ast$needle)
\item 
static const \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}{Storage}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a62038aaa1d28f55c3bb2281aa7e9073c}{Get\+Registered\+Heaps\+For\+Testing}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_aa5dc705f930a30773376f4f092e99869}{Register\+Heap}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&)
\item 
static void \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a885305fbea8ec10cf050120d2ca17269}{Unregister\+Heap}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 72 of file process-\/heap.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}\label{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}} 
\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}!Storage@{Storage}}
\index{Storage@{Storage}!cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}
\doxysubsubsection{\texorpdfstring{Storage}{Storage}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}{cppgc\+::internal\+::\+Heap\+Registry\+::\+Storage}} =  std\+::vector$<$\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}}$\ast$$>$}



Definition at line 74 of file process-\/heap.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1HeapRegistry_a62038aaa1d28f55c3bb2281aa7e9073c}\label{classcppgc_1_1internal_1_1HeapRegistry_a62038aaa1d28f55c3bb2281aa7e9073c}} 
\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}!GetRegisteredHeapsForTesting@{GetRegisteredHeapsForTesting}}
\index{GetRegisteredHeapsForTesting@{GetRegisteredHeapsForTesting}!cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}
\doxysubsubsection{\texorpdfstring{GetRegisteredHeapsForTesting()}{GetRegisteredHeapsForTesting()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapRegistry_a7ee03e8b1b18e0a18468278000d635ae}{Heap\+Registry\+::\+Storage}} \& cppgc\+::internal\+::\+Heap\+Registry\+::\+Get\+Registered\+Heaps\+For\+Testing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 69 of file process-\/heap.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{69                                                                       \{}
\DoxyCodeLine{70   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_ac508d57718e3eee1fdb06a83c8ebe3ff}{GetHeapRegistryStorage}}();}
\DoxyCodeLine{71 \}}

\end{DoxyCode}


References cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::\+Get\+Heap\+Registry\+Storage().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_a62038aaa1d28f55c3bb2281aa7e9073c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1HeapRegistry_aa5dc705f930a30773376f4f092e99869}\label{classcppgc_1_1internal_1_1HeapRegistry_aa5dc705f930a30773376f4f092e99869}} 
\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}!RegisterHeap@{RegisterHeap}}
\index{RegisterHeap@{RegisterHeap}!cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}
\doxysubsubsection{\texorpdfstring{RegisterHeap()}{RegisterHeap()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Heap\+Registry\+::\+Register\+Heap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&}]{heap }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 34 of file process-\/heap.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{34                                               \{}
\DoxyCodeLine{35   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{v8::base::MutexGuard}} guard(\mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_aed78888848384b86e0251b3b8dca2647}{g\_heap\_registry\_mutex}}.\mbox{\hyperlink{structv8_1_1base_1_1LazyInstanceImpl_a731d414ae2f2f0fafb4df47502b21068}{Pointer}}());}
\DoxyCodeLine{36 }
\DoxyCodeLine{37   \textcolor{keyword}{auto}\& storage = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_ac508d57718e3eee1fdb06a83c8ebe3ff}{GetHeapRegistryStorage}}();}
\DoxyCodeLine{38   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(storage.end(), std::find(storage.begin(), storage.end(), \&\mbox{\hyperlink{namespaceheap}{heap}}));}
\DoxyCodeLine{39   storage.push\_back(\&\mbox{\hyperlink{namespaceheap}{heap}});}
\DoxyCodeLine{40 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::g\+\_\+heap\+\_\+registry\+\_\+mutex, cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::\+Get\+Heap\+Registry\+Storage(), and v8\+::base\+::\+Lazy\+Instance\+Impl$<$ T, Allocation\+Trait, Create\+Trait, Init\+Once\+Trait, Destroy\+Trait $>$\+::\+Pointer().



Referenced by cppgc\+::internal\+::\+Heap\+Registry\+::\+Subscription\+::\+Subscription().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_aa5dc705f930a30773376f4f092e99869_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_aa5dc705f930a30773376f4f092e99869_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1HeapRegistry_a064d6fa2a2f6e88cf466d4e9cdebfafc}\label{classcppgc_1_1internal_1_1HeapRegistry_a064d6fa2a2f6e88cf466d4e9cdebfafc}} 
\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}!TryFromManagedPointer@{TryFromManagedPointer}}
\index{TryFromManagedPointer@{TryFromManagedPointer}!cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}
\doxysubsubsection{\texorpdfstring{TryFromManagedPointer()}{TryFromManagedPointer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} $\ast$ cppgc\+::internal\+::\+Heap\+Registry\+::\+Try\+From\+Managed\+Pointer (\begin{DoxyParamCaption}\item[{const void $\ast$}]{needle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 57 of file process-\/heap.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{57                                                                 \{}
\DoxyCodeLine{58   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{v8::base::MutexGuard}} guard(\mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_aed78888848384b86e0251b3b8dca2647}{g\_heap\_registry\_mutex}}.\mbox{\hyperlink{structv8_1_1base_1_1LazyInstanceImpl_a731d414ae2f2f0fafb4df47502b21068}{Pointer}}());}
\DoxyCodeLine{59 }
\DoxyCodeLine{60   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* \mbox{\hyperlink{namespaceheap}{heap}} : \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_ac508d57718e3eee1fdb06a83c8ebe3ff}{GetHeapRegistryStorage}}()) \{}
\DoxyCodeLine{61     \textcolor{keyword}{const} \textcolor{keyword}{auto} address =}
\DoxyCodeLine{62         \mbox{\hyperlink{namespaceheap}{heap}}-\/>page\_backend()-\/>Lookup(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacecppgc_1_1internal_a253e063701bfc4119e9fca7fe9800c32}{ConstAddress}}\textcolor{keyword}{>}(needle));}
\DoxyCodeLine{63     \textcolor{keywordflow}{if} (address) \textcolor{keywordflow}{return} \mbox{\hyperlink{flag-definitions_8h_a761e4e5929b1553283fd6a532822bb17}{heap}};}
\DoxyCodeLine{64   \}}
\DoxyCodeLine{65   \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{66 \}}

\end{DoxyCode}


References cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::g\+\_\+heap\+\_\+registry\+\_\+mutex, cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::\+Get\+Heap\+Registry\+Storage(), heap(), and v8\+::base\+::\+Lazy\+Instance\+Impl$<$ T, Allocation\+Trait, Create\+Trait, Init\+Once\+Trait, Destroy\+Trait $>$\+::\+Pointer().



Referenced by cppgc\+::internal\+::\+Same\+Thread\+Enabled\+Checking\+Policy\+Base\+::\+Check\+Pointer\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_a064d6fa2a2f6e88cf466d4e9cdebfafc_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_a064d6fa2a2f6e88cf466d4e9cdebfafc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1HeapRegistry_a885305fbea8ec10cf050120d2ca17269}\label{classcppgc_1_1internal_1_1HeapRegistry_a885305fbea8ec10cf050120d2ca17269}} 
\index{cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}!UnregisterHeap@{UnregisterHeap}}
\index{UnregisterHeap@{UnregisterHeap}!cppgc::internal::HeapRegistry@{cppgc::internal::HeapRegistry}}
\doxysubsubsection{\texorpdfstring{UnregisterHeap()}{UnregisterHeap()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Heap\+Registry\+::\+Unregister\+Heap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&}]{heap }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 43 of file process-\/heap.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{43                                                 \{}
\DoxyCodeLine{44   \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{v8::base::MutexGuard}} guard(\mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_aed78888848384b86e0251b3b8dca2647}{g\_heap\_registry\_mutex}}.\mbox{\hyperlink{structv8_1_1base_1_1LazyInstanceImpl_a731d414ae2f2f0fafb4df47502b21068}{Pointer}}());}
\DoxyCodeLine{45 }
\DoxyCodeLine{46   \textcolor{comment}{// HeapRegistry requires access to PageBackend which means it must still}}
\DoxyCodeLine{47   \textcolor{comment}{// be present by the time a heap is removed from the registry.}}
\DoxyCodeLine{48   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(\mbox{\hyperlink{namespaceheap}{heap}}.page\_backend());}
\DoxyCodeLine{49 }
\DoxyCodeLine{50   \textcolor{keyword}{auto}\& storage = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02process-heap_8cc_03_ac508d57718e3eee1fdb06a83c8ebe3ff}{GetHeapRegistryStorage}}();}
\DoxyCodeLine{51   \textcolor{keyword}{const} \textcolor{keyword}{auto} pos = std::find(storage.begin(), storage.end(), \&\mbox{\hyperlink{namespaceheap}{heap}});}
\DoxyCodeLine{52   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(storage.end(), pos);}
\DoxyCodeLine{53   storage.erase(pos);}
\DoxyCodeLine{54 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+NE, DCHECK\+\_\+\+NOT\+\_\+\+NULL, cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::g\+\_\+heap\+\_\+registry\+\_\+mutex, cppgc\+::internal\+::anonymous\+\_\+namespace\{process-\/heap.\+cc\}\+::\+Get\+Heap\+Registry\+Storage(), and v8\+::base\+::\+Lazy\+Instance\+Impl$<$ T, Allocation\+Trait, Create\+Trait, Init\+Once\+Trait, Destroy\+Trait $>$\+::\+Pointer().



Referenced by cppgc\+::internal\+::\+Heap\+Registry\+::\+Subscription\+::$\sim$\+Subscription().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_a885305fbea8ec10cf050120d2ca17269_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1HeapRegistry_a885305fbea8ec10cf050120d2ca17269_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{process-heap_8h}{process-\/heap.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{process-heap_8cc}{process-\/heap.\+cc}}\end{DoxyCompactItemize}
