\hypertarget{mksnapshot_8cc}{}\doxysection{/mnt/\+V8\+Source\+Code/src/snapshot/mksnapshot.cc File Reference}
\label{mksnapshot_8cc}\index{/mnt/V8SourceCode/src/snapshot/mksnapshot.cc@{/mnt/V8SourceCode/src/snapshot/mksnapshot.cc}}
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include \char`\"{}include/libplatform/libplatform.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}include/v8-\/initialization.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/logging.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/platform/elapsed-\/timer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/platform/platform.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/platform/wrappers.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/vector.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/builtins/builtins-\/effects-\/analyzer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/codegen/cpu-\/features.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/common/globals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/flags/flags.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/snapshot/embedded/embedded-\/file-\/writer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/snapshot/snapshot.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/snapshot/static-\/roots-\/gen.\+h\char`\"{}}\newline
Include dependency graph for mksnapshot.\+cc\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mksnapshot_8cc__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classanonymous__namespace_02mksnapshot_8cc_03_1_1SnapshotFileWriter}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Snapshot\+File\+Writer}}
\end{DoxyCompactItemize}
\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a3c88868c40f3b3d4ee2a18d2d95cf6e4}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Counter\+Map}} = std\+::map$<$ std\+::string, \mbox{\hyperlink{classint}{int}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ char\mbox{[}$\,$\mbox{]}$>$ \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a0cfea5e5522366a022019830f2eb6a0e}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Get\+Extra\+Code}} (char $\ast$filename, const char $\ast$description)
\item 
\mbox{\hyperlink{classv8_1_1StartupData}{v8\+::\+Startup\+Data}} \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a9c8d4d05ac98fcd6a2161cf525bc05be}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Create\+Snapshot\+Data\+Blob}} (\mbox{\hyperlink{classv8_1_1SnapshotCreator}{v8\+::\+Snapshot\+Creator}} \&snapshot\+\_\+creator, const char $\ast$embedded\+\_\+source)
\item 
\mbox{\hyperlink{classv8_1_1StartupData}{v8\+::\+Startup\+Data}} \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a1ebb13df7e62429b23be99fff2dca78d}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Warm\+Up\+Snapshot\+Data\+Blob}} (\mbox{\hyperlink{classv8_1_1StartupData}{v8\+::\+Startup\+Data}} cold\+\_\+snapshot\+\_\+blob, const char $\ast$warmup\+\_\+source)
\item 
void \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_ad60eca700ba97c174d638829f9ecfc68}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Write\+Embedded\+File}} (\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter}{i\+::\+Embedded\+File\+Writer}} $\ast$writer)
\item 
void \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_acab004ba3e483599f993072cf2b0cd39}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Maybe\+Set\+Counter\+Function}} (\mbox{\hyperlink{classv8_1_1Isolate}{v8\+::\+Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{mksnapshot_8cc_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (\mbox{\hyperlink{classint}{int}} argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Counter\+Map $\ast$ \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_ac81897c4b659edda33911e6bd62829e9}{anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::counter\+\_\+map\+\_\+}} = \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mksnapshot_8cc_a3c04138a5bfe5d72780bb7e82a18e627}\label{mksnapshot_8cc_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{mksnapshot.cc@{mksnapshot.cc}!main@{main}}
\index{main@{main}!mksnapshot.cc@{mksnapshot.cc}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} main (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line 225 of file mksnapshot.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{225                                 \{}
\DoxyCodeLine{226   \mbox{\hyperlink{namespacev8_1_1base_a91f20c33c351426e1f20d09809d84a07}{v8::base::EnsureConsoleOutput}}();}
\DoxyCodeLine{227 }
\DoxyCodeLine{228   \textcolor{comment}{// Make mksnapshot runs predictable to create reproducible snapshots.}}
\DoxyCodeLine{229   \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.predictable = \textcolor{keyword}{true};}
\DoxyCodeLine{230 }
\DoxyCodeLine{231   \textcolor{comment}{// Disable ICs globally in mksnapshot to avoid problems with Code handlers.}}
\DoxyCodeLine{232   \textcolor{comment}{// See https://crbug.com/345280736.}}
\DoxyCodeLine{233   \textcolor{comment}{// TODO(jgruber): Re-\/enable once a better fix is available.}}
\DoxyCodeLine{234   \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.use\_ic = \textcolor{keyword}{false};}
\DoxyCodeLine{235 }
\DoxyCodeLine{236   \textcolor{comment}{// Print the usage if an error occurs when parsing the command line}}
\DoxyCodeLine{237   \textcolor{comment}{// flags or if the help flag is set.}}
\DoxyCodeLine{238   \textcolor{keyword}{using} HelpOptions = i::FlagList::HelpOptions;}
\DoxyCodeLine{239   \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} usage = \textcolor{stringliteral}{"{}Usage: "{}} + \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}}(argv[0]) +}
\DoxyCodeLine{240                       \textcolor{stringliteral}{"{} [-\/-\/startup-\/src=file]"{}} + \textcolor{stringliteral}{"{} [-\/-\/startup-\/blob=file]"{}} +}
\DoxyCodeLine{241                       \textcolor{stringliteral}{"{} [-\/-\/embedded-\/src=file]"{}} + \textcolor{stringliteral}{"{} [-\/-\/embedded-\/variant=label]"{}} +}
\DoxyCodeLine{242                       \textcolor{stringliteral}{"{} [-\/-\/static-\/roots-\/src=file]"{}} + \textcolor{stringliteral}{"{} [-\/-\/target-\/arch=arch]"{}} +}
\DoxyCodeLine{243                       \textcolor{stringliteral}{"{} [-\/-\/target-\/os=os] [extras]\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{244   \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{classv8_1_1internal_1_1FlagList_a8e921e09e137b8e327b81e9450f53207}{i::FlagList::SetFlagsFromCommandLine}}(}
\DoxyCodeLine{245       \&argc, argv, \textcolor{keyword}{true}, HelpOptions(HelpOptions::kExit, usage.c\_str()));}
\DoxyCodeLine{246   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} > 0 || (argc > 3)) \{}
\DoxyCodeLine{247     \mbox{\hyperlink{namespacev8_1_1internal_a3430752cde9f29d73e97ceed1bce0856}{i::PrintF}}(stdout, \textcolor{stringliteral}{"{}\%s"{}}, usage.c\_str());}
\DoxyCodeLine{248     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{249   \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251   \mbox{\hyperlink{classv8_1_1internal_1_1CpuFeatures_a81ae78f6f799c911bf55ca0e4099b6aa}{i::CpuFeatures::Probe}}(\textcolor{keyword}{true});}
\DoxyCodeLine{252   \mbox{\hyperlink{classv8_1_1V8_a96042535991bd9929647abb24784e0fc}{v8::V8::InitializeICUDefaultLocation}}(argv[0]);}
\DoxyCodeLine{253   std::unique\_ptr<v8::Platform> platform = \mbox{\hyperlink{namespacev8_1_1platform_acfab14c1076e4c2cc8fa2f1d1c76f1ac}{v8::platform::NewDefaultPlatform}}();}
\DoxyCodeLine{254   \mbox{\hyperlink{classv8_1_1V8_a79a2ecd6b949acdbddd9154630ad84ec}{v8::V8::InitializePlatform}}(platform.get());}
\DoxyCodeLine{255   \mbox{\hyperlink{classv8_1_1V8_a40daec93ce44bdd922567fc121be9db8}{v8::V8::Initialize}}();}
\DoxyCodeLine{256 }
\DoxyCodeLine{257   \{}
\DoxyCodeLine{258     SnapshotFileWriter snapshot\_writer;}
\DoxyCodeLine{259     snapshot\_writer.SetSnapshotFile(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.startup\_src);}
\DoxyCodeLine{260     snapshot\_writer.SetStartupBlobFile(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.startup\_blob);}
\DoxyCodeLine{261 }
\DoxyCodeLine{262     \mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter}{i::EmbeddedFileWriter}} embedded\_writer;}
\DoxyCodeLine{263     embedded\_writer.\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter_ae2a0a0d554e946cb6b78dc29e89d240c}{SetEmbeddedFile}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.embedded\_src);}
\DoxyCodeLine{264     embedded\_writer.\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter_abe4bbafc5c8709c4dffb41c09add021c}{SetEmbeddedVariant}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.embedded\_variant);}
\DoxyCodeLine{265     embedded\_writer.\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter_a9dc7d5628852dbef5612b4a64186c67d}{SetTargetArch}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.target\_arch);}
\DoxyCodeLine{266     embedded\_writer.\mbox{\hyperlink{classv8_1_1internal_1_1EmbeddedFileWriter_aa6131ed7e1d9830c66bd00ff08431fa4}{SetTargetOs}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.target\_os);}
\DoxyCodeLine{267 }
\DoxyCodeLine{268     std::unique\_ptr<char[]> embed\_script =}
\DoxyCodeLine{269         \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a0cfea5e5522366a022019830f2eb6a0e}{GetExtraCode}}(argc >= 2 ? argv[1] : \textcolor{keyword}{nullptr}, \textcolor{stringliteral}{"{}embedding"{}});}
\DoxyCodeLine{270     std::unique\_ptr<char[]> warmup\_script =}
\DoxyCodeLine{271         \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a0cfea5e5522366a022019830f2eb6a0e}{GetExtraCode}}(argc >= 3 ? argv[2] : \textcolor{keyword}{nullptr}, \textcolor{stringliteral}{"{}warm up"{}});}
\DoxyCodeLine{272 }
\DoxyCodeLine{273     \mbox{\hyperlink{classv8_1_1StartupData}{v8::StartupData}} blob;}
\DoxyCodeLine{274     \{}
\DoxyCodeLine{275       \mbox{\hyperlink{classv8_1_1Isolate}{v8::Isolate}}* isolate = \mbox{\hyperlink{classv8_1_1Isolate_a1f944c1aa3c0f57910a081505d01d099}{v8::Isolate::Allocate}}();}
\DoxyCodeLine{276 }
\DoxyCodeLine{277       \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_acab004ba3e483599f993072cf2b0cd39}{MaybeSetCounterFunction}}(isolate);}
\DoxyCodeLine{278 }
\DoxyCodeLine{279       \textcolor{comment}{// The isolate contains data from builtin compilation that needs}}
\DoxyCodeLine{280       \textcolor{comment}{// to be written out if builtins are embedded.}}
\DoxyCodeLine{281       \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{i::Isolate}}* i\_isolate = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{i::Isolate}}*\textcolor{keyword}{>}(isolate);}
\DoxyCodeLine{282       i\_isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ab109ea8211accc416663ce31efa71688}{RegisterEmbeddedFileWriter}}(\&embedded\_writer);}
\DoxyCodeLine{283 }
\DoxyCodeLine{284       std::unique\_ptr<v8::ArrayBuffer::Allocator> array\_buffer\_allocator(}
\DoxyCodeLine{285           \mbox{\hyperlink{classv8_1_1ArrayBuffer_1_1Allocator_a2c95b1213b0a0a2996e1c63194fc6951}{v8::ArrayBuffer::Allocator::NewDefaultAllocator}}());}
\DoxyCodeLine{286       \mbox{\hyperlink{structv8_1_1Isolate_1_1CreateParams}{v8::Isolate::CreateParams}} create\_params;}
\DoxyCodeLine{287       create\_params.\mbox{\hyperlink{structv8_1_1Isolate_1_1CreateParams_a7c663f70b64290392eeaf164f57585f9}{array\_buffer\_allocator}} = array\_buffer\_allocator.get();}
\DoxyCodeLine{288 }
\DoxyCodeLine{289       \textcolor{comment}{// Set code range such that relative jumps for builtins to}}
\DoxyCodeLine{290       \textcolor{comment}{// builtin calls in the snapshot are possible.}}
\DoxyCodeLine{291       \textcolor{keywordtype}{size\_t} code\_range\_size\_mb =}
\DoxyCodeLine{292           \mbox{\hyperlink{namespacev8_1_1internal_abe54fbe011324cc8d9e2d0ccd3f83a84}{i::kMaximalCodeRangeSize}} == 0}
\DoxyCodeLine{293               ? \mbox{\hyperlink{namespacev8_1_1internal_a98928047a27d51a59b4fed57c53d68fa}{i::kMaxPCRelativeCodeRangeInMB}}}
\DoxyCodeLine{294               : std::min(\mbox{\hyperlink{namespacev8_1_1internal_abe54fbe011324cc8d9e2d0ccd3f83a84}{i::kMaximalCodeRangeSize}} / \mbox{\hyperlink{flag-definitions_8h_a67f6e75911a1c9e16076ff4db599e681}{i::MB}},}
\DoxyCodeLine{295                          \mbox{\hyperlink{namespacev8_1_1internal_a98928047a27d51a59b4fed57c53d68fa}{i::kMaxPCRelativeCodeRangeInMB}});}
\DoxyCodeLine{296       create\_params.\mbox{\hyperlink{structv8_1_1Isolate_1_1CreateParams_a2c570b306aa8c1c24cfe70e8eee50fa1}{constraints}}.\mbox{\hyperlink{classv8_1_1ResourceConstraints_a000582a23bd749befb36b8e6b10dafc7}{set\_code\_range\_size\_in\_bytes}}(}
\DoxyCodeLine{297           code\_range\_size\_mb * \mbox{\hyperlink{flag-definitions_8h_a67f6e75911a1c9e16076ff4db599e681}{i::MB}});}
\DoxyCodeLine{298 }
\DoxyCodeLine{299       \{}
\DoxyCodeLine{300         \mbox{\hyperlink{classv8_1_1SnapshotCreator}{v8::SnapshotCreator}} creator(isolate, create\_params);}
\DoxyCodeLine{301 }
\DoxyCodeLine{302         blob = \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a9c8d4d05ac98fcd6a2161cf525bc05be}{CreateSnapshotDataBlob}}(creator, embed\_script.get());}
\DoxyCodeLine{303 }
\DoxyCodeLine{304         \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_ad60eca700ba97c174d638829f9ecfc68}{WriteEmbeddedFile}}(\&embedded\_writer);}
\DoxyCodeLine{305 }
\DoxyCodeLine{306 \textcolor{preprocessor}{\#if V8\_STATIC\_ROOTS\_GENERATION\_BOOL}}
\DoxyCodeLine{307         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.static\_roots\_src) \{}
\DoxyCodeLine{308           \mbox{\hyperlink{classv8_1_1internal_1_1StaticRootsTableGen_ac78d6e2cafc7a9538d9b77235edc849e}{i::StaticRootsTableGen::write}}(i\_isolate,}
\DoxyCodeLine{309                                         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.static\_roots\_src);}
\DoxyCodeLine{310         \}}
\DoxyCodeLine{311 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{312 }
\DoxyCodeLine{313         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.builtins\_effects\_src) \{}
\DoxyCodeLine{314           \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(i\_isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a1fdc938367a72af81a0dd052bc5f80d5}{builtins\_effects\_analyzer}}());}
\DoxyCodeLine{315           i\_isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a1fdc938367a72af81a0dd052bc5f80d5}{builtins\_effects\_analyzer}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1BuiltinsEffectsAnalyzer_a52e4d5cd944520076633063aae118562}{Write}}(}
\DoxyCodeLine{316               \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.builtins\_effects\_src);}
\DoxyCodeLine{317         \}}
\DoxyCodeLine{318         \textcolor{keywordflow}{if} (i\_isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a1fdc938367a72af81a0dd052bc5f80d5}{builtins\_effects\_analyzer}}() != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{319           i\_isolate-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a1fdc938367a72af81a0dd052bc5f80d5}{builtins\_effects\_analyzer}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1BuiltinsEffectsAnalyzer_a0e70bc609570aacfffca1c6466d88654}{TearDown}}(i\_isolate);}
\DoxyCodeLine{320         \}}
\DoxyCodeLine{321       \}}
\DoxyCodeLine{322       isolate-\/>\mbox{\hyperlink{classv8_1_1Isolate_a1a5a5762e4221aff8c6b10f9e3cec0af}{Dispose}}();}
\DoxyCodeLine{323     \}}
\DoxyCodeLine{324 }
\DoxyCodeLine{325     \textcolor{keywordflow}{if} (warmup\_script) \{}
\DoxyCodeLine{326       \mbox{\hyperlink{classv8_1_1StartupData}{v8::StartupData}} cold = blob;}
\DoxyCodeLine{327       blob = \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_a1ebb13df7e62429b23be99fff2dca78d}{WarmUpSnapshotDataBlob}}(cold, warmup\_script.get());}
\DoxyCodeLine{328       \textcolor{keyword}{delete}[] cold.\mbox{\hyperlink{classv8_1_1StartupData_a8daf0c5282d7c465988757dc4ecda1af}{data}};}
\DoxyCodeLine{329     \}}
\DoxyCodeLine{330 }
\DoxyCodeLine{331     \textcolor{keyword}{delete} \mbox{\hyperlink{namespaceanonymous__namespace_02mksnapshot_8cc_03_ac81897c4b659edda33911e6bd62829e9}{counter\_map\_}};}
\DoxyCodeLine{332 }
\DoxyCodeLine{333     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(blob.\mbox{\hyperlink{classv8_1_1StartupData_a8daf0c5282d7c465988757dc4ecda1af}{data}});}
\DoxyCodeLine{334     snapshot\_writer.WriteSnapshot(blob);}
\DoxyCodeLine{335     \textcolor{keyword}{delete}[] blob.\mbox{\hyperlink{classv8_1_1StartupData_a8daf0c5282d7c465988757dc4ecda1af}{data}};}
\DoxyCodeLine{336   \}}
\DoxyCodeLine{337 }
\DoxyCodeLine{338   \mbox{\hyperlink{classv8_1_1V8_af761970f495ed98e940808fd4fa5caff}{v8::V8::Dispose}}();}
\DoxyCodeLine{339   \mbox{\hyperlink{classv8_1_1V8_a23afcb889f24d2d1823d0fbdc7fc0212}{v8::V8::DisposePlatform}}();}
\DoxyCodeLine{340   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{341 \}}

\end{DoxyCode}


References v8\+::\+Isolate\+::\+Allocate(), v8\+::\+Isolate\+::\+Create\+Params\+::array\+\_\+buffer\+\_\+allocator, v8\+::internal\+::\+Isolate\+::builtins\+\_\+effects\+\_\+analyzer(), CHECK, v8\+::\+Isolate\+::\+Create\+Params\+::constraints, anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::counter\+\_\+map\+\_\+, anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Create\+Snapshot\+Data\+Blob(), v8\+::\+Startup\+Data\+::data, DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::\+V8\+::\+Dispose(), v8\+::\+Isolate\+::\+Dispose(), v8\+::\+V8\+::\+Dispose\+Platform(), v8\+::base\+::\+Ensure\+Console\+Output(), anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Get\+Extra\+Code(), v8\+::\+V8\+::\+Initialize(), v8\+::\+V8\+::\+Initialize\+ICUDefault\+Location(), v8\+::\+V8\+::\+Initialize\+Platform(), v8\+::internal\+::k\+Maximal\+Code\+Range\+Size, v8\+::internal\+::k\+Max\+PCRelative\+Code\+Range\+In\+MB, anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Maybe\+Set\+Counter\+Function(), MB, v8\+::\+Array\+Buffer\+::\+Allocator\+::\+New\+Default\+Allocator(), v8\+::platform\+::\+New\+Default\+Platform(), v8\+::internal\+::\+Print\+F(), v8\+::internal\+::\+Cpu\+Features\+::\+Probe(), v8\+::internal\+::\+Isolate\+::\+Register\+Embedded\+File\+Writer(), v8\+::base\+::internal\+::result, v8\+::\+Resource\+Constraints\+::set\+\_\+code\+\_\+range\+\_\+size\+\_\+in\+\_\+bytes(), v8\+::internal\+::\+Embedded\+File\+Writer\+::\+Set\+Embedded\+File(), v8\+::internal\+::\+Embedded\+File\+Writer\+::\+Set\+Embedded\+Variant(), v8\+::internal\+::\+Flag\+List\+::\+Set\+Flags\+From\+Command\+Line(), v8\+::internal\+::\+Embedded\+File\+Writer\+::\+Set\+Target\+Arch(), v8\+::internal\+::\+Embedded\+File\+Writer\+::\+Set\+Target\+Os(), v8\+::internal\+::string, v8\+::internal\+::\+Builtins\+Effects\+Analyzer\+::\+Tear\+Down(), v8\+::internal\+::v8\+\_\+flags, anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Warm\+Up\+Snapshot\+Data\+Blob(), v8\+::internal\+::\+Builtins\+Effects\+Analyzer\+::\+Write(), v8\+::internal\+::\+Static\+Roots\+Table\+Gen\+::write(), and anonymous\+\_\+namespace\{mksnapshot.\+cc\}\+::\+Write\+Embedded\+File().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{mksnapshot_8cc_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}
