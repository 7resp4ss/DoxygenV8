\hypertarget{classv8_1_1internal_1_1maglev_1_1MaglevCompiler}{}\doxysection{v8\+::internal\+::maglev\+::Maglev\+Compiler Class Reference}
\label{classv8_1_1internal_1_1maglev_1_1MaglevCompiler}\index{v8::internal::maglev::MaglevCompiler@{v8::internal::maglev::MaglevCompiler}}


{\ttfamily \#include $<$maglev-\/compiler.\+h$>$}



Inheritance diagram for v8\+::internal\+::maglev\+::Maglev\+Compiler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{classv8_1_1internal_1_1maglev_1_1MaglevCompiler__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::maglev\+::Maglev\+Compiler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{classv8_1_1internal_1_1maglev_1_1MaglevCompiler__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_a855dbf2e8befa361861cd8ab8f54199b}{Compile}} (\mbox{\hyperlink{classv8_1_1internal_1_1LocalIsolate}{Local\+Isolate}} $\ast$local\+\_\+isolate, \mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompilationInfo}{Maglev\+Compilation\+Info}} $\ast$compilation\+\_\+info)
\item 
static std\+::pair$<$ \mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$, \mbox{\hyperlink{namespacev8_1_1internal_a170d48425b861bac584bb286a25d977f}{Bailout\+Reason}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_ab99ae8d9078ed29d93290f9d9399c031}{Generate\+Code}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompilationInfo}{Maglev\+Compilation\+Info}} $\ast$compilation\+\_\+info)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 24 of file maglev-\/compiler.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_a855dbf2e8befa361861cd8ab8f54199b}\label{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_a855dbf2e8befa361861cd8ab8f54199b}} 
\index{v8::internal::maglev::MaglevCompiler@{v8::internal::maglev::MaglevCompiler}!Compile@{Compile}}
\index{Compile@{Compile}!v8::internal::maglev::MaglevCompiler@{v8::internal::maglev::MaglevCompiler}}
\doxysubsubsection{\texorpdfstring{Compile()}{Compile()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::maglev\+::\+Maglev\+Compiler\+::\+Compile (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1LocalIsolate}{Local\+Isolate}} $\ast$}]{local\+\_\+isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompilationInfo}{Maglev\+Compilation\+Info}} $\ast$}]{compilation\+\_\+info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 60 of file maglev-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                                                       \{}
\DoxyCodeLine{62   compiler::CurrentHeapBrokerScope current\_broker(compilation\_info-\/>broker());}
\DoxyCodeLine{63   Graph* \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}} = \mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1Graph_a9b1ed2322dc32dba8ab0d1271fb09c5b}{Graph::New}}(compilation\_info);}
\DoxyCodeLine{64 }
\DoxyCodeLine{65   \textcolor{keywordtype}{bool} is\_tracing\_enabled = \textcolor{keyword}{false};}
\DoxyCodeLine{66   \{}
\DoxyCodeLine{67     UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{comment}{// Build graph.}}
\DoxyCodeLine{70     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_code || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.code\_comments ||}
\DoxyCodeLine{71         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graph || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs ||}
\DoxyCodeLine{72         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_graph\_building ||}
\DoxyCodeLine{73         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_escape\_analysis ||}
\DoxyCodeLine{74         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_phi\_untagging || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_regalloc ||}
\DoxyCodeLine{75         \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_object\_tracking) \{}
\DoxyCodeLine{76       is\_tracing\_enabled = compilation\_info-\/>toplevel\_compilation\_unit()}
\DoxyCodeLine{77                                -\/>shared\_function\_info()}
\DoxyCodeLine{78                                .object()}
\DoxyCodeLine{79                                -\/>PassesFilter(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.maglev\_print\_filter);}
\DoxyCodeLine{80       compilation\_info-\/>set\_graph\_labeller(\textcolor{keyword}{new} MaglevGraphLabeller());}
\DoxyCodeLine{81     \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\&}
\DoxyCodeLine{84         (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_code || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graph ||}
\DoxyCodeLine{85          \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_graph\_building ||}
\DoxyCodeLine{86          \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_phi\_untagging ||}
\DoxyCodeLine{87          \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.trace\_maglev\_regalloc)) \{}
\DoxyCodeLine{88       MaglevCompilationUnit* top\_level\_unit =}
\DoxyCodeLine{89           compilation\_info-\/>toplevel\_compilation\_unit();}
\DoxyCodeLine{90       std::cout << \textcolor{stringliteral}{"{}Compiling "{}} << Brief(*compilation\_info-\/>toplevel\_function())}
\DoxyCodeLine{91                 << \textcolor{stringliteral}{"{} with Maglev\(\backslash\)n"{}};}
\DoxyCodeLine{92       \mbox{\hyperlink{classv8_1_1internal_1_1BytecodeArray_aa697b1df23298f823e8d7665d6e059ec}{BytecodeArray::Disassemble}}(top\_level\_unit-\/>bytecode().object(),}
\DoxyCodeLine{93                                  std::cout);}
\DoxyCodeLine{94       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.maglev\_print\_feedback) \{}
\DoxyCodeLine{95         \mbox{\hyperlink{namespacev8_1_1internal_a6b717bb53640adb6d9de62f718e70b3a}{Print}}(*top\_level\_unit-\/>feedback().object(), std::cout);}
\DoxyCodeLine{96       \}}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \{}
\DoxyCodeLine{100       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{101                    \textcolor{stringliteral}{"{}V8.Maglev.GraphBuilding"{}});}
\DoxyCodeLine{102       MaglevGraphBuilder graph\_builder(}
\DoxyCodeLine{103           local\_isolate, compilation\_info-\/>toplevel\_compilation\_unit(), \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{104       graph\_builder.Build();}
\DoxyCodeLine{105 }
\DoxyCodeLine{106       \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs) \{}
\DoxyCodeLine{107         std::cout << \textcolor{stringliteral}{"{}\(\backslash\)nAfter graph building"{}} << std::endl;}
\DoxyCodeLine{108         \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{109       \}}
\DoxyCodeLine{110     \}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{113     \{}
\DoxyCodeLine{114       GraphProcessor<MaglevGraphVerifier, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}>}
\DoxyCodeLine{115           verifier(compilation\_info);}
\DoxyCodeLine{116       verifier.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.maglev\_non\_eager\_inlining) \{}
\DoxyCodeLine{121       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{122                    \textcolor{stringliteral}{"{}V8.Maglev.Inlining"{}});}
\DoxyCodeLine{123 }
\DoxyCodeLine{124       MaglevInliner inliner(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{125       inliner.Run(is\_tracing\_enabled);}
\DoxyCodeLine{126 }
\DoxyCodeLine{127       \textcolor{comment}{// TODO(victorgomes): We need to remove all identity nodes before}}
\DoxyCodeLine{128       \textcolor{comment}{// PhiRepresentationSelector. Since Identity has different semantics}}
\DoxyCodeLine{129       \textcolor{comment}{// there. Check if we can remove the identity nodes during}}
\DoxyCodeLine{130       \textcolor{comment}{// PhiRepresentationSelector instead.}}
\DoxyCodeLine{131       GraphProcessor<SweepIdentityNodes, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}> sweep;}
\DoxyCodeLine{132       sweep.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{133     \}}
\DoxyCodeLine{134 }
\DoxyCodeLine{135 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{136     \{}
\DoxyCodeLine{137       GraphProcessor<MaglevGraphVerifier, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}>}
\DoxyCodeLine{138           verifier(compilation\_info);}
\DoxyCodeLine{139       verifier.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{140     \}}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.maglev\_licm) \{}
\DoxyCodeLine{144       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{145                    \textcolor{stringliteral}{"{}V8.Maglev.LoopOptimizations"{}});}
\DoxyCodeLine{146 }
\DoxyCodeLine{147       GraphProcessor<LoopOptimizationProcessor> loop\_optimizations(}
\DoxyCodeLine{148           compilation\_info);}
\DoxyCodeLine{149       loop\_optimizations.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{150 }
\DoxyCodeLine{151       \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs) \{}
\DoxyCodeLine{152         std::cout << \textcolor{stringliteral}{"{}\(\backslash\)nAfter loop optimizations"{}} << std::endl;}
\DoxyCodeLine{153         \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{154       \}}
\DoxyCodeLine{155     \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{158     \{}
\DoxyCodeLine{159       GraphProcessor<MaglevGraphVerifier, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}>}
\DoxyCodeLine{160           verifier(compilation\_info);}
\DoxyCodeLine{161       verifier.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.maglev\_untagged\_phis) \{}
\DoxyCodeLine{166       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{167                    \textcolor{stringliteral}{"{}V8.Maglev.PhiUntagging"{}});}
\DoxyCodeLine{168 }
\DoxyCodeLine{169       GraphProcessor<MaglevPhiRepresentationSelector> representation\_selector(}
\DoxyCodeLine{170           \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{171       representation\_selector.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{172 }
\DoxyCodeLine{173       \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs) \{}
\DoxyCodeLine{174         std::cout << \textcolor{stringliteral}{"{}\(\backslash\)nAfter Phi untagging"{}} << std::endl;}
\DoxyCodeLine{175         \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{176       \}}
\DoxyCodeLine{177     \}}
\DoxyCodeLine{178   \}}
\DoxyCodeLine{179 }
\DoxyCodeLine{180 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{181   \{}
\DoxyCodeLine{182     GraphProcessor<MaglevGraphVerifier, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}>}
\DoxyCodeLine{183         verifier(compilation\_info);}
\DoxyCodeLine{184     verifier.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{185   \}}
\DoxyCodeLine{186 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{187 }
\DoxyCodeLine{188   \{}
\DoxyCodeLine{189     \textcolor{comment}{// Post-\/hoc optimisation:}}
\DoxyCodeLine{190     \textcolor{comment}{//   -\/ Remove unreachable blocks}}
\DoxyCodeLine{191     \textcolor{comment}{//   -\/ Dead node marking}}
\DoxyCodeLine{192     \textcolor{comment}{//   -\/ Cleaning up identity nodes}}
\DoxyCodeLine{193     \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{194                  \textcolor{stringliteral}{"{}V8.Maglev.DeadCodeMarking"{}});}
\DoxyCodeLine{195     \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}}-\/>may\_have\_unreachable\_blocks()) \{}
\DoxyCodeLine{196       \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}}-\/>RemoveUnreachableBlocks();}
\DoxyCodeLine{197     \}}
\DoxyCodeLine{198     GraphProcessor<AnyUseMarkingProcessor> processor;}
\DoxyCodeLine{199     processor.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{200   \}}
\DoxyCodeLine{201 }
\DoxyCodeLine{202   \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs) \{}
\DoxyCodeLine{203     UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{204     std::cout << \textcolor{stringliteral}{"{}After use marking"{}} << std::endl;}
\DoxyCodeLine{205     \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{206   \}}
\DoxyCodeLine{207 }
\DoxyCodeLine{208 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{209   \{}
\DoxyCodeLine{210     GraphProcessor<MaglevGraphVerifier, \textcolor{comment}{/* visit\_identity\_nodes */} \textcolor{keyword}{true}>}
\DoxyCodeLine{211         verifier(compilation\_info);}
\DoxyCodeLine{212     verifier.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{213   \}}
\DoxyCodeLine{214 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{215 }
\DoxyCodeLine{216   \{}
\DoxyCodeLine{217     RegallocInfo regalloc\_info;}
\DoxyCodeLine{218     \{}
\DoxyCodeLine{219       \textcolor{comment}{// Preprocessing for register allocation and code gen:}}
\DoxyCodeLine{220       \textcolor{comment}{//   -\/ Remove dead nodes}}
\DoxyCodeLine{221       \textcolor{comment}{//   -\/ Collect input/output location constraints}}
\DoxyCodeLine{222       \textcolor{comment}{//   -\/ Find the maximum number of stack arguments passed to calls}}
\DoxyCodeLine{223       \textcolor{comment}{//   -\/ Collect use information, for SSA liveness and next-\/use distance.}}
\DoxyCodeLine{224       \textcolor{comment}{//   -\/ Mark}}
\DoxyCodeLine{225       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{226                    \textcolor{stringliteral}{"{}V8.Maglev.NodeProcessing"{}});}
\DoxyCodeLine{227       UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{228       \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_adaaf9f811750711b04af0324d81841bf}{GraphMultiProcessor}}<DeadNodeSweepingProcessor,}
\DoxyCodeLine{229                           ValueLocationConstraintProcessor,}
\DoxyCodeLine{230                           MaxCallDepthProcessor, LiveRangeAndNextUseProcessor,}
\DoxyCodeLine{231                           DecompressedUseMarkingProcessor>}
\DoxyCodeLine{232           processor(LiveRangeAndNextUseProcessor\{compilation\_info, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}},}
\DoxyCodeLine{233                                                  \&regalloc\_info\});}
\DoxyCodeLine{234       processor.ProcessGraph(\mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237     \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\& \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs) \{}
\DoxyCodeLine{238       UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{239       std::cout << \textcolor{stringliteral}{"{}After register allocation pre-\/processing"{}} << std::endl;}
\DoxyCodeLine{240       \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{241     \}}
\DoxyCodeLine{242 }
\DoxyCodeLine{243     \{}
\DoxyCodeLine{244       \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{245                    \textcolor{stringliteral}{"{}V8.Maglev.RegisterAllocation"{}});}
\DoxyCodeLine{246       StraightForwardRegisterAllocator allocator(compilation\_info, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}},}
\DoxyCodeLine{247                                                  \&regalloc\_info);}
\DoxyCodeLine{248     \}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250     \textcolor{keywordflow}{if} (is\_tracing\_enabled \&\&}
\DoxyCodeLine{251         (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graph || \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_graphs)) \{}
\DoxyCodeLine{252       UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{253       std::cout << \textcolor{stringliteral}{"{}After register allocation"{}} << std::endl;}
\DoxyCodeLine{254       \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a314d5fc85ee6e5972092bf3175c8909a}{PrintGraph}}(std::cout, \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{255     \}}
\DoxyCodeLine{256   \}}
\DoxyCodeLine{257 }
\DoxyCodeLine{258   \{}
\DoxyCodeLine{259     \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{260                  \textcolor{stringliteral}{"{}V8.Maglev.CodeAssembly"{}});}
\DoxyCodeLine{261     UnparkedScopeIfOnBackground unparked\_scope(local\_isolate-\/>heap());}
\DoxyCodeLine{262     std::unique\_ptr<MaglevCodeGenerator> code\_generator =}
\DoxyCodeLine{263         std::make\_unique<MaglevCodeGenerator>(local\_isolate, compilation\_info,}
\DoxyCodeLine{264                                               \mbox{\hyperlink{flag-definitions_8h_a06b2b7e5d08192bb493bba69cb19a7a8}{graph}});}
\DoxyCodeLine{265     \textcolor{keywordtype}{bool} success = code\_generator-\/>Assemble();}
\DoxyCodeLine{266     \textcolor{keywordflow}{if} (!success) \{}
\DoxyCodeLine{267       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{268     \}}
\DoxyCodeLine{269 }
\DoxyCodeLine{270     \textcolor{comment}{// Stash the compiled code\_generator on the compilation info.}}
\DoxyCodeLine{271     compilation\_info-\/>set\_code\_generator(std::move(code\_generator));}
\DoxyCodeLine{272   \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{275 \}}

\end{DoxyCode}


References v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::broker(), v8\+::internal\+::maglev\+::\+Maglev\+Graph\+Builder\+::\+Build(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Unit\+::bytecode(), v8\+::internal\+::\+Bytecode\+Array\+::\+Disassemble(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Unit\+::feedback(), graph(), v8\+::internal\+::\+Local\+Isolate\+::heap(), v8\+::internal\+::maglev\+::\+Graph\+::\+New(), v8\+::internal\+::compiler\+::\+Feedback\+Vector\+Ref\+::object(), v8\+::internal\+::compiler\+::\+Bytecode\+Array\+Ref\+::object(), v8\+::internal\+::compiler\+::\+Shared\+Function\+Info\+Ref\+::object(), v8\+::internal\+::\+Print(), v8\+::internal\+::maglev\+::\+Print\+Graph(), v8\+::internal\+::maglev\+::\+Graph\+Processor$<$ Node\+Processor, visit\+\_\+identity\+\_\+nodes $>$\+::\+Process\+Graph(), v8\+::internal\+::maglev\+::\+Maglev\+Inliner\+::\+Run(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::set\+\_\+graph\+\_\+labeller(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Unit\+::shared\+\_\+function\+\_\+info(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::toplevel\+\_\+compilation\+\_\+unit(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::toplevel\+\_\+function(), TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT0, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_a855dbf2e8befa361861cd8ab8f54199b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_ab99ae8d9078ed29d93290f9d9399c031}\label{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_ab99ae8d9078ed29d93290f9d9399c031}} 
\index{v8::internal::maglev::MaglevCompiler@{v8::internal::maglev::MaglevCompiler}!GenerateCode@{GenerateCode}}
\index{GenerateCode@{GenerateCode}!v8::internal::maglev::MaglevCompiler@{v8::internal::maglev::MaglevCompiler}}
\doxysubsubsection{\texorpdfstring{GenerateCode()}{GenerateCode()}}
{\footnotesize\ttfamily std\+::pair$<$ \mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Code}{Code}} $>$, \mbox{\hyperlink{namespacev8_1_1internal_a170d48425b861bac584bb286a25d977f}{Bailout\+Reason}} $>$ v8\+::internal\+::maglev\+::\+Maglev\+Compiler\+::\+Generate\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevCompilationInfo}{Maglev\+Compilation\+Info}} $\ast$}]{compilation\+\_\+info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 278 of file maglev-\/compiler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{279                                                                \{}
\DoxyCodeLine{280   compiler::CurrentHeapBrokerScope current\_broker(compilation\_info-\/>broker());}
\DoxyCodeLine{281   MaglevCodeGenerator* \textcolor{keyword}{const} code\_generator =}
\DoxyCodeLine{282       compilation\_info-\/>code\_generator();}
\DoxyCodeLine{283   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(code\_generator);}
\DoxyCodeLine{284 }
\DoxyCodeLine{285   Handle<Code> \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}};}
\DoxyCodeLine{286   \{}
\DoxyCodeLine{287     \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{288                  \textcolor{stringliteral}{"{}V8.Maglev.CodeGeneration"{}});}
\DoxyCodeLine{289     \textcolor{keywordflow}{if} (compilation\_info-\/>is\_detached() ||}
\DoxyCodeLine{290         !code\_generator-\/>Generate(isolate).ToHandle(\&\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}})) \{}
\DoxyCodeLine{291       compilation\_info-\/>toplevel\_compilation\_unit()}
\DoxyCodeLine{292           -\/>shared\_function\_info()}
\DoxyCodeLine{293           .object()}
\DoxyCodeLine{294           -\/>set\_maglev\_compilation\_failed(\textcolor{keyword}{true});}
\DoxyCodeLine{295       \textcolor{keywordflow}{return} \{\{\}, BailoutReason::kMaglevCodeGenerationFailed\};}
\DoxyCodeLine{296     \}}
\DoxyCodeLine{297   \}}
\DoxyCodeLine{298 }
\DoxyCodeLine{299   \{}
\DoxyCodeLine{300     \mbox{\hyperlink{trace-event-no-perfetto_8h_a3feabb76c0ac2918798bc11ab55c6a79}{TRACE\_EVENT0}}(\mbox{\hyperlink{trace-event-no-perfetto_8h_a97689377430b094caec680dd7dd230fe}{TRACE\_DISABLED\_BY\_DEFAULT}}(\textcolor{stringliteral}{"{}v8.compile"{}}),}
\DoxyCodeLine{301                  \textcolor{stringliteral}{"{}V8.Maglev.CommittingDependencies"{}});}
\DoxyCodeLine{302     \textcolor{keywordflow}{if} (!compilation\_info-\/>broker()-\/>dependencies()-\/>Commit(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}})) \{}
\DoxyCodeLine{303       \textcolor{comment}{// Don't `set\_maglev\_compilation\_failed` s.t. we may reattempt}}
\DoxyCodeLine{304       \textcolor{comment}{// compilation.}}
\DoxyCodeLine{305       \textcolor{comment}{// TODO(v8:7700): Make this more robust, i.e.: don't recompile endlessly.}}
\DoxyCodeLine{306       compilation\_info-\/>toplevel\_function()-\/>SetInterruptBudget(}
\DoxyCodeLine{307           isolate, \mbox{\hyperlink{namespacev8_1_1internal_ae1290056b3472a1bb475139c13e2efdba7774eadbb2e71085823eb37476c181f0}{BudgetModification::kReduce}});}
\DoxyCodeLine{308       \textcolor{keywordflow}{return} \{\{\}, BailoutReason::kBailedOutDueToDependencyChange\};}
\DoxyCodeLine{309     \}}
\DoxyCodeLine{310   \}}
\DoxyCodeLine{311 }
\DoxyCodeLine{312   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.print\_maglev\_code) \{}
\DoxyCodeLine{313 \textcolor{preprocessor}{\#ifdef OBJECT\_PRINT}}
\DoxyCodeLine{314     std::unique\_ptr<char[]> debug\_name =}
\DoxyCodeLine{315         compilation\_info-\/>toplevel\_function()-\/>shared()-\/>DebugNameCStr();}
\DoxyCodeLine{316     CodeTracer::StreamScope tracing\_scope(isolate-\/>GetCodeTracer());}
\DoxyCodeLine{317     \textcolor{keyword}{auto}\& os = tracing\_scope.stream();}
\DoxyCodeLine{318     \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>CodePrint(os, debug\_name.get());}
\DoxyCodeLine{319 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{320     \mbox{\hyperlink{namespacev8_1_1internal_a6b717bb53640adb6d9de62f718e70b3a}{Print}}(*\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}});}
\DoxyCodeLine{321 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{322   \}}
\DoxyCodeLine{323 }
\DoxyCodeLine{324   \textcolor{keywordflow}{return} \{\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}, BailoutReason::kNoReason\};}
\DoxyCodeLine{325 \}}

\end{DoxyCode}


References v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::broker(), code, v8\+::internal\+::compiler\+::\+Compilation\+Dependencies\+::\+Commit(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, v8\+::internal\+::compiler\+::\+JSHeap\+Broker\+::dependencies(), v8\+::internal\+::maglev\+::\+Maglev\+Code\+Generator\+::\+Generate(), v8\+::internal\+::\+Isolate\+::\+Get\+Code\+Tracer(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::is\+\_\+detached(), v8\+::internal\+::k\+Reduce, v8\+::internal\+::compiler\+::\+Shared\+Function\+Info\+Ref\+::object(), v8\+::internal\+::\+Print(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Unit\+::shared\+\_\+function\+\_\+info(), v8\+::internal\+::\+Code\+Tracer\+::\+Stream\+Scope\+::stream(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::toplevel\+\_\+compilation\+\_\+unit(), v8\+::internal\+::maglev\+::\+Maglev\+Compilation\+Info\+::toplevel\+\_\+function(), TRACE\+\_\+\+DISABLED\+\_\+\+BY\+\_\+\+DEFAULT, TRACE\+\_\+\+EVENT0, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1maglev_1_1MaglevCompiler_ab99ae8d9078ed29d93290f9d9399c031_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/maglev/\mbox{\hyperlink{maglev-compiler_8h}{maglev-\/compiler.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/maglev/\mbox{\hyperlink{maglev-compiler_8cc}{maglev-\/compiler.\+cc}}\end{DoxyCompactItemize}
