\hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03}{}\doxysection{v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm64.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03}\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a29e0db3868bdb3674c493c87b882a0a7}{Sub\+Size\+And\+Tag\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} size\+\_\+in\+\_\+bytes)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a1aa1f8b4bf9d05c9cfaa508eeae0b172}{Sub\+Size\+And\+Tag\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classint}{int}} size\+\_\+in\+\_\+bytes)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a414d4c66aa248d0f9ad13a0f69419027}{Allocate\+Raw}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}} register\+\_\+snapshot, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classT}{T}} size\+\_\+in\+\_\+bytes, \mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}} alloc\+\_\+type, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}} alignment)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a414d4c66aa248d0f9ad13a0f69419027}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a414d4c66aa248d0f9ad13a0f69419027}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}!AllocateRaw@{AllocateRaw}}
\index{AllocateRaw@{AllocateRaw}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AllocateRaw()}{AllocateRaw()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm64.\+cc\}\+::Allocate\+Raw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}}}]{register\+\_\+snapshot,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classT}{T}}}]{size\+\_\+in\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}}}]{alloc\+\_\+type,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}}}]{alignment }\end{DoxyParamCaption})}



Definition at line 30 of file maglev-\/assembler-\/arm64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{33                                                 \{}
\DoxyCodeLine{34   \textcolor{comment}{// TODO(victorgomes): Call the runtime for large object allocation.}}
\DoxyCodeLine{35   \textcolor{comment}{// TODO(victorgomes): Support double alignment.}}
\DoxyCodeLine{36   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(masm-\/>allow\_allocate());}
\DoxyCodeLine{37   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(alignment, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803a89dfe630590dbfe7004e6de0fabec67b}{kTaggedAligned}});}
\DoxyCodeLine{38   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.single\_generation) \{}
\DoxyCodeLine{39     alloc\_type = AllocationType::kOld;}
\DoxyCodeLine{40   \}}
\DoxyCodeLine{41   ExternalReference top = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a60f836e4f23b20abfb3e194df4dd6075}{SpaceAllocationTopAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{42   ExternalReference limit = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_ae6e53e1e4985894fe83a1e4d60e48613}{SpaceAllocationLimitAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{43   ZoneLabelRef done(masm);}
\DoxyCodeLine{44   MaglevAssembler::TemporaryRegisterScope temps(masm);}
\DoxyCodeLine{45   \mbox{\hyperlink{namespacev8_1_1internal_1_1ETWJITInterface_a6782da00e5166055555c65db3a9ec7eb}{Register}} scratch = temps.AcquireScratch();}
\DoxyCodeLine{46   \textcolor{comment}{// We are a bit short on registers, so we use the same register for \{object\}}}
\DoxyCodeLine{47   \textcolor{comment}{// and \{new\_top\}. Once we have defined \{new\_top\}, we don't use \{object\} until}}
\DoxyCodeLine{48   \textcolor{comment}{// \{new\_top\} is used for the last time. And there (at the end of this}}
\DoxyCodeLine{49   \textcolor{comment}{// function), we recover the original \{object\} from \{new\_top\} by subtracting}}
\DoxyCodeLine{50   \textcolor{comment}{// \{size\_in\_bytes\}.}}
\DoxyCodeLine{51   \mbox{\hyperlink{namespacev8_1_1internal_1_1ETWJITInterface_a6782da00e5166055555c65db3a9ec7eb}{Register}} new\_top = object;}
\DoxyCodeLine{52   \textcolor{comment}{// Check if there is enough space.}}
\DoxyCodeLine{53   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Ldr(\textcolor{keywordtype}{object}, \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top, scratch));}
\DoxyCodeLine{54   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} \mbox{\hyperlink{namespacev8_1_1bigint_a6d4d2ce18897aba0f90b3208eca29a5b}{Add}}(new\_top, \textcolor{keywordtype}{object}, size\_in\_bytes);}
\DoxyCodeLine{55   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Ldr(scratch, \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(limit, scratch));}
\DoxyCodeLine{56   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1turboshaft_1_1anonymous__namespace_02loop-unrolling-reducer_8cc_03_a0c4ebc21a783280f0cc51d403c42bec6}{Cmp}}(new\_top, scratch);}
\DoxyCodeLine{57   \textcolor{comment}{// Otherwise call runtime.}}
\DoxyCodeLine{58   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} JumpToDeferredIf(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a3f018e64c0aa70e5dcccba23cd6e8ff6}{kUnsignedGreaterThanEqual}}, AllocateSlow<T>,}
\DoxyCodeLine{59                       register\_snapshot, \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a222b79e7e4247885c5eb1d6613141e72}{AllocateBuiltin}}(alloc\_type),}
\DoxyCodeLine{60                       size\_in\_bytes, done);}
\DoxyCodeLine{61   \textcolor{comment}{// Store new top and tag object.}}
\DoxyCodeLine{62   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Move(\mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top, scratch), new\_top);}
\DoxyCodeLine{63   \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a1aa1f8b4bf9d05c9cfaa508eeae0b172}{SubSizeAndTagObject}}(masm, \textcolor{keywordtype}{object}, size\_in\_bytes);}
\DoxyCodeLine{64   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} bind(*done);}
\DoxyCodeLine{65 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::internal\+::maglev\+::\+Maglev\+Assembler\+::\+Temporary\+Register\+Scope\+::\+Acquire\+Scratch(), v8\+::bigint\+::\+Add(), v8\+::internal\+::maglev\+::\+Allocate\+Builtin(), v8\+::internal\+::compiler\+::turboshaft\+::anonymous\+\_\+namespace\{loop-\/unrolling-\/reducer.\+cc\}\+::\+Cmp(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::k\+Old, v8\+::internal\+::k\+Tagged\+Aligned, v8\+::internal\+::k\+Unsigned\+Greater\+Than\+Equal, v8\+::internal\+::maglev\+::\+Space\+Allocation\+Limit\+Address(), v8\+::internal\+::maglev\+::\+Space\+Allocation\+Top\+Address(), v8\+::internal\+::maglev\+::\+Sub\+Size\+And\+Tag\+Object(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a414d4c66aa248d0f9ad13a0f69419027_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a1aa1f8b4bf9d05c9cfaa508eeae0b172}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a1aa1f8b4bf9d05c9cfaa508eeae0b172}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}!SubSizeAndTagObject@{SubSizeAndTagObject}}
\index{SubSizeAndTagObject@{SubSizeAndTagObject}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SubSizeAndTagObject()}{SubSizeAndTagObject()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm64.\+cc\}\+::Sub\+Size\+And\+Tag\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classint}{int}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 24 of file maglev-\/assembler-\/arm64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{25                                             \{}
\DoxyCodeLine{26   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} \mbox{\hyperlink{namespacev8_1_1bigint_a6d4d2ce18897aba0f90b3208eca29a5b}{Add}}(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_aa2507eb9d594b9767347031fb02d0b20}{kHeapObjectTag}} -\/ size\_in\_bytes);}
\DoxyCodeLine{27 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::bigint\+::\+Add(), and v8\+::internal\+::k\+Heap\+Object\+Tag.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a1aa1f8b4bf9d05c9cfaa508eeae0b172_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a29e0db3868bdb3674c493c87b882a0a7}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a29e0db3868bdb3674c493c87b882a0a7}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}!SubSizeAndTagObject@{SubSizeAndTagObject}}
\index{SubSizeAndTagObject@{SubSizeAndTagObject}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SubSizeAndTagObject()}{SubSizeAndTagObject()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm64.\+cc\}\+::Sub\+Size\+And\+Tag\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 18 of file maglev-\/assembler-\/arm64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{19                                                  \{}
\DoxyCodeLine{20   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1liftoff_af235e0902cf4fbd4131a93f64a84552d}{Sub}}(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, size\_in\_bytes);}
\DoxyCodeLine{21   \mbox{\hyperlink{maglev-assembler-arm64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} \mbox{\hyperlink{namespacev8_1_1bigint_a6d4d2ce18897aba0f90b3208eca29a5b}{Add}}(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_aa2507eb9d594b9767347031fb02d0b20}{kHeapObjectTag}});}
\DoxyCodeLine{22 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::bigint\+::\+Add(), v8\+::internal\+::k\+Heap\+Object\+Tag, and v8\+::internal\+::wasm\+::liftoff\+::\+Sub().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm64_8cc_03_a29e0db3868bdb3674c493c87b882a0a7_cgraph}
\end{center}
\end{figure}
