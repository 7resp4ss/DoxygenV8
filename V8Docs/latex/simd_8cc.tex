\hypertarget{simd_8cc}{}\doxysection{/mnt/\+V8\+Source\+Code/src/objects/simd.cc File Reference}
\label{simd_8cc}\index{/mnt/V8SourceCode/src/objects/simd.cc@{/mnt/V8SourceCode/src/objects/simd.cc}}
{\ttfamily \#include \char`\"{}src/objects/simd.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/base/cpu.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/codegen/cpu-\/features.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/objects/compressed-\/slots.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/objects/fixed-\/array-\/inl.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/objects/heap-\/number-\/inl.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/objects/js-\/array-\/buffer-\/inl.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}src/objects/smi-\/inl.\+h\char`\"{}}\newline
Include dependency graph for simd.\+cc\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{simd_8cc__incl}
\end{center}
\end{figure}
\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespacev8}{v8}}
\begin{DoxyCompactList}\small\item\em This file provides additional API on top of the default one for making API calls, which come from embedder C++ functions. \end{DoxyCompactList}\item 
 \mbox{\hyperlink{namespacev8_1_1internal}{v8\+::internal}}
\item 
 \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{simd_8cc_affe2e788e009b6183134c0f8f7c35d81}{VECTORIZED\+\_\+\+LOOP\+\_\+\+Neon}}(type\+\_\+load,  type\+\_\+eq,  set1,  cmp,  movemask)
\item 
\#define \mbox{\hyperlink{simd_8cc_aa5561022e70eb1bb668ee5c394df3195}{VECTORIZED\+\_\+\+LOOP\+\_\+x86}}(type\+\_\+load,  type\+\_\+eq,  set1,  cmp,  movemask,  extract)
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a8f8243a89ab8ac673b0964afdbe42caf}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Simd\+Kinds}} \{ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a8f8243a89ab8ac673b0964afdbe42cafaa7228d93ee668edc4390f9514a86276b}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::k\+SSE}}
, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a8f8243a89ab8ac673b0964afdbe42cafaca17c92a3cc3bcd7a842f0e65130c2e4}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::k\+Neon}}
, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a8f8243a89ab8ac673b0964afdbe42cafa6a6d0bfd918acc6c5b51c3cd7e939a4f}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::k\+AVX2}}
, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a8f8243a89ab8ac673b0964afdbe42cafa35c3ace1970663a16e5c65baa5941b13}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::k\+None}}
 \}
\item 
enum class \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a27cb03610c16b6169374d252a01ff3f7}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Array\+Index\+Of\+Includes\+Kind}} \{ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a27cb03610c16b6169374d252a01ff3f7afd3e4ece78a7d422280d5ed379482229}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+DOUBLE}}
, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a27cb03610c16b6169374d252a01ff3f7aea2f65b32ec3d505bd059d2bb0efcee2}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+OBJECTORSMI}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Simd\+Kinds \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_af4eebb41e3588e925905f33639e2ec30}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::get\+\_\+vectorization\+\_\+kind}} ()
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a7a3bf4ca6e1a5c85a1fe27188a315d17}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::slow\+\_\+search}} (\mbox{\hyperlink{classT}{T}} $\ast$array, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} index, \mbox{\hyperlink{classT}{T}} search\+\_\+element)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_aba7f3a8544518d028ae143ed10b82896}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::fast\+\_\+search\+\_\+noavx}} (\mbox{\hyperlink{classT}{T}} $\ast$array, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} index, \mbox{\hyperlink{classT}{T}} search\+\_\+element)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a6e5bc7e2641695b035e88511d80508c9}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::fast\+\_\+search\+\_\+avx}} (\mbox{\hyperlink{classT}{T}} $\ast$array, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} index, \mbox{\hyperlink{classT}{T}} search\+\_\+element)
\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_af8a15e556ff7d16bc7c5bd1aa2084ef2}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::search}} (\mbox{\hyperlink{classT}{T}} $\ast$array, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} index, \mbox{\hyperlink{classT}{T}} search\+\_\+element)
\item 
{\footnotesize template$<$Array\+Index\+Of\+Includes\+Kind kind$>$ }\\Address \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a6fea87117086c0d31c25466f51736a51}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Array\+Index\+Of\+Includes}} (Address array\+\_\+start, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} from\+\_\+index, Address search\+\_\+element)
\item 
\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_a9e3d8b6529f5bc530c2c6467312d7f8c}{v8\+::internal\+::\+Array\+Index\+Of\+Includes\+Smi\+Or\+Object}} (Address array\+\_\+start, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} from\+\_\+index, Address search\+\_\+element)
\item 
\mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} \mbox{\hyperlink{namespacev8_1_1internal_a5730d6218c93cbf00db0ada47aac156e}{v8\+::internal\+::\+Array\+Index\+Of\+Includes\+Double}} (Address array\+\_\+start, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} array\+\_\+len, \mbox{\hyperlink{classuintptr__t}{uintptr\+\_\+t}} from\+\_\+index, Address search\+\_\+element)
\item 
char \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a6b99044bc68dbc03f60c6141d88e5796}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Nibble\+To\+Hex}} (uint8\+\_\+t nibble)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a3bfdb39df9a398914cac77fcd3e5656b}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Perform\+Nibble\+To\+Hex\+And\+Write\+Into\+String\+Out\+Put}} (uint8\+\_\+t byte, \mbox{\hyperlink{classint}{int}} index, Direct\+Handle$<$ Seq\+One\+Byte\+String $>$ string\+\_\+output)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a9c6687442e5d4a9f5ec675a3b7ff7f95}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Uint8\+Array\+To\+Hex\+Slow}} (const char $\ast$bytes, size\+\_\+t length, Direct\+Handle$<$ Seq\+One\+Byte\+String $>$ string\+\_\+output)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a263e772fa29a27a8615c0af8ba74bbc1}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Atomic\+Uint8\+Array\+To\+Hex\+Slow}} (const char $\ast$bytes, size\+\_\+t length, Direct\+Handle$<$ Seq\+One\+Byte\+String $>$ string\+\_\+output)
\item 
uint16\+\_\+t \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a9fa44ceea1b25d536d603ed27648795d}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Byte\+To\+Hex}} (uint8\+\_\+t byte)
\item 
\mbox{\hyperlink{src_2base_2compiler-specific_8h_a0032e16491db45060d8690e7fba65ed9}{V8\+\_\+\+ALLOW\+\_\+\+UNUSED}} void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a826bff20a1a127cc5a987570b57a975c}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Handle\+Remaining\+Nibbles}} (const char $\ast$bytes, uint8\+\_\+t $\ast$output, size\+\_\+t length, size\+\_\+t i)
\item 
Tagged$<$ Object $>$ \mbox{\hyperlink{namespacev8_1_1internal_a677c27fa35ba23e6781145862f36a621}{v8\+::internal\+::\+Uint8\+Array\+To\+Hex}} (const char $\ast$bytes, size\+\_\+t length, bool is\+\_\+shared, Direct\+Handle$<$ Seq\+One\+Byte\+String $>$ string\+\_\+output)
\item 
Maybe$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a5fbd353ed5fd7c67491c67d8ae36d0be}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Hex\+To\+Uint8}} (base\+::uc16 hex)
\item 
{\footnotesize template$<$typename T $>$ }\\std\+::optional$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02simd_8cc_03_a3da3f60017fdb631d4043991110cbe8c}{v8\+::internal\+::anonymous\+\_\+namespace\{simd.\+cc\}\+::\+Handle\+Remaining\+Hex\+Values}} (const base\+::\+Vector$<$ \mbox{\hyperlink{classT}{T}} $>$ \&input\+\_\+vector, size\+\_\+t i)
\item 
{\footnotesize template$<$typename T $>$ }\\bool \mbox{\hyperlink{namespacev8_1_1internal_a6ad09af3908139d5a1b8f669d2bc0754}{v8\+::internal\+::\+Array\+Buffer\+From\+Hex}} (const base\+::\+Vector$<$ \mbox{\hyperlink{classT}{T}} $>$ \&input\+\_\+vector, bool is\+\_\+shared, uint8\+\_\+t $\ast$buffer, size\+\_\+t output\+\_\+length)
\item 
template bool \mbox{\hyperlink{namespacev8_1_1internal_a472d128a1d85f48607b4142a8a6990bc}{v8\+::internal\+::\+Array\+Buffer\+From\+Hex}} (const base\+::\+Vector$<$ const uint8\+\_\+t $>$ \&input\+\_\+vector, bool is\+\_\+shared, uint8\+\_\+t $\ast$buffer, size\+\_\+t output\+\_\+length)
\item 
template bool \mbox{\hyperlink{namespacev8_1_1internal_a7dff33894020817ded24ee93c74c5ae9}{v8\+::internal\+::\+Array\+Buffer\+From\+Hex}} (const base\+::\+Vector$<$ const base\+::uc16 $>$ \&input\+\_\+vector, bool is\+\_\+shared, uint8\+\_\+t $\ast$buffer, size\+\_\+t output\+\_\+length)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{simd_8cc_affe2e788e009b6183134c0f8f7c35d81}\label{simd_8cc_affe2e788e009b6183134c0f8f7c35d81}} 
\index{simd.cc@{simd.cc}!VECTORIZED\_LOOP\_Neon@{VECTORIZED\_LOOP\_Neon}}
\index{VECTORIZED\_LOOP\_Neon@{VECTORIZED\_LOOP\_Neon}!simd.cc@{simd.cc}}
\doxysubsubsection{\texorpdfstring{VECTORIZED\_LOOP\_Neon}{VECTORIZED\_LOOP\_Neon}}
{\footnotesize\ttfamily \#define VECTORIZED\+\_\+\+LOOP\+\_\+\+Neon(\begin{DoxyParamCaption}\item[{}]{type\+\_\+load,  }\item[{}]{type\+\_\+eq,  }\item[{}]{set1,  }\item[{}]{cmp,  }\item[{}]{movemask }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \{                                                                          \(\backslash\)}
\DoxyCodeLine{    constexpr \textcolor{keywordtype}{int} elems\_in\_vector = \textcolor{keyword}{sizeof}(type\_load) / \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classT}{T}});           \(\backslash\)}
\DoxyCodeLine{    type\_load search\_element\_vec = set1(search\_element);                     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{\(\backslash\)}}}
\DoxyCodeLine{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{                                                                             \(\backslash\)}}}
\DoxyCodeLine{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{    for}} (; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} + elems\_in\_vector <= array\_len; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} += elems\_in\_vector) \{ \(\backslash\)}
\DoxyCodeLine{      type\_load vector = *\textcolor{keyword}{reinterpret\_cast<}type\_load*\textcolor{keyword}{>}(\&array[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}]);       \(\backslash\)}
\DoxyCodeLine{      type\_eq \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21aef89ff7bd9abfd0deb210fbcadd24123}{eq}} = cmp(vector, search\_element\_vec);                          \(\backslash\)}
\DoxyCodeLine{      if (movemask(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21aef89ff7bd9abfd0deb210fbcadd24123}{eq}})) \{                                                    \(\backslash\)}
\DoxyCodeLine{        return \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} + extract\_first\_nonzero\_index\_\#\#type\_eq(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21aef89ff7bd9abfd0deb210fbcadd24123}{eq}});            \(\backslash\)}
\DoxyCodeLine{      \}                                                                      \(\backslash\)}
\DoxyCodeLine{    \}                                                                        \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}


Definition at line 130 of file simd.\+cc.

\mbox{\Hypertarget{simd_8cc_aa5561022e70eb1bb668ee5c394df3195}\label{simd_8cc_aa5561022e70eb1bb668ee5c394df3195}} 
\index{simd.cc@{simd.cc}!VECTORIZED\_LOOP\_x86@{VECTORIZED\_LOOP\_x86}}
\index{VECTORIZED\_LOOP\_x86@{VECTORIZED\_LOOP\_x86}!simd.cc@{simd.cc}}
\doxysubsubsection{\texorpdfstring{VECTORIZED\_LOOP\_x86}{VECTORIZED\_LOOP\_x86}}
{\footnotesize\ttfamily \#define VECTORIZED\+\_\+\+LOOP\+\_\+x86(\begin{DoxyParamCaption}\item[{}]{type\+\_\+load,  }\item[{}]{type\+\_\+eq,  }\item[{}]{set1,  }\item[{}]{cmp,  }\item[{}]{movemask,  }\item[{}]{extract }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \{                                                                           \(\backslash\)}
\DoxyCodeLine{    constexpr \textcolor{keywordtype}{int} elems\_in\_vector = \textcolor{keyword}{sizeof}(type\_load) / \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classT}{T}});            \(\backslash\)}
\DoxyCodeLine{    type\_load search\_element\_vec = set1(search\_element);                      \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{\(\backslash\)}}}
\DoxyCodeLine{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{                                                                              \(\backslash\)}}}
\DoxyCodeLine{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a190a3c74ff07eb025a2a3706edb1879e}{    for}} (; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} + elems\_in\_vector <= array\_len; \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} += elems\_in\_vector) \{  \(\backslash\)}
\DoxyCodeLine{      type\_load vector = *\textcolor{keyword}{reinterpret\_cast<}type\_load*\textcolor{keyword}{>}(\&array[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}]);        \(\backslash\)}
\DoxyCodeLine{      type\_eq \mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21aef89ff7bd9abfd0deb210fbcadd24123}{eq}} = cmp(vector, search\_element\_vec);                           \(\backslash\)}
\DoxyCodeLine{      int eq\_mask = movemask(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21aef89ff7bd9abfd0deb210fbcadd24123}{eq}});                                             \(\backslash\)}
\DoxyCodeLine{      if (eq\_mask) \{                                                          \(\backslash\)}
\DoxyCodeLine{        return \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} + extract(eq\_mask);                                      \(\backslash\)}
\DoxyCodeLine{      \}                                                                       \(\backslash\)}
\DoxyCodeLine{    \}                                                                         \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}


Definition at line 144 of file simd.\+cc.

