\hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03}{}\doxysection{v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.cc\} Namespace Reference}
\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03}\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a812fe31269e1a0364487d7d476158396}{User\+Shadow\+Stack\+Enabled}} ()
\item 
\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a963050fb98dc70c57f03655c613d953c}{Get\+Protection\+From\+Memory\+Permission}} (\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a31cfc9a9fce923a718f658d3dfb35dd7}{Get\+File\+View\+Access\+From\+Memory\+Permission}} (\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
void $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}{Virtual\+Alloc\+Wrapper}} (void $\ast$address, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} protect)
\item 
uint8\+\_\+t $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d}{Virtual\+Alloc\+With\+Hint}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} protect, void $\ast$hint)
\item 
void $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_afe193e4925bba6817ac9ed8e7910baa8}{Allocate\+Internal}} (void $\ast$hint, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t alignment, size\+\_\+t page\+\_\+size, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} protect)
\item 
void \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_abafde84aab8e9fdabb1031aa2363b8be}{Check\+Is\+OOMError}} (\mbox{\hyperlink{classint}{int}} error)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_afe193e4925bba6817ac9ed8e7910baa8}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_afe193e4925bba6817ac9ed8e7910baa8}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!AllocateInternal@{AllocateInternal}}
\index{AllocateInternal@{AllocateInternal}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AllocateInternal()}{AllocateInternal()}}
{\footnotesize\ttfamily void$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Allocate\+Internal (\begin{DoxyParamCaption}\item[{void $\ast$}]{hint,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t}]{alignment,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{flags,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{protect }\end{DoxyParamCaption})}



Definition at line 946 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{947                                                                      \{}
\DoxyCodeLine{948   \textcolor{comment}{// First, try an exact size aligned allocation.}}
\DoxyCodeLine{949   uint8\_t* base = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d}{VirtualAllocWithHint}}(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect, hint);}
\DoxyCodeLine{950   \textcolor{keywordflow}{if} (base == \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};  \textcolor{comment}{// Can't allocate, we're OOM.}}
\DoxyCodeLine{951 }
\DoxyCodeLine{952   \textcolor{comment}{// If address is suitably aligned, we're done.}}
\DoxyCodeLine{953   uint8\_t* aligned\_base = \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(}
\DoxyCodeLine{954       \mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(base), alignment));}
\DoxyCodeLine{955   \textcolor{keywordflow}{if} (base == aligned\_base) \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(base);}
\DoxyCodeLine{956 }
\DoxyCodeLine{957   \textcolor{comment}{// Otherwise, free it and try a larger allocation.}}
\DoxyCodeLine{958   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(VirtualFree(base, 0, MEM\_RELEASE));}
\DoxyCodeLine{959 }
\DoxyCodeLine{960   \textcolor{comment}{// Clear the hint. It's unlikely we can allocate at this address.}}
\DoxyCodeLine{961   hint = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{962 }
\DoxyCodeLine{963   \textcolor{comment}{// Add the maximum misalignment so we are guaranteed an aligned base address}}
\DoxyCodeLine{964   \textcolor{comment}{// in the allocated region.}}
\DoxyCodeLine{965   \textcolor{keywordtype}{size\_t} padded\_size = \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + (alignment -\/ page\_size);}
\DoxyCodeLine{966   \textcolor{keyword}{const} \textcolor{keywordtype}{int} kMaxAttempts = 3;}
\DoxyCodeLine{967   aligned\_base = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{968   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < kMaxAttempts; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{969     base = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d}{VirtualAllocWithHint}}(padded\_size, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect, hint);}
\DoxyCodeLine{970     \textcolor{keywordflow}{if} (base == \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};  \textcolor{comment}{// Can't allocate, we're OOM.}}
\DoxyCodeLine{971 }
\DoxyCodeLine{972     \textcolor{comment}{// Try to trim the allocation by freeing the padded allocation and then}}
\DoxyCodeLine{973     \textcolor{comment}{// calling VirtualAlloc at the aligned base.}}
\DoxyCodeLine{974     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(VirtualFree(base, 0, MEM\_RELEASE));}
\DoxyCodeLine{975     aligned\_base = \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(}
\DoxyCodeLine{976         \mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(base), alignment));}
\DoxyCodeLine{977     base = \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(}
\DoxyCodeLine{978         \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}{VirtualAllocWrapper}}(aligned\_base, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect));}
\DoxyCodeLine{979     \textcolor{comment}{// We might not get the reduced allocation due to a race. In that case,}}
\DoxyCodeLine{980     \textcolor{comment}{// base will be nullptr.}}
\DoxyCodeLine{981     \textcolor{keywordflow}{if} (base != \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{break};}
\DoxyCodeLine{982   \}}
\DoxyCodeLine{983   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(base, base == aligned\_base);}
\DoxyCodeLine{984   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(base);}
\DoxyCodeLine{985 \}}

\end{DoxyCode}


References CHECK, DCHECK\+\_\+\+IMPLIES, flags(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, Round\+Up(), size(), Virtual\+Alloc\+With\+Hint(), and Virtual\+Alloc\+Wrapper().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_afe193e4925bba6817ac9ed8e7910baa8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_abafde84aab8e9fdabb1031aa2363b8be}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_abafde84aab8e9fdabb1031aa2363b8be}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!CheckIsOOMError@{CheckIsOOMError}}
\index{CheckIsOOMError@{CheckIsOOMError}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CheckIsOOMError()}{CheckIsOOMError()}}
{\footnotesize\ttfamily void v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Check\+Is\+OOMError (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{error }\end{DoxyParamCaption})}



Definition at line 987 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{987                                 \{}
\DoxyCodeLine{988   \textcolor{comment}{// We expect one of ERROR\_NOT\_ENOUGH\_MEMORY or ERROR\_COMMITMENT\_LIMIT. We'd}}
\DoxyCodeLine{989   \textcolor{comment}{// still like to get the actual error code when it's not one of the expected}}
\DoxyCodeLine{990   \textcolor{comment}{// errors, so use the construct below to achieve that.}}
\DoxyCodeLine{991   \textcolor{keywordflow}{if} (error != ERROR\_NOT\_ENOUGH\_MEMORY) \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(ERROR\_COMMITMENT\_LIMIT, error);}
\DoxyCodeLine{992 \}}

\end{DoxyCode}


References CHECK\+\_\+\+EQ.

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a31cfc9a9fce923a718f658d3dfb35dd7}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a31cfc9a9fce923a718f658d3dfb35dd7}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!GetFileViewAccessFromMemoryPermission@{GetFileViewAccessFromMemoryPermission}}
\index{GetFileViewAccessFromMemoryPermission@{GetFileViewAccessFromMemoryPermission}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetFileViewAccessFromMemoryPermission()}{GetFileViewAccessFromMemoryPermission()}}
{\footnotesize\ttfamily \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Get\+File\+View\+Access\+From\+Memory\+Permission (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 909 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{909                                                                        \{}
\DoxyCodeLine{910   \textcolor{keywordflow}{switch} (access) \{}
\DoxyCodeLine{911     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccess:}
\DoxyCodeLine{912     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccessWillJitLater:}
\DoxyCodeLine{913     \textcolor{keywordflow}{case} OS::MemoryPermission::kRead:}
\DoxyCodeLine{914       \textcolor{keywordflow}{return} FILE\_MAP\_READ;}
\DoxyCodeLine{915     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadWrite:}
\DoxyCodeLine{916       \textcolor{keywordflow}{return} FILE\_MAP\_READ | FILE\_MAP\_WRITE;}
\DoxyCodeLine{917     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{918       \textcolor{comment}{// Execute access is not supported}}
\DoxyCodeLine{919       \textcolor{keywordflow}{break};}
\DoxyCodeLine{920   \}}
\DoxyCodeLine{921   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{922 \}}

\end{DoxyCode}


References v8\+::base\+::\+OS\+::k\+No\+Access, v8\+::base\+::\+OS\+::k\+No\+Access\+Will\+Jit\+Later, v8\+::base\+::\+OS\+::k\+Read, v8\+::base\+::\+OS\+::k\+Read\+Write, and UNREACHABLE.

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a963050fb98dc70c57f03655c613d953c}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a963050fb98dc70c57f03655c613d953c}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!GetProtectionFromMemoryPermission@{GetProtectionFromMemoryPermission}}
\index{GetProtectionFromMemoryPermission@{GetProtectionFromMemoryPermission}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetProtectionFromMemoryPermission()}{GetProtectionFromMemoryPermission()}}
{\footnotesize\ttfamily \mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}} v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Get\+Protection\+From\+Memory\+Permission (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 887 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{887                                                                    \{}
\DoxyCodeLine{888   \textcolor{keywordflow}{switch} (access) \{}
\DoxyCodeLine{889     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccess:}
\DoxyCodeLine{890     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccessWillJitLater:}
\DoxyCodeLine{891       \textcolor{keywordflow}{return} PAGE\_NOACCESS;}
\DoxyCodeLine{892     \textcolor{keywordflow}{case} OS::MemoryPermission::kRead:}
\DoxyCodeLine{893       \textcolor{keywordflow}{return} PAGE\_READONLY;}
\DoxyCodeLine{894     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadWrite:}
\DoxyCodeLine{895       \textcolor{keywordflow}{return} PAGE\_READWRITE;}
\DoxyCodeLine{896     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadWriteExecute:}
\DoxyCodeLine{897       \textcolor{keywordflow}{if} (IsWindows10OrGreater())}
\DoxyCodeLine{898         \textcolor{keywordflow}{return} PAGE\_EXECUTE\_READWRITE | PAGE\_TARGETS\_INVALID;}
\DoxyCodeLine{899       \textcolor{keywordflow}{return} PAGE\_EXECUTE\_READWRITE;}
\DoxyCodeLine{900     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadExecute:}
\DoxyCodeLine{901       \textcolor{keywordflow}{if} (IsWindows10OrGreater())}
\DoxyCodeLine{902         \textcolor{keywordflow}{return} PAGE\_EXECUTE\_READ | PAGE\_TARGETS\_INVALID;}
\DoxyCodeLine{903       \textcolor{keywordflow}{return} PAGE\_EXECUTE\_READ;}
\DoxyCodeLine{904   \}}
\DoxyCodeLine{905   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{906 \}}

\end{DoxyCode}


References v8\+::base\+::\+OS\+::k\+No\+Access, v8\+::base\+::\+OS\+::k\+No\+Access\+Will\+Jit\+Later, v8\+::base\+::\+OS\+::k\+Read, v8\+::base\+::\+OS\+::k\+Read\+Execute, v8\+::base\+::\+OS\+::k\+Read\+Write, v8\+::base\+::\+OS\+::k\+Read\+Write\+Execute, and UNREACHABLE.

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a812fe31269e1a0364487d7d476158396}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a812fe31269e1a0364487d7d476158396}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!UserShadowStackEnabled@{UserShadowStackEnabled}}
\index{UserShadowStackEnabled@{UserShadowStackEnabled}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{UserShadowStackEnabled()}{UserShadowStackEnabled()}}
{\footnotesize\ttfamily bool v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::User\+Shadow\+Stack\+Enabled (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 755 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{755                               \{}
\DoxyCodeLine{756   \textcolor{keyword}{auto} is\_user\_cet\_available\_in\_environment =}
\DoxyCodeLine{757       \textcolor{keyword}{reinterpret\_cast<}decltype(\&IsUserCetAvailableInEnvironment)\textcolor{keyword}{>}(}
\DoxyCodeLine{758           ::GetProcAddress(::GetModuleHandleW(\mbox{\hyperlink{namespacev8_1_1internal_a68432e0286fadb63d524e475affa65fb}{L}}\textcolor{stringliteral}{"{}kernel32.dll"{}}),}
\DoxyCodeLine{759                            \textcolor{stringliteral}{"{}IsUserCetAvailableInEnvironment"{}}));}
\DoxyCodeLine{760   \textcolor{keyword}{auto} get\_process\_mitigation\_policy =}
\DoxyCodeLine{761       \textcolor{keyword}{reinterpret\_cast<}decltype(\&GetProcessMitigationPolicy)\textcolor{keyword}{>}(::GetProcAddress(}
\DoxyCodeLine{762           ::GetModuleHandle(\mbox{\hyperlink{namespacev8_1_1internal_a68432e0286fadb63d524e475affa65fb}{L}}\textcolor{stringliteral}{"{}Kernel32.dll"{}}), \textcolor{stringliteral}{"{}GetProcessMitigationPolicy"{}}));}
\DoxyCodeLine{763 }
\DoxyCodeLine{764   \textcolor{keywordflow}{if} (!is\_user\_cet\_available\_in\_environment || !get\_process\_mitigation\_policy) \{}
\DoxyCodeLine{765     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{766   \}}
\DoxyCodeLine{767 }
\DoxyCodeLine{768   \textcolor{keywordflow}{if} (!is\_user\_cet\_available\_in\_environment(}
\DoxyCodeLine{769           USER\_CET\_ENVIRONMENT\_WIN32\_PROCESS)) \{}
\DoxyCodeLine{770     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{771   \}}
\DoxyCodeLine{772 }
\DoxyCodeLine{773   PROCESS\_MITIGATION\_USER\_SHADOW\_STACK\_POLICY uss\_policy;}
\DoxyCodeLine{774   \textcolor{keywordflow}{if} (!get\_process\_mitigation\_policy(GetCurrentProcess(),}
\DoxyCodeLine{775                                      ProcessUserShadowStackPolicy, \&uss\_policy,}
\DoxyCodeLine{776                                      \textcolor{keyword}{sizeof}(uss\_policy))) \{}
\DoxyCodeLine{777     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{778   \}}
\DoxyCodeLine{779 }
\DoxyCodeLine{780   \textcolor{keywordflow}{return} uss\_policy.EnableUserShadowStack;}
\DoxyCodeLine{781 \}}

\end{DoxyCode}


References v8\+::internal\+::L.

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!VirtualAllocWithHint@{VirtualAllocWithHint}}
\index{VirtualAllocWithHint@{VirtualAllocWithHint}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{VirtualAllocWithHint()}{VirtualAllocWithHint()}}
{\footnotesize\ttfamily uint8\+\_\+t$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Virtual\+Alloc\+With\+Hint (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{flags,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{protect,  }\item[{void $\ast$}]{hint }\end{DoxyParamCaption})}



Definition at line 934 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{935                                           \{}
\DoxyCodeLine{936   \mbox{\hyperlink{win32-headers_8h_ab064840df4ab5a8cf90ddb963f94de34}{LPVOID}} base = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}{VirtualAllocWrapper}}(hint, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect);}
\DoxyCodeLine{937 }
\DoxyCodeLine{938   \textcolor{comment}{// On failure, let the OS find an address to use.}}
\DoxyCodeLine{939   \textcolor{keywordflow}{if} (hint \&\& base == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{940     base = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}{VirtualAllocWrapper}}(\textcolor{keyword}{nullptr}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect);}
\DoxyCodeLine{941   \}}
\DoxyCodeLine{942 }
\DoxyCodeLine{943   \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(base);}
\DoxyCodeLine{944 \}}

\end{DoxyCode}


References flags(), size(), and Virtual\+Alloc\+Wrapper().



Referenced by Allocate\+Internal().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_a6ca4b7f7b0918008be1156c25d2f7b3d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}!VirtualAllocWrapper@{VirtualAllocWrapper}}
\index{VirtualAllocWrapper@{VirtualAllocWrapper}!v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/win32.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{VirtualAllocWrapper()}{VirtualAllocWrapper()}}
{\footnotesize\ttfamily void$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/win32.\+cc\}\+::Virtual\+Alloc\+Wrapper (\begin{DoxyParamCaption}\item[{void $\ast$}]{address,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{flags,  }\item[{\mbox{\hyperlink{win32-headers_8h_ad342ac907eb044443153a22f964bf0af}{DWORD}}}]{protect }\end{DoxyParamCaption})}



Definition at line 924 of file platform-\/win32.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{925                                          \{}
\DoxyCodeLine{926   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_a5d9767851cd6623e1037e8cc2e344bf0}{VirtualAlloc2}}) \{}
\DoxyCodeLine{927     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_a5d9767851cd6623e1037e8cc2e344bf0}{VirtualAlloc2}}(GetCurrentProcess(), address, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect,}
\DoxyCodeLine{928                          NULL, 0);}
\DoxyCodeLine{929   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{930     \textcolor{keywordflow}{return} VirtualAlloc(address, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{flag-definitions_8h_af0832cf93cb1767d6e6e287bb7dcdf72}{flags}}, protect);}
\DoxyCodeLine{931   \}}
\DoxyCodeLine{932 \}}

\end{DoxyCode}


References flags(), size(), and v8\+::base\+::\+Virtual\+Alloc2.



Referenced by Allocate\+Internal(), and Virtual\+Alloc\+With\+Hint().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=332pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-win32_8cc_03_ac82b38aaafd4329330806e93719ae0a7_icgraph}
\end{center}
\end{figure}
