\hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask}{}\doxysection{v8\+::Script\+Compiler\+::Consume\+Code\+Cache\+Task Class Reference}
\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask}\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}


A task which the embedder must run on a background thread to consume a \mbox{\hyperlink{classv8_1_1V8}{V8}} code cache.  




{\ttfamily \#include $<$v8-\/script.\+h$>$}



Collaboration diagram for v8\+::Script\+Compiler\+::Consume\+Code\+Cache\+Task\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a2b2c684536841dc73b742c1b3a96ddc2}{$\sim$\+Consume\+Code\+Cache\+Task}} ()
\item 
void \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}{Run}} ()
\item 
void \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ae8c3990f9ec3d54b93668727ad11a358}{Source\+Text\+Available}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$ source\+\_\+text, const \mbox{\hyperlink{classv8_1_1ScriptOrigin}{Script\+Origin}} \&origin)
\begin{DoxyCompactList}\small\item\em Provides the source text string and origin information to the consumption task. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ad65aecfd04621d47c7be95266abbc12d}{Should\+Merge\+With\+Existing\+Script}} () const
\begin{DoxyCompactList}\small\item\em Returns whether the embedder should call Merge\+With\+Existing\+Script. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_abc08b491158acc715d3f3d0fd9c42f9a}{Merge\+With\+Existing\+Script}} ()
\begin{DoxyCompactList}\small\item\em Merges newly deserialized data into an existing script which was found during Source\+Text\+Available. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ac73e3b9ef16575bd6bab5b690fb87305}{Consume\+Code\+Cache\+Task}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackgroundDeserializeTask}{internal\+::\+Background\+Deserialize\+Task}} $>$ impl)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackgroundDeserializeTask}{internal\+::\+Background\+Deserialize\+Task}} $>$ \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\+\_\+}}
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a1cb50af99960b4c11eaee7347e034f51}{Script\+Compiler}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A task which the embedder must run on a background thread to consume a \mbox{\hyperlink{classv8_1_1V8}{V8}} code cache. 

Returned by \mbox{\hyperlink{classv8_1_1ScriptCompiler_a750ab28d85b00e80c49977e07ac3b20c}{Script\+Compiler\+::\+Start\+Consuming\+Code\+Cache}}. 

Definition at line 628 of file v8-\/script.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a2b2c684536841dc73b742c1b3a96ddc2}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a2b2c684536841dc73b742c1b3a96ddc2}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!````~ConsumeCodeCacheTask@{$\sim$ConsumeCodeCacheTask}}
\index{````~ConsumeCodeCacheTask@{$\sim$ConsumeCodeCacheTask}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{$\sim$ConsumeCodeCacheTask()}{~ConsumeCodeCacheTask()}}
{\footnotesize\ttfamily v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::$\sim$\+Consume\+Code\+Cache\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ac73e3b9ef16575bd6bab5b690fb87305}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ac73e3b9ef16575bd6bab5b690fb87305}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!ConsumeCodeCacheTask@{ConsumeCodeCacheTask}}
\index{ConsumeCodeCacheTask@{ConsumeCodeCacheTask}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{ConsumeCodeCacheTask()}{ConsumeCodeCacheTask()}}
{\footnotesize\ttfamily v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::\+Consume\+Code\+Cache\+Task (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1BackgroundDeserializeTask}{internal\+::\+Background\+Deserialize\+Task}} $>$}]{impl }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}, {\ttfamily [private]}}



Definition at line 2591 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2593     : \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\_}}(std::move(\mbox{\hyperlink{namespacewasm_aca75bd987d7d40b886a5efad94f4053c}{impl}})) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_abc08b491158acc715d3f3d0fd9c42f9a}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_abc08b491158acc715d3f3d0fd9c42f9a}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!MergeWithExistingScript@{MergeWithExistingScript}}
\index{MergeWithExistingScript@{MergeWithExistingScript}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{MergeWithExistingScript()}{MergeWithExistingScript()}}
{\footnotesize\ttfamily void v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::\+Merge\+With\+Existing\+Script (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Merges newly deserialized data into an existing script which was found during Source\+Text\+Available. 

May be called only after \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}{Run()}} has completed. Can execute on any thread, like \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}{Run()}}. 

Definition at line 2622 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2622                                                                  \{}
\DoxyCodeLine{2623   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(}
\DoxyCodeLine{2624       \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}.merge\_background\_deserialized\_script\_with\_compilation\_cache);}
\DoxyCodeLine{2625   \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\_}}-\/>MergeWithExistingScript();}
\DoxyCodeLine{2626 \}}

\end{DoxyCode}


References DCHECK, and v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!Run@{Run}}
\index{Run@{Run}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{Run()}{Run()}}
{\footnotesize\ttfamily void v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::\+Run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 2597 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2597 \{ \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\_}}-\/>Run(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ad65aecfd04621d47c7be95266abbc12d}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ad65aecfd04621d47c7be95266abbc12d}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!ShouldMergeWithExistingScript@{ShouldMergeWithExistingScript}}
\index{ShouldMergeWithExistingScript@{ShouldMergeWithExistingScript}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{ShouldMergeWithExistingScript()}{ShouldMergeWithExistingScript()}}
{\footnotesize\ttfamily bool v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::\+Should\+Merge\+With\+Existing\+Script (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Returns whether the embedder should call Merge\+With\+Existing\+Script. 

This function may be called from any thread, any number of times, but its return value is only meaningful after Source\+Text\+Available has completed. 

Definition at line 2613 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2614           \{}
\DoxyCodeLine{2615   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{i::v8\_flags}}}
\DoxyCodeLine{2616            .merge\_background\_deserialized\_script\_with\_compilation\_cache) \{}
\DoxyCodeLine{2617     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{2618   \}}
\DoxyCodeLine{2619   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\_}}-\/>ShouldMergeWithExistingScript();}
\DoxyCodeLine{2620 \}}

\end{DoxyCode}


References v8\+::internal\+::v8\+\_\+flags.

\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ae8c3990f9ec3d54b93668727ad11a358}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ae8c3990f9ec3d54b93668727ad11a358}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!SourceTextAvailable@{SourceTextAvailable}}
\index{SourceTextAvailable@{SourceTextAvailable}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{SourceTextAvailable()}{SourceTextAvailable()}}
{\footnotesize\ttfamily void v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::\+Source\+Text\+Available (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1String}{String}} $>$}]{source\+\_\+text,  }\item[{const \mbox{\hyperlink{classv8_1_1ScriptOrigin}{Script\+Origin}} \&}]{origin }\end{DoxyParamCaption})}



Provides the source text string and origin information to the consumption task. 

May be called before, during, or after \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_aa17ba1423963262f0a6f70715533138b}{Run()}}. This step checks whether the script matches an existing script in the \mbox{\hyperlink{classv8_1_1Isolate}{Isolate}}\textquotesingle{}s compilation cache. To check whether such a script was found, call Should\+Merge\+With\+Existing\+Script.

The \mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} provided must be the same one used during Start\+Consuming\+Code\+Cache and must be currently entered on the thread that calls this function. The source text and origin provided in this step must precisely match those used later in the \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1Source}{Script\+Compiler\+::\+Source}} that will contain this \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask}{Consume\+Code\+Cache\+Task}}. 

Definition at line 2599 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2601                                 \{}
\DoxyCodeLine{2602   \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{i::Isolate}}* i\_isolate = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{i::Isolate}}*\textcolor{keyword}{>}(v8\_isolate);}
\DoxyCodeLine{2603   i::DisallowJavascriptExecutionDebugOnly no\_execution(i\_isolate);}
\DoxyCodeLine{2604   i::DisallowExceptionsDebugOnly no\_exceptions(i\_isolate);}
\DoxyCodeLine{2605   \textcolor{keyword}{auto} str = \mbox{\hyperlink{classv8_1_1Utils_aea3e5682d909c5f546b8d0342e3cc1a4}{Utils::OpenHandle}}(*source\_text);}
\DoxyCodeLine{2606   \mbox{\hyperlink{structv8_1_1internal_1_1ScriptDetails}{i::ScriptDetails}} script\_details =}
\DoxyCodeLine{2607       \mbox{\hyperlink{namespacev8_1_1anonymous__namespace_02api_8cc_03_ab7bbb0e3c5dccb74f33799d52a35ce1d}{GetScriptDetails}}(i\_isolate, origin.ResourceName(), origin.LineOffset(),}
\DoxyCodeLine{2608                        origin.ColumnOffset(), origin.SourceMapUrl(),}
\DoxyCodeLine{2609                        origin.GetHostDefinedOptions(), origin.Options());}
\DoxyCodeLine{2610   \mbox{\hyperlink{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}{impl\_}}-\/>SourceTextAvailable(i\_isolate, str, script\_details);}
\DoxyCodeLine{2611 \}}

\end{DoxyCode}


References v8\+::\+Script\+Origin\+::\+Column\+Offset(), v8\+::\+Script\+Origin\+::\+Get\+Host\+Defined\+Options(), v8\+::anonymous\+\_\+namespace\{api.\+cc\}\+::\+Get\+Script\+Details(), v8\+::\+Script\+Origin\+::\+Line\+Offset(), v8\+::\+Utils\+::\+Open\+Handle(), v8\+::\+Script\+Origin\+::\+Options(), v8\+::\+Script\+Origin\+::\+Resource\+Name(), and v8\+::\+Script\+Origin\+::\+Source\+Map\+Url().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_ae8c3990f9ec3d54b93668727ad11a358_cgraph}
\end{center}
\end{figure}


\doxysubsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a1cb50af99960b4c11eaee7347e034f51}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a1cb50af99960b4c11eaee7347e034f51}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!ScriptCompiler@{ScriptCompiler}}
\index{ScriptCompiler@{ScriptCompiler}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{ScriptCompiler}{ScriptCompiler}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classv8_1_1ScriptCompiler}{Script\+Compiler}}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 665 of file v8-\/script.\+h.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}\label{classv8_1_1ScriptCompiler_1_1ConsumeCodeCacheTask_a3b8062ec9e815a852013db3533326810}} 
\index{v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}!impl\_@{impl\_}}
\index{impl\_@{impl\_}!v8::ScriptCompiler::ConsumeCodeCacheTask@{v8::ScriptCompiler::ConsumeCodeCacheTask}}
\doxysubsubsection{\texorpdfstring{impl\_}{impl\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1BackgroundDeserializeTask}{internal\+::\+Background\+Deserialize\+Task}}$>$ v8\+::\+Script\+Compiler\+::\+Consume\+Code\+Cache\+Task\+::impl\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 670 of file v8-\/script.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/include/\mbox{\hyperlink{v8-script_8h}{v8-\/script.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/api/\mbox{\hyperlink{api_8cc}{api.\+cc}}\end{DoxyCompactItemize}
