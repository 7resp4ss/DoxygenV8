\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}{Is\+Line\+Terminator}} (\mbox{\hyperlink{classint}{int}} c)
\item 
{\footnotesize template$<$typename Char $>$ }\\uint32\+\_\+t \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a9a9983769b82e8e314eb13e98e2df166}{Count\+Additional\+Escape\+Chars}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source, \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $\ast$needs\+\_\+escapes\+\_\+out)
\item 
{\footnotesize template$<$typename Char $>$ }\\void \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}{Write\+String\+To\+Char\+Vector}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ Char $>$ v, uint32\+\_\+t $\ast$d, const char $\ast$\mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{string}})
\item 
{\footnotesize template$<$typename Char , typename String\+Type $>$ }\\\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ String\+Type $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_ae2f395df31512b05e453b0e4dca6ce51}{Write\+Escaped\+Reg\+Exp\+Source}} (\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ String\+Type $>$ result)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aaa865f4228dabd3f86b2fd77aa0f60d7}{Escape\+Reg\+Exp\+Source}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ source)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a9a9983769b82e8e314eb13e98e2df166}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a9a9983769b82e8e314eb13e98e2df166}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}!CountAdditionalEscapeChars@{CountAdditionalEscapeChars}}
\index{CountAdditionalEscapeChars@{CountAdditionalEscapeChars}!v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CountAdditionalEscapeChars()}{CountAdditionalEscapeChars()}}
{\footnotesize\ttfamily template$<$typename Char $>$ \\
uint32\+\_\+t v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.\+cc\}\+::Count\+Additional\+Escape\+Chars (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $\ast$}]{needs\+\_\+escapes\+\_\+out }\end{DoxyParamCaption})}



Definition at line 192 of file js-\/regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{193                                                              \{}
\DoxyCodeLine{194   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{195   uint32\_t escapes = 0;}
\DoxyCodeLine{196   \textcolor{comment}{// The maximum growth-\/factor is 5 (for \(\backslash\)u2028 and \(\backslash\)u2029). Make sure that we}}
\DoxyCodeLine{197   \textcolor{comment}{// won't overflow |escapes| given the current constraints on string length.}}
\DoxyCodeLine{198   static\_assert(uint64\_t\{String::kMaxLength\} * 5 <}
\DoxyCodeLine{199                 std::numeric\_limits<decltype(escapes)>::max());}
\DoxyCodeLine{200   \textcolor{keywordtype}{bool} needs\_escapes = \textcolor{keyword}{false};}
\DoxyCodeLine{201   \textcolor{keywordtype}{bool} in\_character\_class = \textcolor{keyword}{false};}
\DoxyCodeLine{202   base::Vector<const Char> src = source-\/>GetCharVector<Char>(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}});}
\DoxyCodeLine{203   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < src.length(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{204     \textcolor{keyword}{const} Char c = src[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}];}
\DoxyCodeLine{205     \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}) \{}
\DoxyCodeLine{206       \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal}{i}} + 1 < src.length() \&\& \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}{IsLineTerminator}}(src[\mbox{\hyperlink{namespacev8_1_1internal}{i}} + 1])) \{}
\DoxyCodeLine{207         \textcolor{comment}{// This '\(\backslash\)' is ignored since the next character itself will be escaped.}}
\DoxyCodeLine{208         escapes-\/-\/;}
\DoxyCodeLine{209       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{210         \textcolor{comment}{// Escape. Skip next character, which will be copied verbatim;}}
\DoxyCodeLine{211         \mbox{\hyperlink{namespacev8_1_1internal}{i}}++;}
\DoxyCodeLine{212       \}}
\DoxyCodeLine{213     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'/'} \&\& !in\_character\_class) \{}
\DoxyCodeLine{214       \textcolor{comment}{// Not escaped forward-\/slash needs escape.}}
\DoxyCodeLine{215       needs\_escapes = \textcolor{keyword}{true};}
\DoxyCodeLine{216       escapes++;}
\DoxyCodeLine{217     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'['}) \{}
\DoxyCodeLine{218       in\_character\_class = \textcolor{keyword}{true};}
\DoxyCodeLine{219     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{']'}) \{}
\DoxyCodeLine{220       in\_character\_class = \textcolor{keyword}{false};}
\DoxyCodeLine{221     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{222       needs\_escapes = \textcolor{keyword}{true};}
\DoxyCodeLine{223       escapes++;}
\DoxyCodeLine{224     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{225       needs\_escapes = \textcolor{keyword}{true};}
\DoxyCodeLine{226       escapes++;}
\DoxyCodeLine{227     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c) == 0x2028) \{}
\DoxyCodeLine{228       needs\_escapes = \textcolor{keyword}{true};}
\DoxyCodeLine{229       escapes += std::strlen(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)u2028"{}}) -\/ 1;}
\DoxyCodeLine{230     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c) == 0x2029) \{}
\DoxyCodeLine{231       needs\_escapes = \textcolor{keyword}{true};}
\DoxyCodeLine{232       escapes += std::strlen(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)u2029"{}}) -\/ 1;}
\DoxyCodeLine{233     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{234       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}{IsLineTerminator}}(c));}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236   \}}
\DoxyCodeLine{237   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!in\_character\_class);}
\DoxyCodeLine{238   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(escapes != 0, needs\_escapes);}
\DoxyCodeLine{239   *needs\_escapes\_out = needs\_escapes;}
\DoxyCodeLine{240   \textcolor{keywordflow}{return} escapes;}
\DoxyCodeLine{241 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, Is\+Line\+Terminator(), v8\+::internal\+::\+String\+::k\+Max\+Length, v8\+::base\+::\+Vector$<$ T $>$\+::length(), and v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a9a9983769b82e8e314eb13e98e2df166_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aaa865f4228dabd3f86b2fd77aa0f60d7}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aaa865f4228dabd3f86b2fd77aa0f60d7}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}!EscapeRegExpSource@{EscapeRegExpSource}}
\index{EscapeRegExpSource@{EscapeRegExpSource}!v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{EscapeRegExpSource()}{EscapeRegExpSource()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1MaybeDirectHandle}{Maybe\+Direct\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1String}{String}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.\+cc\}\+::Escape\+Reg\+Exp\+Source (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source }\end{DoxyParamCaption})}



Definition at line 304 of file js-\/regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{305                                                                           \{}
\DoxyCodeLine{306   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(source-\/>IsFlat());}
\DoxyCodeLine{307   \textcolor{keywordflow}{if} (source-\/>length() == 0) \textcolor{keywordflow}{return} isolate-\/>factory()-\/>query\_colon\_string();}
\DoxyCodeLine{308   \textcolor{keywordtype}{bool} one\_byte = String::IsOneByteRepresentationUnderneath(*source);}
\DoxyCodeLine{309   \textcolor{keywordtype}{bool} needs\_escapes = \textcolor{keyword}{false};}
\DoxyCodeLine{310   uint32\_t additional\_escape\_chars =}
\DoxyCodeLine{311       one\_byte ? CountAdditionalEscapeChars<uint8\_t>(source, \&needs\_escapes)}
\DoxyCodeLine{312                : \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a9a9983769b82e8e314eb13e98e2df166}{CountAdditionalEscapeChars}}<base::\mbox{\hyperlink{namespacev8_1_1base_a1961a4852ced3c23f4d43de6f91d18d6}{uc16}}>(source, \&needs\_escapes);}
\DoxyCodeLine{313   \textcolor{keywordflow}{if} (!needs\_escapes) \textcolor{keywordflow}{return} source;}
\DoxyCodeLine{314   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(source-\/>length()) + additional\_escape\_chars,}
\DoxyCodeLine{315             std::numeric\_limits<uint32\_t>::max());}
\DoxyCodeLine{316   uint32\_t \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = source-\/>length() + additional\_escape\_chars;}
\DoxyCodeLine{317   \textcolor{keywordflow}{if} (one\_byte) \{}
\DoxyCodeLine{318     DirectHandle<SeqOneByteString> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{319     \mbox{\hyperlink{execution_2isolate_8h_a45bb81ab232e9f2663545ec92dc0b950}{ASSIGN\_RETURN\_ON\_EXCEPTION}}(isolate, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}},}
\DoxyCodeLine{320                                isolate-\/>factory()-\/>NewRawOneByteString(\mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}));}
\DoxyCodeLine{321     \textcolor{keywordflow}{return} WriteEscapedRegExpSource<uint8\_t>(source, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{322   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{323     DirectHandle<SeqTwoByteString> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{324     \mbox{\hyperlink{execution_2isolate_8h_a45bb81ab232e9f2663545ec92dc0b950}{ASSIGN\_RETURN\_ON\_EXCEPTION}}(isolate, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}},}
\DoxyCodeLine{325                                isolate-\/>factory()-\/>NewRawTwoByteString(\mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}}));}
\DoxyCodeLine{326     \textcolor{keywordflow}{return} WriteEscapedRegExpSource<base::uc16>(source, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{327   \}}
\DoxyCodeLine{328 \}}

\end{DoxyCode}


References ASSIGN\+\_\+\+RETURN\+\_\+\+ON\+\_\+\+EXCEPTION, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+LE, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+String\+::\+Is\+One\+Byte\+Representation\+Underneath(), v8\+::internal\+::length, v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Raw\+One\+Byte\+String(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Raw\+Two\+Byte\+String(), and v8\+::base\+::internal\+::result.



Referenced by v8\+::internal\+::\+JSReg\+Exp\+::\+Initialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aaa865f4228dabd3f86b2fd77aa0f60d7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aaa865f4228dabd3f86b2fd77aa0f60d7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}!IsLineTerminator@{IsLineTerminator}}
\index{IsLineTerminator@{IsLineTerminator}!v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{IsLineTerminator()}{IsLineTerminator()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.\+cc\}\+::Is\+Line\+Terminator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{c }\end{DoxyParamCaption})}



Definition at line 183 of file js-\/regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{183                              \{}
\DoxyCodeLine{184   \textcolor{comment}{// Expected to return true for '\(\backslash\)n', '\(\backslash\)r', 0x2028, and 0x2029.}}
\DoxyCodeLine{185   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceunibrow_ae20813007c544d08fd4f351398573590}{unibrow::IsLineTerminator}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespaceunibrow_a6bab388810573ec4fa4b97d9e4b2eee7}{unibrow::uchar}}\textcolor{keyword}{>}(c));}
\DoxyCodeLine{186 \}}

\end{DoxyCode}


References unibrow\+::\+Is\+Line\+Terminator().



Referenced by Count\+Additional\+Escape\+Chars(), and Write\+Escaped\+Reg\+Exp\+Source().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_ae2f395df31512b05e453b0e4dca6ce51}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_ae2f395df31512b05e453b0e4dca6ce51}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}!WriteEscapedRegExpSource@{WriteEscapedRegExpSource}}
\index{WriteEscapedRegExpSource@{WriteEscapedRegExpSource}!v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{WriteEscapedRegExpSource()}{WriteEscapedRegExpSource()}}
{\footnotesize\ttfamily template$<$typename Char , typename String\+Type $>$ \\
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$String\+Type$>$ v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.\+cc\}\+::Write\+Escaped\+Reg\+Exp\+Source (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{source,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ String\+Type $>$}]{result }\end{DoxyParamCaption})}



Definition at line 251 of file js-\/regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{252                                                                   \{}
\DoxyCodeLine{253   \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{254   base::Vector<const Char> src = source-\/>GetCharVector<Char>(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}});}
\DoxyCodeLine{255   base::Vector<Char> dst(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>GetChars(\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}}), \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>length());}
\DoxyCodeLine{256   uint32\_t s = 0;}
\DoxyCodeLine{257   uint32\_t d = 0;}
\DoxyCodeLine{258   \textcolor{keywordtype}{bool} in\_character\_class = \textcolor{keyword}{false};}
\DoxyCodeLine{259   \textcolor{keywordflow}{while} (s < src.size()) \{}
\DoxyCodeLine{260     \textcolor{keyword}{const} Char c = src[s];}
\DoxyCodeLine{261     \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}) \{}
\DoxyCodeLine{262       \textcolor{keywordflow}{if} (s + 1 < src.size() \&\& \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}{IsLineTerminator}}(src[s + 1])) \{}
\DoxyCodeLine{263         \textcolor{comment}{// This '\(\backslash\)' is ignored since the next character itself will be escaped.}}
\DoxyCodeLine{264         s++;}
\DoxyCodeLine{265         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{266       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{267         \textcolor{comment}{// Escape. Copy this and next character.}}
\DoxyCodeLine{268         dst[d++] = src[s++];}
\DoxyCodeLine{269       \}}
\DoxyCodeLine{270       \textcolor{keywordflow}{if} (s == src.size()) \textcolor{keywordflow}{break};}
\DoxyCodeLine{271     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'/'} \&\& !in\_character\_class) \{}
\DoxyCodeLine{272       \textcolor{comment}{// Not escaped forward-\/slash needs escape.}}
\DoxyCodeLine{273       dst[d++] = \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'};}
\DoxyCodeLine{274     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'['}) \{}
\DoxyCodeLine{275       in\_character\_class = \textcolor{keyword}{true};}
\DoxyCodeLine{276     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{']'}) \{}
\DoxyCodeLine{277       in\_character\_class = \textcolor{keyword}{false};}
\DoxyCodeLine{278     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{279       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}{WriteStringToCharVector}}(dst, \&d, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)n"{}});}
\DoxyCodeLine{280       s++;}
\DoxyCodeLine{281       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{282     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{283       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}{WriteStringToCharVector}}(dst, \&d, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)r"{}});}
\DoxyCodeLine{284       s++;}
\DoxyCodeLine{285       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{286     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c) == 0x2028) \{}
\DoxyCodeLine{287       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}{WriteStringToCharVector}}(dst, \&d, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)u2028"{}});}
\DoxyCodeLine{288       s++;}
\DoxyCodeLine{289       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{290     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(c) == 0x2029) \{}
\DoxyCodeLine{291       \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}{WriteStringToCharVector}}(dst, \&d, \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)u2029"{}});}
\DoxyCodeLine{292       s++;}
\DoxyCodeLine{293       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{294     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{295       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_a107fd3cf2ebc159a45f0be514e5a5af8}{IsLineTerminator}}(c));}
\DoxyCodeLine{296     \}}
\DoxyCodeLine{297     dst[d++] = src[s++];}
\DoxyCodeLine{298   \}}
\DoxyCodeLine{299   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>length(), d);}
\DoxyCodeLine{300   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!in\_character\_class);}
\DoxyCodeLine{301   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{302 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, Is\+Line\+Terminator(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::base\+::internal\+::result, v8\+::base\+::\+Vector$<$ T $>$\+::size(), and Write\+String\+To\+Char\+Vector().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_ae2f395df31512b05e453b0e4dca6ce51_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}\label{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2}} 
\index{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}!WriteStringToCharVector@{WriteStringToCharVector}}
\index{WriteStringToCharVector@{WriteStringToCharVector}!v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}js-\/regexp.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{WriteStringToCharVector()}{WriteStringToCharVector()}}
{\footnotesize\ttfamily template$<$typename Char $>$ \\
void v8\+::internal\+::anonymous\+\_\+namespace\{js-\/regexp.\+cc\}\+::Write\+String\+To\+Char\+Vector (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ Char $>$}]{v,  }\item[{uint32\+\_\+t $\ast$}]{d,  }\item[{const char $\ast$}]{string }\end{DoxyParamCaption})}



Definition at line 244 of file js-\/regexp.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{245                                                  \{}
\DoxyCodeLine{246   \textcolor{keywordtype}{int} s = 0;}
\DoxyCodeLine{247   \textcolor{keywordflow}{while} (\textcolor{keywordtype}{string}[s] != \textcolor{charliteral}{'\(\backslash\)0'}) v[(*d)++] = \textcolor{keywordtype}{string}[s++];}
\DoxyCodeLine{248 \}}

\end{DoxyCode}


Referenced by Write\+Escaped\+Reg\+Exp\+Source().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02js-regexp_8cc_03_aceb011f571069d0b165f59edfe0eecf2_icgraph}
\end{center}
\end{figure}
