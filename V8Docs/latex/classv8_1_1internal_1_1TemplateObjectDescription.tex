\hypertarget{classv8_1_1internal_1_1TemplateObjectDescription}{}\doxysection{v8\+::internal\+::Template\+Object\+Description Class Reference}
\label{classv8_1_1internal_1_1TemplateObjectDescription}\index{v8::internal::TemplateObjectDescription@{v8::internal::TemplateObjectDescription}}


{\ttfamily \#include $<$template-\/objects.\+h$>$}



Inheritance diagram for v8\+::internal\+::Template\+Object\+Description\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{classv8_1_1internal_1_1TemplateObjectDescription__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Template\+Object\+Description\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{classv8_1_1internal_1_1TemplateObjectDescription__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classv8_1_1internal_1_1TemplateObjectDescription_a58988db8b14865092900b2a3cfa242ac}{Body\+Descriptor}} = \mbox{\hyperlink{classv8_1_1internal_1_1StructBodyDescriptor}{Struct\+Body\+Descriptor}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArray}{JSArray}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1TemplateObjectDescription_a732cfac0b89521058855b1d4efc0715e}{Get\+Template\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1NativeContext}{Native\+Context}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\+\_\+context}}, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TemplateObjectDescription}{Template\+Object\+Description}} $>$ description, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$ shared\+\_\+info, \mbox{\hyperlink{classint}{int}} slot\+\_\+id)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 26 of file template-\/objects.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1TemplateObjectDescription_a58988db8b14865092900b2a3cfa242ac}\label{classv8_1_1internal_1_1TemplateObjectDescription_a58988db8b14865092900b2a3cfa242ac}} 
\index{v8::internal::TemplateObjectDescription@{v8::internal::TemplateObjectDescription}!BodyDescriptor@{BodyDescriptor}}
\index{BodyDescriptor@{BodyDescriptor}!v8::internal::TemplateObjectDescription@{v8::internal::TemplateObjectDescription}}
\doxysubsubsection{\texorpdfstring{BodyDescriptor}{BodyDescriptor}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classv8_1_1internal_1_1TemplateObjectDescription_a58988db8b14865092900b2a3cfa242ac}{v8\+::internal\+::\+Template\+Object\+Description\+::\+Body\+Descriptor}} =  \mbox{\hyperlink{classv8_1_1internal_1_1StructBodyDescriptor}{Struct\+Body\+Descriptor}}}



Definition at line 35 of file template-\/objects.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1TemplateObjectDescription_a732cfac0b89521058855b1d4efc0715e}\label{classv8_1_1internal_1_1TemplateObjectDescription_a732cfac0b89521058855b1d4efc0715e}} 
\index{v8::internal::TemplateObjectDescription@{v8::internal::TemplateObjectDescription}!GetTemplateObject@{GetTemplateObject}}
\index{GetTemplateObject@{GetTemplateObject}!v8::internal::TemplateObjectDescription@{v8::internal::TemplateObjectDescription}}
\doxysubsubsection{\texorpdfstring{GetTemplateObject()}{GetTemplateObject()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSArray}{JSArray}} $>$ v8\+::internal\+::\+Template\+Object\+Description\+::\+Get\+Template\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1NativeContext}{Native\+Context}} $>$}]{native\+\_\+context,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1TemplateObjectDescription}{Template\+Object\+Description}} $>$}]{description,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1SharedFunctionInfo}{Shared\+Function\+Info}} $>$}]{shared\+\_\+info,  }\item[{\mbox{\hyperlink{classint}{int}}}]{slot\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 48 of file template-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{51                                                                \{}
\DoxyCodeLine{52   \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_a84ff7a23e4923ab6a01d8d7d2d0f4179}{function\_literal\_id}} = shared\_info-\/>function\_literal\_id(\mbox{\hyperlink{namespacev8_a65227471e4ee0ccd275854a995f12a62}{kRelaxedLoad}});}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \textcolor{comment}{// Check the template weakmap to see if the template object already exists.}}
\DoxyCodeLine{55   DirectHandle<Script> \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}(Cast<Script>(shared\_info-\/>script(isolate)),}
\DoxyCodeLine{56                               isolate);}
\DoxyCodeLine{57   \mbox{\hyperlink{namespaceunibrow_ab0275d47f9778d486eafe88b18c5851d}{int32\_t}} hash =}
\DoxyCodeLine{58       \mbox{\hyperlink{namespacev8_1_1internal_a936d6b51abee1fbe72db0ea5c8fc369f}{EphemeronHashTable::TodoShape::Hash}}(ReadOnlyRoots(isolate), \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}});}
\DoxyCodeLine{59   MaybeDirectHandle<ArrayList> maybe\_cached\_templates;}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   \textcolor{keywordflow}{if} (!IsUndefined(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>template\_weakmap(), isolate)) \{}
\DoxyCodeLine{62     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{63     \textcolor{comment}{// The no\_gc keeps this safe, and gcmole is confused because}}
\DoxyCodeLine{64     \textcolor{comment}{// CachedTemplateMatches calls JSReceiver::GetDataProperty.}}
\DoxyCodeLine{65     \mbox{\hyperlink{namespacev8_1_1internal_aba0e823c839e006ab9ad80fdceb770b5}{DisableGCMole}} no\_gcmole;}
\DoxyCodeLine{66     ReadOnlyRoots roots(isolate);}
\DoxyCodeLine{67     Tagged<EphemeronHashTable> template\_weakmap =}
\DoxyCodeLine{68         Cast<EphemeronHashTable>(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>template\_weakmap());}
\DoxyCodeLine{69     \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} cached\_templates\_lookup =}
\DoxyCodeLine{70         template\_weakmap-\/>Lookup(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, hash);}
\DoxyCodeLine{71     \textcolor{keywordflow}{if} (!IsTheHole(cached\_templates\_lookup, roots)) \{}
\DoxyCodeLine{72       Tagged<ArrayList> cached\_templates =}
\DoxyCodeLine{73           Cast<ArrayList>(cached\_templates\_lookup);}
\DoxyCodeLine{74       maybe\_cached\_templates = \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(cached\_templates, isolate);}
\DoxyCodeLine{75 }
\DoxyCodeLine{76       \textcolor{comment}{// Linear search over the cached template array list for a template}}
\DoxyCodeLine{77       \textcolor{comment}{// object matching the given function\_literal\_id + slot\_id.}}
\DoxyCodeLine{78       \textcolor{comment}{// TODO(leszeks): Consider keeping this list sorted for faster lookup.}}
\DoxyCodeLine{79       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < cached\_templates-\/>length(); \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{80         Tagged<JSArray> template\_object =}
\DoxyCodeLine{81             Cast<JSArray>(cached\_templates-\/>get(\mbox{\hyperlink{namespacev8_1_1internal}{i}}));}
\DoxyCodeLine{82         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02template-objects_8cc_03_a14d2ed038ec1fedc412178e0bb46939c}{CachedTemplateMatches}}(isolate, *\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}, template\_object,}
\DoxyCodeLine{83                                   \mbox{\hyperlink{namespacev8_1_1internal_a84ff7a23e4923ab6a01d8d7d2d0f4179}{function\_literal\_id}}, slot\_id, \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}})) \{}
\DoxyCodeLine{84           \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(template\_object, isolate);}
\DoxyCodeLine{85         \}}
\DoxyCodeLine{86       \}}
\DoxyCodeLine{87     \}}
\DoxyCodeLine{88   \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{comment}{// Create the raw object from the \{raw\_strings\}.}}
\DoxyCodeLine{91   DirectHandle<FixedArray> raw\_strings(description-\/>raw\_strings(), isolate);}
\DoxyCodeLine{92   DirectHandle<FixedArray> cooked\_strings(description-\/>cooked\_strings(),}
\DoxyCodeLine{93                                           isolate);}
\DoxyCodeLine{94   DirectHandle<JSArray> template\_object =}
\DoxyCodeLine{95       isolate-\/>factory()-\/>NewJSArrayForTemplateLiteralArray(}
\DoxyCodeLine{96           cooked\_strings, raw\_strings, \mbox{\hyperlink{namespacev8_1_1internal_a84ff7a23e4923ab6a01d8d7d2d0f4179}{function\_literal\_id}}, slot\_id);}
\DoxyCodeLine{97 }
\DoxyCodeLine{98   \textcolor{comment}{// Insert the template object into the cached template array list.}}
\DoxyCodeLine{99   DirectHandle<ArrayList> cached\_templates;}
\DoxyCodeLine{100   \textcolor{keywordflow}{if} (!maybe\_cached\_templates.ToHandle(\&cached\_templates)) \{}
\DoxyCodeLine{101     cached\_templates = isolate-\/>factory()-\/>NewArrayList(1);}
\DoxyCodeLine{102   \}}
\DoxyCodeLine{103   cached\_templates = \mbox{\hyperlink{classv8_1_1internal_1_1ArrayList_ac975c397f9ef4b5dd3dcb5cf7fcfc0aa}{ArrayList::Add}}(isolate, cached\_templates, template\_object);}
\DoxyCodeLine{104 }
\DoxyCodeLine{105   \textcolor{comment}{// Compare the cached\_templates to the original maybe\_cached\_templates loaded}}
\DoxyCodeLine{106   \textcolor{comment}{// from the weakmap -\/-\/ if it doesn't match, we need to update the weakmap.}}
\DoxyCodeLine{107   DirectHandle<ArrayList> old\_cached\_templates;}
\DoxyCodeLine{108   \textcolor{keywordflow}{if} (!maybe\_cached\_templates.ToHandle(\&old\_cached\_templates) ||}
\DoxyCodeLine{109       *old\_cached\_templates != *cached\_templates) \{}
\DoxyCodeLine{110     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} maybe\_template\_weakmap =}
\DoxyCodeLine{111         \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>template\_weakmap();}
\DoxyCodeLine{112     Handle<EphemeronHashTable> template\_weakmap;}
\DoxyCodeLine{113     \textcolor{keywordflow}{if} (IsUndefined(maybe\_template\_weakmap)) \{}
\DoxyCodeLine{114       template\_weakmap = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02intl-objects_8cc_03_aea46070627c9c116b8f1be4a25840e66}{EphemeronHashTable::New}}(isolate, 1);}
\DoxyCodeLine{115     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{116       template\_weakmap =}
\DoxyCodeLine{117           \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(Cast<EphemeronHashTable>(maybe\_template\_weakmap), isolate);}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119     template\_weakmap = EphemeronHashTable::Put(isolate, template\_weakmap,}
\DoxyCodeLine{120                                                \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, cached\_templates, hash);}
\DoxyCodeLine{121     \mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>set\_template\_weakmap(*template\_weakmap);}
\DoxyCodeLine{122   \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124   \textcolor{comment}{// Check that the list is in the appropriate location on the weakmap, and}}
\DoxyCodeLine{125   \textcolor{comment}{// that the appropriate entry is in the right location in this list.}}
\DoxyCodeLine{126   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(Cast<EphemeronHashTable>(\mbox{\hyperlink{namespacev8_1_1internal_afe601ad9b4b4c61d8a6a700e7db12c2a}{native\_context}}-\/>template\_weakmap())}
\DoxyCodeLine{127                 -\/>Lookup(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afb7e5cd394b9632dddc2e7807b11b2ab}{script}}, hash),}
\DoxyCodeLine{128             *cached\_templates);}
\DoxyCodeLine{129   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(cached\_templates-\/>get(cached\_templates-\/>length() -\/ 1),}
\DoxyCodeLine{130             *template\_object);}
\DoxyCodeLine{131 }
\DoxyCodeLine{132   \textcolor{keywordflow}{return} template\_object;}
\DoxyCodeLine{133 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Array\+List\+::\+Add(), v8\+::internal\+::anonymous\+\_\+namespace\{template-\/objects.\+cc\}\+::\+Cached\+Template\+Matches(), DCHECK\+\_\+\+EQ, v8\+::internal\+::direct\+\_\+handle(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::function\+\_\+literal\+\_\+id, v8\+::internal\+::handle(), v8\+::internal\+::\+Hash(), v8\+::k\+Relaxed\+Load, v8\+::internal\+::native\+\_\+context, v8\+::internal\+::anonymous\+\_\+namespace\{intl-\/objects.\+cc\}\+::\+New(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+New\+Array\+List(), v8\+::internal\+::\+Factory\+::\+New\+JSArray\+For\+Template\+Literal\+Array(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::script, and v8\+::internal\+::\+Maybe\+Direct\+Handle$<$ T $>$\+::\+To\+Handle().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1TemplateObjectDescription_a732cfac0b89521058855b1d4efc0715e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1TemplateObjectDescription_a732cfac0b89521058855b1d4efc0715e_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{template-objects_8h}{template-\/objects.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{template-objects_8cc}{template-\/objects.\+cc}}\end{DoxyCompactItemize}
