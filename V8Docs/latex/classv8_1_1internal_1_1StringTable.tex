\hypertarget{classv8_1_1internal_1_1StringTable}{}\doxysection{v8\+::internal\+::String\+Table Class Reference}
\label{classv8_1_1internal_1_1StringTable}\index{v8::internal::StringTable@{v8::internal::StringTable}}


{\ttfamily \#include $<$string-\/table.\+h$>$}



Collaboration diagram for v8\+::internal\+::String\+Table\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data}{Data}}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1OffHeapStringHashSet}{Off\+Heap\+String\+Hash\+Set}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a74fbb19b84e6e10d8c6035c6ab76d057}{String\+Table}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ab3b7ec404750cdda66d17f3631ebeeb6}{$\sim$\+String\+Table}} ()
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a5adf7b4c35726d98a26a7c53a7a235f7}{Capacity}} () const
\item 
\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}{Number\+Of\+Elements}} () const
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a28608931d349ea4b4409558190f20400}{Lookup\+String}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}})
\item 
{\footnotesize template$<$typename String\+Table\+Key , typename IsolateT $>$ }\\\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43}{Lookup\+Key}} (IsolateT $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1StringTableKey}{String\+Table\+Key}} $\ast$\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a58e24f6c395074761b6eba714ffb336c}{Insert\+For\+Isolate\+Deserialization}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, const \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$$>$ \&strings)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a2de7cc3357e4b0aa8ba2b7a076dad74a}{Insert\+Empty\+String\+For\+Bootstrapping}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ac0bb81daf9fafd55b8a3b95fab8a7bb0}{Print}} (\mbox{\hyperlink{classv8_1_1internal_1_1PtrComprCageBase}{Ptr\+Compr\+Cage\+Base}} cage\+\_\+base) const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a555360d5fd7323fc90a54c0611bb7661}{Get\+Current\+Memory\+Usage}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14}{Iterate\+Elements}} (\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$visitor)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ac7051d18932bb54945f2bfac94d75765}{Drop\+Old\+Data}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a7915726542f03275e2cddbe03ddef3}{Notify\+Elements\+Removed}} (\mbox{\hyperlink{classint}{int}} \mbox{\hyperlink{structv8_1_1internal_1_1count}{count}})
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8706a5f8e7482f7ba97bb60df880b1d4}{Verify\+If\+Owned\+By}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Smi}{Smi}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4}{empty\+\_\+element}} ()
\item 
static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Smi}{Smi}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8}{deleted\+\_\+element}} ()
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a00eace67662ee9e54284b0f1bd8dbccc}{Try\+String\+To\+Index\+Or\+Lookup\+Existing}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} raw\+\_\+string)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data}{Data}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}{Ensure\+Capacity}} (\mbox{\hyperlink{classv8_1_1internal_1_1PtrComprCageBase}{Ptr\+Compr\+Cage\+Base}} cage\+\_\+base, \mbox{\hyperlink{classint}{int}} additional\+\_\+elements)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data}{Data}} $\ast$ $>$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\+\_\+mutex\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 48 of file string-\/table.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a74fbb19b84e6e10d8c6035c6ab76d057}\label{classv8_1_1internal_1_1StringTable_a74fbb19b84e6e10d8c6035c6ab76d057}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!StringTable@{StringTable}}
\index{StringTable@{StringTable}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{StringTable()}{StringTable()}}
{\footnotesize\ttfamily v8\+::internal\+::\+String\+Table\+::\+String\+Table (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 161 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{162     : \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data_a56a9272ca13300d3ebacb5314ed2240d}{Data::New}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1OffHeapStringHashSet_a86da43a54201703ca9515649e688f754}{OffHeapStringHashSet::kMinCapacity}}).release()),}
\DoxyCodeLine{163       \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}(isolate) \{}
\DoxyCodeLine{164   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4}{empty\_element}}(), \mbox{\hyperlink{classv8_1_1internal_1_1OffHeapHashTableBase_ad1d4da5eafd54b82f4d23e282deee06d}{OffHeapStringHashSet::empty\_element}}());}
\DoxyCodeLine{165   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8}{deleted\_element}}(), \mbox{\hyperlink{classv8_1_1internal_1_1OffHeapHashTableBase_a77db7b3628ed1dd49a30e1210062194c}{OffHeapStringHashSet::deleted\_element}}());}
\DoxyCodeLine{166 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Off\+Heap\+String\+Hash\+Set $>$\+::deleted\+\_\+element(), deleted\+\_\+element(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Off\+Heap\+String\+Hash\+Set $>$\+::empty\+\_\+element(), and empty\+\_\+element().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a74fbb19b84e6e10d8c6035c6ab76d057_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_ab3b7ec404750cdda66d17f3631ebeeb6}\label{classv8_1_1internal_1_1StringTable_ab3b7ec404750cdda66d17f3631ebeeb6}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!````~StringTable@{$\sim$StringTable}}
\index{````~StringTable@{$\sim$StringTable}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{$\sim$StringTable()}{~StringTable()}}
{\footnotesize\ttfamily v8\+::internal\+::\+String\+Table\+::$\sim$\+String\+Table (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 168 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{168 \{ \textcolor{keyword}{delete} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}; \}}

\end{DoxyCode}


References data\+\_\+.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a5adf7b4c35726d98a26a7c53a7a235f7}\label{classv8_1_1internal_1_1StringTable_a5adf7b4c35726d98a26a7c53a7a235f7}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!Capacity@{Capacity}}
\index{Capacity@{Capacity}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{Capacity()}{Capacity()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+String\+Table\+::\+Capacity (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 170 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{170                                 \{}
\DoxyCodeLine{171   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_acquire)-\/>table().capacity();}
\DoxyCodeLine{172 \}}

\end{DoxyCode}


References data\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8}\label{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!deleted\_element@{deleted\_element}}
\index{deleted\_element@{deleted\_element}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{deleted\_element()}{deleted\_element()}}
{\footnotesize\ttfamily static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Smi}{Smi}}$>$ v8\+::internal\+::\+String\+Table\+::deleted\+\_\+element (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 51 of file string-\/table.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{51 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1Smi_afe7f07102d90ccce48cbe677c88a0645}{Smi::FromInt}}(1); \}}

\end{DoxyCode}


References v8\+::internal\+::\+Smi\+::\+From\+Int().



Referenced by String\+Table(), and v8\+::internal\+::\+Internalized\+String\+Table\+Cleaner\+::\+Visit\+Root\+Pointers().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ae6b153e0f379e1c83a976e3da401ebf8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_ac7051d18932bb54945f2bfac94d75765}\label{classv8_1_1internal_1_1StringTable_ac7051d18932bb54945f2bfac94d75765}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!DropOldData@{DropOldData}}
\index{DropOldData@{DropOldData}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{DropOldData()}{DropOldData()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Drop\+Old\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 735 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{735                               \{}
\DoxyCodeLine{736   \textcolor{comment}{// This should only happen during garbage collection when background threads}}
\DoxyCodeLine{737   \textcolor{comment}{// are paused, so the load can be relaxed.}}
\DoxyCodeLine{738   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f28064f94348c01f908cc28ca4016d7}{safepoint}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IsolateSafepoint_a10bd26df469f53e11665569cd911c0b0}{AssertActive}}();}
\DoxyCodeLine{739   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a29636ce2b5c73518cc392133e5fa7203}{gc\_state}}(), \mbox{\hyperlink{classv8_1_1internal_1_1Heap_aee3f8b2c700602c6e8546212a2ac0f65a3d9a5665b3549e9c13e86d836d6fe98f}{Heap::NOT\_IN\_GC}});}
\DoxyCodeLine{740   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_relaxed)-\/>DropPreviousData();}
\DoxyCodeLine{741 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+Safepoint\+::\+Assert\+Active(), data\+\_\+, DCHECK\+\_\+\+NE, v8\+::internal\+::\+Heap\+::gc\+\_\+state(), v8\+::internal\+::\+Isolate\+::heap(), isolate\+\_\+, v8\+::internal\+::\+Heap\+::\+NOT\+\_\+\+IN\+\_\+\+GC, and v8\+::internal\+::\+Heap\+::safepoint().



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Clear\+String\+Table\+Job\+Item\+::\+Run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ac7051d18932bb54945f2bfac94d75765_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ac7051d18932bb54945f2bfac94d75765_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4}\label{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!empty\_element@{empty\_element}}
\index{empty\_element@{empty\_element}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{empty\_element()}{empty\_element()}}
{\footnotesize\ttfamily static constexpr \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Smi}{Smi}}$>$ v8\+::internal\+::\+String\+Table\+::empty\+\_\+element (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 50 of file string-\/table.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{50 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1Smi_afe7f07102d90ccce48cbe677c88a0645}{Smi::FromInt}}(0); \}}

\end{DoxyCode}


References v8\+::internal\+::\+Smi\+::\+From\+Int().



Referenced by String\+Table().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a72cae7b1ef695524890903c945da6df4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}\label{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!EnsureCapacity@{EnsureCapacity}}
\index{EnsureCapacity@{EnsureCapacity}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{EnsureCapacity()}{EnsureCapacity()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data}{String\+Table\+::\+Data}} $\ast$ v8\+::internal\+::\+String\+Table\+::\+Ensure\+Capacity (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PtrComprCageBase}{Ptr\+Compr\+Cage\+Base}}}]{cage\+\_\+base,  }\item[{\mbox{\hyperlink{classint}{int}}}]{additional\+\_\+elements }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 500 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{501                                                                         \{}
\DoxyCodeLine{502   \textcolor{comment}{// This call is only allowed while the write mutex is held.}}
\DoxyCodeLine{503   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\_mutex\_}}.\mbox{\hyperlink{classv8_1_1base_1_1Mutex_a281097589e7088f5af211349cac0ef9d}{AssertHeld}}();}
\DoxyCodeLine{504 }
\DoxyCodeLine{505   \textcolor{comment}{// This load can be relaxed as the table pointer can only be modified while}}
\DoxyCodeLine{506   \textcolor{comment}{// the lock is held.}}
\DoxyCodeLine{507   Data* data = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_relaxed);}
\DoxyCodeLine{508 }
\DoxyCodeLine{509   \textcolor{keywordtype}{int} new\_capacity;}
\DoxyCodeLine{510   \textcolor{keywordflow}{if} (data-\/>table().ShouldResizeToAdd(additional\_elements, \&new\_capacity)) \{}
\DoxyCodeLine{511     std::unique\_ptr<Data> new\_data =}
\DoxyCodeLine{512         \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data_a13e10c9e563c8460d7e7536531bf8930}{Data::Resize}}(cage\_base, std::unique\_ptr<Data>(data), new\_capacity);}
\DoxyCodeLine{513     \textcolor{comment}{// `new\_data` is the new owner of `data`.}}
\DoxyCodeLine{514     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(new\_data-\/>PreviousData(), data);}
\DoxyCodeLine{515     \textcolor{comment}{// Release-\/store the new data pointer as `data\_`, so that it can be}}
\DoxyCodeLine{516     \textcolor{comment}{// acquire-\/loaded by other threads. This string table becomes the owner of}}
\DoxyCodeLine{517     \textcolor{comment}{// the pointer.}}
\DoxyCodeLine{518     data = new\_data.release();}
\DoxyCodeLine{519     \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.store(data, std::memory\_order\_release);}
\DoxyCodeLine{520   \}}
\DoxyCodeLine{521 }
\DoxyCodeLine{522   \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{523 \}}

\end{DoxyCode}


References v8\+::base\+::\+Mutex\+::\+Assert\+Held(), data\+\_\+, DCHECK\+\_\+\+EQ, v8\+::internal\+::\+String\+Table\+::\+Data\+::\+Resize(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Should\+Resize\+To\+Add(), v8\+::internal\+::\+String\+Table\+::\+Data\+::table(), and write\+\_\+mutex\+\_\+.



Referenced by Insert\+Empty\+String\+For\+Bootstrapping(), Insert\+For\+Isolate\+Deserialization(), and Lookup\+Key().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a555360d5fd7323fc90a54c0611bb7661}\label{classv8_1_1internal_1_1StringTable_a555360d5fd7323fc90a54c0611bb7661}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!GetCurrentMemoryUsage@{GetCurrentMemoryUsage}}
\index{GetCurrentMemoryUsage@{GetCurrentMemoryUsage}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{GetCurrentMemoryUsage()}{GetCurrentMemoryUsage()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::\+String\+Table\+::\+Get\+Current\+Memory\+Usage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 723 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{723                                                 \{}
\DoxyCodeLine{724   \textcolor{keywordflow}{return} \textcolor{keyword}{sizeof}(*this) +}
\DoxyCodeLine{725          \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_acquire)-\/>GetCurrentMemoryUsage();}
\DoxyCodeLine{726 \}}

\end{DoxyCode}


References data\+\_\+.



Referenced by v8\+::\+Isolate\+::\+Get\+Heap\+Statistics().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a555360d5fd7323fc90a54c0611bb7661_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a2de7cc3357e4b0aa8ba2b7a076dad74a}\label{classv8_1_1internal_1_1StringTable_a2de7cc3357e4b0aa8ba2b7a076dad74a}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!InsertEmptyStringForBootstrapping@{InsertEmptyStringForBootstrapping}}
\index{InsertEmptyStringForBootstrapping@{InsertEmptyStringForBootstrapping}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{InsertEmptyStringForBootstrapping()}{InsertEmptyStringForBootstrapping()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Insert\+Empty\+String\+For\+Bootstrapping (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



Definition at line 701 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{701                                                                     \{}
\DoxyCodeLine{702   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}{NumberOfElements}}(), 0);}
\DoxyCodeLine{703   \{}
\DoxyCodeLine{704     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} table\_write\_guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\_mutex\_}});}
\DoxyCodeLine{705 }
\DoxyCodeLine{706     Data* \textcolor{keyword}{const} data = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}{EnsureCapacity}}(isolate, 1);}
\DoxyCodeLine{707 }
\DoxyCodeLine{708     DirectHandle<String> empty\_string = isolate-\/>factory()-\/>empty\_string();}
\DoxyCodeLine{709     uint32\_t hash = empty\_string-\/>EnsureHash();}
\DoxyCodeLine{710 }
\DoxyCodeLine{711     InternalIndex entry = data-\/>table().FindInsertionEntry(isolate, hash);}
\DoxyCodeLine{712 }
\DoxyCodeLine{713     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table, empty\_string-\/>IsShared());}
\DoxyCodeLine{714     data-\/>table().AddAt(isolate, entry, *empty\_string);}
\DoxyCodeLine{715   \}}
\DoxyCodeLine{716   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}{NumberOfElements}}(), 1);}
\DoxyCodeLine{717 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Add\+At(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, Ensure\+Capacity(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Find\+Insertion\+Entry(), Number\+Of\+Elements(), v8\+::internal\+::\+String\+Table\+::\+Data\+::table(), v8\+::internal\+::v8\+\_\+flags, and write\+\_\+mutex\+\_\+.



Referenced by v8\+::internal\+::\+Heap\+::\+Create\+Important\+Read\+Only\+Objects().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a2de7cc3357e4b0aa8ba2b7a076dad74a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a2de7cc3357e4b0aa8ba2b7a076dad74a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a58e24f6c395074761b6eba714ffb336c}\label{classv8_1_1internal_1_1StringTable_a58e24f6c395074761b6eba714ffb336c}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!InsertForIsolateDeserialization@{InsertForIsolateDeserialization}}
\index{InsertForIsolateDeserialization@{InsertForIsolateDeserialization}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{InsertForIsolateDeserialization()}{InsertForIsolateDeserialization()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Insert\+For\+Isolate\+Deserialization (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{const \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$$>$ \&}]{strings }\end{DoxyParamCaption})}



Definition at line 676 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{677                                                                        \{}
\DoxyCodeLine{678   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}{NumberOfElements}}(), 0);}
\DoxyCodeLine{679 }
\DoxyCodeLine{680   \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}} = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(strings.size());}
\DoxyCodeLine{681   \{}
\DoxyCodeLine{682     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} table\_write\_guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\_mutex\_}});}
\DoxyCodeLine{683 }
\DoxyCodeLine{684     Data* \textcolor{keyword}{const} data = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}{EnsureCapacity}}(isolate, \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}});}
\DoxyCodeLine{685 }
\DoxyCodeLine{686     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} DirectHandle<String>\& s : strings) \{}
\DoxyCodeLine{687       StringTableInsertionKey \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}(}
\DoxyCodeLine{688           isolate, s, \mbox{\hyperlink{namespacev8_1_1internal_a1d9bc3092ebba2181bef8e36b0854dc9a3aec6da7766e2cf6ba2f717f0749ca5b}{DeserializingUserCodeOption::kNotDeserializingUserCode}});}
\DoxyCodeLine{689       InternalIndex entry =}
\DoxyCodeLine{690           data-\/>table().FindEntryOrInsertionEntry(isolate, \&\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}.hash());}
\DoxyCodeLine{691 }
\DoxyCodeLine{692       DirectHandle<String> inserted\_string = \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}.GetHandleForInsertion(isolate);}
\DoxyCodeLine{693       \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table, inserted\_string-\/>IsShared());}
\DoxyCodeLine{694       data-\/>table().AddAt(isolate, entry, *inserted\_string);}
\DoxyCodeLine{695     \}}
\DoxyCodeLine{696   \}}
\DoxyCodeLine{697 }
\DoxyCodeLine{698   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}{NumberOfElements}}(), \mbox{\hyperlink{namespacev8_1_1internal_afa9ea55d792121fba92b4cfc8ef8c9d7}{length}});}
\DoxyCodeLine{699 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Add\+At(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+IMPLIES, Ensure\+Capacity(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Find\+Entry\+Or\+Insertion\+Entry(), v8\+::internal\+::key, v8\+::internal\+::k\+Not\+Deserializing\+User\+Code, v8\+::internal\+::length, Number\+Of\+Elements(), v8\+::internal\+::\+String\+Table\+::\+Data\+::table(), v8\+::internal\+::v8\+\_\+flags, and write\+\_\+mutex\+\_\+.



Referenced by v8\+::internal\+::\+Shared\+Heap\+Deserializer\+::\+Deserialize\+String\+Table().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a58e24f6c395074761b6eba714ffb336c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a58e24f6c395074761b6eba714ffb336c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14}\label{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!IterateElements@{IterateElements}}
\index{IterateElements@{IterateElements}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{IterateElements()}{IterateElements()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Iterate\+Elements (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor}{Root\+Visitor}} $\ast$}]{visitor }\end{DoxyParamCaption})}



Definition at line 728 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{728                                                       \{}
\DoxyCodeLine{729   \textcolor{comment}{// This should only happen during garbage collection when background threads}}
\DoxyCodeLine{730   \textcolor{comment}{// are paused, so the load can be relaxed.}}
\DoxyCodeLine{731   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f28064f94348c01f908cc28ca4016d7}{safepoint}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IsolateSafepoint_a10bd26df469f53e11665569cd911c0b0}{AssertActive}}();}
\DoxyCodeLine{732   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_relaxed)-\/>IterateElements(visitor);}
\DoxyCodeLine{733 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+Safepoint\+::\+Assert\+Active(), data\+\_\+, v8\+::internal\+::\+Isolate\+::heap(), isolate\+\_\+, and v8\+::internal\+::\+Heap\+::safepoint().



Referenced by v8\+::internal\+::\+Heap\+::\+Iterate\+Weak\+Roots(), v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Clear\+String\+Table\+Job\+Item\+::\+Run(), and v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Serialize\+String\+Table().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43}\label{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!LookupKey@{LookupKey}}
\index{LookupKey@{LookupKey}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{LookupKey()}{LookupKey()}}
{\footnotesize\ttfamily template$<$typename String\+Table\+Key , typename IsolateT $>$ \\
template \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ v8\+::internal\+::\+String\+Table\+::\+Lookup\+Key (\begin{DoxyParamCaption}\item[{IsolateT $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1StringTableKey}{String\+Table\+Key}} $\ast$}]{key }\end{DoxyParamCaption})}



Definition at line 392 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{393                                                                  \{}
\DoxyCodeLine{394   \textcolor{comment}{// String table lookups are allowed to be concurrent, assuming that:}}
\DoxyCodeLine{395   \textcolor{comment}{//}}
\DoxyCodeLine{396   \textcolor{comment}{//   -\/ The Heap access is allowed to be concurrent (using LocalHeap or}}
\DoxyCodeLine{397   \textcolor{comment}{//     similar),}}
\DoxyCodeLine{398   \textcolor{comment}{//   -\/ All writes to the string table are guarded by the Isolate string table}}
\DoxyCodeLine{399   \textcolor{comment}{//     mutex,}}
\DoxyCodeLine{400   \textcolor{comment}{//   -\/ Resizes of the string table first copies the old contents to the new}}
\DoxyCodeLine{401   \textcolor{comment}{//     table, and only then sets the new string table pointer to the new}}
\DoxyCodeLine{402   \textcolor{comment}{//     table,}}
\DoxyCodeLine{403   \textcolor{comment}{//   -\/ Only GCs can remove elements from the string table.}}
\DoxyCodeLine{404   \textcolor{comment}{//}}
\DoxyCodeLine{405   \textcolor{comment}{// These assumptions allow us to make the following statement:}}
\DoxyCodeLine{406   \textcolor{comment}{//}}
\DoxyCodeLine{407   \textcolor{comment}{//   "{}Reads are allowed when not holding the lock, as long as false negatives}}
\DoxyCodeLine{408   \textcolor{comment}{//    (misses) are ok. We will never get a false positive (hit of an entry no}}
\DoxyCodeLine{409   \textcolor{comment}{//    longer in the table)"{}}}
\DoxyCodeLine{410   \textcolor{comment}{//}}
\DoxyCodeLine{411   \textcolor{comment}{// This is because we \_know\_ that if we find an entry in the string table, any}}
\DoxyCodeLine{412   \textcolor{comment}{// entry will also be in all reallocations of that tables. This is required}}
\DoxyCodeLine{413   \textcolor{comment}{// for strong consistency of internalized string equality implying reference}}
\DoxyCodeLine{414   \textcolor{comment}{// equality.}}
\DoxyCodeLine{415   \textcolor{comment}{//}}
\DoxyCodeLine{416   \textcolor{comment}{// We therefore try to optimistically read from the string table without}}
\DoxyCodeLine{417   \textcolor{comment}{// taking the lock (both here and in the NoAllocate version of the lookup),}}
\DoxyCodeLine{418   \textcolor{comment}{// and on a miss we take the lock and try to write the entry, with a second}}
\DoxyCodeLine{419   \textcolor{comment}{// read lookup in case the non-\/locked read missed a write.}}
\DoxyCodeLine{420   \textcolor{comment}{//}}
\DoxyCodeLine{421   \textcolor{comment}{// One complication is allocation -\/-\/ we don't want to allocate while holding}}
\DoxyCodeLine{422   \textcolor{comment}{// the string table lock. This applies to both allocation of new strings, and}}
\DoxyCodeLine{423   \textcolor{comment}{// re-\/allocation of the string table on resize. So, we optimistically allocate}}
\DoxyCodeLine{424   \textcolor{comment}{// (without copying values) outside the lock, and potentially discard the}}
\DoxyCodeLine{425   \textcolor{comment}{// allocation if another write also did an allocation. This assumes that}}
\DoxyCodeLine{426   \textcolor{comment}{// writes are rarer than reads.}}
\DoxyCodeLine{427 }
\DoxyCodeLine{428   \textcolor{comment}{// Load the current string table data, in case another thread updates the}}
\DoxyCodeLine{429   \textcolor{comment}{// data while we're reading.}}
\DoxyCodeLine{430   Data* \textcolor{keyword}{const} current\_data = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{431   OffHeapStringHashSet\& current\_table = current\_data-\/>table();}
\DoxyCodeLine{432 }
\DoxyCodeLine{433   \textcolor{comment}{// First try to find the string in the table. This is safe to do even if the}}
\DoxyCodeLine{434   \textcolor{comment}{// table is now reallocated; we won't find a stale entry in the old table}}
\DoxyCodeLine{435   \textcolor{comment}{// because the new table won't delete it's corresponding entry until the}}
\DoxyCodeLine{436   \textcolor{comment}{// string is dead, in which case it will die in this table too and worst}}
\DoxyCodeLine{437   \textcolor{comment}{// case we'll have a false miss.}}
\DoxyCodeLine{438   InternalIndex entry = current\_table.FindEntry(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}-\/>hash());}
\DoxyCodeLine{439   \textcolor{keywordflow}{if} (entry.is\_found()) \{}
\DoxyCodeLine{440     DirectHandle<String> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}(}
\DoxyCodeLine{441         Cast<String>(current\_table.GetKey(isolate, entry)), isolate);}
\DoxyCodeLine{442     \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table,}
\DoxyCodeLine{443                    \mbox{\hyperlink{classv8_1_1internal_1_1HeapLayout_ae77bf0d1f0e1b86681fb29101ecd527a}{HeapLayout::InAnySharedSpace}}(*\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}));}
\DoxyCodeLine{444     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{445   \}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447   \textcolor{comment}{// No entry found, so adding new string.}}
\DoxyCodeLine{448   \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}-\/>PrepareForInsertion(isolate);}
\DoxyCodeLine{449   \{}
\DoxyCodeLine{450     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} table\_write\_guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\_mutex\_}});}
\DoxyCodeLine{451 }
\DoxyCodeLine{452     Data* data = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a3302dd59a9c0c9c541d8480aa279e56e}{EnsureCapacity}}(isolate, 1);}
\DoxyCodeLine{453     OffHeapStringHashSet\& table = data-\/>table();}
\DoxyCodeLine{454 }
\DoxyCodeLine{455     \textcolor{comment}{// Check one last time if the key is present in the table, in case it was}}
\DoxyCodeLine{456     \textcolor{comment}{// added after the check.}}
\DoxyCodeLine{457     entry = table.FindEntryOrInsertionEntry(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}, \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}-\/>hash());}
\DoxyCodeLine{458 }
\DoxyCodeLine{459     \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} element = table.GetKey(isolate, entry);}
\DoxyCodeLine{460     \textcolor{keywordflow}{if} (element == \mbox{\hyperlink{classv8_1_1internal_1_1OffHeapHashTableBase_ad1d4da5eafd54b82f4d23e282deee06d}{OffHeapStringHashSet::empty\_element}}()) \{}
\DoxyCodeLine{461       \textcolor{comment}{// This entry is empty, so write it and register that we added an}}
\DoxyCodeLine{462       \textcolor{comment}{// element.}}
\DoxyCodeLine{463       DirectHandle<String> new\_string = \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}-\/>GetHandleForInsertion(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}});}
\DoxyCodeLine{464       \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table, new\_string-\/>IsShared());}
\DoxyCodeLine{465       table.AddAt(isolate, entry, *new\_string);}
\DoxyCodeLine{466       \textcolor{keywordflow}{return} new\_string;}
\DoxyCodeLine{467     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (element == \mbox{\hyperlink{classv8_1_1internal_1_1OffHeapHashTableBase_a77db7b3628ed1dd49a30e1210062194c}{OffHeapStringHashSet::deleted\_element}}()) \{}
\DoxyCodeLine{468       \textcolor{comment}{// This entry was deleted, so overwrite it and register that we}}
\DoxyCodeLine{469       \textcolor{comment}{// overwrote a deleted element.}}
\DoxyCodeLine{470       DirectHandle<String> new\_string = \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}-\/>GetHandleForInsertion(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}});}
\DoxyCodeLine{471       \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table, new\_string-\/>IsShared());}
\DoxyCodeLine{472       table.OverwriteDeletedAt(isolate, entry, *new\_string);}
\DoxyCodeLine{473       \textcolor{keywordflow}{return} new\_string;}
\DoxyCodeLine{474     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{475       \textcolor{comment}{// Return the existing string as a handle.}}
\DoxyCodeLine{476       \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(Cast<String>(element), isolate);}
\DoxyCodeLine{477     \}}
\DoxyCodeLine{478   \}}
\DoxyCodeLine{479 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Add\+At(), data\+\_\+, DCHECK\+\_\+\+IMPLIES, v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Off\+Heap\+String\+Hash\+Set $>$\+::deleted\+\_\+element(), v8\+::internal\+::direct\+\_\+handle(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Off\+Heap\+String\+Hash\+Set $>$\+::empty\+\_\+element(), Ensure\+Capacity(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Find\+Entry(), v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Find\+Entry\+Or\+Insertion\+Entry(), v8\+::internal\+::\+String\+Table\+::\+Off\+Heap\+String\+Hash\+Set\+::\+Get\+Key(), v8\+::internal\+::\+Heap\+Layout\+::\+In\+Any\+Shared\+Space(), v8\+::internal\+::\+Internal\+Index\+::is\+\_\+found(), isolate\+\_\+, v8\+::internal\+::key, v8\+::internal\+::\+Off\+Heap\+Hash\+Table\+Base$<$ Derived $>$\+::\+Overwrite\+Deleted\+At(), v8\+::base\+::internal\+::result, v8\+::internal\+::\+String\+Table\+::\+Data\+::table(), v8\+::internal\+::v8\+\_\+flags, and write\+\_\+mutex\+\_\+.



Referenced by Lookup\+String().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a28608931d349ea4b4409558190f20400}\label{classv8_1_1internal_1_1StringTable_a28608931d349ea4b4409558190f20400}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!LookupString@{LookupString}}
\index{LookupString@{LookupString}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{LookupString()}{LookupString()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$ v8\+::internal\+::\+String\+Table\+::\+Lookup\+String (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1String}{String}} $>$}]{key }\end{DoxyParamCaption})}



Definition at line 336 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{337                                                                             \{}
\DoxyCodeLine{338   \textcolor{comment}{// When sharing the string table, internalization is allowed to be concurrent}}
\DoxyCodeLine{339   \textcolor{comment}{// from multiple Isolates, assuming that:}}
\DoxyCodeLine{340   \textcolor{comment}{//}}
\DoxyCodeLine{341   \textcolor{comment}{//  -\/ All in-\/place internalizable strings (i.e. old-\/generation flat strings)}}
\DoxyCodeLine{342   \textcolor{comment}{//    and internalized strings are in the shared heap.}}
\DoxyCodeLine{343   \textcolor{comment}{//  -\/ LookupKey supports concurrent access (see comment below).}}
\DoxyCodeLine{344   \textcolor{comment}{//}}
\DoxyCodeLine{345   \textcolor{comment}{// These assumptions guarantee the following properties:}}
\DoxyCodeLine{346   \textcolor{comment}{//}}
\DoxyCodeLine{347   \textcolor{comment}{//  -\/ String::Flatten is not threadsafe but is only called on non-\/shared}}
\DoxyCodeLine{348   \textcolor{comment}{//    strings, since non-\/flat strings are not shared.}}
\DoxyCodeLine{349   \textcolor{comment}{//}}
\DoxyCodeLine{350   \textcolor{comment}{//  -\/ String::ComputeAndSetRawHash is threadsafe on flat strings. This is safe}}
\DoxyCodeLine{351   \textcolor{comment}{//    because the characters are immutable and the same hash will be}}
\DoxyCodeLine{352   \textcolor{comment}{//    computed. The hash field is set with relaxed memory order. A thread that}}
\DoxyCodeLine{353   \textcolor{comment}{//    doesn't see the hash may do redundant work but will not be incorrect.}}
\DoxyCodeLine{354   \textcolor{comment}{//}}
\DoxyCodeLine{355   \textcolor{comment}{//  -\/ In-\/place internalizable strings do not incur a copy regardless of string}}
\DoxyCodeLine{356   \textcolor{comment}{//    table sharing. The map mutation is threadsafe even with relaxed memory}}
\DoxyCodeLine{357   \textcolor{comment}{//    order, because for concurrent table lookups, the "{}losing"{} thread will be}}
\DoxyCodeLine{358   \textcolor{comment}{//    correctly ordered by LookupKey's write mutex and see the updated map}}
\DoxyCodeLine{359   \textcolor{comment}{//    during the re-\/lookup.}}
\DoxyCodeLine{360   \textcolor{comment}{//}}
\DoxyCodeLine{361   \textcolor{comment}{// For lookup misses, the internalized string map is the same map in RO space}}
\DoxyCodeLine{362   \textcolor{comment}{// regardless of which thread is doing the lookup.}}
\DoxyCodeLine{363   \textcolor{comment}{//}}
\DoxyCodeLine{364   \textcolor{comment}{// For lookup hits, we use the StringForwardingTable for shared strings to}}
\DoxyCodeLine{365   \textcolor{comment}{// delay the transition into a ThinString to the next stop-\/the-\/world GC.}}
\DoxyCodeLine{366   DirectHandle<String> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{367       String::Flatten(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a15cafb1d1ed1ac577609eb5e764384e8}{indirect\_handle}}(\textcolor{keywordtype}{string}, isolate));}
\DoxyCodeLine{368   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(*\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}})) \{}
\DoxyCodeLine{369     uint32\_t raw\_hash\_field = \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>raw\_hash\_field(\mbox{\hyperlink{namespacev8_aee4e677b8d8a86416617b3330778b98a}{kAcquireLoad}});}
\DoxyCodeLine{370 }
\DoxyCodeLine{371     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Name_ac1ae04083fa9042106be06126fa5eb7b}{String::IsInternalizedForwardingIndex}}(raw\_hash\_field)) \{}
\DoxyCodeLine{372       \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} =}
\DoxyCodeLine{373           \mbox{\hyperlink{classv8_1_1base_1_1BitField_a554df4b9ae5f0dc36b4d092bfc2e004b}{String::ForwardingIndexValueBits::decode}}(raw\_hash\_field);}
\DoxyCodeLine{374       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacev8_1_1internal_a73502f55102d18cb764881bc29f35c05}{direct\_handle}}(}
\DoxyCodeLine{375           isolate-\/>string\_forwarding\_table()-\/>GetForwardString(isolate, \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}),}
\DoxyCodeLine{376           isolate);}
\DoxyCodeLine{377     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{378       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1Name_aeb272fbcfe70ac82684b5e995fa5bd87}{Name::IsHashFieldComputed}}(raw\_hash\_field)) \{}
\DoxyCodeLine{379         raw\_hash\_field = \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>EnsureRawHash();}
\DoxyCodeLine{380       \}}
\DoxyCodeLine{381       InternalizedStringKey \mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}, raw\_hash\_field);}
\DoxyCodeLine{382       \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_ab2009eeddb32952f533dd417ffe61e43}{LookupKey}}(isolate, \&\mbox{\hyperlink{namespacev8_1_1internal_a67a51b6314a9bc8a8c44c5fe14149e6c}{key}});}
\DoxyCodeLine{383     \}}
\DoxyCodeLine{384   \}}
\DoxyCodeLine{385   \textcolor{keywordflow}{if} (*\textcolor{keywordtype}{string} != *\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} \&\& !\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_a6f5e6ffabad6d103b853e7033c900fbe}{IsThinString}}(*\textcolor{keywordtype}{string})) \{}
\DoxyCodeLine{386     \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02string-table_8cc_03_ad3ce734799151a3cb6a2988f9fd8a06a}{SetInternalizedReference}}(isolate, *\textcolor{keywordtype}{string}, *\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{387   \}}
\DoxyCodeLine{388   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{389 \}}

\end{DoxyCode}


References v8\+::base\+::\+Bit\+Field$<$ T, shift, size, U $>$\+::decode(), v8\+::internal\+::direct\+\_\+handle(), v8\+::internal\+::\+String\+Forwarding\+Table\+::\+Get\+Forward\+String(), v8\+::internal\+::index, v8\+::internal\+::indirect\+\_\+handle(), v8\+::internal\+::\+Name\+::\+Is\+Hash\+Field\+Computed(), v8\+::internal\+::\+Name\+::\+Is\+Internalized\+Forwarding\+Index(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Thin\+String(), v8\+::k\+Acquire\+Load, v8\+::internal\+::key, Lookup\+Key(), v8\+::base\+::internal\+::result, v8\+::internal\+::anonymous\+\_\+namespace\{string-\/table.\+cc\}\+::\+Set\+Internalized\+Reference(), and v8\+::internal\+::\+Isolate\+::string\+\_\+forwarding\+\_\+table().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a28608931d349ea4b4409558190f20400_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a8a7915726542f03275e2cddbe03ddef3}\label{classv8_1_1internal_1_1StringTable_a8a7915726542f03275e2cddbe03ddef3}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!NotifyElementsRemoved@{NotifyElementsRemoved}}
\index{NotifyElementsRemoved@{NotifyElementsRemoved}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{NotifyElementsRemoved()}{NotifyElementsRemoved()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Notify\+Elements\+Removed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{count }\end{DoxyParamCaption})}



Definition at line 743 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{743                                                  \{}
\DoxyCodeLine{744   \textcolor{comment}{// This should only happen during garbage collection when background threads}}
\DoxyCodeLine{745   \textcolor{comment}{// are paused, so the load can be relaxed.}}
\DoxyCodeLine{746   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a3f28064f94348c01f908cc28ca4016d7}{safepoint}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1IsolateSafepoint_a10bd26df469f53e11665569cd911c0b0}{AssertActive}}();}
\DoxyCodeLine{747   \mbox{\hyperlink{src_2base_2logging_8h_a986dc8f4ec6dcd0644efe205c13f8eb7}{DCHECK\_NE}}(\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}{isolate\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Heap_a29636ce2b5c73518cc392133e5fa7203}{gc\_state}}(), \mbox{\hyperlink{classv8_1_1internal_1_1Heap_aee3f8b2c700602c6e8546212a2ac0f65a3d9a5665b3549e9c13e86d836d6fe98f}{Heap::NOT\_IN\_GC}});}
\DoxyCodeLine{748   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_relaxed)-\/>table().ElementsRemoved(count);}
\DoxyCodeLine{749 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+Safepoint\+::\+Assert\+Active(), data\+\_\+, DCHECK\+\_\+\+NE, v8\+::internal\+::\+Heap\+::gc\+\_\+state(), v8\+::internal\+::\+Isolate\+::heap(), isolate\+\_\+, v8\+::internal\+::\+Heap\+::\+NOT\+\_\+\+IN\+\_\+\+GC, and v8\+::internal\+::\+Heap\+::safepoint().



Referenced by v8\+::internal\+::anonymous\+\_\+namespace\{mark-\/compact.\+cc\}\+::\+Clear\+String\+Table\+Job\+Item\+::\+Run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a8a7915726542f03275e2cddbe03ddef3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a8a7915726542f03275e2cddbe03ddef3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}\label{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!NumberOfElements@{NumberOfElements}}
\index{NumberOfElements@{NumberOfElements}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{NumberOfElements()}{NumberOfElements()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classint}{int}} v8\+::internal\+::\+String\+Table\+::\+Number\+Of\+Elements (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 173 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{173                                         \{}
\DoxyCodeLine{174   \{}
\DoxyCodeLine{175     \mbox{\hyperlink{namespacev8_1_1base_a40b71b3558e4b5297d51003612578a81}{base::MutexGuard}} table\_write\_guard(\&\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}{write\_mutex\_}});}
\DoxyCodeLine{176     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_relaxed)-\/>table().number\_of\_elements();}
\DoxyCodeLine{177   \}}
\DoxyCodeLine{178 \}}

\end{DoxyCode}


References data\+\_\+, and write\+\_\+mutex\+\_\+.



Referenced by v8\+::internal\+::\+Shared\+Heap\+Deserializer\+::\+Deserialize\+String\+Table(), Insert\+Empty\+String\+For\+Bootstrapping(), Insert\+For\+Isolate\+Deserialization(), and v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Serialize\+String\+Table().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_af1710e7f05758accc40ed9c2581d97f9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_ac0bb81daf9fafd55b8a3b95fab8a7bb0}\label{classv8_1_1internal_1_1StringTable_ac0bb81daf9fafd55b8a3b95fab8a7bb0}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!Print@{Print}}
\index{Print@{Print}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{Print()}{Print()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Print (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1PtrComprCageBase}{Ptr\+Compr\+Cage\+Base}}}]{cage\+\_\+base }\end{DoxyParamCaption}) const}



Definition at line 719 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{719                                                         \{}
\DoxyCodeLine{720   \mbox{\hyperlink{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}{data\_}}.load(std::memory\_order\_acquire)-\/>Print(cage\_base);}
\DoxyCodeLine{721 \}}

\end{DoxyCode}


References data\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a00eace67662ee9e54284b0f1bd8dbccc}\label{classv8_1_1internal_1_1StringTable_a00eace67662ee9e54284b0f1bd8dbccc}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!TryStringToIndexOrLookupExisting@{TryStringToIndexOrLookupExisting}}
\index{TryStringToIndexOrLookupExisting@{TryStringToIndexOrLookupExisting}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{TryStringToIndexOrLookupExisting()}{TryStringToIndexOrLookupExisting()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} v8\+::internal\+::\+String\+Table\+::\+Try\+String\+To\+Index\+Or\+Lookup\+Existing (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{raw\+\_\+string }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 635 of file string-\/table.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{636                                                                           \{}
\DoxyCodeLine{637   Tagged<String> \textcolor{keywordtype}{string} = Cast<String>(\mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}}(raw\_string));}
\DoxyCodeLine{638   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(\textcolor{keywordtype}{string})) \{}
\DoxyCodeLine{639     \textcolor{comment}{// string could be internalized, if the string table is shared and another}}
\DoxyCodeLine{640     \textcolor{comment}{// thread internalized it.}}
\DoxyCodeLine{641     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.shared\_string\_table);}
\DoxyCodeLine{642     \textcolor{keywordflow}{return} raw\_string;}
\DoxyCodeLine{643   \}}
\DoxyCodeLine{644 }
\DoxyCodeLine{645   \textcolor{comment}{// Valid array indices are >= 0, so they cannot be mixed up with any of}}
\DoxyCodeLine{646   \textcolor{comment}{// the result sentinels, which are negative.}}
\DoxyCodeLine{647   static\_assert(}
\DoxyCodeLine{648       !\mbox{\hyperlink{classv8_1_1base_1_1BitField_a634dcf9bf5eb402dea1ec28d543bc55c}{String::ArrayIndexValueBits::is\_valid}}(\mbox{\hyperlink{namespacev8_1_1internal_a14f4234ae23bee0bff6176a93c6e83cba5165e5b934799d360457644e2b3718f6}{ResultSentinel::kUnsupported}}));}
\DoxyCodeLine{649   static\_assert(}
\DoxyCodeLine{650       !\mbox{\hyperlink{classv8_1_1base_1_1BitField_a634dcf9bf5eb402dea1ec28d543bc55c}{String::ArrayIndexValueBits::is\_valid}}(\mbox{\hyperlink{namespacev8_1_1internal_a14f4234ae23bee0bff6176a93c6e83cba72e85fa1bf19c36a86a609a52c13f1bc}{ResultSentinel::kNotFound}}));}
\DoxyCodeLine{651 }
\DoxyCodeLine{652   \textcolor{keywordtype}{size\_t} start = 0;}
\DoxyCodeLine{653   Tagged<String> source = \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{string}};}
\DoxyCodeLine{654   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_af900128363a4301fdb5640cfa106788b}{IsSlicedString}}(source)) \{}
\DoxyCodeLine{655     Tagged<SlicedString> sliced = Cast<SlicedString>(source);}
\DoxyCodeLine{656     start = sliced-\/>offset();}
\DoxyCodeLine{657     source = sliced-\/>parent();}
\DoxyCodeLine{658   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aed66dfc5a0636c99f9313e16bf5a9a23}{IsConsString}}(source) \&\& source-\/>IsFlat()) \{}
\DoxyCodeLine{659     source = Cast<ConsString>(source)-\/>first();}
\DoxyCodeLine{660   \}}
\DoxyCodeLine{661   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_a6f5e6ffabad6d103b853e7033c900fbe}{IsThinString}}(source)) \{}
\DoxyCodeLine{662     source = Cast<ThinString>(source)-\/>actual();}
\DoxyCodeLine{663     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{string}}-\/>length() == source-\/>length()) \{}
\DoxyCodeLine{664       \textcolor{keywordflow}{return} source.ptr();}
\DoxyCodeLine{665     \}}
\DoxyCodeLine{666   \}}
\DoxyCodeLine{667 }
\DoxyCodeLine{668   \textcolor{keywordflow}{if} (source-\/>IsOneByteRepresentation()) \{}
\DoxyCodeLine{669     \textcolor{keywordflow}{return} StringTable::Data::TryStringToIndexOrLookupExisting<uint8\_t>(}
\DoxyCodeLine{670         isolate, \textcolor{keywordtype}{string}, source, start);}
\DoxyCodeLine{671   \}}
\DoxyCodeLine{672   \textcolor{keywordflow}{return} StringTable::Data::TryStringToIndexOrLookupExisting<uint16\_t>(}
\DoxyCodeLine{673       isolate, \textcolor{keywordtype}{string}, source, start);}
\DoxyCodeLine{674 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), v8\+::base\+::\+Bit\+Field$<$ T, shift, size, U $>$\+::is\+\_\+valid(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Cons\+String(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Sliced\+String(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Thin\+String(), v8\+::internal\+::k\+Not\+Found, v8\+::internal\+::k\+Unsupported, v8\+::internal\+::\+Tagged\+Impl$<$ k\+Ref\+Type, Storage\+Type $>$\+::ptr(), v8\+::internal\+::string, and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1StringTable_a00eace67662ee9e54284b0f1bd8dbccc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a8706a5f8e7482f7ba97bb60df880b1d4}\label{classv8_1_1internal_1_1StringTable_a8706a5f8e7482f7ba97bb60df880b1d4}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!VerifyIfOwnedBy@{VerifyIfOwnedBy}}
\index{VerifyIfOwnedBy@{VerifyIfOwnedBy}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{VerifyIfOwnedBy()}{VerifyIfOwnedBy()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+String\+Table\+::\+Verify\+If\+Owned\+By (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate }\end{DoxyParamCaption})}



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}\label{classv8_1_1internal_1_1StringTable_acf9a03fe720e5f7d13f1c48e6f1f34de}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!data\_@{data\_}}
\index{data\_@{data\_}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{data\_}{data\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_1_1Data}{Data}}$\ast$$>$ v8\+::internal\+::\+String\+Table\+::data\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 99 of file string-\/table.\+h.



Referenced by Capacity(), Drop\+Old\+Data(), Ensure\+Capacity(), Get\+Current\+Memory\+Usage(), Iterate\+Elements(), Lookup\+Key(), Notify\+Elements\+Removed(), Number\+Of\+Elements(), Print(), v8\+::internal\+::\+String\+Table\+::\+Data\+::\+Try\+String\+To\+Index\+Or\+Lookup\+Existing(), and $\sim$\+String\+Table().

\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}\label{classv8_1_1internal_1_1StringTable_aaac63b44ee19104c7726b98e6ae55626}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!isolate\_@{isolate\_}}
\index{isolate\_@{isolate\_}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{isolate\_}{isolate\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}}$\ast$ v8\+::internal\+::\+String\+Table\+::isolate\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 103 of file string-\/table.\+h.



Referenced by Drop\+Old\+Data(), Iterate\+Elements(), Lookup\+Key(), and Notify\+Elements\+Removed().

\mbox{\Hypertarget{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}\label{classv8_1_1internal_1_1StringTable_a8a9d179150079340c0c21beaf2500ae1}} 
\index{v8::internal::StringTable@{v8::internal::StringTable}!write\_mutex\_@{write\_mutex\_}}
\index{write\_mutex\_@{write\_mutex\_}!v8::internal::StringTable@{v8::internal::StringTable}}
\doxysubsubsection{\texorpdfstring{write\_mutex\_}{write\_mutex\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Mutex}{base\+::\+Mutex}} v8\+::internal\+::\+String\+Table\+::write\+\_\+mutex\+\_\+\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}



Definition at line 102 of file string-\/table.\+h.



Referenced by Ensure\+Capacity(), Insert\+Empty\+String\+For\+Bootstrapping(), Insert\+For\+Isolate\+Deserialization(), Lookup\+Key(), and Number\+Of\+Elements().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{string-table_8h}{string-\/table.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{string-table_8cc}{string-\/table.\+cc}}\end{DoxyCompactItemize}
