\hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03}{}\doxysection{v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03}\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a81d068aca7cd15177545579f1e354094}{Sub\+Size\+And\+Tag\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} size\+\_\+in\+\_\+bytes)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a013e245078d376dfaf55a8728ebec689}{Sub\+Size\+And\+Tag\+Object}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classint}{int}} size\+\_\+in\+\_\+bytes)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_ae236fbaf51ddd3988b21b8e303944c02}{Allocate\+Raw}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}} register\+\_\+snapshot, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classT}{T}} size\+\_\+in\+\_\+bytes, \mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}} alloc\+\_\+type, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}} alignment)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_ae236fbaf51ddd3988b21b8e303944c02}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_ae236fbaf51ddd3988b21b8e303944c02}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}!AllocateRaw@{AllocateRaw}}
\index{AllocateRaw@{AllocateRaw}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AllocateRaw()}{AllocateRaw()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm.\+cc\}\+::Allocate\+Raw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}}}]{register\+\_\+snapshot,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classT}{T}}}]{size\+\_\+in\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}}}]{alloc\+\_\+type,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}}}]{alignment }\end{DoxyParamCaption})}



Definition at line 29 of file maglev-\/assembler-\/arm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{32                                                 \{}
\DoxyCodeLine{33   \textcolor{comment}{// TODO(victorgomes): Call the runtime for large object allocation.}}
\DoxyCodeLine{34   \textcolor{comment}{// TODO(victorgomes): Support double alignment.}}
\DoxyCodeLine{35   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(masm-\/>allow\_allocate());}
\DoxyCodeLine{36   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(alignment, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803a89dfe630590dbfe7004e6de0fabec67b}{kTaggedAligned}});}
\DoxyCodeLine{37   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.single\_generation) \{}
\DoxyCodeLine{38     alloc\_type = AllocationType::kOld;}
\DoxyCodeLine{39   \}}
\DoxyCodeLine{40   ExternalReference top = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a60f836e4f23b20abfb3e194df4dd6075}{SpaceAllocationTopAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{41   ExternalReference limit = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_ae6e53e1e4985894fe83a1e4d60e48613}{SpaceAllocationLimitAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{42   ZoneLabelRef done(masm);}
\DoxyCodeLine{43   MaglevAssembler::TemporaryRegisterScope temps(masm);}
\DoxyCodeLine{44   \mbox{\hyperlink{namespacev8_1_1internal_1_1ETWJITInterface_a6782da00e5166055555c65db3a9ec7eb}{Register}} scratch = temps.AcquireScratch();}
\DoxyCodeLine{45   \textcolor{comment}{// We are a bit short on registers, so we use the same register for \{object\}}}
\DoxyCodeLine{46   \textcolor{comment}{// and \{new\_top\}. Once we have defined \{new\_top\}, we don't use \{object\} until}}
\DoxyCodeLine{47   \textcolor{comment}{// \{new\_top\} is used for the last time. And there (at the end of this}}
\DoxyCodeLine{48   \textcolor{comment}{// function), we recover the original \{object\} from \{new\_top\} by subtracting}}
\DoxyCodeLine{49   \textcolor{comment}{// \{size\_in\_bytes\}.}}
\DoxyCodeLine{50   \mbox{\hyperlink{namespacev8_1_1internal_1_1ETWJITInterface_a6782da00e5166055555c65db3a9ec7eb}{Register}} new\_top = object;}
\DoxyCodeLine{51   \textcolor{comment}{// Check if there is enough space.}}
\DoxyCodeLine{52   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ldr(\textcolor{keywordtype}{object}, \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top, scratch));}
\DoxyCodeLine{53   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} add(new\_top, \textcolor{keywordtype}{object}, Operand(size\_in\_bytes), \mbox{\hyperlink{namespacev8_1_1internal_a4f48518ecf36583d3c1d585ada4784ee}{LeaveCC}});}
\DoxyCodeLine{54   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ldr(scratch, \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(limit, scratch));}
\DoxyCodeLine{55   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} cmp(new\_top, scratch);}
\DoxyCodeLine{56   \textcolor{comment}{// Otherwise call runtime.}}
\DoxyCodeLine{57   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} JumpToDeferredIf(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a3f018e64c0aa70e5dcccba23cd6e8ff6}{kUnsignedGreaterThanEqual}}, AllocateSlow<T>,}
\DoxyCodeLine{58                       register\_snapshot, \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a222b79e7e4247885c5eb1d6613141e72}{AllocateBuiltin}}(alloc\_type),}
\DoxyCodeLine{59                       size\_in\_bytes, done);}
\DoxyCodeLine{60   \textcolor{comment}{// Store new top and tag object.}}
\DoxyCodeLine{61   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Move(\mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top, scratch), new\_top);}
\DoxyCodeLine{62   \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a013e245078d376dfaf55a8728ebec689}{SubSizeAndTagObject}}(masm, \textcolor{keywordtype}{object}, size\_in\_bytes);}
\DoxyCodeLine{63   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} bind(*done);}
\DoxyCodeLine{64 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::internal\+::maglev\+::\+Maglev\+Assembler\+::\+Temporary\+Register\+Scope\+::\+Acquire\+Scratch(), v8\+::internal\+::maglev\+::\+Allocate\+Builtin(), v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::k\+Old, v8\+::internal\+::k\+Tagged\+Aligned, v8\+::internal\+::k\+Unsigned\+Greater\+Than\+Equal, v8\+::internal\+::\+Leave\+CC, v8\+::internal\+::maglev\+::\+Space\+Allocation\+Limit\+Address(), v8\+::internal\+::maglev\+::\+Space\+Allocation\+Top\+Address(), v8\+::internal\+::maglev\+::\+Sub\+Size\+And\+Tag\+Object(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::compiler\+::\+JSGraph\+Assembler\+::\+Allocate(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+Allocate\+Raw\+Array(), v8\+::internal\+::\+Factory\+Base$<$ Impl $>$\+::\+Allocate\+Raw\+With\+Immortal\+Map(), and v8\+::internal\+::compiler\+::\+Raw\+Machine\+Assembler\+::\+Optimized\+Allocate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_ae236fbaf51ddd3988b21b8e303944c02_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_ae236fbaf51ddd3988b21b8e303944c02_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a013e245078d376dfaf55a8728ebec689}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a013e245078d376dfaf55a8728ebec689}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}!SubSizeAndTagObject@{SubSizeAndTagObject}}
\index{SubSizeAndTagObject@{SubSizeAndTagObject}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SubSizeAndTagObject()}{SubSizeAndTagObject()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm.\+cc\}\+::Sub\+Size\+And\+Tag\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classint}{int}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 23 of file maglev-\/assembler-\/arm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{24                                             \{}
\DoxyCodeLine{25   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} add(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, Operand(\mbox{\hyperlink{namespacev8_1_1internal_aa2507eb9d594b9767347031fb02d0b20}{kHeapObjectTag}} -\/ size\_in\_bytes), \mbox{\hyperlink{namespacev8_1_1internal_a4f48518ecf36583d3c1d585ada4784ee}{LeaveCC}});}
\DoxyCodeLine{26 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::internal\+::k\+Heap\+Object\+Tag, and v8\+::internal\+::\+Leave\+CC.

\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a81d068aca7cd15177545579f1e354094}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-arm_8cc_03_a81d068aca7cd15177545579f1e354094}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}!SubSizeAndTagObject@{SubSizeAndTagObject}}
\index{SubSizeAndTagObject@{SubSizeAndTagObject}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/arm.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SubSizeAndTagObject()}{SubSizeAndTagObject()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/arm.\+cc\}\+::Sub\+Size\+And\+Tag\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 17 of file maglev-\/assembler-\/arm.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{18                                                  \{}
\DoxyCodeLine{19   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} sub(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, size\_in\_bytes, \mbox{\hyperlink{namespacev8_1_1internal_a4f48518ecf36583d3c1d585ada4784ee}{LeaveCC}});}
\DoxyCodeLine{20   \mbox{\hyperlink{maglev-assembler-arm_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} add(\textcolor{keywordtype}{object}, \textcolor{keywordtype}{object}, Operand(\mbox{\hyperlink{namespacev8_1_1internal_aa2507eb9d594b9767347031fb02d0b20}{kHeapObjectTag}}), \mbox{\hyperlink{namespacev8_1_1internal_a4f48518ecf36583d3c1d585ada4784ee}{LeaveCC}});}
\DoxyCodeLine{21 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::internal\+::k\+Heap\+Object\+Tag, and v8\+::internal\+::\+Leave\+CC.

