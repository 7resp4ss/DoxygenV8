\hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler}{}\doxysection{cppgc\+::internal\+::Pre\+Finalizer\+Handler Class Reference}
\label{classcppgc_1_1internal_1_1PreFinalizerHandler}\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}


{\ttfamily \#include $<$prefinalizer-\/handler.\+h$>$}



Collaboration diagram for cppgc\+::internal\+::Pre\+Finalizer\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a53a5ed0dee35670bc42011d969b4bfb4}{Pre\+Finalizer\+Handler}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&\mbox{\hyperlink{flag-definitions_8h_a761e4e5929b1553283fd6a532822bb17}{heap}})
\item 
void \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a76eb819d95de91a3a28e042ae2af7461}{Register\+Prefinalizer}} (\mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}} pre\+\_\+finalizer)
\item 
void \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_afae3d2475f42ba5826988278904b8116}{Invoke\+Pre\+Finalizers}} ()
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_afb41db753888a7e592e4ce2eda9bbedc}{Is\+Invoking\+Pre\+Finalizers}} () const
\item 
void \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0}{Notify\+Allocation\+In\+Prefinalizer}} (size\+\_\+t)
\item 
size\+\_\+t \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a784e827da64ac12dd92e82faf8b18b23}{Extract\+Bytes\+Allocated\+In\+Prefinalizers}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}{Current\+Thread\+Is\+Creation\+Thread}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}} $>$ \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\+\_\+pre\+\_\+finalizers\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}} $>$ $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\+\_\+ordered\+\_\+pre\+\_\+finalizers\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\+\_\+}}
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}{is\+\_\+invoking\+\_\+}} = \mbox{\hyperlink{namespacecppgc_1_1internal_a2a5dad15bdcff089a6dd4f1ab48d6433}{false}}
\item 
size\+\_\+t \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\+\_\+allocated\+\_\+in\+\_\+prefinalizers}} = 0u
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 27 of file prefinalizer-\/handler.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a53a5ed0dee35670bc42011d969b4bfb4}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a53a5ed0dee35670bc42011d969b4bfb4}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!PreFinalizerHandler@{PreFinalizerHandler}}
\index{PreFinalizerHandler@{PreFinalizerHandler}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{PreFinalizerHandler()}{PreFinalizerHandler()}}
{\footnotesize\ttfamily cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Pre\+Finalizer\+Handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}} \&}]{heap }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 30 of file prefinalizer-\/handler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{31     : \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}}(\&\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}),}
\DoxyCodeLine{32       \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\_}}(\mbox{\hyperlink{namespaceheap}{heap}})}
\DoxyCodeLine{33 \{}
\DoxyCodeLine{34   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}{CurrentThreadIsCreationThread}}());}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References Current\+Thread\+Is\+Creation\+Thread(), and DCHECK.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_a53a5ed0dee35670bc42011d969b4bfb4_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!CurrentThreadIsCreationThread@{CurrentThreadIsCreationThread}}
\index{CurrentThreadIsCreationThread@{CurrentThreadIsCreationThread}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{CurrentThreadIsCreationThread()}{CurrentThreadIsCreationThread()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Current\+Thread\+Is\+Creation\+Thread (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 88 of file prefinalizer-\/handler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{88                                                         \{}
\DoxyCodeLine{89 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{90   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a6b0597904ff3ff1cc0c324b08f0029e1}{CurrentThreadIsHeapThread}}();}
\DoxyCodeLine{91 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{92   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{93 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{94 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::\+Current\+Thread\+Is\+Heap\+Thread(), and heap\+\_\+.



Referenced by Invoke\+Pre\+Finalizers(), Pre\+Finalizer\+Handler(), and Register\+Prefinalizer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a784e827da64ac12dd92e82faf8b18b23}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a784e827da64ac12dd92e82faf8b18b23}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!ExtractBytesAllocatedInPrefinalizers@{ExtractBytesAllocatedInPrefinalizers}}
\index{ExtractBytesAllocatedInPrefinalizers@{ExtractBytesAllocatedInPrefinalizers}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{ExtractBytesAllocatedInPrefinalizers()}{ExtractBytesAllocatedInPrefinalizers()}}
{\footnotesize\ttfamily size\+\_\+t cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Extract\+Bytes\+Allocated\+In\+Prefinalizers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 38 of file prefinalizer-\/handler.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{38                                                 \{}
\DoxyCodeLine{39     \textcolor{keywordflow}{return} std::exchange(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\_allocated\_in\_prefinalizers}}, 0);}
\DoxyCodeLine{40   \}}

\end{DoxyCode}


References bytes\+\_\+allocated\+\_\+in\+\_\+prefinalizers.

\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_afae3d2475f42ba5826988278904b8116}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_afae3d2475f42ba5826988278904b8116}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!InvokePreFinalizers@{InvokePreFinalizers}}
\index{InvokePreFinalizers@{InvokePreFinalizers}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{InvokePreFinalizers()}{InvokePreFinalizers()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Invoke\+Pre\+Finalizers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 48 of file prefinalizer-\/handler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{48                                               \{}
\DoxyCodeLine{49   \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector_a84f776d47ac0f9fb8a4cbb0dd5a86037}{StatsCollector::EnabledScope}} stats\_scope(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a2b71dc778a025435fa06a9129f05bb6e}{stats\_collector}}(),}
\DoxyCodeLine{50                                            StatsCollector::kAtomicSweep);}
\DoxyCodeLine{51   \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector_a84f776d47ac0f9fb8a4cbb0dd5a86037}{StatsCollector::EnabledScope}} nested\_stats\_scope(}
\DoxyCodeLine{52       \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a2b71dc778a025435fa06a9129f05bb6e}{stats\_collector}}(), StatsCollector::kSweepInvokePreFinalizers);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}{CurrentThreadIsCreationThread}}());}
\DoxyCodeLine{55   LivenessBroker liveness\_broker = \mbox{\hyperlink{classcppgc_1_1internal_1_1LivenessBrokerFactory_a164a90df7b416df21633caa893572791}{LivenessBrokerFactory::Create}}();}
\DoxyCodeLine{56   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}{is\_invoking\_}} = \textcolor{keyword}{true};}
\DoxyCodeLine{57   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0u, \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\_allocated\_in\_prefinalizers}});}
\DoxyCodeLine{58   \textcolor{comment}{// Reset all LABs to force allocations to the slow path for black allocation.}}
\DoxyCodeLine{59   \textcolor{comment}{// This also ensures that a CHECK() hits in case prefinalizers allocate in the}}
\DoxyCodeLine{60   \textcolor{comment}{// configuration that prohibits this.}}
\DoxyCodeLine{61   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}{heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a358b50366c16ce54f2270b2eb78c963c}{object\_allocator}}().\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c}{ResetLinearAllocationBuffers}}();}
\DoxyCodeLine{62   \textcolor{comment}{// Prefinalizers can allocate other objects with prefinalizers, which will}}
\DoxyCodeLine{63   \textcolor{comment}{// modify ordered\_pre\_finalizers\_ and break iterators.}}
\DoxyCodeLine{64   std::vector<PreFinalizer> new\_ordered\_pre\_finalizers;}
\DoxyCodeLine{65   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}} = \&new\_ordered\_pre\_finalizers;}
\DoxyCodeLine{66   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.erase(}
\DoxyCodeLine{67       \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.begin(),}
\DoxyCodeLine{68       std::remove\_if(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.rbegin(),}
\DoxyCodeLine{69                      \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.rend(),}
\DoxyCodeLine{70                      [liveness\_broker](\textcolor{keyword}{const} PreFinalizer\& pf) \{}
\DoxyCodeLine{71                        return (pf.callback)(liveness\_broker, pf.object);}
\DoxyCodeLine{72                      \})}
\DoxyCodeLine{73           .base());}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#ifndef CPPGC\_ALLOW\_ALLOCATIONS\_IN\_PREFINALIZERS}}
\DoxyCodeLine{75   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(new\_ordered\_pre\_finalizers.empty());}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#else   }\textcolor{comment}{// CPPGC\_ALLOW\_ALLOCATIONS\_IN\_PREFINALIZERS}}
\DoxyCodeLine{77   \textcolor{comment}{// Newly added objects with prefinalizers will always survive the current GC}}
\DoxyCodeLine{78   \textcolor{comment}{// cycle, so it's safe to add them after clearing out the older prefinalizers.}}
\DoxyCodeLine{79   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.insert(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.end(),}
\DoxyCodeLine{80                                  new\_ordered\_pre\_finalizers.begin(),}
\DoxyCodeLine{81                                  new\_ordered\_pre\_finalizers.end());}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// CPPGC\_ALLOW\_ALLOCATIONS\_IN\_PREFINALIZERS}}
\DoxyCodeLine{83   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}} = \&\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}};}
\DoxyCodeLine{84   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}{is\_invoking\_}} = \textcolor{keyword}{false};}
\DoxyCodeLine{85   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.shrink\_to\_fit();}
\DoxyCodeLine{86 \}}

\end{DoxyCode}


References bytes\+\_\+allocated\+\_\+in\+\_\+prefinalizers, CHECK, cppgc\+::internal\+::\+Liveness\+Broker\+Factory\+::\+Create(), current\+\_\+ordered\+\_\+pre\+\_\+finalizers\+\_\+, Current\+Thread\+Is\+Creation\+Thread(), DCHECK, DCHECK\+\_\+\+EQ, heap\+\_\+, is\+\_\+invoking\+\_\+, cppgc\+::internal\+::\+Heap\+Base\+::object\+\_\+allocator(), ordered\+\_\+pre\+\_\+finalizers\+\_\+, cppgc\+::internal\+::\+Object\+Allocator\+::\+Reset\+Linear\+Allocation\+Buffers(), and cppgc\+::internal\+::\+Heap\+Base\+::stats\+\_\+collector().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_afae3d2475f42ba5826988278904b8116_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_afb41db753888a7e592e4ce2eda9bbedc}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_afb41db753888a7e592e4ce2eda9bbedc}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!IsInvokingPreFinalizers@{IsInvokingPreFinalizers}}
\index{IsInvokingPreFinalizers@{IsInvokingPreFinalizers}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{IsInvokingPreFinalizers()}{IsInvokingPreFinalizers()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Is\+Invoking\+Pre\+Finalizers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 35 of file prefinalizer-\/handler.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{35 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}{is\_invoking\_}}; \}}

\end{DoxyCode}


References is\+\_\+invoking\+\_\+.



Referenced by cppgc\+::internal\+::\+Same\+Thread\+Enabled\+Checking\+Policy\+Base\+::\+Check\+Pointer\+Impl(), and cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+GCSafe\+Point().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_afb41db753888a7e592e4ce2eda9bbedc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!NotifyAllocationInPrefinalizer@{NotifyAllocationInPrefinalizer}}
\index{NotifyAllocationInPrefinalizer@{NotifyAllocationInPrefinalizer}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{NotifyAllocationInPrefinalizer()}{NotifyAllocationInPrefinalizer()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Notify\+Allocation\+In\+Prefinalizer (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 96 of file prefinalizer-\/handler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{96                                                                     \{}
\DoxyCodeLine{97   \mbox{\hyperlink{src_2base_2logging_8h_afd957f297df7e9ee36c46185e961485f}{DCHECK\_GT}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\_allocated\_in\_prefinalizers}} + \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}},}
\DoxyCodeLine{98             \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\_allocated\_in\_prefinalizers}});}
\DoxyCodeLine{99   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}{bytes\_allocated\_in\_prefinalizers}} += \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}};}
\DoxyCodeLine{100 \}}

\end{DoxyCode}


References bytes\+\_\+allocated\+\_\+in\+\_\+prefinalizers, DCHECK\+\_\+\+GT, and size().



Referenced by cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+GCSafe\+Point().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a76eb819d95de91a3a28e042ae2af7461}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a76eb819d95de91a3a28e042ae2af7461}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!RegisterPrefinalizer@{RegisterPrefinalizer}}
\index{RegisterPrefinalizer@{RegisterPrefinalizer}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{RegisterPrefinalizer()}{RegisterPrefinalizer()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Register\+Prefinalizer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}}}]{pre\+\_\+finalizer }\end{DoxyParamCaption})}



Definition at line 37 of file prefinalizer-\/handler.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{37                                                                          \{}
\DoxyCodeLine{38   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_a571ee58f7962f1e2e9757ea751df15dd}{CurrentThreadIsCreationThread}}());}
\DoxyCodeLine{39   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.end(),}
\DoxyCodeLine{40             std::find(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.begin(),}
\DoxyCodeLine{41                       \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}{ordered\_pre\_finalizers\_}}.end(), pre\_finalizer));}
\DoxyCodeLine{42   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}}-\/>end(),}
\DoxyCodeLine{43             std::find(\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}}-\/>begin(),}
\DoxyCodeLine{44                       \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}}-\/>end(), pre\_finalizer));}
\DoxyCodeLine{45   \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}{current\_ordered\_pre\_finalizers\_}}-\/>push\_back(pre\_finalizer);}
\DoxyCodeLine{46 \}}

\end{DoxyCode}


References current\+\_\+ordered\+\_\+pre\+\_\+finalizers\+\_\+, Current\+Thread\+Is\+Creation\+Thread(), DCHECK, DCHECK\+\_\+\+EQ, and ordered\+\_\+pre\+\_\+finalizers\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1PreFinalizerHandler_a76eb819d95de91a3a28e042ae2af7461_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a399bed95e843e86dfd782ab0add1b14d}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!bytes\_allocated\_in\_prefinalizers@{bytes\_allocated\_in\_prefinalizers}}
\index{bytes\_allocated\_in\_prefinalizers@{bytes\_allocated\_in\_prefinalizers}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{bytes\_allocated\_in\_prefinalizers}{bytes\_allocated\_in\_prefinalizers}}
{\footnotesize\ttfamily size\+\_\+t cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::bytes\+\_\+allocated\+\_\+in\+\_\+prefinalizers = 0u\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 57 of file prefinalizer-\/handler.\+h.



Referenced by Extract\+Bytes\+Allocated\+In\+Prefinalizers(), Invoke\+Pre\+Finalizers(), and Notify\+Allocation\+In\+Prefinalizer().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_ac89c0e2fc0afacb80bcc12ae018d7057}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!current\_ordered\_pre\_finalizers\_@{current\_ordered\_pre\_finalizers\_}}
\index{current\_ordered\_pre\_finalizers\_@{current\_ordered\_pre\_finalizers\_}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{current\_ordered\_pre\_finalizers\_}{current\_ordered\_pre\_finalizers\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}}$>$$\ast$ cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::current\+\_\+ordered\+\_\+pre\+\_\+finalizers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 51 of file prefinalizer-\/handler.\+h.



Referenced by Invoke\+Pre\+Finalizers(), and Register\+Prefinalizer().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_a4dc0fda0f1db5e0effa1e7f8a69f3155}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!heap\_@{heap\_}}
\index{heap\_@{heap\_}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{heap\_}{heap\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase}{Heap\+Base}}\& cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::heap\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 53 of file prefinalizer-\/handler.\+h.



Referenced by Current\+Thread\+Is\+Creation\+Thread(), and Invoke\+Pre\+Finalizers().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_aa89fc4f7cb40704d0b6d5457ab828830}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!is\_invoking\_@{is\_invoking\_}}
\index{is\_invoking\_@{is\_invoking\_}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{is\_invoking\_}{is\_invoking\_}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::is\+\_\+invoking\+\_\+ = \mbox{\hyperlink{namespacecppgc_1_1internal_a2a5dad15bdcff089a6dd4f1ab48d6433}{false}}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 54 of file prefinalizer-\/handler.\+h.



Referenced by Invoke\+Pre\+Finalizers(), and Is\+Invoking\+Pre\+Finalizers().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}\label{classcppgc_1_1internal_1_1PreFinalizerHandler_aca0414df0ec774121b064fc0346287cb}} 
\index{cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}!ordered\_pre\_finalizers\_@{ordered\_pre\_finalizers\_}}
\index{ordered\_pre\_finalizers\_@{ordered\_pre\_finalizers\_}!cppgc::internal::PreFinalizerHandler@{cppgc::internal::PreFinalizerHandler}}
\doxysubsubsection{\texorpdfstring{ordered\_pre\_finalizers\_}{ordered\_pre\_finalizers\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structcppgc_1_1internal_1_1PreFinalizer}{Pre\+Finalizer}}$>$ cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::ordered\+\_\+pre\+\_\+finalizers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 50 of file prefinalizer-\/handler.\+h.



Referenced by Invoke\+Pre\+Finalizers(), and Register\+Prefinalizer().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{prefinalizer-handler_8h}{prefinalizer-\/handler.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{prefinalizer-handler_8cc}{prefinalizer-\/handler.\+cc}}\end{DoxyCompactItemize}
