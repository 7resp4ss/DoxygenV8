\hypertarget{classv8_1_1internal_1_1JSAsyncDisposableStack}{}\doxysection{v8\+::internal\+::JSAsync\+Disposable\+Stack Class Reference}
\label{classv8_1_1internal_1_1JSAsyncDisposableStack}\index{v8::internal::JSAsyncDisposableStack@{v8::internal::JSAsyncDisposableStack}}


{\ttfamily \#include $<$js-\/disposable-\/stack.\+h$>$}



Inheritance diagram for v8\+::internal\+::JSAsync\+Disposable\+Stack\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{classv8_1_1internal_1_1JSAsyncDisposableStack__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::JSAsync\+Disposable\+Stack\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{classv8_1_1internal_1_1JSAsyncDisposableStack__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1JSAsyncDisposableStack_a86198a17b857bfd32204252c71e8bf0f}{Next\+Dispose\+Async\+Iteration}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSDisposableStackBase}{JSDisposable\+Stack\+Base}} $>$ async\+\_\+disposable\+\_\+stack, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$ outer\+\_\+promise)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 102 of file js-\/disposable-\/stack.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1JSAsyncDisposableStack_a86198a17b857bfd32204252c71e8bf0f}\label{classv8_1_1internal_1_1JSAsyncDisposableStack_a86198a17b857bfd32204252c71e8bf0f}} 
\index{v8::internal::JSAsyncDisposableStack@{v8::internal::JSAsyncDisposableStack}!NextDisposeAsyncIteration@{NextDisposeAsyncIteration}}
\index{NextDisposeAsyncIteration@{NextDisposeAsyncIteration}!v8::internal::JSAsyncDisposableStack@{v8::internal::JSAsyncDisposableStack}}
\doxysubsubsection{\texorpdfstring{NextDisposeAsyncIteration()}{NextDisposeAsyncIteration()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1Maybe}{Maybe}}$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} $>$ v8\+::internal\+::\+JSAsync\+Disposable\+Stack\+::\+Next\+Dispose\+Async\+Iteration (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSDisposableStackBase}{JSDisposable\+Stack\+Base}} $>$}]{async\+\_\+disposable\+\_\+stack,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise}{JSPromise}} $>$}]{outer\+\_\+promise }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 212 of file js-\/disposable-\/stack.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{215                                            \{}
\DoxyCodeLine{216   MaybeDirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{217 }
\DoxyCodeLine{218   \textcolor{keywordtype}{bool} done;}
\DoxyCodeLine{219   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{220     done = \textcolor{keyword}{true};}
\DoxyCodeLine{221 }
\DoxyCodeLine{222     \textcolor{comment}{// 6. Let result be}}
\DoxyCodeLine{223     \textcolor{comment}{//   DisposeResources(asyncDisposableStack.[[DisposeCapability]],}}
\DoxyCodeLine{224     \textcolor{comment}{//   NormalCompletion(undefined)).}}
\DoxyCodeLine{225     \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = DisposeResources(isolate, async\_disposable\_stack,}
\DoxyCodeLine{226                               \mbox{\hyperlink{namespacev8_1_1internal_a104729b53559a949ec96aede2767a0e4aeecf10983947918a97d5b03a372ce542}{DisposableStackResourcesType::kAtLeastOneAsync}});}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     DirectHandle<Object> result\_handle;}
\DoxyCodeLine{229 }
\DoxyCodeLine{230     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.ToHandle(\&result\_handle)) \{}
\DoxyCodeLine{231       \textcolor{keywordflow}{if} (!IsTrue(*result\_handle)) \{}
\DoxyCodeLine{232         DirectHandle<Context> async\_disposable\_stack\_context =}
\DoxyCodeLine{233             isolate-\/>factory()-\/>NewBuiltinContext(}
\DoxyCodeLine{234                 isolate-\/>native\_context(),}
\DoxyCodeLine{235                 \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{236                     \mbox{\hyperlink{classv8_1_1internal_1_1JSDisposableStackBase_a1b39413e8ba6e037a29367da69717fe1}{JSDisposableStackBase::AsyncDisposableStackContextSlots}}::}
\DoxyCodeLine{237                         kLength));}
\DoxyCodeLine{238         async\_disposable\_stack\_context-\/>SetNoCell(}
\DoxyCodeLine{239             \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(JSDisposableStackBase::}
\DoxyCodeLine{240                                  \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1anonymous__namespace_02gap-resolver_8cc_03_a013cf8bece83ac1bb92ff1729616a4fca87adf1994961031a65644aa7cf62c026}{AsyncDisposableStackContextSlots::kStack}}),}
\DoxyCodeLine{241             *async\_disposable\_stack);}
\DoxyCodeLine{242         async\_disposable\_stack\_context-\/>SetNoCell(}
\DoxyCodeLine{243             \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(}
\DoxyCodeLine{244                 \mbox{\hyperlink{classv8_1_1internal_1_1JSDisposableStackBase_a1b39413e8ba6e037a29367da69717fe1}{JSDisposableStackBase::AsyncDisposableStackContextSlots}}::}
\DoxyCodeLine{245                     kOuterPromise),}
\DoxyCodeLine{246             *outer\_promise);}
\DoxyCodeLine{247 }
\DoxyCodeLine{248         DirectHandle<JSFunction> on\_fulfilled =}
\DoxyCodeLine{249             Factory::JSFunctionBuilder\{}
\DoxyCodeLine{250                 isolate,}
\DoxyCodeLine{251                 isolate-\/>factory()}
\DoxyCodeLine{252                     -\/>async\_disposable\_stack\_on\_fulfilled\_shared\_fun(),}
\DoxyCodeLine{253                 async\_disposable\_stack\_context\}}
\DoxyCodeLine{254                 .Build();}
\DoxyCodeLine{255 }
\DoxyCodeLine{256         DirectHandle<JSFunction> on\_rejected =}
\DoxyCodeLine{257             Factory::JSFunctionBuilder\{}
\DoxyCodeLine{258                 isolate,}
\DoxyCodeLine{259                 isolate-\/>factory()}
\DoxyCodeLine{260                     -\/>async\_disposable\_stack\_on\_rejected\_shared\_fun(),}
\DoxyCodeLine{261                 async\_disposable\_stack\_context\}}
\DoxyCodeLine{262                 .Build();}
\DoxyCodeLine{263 }
\DoxyCodeLine{264         DirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_ad03b241da4e98adde3145092fe54be8b}{args}}[] = \{on\_fulfilled, on\_rejected\};}
\DoxyCodeLine{265         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Execution_a7f2bf9078c580f72bb5c74e5bd2960ee}{Execution::CallBuiltin}}(isolate, isolate-\/>perform\_promise\_then(),}
\DoxyCodeLine{266                                    Cast<JSPromise>(result\_handle),}
\DoxyCodeLine{267                                    \mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(\mbox{\hyperlink{namespacev8_1_1base_ad03b241da4e98adde3145092fe54be8b}{args}}))}
\DoxyCodeLine{268                 .is\_null()) \{}
\DoxyCodeLine{269           \mbox{\hyperlink{js-disposable-stack_8cc_a7b54408239cc4c308c66f4b91d72b4a2}{CHECK\_EXCEPTION\_ON\_DISPOSAL}}(isolate, async\_disposable\_stack,}
\DoxyCodeLine{270                                       Nothing<bool>());}
\DoxyCodeLine{271           done = \textcolor{keyword}{false};}
\DoxyCodeLine{272         \}}
\DoxyCodeLine{273       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{274         \textcolor{comment}{// 8. Perform ! Call(promiseCapability.[[Resolve]], undefined, « result}}
\DoxyCodeLine{275         \textcolor{comment}{// »).}}
\DoxyCodeLine{276         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1JSPromise_ab5498a7e4026703f904ad2ab3018c250}{JSPromise::Resolve}}(outer\_promise,}
\DoxyCodeLine{277                                isolate-\/>factory()-\/>undefined\_value())}
\DoxyCodeLine{278                 .is\_null()) \{}
\DoxyCodeLine{279           \mbox{\hyperlink{js-disposable-stack_8cc_a7b54408239cc4c308c66f4b91d72b4a2}{CHECK\_EXCEPTION\_ON\_DISPOSAL}}(isolate, async\_disposable\_stack,}
\DoxyCodeLine{280                                       Nothing<bool>());}
\DoxyCodeLine{281           done = \textcolor{keyword}{false};}
\DoxyCodeLine{282         \}}
\DoxyCodeLine{283       \}}
\DoxyCodeLine{284     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{285       \textcolor{comment}{// 7. IfAbruptRejectPromise(result, promiseCapability).}}
\DoxyCodeLine{286       DirectHandle<Object> exception(isolate-\/>exception(), isolate);}
\DoxyCodeLine{287       \textcolor{keywordflow}{if} (!isolate-\/>is\_catchable\_by\_javascript(*exception)) \{}
\DoxyCodeLine{288         \textcolor{keywordflow}{return} Nothing<bool>();}
\DoxyCodeLine{289       \}}
\DoxyCodeLine{290       isolate-\/>clear\_internal\_exception();}
\DoxyCodeLine{291       isolate-\/>clear\_pending\_message();}
\DoxyCodeLine{292       \mbox{\hyperlink{classv8_1_1internal_1_1JSPromise_a708343c7989f38578d92beef9dccdda6}{JSPromise::Reject}}(outer\_promise, exception);}
\DoxyCodeLine{293     \}}
\DoxyCodeLine{294   \} \textcolor{keywordflow}{while} (!done);}
\DoxyCodeLine{295 }
\DoxyCodeLine{296   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_a41f0e280eadfba6ac9afd833fdd540cf}{Just}}(\textcolor{keyword}{true});}
\DoxyCodeLine{297 \}}

\end{DoxyCode}


References v8\+::base\+::args, v8\+::internal\+::\+Execution\+::\+Call\+Builtin(), CHECK\+\_\+\+EXCEPTION\+\_\+\+ON\+\_\+\+DISPOSAL, v8\+::internal\+::\+Isolate\+::clear\+\_\+internal\+\_\+exception(), v8\+::internal\+::\+Isolate\+::clear\+\_\+pending\+\_\+message(), v8\+::internal\+::\+Isolate\+::exception(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Isolate\+::is\+\_\+catchable\+\_\+by\+\_\+javascript(), v8\+::\+Just(), v8\+::internal\+::k\+At\+Least\+One\+Async, v8\+::internal\+::compiler\+::anonymous\+\_\+namespace\{gap-\/resolver.\+cc\}\+::k\+Stack, v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::internal\+::\+Factory\+::\+New\+Builtin\+Context(), v8\+::internal\+::\+JSPromise\+::\+Reject(), v8\+::internal\+::\+JSPromise\+::\+Resolve(), v8\+::base\+::internal\+::result, and v8\+::base\+::\+Vector\+Of().



Referenced by v8\+::internal\+::\+BUILTIN().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1JSAsyncDisposableStack_a86198a17b857bfd32204252c71e8bf0f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1JSAsyncDisposableStack_a86198a17b857bfd32204252c71e8bf0f_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{js-disposable-stack_8h}{js-\/disposable-\/stack.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/objects/\mbox{\hyperlink{js-disposable-stack_8cc}{js-\/disposable-\/stack.\+cc}}\end{DoxyCompactItemize}
