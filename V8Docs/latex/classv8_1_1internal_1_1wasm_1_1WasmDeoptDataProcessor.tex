\hypertarget{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor}{}\doxysection{v8\+::internal\+::wasm\+::Wasm\+Deopt\+Data\+Processor Class Reference}
\label{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor}\index{v8::internal::wasm::WasmDeoptDataProcessor@{v8::internal::wasm::WasmDeoptDataProcessor}}


{\ttfamily \#include $<$wasm-\/deopt-\/data.\+h$>$}



Collaboration diagram for v8\+::internal\+::wasm\+::Wasm\+Deopt\+Data\+Processor\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor_a7d3b3790fb43a62e41a692c316cc6645}{Serialize}} (\mbox{\hyperlink{classint}{int}} deopt\+\_\+exit\+\_\+start\+\_\+offset, \mbox{\hyperlink{classint}{int}} eager\+\_\+deopt\+\_\+count, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$ translation\+\_\+array, \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry}{wasm\+::\+Wasm\+Deopt\+Entry}} $>$ deopt\+\_\+entries, const \mbox{\hyperlink{classv8_1_1internal_1_1ZoneDeque}{Zone\+Deque}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DeoptimizationLiteral}{Deoptimization\+Literal}} $>$ \&deopt\+\_\+literals)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 86 of file wasm-\/deopt-\/data.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor_a7d3b3790fb43a62e41a692c316cc6645}\label{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor_a7d3b3790fb43a62e41a692c316cc6645}} 
\index{v8::internal::wasm::WasmDeoptDataProcessor@{v8::internal::wasm::WasmDeoptDataProcessor}!Serialize@{Serialize}}
\index{Serialize@{Serialize}!v8::internal::wasm::WasmDeoptDataProcessor@{v8::internal::wasm::WasmDeoptDataProcessor}}
\doxysubsubsection{\texorpdfstring{Serialize()}{Serialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector}{base\+::\+Owned\+Vector}}$<$ uint8\+\_\+t $>$ v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+Processor\+::\+Serialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classint}{int}}}]{deopt\+\_\+exit\+\_\+start\+\_\+offset,  }\item[{\mbox{\hyperlink{classint}{int}}}]{eager\+\_\+deopt\+\_\+count,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ const uint8\+\_\+t $>$}]{translation\+\_\+array,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry}{wasm\+::\+Wasm\+Deopt\+Entry}} $>$}]{deopt\+\_\+entries,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1ZoneDeque}{Zone\+Deque}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1DeoptimizationLiteral}{Deoptimization\+Literal}} $>$ \&}]{deopt\+\_\+literals }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 27 of file wasm-\/deopt-\/data.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{31                                                             \{}
\DoxyCodeLine{32   wasm::WasmDeoptData data;}
\DoxyCodeLine{33   data.entry\_count = eager\_deopt\_count;}
\DoxyCodeLine{34   data.deopt\_exit\_start\_offset = deopt\_exit\_start\_offset;}
\DoxyCodeLine{35   data.eager\_deopt\_count = eager\_deopt\_count;}
\DoxyCodeLine{36   data.deopt\_literals\_size = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(deopt\_literals.size());}
\DoxyCodeLine{37 }
\DoxyCodeLine{38   data.translation\_array\_size = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(translation\_array.size());}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{keywordtype}{size\_t} translation\_array\_byte\_size =}
\DoxyCodeLine{41       translation\_array.size() * \textcolor{keyword}{sizeof}(translation\_array[0]);}
\DoxyCodeLine{42   \textcolor{keywordtype}{size\_t} deopt\_entries\_byte\_size =}
\DoxyCodeLine{43       deopt\_entries.size() * \textcolor{keyword}{sizeof}(deopt\_entries[0]);}
\DoxyCodeLine{44   \textcolor{keywordtype}{size\_t} deopt\_literals\_byte\_size =}
\DoxyCodeLine{45       deopt\_literals.size() * \textcolor{keyword}{sizeof}(deopt\_literals[0]);}
\DoxyCodeLine{46   \textcolor{keywordtype}{size\_t} byte\_size = \textcolor{keyword}{sizeof}(data) + translation\_array\_byte\_size +}
\DoxyCodeLine{47                      deopt\_entries\_byte\_size + deopt\_literals\_byte\_size;}
\DoxyCodeLine{48   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{classv8_1_1base_1_1OwnedVector_a2661cfcee856d5f551befac70c31a730}{base::OwnedVector<uint8\_t>::New}}(byte\_size);}
\DoxyCodeLine{49   uint8\_t* result\_iter = \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.begin();}
\DoxyCodeLine{50   std::memcpy(result\_iter, \&data, \textcolor{keyword}{sizeof}(data));}
\DoxyCodeLine{51   result\_iter += \textcolor{keyword}{sizeof}(data);}
\DoxyCodeLine{52   std::memcpy(result\_iter, translation\_array.data(),}
\DoxyCodeLine{53               translation\_array\_byte\_size);}
\DoxyCodeLine{54   result\_iter += translation\_array\_byte\_size;}
\DoxyCodeLine{55   std::memcpy(result\_iter, deopt\_entries.data(), deopt\_entries\_byte\_size);}
\DoxyCodeLine{56   result\_iter += deopt\_entries\_byte\_size;}
\DoxyCodeLine{57   static\_assert(std::is\_trivially\_copyable\_v<}
\DoxyCodeLine{58                 std::remove\_reference<decltype(deopt\_literals[0])>>);}
\DoxyCodeLine{59   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& literal : deopt\_literals) \{}
\DoxyCodeLine{60     \textcolor{comment}{// We can't serialize objects. Wasm should never contain object literals as}}
\DoxyCodeLine{61     \textcolor{comment}{// it is isolate-\/independent.}}
\DoxyCodeLine{62     \mbox{\hyperlink{src_2base_2logging_8h_aa958a8a4e5dda3abaa031977268ae60e}{CHECK\_NE}}(literal.kind(), \mbox{\hyperlink{namespacev8_1_1internal_aa00f74bdb9d02a2ec50321d44f1b5cd8a11de01cf6422a18af800cdc262cf2f31}{DeoptimizationLiteralKind::kObject}});}
\DoxyCodeLine{63     std::memcpy(result\_iter, \&literal, \textcolor{keyword}{sizeof}(literal));}
\DoxyCodeLine{64     result\_iter += \textcolor{keyword}{sizeof}(literal);}
\DoxyCodeLine{65   \}}
\DoxyCodeLine{66   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(result\_iter, \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.end());}
\DoxyCodeLine{67   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{68 \}}

\end{DoxyCode}


References CHECK\+\_\+\+NE, v8\+::base\+::\+Vector$<$ T $>$\+::data(), DCHECK\+\_\+\+EQ, v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+::deopt\+\_\+exit\+\_\+start\+\_\+offset, v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+::deopt\+\_\+literals\+\_\+size, v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+::eager\+\_\+deopt\+\_\+count, v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+::entry\+\_\+count, v8\+::internal\+::k\+Object, v8\+::base\+::\+Owned\+Vector$<$ T $>$\+::\+New(), v8\+::base\+::internal\+::result, v8\+::base\+::\+Vector$<$ T $>$\+::size(), and v8\+::internal\+::wasm\+::\+Wasm\+Deopt\+Data\+::translation\+\_\+array\+\_\+size.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmDeoptDataProcessor_a7d3b3790fb43a62e41a692c316cc6645_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-deopt-data_8h}{wasm-\/deopt-\/data.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-deopt-data_8cc}{wasm-\/deopt-\/data.\+cc}}\end{DoxyCompactItemize}
