\hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03}{}\doxysection{cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.cc\} Namespace Reference}
\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03}\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}{Mark\+Range\+As\+Young}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1BasePage}{Base\+Page}} \&page, \mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}} begin, \mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}} end)
\item 
void \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb}{Add\+To\+Free\+List}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}} start, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
void \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}{Replace\+Linear\+Allocation\+Buffer}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&stats\+\_\+collector, \mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}} new\+\_\+buffer, size\+\_\+t new\+\_\+size)
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1LargePage}{Large\+Page}} $\ast$ \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2}{Try\+Allocate\+Large\+Object\+Impl}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&page\+\_\+backend, \mbox{\hyperlink{classcppgc_1_1internal_1_1LargePageSpace}{Large\+Page\+Space}} \&\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}}, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
void $\ast$ \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96}{Try\+Allocate\+Large\+Object}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&page\+\_\+backend, \mbox{\hyperlink{classcppgc_1_1internal_1_1LargePageSpace}{Large\+Page\+Space}} \&\mbox{\hyperlink{flag-definitions_8h_a1d8cf0775c94df78b63812966a84395c}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&stats\+\_\+collector, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}} gcinfo)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr \mbox{\hyperlink{structcppgc_1_1internal_1_1GCConfig}{GCConfig}} \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_aa54d82825267ea64dcb758e65a34134b}{k\+On\+Allocation\+Failure\+GCConfig}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!AddToFreeList@{AddToFreeList}}
\index{AddToFreeList@{AddToFreeList}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AddToFreeList()}{AddToFreeList()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::Add\+To\+Free\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}}}]{start,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 51 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{51                                                                        \{}
\DoxyCodeLine{52   \textcolor{comment}{// No need for SetMemoryInaccessible() as LAB memory is retrieved as free}}
\DoxyCodeLine{53   \textcolor{comment}{// inaccessible memory.}}
\DoxyCodeLine{54   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.free\_list().Add(\{start, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}\});}
\DoxyCodeLine{55   \textcolor{comment}{// Concurrent marking may be running while the LAB is set up next to a live}}
\DoxyCodeLine{56   \textcolor{comment}{// object sharing the same cell in the bitmap.}}
\DoxyCodeLine{57   NormalPage::From(BasePage::FromPayload(start))}
\DoxyCodeLine{58       -\/>object\_start\_bitmap()}
\DoxyCodeLine{59       .SetBit<AccessMode::kAtomic>(start);}
\DoxyCodeLine{60 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Normal\+Page\+::\+From(), cppgc\+::internal\+::\+Base\+Page\+::\+From\+Payload(), cppgc\+::internal\+::k\+Atomic, cppgc\+::internal\+::\+Normal\+Page\+::object\+\_\+start\+\_\+bitmap(), cppgc\+::internal\+::\+Platform\+Aware\+Object\+Start\+Bitmap\+::\+Set\+Bit(), size(), and space.



Referenced by Replace\+Linear\+Allocation\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!MarkRangeAsYoung@{MarkRangeAsYoung}}
\index{MarkRangeAsYoung@{MarkRangeAsYoung}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MarkRangeAsYoung()}{MarkRangeAsYoung()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::Mark\+Range\+As\+Young (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1BasePage}{Base\+Page}} \&}]{page,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}}}]{begin,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}}}]{end }\end{DoxyParamCaption})}



Definition at line 30 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{30                                                                   \{}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#if defined(CPPGC\_YOUNG\_GENERATION)}}
\DoxyCodeLine{32   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_ae72af9053b45630a01be9a6140820b5a}{begin}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}});}
\DoxyCodeLine{33 }
\DoxyCodeLine{34   \textcolor{keywordflow}{if} (!page.heap().generational\_gc\_supported()) \textcolor{keywordflow}{return};}
\DoxyCodeLine{35 }
\DoxyCodeLine{36   \textcolor{comment}{// Then, if the page is newly allocated, force the first and last cards to be}}
\DoxyCodeLine{37   \textcolor{comment}{// marked as young.}}
\DoxyCodeLine{38   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} new\_page =}
\DoxyCodeLine{39       (\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_ae72af9053b45630a01be9a6140820b5a}{begin}} == page.PayloadStart()) \&\& (\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}} == page.PayloadEnd());}
\DoxyCodeLine{40 }
\DoxyCodeLine{41   \textcolor{keyword}{auto}\& age\_table = \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_1_1turboshaft_a2b5e79bd829824237e784a6cde29309e}{CagedHeapLocalData::Get}}().age\_table;}
\DoxyCodeLine{42   age\_table.SetAgeForRange(CagedHeap::OffsetFromAddress(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_ae72af9053b45630a01be9a6140820b5a}{begin}}),}
\DoxyCodeLine{43                            CagedHeap::OffsetFromAddress(\mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}}),}
\DoxyCodeLine{44                            AgeTable::Age::kYoung,}
\DoxyCodeLine{45                            new\_page ? AgeTable::AdjacentCardsPolicy::kIgnore}
\DoxyCodeLine{46                                     : AgeTable::AdjacentCardsPolicy::kConsider);}
\DoxyCodeLine{47   page.set\_as\_containing\_young\_objects(\textcolor{keyword}{true});}
\DoxyCodeLine{48 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// defined(CPPGC\_YOUNG\_GENERATION)}}
\DoxyCodeLine{49 \}}

\end{DoxyCode}


References v8\+::internal\+::compiler\+::begin(), DCHECK\+\_\+\+LT, v8\+::internal\+::compiler\+::end(), cppgc\+::internal\+::\+Heap\+Base\+::generational\+\_\+gc\+\_\+supported(), v8\+::internal\+::compiler\+::turboshaft\+::\+Get(), cppgc\+::internal\+::\+Base\+Page\+::heap(), cppgc\+::internal\+::\+Caged\+Heap\+::\+Offset\+From\+Address(), cppgc\+::internal\+::\+Base\+Page\+::\+Payload\+End(), cppgc\+::internal\+::\+Base\+Page\+::\+Payload\+Start(), and cppgc\+::internal\+::\+Base\+Page\+::set\+\_\+as\+\_\+containing\+\_\+young\+\_\+objects().



Referenced by cppgc\+::internal\+::\+Object\+Allocator\+::\+Mark\+All\+Pages\+As\+Young(), Replace\+Linear\+Allocation\+Buffer(), and Try\+Allocate\+Large\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!ReplaceLinearAllocationBuffer@{ReplaceLinearAllocationBuffer}}
\index{ReplaceLinearAllocationBuffer@{ReplaceLinearAllocationBuffer}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ReplaceLinearAllocationBuffer()}{ReplaceLinearAllocationBuffer()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::Replace\+Linear\+Allocation\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&}]{stats\+\_\+collector,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}}}]{new\+\_\+buffer,  }\item[{size\+\_\+t}]{new\+\_\+size }\end{DoxyParamCaption})}



Definition at line 62 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{64                                                                         \{}
\DoxyCodeLine{65   \textcolor{keyword}{auto}\& lab = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.linear\_allocation\_buffer();}
\DoxyCodeLine{66   \textcolor{keywordflow}{if} (lab.size()) \{}
\DoxyCodeLine{67     \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a698a7228b0bbf7d762c682a8ed3ddefb}{AddToFreeList}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, lab.start(), lab.size());}
\DoxyCodeLine{68     stats\_collector.NotifyExplicitFree(lab.size());}
\DoxyCodeLine{69   \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   lab.Set(new\_buffer, new\_size);}
\DoxyCodeLine{72   \textcolor{keywordflow}{if} (new\_size) \{}
\DoxyCodeLine{73     \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(new\_buffer);}
\DoxyCodeLine{74     stats\_collector.NotifyAllocation(new\_size);}
\DoxyCodeLine{75     \textcolor{keyword}{auto}* page = NormalPage::From(BasePage::FromPayload(new\_buffer));}
\DoxyCodeLine{76     \textcolor{comment}{// Concurrent marking may be running while the LAB is set up next to a live}}
\DoxyCodeLine{77     \textcolor{comment}{// object sharing the same cell in the bitmap.}}
\DoxyCodeLine{78     page-\/>object\_start\_bitmap().ClearBit<AccessMode::kAtomic>(new\_buffer);}
\DoxyCodeLine{79     \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}{MarkRangeAsYoung}}(*page, new\_buffer, new\_buffer + new\_size);}
\DoxyCodeLine{80   \}}
\DoxyCodeLine{81 \}}

\end{DoxyCode}


References Add\+To\+Free\+List(), DCHECK\+\_\+\+NOT\+\_\+\+NULL, cppgc\+::internal\+::\+Normal\+Page\+::\+From(), cppgc\+::internal\+::\+Base\+Page\+::\+From\+Payload(), cppgc\+::internal\+::k\+Atomic, Mark\+Range\+As\+Young(), cppgc\+::internal\+::\+Stats\+Collector\+::\+Notify\+Allocation(), cppgc\+::internal\+::\+Stats\+Collector\+::\+Notify\+Explicit\+Free(), and space.



Referenced by cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+GCSafe\+Point(), cppgc\+::internal\+::\+Object\+Allocator\+::\+Reset\+Linear\+Allocation\+Buffers(), cppgc\+::internal\+::\+Object\+Allocator\+::\+Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer(), and cppgc\+::internal\+::\+Object\+Allocator\+::\+Try\+Refill\+Linear\+Allocation\+Buffer\+From\+Free\+List().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!TryAllocateLargeObject@{TryAllocateLargeObject}}
\index{TryAllocateLargeObject@{TryAllocateLargeObject}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{TryAllocateLargeObject()}{TryAllocateLargeObject()}}
{\footnotesize\ttfamily void$\ast$ cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::Try\+Allocate\+Large\+Object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&}]{page\+\_\+backend,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1LargePageSpace}{Large\+Page\+Space}} \&}]{space,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&}]{stats\+\_\+collector,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})}



Definition at line 114 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{116                                                  \{}
\DoxyCodeLine{117   LargePage* page = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2}{TryAllocateLargeObjectImpl}}(page\_backend, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{118   \textcolor{keywordflow}{if} (!page) \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.AddPage(page);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   \textcolor{keyword}{auto}* header = \textcolor{keyword}{new} (page-\/>ObjectHeader())}
\DoxyCodeLine{123       HeapObjectHeader(HeapObjectHeader::kLargeObjectSizeInHeader, gcinfo);}
\DoxyCodeLine{124 }
\DoxyCodeLine{125   stats\_collector.NotifyAllocation(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{126   \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}{MarkRangeAsYoung}}(*page, page-\/>PayloadStart(), page-\/>PayloadEnd());}
\DoxyCodeLine{127 }
\DoxyCodeLine{128   \textcolor{keywordflow}{return} header-\/>ObjectStart();}
\DoxyCodeLine{129 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Object\+Header\+::k\+Large\+Object\+Size\+In\+Header, Mark\+Range\+As\+Young(), cppgc\+::internal\+::\+Stats\+Collector\+::\+Notify\+Allocation(), cppgc\+::internal\+::\+Large\+Page\+::\+Object\+Header(), cppgc\+::internal\+::\+Large\+Page\+::\+Payload\+End(), cppgc\+::internal\+::\+Large\+Page\+::\+Payload\+Start(), size(), space, and Try\+Allocate\+Large\+Object\+Impl().



Referenced by cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!TryAllocateLargeObjectImpl@{TryAllocateLargeObjectImpl}}
\index{TryAllocateLargeObjectImpl@{TryAllocateLargeObjectImpl}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{TryAllocateLargeObjectImpl()}{TryAllocateLargeObjectImpl()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1LargePage}{Large\+Page}}$\ast$ cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::Try\+Allocate\+Large\+Object\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&}]{page\+\_\+backend,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1LargePageSpace}{Large\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 83 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{84                                                                           \{}
\DoxyCodeLine{85   LargePage* page = LargePage::TryCreate(page\_backend, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{86   \textcolor{keywordflow}{if} (page) \textcolor{keywordflow}{return} page;}
\DoxyCodeLine{87 }
\DoxyCodeLine{88   Sweeper\& sweeper = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.raw\_heap()-\/>heap()-\/>sweeper();}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{comment}{// Lazily sweep pages of this heap. This is not exhaustive to limit jank on}}
\DoxyCodeLine{91   \textcolor{comment}{// allocation.}}
\DoxyCodeLine{92   \textcolor{keywordflow}{if} (sweeper.SweepForAllocationIfRunning(}
\DoxyCodeLine{93           \&\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1df269c42efa26b4b6defb9d83f850da}{v8::base::TimeDelta::FromMicroseconds}}(500)) \&\&}
\DoxyCodeLine{94       (page = LargePage::TryCreate(page\_backend, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}))) \{}
\DoxyCodeLine{95     \textcolor{keywordflow}{return} page;}
\DoxyCodeLine{96   \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98   \textcolor{comment}{// Before finishing all sweeping, finish sweeping of a given space which is}}
\DoxyCodeLine{99   \textcolor{comment}{// cheaper.}}
\DoxyCodeLine{100   \textcolor{keywordflow}{if} (sweeper.SweepForAllocationIfRunning(\&\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}},}
\DoxyCodeLine{101                                           \mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1330af8b50fc0206f46945ea8d6922cf}{v8::base::TimeDelta::Max}}()) \&\&}
\DoxyCodeLine{102       (page = LargePage::TryCreate(page\_backend, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}))) \{}
\DoxyCodeLine{103     \textcolor{keywordflow}{return} page;}
\DoxyCodeLine{104   \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106   \textcolor{keywordflow}{if} (sweeper.FinishIfRunning() \&\&}
\DoxyCodeLine{107       (page = LargePage::TryCreate(page\_backend, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}))) \{}
\DoxyCodeLine{108     \textcolor{keywordflow}{return} page;}
\DoxyCodeLine{109   \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111   \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{112 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Sweeper\+::\+Finish\+If\+Running(), v8\+::base\+::\+Time\+Delta\+::\+From\+Microseconds(), v8\+::base\+::\+Time\+Delta\+::\+Max(), size(), space, cppgc\+::internal\+::\+Sweeper\+::\+Sweep\+For\+Allocation\+If\+Running(), and cppgc\+::internal\+::\+Large\+Page\+::\+Try\+Create().



Referenced by Try\+Allocate\+Large\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a4270f328b8336938390628aa8aa7bcf2_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_aa54d82825267ea64dcb758e65a34134b}\label{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_aa54d82825267ea64dcb758e65a34134b}} 
\index{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}!kOnAllocationFailureGCConfig@{kOnAllocationFailureGCConfig}}
\index{kOnAllocationFailureGCConfig@{kOnAllocationFailureGCConfig}!cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}@{cppgc::internal::anonymous\_namespace\lcurly{}object-\/allocator.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{kOnAllocationFailureGCConfig}{kOnAllocationFailureGCConfig}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{structcppgc_1_1internal_1_1GCConfig}{GCConfig}} cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::k\+On\+Allocation\+Failure\+GCConfig\hspace{0.3cm}{\ttfamily [constexpr]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    CollectionType::kMajor, StackState::kMayContainHeapPointers,}
\DoxyCodeLine{    GCConfig::MarkingType::kAtomic,}
\DoxyCodeLine{    GCConfig::SweepingType::kIncrementalAndConcurrent,}
\DoxyCodeLine{    GCConfig::FreeMemoryHandling::kDiscardWherePossible\}}

\end{DoxyCode}


Definition at line 167 of file object-\/allocator.\+cc.



Referenced by cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+Impl().

