\hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator}{}\doxysection{v8\+::internal\+::wasm\+::Wasm\+Code\+Allocator Class Reference}
\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator}\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}


{\ttfamily \#include $<$wasm-\/code-\/manager.\+h$>$}



Collaboration diagram for v8\+::internal\+::wasm\+::Wasm\+Code\+Allocator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aa289065d9ae1bb0c582cbbc494d37bdb}{Wasm\+Code\+Allocator}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $>$ async\+\_\+counters)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9abc070754afe49eaea6f0d31a55da49}{$\sim$\+Wasm\+Code\+Allocator}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aac5c374b4b033bd08bb50481fda354db}{Init}} (\mbox{\hyperlink{classv8_1_1internal_1_1VirtualMemory}{Virtual\+Memory}} code\+\_\+space)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009}{Initialize\+Code\+Range}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$native\+\_\+module, \mbox{\hyperlink{classv8_1_1base_1_1AddressRegion}{base\+::\+Address\+Region}} region)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9f5f12643315075f0a553f61c992fdb1}{committed\+\_\+code\+\_\+space}} () const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac228b5f49cf9bad916c9226c6e48e5a2}{generated\+\_\+code\+\_\+size}} () const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a3a969b7f9241a75ec3b51dd31aacf3ad}{freed\+\_\+code\+\_\+size}} () const
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1aa6c58339ee0dc3f42716472fc79fc8}{Allocate\+For\+Code}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae4803a09e4d6892714a7fd22fe31446e}{Allocate\+For\+Wrapper}} (\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}{Allocate\+For\+Code\+In\+Region}} (\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$, \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classv8_1_1base_1_1AddressRegion}{base\+::\+Address\+Region}})
\item 
\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae6d33802bb8ba17667cb1ae5b32e1aae}{Free\+Code}} (\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$const $>$)
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a5d094d325d0686a0da62db1dd40c2688}{Get\+Num\+Code\+Spaces}} () const
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_acf9a1aee3d685250b3400bae086d7876}{counters}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool}{Disjoint\+Allocation\+Pool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\+\_\+code\+\_\+space\+\_\+}}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool}{Disjoint\+Allocation\+Pool}} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac2a529eb2d65d067fea506c7f10eb11d}{freed\+\_\+code\+\_\+space\+\_\+}}
\item 
std\+::vector$<$ \mbox{\hyperlink{classv8_1_1internal_1_1VirtualMemory}{Virtual\+Memory}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\+\_\+code\+\_\+space\+\_\+}}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}{committed\+\_\+code\+\_\+space\+\_\+}} \{0\}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a2aacac2f51bed124e8a0a167874cb698}{generated\+\_\+code\+\_\+size\+\_\+}} \{0\}
\item 
std\+::atomic$<$ \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a761bcecaa44aafed04cd2b97cdf26c11}{freed\+\_\+code\+\_\+size\+\_\+}} \{0\}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\+\_\+counters\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 536 of file wasm-\/code-\/manager.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aa289065d9ae1bb0c582cbbc494d37bdb}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aa289065d9ae1bb0c582cbbc494d37bdb}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!WasmCodeAllocator@{WasmCodeAllocator}}
\index{WasmCodeAllocator@{WasmCodeAllocator}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{WasmCodeAllocator()}{WasmCodeAllocator()}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Wasm\+Code\+Allocator (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}} $>$}]{async\+\_\+counters }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 635 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{636     : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\_counters\_}}(std::move(async\_counters)) \{}
\DoxyCodeLine{637   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.reserve(4);}
\DoxyCodeLine{638 \}}

\end{DoxyCode}


References owned\+\_\+code\+\_\+space\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9abc070754afe49eaea6f0d31a55da49}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9abc070754afe49eaea6f0d31a55da49}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!````~WasmCodeAllocator@{$\sim$WasmCodeAllocator}}
\index{````~WasmCodeAllocator@{$\sim$WasmCodeAllocator}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{$\sim$WasmCodeAllocator()}{~WasmCodeAllocator()}}
{\footnotesize\ttfamily v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::$\sim$\+Wasm\+Code\+Allocator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 640 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{640                                       \{}
\DoxyCodeLine{641   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeManager_a27ace0686f32545957a6b0948813db9a}{FreeNativeModule}}(\mbox{\hyperlink{namespacev8_1_1base_a5bfc65f27076e49eb7752a4fb4d45acb}{base::VectorOf}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}),}
\DoxyCodeLine{642                                          \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9f5f12643315075f0a553f61c992fdb1}{committed\_code\_space}}());}
\DoxyCodeLine{643 \}}

\end{DoxyCode}


References committed\+\_\+code\+\_\+space(), v8\+::internal\+::wasm\+::\+Wasm\+Code\+Manager\+::\+Free\+Native\+Module(), v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), owned\+\_\+code\+\_\+space\+\_\+, and v8\+::base\+::\+Vector\+Of().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9abc070754afe49eaea6f0d31a55da49_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1aa6c58339ee0dc3f42716472fc79fc8}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1aa6c58339ee0dc3f42716472fc79fc8}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!AllocateForCode@{AllocateForCode}}
\index{AllocateForCode@{AllocateForCode}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateForCode()}{AllocateForCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Allocate\+For\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{size }\end{DoxyParamCaption})}



Definition at line 824 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{825                                               \{}
\DoxyCodeLine{826   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}{AllocateForCodeInRegion}}(native\_module, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a8461a4bc3623a7968bca9f25f17474f3}{kUnrestrictedRegion}});}
\DoxyCodeLine{827 \}}

\end{DoxyCode}


References Allocate\+For\+Code\+In\+Region(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::k\+Unrestricted\+Region, and size().



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Add\+Code(), v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Add\+Code\+For\+Testing(), v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Add\+Compiled\+Code(), and v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Allocate\+For\+Deserialized\+Code().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1aa6c58339ee0dc3f42716472fc79fc8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1aa6c58339ee0dc3f42716472fc79fc8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!AllocateForCodeInRegion@{AllocateForCodeInRegion}}
\index{AllocateForCodeInRegion@{AllocateForCodeInRegion}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateForCodeInRegion()}{AllocateForCodeInRegion()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Allocate\+For\+Code\+In\+Region (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{size,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1AddressRegion}{base\+::\+Address\+Region}}}]{region }\end{DoxyParamCaption})}



Definition at line 834 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{835                                                                         \{}
\DoxyCodeLine{836   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{837   \textcolor{keyword}{auto}* code\_manager = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}();}
\DoxyCodeLine{838   \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = RoundUp<kCodeAlignment>(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{839   base::AddressRegion code\_space =}
\DoxyCodeLine{840       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_aaae1e5e18b6363b94f228abe6521dd3b}{AllocateInRegion}}(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, region);}
\DoxyCodeLine{841   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(code\_space.is\_empty())) \{}
\DoxyCodeLine{842     \textcolor{comment}{// Only allocations without a specific region are allowed to fail. Otherwise}}
\DoxyCodeLine{843     \textcolor{comment}{// the region must have been allocated big enough to hold all initial}}
\DoxyCodeLine{844     \textcolor{comment}{// allocations (jump tables etc).}}
\DoxyCodeLine{845     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a8461a4bc3623a7968bca9f25f17474f3}{kUnrestrictedRegion}}, region);}
\DoxyCodeLine{846 }
\DoxyCodeLine{847     \textcolor{keywordtype}{size\_t} total\_reserved = 0;}
\DoxyCodeLine{848     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& vmem : \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}) total\_reserved += vmem.size();}
\DoxyCodeLine{849     \textcolor{keywordtype}{size\_t} reserve\_size =}
\DoxyCodeLine{850         native\_module}
\DoxyCodeLine{851             ? \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_af740a9a06db337429beba5125b64f657}{ReservationSizeForWasmCode}}(}
\DoxyCodeLine{852                   \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, native\_module-\/>module()-\/>num\_declared\_functions,}
\DoxyCodeLine{853                   total\_reserved)}
\DoxyCodeLine{854             : \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a4a8acae24d59564ce8ce9890d59852ee}{ReservationSizeForWrappers}}(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, total\_reserved);}
\DoxyCodeLine{855     \textcolor{keywordflow}{if} (reserve\_size < \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}) \{}
\DoxyCodeLine{856       \textcolor{keyword}{auto} oom\_detail = \mbox{\hyperlink{namespacev8_1_1base_a8a96976677371a5201af88b56be08915}{base::FormattedString}}\{\}}
\DoxyCodeLine{857                         << \textcolor{stringliteral}{"{}cannot reserve space for "{}} << \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}}
\DoxyCodeLine{858                         << \textcolor{stringliteral}{"{}bytes of code (maximum reservation size is "{}}}
\DoxyCodeLine{859                         << reserve\_size << \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{860       \mbox{\hyperlink{classv8_1_1internal_1_1V8_a977b087d4ee58955efe72b33136a4e94}{V8::FatalProcessOutOfMemory}}(\textcolor{keyword}{nullptr}, \textcolor{stringliteral}{"{}Grow wasm code space"{}},}
\DoxyCodeLine{861                                   oom\_detail.PrintToArray().data());}
\DoxyCodeLine{862     \}}
\DoxyCodeLine{863     VirtualMemory new\_mem = code\_manager-\/>TryAllocate(reserve\_size);}
\DoxyCodeLine{864     \textcolor{keywordflow}{if} (!new\_mem.IsReserved()) \{}
\DoxyCodeLine{865       \textcolor{keyword}{auto} oom\_detail = \mbox{\hyperlink{namespacev8_1_1base_a8a96976677371a5201af88b56be08915}{base::FormattedString}}\{\}}
\DoxyCodeLine{866                         << \textcolor{stringliteral}{"{}cannot allocate more code space ("{}} << reserve\_size}
\DoxyCodeLine{867                         << \textcolor{stringliteral}{"{} bytes, currently "{}} << total\_reserved << \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{868       \mbox{\hyperlink{classv8_1_1internal_1_1V8_a977b087d4ee58955efe72b33136a4e94}{V8::FatalProcessOutOfMemory}}(\textcolor{keyword}{nullptr}, \textcolor{stringliteral}{"{}Grow wasm code space"{}},}
\DoxyCodeLine{869                                   oom\_detail.PrintToArray().data());}
\DoxyCodeLine{870       \mbox{\hyperlink{namespacev8_1_1internal_acdec713c25068019f935e35976f5b666}{UNREACHABLE}}();}
\DoxyCodeLine{871     \}}
\DoxyCodeLine{872 }
\DoxyCodeLine{873     base::AddressRegion new\_region = new\_mem.region();}
\DoxyCodeLine{874     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_afcf7458ff374176005a20707ab0fa556}{Merge}}(new\_region);}
\DoxyCodeLine{875     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.emplace\_back(std::move(new\_mem));}
\DoxyCodeLine{876     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009}{InitializeCodeRange}}(native\_module, new\_region);}
\DoxyCodeLine{877     \textcolor{keywordflow}{if} (native\_module) \{}
\DoxyCodeLine{878       code\_manager-\/>AssignRange(new\_region, native\_module);}
\DoxyCodeLine{879       native\_module-\/>AddCodeSpaceLocked(new\_region);}
\DoxyCodeLine{880 }
\DoxyCodeLine{881       \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\_counters\_}}-\/>wasm\_module\_num\_code\_spaces()-\/>AddSample(}
\DoxyCodeLine{882           \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.size()));}
\DoxyCodeLine{883     \}}
\DoxyCodeLine{884 }
\DoxyCodeLine{885     code\_space = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_a5a78c9832c8962fdc94b954e5b0adb65}{Allocate}}(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{886     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!code\_space.is\_empty());}
\DoxyCodeLine{887   \}}
\DoxyCodeLine{888   \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} commit\_page\_size = \mbox{\hyperlink{namespacev8_1_1internal_a6a5f128ae031000011e13ca7534dfc91}{CommitPageSize}}();}
\DoxyCodeLine{889   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} commit\_start = \mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(code\_space.begin(), commit\_page\_size);}
\DoxyCodeLine{890   \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} commit\_end = \mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(code\_space.end(), commit\_page\_size);}
\DoxyCodeLine{891   \textcolor{comment}{// \{commit\_start\} will be either code\_space.start or the start of the next}}
\DoxyCodeLine{892   \textcolor{comment}{// page. \{commit\_end\} will be the start of the page after the one in which}}
\DoxyCodeLine{893   \textcolor{comment}{// the allocation ends.}}
\DoxyCodeLine{894   \textcolor{comment}{// We start from an aligned start, and we know we allocated vmem in}}
\DoxyCodeLine{895   \textcolor{comment}{// page multiples.}}
\DoxyCodeLine{896   \textcolor{comment}{// We just need to commit what's not committed. The page in which we}}
\DoxyCodeLine{897   \textcolor{comment}{// start is already committed (or we start at the beginning of a page).}}
\DoxyCodeLine{898   \textcolor{comment}{// The end needs to be committed all through the end of the page.}}
\DoxyCodeLine{899   \textcolor{keywordflow}{if} (commit\_start < commit\_end) \{}
\DoxyCodeLine{900     \textcolor{keywordflow}{for} (base::AddressRegion split\_range : \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a6b9409414ed9e23ba58f7fd48c6f7937}{SplitRangeByReservationsIfNeeded}}(}
\DoxyCodeLine{901              \{commit\_start, commit\_end -\/ commit\_start\}, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}})) \{}
\DoxyCodeLine{902       code\_manager-\/>Commit(split\_range);}
\DoxyCodeLine{903     \}}
\DoxyCodeLine{904     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}{committed\_code\_space\_}}.fetch\_add(commit\_end -\/ commit\_start);}
\DoxyCodeLine{905     \textcolor{comment}{// Committed code cannot grow bigger than maximum code space size.}}
\DoxyCodeLine{906     \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}{committed\_code\_space\_}}.load(),}
\DoxyCodeLine{907               \mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.wasm\_max\_committed\_code\_mb * \mbox{\hyperlink{namespacev8_1_1internal_af46551c5713d2a3a1be4dca973e521e0}{MB}});}
\DoxyCodeLine{908   \}}
\DoxyCodeLine{909   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{src_2base_2macros_8h_ab7a19c1f785f31f2b190afc19875368a}{IsAligned}}(code\_space.begin(), \mbox{\hyperlink{namespacev8_1_1internal_a52434390901f205f6bdb0402a183aef3}{kCodeAlignment}}));}
\DoxyCodeLine{910   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a2aacac2f51bed124e8a0a167874cb698}{generated\_code\_size\_}}.fetch\_add(code\_space.size(), std::memory\_order\_relaxed);}
\DoxyCodeLine{911 }
\DoxyCodeLine{912   \mbox{\hyperlink{wasm-code-manager_8cc_a999acc4125a715214037c81dd456611d}{TRACE\_HEAP}}(\textcolor{stringliteral}{"{}Code alloc for \%p: 0x\%"{}} PRIxPTR \textcolor{stringliteral}{"{},+\%zu\(\backslash\)n"{}}, \textcolor{keyword}{this},}
\DoxyCodeLine{913              code\_space.begin(), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{914   \textcolor{keywordflow}{return} \{\textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(code\_space.begin()), code\_space.size()\};}
\DoxyCodeLine{915 \}}

\end{DoxyCode}


References v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Add\+Code\+Space\+Locked(), v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Allocate(), v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Allocate\+In\+Region(), async\+\_\+counters\+\_\+, v8\+::base\+::\+Address\+Region\+::begin(), CHECK, CHECK\+\_\+\+EQ, v8\+::internal\+::\+Commit\+Page\+Size(), committed\+\_\+code\+\_\+space\+\_\+, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+LE, DCHECK\+\_\+\+LT, v8\+::base\+::\+Address\+Region\+::end(), v8\+::internal\+::\+V8\+::\+Fatal\+Process\+Out\+Of\+Memory(), free\+\_\+code\+\_\+space\+\_\+, generated\+\_\+code\+\_\+size\+\_\+, v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), Initialize\+Code\+Range(), v8\+::base\+::\+Address\+Region\+::is\+\_\+empty(), Is\+Aligned(), v8\+::internal\+::\+Virtual\+Memory\+::\+Is\+Reserved(), v8\+::internal\+::k\+Code\+Alignment, v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::k\+Unrestricted\+Region, v8\+::internal\+::\+MB, v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Merge(), v8\+::internal\+::wasm\+::\+Native\+Module\+::module(), v8\+::internal\+::wasm\+::\+Wasm\+Module\+::num\+\_\+declared\+\_\+functions, owned\+\_\+code\+\_\+space\+\_\+, v8\+::internal\+::\+Virtual\+Memory\+::region(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::\+Reservation\+Size\+For\+Wasm\+Code(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::\+Reservation\+Size\+For\+Wrappers(), Round\+Up(), v8\+::base\+::\+Address\+Region\+::size(), size(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::\+Split\+Range\+By\+Reservations\+If\+Needed(), TRACE\+\_\+\+HEAP, v8\+::internal\+::\+UNREACHABLE(), v8\+::internal\+::v8\+\_\+flags, and V8\+\_\+\+UNLIKELY.



Referenced by Allocate\+For\+Code(), Allocate\+For\+Wrapper(), v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Create\+Empty\+Jump\+Table\+In\+Region\+Locked(), and Initialize\+Code\+Range().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae4803a09e4d6892714a7fd22fe31446e}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae4803a09e4d6892714a7fd22fe31446e}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!AllocateForWrapper@{AllocateForWrapper}}
\index{AllocateForWrapper@{AllocateForWrapper}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateForWrapper()}{AllocateForWrapper()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ uint8\+\_\+t $>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Allocate\+For\+Wrapper (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}}]{size }\end{DoxyParamCaption})}



Definition at line 829 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{829                                                                      \{}
\DoxyCodeLine{830   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}{AllocateForCodeInRegion}}(\textcolor{keyword}{nullptr}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a8461a4bc3623a7968bca9f25f17474f3}{kUnrestrictedRegion}});}
\DoxyCodeLine{831 \}}

\end{DoxyCode}


References Allocate\+For\+Code\+In\+Region(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::k\+Unrestricted\+Region, and size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae4803a09e4d6892714a7fd22fe31446e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9f5f12643315075f0a553f61c992fdb1}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9f5f12643315075f0a553f61c992fdb1}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!committed\_code\_space@{committed\_code\_space}}
\index{committed\_code\_space@{committed\_code\_space}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{committed\_code\_space()}{committed\_code\_space()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::committed\+\_\+code\+\_\+space (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 548 of file wasm-\/code-\/manager.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{548                                       \{}
\DoxyCodeLine{549     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}{committed\_code\_space\_}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{550   \}}

\end{DoxyCode}


References committed\+\_\+code\+\_\+space\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Sample\+Code\+Size(), and $\sim$\+Wasm\+Code\+Allocator().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a9f5f12643315075f0a553f61c992fdb1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_acf9a1aee3d685250b3400bae086d7876}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_acf9a1aee3d685250b3400bae086d7876}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!counters@{counters}}
\index{counters@{counters}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{counters()}{counters()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}}$\ast$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::counters (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 578 of file wasm-\/code-\/manager.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{578 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\_counters\_}}.get(); \}}

\end{DoxyCode}


References async\+\_\+counters\+\_\+.

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae6d33802bb8ba17667cb1ae5b32e1aae}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae6d33802bb8ba17667cb1ae5b32e1aae}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!FreeCode@{FreeCode}}
\index{FreeCode@{FreeCode}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{FreeCode()}{FreeCode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Free\+Code (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1Vector}{base\+::\+Vector}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCode}{Wasm\+Code}} $\ast$const $>$}]{codes }\end{DoxyParamCaption})}



Definition at line 917 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{917                                                                   \{}
\DoxyCodeLine{918   \textcolor{comment}{// Zap code area and collect freed code regions.}}
\DoxyCodeLine{919   DisjointAllocationPool freed\_regions;}
\DoxyCodeLine{920   \textcolor{keywordtype}{size\_t} code\_size = 0;}
\DoxyCodeLine{921   \textcolor{keywordflow}{for} (WasmCode* \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}} : codes) \{}
\DoxyCodeLine{922     code\_size += \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instructions().size();}
\DoxyCodeLine{923     freed\_regions.Merge(base::AddressRegion\{\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instruction\_start(),}
\DoxyCodeLine{924                                             \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instructions().size()\});}
\DoxyCodeLine{925     \mbox{\hyperlink{classv8_1_1internal_1_1ThreadIsolation_ae13414c0ae7d8ac16347aa93bf7b5771}{ThreadIsolation::UnregisterWasmAllocation}}(\mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instruction\_start(),}
\DoxyCodeLine{926                                               \mbox{\hyperlink{flag-definitions_8h_ae0e79c88adf5166f9befeb542c2acd8f}{code}}-\/>instructions().size());}
\DoxyCodeLine{927   \}}
\DoxyCodeLine{928   \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a761bcecaa44aafed04cd2b97cdf26c11}{freed\_code\_size\_}}.fetch\_add(code\_size);}
\DoxyCodeLine{929 }
\DoxyCodeLine{930   \textcolor{comment}{// Merge \{freed\_regions\} into \{freed\_code\_space\_\} and put all ranges of full}}
\DoxyCodeLine{931   \textcolor{comment}{// pages to decommit into \{regions\_to\_decommit\} (decommitting is expensive,}}
\DoxyCodeLine{932   \textcolor{comment}{// so try to merge regions before decommitting).}}
\DoxyCodeLine{933   DisjointAllocationPool regions\_to\_decommit;}
\DoxyCodeLine{934   \textcolor{keywordtype}{size\_t} commit\_page\_size = \mbox{\hyperlink{namespacev8_1_1internal_a6a5f128ae031000011e13ca7534dfc91}{CommitPageSize}}();}
\DoxyCodeLine{935   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} region : freed\_regions.regions()) \{}
\DoxyCodeLine{936     \textcolor{keyword}{auto} merged\_region = \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac2a529eb2d65d067fea506c7f10eb11d}{freed\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_afcf7458ff374176005a20707ab0fa556}{Merge}}(region);}
\DoxyCodeLine{937     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} discard\_start =}
\DoxyCodeLine{938         std::max(\mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(merged\_region.begin(), commit\_page\_size),}
\DoxyCodeLine{939                  \mbox{\hyperlink{src_2base_2macros_8h_aa0de4a420e74c8df8076fc2aaf4af27a}{RoundDown}}(region.begin(), commit\_page\_size));}
\DoxyCodeLine{940     \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}} discard\_end =}
\DoxyCodeLine{941         std::min(\mbox{\hyperlink{src_2base_2macros_8h_aa0de4a420e74c8df8076fc2aaf4af27a}{RoundDown}}(merged\_region.end(), commit\_page\_size),}
\DoxyCodeLine{942                  \mbox{\hyperlink{src_2base_2macros_8h_a5113f5db9eec9c30ecea57b8d4175f2d}{RoundUp}}(region.end(), commit\_page\_size));}
\DoxyCodeLine{943     \textcolor{keywordflow}{if} (discard\_start >= discard\_end) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{944     regions\_to\_decommit.Merge(\{discard\_start, discard\_end -\/ discard\_start\});}
\DoxyCodeLine{945   \}}
\DoxyCodeLine{946 }
\DoxyCodeLine{947   \textcolor{keyword}{auto}* code\_manager = \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_a55a717894f5d005ae86062dd4647a3b2}{GetWasmCodeManager}}();}
\DoxyCodeLine{948   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} region : regions\_to\_decommit.regions()) \{}
\DoxyCodeLine{949     [[maybe\_unused]] \textcolor{keywordtype}{size\_t} old\_committed =}
\DoxyCodeLine{950         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}{committed\_code\_space\_}}.fetch\_sub(region.size());}
\DoxyCodeLine{951     \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(old\_committed, region.size());}
\DoxyCodeLine{952     \textcolor{keywordflow}{for} (base::AddressRegion split\_range :}
\DoxyCodeLine{953          \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_1_1anonymous__namespace_02wasm-code-manager_8cc_03_a6b9409414ed9e23ba58f7fd48c6f7937}{SplitRangeByReservationsIfNeeded}}(region, \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}})) \{}
\DoxyCodeLine{954       code\_manager-\/>Decommit(split\_range);}
\DoxyCodeLine{955     \}}
\DoxyCodeLine{956   \}}
\DoxyCodeLine{957 \}}

\end{DoxyCode}


References code, v8\+::internal\+::\+Commit\+Page\+Size(), committed\+\_\+code\+\_\+space\+\_\+, DCHECK\+\_\+\+GE, freed\+\_\+code\+\_\+size\+\_\+, freed\+\_\+code\+\_\+space\+\_\+, v8\+::internal\+::wasm\+::\+Get\+Wasm\+Code\+Manager(), v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Merge(), owned\+\_\+code\+\_\+space\+\_\+, v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::regions(), Round\+Down(), Round\+Up(), v8\+::internal\+::wasm\+::anonymous\+\_\+namespace\{wasm-\/code-\/manager.\+cc\}\+::\+Split\+Range\+By\+Reservations\+If\+Needed(), and v8\+::internal\+::\+Thread\+Isolation\+::\+Unregister\+Wasm\+Allocation().



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Free\+Code().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae6d33802bb8ba17667cb1ae5b32e1aae_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ae6d33802bb8ba17667cb1ae5b32e1aae_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a3a969b7f9241a75ec3b51dd31aacf3ad}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a3a969b7f9241a75ec3b51dd31aacf3ad}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!freed\_code\_size@{freed\_code\_size}}
\index{freed\_code\_size@{freed\_code\_size}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{freed\_code\_size()}{freed\_code\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::freed\+\_\+code\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 554 of file wasm-\/code-\/manager.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{554                                  \{}
\DoxyCodeLine{555     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a761bcecaa44aafed04cd2b97cdf26c11}{freed\_code\_size\_}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{556   \}}

\end{DoxyCode}


References freed\+\_\+code\+\_\+size\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Sample\+Code\+Size().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a3a969b7f9241a75ec3b51dd31aacf3ad_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac228b5f49cf9bad916c9226c6e48e5a2}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac228b5f49cf9bad916c9226c6e48e5a2}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!generated\_code\_size@{generated\_code\_size}}
\index{generated\_code\_size@{generated\_code\_size}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{generated\_code\_size()}{generated\_code\_size()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::generated\+\_\+code\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 551 of file wasm-\/code-\/manager.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{551                                      \{}
\DoxyCodeLine{552     \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a2aacac2f51bed124e8a0a167874cb698}{generated\_code\_size\_}}.load(std::memory\_order\_acquire);}
\DoxyCodeLine{553   \}}

\end{DoxyCode}


References generated\+\_\+code\+\_\+size\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Sample\+Code\+Size().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac228b5f49cf9bad916c9226c6e48e5a2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a5d094d325d0686a0da62db1dd40c2688}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a5d094d325d0686a0da62db1dd40c2688}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!GetNumCodeSpaces@{GetNumCodeSpaces}}
\index{GetNumCodeSpaces@{GetNumCodeSpaces}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{GetNumCodeSpaces()}{GetNumCodeSpaces()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Get\+Num\+Code\+Spaces (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 959 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{959                                                  \{}
\DoxyCodeLine{960   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.size();}
\DoxyCodeLine{961 \}}

\end{DoxyCode}


References owned\+\_\+code\+\_\+space\+\_\+.



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Get\+Number\+Of\+Code\+Spaces\+For\+Testing().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a5d094d325d0686a0da62db1dd40c2688_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aac5c374b4b033bd08bb50481fda354db}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aac5c374b4b033bd08bb50481fda354db}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!Init@{Init}}
\index{Init@{Init}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1VirtualMemory}{Virtual\+Memory}}}]{code\+\_\+space }\end{DoxyParamCaption})}



Definition at line 645 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{645                                                      \{}
\DoxyCodeLine{646   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.empty());}
\DoxyCodeLine{647   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_ae1c8c42c6b46181491ce58c3680e04a3}{IsEmpty}}());}
\DoxyCodeLine{648   \textcolor{keywordflow}{if} (code\_space.IsReserved()) \{}
\DoxyCodeLine{649     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}{free\_code\_space\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_afcf7458ff374176005a20707ab0fa556}{Merge}}(code\_space.region());}
\DoxyCodeLine{650     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}{owned\_code\_space\_}}.emplace\_back(std::move(code\_space));}
\DoxyCodeLine{651     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\_counters\_}}-\/>wasm\_module\_num\_code\_spaces()-\/>AddSample(1);}
\DoxyCodeLine{652   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{653     \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}{async\_counters\_}}-\/>wasm\_module\_num\_code\_spaces()-\/>AddSample(0);}
\DoxyCodeLine{654   \}}
\DoxyCodeLine{655 \}}

\end{DoxyCode}


References async\+\_\+counters\+\_\+, v8\+::internal\+::\+DCHECK(), free\+\_\+code\+\_\+space\+\_\+, v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Is\+Empty(), v8\+::internal\+::\+Virtual\+Memory\+::\+Is\+Reserved(), v8\+::internal\+::wasm\+::\+Disjoint\+Allocation\+Pool\+::\+Merge(), owned\+\_\+code\+\_\+space\+\_\+, and v8\+::internal\+::\+Virtual\+Memory\+::region().



Referenced by v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Native\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aac5c374b4b033bd08bb50481fda354db_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_aac5c374b4b033bd08bb50481fda354db_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!InitializeCodeRange@{InitializeCodeRange}}
\index{InitializeCodeRange@{InitializeCodeRange}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{InitializeCodeRange()}{InitializeCodeRange()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_ac81d27d6edb00aeed62a3e4745b8cba0}{void}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::\+Initialize\+Code\+Range (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1NativeModule}{Native\+Module}} $\ast$}]{native\+\_\+module,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1AddressRegion}{base\+::\+Address\+Region}}}]{region }\end{DoxyParamCaption})}



Definition at line 804 of file wasm-\/code-\/manager.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{805                                                                       \{}
\DoxyCodeLine{806 \textcolor{preprocessor}{\#if defined(V8\_OS\_WIN64)}}
\DoxyCodeLine{807   \textcolor{comment}{// On some platforms, specifically Win64, we need to reserve some pages at}}
\DoxyCodeLine{808   \textcolor{comment}{// the beginning of an executable space.}}
\DoxyCodeLine{809   \textcolor{comment}{// See src/heap/spaces.cc, MemoryAllocator::InitializeCodePageAllocator() and}}
\DoxyCodeLine{810   \textcolor{comment}{// https://cs.chromium.org/chromium/src/components/crash/content/app/crashpad\_win.cc?rcl=fd680447881449fba2edcf0589320e7253719212\&l=204}}
\DoxyCodeLine{811   \textcolor{comment}{// for details.}}
\DoxyCodeLine{812   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1win64__unwindinfo_a2af86e498cb6c3f31bc898c6b40d287e}{WasmCodeManager::CanRegisterUnwindInfoForNonABICompliantCodeRange}}()) \{}
\DoxyCodeLine{813     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = \mbox{\hyperlink{classv8_1_1internal_1_1Heap_a163e8ada76f0d7319bf51a7fefc33074}{Heap::GetCodeRangeReservedAreaSize}}();}
\DoxyCodeLine{814     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{815     base::Vector<uint8\_t> padding =}
\DoxyCodeLine{816         \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a24e7306c031d78f7744ca33ba091e0d9}{AllocateForCodeInRegion}}(native\_module, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, region);}
\DoxyCodeLine{817     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_1_1wasm_adcd4ca657f5fbce4e3e61f860761470a}{Address}}\textcolor{keyword}{>}(padding.begin()), region.begin());}
\DoxyCodeLine{818     \mbox{\hyperlink{namespacev8_1_1internal_1_1win64__unwindinfo_a2409db5c20b55125a1f38d2eecf2341b}{win64\_unwindinfo::RegisterNonABICompliantCodeRange}}(}
\DoxyCodeLine{819         \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(region.begin()), region.size());}
\DoxyCodeLine{820   \}}
\DoxyCodeLine{821 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_OS\_WIN64}}
\DoxyCodeLine{822 \}}

\end{DoxyCode}


References Allocate\+For\+Code\+In\+Region(), v8\+::base\+::\+Address\+Region\+::begin(), v8\+::base\+::\+Vector$<$ T $>$\+::begin(), v8\+::internal\+::win64\+\_\+unwindinfo\+::\+Can\+Register\+Unwind\+Info\+For\+Non\+ABICompliant\+Code\+Range(), CHECK\+\_\+\+EQ, DCHECK\+\_\+\+LT, v8\+::internal\+::\+Heap\+::\+Get\+Code\+Range\+Reserved\+Area\+Size(), v8\+::internal\+::win64\+\_\+unwindinfo\+::\+Register\+Non\+ABICompliant\+Code\+Range(), v8\+::base\+::\+Address\+Region\+::size(), and size().



Referenced by Allocate\+For\+Code\+In\+Region(), and v8\+::internal\+::wasm\+::\+Native\+Module\+::\+Native\+Module().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_af2b5295be5ab5f4b6371ab8dce603009_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ab0e75298547c6a5e80fe8cd1e25a1742}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!async\_counters\_@{async\_counters\_}}
\index{async\_counters\_@{async\_counters\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{async\_counters\_}{async\_counters\_}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1internal_1_1Counters}{Counters}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::async\+\_\+counters\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 600 of file wasm-\/code-\/manager.\+h.



Referenced by Allocate\+For\+Code\+In\+Region(), counters(), and Init().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a33d82e350396396c61facd7fec7180fd}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!committed\_code\_space\_@{committed\_code\_space\_}}
\index{committed\_code\_space\_@{committed\_code\_space\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{committed\_code\_space\_}{committed\_code\_space\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::committed\+\_\+code\+\_\+space\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 596 of file wasm-\/code-\/manager.\+h.



Referenced by Allocate\+For\+Code\+In\+Region(), committed\+\_\+code\+\_\+space(), and Free\+Code().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a1f54429c1b62a241eeb0426458b7d388}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!free\_code\_space\_@{free\_code\_space\_}}
\index{free\_code\_space\_@{free\_code\_space\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{free\_code\_space\_}{free\_code\_space\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool}{Disjoint\+Allocation\+Pool}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::free\+\_\+code\+\_\+space\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 586 of file wasm-\/code-\/manager.\+h.



Referenced by Allocate\+For\+Code\+In\+Region(), and Init().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a761bcecaa44aafed04cd2b97cdf26c11}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a761bcecaa44aafed04cd2b97cdf26c11}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!freed\_code\_size\_@{freed\_code\_size\_}}
\index{freed\_code\_size\_@{freed\_code\_size\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{freed\_code\_size\_}{freed\_code\_size\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::freed\+\_\+code\+\_\+size\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 598 of file wasm-\/code-\/manager.\+h.



Referenced by Free\+Code(), and freed\+\_\+code\+\_\+size().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac2a529eb2d65d067fea506c7f10eb11d}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_ac2a529eb2d65d067fea506c7f10eb11d}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!freed\_code\_space\_@{freed\_code\_space\_}}
\index{freed\_code\_space\_@{freed\_code\_space\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{freed\_code\_space\_}{freed\_code\_space\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool}{Disjoint\+Allocation\+Pool}} v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::freed\+\_\+code\+\_\+space\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 590 of file wasm-\/code-\/manager.\+h.



Referenced by Free\+Code().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a2aacac2f51bed124e8a0a167874cb698}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a2aacac2f51bed124e8a0a167874cb698}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!generated\_code\_size\_@{generated\_code\_size\_}}
\index{generated\_code\_size\_@{generated\_code\_size\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{generated\_code\_size\_}{generated\_code\_size\_}}
{\footnotesize\ttfamily std\+::atomic$<$\mbox{\hyperlink{namespacev8_1_1internal_a4725962ca3c127eb5871cb47293aee95}{size\+\_\+t}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::generated\+\_\+code\+\_\+size\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 597 of file wasm-\/code-\/manager.\+h.



Referenced by Allocate\+For\+Code\+In\+Region(), and generated\+\_\+code\+\_\+size().

\mbox{\Hypertarget{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}\label{classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_a347ce7c723cb2ec332cca5e5b15ed0b6}} 
\index{v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}!owned\_code\_space\_@{owned\_code\_space\_}}
\index{owned\_code\_space\_@{owned\_code\_space\_}!v8::internal::wasm::WasmCodeAllocator@{v8::internal::wasm::WasmCodeAllocator}}
\doxysubsubsection{\texorpdfstring{owned\_code\_space\_}{owned\_code\_space\_}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classv8_1_1internal_1_1VirtualMemory}{Virtual\+Memory}}$>$ v8\+::internal\+::wasm\+::\+Wasm\+Code\+Allocator\+::owned\+\_\+code\+\_\+space\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 591 of file wasm-\/code-\/manager.\+h.



Referenced by Allocate\+For\+Code\+In\+Region(), Free\+Code(), Get\+Num\+Code\+Spaces(), Init(), Wasm\+Code\+Allocator(), and $\sim$\+Wasm\+Code\+Allocator().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-code-manager_8h}{wasm-\/code-\/manager.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-code-manager_8cc}{wasm-\/code-\/manager.\+cc}}\end{DoxyCompactItemize}
