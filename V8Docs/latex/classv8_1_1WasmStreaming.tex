\hypertarget{classv8_1_1WasmStreaming}{}\doxysection{v8\+::Wasm\+Streaming Class Reference}
\label{classv8_1_1WasmStreaming}\index{v8::WasmStreaming@{v8::WasmStreaming}}


The \mbox{\hyperlink{classv8_1_1V8}{V8}} interface for Web\+Assembly streaming compilation.  




{\ttfamily \#include $<$v8-\/wasm.\+h$>$}



Collaboration diagram for v8\+::Wasm\+Streaming\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1WasmStreaming__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1WasmStreaming_1_1WasmStreamingImpl}{Wasm\+Streaming\+Impl}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1WasmStreaming_a40fe20bbbe84a244ebd306da4b8ce256}{Wasm\+Streaming}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1WasmStreaming_1_1WasmStreamingImpl}{Wasm\+Streaming\+Impl}} $>$ impl)
\item 
\mbox{\hyperlink{classv8_1_1WasmStreaming_a30946d0d7717c33736cedce87d81a178}{$\sim$\+Wasm\+Streaming}} ()
\item 
void \mbox{\hyperlink{classv8_1_1WasmStreaming_ada886a06f191ac65897763bda60c2f54}{On\+Bytes\+Received}} (const uint8\+\_\+t $\ast$bytes, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\begin{DoxyCompactList}\small\item\em Pass a new chunk of bytes to Web\+Assembly streaming compilation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1WasmStreaming_a5cb59c261f44e95e3f98b7b210be320c}{Finish}} (bool can\+\_\+use\+\_\+compiled\+\_\+module=\mbox{\hyperlink{flag-definitions_8h_ae56df915684f69fc6f5c0f3bd3b3c80c}{true}})
\begin{DoxyCompactList}\small\item\em \{Finish\} should be called after all received bytes where passed to \{On\+Bytes\+Received\} to tell \mbox{\hyperlink{classv8_1_1V8}{V8}} that there will be no more bytes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1WasmStreaming_aca7399d97368360079e3030b2fb4fc94}{Abort}} (\mbox{\hyperlink{classv8_1_1MaybeLocal}{Maybe\+Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ exception)
\begin{DoxyCompactList}\small\item\em Abort streaming compilation. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classv8_1_1WasmStreaming_a73a233057ae54177e84d259f43a1781e}{Set\+Compiled\+Module\+Bytes}} (const uint8\+\_\+t $\ast$bytes, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\begin{DoxyCompactList}\small\item\em Passes previously compiled module bytes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1WasmStreaming_abbd2c298061c6185e48671968f21f5c9}{Set\+More\+Functions\+Can\+Be\+Serialized\+Callback}} (std\+::function$<$ void(\mbox{\hyperlink{classv8_1_1CompiledWasmModule}{Compiled\+Wasm\+Module}})$>$)
\begin{DoxyCompactList}\small\item\em Sets a callback which is called whenever a significant number of new functions are ready for serialization. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classv8_1_1WasmStreaming_a90a3e0128e3f21bcd621bca71e374600}{Set\+Url}} (const char $\ast$url, size\+\_\+t length)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1WasmStreaming}{Wasm\+Streaming}} $>$ \mbox{\hyperlink{classv8_1_1WasmStreaming_af90e13f9116c9c4184b6e621c87671c6}{Unpack}} (\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$ value)
\begin{DoxyCompactList}\small\item\em Unpacks a \{\mbox{\hyperlink{classv8_1_1WasmStreaming}{Wasm\+Streaming}}\} object wrapped in a \{Managed\} for the embedder. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr \mbox{\hyperlink{namespacev8_1_1internal_aa5178998e7ae493acf744bc92b1fbdbc}{internal\+::\+External\+Pointer\+Tag}} \mbox{\hyperlink{classv8_1_1WasmStreaming_a37e0a6472ae7feb089933c9559d1bfa5}{k\+Managed\+Tag}}
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1WasmStreaming_1_1WasmStreamingImpl}{Wasm\+Streaming\+Impl}} $>$ \mbox{\hyperlink{classv8_1_1WasmStreaming_a0561d4f9b06323897494ff37a4e18b01}{impl\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classv8_1_1V8}{V8}} interface for Web\+Assembly streaming compilation. 

When streaming compilation is initiated, \mbox{\hyperlink{classv8_1_1V8}{V8}} passes a \{\mbox{\hyperlink{classv8_1_1WasmStreaming}{Wasm\+Streaming}}\} object to the embedder such that the embedder can pass the input bytes for streaming compilation to \mbox{\hyperlink{classv8_1_1V8}{V8}}. 

Definition at line 131 of file v8-\/wasm.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1WasmStreaming_a40fe20bbbe84a244ebd306da4b8ce256}\label{classv8_1_1WasmStreaming_a40fe20bbbe84a244ebd306da4b8ce256}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!WasmStreaming@{WasmStreaming}}
\index{WasmStreaming@{WasmStreaming}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{WasmStreaming()}{WasmStreaming()}}
{\footnotesize\ttfamily v8\+::\+Wasm\+Streaming\+::\+Wasm\+Streaming (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1WasmStreaming_1_1WasmStreamingImpl}{Wasm\+Streaming\+Impl}} $>$}]{impl }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 11955 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11955                                                              \{}
\DoxyCodeLine{11956   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{11957 \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_a30946d0d7717c33736cedce87d81a178}\label{classv8_1_1WasmStreaming_a30946d0d7717c33736cedce87d81a178}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!````~WasmStreaming@{$\sim$WasmStreaming}}
\index{````~WasmStreaming@{$\sim$WasmStreaming}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{$\sim$WasmStreaming()}{~WasmStreaming()}}
{\footnotesize\ttfamily v8\+::\+Wasm\+Streaming\+::$\sim$\+Wasm\+Streaming (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1WasmStreaming_aca7399d97368360079e3030b2fb4fc94}\label{classv8_1_1WasmStreaming_aca7399d97368360079e3030b2fb4fc94}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!Abort@{Abort}}
\index{Abort@{Abort}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{Abort()}{Abort()}}
{\footnotesize\ttfamily void v8\+::\+Wasm\+Streaming\+::\+Abort (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1MaybeLocal}{Maybe\+Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{exception }\end{DoxyParamCaption})}



Abort streaming compilation. 

If \{exception\} has a value, then the promise associated with streaming compilation is rejected with that value. If \{exception\} does not have value, the promise does not get rejected. \{Abort\} must not be called repeatedly, or after \{Finish\}. 

Definition at line 11967 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11967 \{ \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}(); \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_a5cb59c261f44e95e3f98b7b210be320c}\label{classv8_1_1WasmStreaming_a5cb59c261f44e95e3f98b7b210be320c}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!Finish@{Finish}}
\index{Finish@{Finish}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{Finish()}{Finish()}}
{\footnotesize\ttfamily void v8\+::\+Wasm\+Streaming\+::\+Finish (\begin{DoxyParamCaption}\item[{bool}]{can\+\_\+use\+\_\+compiled\+\_\+module = {\ttfamily \mbox{\hyperlink{flag-definitions_8h_ae56df915684f69fc6f5c0f3bd3b3c80c}{true}}} }\end{DoxyParamCaption})}



\{Finish\} should be called after all received bytes where passed to \{On\+Bytes\+Received\} to tell \mbox{\hyperlink{classv8_1_1V8}{V8}} that there will be no more bytes. 

\{Finish\} must not be called after \{Abort\} has been called already. If \{can\+\_\+use\+\_\+compiled\+\_\+module\} is true and \{Set\+Compiled\+Module\+Bytes\} was previously called, the compiled module bytes can be used. If \{can\+\_\+use\+\_\+compiled\+\_\+module\} is false, the compiled module bytes previously set by \{Set\+Compiled\+Module\+Bytes\} should not be used. 

Definition at line 11965 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11965 \{ \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}(); \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_ada886a06f191ac65897763bda60c2f54}\label{classv8_1_1WasmStreaming_ada886a06f191ac65897763bda60c2f54}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!OnBytesReceived@{OnBytesReceived}}
\index{OnBytesReceived@{OnBytesReceived}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{OnBytesReceived()}{OnBytesReceived()}}
{\footnotesize\ttfamily void v8\+::\+Wasm\+Streaming\+::\+On\+Bytes\+Received (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{bytes,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Pass a new chunk of bytes to Web\+Assembly streaming compilation. 

The buffer passed into \{On\+Bytes\+Received\} is owned by the caller. 

Definition at line 11961 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11961                                                                      \{}
\DoxyCodeLine{11962   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{11963 \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_a73a233057ae54177e84d259f43a1781e}\label{classv8_1_1WasmStreaming_a73a233057ae54177e84d259f43a1781e}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!SetCompiledModuleBytes@{SetCompiledModuleBytes}}
\index{SetCompiledModuleBytes@{SetCompiledModuleBytes}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{SetCompiledModuleBytes()}{SetCompiledModuleBytes()}}
{\footnotesize\ttfamily bool v8\+::\+Wasm\+Streaming\+::\+Set\+Compiled\+Module\+Bytes (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t $\ast$}]{bytes,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Passes previously compiled module bytes. 

This must be called before \{On\+Bytes\+Received\}, \{Finish\}, or \{Abort\}. Returns true if the module bytes can be used, false otherwise. The buffer passed via \{bytes\} and \{size\} is owned by the caller. If \{Set\+Compiled\+Module\+Bytes\} returns true, the buffer must remain valid until either \{Finish\} or \{Abort\} completes. The compiled module bytes should not be used until \{Finish(true)\} is called, because they can be invalidated later by \{Finish(false)\}. 

Definition at line 11969 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11969                                                                             \{}
\DoxyCodeLine{11970   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{11971 \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_abbd2c298061c6185e48671968f21f5c9}\label{classv8_1_1WasmStreaming_abbd2c298061c6185e48671968f21f5c9}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!SetMoreFunctionsCanBeSerializedCallback@{SetMoreFunctionsCanBeSerializedCallback}}
\index{SetMoreFunctionsCanBeSerializedCallback@{SetMoreFunctionsCanBeSerializedCallback}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{SetMoreFunctionsCanBeSerializedCallback()}{SetMoreFunctionsCanBeSerializedCallback()}}
{\footnotesize\ttfamily void v8\+::\+Wasm\+Streaming\+::\+Set\+More\+Functions\+Can\+Be\+Serialized\+Callback (\begin{DoxyParamCaption}\item[{std\+::function$<$ void(\mbox{\hyperlink{classv8_1_1CompiledWasmModule}{Compiled\+Wasm\+Module}})$>$}]{callback }\end{DoxyParamCaption})}



Sets a callback which is called whenever a significant number of new functions are ready for serialization. 



Definition at line 11973 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11974                                            \{}
\DoxyCodeLine{11975   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{11976 \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_a90a3e0128e3f21bcd621bca71e374600}\label{classv8_1_1WasmStreaming_a90a3e0128e3f21bcd621bca71e374600}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!SetUrl@{SetUrl}}
\index{SetUrl@{SetUrl}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{SetUrl()}{SetUrl()}}
{\footnotesize\ttfamily void v8\+::\+Wasm\+Streaming\+::\+Set\+Url (\begin{DoxyParamCaption}\item[{const char $\ast$}]{url,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Definition at line 11978 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11978 \{ \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}(); \}}

\end{DoxyCode}


References UNREACHABLE.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_af90e13f9116c9c4184b6e621c87671c6}\label{classv8_1_1WasmStreaming_af90e13f9116c9c4184b6e621c87671c6}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!Unpack@{Unpack}}
\index{Unpack@{Unpack}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{Unpack()}{Unpack()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classv8_1_1WasmStreaming}{Wasm\+Streaming}} $>$ v8\+::\+Wasm\+Streaming\+::\+Unpack (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1Local}{Local}}$<$ \mbox{\hyperlink{classv8_1_1Value}{Value}} $>$}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Unpacks a \{\mbox{\hyperlink{classv8_1_1WasmStreaming}{Wasm\+Streaming}}\} object wrapped in a \{Managed\} for the embedder. 

Since the embedder is on the other side of the API, it cannot unpack the \{Managed\} itself. 

Definition at line 11981 of file api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{11982                                                                          \{}
\DoxyCodeLine{11983   \mbox{\hyperlink{src_2base_2logging_8h_a0d093cb749cfc7ab5993726392df681f}{FATAL}}(\textcolor{stringliteral}{"{}WebAssembly is disabled"{}});}
\DoxyCodeLine{11984 \}}

\end{DoxyCode}


References FATAL.



Referenced by v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Wasm\+Streaming\+Callback\+For\+Testing(), and v8\+::anonymous\+\_\+namespace\{wasm-\/js.\+cc\}\+::\+Wasm\+Streaming\+Promise\+Failed\+Callback().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1WasmStreaming_af90e13f9116c9c4184b6e621c87671c6_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1WasmStreaming_a0561d4f9b06323897494ff37a4e18b01}\label{classv8_1_1WasmStreaming_a0561d4f9b06323897494ff37a4e18b01}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!impl\_@{impl\_}}
\index{impl\_@{impl\_}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{impl\_}{impl\_}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classv8_1_1WasmStreaming_1_1WasmStreamingImpl}{Wasm\+Streaming\+Impl}}$>$ v8\+::\+Wasm\+Streaming\+::impl\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 199 of file v8-\/wasm.\+h.

\mbox{\Hypertarget{classv8_1_1WasmStreaming_a37e0a6472ae7feb089933c9559d1bfa5}\label{classv8_1_1WasmStreaming_a37e0a6472ae7feb089933c9559d1bfa5}} 
\index{v8::WasmStreaming@{v8::WasmStreaming}!kManagedTag@{kManagedTag}}
\index{kManagedTag@{kManagedTag}!v8::WasmStreaming@{v8::WasmStreaming}}
\doxysubsubsection{\texorpdfstring{kManagedTag}{kManagedTag}}
{\footnotesize\ttfamily constexpr \mbox{\hyperlink{namespacev8_1_1internal_aa5178998e7ae493acf744bc92b1fbdbc}{internal\+::\+External\+Pointer\+Tag}} v8\+::\+Wasm\+Streaming\+::k\+Managed\+Tag\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{      \mbox{\hyperlink{namespacev8_1_1internal_aa5178998e7ae493acf744bc92b1fbdbcad945f85af99cdf3bae2abaa3059d9e20}{internal::kWasmWasmStreamingTag}}}

\end{DoxyCode}


Definition at line 133 of file v8-\/wasm.\+h.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/include/\mbox{\hyperlink{v8-wasm_8h}{v8-\/wasm.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/api/\mbox{\hyperlink{api_8cc}{api.\+cc}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-js_8cc}{wasm-\/js.\+cc}}\end{DoxyCompactItemize}
