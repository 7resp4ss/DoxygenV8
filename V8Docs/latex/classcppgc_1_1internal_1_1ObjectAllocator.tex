\hypertarget{classcppgc_1_1internal_1_1ObjectAllocator}{}\doxysection{cppgc\+::internal\+::Object\+Allocator Class Reference}
\label{classcppgc_1_1internal_1_1ObjectAllocator}\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}


{\ttfamily \#include $<$object-\/allocator.\+h$>$}



Inheritance diagram for cppgc\+::internal\+::Object\+Allocator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{classcppgc_1_1internal_1_1ObjectAllocator__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for cppgc\+::internal\+::Object\+Allocator\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}} = std\+::align\+\_\+val\+\_\+t
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a886a73735a1b51e3f0ded55e96e844cf}{Object\+Allocator}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap}{Raw\+Heap}} \&, \mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&, \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&, \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler}{Pre\+Finalizer\+Handler}} \&, \mbox{\hyperlink{classcppgc_1_1internal_1_1FatalOutOfMemoryHandler}{Fatal\+Out\+Of\+Memory\+Handler}} \&, \mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector}{Garbage\+Collector}} \&)
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aee4af6a9085d8b16ff85886e04a4dfa8}{Allocate\+Object}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}} gcinfo)
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aad7fa0cb4a54abcc787b82b893d101d9}{Allocate\+Object}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}} alignment, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}} gcinfo)
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a4b3c54eab2ca24746cc39171532c0a7a}{Allocate\+Object}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}} gcinfo, \mbox{\hyperlink{structcppgc_1_1CustomSpaceIndex}{Custom\+Space\+Index}} space\+\_\+index)
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a0b281d31834f57e8e0ffcdc1ce28de08}{Allocate\+Object}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}} alignment, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}} gcinfo, \mbox{\hyperlink{structcppgc_1_1CustomSpaceIndex}{Custom\+Space\+Index}} space\+\_\+index)
\item 
void \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c}{Reset\+Linear\+Allocation\+Buffers}} ()
\item 
void \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a76db2a573e4f12f28512ca65a507d456}{Mark\+All\+Pages\+As\+Young}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr size\+\_\+t \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a14d2d6a90afe7b93f175fb7b16b390c7}{k\+Smallest\+Space\+Size}} = 32
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\+\_\+disallow\+\_\+gc\+\_\+scope}} () const
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{Allocate\+Object\+On\+Space}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}})
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a32dbe089b1684f1edf640960fc483e41}{Allocate\+Object\+On\+Space}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}})
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce}{Out\+Of\+Line\+Allocate}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}})
\item 
void \mbox{\hyperlink{v8config_8h_ad625456dc8423a2c996c46681e95b4ed}{V8\+\_\+\+PRESERVE\+\_\+\+MOST}} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3}{Out\+Of\+Line\+Allocate\+GCSafe\+Point}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}, void $\ast$$\ast$)
\item 
void $\ast$ \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033}{Out\+Of\+Line\+Allocate\+Impl}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}, \mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}})
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919}{Try\+Refill\+Linear\+Allocation\+Buffer}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t)
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}{Try\+Refill\+Linear\+Allocation\+Buffer\+From\+Free\+List}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&, size\+\_\+t)
\item 
bool \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11}{Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer}} (\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&)
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6}{Raw\+Heap\+::\+Regular\+Space\+Type}} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14}{Get\+Initial\+Space\+Index\+For\+Size}} (size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap}{Raw\+Heap}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\+\_\+heap\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}{page\+\_\+backend\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\+\_\+collector\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler}{Pre\+Finalizer\+Handler}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}{prefinalizer\+\_\+handler\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1FatalOutOfMemoryHandler}{Fatal\+Out\+Of\+Memory\+Handler}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\+\_\+handler\+\_\+}}
\item 
\mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector}{Garbage\+Collector}} \& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}{garbage\+\_\+collector\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 40 of file object-\/allocator.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}\label{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AlignVal@{AlignVal}}
\index{AlignVal@{AlignVal}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AlignVal}{AlignVal}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{cppgc\+::internal\+::\+Object\+Allocator\+::\+Align\+Val}} =  std\+::align\+\_\+val\+\_\+t}



Definition at line 42 of file object-\/allocator.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a886a73735a1b51e3f0ded55e96e844cf}\label{classcppgc_1_1internal_1_1ObjectAllocator_a886a73735a1b51e3f0ded55e96e844cf}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!ObjectAllocator@{ObjectAllocator}}
\index{ObjectAllocator@{ObjectAllocator}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{ObjectAllocator()}{ObjectAllocator()}}
{\footnotesize\ttfamily cppgc\+::internal\+::\+Object\+Allocator\+::\+Object\+Allocator (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap}{Raw\+Heap}} \&}]{heap,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}} \&}]{page\+\_\+backend,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}} \&}]{stats\+\_\+collector,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler}{Pre\+Finalizer\+Handler}} \&}]{prefinalizer\+\_\+handler,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1FatalOutOfMemoryHandler}{Fatal\+Out\+Of\+Memory\+Handler}} \&}]{oom\+\_\+handler,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector}{Garbage\+Collector}} \&}]{garbage\+\_\+collector }\end{DoxyParamCaption})}



Definition at line 135 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{140     : \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}(\mbox{\hyperlink{namespaceheap}{heap}}),}
\DoxyCodeLine{141       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}{page\_backend\_}}(page\_backend),}
\DoxyCodeLine{142       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}(stats\_collector),}
\DoxyCodeLine{143       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}{prefinalizer\_handler\_}}(prefinalizer\_handler),}
\DoxyCodeLine{144       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\_handler\_}}(oom\_handler),}
\DoxyCodeLine{145       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}{garbage\_collector\_}}(garbage\_collector) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_aad7fa0cb4a54abcc787b82b893d101d9}\label{classcppgc_1_1internal_1_1ObjectAllocator_aad7fa0cb4a54abcc787b82b893d101d9}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObject@{AllocateObject}}
\index{AllocateObject@{AllocateObject}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObject()}{AllocateObject()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 125 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{126                                                           \{}
\DoxyCodeLine{127   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\_disallow\_gc\_scope}}());}
\DoxyCodeLine{128 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{129   TriggerGCOnAllocationTimeoutIfNeeded();}
\DoxyCodeLine{130 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{131   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} allocation\_size =}
\DoxyCodeLine{132       RoundUp<kAllocationGranularity>(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{133   \textcolor{keyword}{const} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6}{RawHeap::RegularSpaceType}} \mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}} =}
\DoxyCodeLine{134       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14}{GetInitialSpaceIndexForSize}}(allocation\_size);}
\DoxyCodeLine{135   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace_af4bf4fa0c08ebb0d45ff99a047cdd921}{NormalPageSpace::From}}(*\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ab9aa5c33faee6116de74aae4d1c225ce}{Space}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}})),}
\DoxyCodeLine{136                                allocation\_size, alignment, gcinfo);}
\DoxyCodeLine{137 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), DCHECK, cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+From(), Get\+Initial\+Space\+Index\+For\+Size(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), raw\+\_\+heap\+\_\+, size(), cppgc\+::internal\+::\+Raw\+Heap\+::\+Space(), and v8\+::internal\+::tracing\+::type.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_aad7fa0cb4a54abcc787b82b893d101d9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a0b281d31834f57e8e0ffcdc1ce28de08}\label{classcppgc_1_1internal_1_1ObjectAllocator_a0b281d31834f57e8e0ffcdc1ce28de08}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObject@{AllocateObject}}
\index{AllocateObject@{AllocateObject}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObject()}{AllocateObject()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo,  }\item[{\mbox{\hyperlink{structcppgc_1_1CustomSpaceIndex}{Custom\+Space\+Index}}}]{space\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 152 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{154                                                                     \{}
\DoxyCodeLine{155   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\_disallow\_gc\_scope}}());}
\DoxyCodeLine{156 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{157   TriggerGCOnAllocationTimeoutIfNeeded();}
\DoxyCodeLine{158 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{159   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} allocation\_size =}
\DoxyCodeLine{160       RoundUp<kAllocationGranularity>(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{161   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(}
\DoxyCodeLine{162       \mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace_af4bf4fa0c08ebb0d45ff99a047cdd921}{NormalPageSpace::From}}(*\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_a520d699e0cff413a10deb5cf45979780}{CustomSpace}}(space\_index)),}
\DoxyCodeLine{163       allocation\_size, alignment, gcinfo);}
\DoxyCodeLine{164 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), cppgc\+::internal\+::\+Raw\+Heap\+::\+Custom\+Space(), DCHECK, cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+From(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), raw\+\_\+heap\+\_\+, and size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a0b281d31834f57e8e0ffcdc1ce28de08_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_aee4af6a9085d8b16ff85886e04a4dfa8}\label{classcppgc_1_1internal_1_1ObjectAllocator_aee4af6a9085d8b16ff85886e04a4dfa8}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObject@{AllocateObject}}
\index{AllocateObject@{AllocateObject}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObject()}{AllocateObject()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 112 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{112                                                                      \{}
\DoxyCodeLine{113   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\_disallow\_gc\_scope}}());}
\DoxyCodeLine{114 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{115   TriggerGCOnAllocationTimeoutIfNeeded();}
\DoxyCodeLine{116 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{117   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} allocation\_size =}
\DoxyCodeLine{118       RoundUp<kAllocationGranularity>(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{119   \textcolor{keyword}{const} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6}{RawHeap::RegularSpaceType}} \mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}} =}
\DoxyCodeLine{120       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14}{GetInitialSpaceIndexForSize}}(allocation\_size);}
\DoxyCodeLine{121   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace_af4bf4fa0c08ebb0d45ff99a047cdd921}{NormalPageSpace::From}}(*\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ab9aa5c33faee6116de74aae4d1c225ce}{Space}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}})),}
\DoxyCodeLine{122                                allocation\_size, gcinfo);}
\DoxyCodeLine{123 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), DCHECK, cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+From(), Get\+Initial\+Space\+Index\+For\+Size(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), raw\+\_\+heap\+\_\+, size(), cppgc\+::internal\+::\+Raw\+Heap\+::\+Space(), and v8\+::internal\+::tracing\+::type.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_aee4af6a9085d8b16ff85886e04a4dfa8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a4b3c54eab2ca24746cc39171532c0a7a}\label{classcppgc_1_1internal_1_1ObjectAllocator_a4b3c54eab2ca24746cc39171532c0a7a}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObject@{AllocateObject}}
\index{AllocateObject@{AllocateObject}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObject()}{AllocateObject()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo,  }\item[{\mbox{\hyperlink{structcppgc_1_1CustomSpaceIndex}{Custom\+Space\+Index}}}]{space\+\_\+index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 139 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{140                                                                     \{}
\DoxyCodeLine{141   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(!\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\_disallow\_gc\_scope}}());}
\DoxyCodeLine{142 \textcolor{preprocessor}{\#ifdef V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{143   TriggerGCOnAllocationTimeoutIfNeeded();}
\DoxyCodeLine{144 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// V8\_ENABLE\_ALLOCATION\_TIMEOUT}}
\DoxyCodeLine{145   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} allocation\_size =}
\DoxyCodeLine{146       RoundUp<kAllocationGranularity>(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{147   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(}
\DoxyCodeLine{148       \mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace_af4bf4fa0c08ebb0d45ff99a047cdd921}{NormalPageSpace::From}}(*\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_a520d699e0cff413a10deb5cf45979780}{CustomSpace}}(space\_index)),}
\DoxyCodeLine{149       allocation\_size, gcinfo);}
\DoxyCodeLine{150 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), cppgc\+::internal\+::\+Raw\+Heap\+::\+Custom\+Space(), DCHECK, cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+From(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), raw\+\_\+heap\+\_\+, and size().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a4b3c54eab2ca24746cc39171532c0a7a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a32dbe089b1684f1edf640960fc483e41}\label{classcppgc_1_1internal_1_1ObjectAllocator_a32dbe089b1684f1edf640960fc483e41}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObjectOnSpace@{AllocateObjectOnSpace}}
\index{AllocateObjectOnSpace@{AllocateObjectOnSpace}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObjectOnSpace()}{AllocateObjectOnSpace()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object\+On\+Space (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 187 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{189                                                                  \{}
\DoxyCodeLine{190   \textcolor{comment}{// The APIs are set up to support general alignment. Since we want to keep}}
\DoxyCodeLine{191   \textcolor{comment}{// track of the actual usage there the alignment support currently only covers}}
\DoxyCodeLine{192   \textcolor{comment}{// double-\/world alignment (8 bytes on 32bit and 16 bytes on 64bit}}
\DoxyCodeLine{193   \textcolor{comment}{// architectures). This is enforced on the public API via static\_asserts}}
\DoxyCodeLine{194   \textcolor{comment}{// against alignof(T).}}
\DoxyCodeLine{195   static\_assert(2 * \mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}} ==}
\DoxyCodeLine{196                 \mbox{\hyperlink{namespacecppgc_1_1internal_1_1api__constants_a78ec6c64142e415c2ac4dfb38173d8ef}{api\_constants::kMaxSupportedAlignment}});}
\DoxyCodeLine{197   static\_assert(\mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}} == \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{198   static\_assert(\mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}} ==}
\DoxyCodeLine{199                 \mbox{\hyperlink{namespacecppgc_1_1internal_1_1api__constants_a46d4213399c967df22fd63386742a48c}{api\_constants::kAllocationGranularity}});}
\DoxyCodeLine{200   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(2 * \textcolor{keyword}{sizeof}(HeapObjectHeader), \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(alignment));}
\DoxyCodeLine{201   constexpr \textcolor{keywordtype}{size\_t} kAlignment = 2 * \mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}};}
\DoxyCodeLine{202   constexpr \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_a5c60df7b9429d7bb8863172967149023}{kAlignmentMask}} = kAlignment -\/ 1;}
\DoxyCodeLine{203   constexpr \textcolor{keywordtype}{size\_t} kPaddingSize = kAlignment -\/ \textcolor{keyword}{sizeof}(HeapObjectHeader);}
\DoxyCodeLine{204 }
\DoxyCodeLine{205   NormalPageSpace::LinearAllocationBuffer\& current\_lab =}
\DoxyCodeLine{206       \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.linear\_allocation\_buffer();}
\DoxyCodeLine{207   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} current\_lab\_size = current\_lab.size();}
\DoxyCodeLine{208   \textcolor{comment}{// Case 1: The LAB fits the request and the LAB start is already properly}}
\DoxyCodeLine{209   \textcolor{comment}{// aligned.}}
\DoxyCodeLine{210   \textcolor{keywordtype}{bool} lab\_allocation\_will\_succeed =}
\DoxyCodeLine{211       current\_lab\_size >= \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \&\&}
\DoxyCodeLine{212       (\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(current\_lab.start() +}
\DoxyCodeLine{213                                    \textcolor{keyword}{sizeof}(HeapObjectHeader)) \&}
\DoxyCodeLine{214        \mbox{\hyperlink{namespacev8_a5c60df7b9429d7bb8863172967149023}{kAlignmentMask}}) == 0;}
\DoxyCodeLine{215   \textcolor{comment}{// Case 2: The LAB fits an extended request to manually align the second}}
\DoxyCodeLine{216   \textcolor{comment}{// allocation.}}
\DoxyCodeLine{217   \textcolor{keywordflow}{if} (!lab\_allocation\_will\_succeed \&\&}
\DoxyCodeLine{218       (current\_lab\_size >= (\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} + kPaddingSize))) \{}
\DoxyCodeLine{219     \textcolor{keywordtype}{void}* filler\_memory = current\_lab.Allocate(kPaddingSize);}
\DoxyCodeLine{220     \textcolor{keyword}{auto}\& filler = \mbox{\hyperlink{classcppgc_1_1internal_1_1Filler_a592e3e8f2d1a33f641f0729cb2052edb}{Filler::CreateAt}}(filler\_memory, kPaddingSize);}
\DoxyCodeLine{221     \mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a7f0a797270bdb5dc9f7c05be073481b5}{NormalPage::From}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1BasePage_aad13cafeed6c2ea494b7423b9c527b7a}{BasePage::FromPayload}}(\&filler))}
\DoxyCodeLine{222         -\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a8cdafcfb1ef74227080a91b90fe57c19}{object\_start\_bitmap}}()}
\DoxyCodeLine{223         .\mbox{\hyperlink{classcppgc_1_1internal_1_1PlatformAwareObjectStartBitmap_a76ced65f929263c1d882fb6621fd15dc}{SetBit}}<\mbox{\hyperlink{namespacecppgc_1_1internal_ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71}{AccessMode::kAtomic}}>(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacecppgc_1_1internal_a253e063701bfc4119e9fca7fe9800c32}{ConstAddress}}\textcolor{keyword}{>}(\&filler));}
\DoxyCodeLine{224     lab\_allocation\_will\_succeed = \textcolor{keyword}{true};}
\DoxyCodeLine{225   \}}
\DoxyCodeLine{226   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(!lab\_allocation\_will\_succeed)) \{}
\DoxyCodeLine{227     \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce}{OutOfLineAllocate}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, alignment, gcinfo);}
\DoxyCodeLine{228   \}}
\DoxyCodeLine{229   \textcolor{keywordtype}{void}* \textcolor{keywordtype}{object} = \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, gcinfo);}
\DoxyCodeLine{230   \mbox{\hyperlink{src_2base_2logging_8h_a7b9f9517fedacc2a1a56c2bbb9d03688}{DCHECK\_NOT\_NULL}}(\textcolor{keywordtype}{object});}
\DoxyCodeLine{231   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0u, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(\textcolor{keywordtype}{object}) \& \mbox{\hyperlink{namespacev8_a5c60df7b9429d7bb8863172967149023}{kAlignmentMask}});}
\DoxyCodeLine{232   \textcolor{keywordflow}{return} object;}
\DoxyCodeLine{233 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), cppgc\+::internal\+::\+Filler\+::\+Create\+At(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+NOT\+\_\+\+NULL, cppgc\+::internal\+::\+Normal\+Page\+::\+From(), cppgc\+::internal\+::\+Base\+Page\+::\+From\+Payload(), v8\+::k\+Alignment\+Mask, cppgc\+::internal\+::api\+\_\+constants\+::k\+Allocation\+Granularity, cppgc\+::internal\+::k\+Allocation\+Granularity, cppgc\+::internal\+::k\+Atomic, cppgc\+::internal\+::api\+\_\+constants\+::k\+Max\+Supported\+Alignment, cppgc\+::internal\+::\+Normal\+Page\+::object\+\_\+start\+\_\+bitmap(), Out\+Of\+Line\+Allocate(), cppgc\+::internal\+::\+Platform\+Aware\+Object\+Start\+Bitmap\+::\+Set\+Bit(), size(), space, and V8\+\_\+\+UNLIKELY.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a32dbe089b1684f1edf640960fc483e41_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}\label{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!AllocateObjectOnSpace@{AllocateObjectOnSpace}}
\index{AllocateObjectOnSpace@{AllocateObjectOnSpace}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{AllocateObjectOnSpace()}{AllocateObjectOnSpace()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Allocate\+Object\+On\+Space (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 235 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{236                                                                               \{}
\DoxyCodeLine{237   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(0u, gcinfo);}
\DoxyCodeLine{238 }
\DoxyCodeLine{239   NormalPageSpace::LinearAllocationBuffer\& current\_lab =}
\DoxyCodeLine{240       \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.linear\_allocation\_buffer();}
\DoxyCodeLine{241   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(current\_lab.size() < \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})) \{}
\DoxyCodeLine{242     \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce}{OutOfLineAllocate}}(}
\DoxyCodeLine{243         \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{AlignVal}}\textcolor{keyword}{>}(\mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}}), gcinfo);}
\DoxyCodeLine{244   \}}
\DoxyCodeLine{245 }
\DoxyCodeLine{246   \textcolor{keywordtype}{void}* raw = current\_lab.Allocate(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{247 \textcolor{preprocessor}{\#if !defined(V8\_USE\_MEMORY\_SANITIZER) \&\& !defined(V8\_USE\_ADDRESS\_SANITIZER) \&\& \(\backslash\)}}
\DoxyCodeLine{248 \textcolor{preprocessor}{    DEBUG}}
\DoxyCodeLine{249   \textcolor{comment}{// For debug builds, unzap only the payload.}}
\DoxyCodeLine{250   \mbox{\hyperlink{namespacecppgc_1_1internal_ae040dfdc19bed997f7115e302243b4cb}{SetMemoryAccessible}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(raw) + \textcolor{keyword}{sizeof}(HeapObjectHeader),}
\DoxyCodeLine{251                       \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} -\/ \textcolor{keyword}{sizeof}(HeapObjectHeader));}
\DoxyCodeLine{252 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{253   \mbox{\hyperlink{namespacecppgc_1_1internal_ae040dfdc19bed997f7115e302243b4cb}{SetMemoryAccessible}}(raw, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{254 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{255   \textcolor{keyword}{auto}* header = \textcolor{keyword}{new} (raw) HeapObjectHeader(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, gcinfo);}
\DoxyCodeLine{256 }
\DoxyCodeLine{257   \textcolor{comment}{// The marker needs to find the object start concurrently.}}
\DoxyCodeLine{258   \mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a7f0a797270bdb5dc9f7c05be073481b5}{NormalPage::From}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1BasePage_aad13cafeed6c2ea494b7423b9c527b7a}{BasePage::FromPayload}}(header))}
\DoxyCodeLine{259       -\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a8cdafcfb1ef74227080a91b90fe57c19}{object\_start\_bitmap}}()}
\DoxyCodeLine{260       .\mbox{\hyperlink{classcppgc_1_1internal_1_1PlatformAwareObjectStartBitmap_a76ced65f929263c1d882fb6621fd15dc}{SetBit}}<\mbox{\hyperlink{namespacecppgc_1_1internal_ac0b40b7e4ac65024fbfcf57d01fa808ea726d9cf5163c50b3cf8e05800e3cef71}{AccessMode::kAtomic}}>(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacecppgc_1_1internal_a253e063701bfc4119e9fca7fe9800c32}{ConstAddress}}\textcolor{keyword}{>}(header));}
\DoxyCodeLine{261 }
\DoxyCodeLine{262   \textcolor{keywordflow}{return} header-\/>ObjectStart();}
\DoxyCodeLine{263 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+Linear\+Allocation\+Buffer\+::\+Allocate(), DCHECK\+\_\+\+LT, cppgc\+::internal\+::\+Normal\+Page\+::\+From(), cppgc\+::internal\+::\+Base\+Page\+::\+From\+Payload(), cppgc\+::internal\+::k\+Allocation\+Granularity, cppgc\+::internal\+::k\+Atomic, cppgc\+::internal\+::\+Normal\+Page\+::object\+\_\+start\+\_\+bitmap(), Out\+Of\+Line\+Allocate(), cppgc\+::internal\+::\+Platform\+Aware\+Object\+Start\+Bitmap\+::\+Set\+Bit(), cppgc\+::internal\+::\+Set\+Memory\+Accessible(), cppgc\+::internal\+::\+Normal\+Page\+Space\+::\+Linear\+Allocation\+Buffer\+::size(), size(), space, and V8\+\_\+\+UNLIKELY.



Referenced by Allocate\+Object(), Allocate\+Object\+On\+Space(), and Out\+Of\+Line\+Allocate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14}\label{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!GetInitialSpaceIndexForSize@{GetInitialSpaceIndexForSize}}
\index{GetInitialSpaceIndexForSize@{GetInitialSpaceIndexForSize}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{GetInitialSpaceIndexForSize()}{GetInitialSpaceIndexForSize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6}{Raw\+Heap\+::\+Regular\+Space\+Type}} cppgc\+::internal\+::\+Object\+Allocator\+::\+Get\+Initial\+Space\+Index\+For\+Size (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 167 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{168                  \{}
\DoxyCodeLine{169   static\_assert(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a14d2d6a90afe7b93f175fb7b16b390c7}{kSmallestSpaceSize}} == 32,}
\DoxyCodeLine{170                 \textcolor{stringliteral}{"{}should be half the next larger size"{}});}
\DoxyCodeLine{171   \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} < 64) \{}
\DoxyCodeLine{172     \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} < \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a14d2d6a90afe7b93f175fb7b16b390c7}{kSmallestSpaceSize}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6aa9545c9f7c61f8b5273cc45f0af90bfc}{RawHeap::RegularSpaceType::kNormal1}};}
\DoxyCodeLine{173     \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6a23acb95b488abbc8f11f5c682925c367}{RawHeap::RegularSpaceType::kNormal2}};}
\DoxyCodeLine{174   \}}
\DoxyCodeLine{175   \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} < 128) \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6a9de89ebb0f68657291bcc80df90f9f0b}{RawHeap::RegularSpaceType::kNormal3}};}
\DoxyCodeLine{176   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6a6f7e95aa395d72afde64ee4e216b6400}{RawHeap::RegularSpaceType::kNormal4}};}
\DoxyCodeLine{177 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Raw\+Heap\+::k\+Normal1, cppgc\+::internal\+::\+Raw\+Heap\+::k\+Normal2, cppgc\+::internal\+::\+Raw\+Heap\+::k\+Normal3, cppgc\+::internal\+::\+Raw\+Heap\+::k\+Normal4, k\+Smallest\+Space\+Size, and size().



Referenced by Allocate\+Object().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a54abb69b1f11222df1dacdbe8226ff14_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}\label{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!in\_disallow\_gc\_scope@{in\_disallow\_gc\_scope}}
\index{in\_disallow\_gc\_scope@{in\_disallow\_gc\_scope}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{in\_disallow\_gc\_scope()}{in\_disallow\_gc\_scope()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Object\+Allocator\+::in\+\_\+disallow\+\_\+gc\+\_\+scope (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 370 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{370                                                  \{}
\DoxyCodeLine{371   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_a06bdc6c257ea30691c7c883de2740263}{heap}}()-\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_abea2d276b2f5b47030eaf50fbd585248}{IsGCForbidden}}();}
\DoxyCodeLine{372 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Raw\+Heap\+::heap(), cppgc\+::internal\+::\+Heap\+Base\+::\+Is\+GCForbidden(), and raw\+\_\+heap\+\_\+.



Referenced by Allocate\+Object(), and Out\+Of\+Line\+Allocate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a76db2a573e4f12f28512ca65a507d456}\label{classcppgc_1_1internal_1_1ObjectAllocator_a76db2a573e4f12f28512ca65a507d456}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!MarkAllPagesAsYoung@{MarkAllPagesAsYoung}}
\index{MarkAllPagesAsYoung@{MarkAllPagesAsYoung}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{MarkAllPagesAsYoung()}{MarkAllPagesAsYoung()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Object\+Allocator\+::\+Mark\+All\+Pages\+As\+Young (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 350 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{350                                           \{}
\DoxyCodeLine{351   \textcolor{keyword}{class }YoungMarker : \textcolor{keyword}{public} HeapVisitor<YoungMarker> \{}
\DoxyCodeLine{352    \textcolor{keyword}{public}:}
\DoxyCodeLine{353     \textcolor{keywordtype}{bool} VisitNormalPage(NormalPage\& page) \{}
\DoxyCodeLine{354       \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}{MarkRangeAsYoung}}(page, page.PayloadStart(), page.PayloadEnd());}
\DoxyCodeLine{355       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{356     \}}
\DoxyCodeLine{357 }
\DoxyCodeLine{358     \textcolor{keywordtype}{bool} VisitLargePage(LargePage\& page) \{}
\DoxyCodeLine{359       \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a474a8d6831fcc4a72f405218f7894b86}{MarkRangeAsYoung}}(page, page.PayloadStart(), page.PayloadEnd());}
\DoxyCodeLine{360       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{361     \}}
\DoxyCodeLine{362   \} visitor;}
\DoxyCodeLine{363   \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(visitor);}
\DoxyCodeLine{364 }
\DoxyCodeLine{365 \textcolor{preprocessor}{\#if defined(CPPGC\_YOUNG\_GENERATION)}}
\DoxyCodeLine{366   visitor.Traverse(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}});}
\DoxyCodeLine{367 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// defined(CPPGC\_YOUNG\_GENERATION)}}
\DoxyCodeLine{368 \}}

\end{DoxyCode}


References cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Mark\+Range\+As\+Young(), cppgc\+::internal\+::\+Normal\+Page\+::\+Payload\+End(), cppgc\+::internal\+::\+Large\+Page\+::\+Payload\+End(), cppgc\+::internal\+::\+Normal\+Page\+::\+Payload\+Start(), cppgc\+::internal\+::\+Large\+Page\+::\+Payload\+Start(), raw\+\_\+heap\+\_\+, and USE.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a76db2a573e4f12f28512ca65a507d456_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce}\label{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!OutOfLineAllocate@{OutOfLineAllocate}}
\index{OutOfLineAllocate@{OutOfLineAllocate}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{OutOfLineAllocate()}{OutOfLineAllocate()}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 179 of file object-\/allocator.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{181                                                              \{}
\DoxyCodeLine{182   \textcolor{keywordtype}{void}* object;}
\DoxyCodeLine{183   \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3}{OutOfLineAllocateGCSafePoint}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, alignment, gcinfo, \&\textcolor{keywordtype}{object});}
\DoxyCodeLine{184   \textcolor{keywordflow}{return} object;}
\DoxyCodeLine{185 \}}

\end{DoxyCode}


References Out\+Of\+Line\+Allocate\+GCSafe\+Point(), size(), and space.



Referenced by Allocate\+Object\+On\+Space().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_ad6ef540c1ecb725d71bbe86f548036ce_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3}\label{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!OutOfLineAllocateGCSafePoint@{OutOfLineAllocateGCSafePoint}}
\index{OutOfLineAllocateGCSafePoint@{OutOfLineAllocateGCSafePoint}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{OutOfLineAllocateGCSafePoint()}{OutOfLineAllocateGCSafePoint()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+GCSafe\+Point (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo,  }\item[{void $\ast$$\ast$}]{object }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 147 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{151                                                                   \{}
\DoxyCodeLine{152   *\textcolor{keywordtype}{object} = \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033}{OutOfLineAllocateImpl}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, alignment, gcinfo);}
\DoxyCodeLine{153   \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector_af4a3c91bef0011ce0d4ffd8b8fb3ccf9}{NotifySafePointForConservativeCollection}}();}
\DoxyCodeLine{154   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}{prefinalizer\_handler\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_afb41db753888a7e592e4ce2eda9bbedc}{IsInvokingPreFinalizers}}()) \{}
\DoxyCodeLine{155     \textcolor{comment}{// Objects allocated during pre finalizers should be allocated as black}}
\DoxyCodeLine{156     \textcolor{comment}{// since marking is already done. Atomics are not needed because there is}}
\DoxyCodeLine{157     \textcolor{comment}{// no concurrent marking in the background.}}
\DoxyCodeLine{158     \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapObjectHeader_a04b955c04b80d2a431dc2b96e4a85028}{HeapObjectHeader::FromObject}}(*object).\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapObjectHeader_a361c2ba11dd867f69dc04804e3fe68f7}{MarkNonAtomic}}();}
\DoxyCodeLine{159     \textcolor{comment}{// Resetting the allocation buffer forces all further allocations in pre}}
\DoxyCodeLine{160     \textcolor{comment}{// finalizers to go through this slow path.}}
\DoxyCodeLine{161     \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}{ReplaceLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}, \textcolor{keyword}{nullptr}, 0);}
\DoxyCodeLine{162     \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}{prefinalizer\_handler\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler_aeb70288cf5a190b69de6d4df1f0bdea0}{NotifyAllocationInPrefinalizer}}(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{163   \}}
\DoxyCodeLine{164 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Object\+Header\+::\+From\+Object(), cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Is\+Invoking\+Pre\+Finalizers(), cppgc\+::internal\+::\+Heap\+Object\+Header\+::\+Mark\+Non\+Atomic(), cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Notify\+Allocation\+In\+Prefinalizer(), cppgc\+::internal\+::\+Stats\+Collector\+::\+Notify\+Safe\+Point\+For\+Conservative\+Collection(), Out\+Of\+Line\+Allocate\+Impl(), prefinalizer\+\_\+handler\+\_\+, cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Replace\+Linear\+Allocation\+Buffer(), size(), space, and stats\+\_\+collector\+\_\+.



Referenced by Out\+Of\+Line\+Allocate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a11cfcfcf59563577030fa8226c96d9e3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033}\label{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!OutOfLineAllocateImpl@{OutOfLineAllocateImpl}}
\index{OutOfLineAllocateImpl@{OutOfLineAllocateImpl}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{OutOfLineAllocateImpl()}{OutOfLineAllocateImpl()}}
{\footnotesize\ttfamily void $\ast$ cppgc\+::internal\+::\+Object\+Allocator\+::\+Out\+Of\+Line\+Allocate\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1ad7f96c3b9ff9ba636a6d74836a367f}{Align\+Val}}}]{alignment,  }\item[{\mbox{\hyperlink{namespacecppgc_1_1internal_a3eedd623fc378ed16d8cb08158e929a3}{GCInfo\+Index}}}]{gcinfo }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 174 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{176                                                                  \{}
\DoxyCodeLine{177   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \& \mbox{\hyperlink{namespacecppgc_1_1internal_ab3de61db12dd2c612c2ee350fb14e41f}{kAllocationMask}});}
\DoxyCodeLine{178   \mbox{\hyperlink{src_2base_2logging_8h_a16b382527f19b805fc8f856668f2270b}{DCHECK\_LE}}(\mbox{\hyperlink{namespacecppgc_1_1internal_af3fbdeb5aad0feb706e47f2cdda9ae30}{kFreeListEntrySize}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{179   \textcolor{comment}{// Out-\/of-\/line allocation allows for checking this is all situations.}}
\DoxyCodeLine{180   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5218dd88ecf18914d4f2a9102662ea65}{in\_disallow\_gc\_scope}}());}
\DoxyCodeLine{181 }
\DoxyCodeLine{182   \textcolor{comment}{// If this allocation is big enough, allocate a large object.}}
\DoxyCodeLine{183   \textcolor{keywordflow}{if} (\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} >= \mbox{\hyperlink{namespacecppgc_1_1internal_adeb2cc2ac15f6f4a4c6f59fae25d4c82}{kLargeObjectSizeThreshold}}) \{}
\DoxyCodeLine{184     \textcolor{keyword}{auto}\& large\_space = \mbox{\hyperlink{classcppgc_1_1internal_1_1LargePageSpace_a9dfb29213d23927542edfad07b31bb6e}{LargePageSpace::From}}(}
\DoxyCodeLine{185         *\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ab9aa5c33faee6116de74aae4d1c225ce}{Space}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_ad6da4c9a895a1d27172a094cc3b358f6a995e7b7e33ea3f37a72770505adf016e}{RawHeap::RegularSpaceType::kLarge}}));}
\DoxyCodeLine{186     \textcolor{comment}{// LargePage has a natural alignment that already satisfies}}
\DoxyCodeLine{187     \textcolor{comment}{// `kMaxSupportedAlignment`.}}
\DoxyCodeLine{188     \textcolor{keywordtype}{void}* \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96}{TryAllocateLargeObject}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}{page\_backend\_}}, large\_space,}
\DoxyCodeLine{189                                           \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, gcinfo);}
\DoxyCodeLine{190     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}) \{}
\DoxyCodeLine{191       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < 2; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{192         \textcolor{keyword}{auto} config = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_aa54d82825267ea64dcb758e65a34134b}{kOnAllocationFailureGCConfig}};}
\DoxyCodeLine{193         \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}{garbage\_collector\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector_af180749d0543063c50f81447662b51c9}{CollectGarbage}}(config);}
\DoxyCodeLine{194         \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a258fee0a82f6e1d04f03d2f7c2892f96}{TryAllocateLargeObject}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}{page\_backend\_}}, large\_space,}
\DoxyCodeLine{195                                         \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, gcinfo);}
\DoxyCodeLine{196         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}) \{}
\DoxyCodeLine{197           \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{198         \}}
\DoxyCodeLine{199       \}}
\DoxyCodeLine{200 \textcolor{preprocessor}{\#if defined(CPPGC\_CAGED\_HEAP)}}
\DoxyCodeLine{201       \textcolor{keyword}{const} \textcolor{keyword}{auto} last\_alloc\_status =}
\DoxyCodeLine{202           \mbox{\hyperlink{classcppgc_1_1internal_1_1CagedHeap_af6307cef0cf2e4881a841abdab6f31bf}{CagedHeap::Instance}}().\mbox{\hyperlink{classcppgc_1_1internal_1_1CagedHeap_aa9ce4f91bc05d3ce87617f96df6b175b}{page\_allocator}}().\mbox{\hyperlink{classv8_1_1base_1_1BoundedPageAllocator_afa9824355128bd531794722882068e4d}{get\_last\_allocation\_status}}();}
\DoxyCodeLine{203       \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} suffix =}
\DoxyCodeLine{204           \mbox{\hyperlink{classv8_1_1base_1_1BoundedPageAllocator_a6c000e1f1efaf321f5df3b4738cbe77c}{v8::base::BoundedPageAllocator::AllocationStatusToString}}(}
\DoxyCodeLine{205               last\_alloc\_status);}
\DoxyCodeLine{206       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\_handler\_}}(\textcolor{stringliteral}{"{}Oilpan: Large allocation. "{}} + suffix);}
\DoxyCodeLine{207 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{208       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\_handler\_}}(\textcolor{stringliteral}{"{}Oilpan: Large allocation."{}});}
\DoxyCodeLine{209 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{210     \}}
\DoxyCodeLine{211     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{212   \}}
\DoxyCodeLine{213 }
\DoxyCodeLine{214   \textcolor{keywordtype}{size\_t} request\_size = \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}};}
\DoxyCodeLine{215   \textcolor{comment}{// Adjust size to be able to accommodate alignment.}}
\DoxyCodeLine{216   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} dynamic\_alignment = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(alignment);}
\DoxyCodeLine{217   \textcolor{keywordflow}{if} (dynamic\_alignment != \mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}}) \{}
\DoxyCodeLine{218     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(2 * \textcolor{keyword}{sizeof}(HeapObjectHeader), dynamic\_alignment);}
\DoxyCodeLine{219     request\_size += \mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}};}
\DoxyCodeLine{220   \}}
\DoxyCodeLine{221 }
\DoxyCodeLine{222   \textcolor{keywordtype}{bool} success = \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919}{TryRefillLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, request\_size);}
\DoxyCodeLine{223   \textcolor{keywordflow}{if} (!success) \{}
\DoxyCodeLine{224     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < 2; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{225       \textcolor{keyword}{auto} config = \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_aa54d82825267ea64dcb758e65a34134b}{kOnAllocationFailureGCConfig}};}
\DoxyCodeLine{226       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}{garbage\_collector\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector_af180749d0543063c50f81447662b51c9}{CollectGarbage}}(config);}
\DoxyCodeLine{227       success = \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919}{TryRefillLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, request\_size);}
\DoxyCodeLine{228       \textcolor{keywordflow}{if} (success) \{}
\DoxyCodeLine{229         \textcolor{keywordflow}{break};}
\DoxyCodeLine{230       \}}
\DoxyCodeLine{231     \}}
\DoxyCodeLine{232     \textcolor{keywordflow}{if} (!success) \{}
\DoxyCodeLine{233 \textcolor{preprocessor}{\#if defined(CPPGC\_CAGED\_HEAP)}}
\DoxyCodeLine{234       \textcolor{keyword}{const} \textcolor{keyword}{auto} last\_alloc\_status =}
\DoxyCodeLine{235           \mbox{\hyperlink{classcppgc_1_1internal_1_1CagedHeap_af6307cef0cf2e4881a841abdab6f31bf}{CagedHeap::Instance}}().\mbox{\hyperlink{classcppgc_1_1internal_1_1CagedHeap_aa9ce4f91bc05d3ce87617f96df6b175b}{page\_allocator}}().\mbox{\hyperlink{classv8_1_1base_1_1BoundedPageAllocator_afa9824355128bd531794722882068e4d}{get\_last\_allocation\_status}}();}
\DoxyCodeLine{236       \textcolor{keyword}{const} \mbox{\hyperlink{namespacev8_1_1internal_af68b330f02476361ab10f531933b3381}{std::string}} suffix =}
\DoxyCodeLine{237           \mbox{\hyperlink{classv8_1_1base_1_1BoundedPageAllocator_a6c000e1f1efaf321f5df3b4738cbe77c}{v8::base::BoundedPageAllocator::AllocationStatusToString}}(}
\DoxyCodeLine{238               last\_alloc\_status);}
\DoxyCodeLine{239       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\_handler\_}}(\textcolor{stringliteral}{"{}Oilpan: Normal allocation. "{}} + suffix);}
\DoxyCodeLine{240 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{241       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}{oom\_handler\_}}(\textcolor{stringliteral}{"{}Oilpan: Normal allocation."{}});}
\DoxyCodeLine{242 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{243     \}}
\DoxyCodeLine{244   \}}
\DoxyCodeLine{245 }
\DoxyCodeLine{246   \textcolor{comment}{// The allocation must succeed, as we just refilled the LAB.}}
\DoxyCodeLine{247   \textcolor{keywordtype}{void}* \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = (dynamic\_alignment == \mbox{\hyperlink{namespacecppgc_1_1internal_aaba7fddb4e903ed04a345be335f48d68}{kAllocationGranularity}})}
\DoxyCodeLine{248                      ? \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, gcinfo)}
\DoxyCodeLine{249                      : \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a1a0de4cf375e469193a78fe04ad2bfce}{AllocateObjectOnSpace}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, alignment, gcinfo);}
\DoxyCodeLine{250   \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{251   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{252 \}}

\end{DoxyCode}


References Allocate\+Object\+On\+Space(), v8\+::base\+::\+Bounded\+Page\+Allocator\+::\+Allocation\+Status\+To\+String(), CHECK, CHECK\+\_\+\+EQ, cppgc\+::internal\+::\+Garbage\+Collector\+::\+Collect\+Garbage(), DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+LE, cppgc\+::internal\+::\+Large\+Page\+Space\+::\+From(), garbage\+\_\+collector\+\_\+, v8\+::base\+::\+Bounded\+Page\+Allocator\+::get\+\_\+last\+\_\+allocation\+\_\+status(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), cppgc\+::internal\+::\+Caged\+Heap\+::\+Instance(), cppgc\+::internal\+::k\+Allocation\+Granularity, cppgc\+::internal\+::k\+Allocation\+Mask, cppgc\+::internal\+::k\+Free\+List\+Entry\+Size, cppgc\+::internal\+::\+Raw\+Heap\+::k\+Large, cppgc\+::internal\+::k\+Large\+Object\+Size\+Threshold, cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::k\+On\+Allocation\+Failure\+GCConfig, oom\+\_\+handler\+\_\+, cppgc\+::internal\+::\+Caged\+Heap\+::page\+\_\+allocator(), page\+\_\+backend\+\_\+, raw\+\_\+heap\+\_\+, v8\+::base\+::internal\+::result, size(), space, cppgc\+::internal\+::\+Raw\+Heap\+::\+Space(), stats\+\_\+collector\+\_\+, v8\+::internal\+::string, cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Try\+Allocate\+Large\+Object(), and Try\+Refill\+Linear\+Allocation\+Buffer().



Referenced by Out\+Of\+Line\+Allocate\+GCSafe\+Point().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a57826e74e03e2f6c77f7853dd262c033_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c}\label{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!ResetLinearAllocationBuffers@{ResetLinearAllocationBuffers}}
\index{ResetLinearAllocationBuffers@{ResetLinearAllocationBuffers}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{ResetLinearAllocationBuffers()}{ResetLinearAllocationBuffers()}}
{\footnotesize\ttfamily void cppgc\+::internal\+::\+Object\+Allocator\+::\+Reset\+Linear\+Allocation\+Buffers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 331 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{331                                                    \{}
\DoxyCodeLine{332   \textcolor{keyword}{class }Resetter : \textcolor{keyword}{public} HeapVisitor<Resetter> \{}
\DoxyCodeLine{333    \textcolor{keyword}{public}:}
\DoxyCodeLine{334     \textcolor{keyword}{explicit} Resetter(StatsCollector\& stats) : \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}(stats) \{\}}
\DoxyCodeLine{335 }
\DoxyCodeLine{336     \textcolor{keywordtype}{bool} VisitLargePageSpace(LargePageSpace\&) \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{337 }
\DoxyCodeLine{338     \textcolor{keywordtype}{bool} VisitNormalPageSpace(NormalPageSpace\& \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}) \{}
\DoxyCodeLine{339       \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}{ReplaceLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}, \textcolor{keyword}{nullptr}, 0);}
\DoxyCodeLine{340       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{341     \}}
\DoxyCodeLine{342 }
\DoxyCodeLine{343    \textcolor{keyword}{private}:}
\DoxyCodeLine{344     StatsCollector\& \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}};}
\DoxyCodeLine{345   \} visitor(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}});}
\DoxyCodeLine{346 }
\DoxyCodeLine{347   visitor.Traverse(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}});}
\DoxyCodeLine{348 \}}

\end{DoxyCode}


References raw\+\_\+heap\+\_\+, cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Replace\+Linear\+Allocation\+Buffer(), space, and stats\+\_\+collector\+\_\+.



Referenced by cppgc\+::internal\+::\+Heap\+Base\+::\+Collect\+Statistics(), cppgc\+::internal\+::\+Pre\+Finalizer\+Handler\+::\+Invoke\+Pre\+Finalizers(), cppgc\+::internal\+::\+Heap\+Base\+::\+Terminate(), and cppgc\+::internal\+::\+Marker\+Base\+::\+Visit\+Local\+Roots().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_adbd79d8c4bb11ce40264af6d0669177c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11}\label{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!TryExpandAndRefillLinearAllocationBuffer@{TryExpandAndRefillLinearAllocationBuffer}}
\index{TryExpandAndRefillLinearAllocationBuffer@{TryExpandAndRefillLinearAllocationBuffer}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{TryExpandAndRefillLinearAllocationBuffer()}{TryExpandAndRefillLinearAllocationBuffer()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Object\+Allocator\+::\+Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 254 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{255                             \{}
\DoxyCodeLine{256   \textcolor{keyword}{auto}* \textcolor{keyword}{const} new\_page = \mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a3687dd2133c18bf5603a47e64e99328a}{NormalPage::TryCreate}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}{page\_backend\_}}, \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}});}
\DoxyCodeLine{257   \textcolor{keywordflow}{if} (!new\_page) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{258 }
\DoxyCodeLine{259   \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.AddPage(new\_page);}
\DoxyCodeLine{260   \textcolor{comment}{// Set linear allocation buffer to new page.}}
\DoxyCodeLine{261   \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}{ReplaceLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}},}
\DoxyCodeLine{262                                 new\_page-\/>PayloadStart(),}
\DoxyCodeLine{263                                 new\_page-\/>PayloadSize());}
\DoxyCodeLine{264   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{265 \}}

\end{DoxyCode}


References page\+\_\+backend\+\_\+, cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Replace\+Linear\+Allocation\+Buffer(), space, stats\+\_\+collector\+\_\+, and cppgc\+::internal\+::\+Normal\+Page\+::\+Try\+Create().



Referenced by Try\+Refill\+Linear\+Allocation\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919}\label{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!TryRefillLinearAllocationBuffer@{TryRefillLinearAllocationBuffer}}
\index{TryRefillLinearAllocationBuffer@{TryRefillLinearAllocationBuffer}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{TryRefillLinearAllocationBuffer()}{TryRefillLinearAllocationBuffer()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Object\+Allocator\+::\+Try\+Refill\+Linear\+Allocation\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 267 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{268                                                                    \{}
\DoxyCodeLine{269   \textcolor{comment}{// Try to allocate from the freelist.}}
\DoxyCodeLine{270   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}{TryRefillLinearAllocationBufferFromFreeList}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{271 }
\DoxyCodeLine{272   Sweeper\& sweeper = \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}{raw\_heap\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap_a06bdc6c257ea30691c7c883de2740263}{heap}}()-\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_af5ff8bbde513d79002501f81c6798df9}{sweeper}}();}
\DoxyCodeLine{273   \textcolor{comment}{// Lazily sweep pages of this heap. This is not exhaustive to limit jank on}}
\DoxyCodeLine{274   \textcolor{comment}{// allocation. Allocation from the free list may still fail as actual  buckets}}
\DoxyCodeLine{275   \textcolor{comment}{// are not exhaustively searched for a suitable block. Instead, buckets are}}
\DoxyCodeLine{276   \textcolor{comment}{// tested from larger sizes that are guaranteed to fit the block to smaller}}
\DoxyCodeLine{277   \textcolor{comment}{// bucket sizes that may only potentially fit the block. For the bucket that}}
\DoxyCodeLine{278   \textcolor{comment}{// may exactly fit the allocation of `size` bytes (no overallocation), only}}
\DoxyCodeLine{279   \textcolor{comment}{// the first entry is checked.}}
\DoxyCodeLine{280   \textcolor{keywordflow}{if} (sweeper.SweepForAllocationIfRunning(}
\DoxyCodeLine{281           \&\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1df269c42efa26b4b6defb9d83f850da}{v8::base::TimeDelta::FromMicroseconds}}(500)) \&\&}
\DoxyCodeLine{282       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}{TryRefillLinearAllocationBufferFromFreeList}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})) \{}
\DoxyCodeLine{283     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{284   \}}
\DoxyCodeLine{285 }
\DoxyCodeLine{286   \textcolor{comment}{// Sweeping was off or did not yield in any memory within limited}}
\DoxyCodeLine{287   \textcolor{comment}{// contributing. We expand at this point as that's cheaper than possibly}}
\DoxyCodeLine{288   \textcolor{comment}{// continuing sweeping the whole heap.}}
\DoxyCodeLine{289   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11}{TryExpandAndRefillLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}})) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{290 }
\DoxyCodeLine{291   \textcolor{comment}{// Expansion failed. Before finishing all sweeping, finish sweeping of a given}}
\DoxyCodeLine{292   \textcolor{comment}{// space which is cheaper.}}
\DoxyCodeLine{293   \textcolor{keywordflow}{if} (sweeper.SweepForAllocationIfRunning(\&\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}},}
\DoxyCodeLine{294                                           \mbox{\hyperlink{classv8_1_1base_1_1TimeDelta_a1330af8b50fc0206f46945ea8d6922cf}{v8::base::TimeDelta::Max}}()) \&\&}
\DoxyCodeLine{295       \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}{TryRefillLinearAllocationBufferFromFreeList}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})) \{}
\DoxyCodeLine{296     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{297   \}}
\DoxyCodeLine{298 }
\DoxyCodeLine{299   \textcolor{comment}{// Heap expansion and sweeping of a space failed. At this point the caller}}
\DoxyCodeLine{300   \textcolor{comment}{// could run OOM or do a full GC which needs to finish sweeping if it's}}
\DoxyCodeLine{301   \textcolor{comment}{// running. Hence, we may as well finish sweeping here. Note that this is}}
\DoxyCodeLine{302   \textcolor{comment}{// possibly very expensive but not more expensive than running a full GC as}}
\DoxyCodeLine{303   \textcolor{comment}{// the alternative is OOM.}}
\DoxyCodeLine{304   \textcolor{keywordflow}{if} (sweeper.FinishIfRunning()) \{}
\DoxyCodeLine{305     \textcolor{comment}{// Sweeping may have added memory to the free list.}}
\DoxyCodeLine{306     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}{TryRefillLinearAllocationBufferFromFreeList}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{307 }
\DoxyCodeLine{308     \textcolor{comment}{// Sweeping may have freed pages completely.}}
\DoxyCodeLine{309     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_a77e0e85e858486e0f283728315720a11}{TryExpandAndRefillLinearAllocationBuffer}}(\mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}})) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{310   \}}
\DoxyCodeLine{311   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{312 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Sweeper\+::\+Finish\+If\+Running(), v8\+::base\+::\+Time\+Delta\+::\+From\+Microseconds(), cppgc\+::internal\+::\+Raw\+Heap\+::heap(), v8\+::base\+::\+Time\+Delta\+::\+Max(), raw\+\_\+heap\+\_\+, size(), space, cppgc\+::internal\+::\+Heap\+Base\+::sweeper(), cppgc\+::internal\+::\+Sweeper\+::\+Sweep\+For\+Allocation\+If\+Running(), Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer(), and Try\+Refill\+Linear\+Allocation\+Buffer\+From\+Free\+List().



Referenced by Out\+Of\+Line\+Allocate\+Impl().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a0e1e6b792481c3e3175db06916609919_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}\label{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!TryRefillLinearAllocationBufferFromFreeList@{TryRefillLinearAllocationBufferFromFreeList}}
\index{TryRefillLinearAllocationBufferFromFreeList@{TryRefillLinearAllocationBufferFromFreeList}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{TryRefillLinearAllocationBufferFromFreeList()}{TryRefillLinearAllocationBufferFromFreeList()}}
{\footnotesize\ttfamily bool cppgc\+::internal\+::\+Object\+Allocator\+::\+Try\+Refill\+Linear\+Allocation\+Buffer\+From\+Free\+List (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPageSpace}{Normal\+Page\+Space}} \&}]{space,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 314 of file object-\/allocator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{315                                          \{}
\DoxyCodeLine{316   \textcolor{keyword}{const} FreeList::Block entry = \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}.free\_list().Allocate(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{317   \textcolor{keywordflow}{if} (!entry.address) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{318 }
\DoxyCodeLine{319   \textcolor{comment}{// Assume discarded memory on that page is now zero.}}
\DoxyCodeLine{320   \textcolor{keyword}{auto}\& page = *\mbox{\hyperlink{classcppgc_1_1internal_1_1NormalPage_a7f0a797270bdb5dc9f7c05be073481b5}{NormalPage::From}}(\mbox{\hyperlink{classcppgc_1_1internal_1_1BasePage_aad13cafeed6c2ea494b7423b9c527b7a}{BasePage::FromPayload}}(entry.address));}
\DoxyCodeLine{321   \textcolor{keywordflow}{if} (page.discarded\_memory()) \{}
\DoxyCodeLine{322     \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}.\mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector_a3f1aaf696059287fd6e20c8a502ce125}{DecrementDiscardedMemory}}(page.discarded\_memory());}
\DoxyCodeLine{323     page.ResetDiscardedMemory();}
\DoxyCodeLine{324   \}}
\DoxyCodeLine{325 }
\DoxyCodeLine{326   \mbox{\hyperlink{namespacecppgc_1_1internal_1_1anonymous__namespace_02object-allocator_8cc_03_a66e2495e1b4900d2c6d7322df59fb3c7}{ReplaceLinearAllocationBuffer}}(}
\DoxyCodeLine{327       \mbox{\hyperlink{flag-definitions_8h_a087fd0337c14e102a4a2abccd41a39ad}{space}}, \mbox{\hyperlink{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}{stats\_collector\_}}, \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{namespacecppgc_1_1internal_a5229c26742f473fcdcc68b715482635b}{Address}}\textcolor{keyword}{>}(entry.address), entry.size);}
\DoxyCodeLine{328   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{329 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Free\+List\+::\+Block\+::address, cppgc\+::internal\+::\+Stats\+Collector\+::\+Decrement\+Discarded\+Memory(), cppgc\+::internal\+::\+Normal\+Page\+::\+From(), cppgc\+::internal\+::\+Base\+Page\+::\+From\+Payload(), cppgc\+::internal\+::anonymous\+\_\+namespace\{object-\/allocator.\+cc\}\+::\+Replace\+Linear\+Allocation\+Buffer(), size(), cppgc\+::internal\+::\+Free\+List\+::\+Block\+::size, space, and stats\+\_\+collector\+\_\+.



Referenced by Try\+Refill\+Linear\+Allocation\+Buffer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1internal_1_1ObjectAllocator_a79a7ec52d7f7f8be9a81efa7cab1f6f1_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}\label{classcppgc_1_1internal_1_1ObjectAllocator_a5cd948a5180bba2865ac7ccee762aaf4}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!garbage\_collector\_@{garbage\_collector\_}}
\index{garbage\_collector\_@{garbage\_collector\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{garbage\_collector\_}{garbage\_collector\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1GarbageCollector}{Garbage\+Collector}}\& cppgc\+::internal\+::\+Object\+Allocator\+::garbage\+\_\+collector\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 104 of file object-\/allocator.\+h.



Referenced by Out\+Of\+Line\+Allocate\+Impl().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a14d2d6a90afe7b93f175fb7b16b390c7}\label{classcppgc_1_1internal_1_1ObjectAllocator_a14d2d6a90afe7b93f175fb7b16b390c7}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!kSmallestSpaceSize@{kSmallestSpaceSize}}
\index{kSmallestSpaceSize@{kSmallestSpaceSize}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{kSmallestSpaceSize}{kSmallestSpaceSize}}
{\footnotesize\ttfamily constexpr size\+\_\+t cppgc\+::internal\+::\+Object\+Allocator\+::k\+Smallest\+Space\+Size = 32\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



Definition at line 43 of file object-\/allocator.\+h.



Referenced by Get\+Initial\+Space\+Index\+For\+Size(), and cppgc\+::internal\+::anonymous\+\_\+namespace\{explicit-\/management.\+cc\}\+::\+Shrink().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}\label{classcppgc_1_1internal_1_1ObjectAllocator_ae1d1bc32e4efb9013fd38ab90f6825de}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!oom\_handler\_@{oom\_handler\_}}
\index{oom\_handler\_@{oom\_handler\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{oom\_handler\_}{oom\_handler\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1FatalOutOfMemoryHandler}{Fatal\+Out\+Of\+Memory\+Handler}}\& cppgc\+::internal\+::\+Object\+Allocator\+::oom\+\_\+handler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 103 of file object-\/allocator.\+h.



Referenced by Out\+Of\+Line\+Allocate\+Impl().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}\label{classcppgc_1_1internal_1_1ObjectAllocator_a53aa56839a01b2f7b2761a4eeea0169a}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!page\_backend\_@{page\_backend\_}}
\index{page\_backend\_@{page\_backend\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{page\_backend\_}{page\_backend\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1PageBackend}{Page\+Backend}}\& cppgc\+::internal\+::\+Object\+Allocator\+::page\+\_\+backend\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 100 of file object-\/allocator.\+h.



Referenced by Out\+Of\+Line\+Allocate\+Impl(), and Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}\label{classcppgc_1_1internal_1_1ObjectAllocator_a724632537de35b211d18d4b0141a9d78}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!prefinalizer\_handler\_@{prefinalizer\_handler\_}}
\index{prefinalizer\_handler\_@{prefinalizer\_handler\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{prefinalizer\_handler\_}{prefinalizer\_handler\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1PreFinalizerHandler}{Pre\+Finalizer\+Handler}}\& cppgc\+::internal\+::\+Object\+Allocator\+::prefinalizer\+\_\+handler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 102 of file object-\/allocator.\+h.



Referenced by Out\+Of\+Line\+Allocate\+GCSafe\+Point().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}\label{classcppgc_1_1internal_1_1ObjectAllocator_aae0b08f831c81f22bc4eaf92c15b3f7a}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!raw\_heap\_@{raw\_heap\_}}
\index{raw\_heap\_@{raw\_heap\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{raw\_heap\_}{raw\_heap\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1RawHeap}{Raw\+Heap}}\& cppgc\+::internal\+::\+Object\+Allocator\+::raw\+\_\+heap\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 99 of file object-\/allocator.\+h.



Referenced by Allocate\+Object(), in\+\_\+disallow\+\_\+gc\+\_\+scope(), Mark\+All\+Pages\+As\+Young(), Out\+Of\+Line\+Allocate\+Impl(), Reset\+Linear\+Allocation\+Buffers(), and Try\+Refill\+Linear\+Allocation\+Buffer().

\mbox{\Hypertarget{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}\label{classcppgc_1_1internal_1_1ObjectAllocator_ab67507a8f6dd9bc7bd9d9ffdec64953f}} 
\index{cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}!stats\_collector\_@{stats\_collector\_}}
\index{stats\_collector\_@{stats\_collector\_}!cppgc::internal::ObjectAllocator@{cppgc::internal::ObjectAllocator}}
\doxysubsubsection{\texorpdfstring{stats\_collector\_}{stats\_collector\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1internal_1_1StatsCollector}{Stats\+Collector}}\& cppgc\+::internal\+::\+Object\+Allocator\+::stats\+\_\+collector\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 101 of file object-\/allocator.\+h.



Referenced by Out\+Of\+Line\+Allocate\+GCSafe\+Point(), Out\+Of\+Line\+Allocate\+Impl(), Reset\+Linear\+Allocation\+Buffers(), Try\+Expand\+And\+Refill\+Linear\+Allocation\+Buffer(), and Try\+Refill\+Linear\+Allocation\+Buffer\+From\+Free\+List().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{object-allocator_8h}{object-\/allocator.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{object-allocator_8cc}{object-\/allocator.\+cc}}\end{DoxyCompactItemize}
