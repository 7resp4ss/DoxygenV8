\hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03}{}\doxysection{v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/x64.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03}\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a52369a52ca0070985936142320593264}{Load\+New\+Allocation\+Top}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} new\+\_\+top, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classint}{int}} size\+\_\+in\+\_\+bytes)
\item 
void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a8d790daf544c55936eecec264f482d43}{Load\+New\+Allocation\+Top}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} new\+\_\+top, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} size\+\_\+in\+\_\+bytes)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a226d4658ca94549255f0e33f62112ca8}{Allocate\+Raw}} (\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$masm, \mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}} register\+\_\+snapshot, \mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}} object, \mbox{\hyperlink{classT}{T}} size\+\_\+in\+\_\+bytes, \mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}} alloc\+\_\+type, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}} alignment)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a226d4658ca94549255f0e33f62112ca8}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a226d4658ca94549255f0e33f62112ca8}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}!AllocateRaw@{AllocateRaw}}
\index{AllocateRaw@{AllocateRaw}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{AllocateRaw()}{AllocateRaw()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/x64.\+cc\}\+::Allocate\+Raw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1maglev_1_1RegisterSnapshot}{Register\+Snapshot}}}]{register\+\_\+snapshot,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classT}{T}}}]{size\+\_\+in\+\_\+bytes,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_a604d5beeb6fc8639670f737ed201e20a}{Allocation\+Type}}}]{alloc\+\_\+type,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803}{Allocation\+Alignment}}}]{alignment }\end{DoxyParamCaption})}



Definition at line 38 of file maglev-\/assembler-\/x64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{41                                                 \{}
\DoxyCodeLine{42   \textcolor{comment}{// TODO(victorgomes): Call the runtime for large object allocation.}}
\DoxyCodeLine{43   \textcolor{comment}{// TODO(victorgomes): Support double alignment.}}
\DoxyCodeLine{44   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(alignment, \mbox{\hyperlink{namespacev8_1_1internal_ab6431cd9205265cf49909abcac939803a89dfe630590dbfe7004e6de0fabec67b}{kTaggedAligned}});}
\DoxyCodeLine{45   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.single\_generation) \{}
\DoxyCodeLine{46     alloc\_type = AllocationType::kOld;}
\DoxyCodeLine{47   \}}
\DoxyCodeLine{48   ExternalReference top = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a60f836e4f23b20abfb3e194df4dd6075}{SpaceAllocationTopAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{49   ExternalReference limit = \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_ae6e53e1e4985894fe83a1e4d60e48613}{SpaceAllocationLimitAddress}}(isolate, alloc\_type);}
\DoxyCodeLine{50   ZoneLabelRef done(masm);}
\DoxyCodeLine{51   \mbox{\hyperlink{namespacev8_1_1internal_1_1ETWJITInterface_a6782da00e5166055555c65db3a9ec7eb}{Register}} new\_top = \mbox{\hyperlink{namespacev8_1_1internal_a86d3328383670dd58368a5f91326793a}{kScratchRegister}};}
\DoxyCodeLine{52   \textcolor{comment}{// Check if there is enough space.}}
\DoxyCodeLine{53   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Move(\textcolor{keywordtype}{object}, \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top));}
\DoxyCodeLine{54   \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a8d790daf544c55936eecec264f482d43}{LoadNewAllocationTop}}(masm, new\_top, \textcolor{keywordtype}{object}, size\_in\_bytes);}
\DoxyCodeLine{55   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} cmpq(new\_top, \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(limit));}
\DoxyCodeLine{56   \textcolor{comment}{// Otherwise call runtime.}}
\DoxyCodeLine{57   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} JumpToDeferredIf(\mbox{\hyperlink{namespacev8_1_1internal_a271f8ea99b7c0bbd771df015d4e4cf21a3f018e64c0aa70e5dcccba23cd6e8ff6}{kUnsignedGreaterThanEqual}}, AllocateSlow<T>,}
\DoxyCodeLine{58                       register\_snapshot, \textcolor{keywordtype}{object}, \mbox{\hyperlink{namespacev8_1_1internal_1_1maglev_a222b79e7e4247885c5eb1d6613141e72}{AllocateBuiltin}}(alloc\_type),}
\DoxyCodeLine{59                       size\_in\_bytes, done);}
\DoxyCodeLine{60   \textcolor{comment}{// Store new top and tag object.}}
\DoxyCodeLine{61   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} movq(\mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} ExternalReferenceAsOperand(top), new\_top);}
\DoxyCodeLine{62   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} addq(\textcolor{keywordtype}{object}, Immediate(\mbox{\hyperlink{namespacev8_1_1internal_aa2507eb9d594b9767347031fb02d0b20}{kHeapObjectTag}}));}
\DoxyCodeLine{63   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} bind(*done);}
\DoxyCodeLine{64 \}}

\end{DoxyCode}


References \+\_\+\+\_\+, v8\+::internal\+::maglev\+::\+Allocate\+Builtin(), DCHECK\+\_\+\+EQ, v8\+::internal\+::k\+Heap\+Object\+Tag, v8\+::internal\+::k\+Old, v8\+::internal\+::k\+Scratch\+Register, v8\+::internal\+::k\+Tagged\+Aligned, v8\+::internal\+::k\+Unsigned\+Greater\+Than\+Equal, Load\+New\+Allocation\+Top(), v8\+::internal\+::maglev\+::\+Space\+Allocation\+Limit\+Address(), v8\+::internal\+::maglev\+::\+Space\+Allocation\+Top\+Address(), and v8\+::internal\+::v8\+\_\+flags.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a226d4658ca94549255f0e33f62112ca8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a52369a52ca0070985936142320593264}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a52369a52ca0070985936142320593264}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}!LoadNewAllocationTop@{LoadNewAllocationTop}}
\index{LoadNewAllocationTop@{LoadNewAllocationTop}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{LoadNewAllocationTop()}{LoadNewAllocationTop()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/x64.\+cc\}\+::Load\+New\+Allocation\+Top (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{new\+\_\+top,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classint}{int}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 26 of file maglev-\/assembler-\/x64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{27                                                               \{}
\DoxyCodeLine{28   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} leaq(new\_top, Operand(\textcolor{keywordtype}{object}, size\_in\_bytes));}
\DoxyCodeLine{29 \}}

\end{DoxyCode}


References \+\_\+\+\_\+.

\mbox{\Hypertarget{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a8d790daf544c55936eecec264f482d43}\label{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a8d790daf544c55936eecec264f482d43}} 
\index{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}!LoadNewAllocationTop@{LoadNewAllocationTop}}
\index{LoadNewAllocationTop@{LoadNewAllocationTop}!v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}@{v8::internal::maglev::anonymous\_namespace\lcurly{}maglev-\/assembler-\/x64.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{LoadNewAllocationTop()}{LoadNewAllocationTop()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void v8\+::internal\+::maglev\+::anonymous\+\_\+namespace\{maglev-\/assembler-\/x64.\+cc\}\+::Load\+New\+Allocation\+Top (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1maglev_1_1MaglevAssembler}{Maglev\+Assembler}} $\ast$}]{masm,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{new\+\_\+top,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{object,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Register}{Register}}}]{size\+\_\+in\+\_\+bytes }\end{DoxyParamCaption})}



Definition at line 31 of file maglev-\/assembler-\/x64.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{32                                                                    \{}
\DoxyCodeLine{33   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} Move(new\_top, \textcolor{keywordtype}{object});}
\DoxyCodeLine{34   \mbox{\hyperlink{maglev-assembler-x64_8cc_a0a87998f4e8cee4888f2a89df3d5639b}{\_\_}} addq(new\_top, size\_in\_bytes);}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References \+\_\+\+\_\+.



Referenced by Allocate\+Raw().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1maglev_1_1anonymous__namespace_02maglev-assembler-x64_8cc_03_a8d790daf544c55936eecec264f482d43_icgraph}
\end{center}
\end{figure}
