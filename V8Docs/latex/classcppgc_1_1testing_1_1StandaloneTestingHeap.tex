\hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap}{}\doxysection{cppgc\+::testing\+::Standalone\+Testing\+Heap Class Reference}
\label{classcppgc_1_1testing_1_1StandaloneTestingHeap}\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}


Testing interface for managed heaps that allows for controlling garbage collection timings.  




{\ttfamily \#include $<$testing.\+h$>$}



Collaboration diagram for cppgc\+::testing\+::Standalone\+Testing\+Heap\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_acdc4907eb28a92096f00794b234e8eab}{Standalone\+Testing\+Heap}} (\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \&)
\item 
void \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a642208345ac733070b635bf5abebb8d9}{Start\+Garbage\+Collection}} ()
\begin{DoxyCompactList}\small\item\em Start an incremental garbage collection. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac8e5a55c48bc0b2d758b07e402adadd9}{Perform\+Marking\+Step}} (\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}} stack\+\_\+state)
\begin{DoxyCompactList}\small\item\em Perform an incremental step. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a598cbc628f8f436d085970d008748149}{Finalize\+Garbage\+Collection}} (\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}} stack\+\_\+state)
\begin{DoxyCompactList}\small\item\em Finalize the current garbage collection cycle atomically. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a52595d39c18713e9015f90b03c52a29c}{Toggle\+Main\+Thread\+Marking}} (bool should\+\_\+mark)
\begin{DoxyCompactList}\small\item\em Toggle main thread marking on/off. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac7a9ae8c4d350d85124045ac98154010}{Force\+Compaction\+For\+Next\+Garbage\+Collection}} ()
\begin{DoxyCompactList}\small\item\em Force enable compaction for the next garbage collection cycle. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \& \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\+\_\+handle\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Testing interface for managed heaps that allows for controlling garbage collection timings. 

Embedders should use this class when testing the interaction of their code with incremental/concurrent garbage collection. 

Definition at line 57 of file testing.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_acdc4907eb28a92096f00794b234e8eab}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_acdc4907eb28a92096f00794b234e8eab}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!StandaloneTestingHeap@{StandaloneTestingHeap}}
\index{StandaloneTestingHeap@{StandaloneTestingHeap}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{StandaloneTestingHeap()}{StandaloneTestingHeap()}}
{\footnotesize\ttfamily cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Standalone\+Testing\+Heap (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}} \&}]{heap\+\_\+handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 23 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{24     : \mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}}(heap\_handle) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_a598cbc628f8f436d085970d008748149}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_a598cbc628f8f436d085970d008748149}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!FinalizeGarbageCollection@{FinalizeGarbageCollection}}
\index{FinalizeGarbageCollection@{FinalizeGarbageCollection}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{FinalizeGarbageCollection()}{FinalizeGarbageCollection()}}
{\footnotesize\ttfamily void cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Finalize\+Garbage\+Collection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}}}]{stack\+\_\+state }\end{DoxyParamCaption})}



Finalize the current garbage collection cycle atomically. 

Assumes that garbage collection is in progress.


\begin{DoxyParams}{Parameters}
{\em stack\+\_\+state} & The state of the stack for finalizing the garbage collection cycle. \\
\hline
\end{DoxyParams}


Definition at line 37 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{38                                     \{}
\DoxyCodeLine{39   \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a19c54924cf647b00b3f196fef52f7b67}{internal::HeapBase::From}}(\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}})}
\DoxyCodeLine{40       .\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_aa1b33b3c698b818bf2dd9e5444b75dbe}{FinalizeIncrementalGarbageCollectionForTesting}}(stack\_state);}
\DoxyCodeLine{41 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::\+Finalize\+Incremental\+Garbage\+Collection\+For\+Testing(), cppgc\+::internal\+::\+Heap\+Base\+::\+From(), and heap\+\_\+handle\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap_a598cbc628f8f436d085970d008748149_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac7a9ae8c4d350d85124045ac98154010}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac7a9ae8c4d350d85124045ac98154010}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!ForceCompactionForNextGarbageCollection@{ForceCompactionForNextGarbageCollection}}
\index{ForceCompactionForNextGarbageCollection@{ForceCompactionForNextGarbageCollection}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{ForceCompactionForNextGarbageCollection()}{ForceCompactionForNextGarbageCollection()}}
{\footnotesize\ttfamily void cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Force\+Compaction\+For\+Next\+Garbage\+Collection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Force enable compaction for the next garbage collection cycle. 



Definition at line 49 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                                                                     \{}
\DoxyCodeLine{50   \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a19c54924cf647b00b3f196fef52f7b67}{internal::HeapBase::From}}(\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}})}
\DoxyCodeLine{51       .\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a324a8c481e3a08d54ce6eaf41e5ae262}{compactor}}()}
\DoxyCodeLine{52       .\mbox{\hyperlink{classcppgc_1_1internal_1_1Compactor_aafa13e5a3aabd536286f0353ac9c7ee6}{EnableForNextGCForTesting}}();}
\DoxyCodeLine{53 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::compactor(), cppgc\+::internal\+::\+Compactor\+::\+Enable\+For\+Next\+GCFor\+Testing(), cppgc\+::internal\+::\+Heap\+Base\+::\+From(), and heap\+\_\+handle\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac7a9ae8c4d350d85124045ac98154010_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac8e5a55c48bc0b2d758b07e402adadd9}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac8e5a55c48bc0b2d758b07e402adadd9}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!PerformMarkingStep@{PerformMarkingStep}}
\index{PerformMarkingStep@{PerformMarkingStep}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{PerformMarkingStep()}{PerformMarkingStep()}}
{\footnotesize\ttfamily bool cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Perform\+Marking\+Step (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacecppgc_a91b484d5d6eea7664c25f4050c0d6eb8}{Embedder\+Stack\+State}}}]{stack\+\_\+state }\end{DoxyParamCaption})}



Perform an incremental step. 

This will also schedule concurrent steps if needed.


\begin{DoxyParams}{Parameters}
{\em stack\+\_\+state} & The state of the stack during the step. \\
\hline
\end{DoxyParams}


Definition at line 31 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{31                                                                              \{}
\DoxyCodeLine{32   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a19c54924cf647b00b3f196fef52f7b67}{internal::HeapBase::From}}(\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}})}
\DoxyCodeLine{33       .\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a901cccc00adf3502f3884d832063f6c3}{marker}}()}
\DoxyCodeLine{34       -\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1MarkerBase_a5090be2717ddd3a779de5f2328b38b3c}{IncrementalMarkingStepForTesting}}(stack\_state);}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::\+From(), heap\+\_\+handle\+\_\+, cppgc\+::internal\+::\+Marker\+Base\+::\+Incremental\+Marking\+Step\+For\+Testing(), and cppgc\+::internal\+::\+Heap\+Base\+::marker().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap_ac8e5a55c48bc0b2d758b07e402adadd9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_a642208345ac733070b635bf5abebb8d9}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_a642208345ac733070b635bf5abebb8d9}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!StartGarbageCollection@{StartGarbageCollection}}
\index{StartGarbageCollection@{StartGarbageCollection}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{StartGarbageCollection()}{StartGarbageCollection()}}
{\footnotesize\ttfamily void cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Start\+Garbage\+Collection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Start an incremental garbage collection. 



Definition at line 26 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{26                                                    \{}
\DoxyCodeLine{27   \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a19c54924cf647b00b3f196fef52f7b67}{internal::HeapBase::From}}(\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}})}
\DoxyCodeLine{28       .\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a799612a61b404d09c76123285db9f4ae}{StartIncrementalGarbageCollectionForTesting}}();}
\DoxyCodeLine{29 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::\+From(), heap\+\_\+handle\+\_\+, and cppgc\+::internal\+::\+Heap\+Base\+::\+Start\+Incremental\+Garbage\+Collection\+For\+Testing().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap_a642208345ac733070b635bf5abebb8d9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_a52595d39c18713e9015f90b03c52a29c}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_a52595d39c18713e9015f90b03c52a29c}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!ToggleMainThreadMarking@{ToggleMainThreadMarking}}
\index{ToggleMainThreadMarking@{ToggleMainThreadMarking}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{ToggleMainThreadMarking()}{ToggleMainThreadMarking()}}
{\footnotesize\ttfamily void cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::\+Toggle\+Main\+Thread\+Marking (\begin{DoxyParamCaption}\item[{bool}]{should\+\_\+mark }\end{DoxyParamCaption})}



Toggle main thread marking on/off. 

Allows to stress concurrent marking (e.\+g. to better detect data races).


\begin{DoxyParams}{Parameters}
{\em should\+\_\+mark} & Denotes whether the main thread should contribute to marking. Defaults to true. \\
\hline
\end{DoxyParams}


Definition at line 43 of file testing.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{43                                                                     \{}
\DoxyCodeLine{44   \mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a19c54924cf647b00b3f196fef52f7b67}{internal::HeapBase::From}}(\mbox{\hyperlink{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}{heap\_handle\_}})}
\DoxyCodeLine{45       .\mbox{\hyperlink{classcppgc_1_1internal_1_1HeapBase_a901cccc00adf3502f3884d832063f6c3}{marker}}()}
\DoxyCodeLine{46       -\/>\mbox{\hyperlink{classcppgc_1_1internal_1_1MarkerBase_acaadd48506a29b3c3f1ea664be85e141}{SetMainThreadMarkingDisabledForTesting}}(!should\_mark);}
\DoxyCodeLine{47 \}}

\end{DoxyCode}


References cppgc\+::internal\+::\+Heap\+Base\+::\+From(), heap\+\_\+handle\+\_\+, cppgc\+::internal\+::\+Heap\+Base\+::marker(), and cppgc\+::internal\+::\+Marker\+Base\+::\+Set\+Main\+Thread\+Marking\+Disabled\+For\+Testing().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcppgc_1_1testing_1_1StandaloneTestingHeap_a52595d39c18713e9015f90b03c52a29c_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}\label{classcppgc_1_1testing_1_1StandaloneTestingHeap_a157c3088e74f74b924bde5c279024788}} 
\index{cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}!heap\_handle\_@{heap\_handle\_}}
\index{heap\_handle\_@{heap\_handle\_}!cppgc::testing::StandaloneTestingHeap@{cppgc::testing::StandaloneTestingHeap}}
\doxysubsubsection{\texorpdfstring{heap\_handle\_}{heap\_handle\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcppgc_1_1HeapHandle}{Heap\+Handle}}\& cppgc\+::testing\+::\+Standalone\+Testing\+Heap\+::heap\+\_\+handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 98 of file testing.\+h.



Referenced by Finalize\+Garbage\+Collection(), Force\+Compaction\+For\+Next\+Garbage\+Collection(), Perform\+Marking\+Step(), Start\+Garbage\+Collection(), and Toggle\+Main\+Thread\+Marking().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/include/cppgc/\mbox{\hyperlink{include_2cppgc_2testing_8h}{testing.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/heap/cppgc/\mbox{\hyperlink{heap_2cppgc_2testing_8cc}{testing.\+cc}}\end{DoxyCompactItemize}
