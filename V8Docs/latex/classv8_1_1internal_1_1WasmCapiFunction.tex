\hypertarget{classv8_1_1internal_1_1WasmCapiFunction}{}\doxysection{v8\+::internal\+::Wasm\+Capi\+Function Class Reference}
\label{classv8_1_1internal_1_1WasmCapiFunction}\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}


{\ttfamily \#include $<$wasm-\/objects.\+h$>$}



Inheritance diagram for v8\+::internal\+::Wasm\+Capi\+Function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1WasmCapiFunction__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Wasm\+Capi\+Function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalSig}{wasm\+::\+Canonical\+Sig}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}{sig}} () const
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_aa65370f2fd8cec8f4042ab5b2fa79b7a}{Matches\+Signature}} (\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex}{wasm\+::\+Canonical\+Type\+Index}} other\+\_\+canonical\+\_\+sig\+\_\+index) const
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a20063d3cb25739ff999cd4cee5c4c3ea}{OBJECT\+\_\+\+CONSTRUCTORS}} (\mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction}{Wasm\+Capi\+Function}}, \mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}})
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a62930ad9bbbf2736e47ad0b607ee0c83}{Is\+Wasm\+Capi\+Function}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ object)
\item 
static \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction}{Wasm\+Capi\+Function}} $>$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a346b5906717c251f219e6fdc0115c39f}{New}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} call\+\_\+target, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Foreign}{Foreign}} $>$ embedder\+\_\+data, \mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex}{wasm\+::\+Canonical\+Type\+Index}} sig\+\_\+index, const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalSig}{wasm\+::\+Canonical\+Sig}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}{sig}})
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 1042 of file wasm-\/objects.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmCapiFunction_a62930ad9bbbf2736e47ad0b607ee0c83}\label{classv8_1_1internal_1_1WasmCapiFunction_a62930ad9bbbf2736e47ad0b607ee0c83}} 
\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}!IsWasmCapiFunction@{IsWasmCapiFunction}}
\index{IsWasmCapiFunction@{IsWasmCapiFunction}!v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}
\doxysubsubsection{\texorpdfstring{IsWasmCapiFunction()}{IsWasmCapiFunction()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Wasm\+Capi\+Function\+::\+Is\+Wasm\+Capi\+Function (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{object }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 2917 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2917                                                                \{}
\DoxyCodeLine{2918   \textcolor{keywordflow}{if} (!IsJSFunction(\textcolor{keywordtype}{object})) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{2919   Tagged<JSFunction> js\_function = Cast<JSFunction>(\textcolor{keywordtype}{object});}
\DoxyCodeLine{2920   \textcolor{comment}{// TODO(jkummerow): Enable this when there is a JavaScript wrapper}}
\DoxyCodeLine{2921   \textcolor{comment}{// able to call this function.}}
\DoxyCodeLine{2922   \textcolor{comment}{// if (js\_function-\/>code()-\/>kind() != CodeKind::WASM\_TO\_CAPI\_FUNCTION) \{}}
\DoxyCodeLine{2923   \textcolor{comment}{//   return false;}}
\DoxyCodeLine{2924   \textcolor{comment}{// \}}}
\DoxyCodeLine{2925   \textcolor{comment}{// DCHECK(js\_function-\/>shared()-\/>HasWasmCapiFunctionData(}}
\DoxyCodeLine{2926   \textcolor{comment}{//        GetCurrentIsolateForSandbox()));}}
\DoxyCodeLine{2927   \textcolor{comment}{// return true;}}
\DoxyCodeLine{2928   \textcolor{keywordflow}{return} js\_function-\/>shared()-\/>HasWasmCapiFunctionData(}
\DoxyCodeLine{2929       \mbox{\hyperlink{namespacev8_1_1internal_adb23f3baf7223f8c3acb2901e2491245}{GetCurrentIsolateForSandbox}}());}
\DoxyCodeLine{2930 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Get\+Current\+Isolate\+For\+Sandbox().



Referenced by v8\+::internal\+::\+Cast\+Traits$<$ Wasm\+Capi\+Function $>$\+::\+Allow\+From(), v8\+::internal\+::wasm\+::\+Resolved\+Wasm\+Import\+::\+Compute\+Kind(), v8\+::internal\+::\+Wasm\+External\+Function\+::\+Is\+Wasm\+External\+Function(), v8\+::internal\+::wasm\+::\+JSTo\+Wasm\+Object(), and v8\+::internal\+::\+Wasm\+Table\+Object\+::\+Set\+Function\+Table\+Entry().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_a62930ad9bbbf2736e47ad0b607ee0c83_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_a62930ad9bbbf2736e47ad0b607ee0c83_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmCapiFunction_aa65370f2fd8cec8f4042ab5b2fa79b7a}\label{classv8_1_1internal_1_1WasmCapiFunction_aa65370f2fd8cec8f4042ab5b2fa79b7a}} 
\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}!MatchesSignature@{MatchesSignature}}
\index{MatchesSignature@{MatchesSignature}!v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}
\doxysubsubsection{\texorpdfstring{MatchesSignature()}{MatchesSignature()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Wasm\+Capi\+Function\+::\+Matches\+Signature (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex}{wasm\+::\+Canonical\+Type\+Index}}}]{other\+\_\+canonical\+\_\+sig\+\_\+index }\end{DoxyParamCaption}) const}



Definition at line 2735 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2736                                                             \{}
\DoxyCodeLine{2737 \textcolor{preprocessor}{\#if DEBUG}}
\DoxyCodeLine{2738   \textcolor{comment}{// TODO(14034): Change this if indexed types are allowed.}}
\DoxyCodeLine{2739   \textcolor{keywordflow}{for} (wasm::CanonicalValueType \mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}} : this-\/>\mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}{sig}}()-\/>\mbox{\hyperlink{flag-definitions_8h_aeb1d337a6a2e13e2e9fa9e47fb153aa3}{all}}()) \{}
\DoxyCodeLine{2740     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!\mbox{\hyperlink{namespacev8_1_1internal_1_1tracing_a96000282e12b2483531025283d63154d}{type}}.has\_index());}
\DoxyCodeLine{2741   \}}
\DoxyCodeLine{2742 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{2743   \textcolor{comment}{// TODO(14034): Check for subtyping instead if C API functions can define}}
\DoxyCodeLine{2744   \textcolor{comment}{// signature supertype.}}
\DoxyCodeLine{2745   \textcolor{keywordflow}{return} shared()-\/>wasm\_capi\_function\_data()-\/>sig\_index() ==}
\DoxyCodeLine{2746          other\_canonical\_sig\_index;}
\DoxyCodeLine{2747 \}}

\end{DoxyCode}


References all, CHECK, sig(), and v8\+::internal\+::tracing\+::type.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_aa65370f2fd8cec8f4042ab5b2fa79b7a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmCapiFunction_a346b5906717c251f219e6fdc0115c39f}\label{classv8_1_1internal_1_1WasmCapiFunction_a346b5906717c251f219e6fdc0115c39f}} 
\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}!New@{New}}
\index{New@{New}!v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}
\doxysubsubsection{\texorpdfstring{New()}{New()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction}{Wasm\+Capi\+Function}} $>$ v8\+::internal\+::\+Wasm\+Capi\+Function\+::\+New (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{call\+\_\+target,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Foreign}{Foreign}} $>$}]{embedder\+\_\+data,  }\item[{\mbox{\hyperlink{structv8_1_1internal_1_1wasm_1_1CanonicalTypeIndex}{wasm\+::\+Canonical\+Type\+Index}}}]{sig\+\_\+index,  }\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalSig}{wasm\+::\+Canonical\+Sig}} $\ast$}]{sig }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 2932 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2934                                                                    \{}
\DoxyCodeLine{2935   \textcolor{comment}{// TODO(jkummerow): Install a JavaScript wrapper. For now, calling}}
\DoxyCodeLine{2936   \textcolor{comment}{// these functions directly is unsupported; they can only be called}}
\DoxyCodeLine{2937   \textcolor{comment}{// from Wasm code.}}
\DoxyCodeLine{2938 }
\DoxyCodeLine{2939   \textcolor{comment}{// To support simulator builds, we potentially have to redirect the}}
\DoxyCodeLine{2940   \textcolor{comment}{// call target (which is an address pointing into the C++ binary).}}
\DoxyCodeLine{2941   call\_target = \mbox{\hyperlink{classv8_1_1internal_1_1ExternalReference_af4f8bd08709c2b99f51c5dea884e63af}{ExternalReference::Create}}(call\_target).\mbox{\hyperlink{classv8_1_1internal_1_1ExternalReference_aadf8c6aed72f2104bd107b194c7d86a8}{address}}();}
\DoxyCodeLine{2942 }
\DoxyCodeLine{2943   DirectHandle<Map> rtt = isolate-\/>factory()-\/>wasm\_func\_ref\_map();}
\DoxyCodeLine{2944   DirectHandle<WasmCapiFunctionData> fun\_data =}
\DoxyCodeLine{2945       isolate-\/>factory()-\/>NewWasmCapiFunctionData(}
\DoxyCodeLine{2946           call\_target, embedder\_data, \mbox{\hyperlink{builtins_8h_af33bd0f259d8e6a511fd018115e0d62c}{BUILTIN\_CODE}}(isolate, Illegal), rtt,}
\DoxyCodeLine{2947           sig\_index, \mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}{sig}});}
\DoxyCodeLine{2948   DirectHandle<SharedFunctionInfo> shared =}
\DoxyCodeLine{2949       isolate-\/>factory()-\/>NewSharedFunctionInfoForWasmCapiFunction(fun\_data);}
\DoxyCodeLine{2950   DirectHandle<JSFunction> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{2951       Factory::JSFunctionBuilder\{isolate, shared, isolate-\/>native\_context()\}}
\DoxyCodeLine{2952           .Build();}
\DoxyCodeLine{2953   fun\_data-\/>internal()-\/>set\_external(*\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{2954   \textcolor{keywordflow}{return} Cast<WasmCapiFunction>(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{2955 \}}

\end{DoxyCode}


References v8\+::internal\+::\+External\+Reference\+::address(), BUILTIN\+\_\+\+CODE, v8\+::internal\+::\+External\+Reference\+::\+Create(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::base\+::internal\+::result, and sig().



Referenced by wasm\+::anonymous\+\_\+namespace\{c-\/api.\+cc\}\+::make\+\_\+func().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_a346b5906717c251f219e6fdc0115c39f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_a346b5906717c251f219e6fdc0115c39f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1WasmCapiFunction_a20063d3cb25739ff999cd4cee5c4c3ea}\label{classv8_1_1internal_1_1WasmCapiFunction_a20063d3cb25739ff999cd4cee5c4c3ea}} 
\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}!OBJECT\_CONSTRUCTORS@{OBJECT\_CONSTRUCTORS}}
\index{OBJECT\_CONSTRUCTORS@{OBJECT\_CONSTRUCTORS}!v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}
\doxysubsubsection{\texorpdfstring{OBJECT\_CONSTRUCTORS()}{OBJECT\_CONSTRUCTORS()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Wasm\+Capi\+Function\+::\+OBJECT\+\_\+\+CONSTRUCTORS (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1WasmCapiFunction}{Wasm\+Capi\+Function}}}]{,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1JSFunction}{JSFunction}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}\label{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d}} 
\index{v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}!sig@{sig}}
\index{sig@{sig}!v8::internal::WasmCapiFunction@{v8::internal::WasmCapiFunction}}
\doxysubsubsection{\texorpdfstring{sig()}{sig()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classv8_1_1internal_1_1wasm_1_1CanonicalSig}{wasm\+::\+Canonical\+Sig}} $\ast$ v8\+::internal\+::\+Wasm\+Capi\+Function\+::sig (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 2416 of file wasm-\/objects.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{2416                                                     \{}
\DoxyCodeLine{2417   \textcolor{keywordflow}{return} shared()-\/>wasm\_capi\_function\_data()-\/>sig();}
\DoxyCodeLine{2418 \}}

\end{DoxyCode}


Referenced by Matches\+Signature(), and New().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1WasmCapiFunction_a303283aba317fedb0d548295dd9f3a2d_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-objects_8h}{wasm-\/objects.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/wasm/\mbox{\hyperlink{wasm-objects_8cc}{wasm-\/objects.\+cc}}\end{DoxyCompactItemize}
