\hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03}{}\doxysection{v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.cc\} Namespace Reference}
\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03}\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}} \{ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a151ebb35c36eff6f3b64250f025a4b3c}{k\+Use\+Hint}}
, \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5aef9613fa70ecdfbbeefbd6c01f7d0278}{k\+Anywhere}}
, \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a826888a09763de7e2a9f60eb85d88b24}{k\+Fixed}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a6a1f704e4424e4593b94c4d9bfc6ccdf}{Set\+Vmex\+Resource}} ()
\item 
zx\+\_\+vm\+\_\+option\+\_\+t \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aee247bf5d1a23d7820178933c108211a}{Get\+Protection\+From\+Memory\+Permission}} (\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
zx\+\_\+vm\+\_\+option\+\_\+t \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828}{Get\+Alignment\+Option\+From\+Alignment}} (size\+\_\+t alignment)
\item 
void $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1}{Map\+Vmo}} (const zx\+::vmar \&vmar, void $\ast$vmar\+\_\+base, size\+\_\+t page\+\_\+size, void $\ast$address, const zx\+::vmo \&vmo, uint64\+\_\+t offset, \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}} placement, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t alignment, \mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
void $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a7df0265bdaf933e161733432fad5c467}{Create\+And\+Map\+Vmo}} (const zx\+::vmar \&vmar, void $\ast$vmar\+\_\+base, size\+\_\+t page\+\_\+size, void $\ast$address, \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}} placement, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t alignment, \mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
bool \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ac184c233736e31266feb997d14c56660}{Unmap\+Vmo}} (const zx\+::vmar \&vmar, size\+\_\+t page\+\_\+size, void $\ast$address, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
bool \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ae8268110e64fe5871bed6ec06ff11e54}{Set\+Permissions\+Internal}} (const zx\+::vmar \&vmar, size\+\_\+t page\+\_\+size, void $\ast$address, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} access)
\item 
bool \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a54f2a39ff3fafebcabd2e843bc579bb0}{Discard\+System\+Pages\+Internal}} (const zx\+::vmar \&vmar, size\+\_\+t page\+\_\+size, void $\ast$address, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}})
\item 
zx\+\_\+status\+\_\+t \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a3a92636e3e2a288714c57d1c7b75b369}{Create\+Address\+Space\+Reservation\+Internal}} (const zx\+::vmar \&vmar, void $\ast$vmar\+\_\+base, size\+\_\+t page\+\_\+size, void $\ast$address, \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}} placement, size\+\_\+t \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, size\+\_\+t alignment, \mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}} max\+\_\+permission, zx\+::vmar $\ast$child, zx\+\_\+vaddr\+\_\+t $\ast$child\+\_\+addr)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static zx\+\_\+handle\+\_\+t \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}{g\+\_\+vmex\+\_\+resource}} = ZX\+\_\+\+HANDLE\+\_\+\+INVALID
\item 
static void $\ast$ \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aa188ad15915a9bb1818e900ce6909b29}{g\+\_\+root\+\_\+vmar\+\_\+base}} = \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}
\end{DoxyCompactItemize}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!PlacementMode@{PlacementMode}}
\index{PlacementMode@{PlacementMode}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{PlacementMode}{PlacementMode}}
{\footnotesize\ttfamily enum v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{kUseHint@{kUseHint}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!kUseHint@{kUseHint}}}\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a151ebb35c36eff6f3b64250f025a4b3c}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a151ebb35c36eff6f3b64250f025a4b3c}} 
k\+Use\+Hint&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kAnywhere@{kAnywhere}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!kAnywhere@{kAnywhere}}}\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5aef9613fa70ecdfbbeefbd6c01f7d0278}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5aef9613fa70ecdfbbeefbd6c01f7d0278}} 
k\+Anywhere&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{kFixed@{kFixed}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!kFixed@{kFixed}}}\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a826888a09763de7e2a9f60eb85d88b24}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a826888a09763de7e2a9f60eb85d88b24}} 
k\+Fixed&\\
\hline

\end{DoxyEnumFields}


Definition at line 88 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{88                          \{}
\DoxyCodeLine{89   \textcolor{comment}{// Attempt to place the object at the provided address, otherwise elsewhere.}}
\DoxyCodeLine{90   \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a151ebb35c36eff6f3b64250f025a4b3c}{kUseHint}},}
\DoxyCodeLine{91   \textcolor{comment}{// Place the object anywhere it fits.}}
\DoxyCodeLine{92   \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5aef9613fa70ecdfbbeefbd6c01f7d0278}{kAnywhere}},}
\DoxyCodeLine{93   \textcolor{comment}{// Place the object at the provided address, otherwise fail.}}
\DoxyCodeLine{94   \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5a826888a09763de7e2a9f60eb85d88b24}{kFixed}}}
\DoxyCodeLine{95 \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a3a92636e3e2a288714c57d1c7b75b369}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a3a92636e3e2a288714c57d1c7b75b369}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!CreateAddressSpaceReservationInternal@{CreateAddressSpaceReservationInternal}}
\index{CreateAddressSpaceReservationInternal@{CreateAddressSpaceReservationInternal}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CreateAddressSpaceReservationInternal()}{CreateAddressSpaceReservationInternal()}}
{\footnotesize\ttfamily zx\+\_\+status\+\_\+t v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Create\+Address\+Space\+Reservation\+Internal (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{void $\ast$}]{vmar\+\_\+base,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}}}]{placement,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t}]{alignment,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{max\+\_\+permission,  }\item[{zx\+::vmar $\ast$}]{child,  }\item[{zx\+\_\+vaddr\+\_\+t $\ast$}]{child\+\_\+addr }\end{DoxyParamCaption})}



Definition at line 206 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{210                             \{}
\DoxyCodeLine{211   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \% page\_size);}
\DoxyCodeLine{212   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, alignment \% page\_size);}
\DoxyCodeLine{213   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address) \% alignment);}
\DoxyCodeLine{214   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(placement != PlacementMode::kAnywhere, address != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{215 }
\DoxyCodeLine{216   \textcolor{comment}{// TODO(v8) determine these based on max\_permission.}}
\DoxyCodeLine{217   zx\_vm\_option\_t options = ZX\_VM\_CAN\_MAP\_READ | ZX\_VM\_CAN\_MAP\_WRITE |}
\DoxyCodeLine{218                            ZX\_VM\_CAN\_MAP\_EXECUTE | ZX\_VM\_CAN\_MAP\_SPECIFIC;}
\DoxyCodeLine{219 }
\DoxyCodeLine{220   zx\_vm\_option\_t alignment\_option = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828}{GetAlignmentOptionFromAlignment}}(alignment);}
\DoxyCodeLine{221   \mbox{\hyperlink{src_2base_2logging_8h_aa958a8a4e5dda3abaa031977268ae60e}{CHECK\_NE}}(0, alignment\_option);  \textcolor{comment}{// Invalid alignment specified}}
\DoxyCodeLine{222   options |= alignment\_option;}
\DoxyCodeLine{223 }
\DoxyCodeLine{224   \textcolor{keywordtype}{size\_t} vmar\_offset = 0;}
\DoxyCodeLine{225   \textcolor{keywordflow}{if} (placement != PlacementMode::kAnywhere) \{}
\DoxyCodeLine{226     \textcolor{comment}{// Try placing the mapping at the specified address.}}
\DoxyCodeLine{227     \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} target\_addr = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address);}
\DoxyCodeLine{228     \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} base = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(vmar\_base);}
\DoxyCodeLine{229     \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(target\_addr, base);}
\DoxyCodeLine{230     vmar\_offset = target\_addr -\/ base;}
\DoxyCodeLine{231     options |= ZX\_VM\_SPECIFIC;}
\DoxyCodeLine{232   \}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234   zx\_status\_t \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} =}
\DoxyCodeLine{235       vmar.allocate(options, vmar\_offset, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, child, child\_addr);}
\DoxyCodeLine{236   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} != ZX\_OK \&\& placement == PlacementMode::kUseHint) \{}
\DoxyCodeLine{237     \textcolor{comment}{// If a placement hint was specified but couldn't be used (for example,}}
\DoxyCodeLine{238     \textcolor{comment}{// because the offset overlapped another mapping), then retry again without}}
\DoxyCodeLine{239     \textcolor{comment}{// a vmar\_offset to let the kernel pick another location.}}
\DoxyCodeLine{240     options \&= \string~(ZX\_VM\_SPECIFIC);}
\DoxyCodeLine{241     \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} = vmar.allocate(options, 0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, child, child\_addr);}
\DoxyCodeLine{242   \}}
\DoxyCodeLine{243 }
\DoxyCodeLine{244   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}};}
\DoxyCodeLine{245 \}}

\end{DoxyCode}


References CHECK\+\_\+\+NE, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+GE, DCHECK\+\_\+\+IMPLIES, Get\+Alignment\+Option\+From\+Alignment(), size(), and v8\+::internal\+::status.



Referenced by v8\+::base\+::\+OS\+::\+Create\+Address\+Space\+Reservation(), and v8\+::base\+::\+Address\+Space\+Reservation\+::\+Create\+Sub\+Reservation().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a3a92636e3e2a288714c57d1c7b75b369_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a3a92636e3e2a288714c57d1c7b75b369_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a7df0265bdaf933e161733432fad5c467}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a7df0265bdaf933e161733432fad5c467}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!CreateAndMapVmo@{CreateAndMapVmo}}
\index{CreateAndMapVmo@{CreateAndMapVmo}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{CreateAndMapVmo()}{CreateAndMapVmo()}}
{\footnotesize\ttfamily void$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Create\+And\+Map\+Vmo (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{void $\ast$}]{vmar\+\_\+base,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}}}]{placement,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t}]{alignment,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 148 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{150                                                                    \{}
\DoxyCodeLine{151   zx::vmo vmo;}
\DoxyCodeLine{152   \textcolor{keywordflow}{if} (zx::vmo::create(\mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, 0, \&vmo) != ZX\_OK) \{}
\DoxyCodeLine{153     \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{154   \}}
\DoxyCodeLine{155   \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} kVirtualMemoryName[] = \textcolor{stringliteral}{"{}v8-\/virtualmem"{}};}
\DoxyCodeLine{156   vmo.set\_property(ZX\_PROP\_NAME, kVirtualMemoryName,}
\DoxyCodeLine{157                    strlen(kVirtualMemoryName));}
\DoxyCodeLine{158 }
\DoxyCodeLine{159   \textcolor{comment}{// Always call zx\_vmo\_replace\_as\_executable() in case the memory will need}}
\DoxyCodeLine{160   \textcolor{comment}{// to be marked as executable in the future.}}
\DoxyCodeLine{161   \textcolor{comment}{// TOOD(https://crbug.com/v8/8899): Only call this when we know that the}}
\DoxyCodeLine{162   \textcolor{comment}{// region will need to be marked as executable in the future.}}
\DoxyCodeLine{163   zx::unowned\_resource vmex(\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}{g\_vmex\_resource}});}
\DoxyCodeLine{164   \textcolor{keywordflow}{if} (vmo.replace\_as\_executable(*vmex, \&vmo) != ZX\_OK) \{}
\DoxyCodeLine{165     \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{166   \}}
\DoxyCodeLine{167 }
\DoxyCodeLine{168   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1}{MapVmo}}(vmar, vmar\_base, page\_size, address, vmo, 0, placement, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}},}
\DoxyCodeLine{169                 alignment, access);}
\DoxyCodeLine{170 \}}

\end{DoxyCode}


References g\+\_\+vmex\+\_\+resource, Map\+Vmo(), and size().



Referenced by v8\+::base\+::\+Address\+Space\+Reservation\+::\+Allocate().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a7df0265bdaf933e161733432fad5c467_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a7df0265bdaf933e161733432fad5c467_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a54f2a39ff3fafebcabd2e843bc579bb0}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a54f2a39ff3fafebcabd2e843bc579bb0}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!DiscardSystemPagesInternal@{DiscardSystemPagesInternal}}
\index{DiscardSystemPagesInternal@{DiscardSystemPagesInternal}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{DiscardSystemPagesInternal()}{DiscardSystemPagesInternal()}}
{\footnotesize\ttfamily bool v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Discard\+System\+Pages\+Internal (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 197 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{198                                                             \{}
\DoxyCodeLine{199   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address) \% page\_size);}
\DoxyCodeLine{200   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \% page\_size);}
\DoxyCodeLine{201   uint64\_t address\_int = \textcolor{keyword}{reinterpret\_cast<}uint64\_t\textcolor{keyword}{>}(address);}
\DoxyCodeLine{202   \textcolor{keywordflow}{return} vmar.op\_range(ZX\_VMO\_OP\_DECOMMIT, address\_int, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \textcolor{keyword}{nullptr}, 0) ==}
\DoxyCodeLine{203          ZX\_OK;}
\DoxyCodeLine{204 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, and size().



Referenced by v8\+::base\+::\+Address\+Space\+Reservation\+::\+Discard\+System\+Pages().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a54f2a39ff3fafebcabd2e843bc579bb0_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a54f2a39ff3fafebcabd2e843bc579bb0_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!GetAlignmentOptionFromAlignment@{GetAlignmentOptionFromAlignment}}
\index{GetAlignmentOptionFromAlignment@{GetAlignmentOptionFromAlignment}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetAlignmentOptionFromAlignment()}{GetAlignmentOptionFromAlignment()}}
{\footnotesize\ttfamily zx\+\_\+vm\+\_\+option\+\_\+t v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Get\+Alignment\+Option\+From\+Alignment (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{alignment }\end{DoxyParamCaption})}



Definition at line 69 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{69                                                                  \{}
\DoxyCodeLine{70   \textcolor{comment}{// The alignment must be one of the ZX\_VM\_ALIGN\_X constants.}}
\DoxyCodeLine{71   \textcolor{comment}{// See zircon/system/public/zircon/types.h.}}
\DoxyCodeLine{72   static\_assert(}
\DoxyCodeLine{73       ZX\_VM\_ALIGN\_1KB == (10 << ZX\_VM\_ALIGN\_BASE),}
\DoxyCodeLine{74       \textcolor{stringliteral}{"{}Fuchsia's ZX\_VM\_ALIGN\_1KB constant doesn't match expected value"{}});}
\DoxyCodeLine{75   static\_assert(}
\DoxyCodeLine{76       ZX\_VM\_ALIGN\_4GB == (32 << ZX\_VM\_ALIGN\_BASE),}
\DoxyCodeLine{77       \textcolor{stringliteral}{"{}Fuchsia's ZX\_VM\_ALIGN\_4GB constant doesn't match expected value"{}});}
\DoxyCodeLine{78   zx\_vm\_option\_t alignment\_log2 = 0;}
\DoxyCodeLine{79   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} shift = 10; shift <= 32; shift++) \{}
\DoxyCodeLine{80     \textcolor{keywordflow}{if} (alignment == (\textcolor{keywordtype}{size\_t}\{1\} << shift)) \{}
\DoxyCodeLine{81       alignment\_log2 = shift;}
\DoxyCodeLine{82       \textcolor{keywordflow}{break};}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84   \}}
\DoxyCodeLine{85   \textcolor{keywordflow}{return} alignment\_log2 << ZX\_VM\_ALIGN\_BASE;}
\DoxyCodeLine{86 \}}

\end{DoxyCode}


Referenced by Create\+Address\+Space\+Reservation\+Internal(), and Map\+Vmo().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aee247bf5d1a23d7820178933c108211a}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aee247bf5d1a23d7820178933c108211a}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!GetProtectionFromMemoryPermission@{GetProtectionFromMemoryPermission}}
\index{GetProtectionFromMemoryPermission@{GetProtectionFromMemoryPermission}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{GetProtectionFromMemoryPermission()}{GetProtectionFromMemoryPermission()}}
{\footnotesize\ttfamily zx\+\_\+vm\+\_\+option\+\_\+t v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Get\+Protection\+From\+Memory\+Permission (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 50 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{50                                                                             \{}
\DoxyCodeLine{51   \textcolor{keywordflow}{switch} (access) \{}
\DoxyCodeLine{52     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccess:}
\DoxyCodeLine{53     \textcolor{keywordflow}{case} OS::MemoryPermission::kNoAccessWillJitLater:}
\DoxyCodeLine{54       \textcolor{keywordflow}{return} 0;  \textcolor{comment}{// no permissions}}
\DoxyCodeLine{55     \textcolor{keywordflow}{case} OS::MemoryPermission::kRead:}
\DoxyCodeLine{56       \textcolor{keywordflow}{return} ZX\_VM\_PERM\_READ;}
\DoxyCodeLine{57     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadWrite:}
\DoxyCodeLine{58       \textcolor{keywordflow}{return} ZX\_VM\_PERM\_READ | ZX\_VM\_PERM\_WRITE;}
\DoxyCodeLine{59     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadWriteExecute:}
\DoxyCodeLine{60       \textcolor{keywordflow}{return} ZX\_VM\_PERM\_READ | ZX\_VM\_PERM\_WRITE | ZX\_VM\_PERM\_EXECUTE;}
\DoxyCodeLine{61     \textcolor{keywordflow}{case} OS::MemoryPermission::kReadExecute:}
\DoxyCodeLine{62       \textcolor{keywordflow}{return} ZX\_VM\_PERM\_READ | ZX\_VM\_PERM\_EXECUTE;}
\DoxyCodeLine{63   \}}
\DoxyCodeLine{64   \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{65 \}}

\end{DoxyCode}


References v8\+::base\+::\+OS\+::k\+No\+Access, v8\+::base\+::\+OS\+::k\+No\+Access\+Will\+Jit\+Later, v8\+::base\+::\+OS\+::k\+Read, v8\+::base\+::\+OS\+::k\+Read\+Execute, v8\+::base\+::\+OS\+::k\+Read\+Write, v8\+::base\+::\+OS\+::k\+Read\+Write\+Execute, and UNREACHABLE.

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!MapVmo@{MapVmo}}
\index{MapVmo@{MapVmo}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{MapVmo()}{MapVmo()}}
{\footnotesize\ttfamily void$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Map\+Vmo (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{void $\ast$}]{vmar\+\_\+base,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{const zx\+::vmo \&}]{vmo,  }\item[{uint64\+\_\+t}]{offset,  }\item[{\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a06febcc67848c0a39a18c75947c788f5}{Placement\+Mode}}}]{placement,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t}]{alignment,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 97 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{100                                         \{}
\DoxyCodeLine{101   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \% page\_size);}
\DoxyCodeLine{102   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address) \% page\_size);}
\DoxyCodeLine{103   \mbox{\hyperlink{src_2base_2logging_8h_a96a75539aa82216cdde2250a11126ea0}{DCHECK\_IMPLIES}}(placement != PlacementMode::kAnywhere, address != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{104 }
\DoxyCodeLine{105   zx\_vm\_option\_t options = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aee247bf5d1a23d7820178933c108211a}{GetProtectionFromMemoryPermission}}(access);}
\DoxyCodeLine{106 }
\DoxyCodeLine{107   \textcolor{keywordtype}{size\_t} vmar\_offset = 0;}
\DoxyCodeLine{108   \textcolor{keywordflow}{if} (placement == PlacementMode::kAnywhere) \{}
\DoxyCodeLine{109     zx\_vm\_option\_t alignment\_option =}
\DoxyCodeLine{110         \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_abdcc7623550ddbafb000054e691ca828}{GetAlignmentOptionFromAlignment}}(alignment);}
\DoxyCodeLine{111     \textcolor{keywordflow}{if} (alignment\_option == 0) \{}
\DoxyCodeLine{112       \textcolor{comment}{// Invalid alignment specified, it is not possible to provide an}}
\DoxyCodeLine{113       \textcolor{comment}{// allocation with correct alignment.}}
\DoxyCodeLine{114       \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{115     \}}
\DoxyCodeLine{116     options |= alignment\_option;}
\DoxyCodeLine{117   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{118     \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(\textcolor{keyword}{reinterpret\_cast<}intptr\_t\textcolor{keyword}{>}(address) \% alignment, 0);}
\DoxyCodeLine{119     \textcolor{comment}{// Try placing the mapping at the specified address.}}
\DoxyCodeLine{120     \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} target\_addr = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address);}
\DoxyCodeLine{121     \mbox{\hyperlink{classuintptr__t}{uintptr\_t}} base = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(vmar\_base);}
\DoxyCodeLine{122     \mbox{\hyperlink{src_2base_2logging_8h_aabec5c3b7a8628298a25f044dcf89c25}{DCHECK\_GE}}(target\_addr, base);}
\DoxyCodeLine{123     vmar\_offset = target\_addr -\/ base;}
\DoxyCodeLine{124     options |= ZX\_VM\_SPECIFIC;}
\DoxyCodeLine{125   \}}
\DoxyCodeLine{126 }
\DoxyCodeLine{127   zx\_vaddr\_t \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{128   zx\_status\_t \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} = vmar.map(options, vmar\_offset, vmo, 0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, \&\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{129 }
\DoxyCodeLine{130   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} == ZX\_OK) \{}
\DoxyCodeLine{131     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} \% alignment, 0);}
\DoxyCodeLine{132     \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}});}
\DoxyCodeLine{133   \}}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{keywordflow}{if} (placement != PlacementMode::kUseHint) \{}
\DoxyCodeLine{136     \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{137   \}}
\DoxyCodeLine{138   \textcolor{comment}{// The hint failed, so we try again without the hint but with alignment}}
\DoxyCodeLine{139   \textcolor{comment}{// options.}}
\DoxyCodeLine{140   \textcolor{comment}{// TODO(404563927): Support alignment > 4GB. CppGC's HeapCage allocates with a}}
\DoxyCodeLine{141   \textcolor{comment}{// 32GB alignment, and the allocation fails on Fuchsia at the moment if the}}
\DoxyCodeLine{142   \textcolor{comment}{// provided placement hint is not available. PartitionAlloc already solved}}
\DoxyCodeLine{143   \textcolor{comment}{// this issue, so maybe that solution could be used here as well.}}
\DoxyCodeLine{144   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1}{MapVmo}}(vmar, vmar\_base, page\_size, \textcolor{keyword}{nullptr}, vmo, offset,}
\DoxyCodeLine{145                 PlacementMode::kAnywhere, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}, alignment, access);}
\DoxyCodeLine{146 \}}

\end{DoxyCode}


References CHECK\+\_\+\+EQ, DCHECK\+\_\+\+EQ, DCHECK\+\_\+\+GE, DCHECK\+\_\+\+IMPLIES, Get\+Alignment\+Option\+From\+Alignment(), v8\+::base\+::\+Get\+Protection\+From\+Memory\+Permission(), v8\+::base\+::internal\+::result, size(), and v8\+::internal\+::status.



Referenced by Create\+And\+Map\+Vmo().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a28dfefa443760161172ddea51d60ffe1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ae8268110e64fe5871bed6ec06ff11e54}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ae8268110e64fe5871bed6ec06ff11e54}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!SetPermissionsInternal@{SetPermissionsInternal}}
\index{SetPermissionsInternal@{SetPermissionsInternal}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SetPermissionsInternal()}{SetPermissionsInternal()}}
{\footnotesize\ttfamily bool v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Set\+Permissions\+Internal (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{classv8_1_1base_1_1OS_a784ff62e67203e60451e5952454046e4}{OS\+::\+Memory\+Permission}}}]{access }\end{DoxyParamCaption})}



Definition at line 179 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{181                                                        \{}
\DoxyCodeLine{182   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address) \% page\_size);}
\DoxyCodeLine{183   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \% page\_size);}
\DoxyCodeLine{184   uint32\_t prot = \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aee247bf5d1a23d7820178933c108211a}{GetProtectionFromMemoryPermission}}(access);}
\DoxyCodeLine{185   zx\_status\_t \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} =}
\DoxyCodeLine{186       vmar.protect(prot, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}});}
\DoxyCodeLine{187 }
\DoxyCodeLine{188   \textcolor{comment}{// Any failure that's not OOM likely indicates a bug in the caller (e.g.}}
\DoxyCodeLine{189   \textcolor{comment}{// using an invalid mapping) so attempt to catch that here to facilitate}}
\DoxyCodeLine{190   \textcolor{comment}{// debugging of these failures. According to the documentation,}}
\DoxyCodeLine{191   \textcolor{comment}{// zx\_vmar\_protect cannot return ZX\_ERR\_NO\_MEMORY, so any error here is}}
\DoxyCodeLine{192   \textcolor{comment}{// unexpected.}}
\DoxyCodeLine{193   \mbox{\hyperlink{src_2base_2logging_8h_aca32614b4d2aea7dd9abdeb222bf02f3}{CHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}}, ZX\_OK);}
\DoxyCodeLine{194   \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_af04f4104c077ccbaef7596e23816a254}{status}} == ZX\_OK;}
\DoxyCodeLine{195 \}}

\end{DoxyCode}


References CHECK\+\_\+\+EQ, DCHECK\+\_\+\+EQ, v8\+::base\+::\+Get\+Protection\+From\+Memory\+Permission(), size(), and v8\+::internal\+::status.



Referenced by v8\+::base\+::\+Address\+Space\+Reservation\+::\+Set\+Permissions().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ae8268110e64fe5871bed6ec06ff11e54_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ae8268110e64fe5871bed6ec06ff11e54_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a6a1f704e4424e4593b94c4d9bfc6ccdf}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a6a1f704e4424e4593b94c4d9bfc6ccdf}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!SetVmexResource@{SetVmexResource}}
\index{SetVmexResource@{SetVmexResource}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{SetVmexResource()}{SetVmexResource()}}
{\footnotesize\ttfamily void v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Set\+Vmex\+Resource (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 31 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{31                        \{}
\DoxyCodeLine{32   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(\mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}{g\_vmex\_resource}}, ZX\_HANDLE\_INVALID);}
\DoxyCodeLine{33 }
\DoxyCodeLine{34   \textcolor{keyword}{auto} vmex\_resource\_client =}
\DoxyCodeLine{35       component::Connect<fuchsia\_kernel::VmexResource>();}
\DoxyCodeLine{36   \textcolor{keywordflow}{if} (vmex\_resource\_client.is\_error()) \{}
\DoxyCodeLine{37     \textcolor{keywordflow}{return};}
\DoxyCodeLine{38   \}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   fidl::SyncClient sync\_vmex\_resource\_client(}
\DoxyCodeLine{41       std::move(vmex\_resource\_client.value()));}
\DoxyCodeLine{42   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = sync\_vmex\_resource\_client-\/>Get();}
\DoxyCodeLine{43   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.is\_error()) \{}
\DoxyCodeLine{44     \textcolor{keywordflow}{return};}
\DoxyCodeLine{45   \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47   \mbox{\hyperlink{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}{g\_vmex\_resource}} = \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}-\/>resource().release();}
\DoxyCodeLine{48 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, g\+\_\+vmex\+\_\+resource, and v8\+::base\+::internal\+::result.



Referenced by v8\+::base\+::\+OS\+::\+Initialize().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_a6a1f704e4424e4593b94c4d9bfc6ccdf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ac184c233736e31266feb997d14c56660}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ac184c233736e31266feb997d14c56660}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!UnmapVmo@{UnmapVmo}}
\index{UnmapVmo@{UnmapVmo}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{UnmapVmo()}{UnmapVmo()}}
{\footnotesize\ttfamily bool v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::Unmap\+Vmo (\begin{DoxyParamCaption}\item[{const zx\+::vmar \&}]{vmar,  }\item[{size\+\_\+t}]{page\+\_\+size,  }\item[{void $\ast$}]{address,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



Definition at line 172 of file platform-\/fuchsia.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{173                            \{}
\DoxyCodeLine{174   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address) \% page\_size);}
\DoxyCodeLine{175   \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} \% page\_size);}
\DoxyCodeLine{176   \textcolor{keywordflow}{return} vmar.unmap(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classuintptr__t}{uintptr\_t}}\textcolor{keyword}{>}(address), \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}}) == ZX\_OK;}
\DoxyCodeLine{177 \}}

\end{DoxyCode}


References DCHECK\+\_\+\+EQ, and size().



Referenced by v8\+::base\+::\+Address\+Space\+Reservation\+::\+Free(), v8\+::base\+::\+OS\+::\+Free\+Shared(), and v8\+::base\+::\+Address\+Space\+Reservation\+::\+Free\+Shared().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ac184c233736e31266feb997d14c56660_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_ac184c233736e31266feb997d14c56660_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aa188ad15915a9bb1818e900ce6909b29}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_aa188ad15915a9bb1818e900ce6909b29}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!g\_root\_vmar\_base@{g\_root\_vmar\_base}}
\index{g\_root\_vmar\_base@{g\_root\_vmar\_base}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{g\_root\_vmar\_base}{g\_root\_vmar\_base}}
{\footnotesize\ttfamily void$\ast$ v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::g\+\_\+root\+\_\+vmar\+\_\+base = \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 27 of file platform-\/fuchsia.\+cc.



Referenced by v8\+::base\+::\+OS\+::\+Create\+Address\+Space\+Reservation(), and v8\+::base\+::\+OS\+::\+Initialize().

\mbox{\Hypertarget{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}\label{namespacev8_1_1base_1_1anonymous__namespace_02platform-fuchsia_8cc_03_af27233113d82d60bed185b9686822d9c}} 
\index{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}!g\_vmex\_resource@{g\_vmex\_resource}}
\index{g\_vmex\_resource@{g\_vmex\_resource}!v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}@{v8::base::anonymous\_namespace\lcurly{}platform-\/fuchsia.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{g\_vmex\_resource}{g\_vmex\_resource}}
{\footnotesize\ttfamily zx\+\_\+handle\+\_\+t v8\+::base\+::anonymous\+\_\+namespace\{platform-\/fuchsia.\+cc\}\+::g\+\_\+vmex\+\_\+resource = ZX\+\_\+\+HANDLE\+\_\+\+INVALID\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 25 of file platform-\/fuchsia.\+cc.



Referenced by Create\+And\+Map\+Vmo(), and Set\+Vmex\+Resource().

