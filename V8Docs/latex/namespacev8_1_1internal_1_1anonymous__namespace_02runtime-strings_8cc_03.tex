\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/strings.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}}}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a8414b5b78265ef6dc2022b6fe1e44d44}{ASVariant}} = \mbox{\hyperlink{namespacev8_ad8f7a23a58a064de38a9200d47c8d87e}{Add\+String\+Constant\+And\+Internalize\+Variant}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a518f4e3d1dd63018f18fc8e98cb99599}{String\+Add\+\_\+\+String\+Constant\+\_\+\+Internalize}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ lhs, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ rhs, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ maybe\+\_\+feedback\+\_\+vector, \mbox{\hyperlink{classint}{int}} slot\+\_\+index, \mbox{\hyperlink{namespacev8_ad8f7a23a58a064de38a9200d47c8d87e}{ASVariant}} as\+\_\+variant)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a8414b5b78265ef6dc2022b6fe1e44d44}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a8414b5b78265ef6dc2022b6fe1e44d44}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}}!ASVariant@{ASVariant}}
\index{ASVariant@{ASVariant}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{ASVariant}{ASVariant}}
{\footnotesize\ttfamily using v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/strings.\+cc\}\+::\mbox{\hyperlink{namespacev8_ad8f7a23a58a064de38a9200d47c8d87e}{ASVariant}} = typedef \mbox{\hyperlink{namespacev8_ad8f7a23a58a064de38a9200d47c8d87e}{Add\+String\+Constant\+And\+Internalize\+Variant}}}



Definition at line 169 of file runtime-\/strings.\+cc.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a518f4e3d1dd63018f18fc8e98cb99599}\label{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a518f4e3d1dd63018f18fc8e98cb99599}} 
\index{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}}!StringAdd\_StringConstant\_Internalize@{StringAdd\_StringConstant\_Internalize}}
\index{StringAdd\_StringConstant\_Internalize@{StringAdd\_StringConstant\_Internalize}!v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}runtime-\/strings.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{StringAdd\_StringConstant\_Internalize()}{StringAdd\_StringConstant\_Internalize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{runtime-\/strings.\+cc\}\+::String\+Add\+\_\+\+String\+Constant\+\_\+\+Internalize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{lhs,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{rhs,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{maybe\+\_\+feedback\+\_\+vector,  }\item[{\mbox{\hyperlink{classint}{int}}}]{slot\+\_\+index,  }\item[{\mbox{\hyperlink{namespacev8_ad8f7a23a58a064de38a9200d47c8d87e}{ASVariant}}}]{as\+\_\+variant }\end{DoxyParamCaption})}



Definition at line 171 of file runtime-\/strings.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{174                           \{}
\DoxyCodeLine{175   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} lhs\_is\_string\_constant =}
\DoxyCodeLine{176       as\_variant == ASVariant::kLhsIsStringConstant;}
\DoxyCodeLine{177   DirectHandle<Object> const\_str\_operand = lhs\_is\_string\_constant ? lhs : rhs;}
\DoxyCodeLine{178   DirectHandle<Object> other\_operand = lhs\_is\_string\_constant ? rhs : lhs;}
\DoxyCodeLine{179   \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(*const\_str\_operand));}
\DoxyCodeLine{180 }
\DoxyCodeLine{181   DirectHandle<String> other\_operand\_string;}
\DoxyCodeLine{182   \textcolor{keywordflow}{if} (IsString(*other\_operand)) \{}
\DoxyCodeLine{183     other\_operand\_string = Cast<String>(other\_operand);}
\DoxyCodeLine{184   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{185     \textcolor{comment}{// According to spec we first have to do ToPrimitive and only then}}
\DoxyCodeLine{186     \textcolor{comment}{// ToString.}}
\DoxyCodeLine{187     \textcolor{comment}{// https://tc39.es/ecma262/\#sec-\/applystringornumericbinaryoperator}}
\DoxyCodeLine{188     \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(}
\DoxyCodeLine{189         isolate, other\_operand, Object::ToPrimitive(isolate, other\_operand));}
\DoxyCodeLine{190     \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(}
\DoxyCodeLine{191         isolate, other\_operand\_string,}
\DoxyCodeLine{192         \mbox{\hyperlink{data-view-ops_8h_af22849720fbd54f8307292fe33c35a07}{Object::ToString}}(isolate, other\_operand));}
\DoxyCodeLine{193   \}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195   \textcolor{keyword}{auto} f = isolate-\/>factory();}
\DoxyCodeLine{196   \textcolor{keyword}{auto} other\_operand\_internalize =}
\DoxyCodeLine{197       \mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(*other\_operand\_string)}
\DoxyCodeLine{198           ? Cast<InternalizedString>(other\_operand\_string)}
\DoxyCodeLine{199           : f-\/>\mbox{\hyperlink{namespacev8_1_1internal_a00e6a81b8b499c814a011d90853897fb}{InternalizeString}}(other\_operand\_string);}
\DoxyCodeLine{200 }
\DoxyCodeLine{201   \textcolor{keyword}{auto} lhs\_internalize = lhs\_is\_string\_constant}
\DoxyCodeLine{202                              ? Cast<String>(const\_str\_operand)}
\DoxyCodeLine{203                              : \mbox{\hyperlink{namespacev8_1_1internal_a94c4a6c4ad3993b5e0e43bc2191c084b}{Cast}}<\mbox{\hyperlink{namespacev8__inspector_1_1protocol_ac8ed50aa76b93614e1ba611280b7b911}{String}}>(other\_operand\_internalize);}
\DoxyCodeLine{204   \textcolor{keyword}{auto} rhs\_internalize = lhs\_is\_string\_constant}
\DoxyCodeLine{205                              ? Cast<String>(other\_operand\_internalize)}
\DoxyCodeLine{206                              : \mbox{\hyperlink{namespacev8_1_1internal_a94c4a6c4ad3993b5e0e43bc2191c084b}{Cast}}<\mbox{\hyperlink{namespacev8__inspector_1_1protocol_ac8ed50aa76b93614e1ba611280b7b911}{String}}>(const\_str\_operand);}
\DoxyCodeLine{207 }
\DoxyCodeLine{208   \textcolor{keywordflow}{if} (IsUndefined(*maybe\_feedback\_vector)) \{}
\DoxyCodeLine{209     DirectHandle<String> cons;}
\DoxyCodeLine{210     \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(}
\DoxyCodeLine{211         isolate, cons, f-\/>NewConsString(lhs\_internalize, rhs\_internalize));}
\DoxyCodeLine{212     \textcolor{keywordflow}{return} *f-\/>InternalizeString(cons);}
\DoxyCodeLine{213   \}}
\DoxyCodeLine{214 }
\DoxyCodeLine{215   \textcolor{keyword}{auto} feedback\_vector = Cast<FeedbackVector>(maybe\_feedback\_vector);}
\DoxyCodeLine{216 }
\DoxyCodeLine{217   FeedbackSlot cache\_slot(FeedbackVector::ToSlot(}
\DoxyCodeLine{218       slot\_index + \mbox{\hyperlink{namespacev8_a78f3882e51e39ae6dfeecd75b985a78d}{kAdd\_StringConstant\_Internalize\_CacheSlotOffset}}));}
\DoxyCodeLine{219   \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(cache\_slot.ToInt(), feedback\_vector-\/>length());}
\DoxyCodeLine{220   Handle<Object> cache\_obj(Cast<Object>(feedback\_vector-\/>Get(cache\_slot)),}
\DoxyCodeLine{221                            isolate);}
\DoxyCodeLine{222   Handle<SimpleNameDictionary> cache;}
\DoxyCodeLine{223   \textcolor{keywordflow}{if} (*cache\_obj == ReadOnlyRoots\{isolate\}.uninitialized\_symbol()) \{}
\DoxyCodeLine{224     cache = \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02intl-objects_8cc_03_aea46070627c9c116b8f1be4a25840e66}{SimpleNameDictionary::New}}(isolate, 1);}
\DoxyCodeLine{225     feedback\_vector-\/>SynchronizedSet(cache\_slot, *cache);}
\DoxyCodeLine{226   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{227     cache = Cast<SimpleNameDictionary>(cache\_obj);}
\DoxyCodeLine{228   \}}
\DoxyCodeLine{229 }
\DoxyCodeLine{230   InternalIndex entry = cache-\/>FindEntry(isolate, other\_operand\_internalize);}
\DoxyCodeLine{231   \textcolor{keywordflow}{if} (entry.is\_found()) \{}
\DoxyCodeLine{232     \textcolor{keyword}{auto} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} = cache-\/>ValueAt(entry);}
\DoxyCodeLine{233     \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}));}
\DoxyCodeLine{234     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{235   \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237   DirectHandle<String> cons;}
\DoxyCodeLine{238   \mbox{\hyperlink{execution_2isolate_8h_a2ff064a43911dd1ec71bcb23989bd9d8}{ASSIGN\_RETURN\_FAILURE\_ON\_EXCEPTION}}(}
\DoxyCodeLine{239       isolate, cons, f-\/>NewConsString(lhs\_internalize, rhs\_internalize));}
\DoxyCodeLine{240 }
\DoxyCodeLine{241   \textcolor{keyword}{auto} internalized = f-\/>InternalizeString(cons);}
\DoxyCodeLine{242   \textcolor{keyword}{auto} new\_cache = SimpleNameDictionary::Set(}
\DoxyCodeLine{243       isolate, cache, other\_operand\_internalize, internalized);}
\DoxyCodeLine{244   \textcolor{keywordflow}{if} (*new\_cache != *cache) \{}
\DoxyCodeLine{245     feedback\_vector-\/>SynchronizedSet(cache\_slot, *new\_cache);}
\DoxyCodeLine{246   \}}
\DoxyCodeLine{247 }
\DoxyCodeLine{248   \textcolor{keywordflow}{return} *internalized;}
\DoxyCodeLine{249 \}}

\end{DoxyCode}


References ASSIGN\+\_\+\+RETURN\+\_\+\+FAILURE\+\_\+\+ON\+\_\+\+EXCEPTION, v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+LT, v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::\+Internal\+Index\+::is\+\_\+found(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String(), v8\+::k\+Add\+\_\+\+String\+Constant\+\_\+\+Internalize\+\_\+\+Cache\+Slot\+Offset, v8\+::internal\+::anonymous\+\_\+namespace\{intl-\/objects.\+cc\}\+::\+New(), v8\+::base\+::internal\+::result, v8\+::internal\+::\+Simple\+Name\+Dictionary\+::\+Set(), v8\+::internal\+::\+Feedback\+Slot\+::\+To\+Int(), v8\+::\+Value\+::\+To\+Primitive(), v8\+::internal\+::\+Feedback\+Vector\+::\+To\+Slot(), and v8\+::\+Value\+::\+To\+String().



Referenced by v8\+::internal\+::\+RUNTIME\+\_\+\+FUNCTION().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a518f4e3d1dd63018f18fc8e98cb99599_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02runtime-strings_8cc_03_a518f4e3d1dd63018f18fc8e98cb99599_icgraph}
\end{center}
\end{figure}
