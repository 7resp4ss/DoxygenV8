\hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03}{}\doxysection{v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/api.cc\} Namespace Reference}
\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03}\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classv8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_1_1RelocatableArguments}{Relocatable\+Arguments}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9}{Is\+Compatible\+Receiver}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1FunctionTemplateInfo}{Function\+Template\+Info}} $>$ info, \mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$ receiver)
\item 
{\footnotesize template$<$bool is\+\_\+construct$>$ }\\\mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_acdab0d1d37718c82fce6e6bf87995332}{Handle\+Api\+Call\+Helper}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$isolate, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ new\+\_\+target, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1FunctionTemplateInfo}{Function\+Template\+Info}} $>$ fun\+\_\+data, \mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$ receiver, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} $\ast$argv, \mbox{\hyperlink{classint}{int}} argc)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_acdab0d1d37718c82fce6e6bf87995332}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_acdab0d1d37718c82fce6e6bf87995332}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}}!HandleApiCallHelper@{HandleApiCallHelper}}
\index{HandleApiCallHelper@{HandleApiCallHelper}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{HandleApiCallHelper()}{HandleApiCallHelper()}}
{\footnotesize\ttfamily template$<$bool is\+\_\+construct$>$ \\
\mbox{\hyperlink{v8config_8h_a63258e4bf5dc9fb8c78f881c8405d83b}{V8\+\_\+\+WARN\+\_\+\+UNUSED\+\_\+\+RESULT}} \mbox{\hyperlink{classv8_1_1internal_1_1MaybeHandle}{Maybe\+Handle}}$<$\mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}}$>$ v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/api.\+cc\}\+::Handle\+Api\+Call\+Helper (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{new\+\_\+target,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1FunctionTemplateInfo}{Function\+Template\+Info}} $>$}]{fun\+\_\+data,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1DirectHandle}{Direct\+Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1Object}{Object}} $>$}]{receiver,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} $\ast$}]{argv,  }\item[{\mbox{\hyperlink{classint}{int}}}]{argc }\end{DoxyParamCaption})}



Definition at line 57 of file builtins-\/api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{60                              \{}
\DoxyCodeLine{61   Handle<JSReceiver> js\_receiver;}
\DoxyCodeLine{62   \textcolor{keywordflow}{if} (is\_construct) \{}
\DoxyCodeLine{63     \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(IsTheHole(*receiver, isolate));}
\DoxyCodeLine{64     \textcolor{keywordflow}{if} (IsUndefined(fun\_data-\/>GetInstanceTemplate(), isolate)) \{}
\DoxyCodeLine{65       \mbox{\hyperlink{classv8_1_1Local}{v8::Local<ObjectTemplate>}} templ =}
\DoxyCodeLine{66           \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02intl-objects_8cc_03_aea46070627c9c116b8f1be4a25840e66}{ObjectTemplate::New}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{classv8_1_1Isolate}{v8::Isolate}}*\textcolor{keyword}{>}(isolate),}
\DoxyCodeLine{67                               ToApiHandle<v8::FunctionTemplate>(fun\_data));}
\DoxyCodeLine{68       FunctionTemplateInfo::SetInstanceTemplate(}
\DoxyCodeLine{69           isolate, fun\_data, Utils::OpenDirectHandle(*templ));}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71     DirectHandle<ObjectTemplateInfo> instance\_template(}
\DoxyCodeLine{72         Cast<ObjectTemplateInfo>(fun\_data-\/>GetInstanceTemplate()), isolate);}
\DoxyCodeLine{73     \mbox{\hyperlink{execution_2isolate_8h_a45bb81ab232e9f2663545ec92dc0b950}{ASSIGN\_RETURN\_ON\_EXCEPTION}}(}
\DoxyCodeLine{74         isolate, js\_receiver,}
\DoxyCodeLine{75         \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02api-natives_8cc_03_a6fdbe3fe9428b27bf34766e738779a52}{ApiNatives::InstantiateObject}}(isolate, instance\_template,}
\DoxyCodeLine{76                                       Cast<JSReceiver>(new\_target)));}
\DoxyCodeLine{77     argv[BuiltinArguments::kReceiverArgsIndex] = js\_receiver-\/>ptr();}
\DoxyCodeLine{78   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{79     \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(IsJSReceiver(*receiver));}
\DoxyCodeLine{80     js\_receiver = \mbox{\hyperlink{namespacev8_1_1internal_a15cafb1d1ed1ac577609eb5e764384e8}{indirect\_handle}}(Cast<JSReceiver>(receiver), isolate);}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     \textcolor{keywordflow}{if} (!fun\_data-\/>accept\_any\_receiver() \&\& IsAccessCheckNeeded(*js\_receiver)) \{}
\DoxyCodeLine{83       \textcolor{comment}{// Proxies never need access checks.}}
\DoxyCodeLine{84       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(IsJSObject(*js\_receiver));}
\DoxyCodeLine{85       DirectHandle<JSObject> js\_object = Cast<JSObject>(js\_receiver);}
\DoxyCodeLine{86       \textcolor{keywordflow}{if} (!isolate-\/>MayAccess(isolate-\/>native\_context(), js\_object)) \{}
\DoxyCodeLine{87         \mbox{\hyperlink{execution_2isolate_8h_a12be222e290b321d4d78a980504a6422}{RETURN\_ON\_EXCEPTION}}(isolate,}
\DoxyCodeLine{88                             isolate-\/>ReportFailedAccessCheck(js\_object));}
\DoxyCodeLine{89         \mbox{\hyperlink{src_2base_2logging_8h_a0bc63b24b654ca433be7b97a3edde132}{UNREACHABLE}}();}
\DoxyCodeLine{90       \}}
\DoxyCodeLine{91     \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9}{IsCompatibleReceiver}}(isolate, *fun\_data, *js\_receiver)) \{}
\DoxyCodeLine{94       \textcolor{comment}{// This function cannot be called with the given receiver.  Abort!}}
\DoxyCodeLine{95       \mbox{\hyperlink{execution_2isolate_8h_a6557667dd5be0768bd92d4bfd9a4d70f}{THROW\_NEW\_ERROR}}(isolate,}
\DoxyCodeLine{96                       NewTypeError(MessageTemplate::kIllegalInvocation));}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98   \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   \textcolor{keywordflow}{if} (fun\_data-\/>has\_callback(isolate)) \{}
\DoxyCodeLine{101     FunctionCallbackArguments custom(isolate, *fun\_data, *new\_target, argv,}
\DoxyCodeLine{102                                      argc);}
\DoxyCodeLine{103     DirectHandle<Object> \mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}} =}
\DoxyCodeLine{104         custom.CallOrConstruct(*fun\_data, is\_construct);}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \mbox{\hyperlink{execution_2isolate_8h_a8a16309dc1c1abb265ef3dabd707311a}{RETURN\_EXCEPTION\_IF\_EXCEPTION}}(isolate);}
\DoxyCodeLine{107     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}}.is\_null()) \{}
\DoxyCodeLine{108       \textcolor{keywordflow}{if} (is\_construct) \textcolor{keywordflow}{return} js\_receiver;}
\DoxyCodeLine{109       \textcolor{keywordflow}{return} isolate-\/>factory()-\/>undefined\_value();}
\DoxyCodeLine{110     \}}
\DoxyCodeLine{111     \textcolor{comment}{// Rebox the result.}}
\DoxyCodeLine{112     \{}
\DoxyCodeLine{113       \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{114       \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} raw\_result = *\mbox{\hyperlink{namespacev8_1_1base_1_1internal_a9840f2bf0b4780133662292486d0bc01}{result}};}
\DoxyCodeLine{115       \mbox{\hyperlink{src_2base_2logging_8h_ae17f8119c108cf3070bad3449c7e0006}{DCHECK}}(Is<JSAny>(raw\_result));}
\DoxyCodeLine{116       \textcolor{keywordflow}{if} (!is\_construct || IsJSReceiver(raw\_result))}
\DoxyCodeLine{117         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(raw\_result, isolate);}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119   \}}
\DoxyCodeLine{120 }
\DoxyCodeLine{121   \textcolor{keywordflow}{return} js\_receiver;}
\DoxyCodeLine{122 \}}

\end{DoxyCode}


References ASSIGN\+\_\+\+RETURN\+\_\+\+ON\+\_\+\+EXCEPTION, v8\+::internal\+::\+Function\+Callback\+Arguments\+::\+Call\+Or\+Construct(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Isolate\+::factory(), v8\+::internal\+::handle(), v8\+::internal\+::indirect\+\_\+handle(), v8\+::internal\+::\+Api\+Natives\+::\+Instantiate\+Object(), Is\+Compatible\+Receiver(), v8\+::internal\+::\+Builtin\+Arguments\+::k\+Receiver\+Args\+Index, v8\+::internal\+::\+Isolate\+::\+May\+Access(), v8\+::internal\+::\+Isolate\+::native\+\_\+context(), v8\+::\+Object\+Template\+::\+New(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::\+Utils\+::\+Open\+Direct\+Handle(), v8\+::internal\+::\+Isolate\+::\+Report\+Failed\+Access\+Check(), v8\+::base\+::internal\+::result, RETURN\+\_\+\+EXCEPTION\+\_\+\+IF\+\_\+\+EXCEPTION, RETURN\+\_\+\+ON\+\_\+\+EXCEPTION, THROW\+\_\+\+NEW\+\_\+\+ERROR, and v8\+::internal\+::\+UNREACHABLE().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_acdab0d1d37718c82fce6e6bf87995332_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9}\label{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9}} 
\index{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}}!IsCompatibleReceiver@{IsCompatibleReceiver}}
\index{IsCompatibleReceiver@{IsCompatibleReceiver}!v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}@{v8::internal::anonymous\_namespace\lcurly{}builtins-\/api.cc\rcurly{}}}
\doxysubsubsection{\texorpdfstring{IsCompatibleReceiver()}{IsCompatibleReceiver()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::anonymous\+\_\+namespace\{builtins-\/api.\+cc\}\+::Is\+Compatible\+Receiver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1FunctionTemplateInfo}{Function\+Template\+Info}} $>$}]{info,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1JSReceiver}{JSReceiver}} $>$}]{receiver }\end{DoxyParamCaption})}



Definition at line 26 of file builtins-\/api.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{27                                                        \{}
\DoxyCodeLine{28   \mbox{\hyperlink{runtime-call-stats-scope_8h_ae2e0b4aff109545657aba76d78cbf764}{RCS\_SCOPE}}(isolate, RuntimeCallCounterId::kGetCompatibleReceiver);}
\DoxyCodeLine{29   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} recv\_type = info-\/>signature();}
\DoxyCodeLine{30   \textcolor{comment}{// No signature, so function can be called with any receiver.}}
\DoxyCodeLine{31   \textcolor{keywordflow}{if} (!IsFunctionTemplateInfo(recv\_type)) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{32   \textcolor{comment}{// A Proxy cannot have been created from the signature template.}}
\DoxyCodeLine{33   \textcolor{keywordflow}{if} (!IsJSObject(receiver)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{34 }
\DoxyCodeLine{35   Tagged<JSObject> js\_obj\_receiver = Cast<JSObject>(receiver);}
\DoxyCodeLine{36   Tagged<FunctionTemplateInfo> signature =}
\DoxyCodeLine{37       Cast<FunctionTemplateInfo>(recv\_type);}
\DoxyCodeLine{38 }
\DoxyCodeLine{39   \textcolor{comment}{// Check the receiver.}}
\DoxyCodeLine{40   \textcolor{keywordflow}{if} (signature-\/>IsTemplateFor(js\_obj\_receiver)) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   \textcolor{comment}{// The JSGlobalProxy might have a hidden prototype.}}
\DoxyCodeLine{43   \textcolor{keywordflow}{if} (\mbox{\hyperlink{v8config_8h_a67bd29db07c711b0fb11ff1c324ebb60}{V8\_UNLIKELY}}(IsJSGlobalProxy(js\_obj\_receiver))) \{}
\DoxyCodeLine{44     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} \mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}} = js\_obj\_receiver-\/>map()-\/>prototype();}
\DoxyCodeLine{45     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespacev8_1_1internal_aea9d736830d86242c4e1cb59a371d3a6}{IsNull}}(\mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}}, isolate)) \{}
\DoxyCodeLine{46       Tagged<JSObject> js\_obj\_prototype = Cast<JSObject>(\mbox{\hyperlink{namespacev8_1_1internal_af2d9fec01057be7bdab90bb4682717b0}{prototype}});}
\DoxyCodeLine{47       \textcolor{keywordflow}{if} (signature-\/>IsTemplateFor(js\_obj\_prototype)) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{48     \}}
\DoxyCodeLine{49   \}}
\DoxyCodeLine{50   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{51 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Is\+Null(), v8\+::internal\+::prototype, RCS\+\_\+\+SCOPE, and V8\+\_\+\+UNLIKELY.



Referenced by Handle\+Api\+Call\+Helper().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacev8_1_1internal_1_1anonymous__namespace_02builtins-api_8cc_03_a19769180d67f760c4c9b0e3422d429f9_icgraph}
\end{center}
\end{figure}
