\hypertarget{classv8_1_1internal_1_1Symbolizer}{}\doxysection{v8\+::internal\+::Symbolizer Class Reference}
\label{classv8_1_1internal_1_1Symbolizer}\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}}


{\ttfamily \#include $<$symbolizer.\+h$>$}



Collaboration diagram for v8\+::internal\+::Symbolizer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1Symbolizer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structv8_1_1internal_1_1Symbolizer_1_1SymbolizedSample}{Symbolized\+Sample}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_ae1ff7da1052dbec3f9ad5150e9280c1d}{Symbolizer}} (\mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a2c36be5f7bfe06be91a76285a5248201}{instruction\+\_\+stream\+\_\+map}})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a911f5bf80de84d1aa975ee5a2d484b5f}{Symbolizer}} (const \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}} \& \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_aa4962658ae658cc52104789f92888ca2}{operator=}} (const \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}} \&)=delete
\item 
\mbox{\hyperlink{structv8_1_1internal_1_1Symbolizer_1_1SymbolizedSample}{Symbolized\+Sample}} \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_ae78e1d9f5caf0c55bffbb1d2c48a6653}{Symbolize\+Tick\+Sample}} (const \mbox{\hyperlink{structv8_1_1internal_1_1TickSample}{Tick\+Sample}} \&sample)
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a2c36be5f7bfe06be91a76285a5248201}{instruction\+\_\+stream\+\_\+map}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}} $\ast$ \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}{Find\+Entry}} (\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} address, \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} $\ast$out\+\_\+instruction\+\_\+start=\mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}})
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}} $\ast$const \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}{code\+\_\+map\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 17 of file symbolizer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_ae1ff7da1052dbec3f9ad5150e9280c1d}\label{classv8_1_1internal_1_1Symbolizer_ae1ff7da1052dbec3f9ad5150e9280c1d}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!Symbolizer@{Symbolizer}}
\index{Symbolizer@{Symbolizer}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{Symbolizer()}{Symbolizer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Symbolizer\+::\+Symbolizer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}} $\ast$}]{instruction\+\_\+stream\+\_\+map }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Definition at line 15 of file symbolizer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{16     : \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}{code\_map\_}}(\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a2c36be5f7bfe06be91a76285a5248201}{instruction\_stream\_map}}) \{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_a911f5bf80de84d1aa975ee5a2d484b5f}\label{classv8_1_1internal_1_1Symbolizer_a911f5bf80de84d1aa975ee5a2d484b5f}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!Symbolizer@{Symbolizer}}
\index{Symbolizer@{Symbolizer}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{Symbolizer()}{Symbolizer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Symbolizer\+::\+Symbolizer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}\label{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!FindEntry@{FindEntry}}
\index{FindEntry@{FindEntry}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{FindEntry()}{FindEntry()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry}{Code\+Entry}} $\ast$ v8\+::internal\+::\+Symbolizer\+::\+Find\+Entry (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}}]{address,  }\item[{\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} $\ast$}]{out\+\_\+instruction\+\_\+start = {\ttfamily \mbox{\hyperlink{flag-definitions_8h_aca14fbede0905858c819226fce3678cc}{nullptr}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 18 of file symbolizer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{19                                                                  \{}
\DoxyCodeLine{20   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}{code\_map\_}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap_a7c0c6c7df61052abe2a88b4e39b637bf}{FindEntry}}(address, out\_instruction\_start);}
\DoxyCodeLine{21 \}}

\end{DoxyCode}


References code\+\_\+map\+\_\+, and v8\+::internal\+::\+Instruction\+Stream\+Map\+::\+Find\+Entry().



Referenced by Symbolize\+Tick\+Sample().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_a2c36be5f7bfe06be91a76285a5248201}\label{classv8_1_1internal_1_1Symbolizer_a2c36be5f7bfe06be91a76285a5248201}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!instruction\_stream\_map@{instruction\_stream\_map}}
\index{instruction\_stream\_map@{instruction\_stream\_map}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{instruction\_stream\_map()}{instruction\_stream\_map()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}}$\ast$ v8\+::internal\+::\+Symbolizer\+::instruction\+\_\+stream\+\_\+map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 32 of file symbolizer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{32 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}{code\_map\_}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_aa4962658ae658cc52104789f92888ca2}\label{classv8_1_1internal_1_1Symbolizer_aa4962658ae658cc52104789f92888ca2}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!operator=@{operator=}}
\index{operator=@{operator=}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}}\& v8\+::internal\+::\+Symbolizer\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer}{Symbolizer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_ae78e1d9f5caf0c55bffbb1d2c48a6653}\label{classv8_1_1internal_1_1Symbolizer_ae78e1d9f5caf0c55bffbb1d2c48a6653}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!SymbolizeTickSample@{SymbolizeTickSample}}
\index{SymbolizeTickSample@{SymbolizeTickSample}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{SymbolizeTickSample()}{SymbolizeTickSample()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structv8_1_1internal_1_1Symbolizer_1_1SymbolizedSample}{Symbolizer\+::\+Symbolized\+Sample}} v8\+::internal\+::\+Symbolizer\+::\+Symbolize\+Tick\+Sample (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structv8_1_1internal_1_1TickSample}{Tick\+Sample}} \&}]{sample }\end{DoxyParamCaption})}



Definition at line 48 of file symbolizer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{49                               \{}
\DoxyCodeLine{50   \mbox{\hyperlink{namespacev8_1_1internal_ae9c203dc530a400655f9e03715c80dbf}{ProfileStackTrace}} stack\_trace;}
\DoxyCodeLine{51   \textcolor{comment}{// Conservatively reserve space for stack frames + pc + function + vm-\/state.}}
\DoxyCodeLine{52   \textcolor{comment}{// There could in fact be more of them because of inlined entries.}}
\DoxyCodeLine{53   stack\_trace.reserve(sample.frames\_count + 3);}
\DoxyCodeLine{54 }
\DoxyCodeLine{55   \textcolor{comment}{// The ProfileNode knows nothing about all versions of generated code for}}
\DoxyCodeLine{56   \textcolor{comment}{// the same JS function. The position information associated with}}
\DoxyCodeLine{57   \textcolor{comment}{// the latest version of generated code is used to find a source position}}
\DoxyCodeLine{58   \textcolor{comment}{// for a JS function. Then, the detected source position is passed to}}
\DoxyCodeLine{59   \textcolor{comment}{// ProfileNode to increase the tick count for this source position.}}
\DoxyCodeLine{60   LineAndColumn src\_pos = \{\};}
\DoxyCodeLine{61   \textcolor{keywordtype}{bool} src\_pos\_not\_found = \textcolor{keyword}{true};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   \textcolor{keywordflow}{if} (sample.pc != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{64     \textcolor{keywordflow}{if} (sample.has\_external\_callback \&\& sample.state == \mbox{\hyperlink{namespacev8_af4bd667bae597459fddd3443cbec0cb2a825ae0debbacb70bd55b9049af6cb9e1}{EXTERNAL}}) \{}
\DoxyCodeLine{65       \textcolor{comment}{// Don't use PC when in external callback code, as it can point}}
\DoxyCodeLine{66       \textcolor{comment}{// inside a callback's code, and we will erroneously report}}
\DoxyCodeLine{67       \textcolor{comment}{// that a callback calls itself.}}
\DoxyCodeLine{68       stack\_trace.push\_back(}
\DoxyCodeLine{69           \{\mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}{FindEntry}}(\textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(sample.external\_callback\_entry)),}
\DoxyCodeLine{70            LineAndColumn\{\}\});}
\DoxyCodeLine{71     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{72       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} attributed\_pc = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(sample.pc);}
\DoxyCodeLine{73       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} pc\_entry\_instruction\_start = \mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}};}
\DoxyCodeLine{74       CodeEntry* pc\_entry =}
\DoxyCodeLine{75           \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}{FindEntry}}(attributed\_pc, \&pc\_entry\_instruction\_start);}
\DoxyCodeLine{76       \textcolor{comment}{// If there is no pc\_entry, we're likely in native code. Find out if the}}
\DoxyCodeLine{77       \textcolor{comment}{// top of the stack (the return address) was pointing inside a JS}}
\DoxyCodeLine{78       \textcolor{comment}{// function, meaning that we have encountered a frameless invocation.}}
\DoxyCodeLine{79       \textcolor{keywordflow}{if} (!pc\_entry \&\& !sample.has\_external\_callback) \{}
\DoxyCodeLine{80         attributed\_pc = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(sample.tos);}
\DoxyCodeLine{81         pc\_entry = \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}{FindEntry}}(attributed\_pc, \&pc\_entry\_instruction\_start);}
\DoxyCodeLine{82       \}}
\DoxyCodeLine{83       \textcolor{comment}{// If pc is in the function code before it set up stack frame or after the}}
\DoxyCodeLine{84       \textcolor{comment}{// frame was destroyed, StackFrameIteratorForProfiler incorrectly thinks}}
\DoxyCodeLine{85       \textcolor{comment}{// that ebp contains the return address of the current function and skips}}
\DoxyCodeLine{86       \textcolor{comment}{// the caller's frame. Check for this case and just skip such samples.}}
\DoxyCodeLine{87       \textcolor{keywordflow}{if} (pc\_entry) \{}
\DoxyCodeLine{88         \textcolor{keywordtype}{int} pc\_offset =}
\DoxyCodeLine{89             \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(attributed\_pc -\/ pc\_entry\_instruction\_start);}
\DoxyCodeLine{90         \textcolor{comment}{// TODO(petermarshall): pc\_offset can still be negative in some cases.}}
\DoxyCodeLine{91         src\_pos = pc\_entry-\/>GetSourcePosition(pc\_offset);}
\DoxyCodeLine{92         \textcolor{keywordflow}{if} (src\_pos.line == \mbox{\hyperlink{classv8_1_1CpuProfileNode_ad54213fe8a795cb6669566f0272fc5ba}{v8::CpuProfileNode::kNoLineNumberInfo}}) \{}
\DoxyCodeLine{93           src\_pos = pc\_entry-\/>line\_and\_column();}
\DoxyCodeLine{94         \}}
\DoxyCodeLine{95         src\_pos\_not\_found = \textcolor{keyword}{false};}
\DoxyCodeLine{96         stack\_trace.push\_back(\{pc\_entry, src\_pos\});}
\DoxyCodeLine{97 }
\DoxyCodeLine{98         \textcolor{keywordflow}{if} (pc\_entry-\/>builtin() == Builtin::kFunctionPrototypeApply ||}
\DoxyCodeLine{99             pc\_entry-\/>builtin() == Builtin::kFunctionPrototypeCall) \{}
\DoxyCodeLine{100           \textcolor{comment}{// When current function is either the Function.prototype.apply or the}}
\DoxyCodeLine{101           \textcolor{comment}{// Function.prototype.call builtin the top frame is either frame of}}
\DoxyCodeLine{102           \textcolor{comment}{// the calling JS function or internal frame.}}
\DoxyCodeLine{103           \textcolor{comment}{// In the latter case we know the caller for sure but in the}}
\DoxyCodeLine{104           \textcolor{comment}{// former case we don't so we simply replace the frame with}}
\DoxyCodeLine{105           \textcolor{comment}{// 'unresolved' entry.}}
\DoxyCodeLine{106           \textcolor{keywordflow}{if} (!sample.has\_external\_callback) \{}
\DoxyCodeLine{107             \mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_a3265435aeee9716f32382a9d9391dda7}{ProfilerStats::Instance}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_aec629b8ca598fc845f8bdb64de52ca19}{AddReason}}(}
\DoxyCodeLine{108                 ProfilerStats::Reason::kInCallOrApply);}
\DoxyCodeLine{109             stack\_trace.push\_back(}
\DoxyCodeLine{110                 \{\mbox{\hyperlink{classv8_1_1internal_1_1CodeEntry_ae0f14ddbd022686f41ae4a2d8f48dde8}{CodeEntry::unresolved\_entry}}(), LineAndColumn\{\}\});}
\DoxyCodeLine{111           \}}
\DoxyCodeLine{112         \}}
\DoxyCodeLine{113       \}}
\DoxyCodeLine{114     \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0; \mbox{\hyperlink{namespacev8_1_1internal}{i}} < sample.frames\_count; ++\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}) \{}
\DoxyCodeLine{117       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} stack\_pos = \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}}\textcolor{keyword}{>}(sample.stack[\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_ad86b3cf21e19e97ce484f32b894d548c}{i}}]);}
\DoxyCodeLine{118       \mbox{\hyperlink{namespacev8_1_1internal_ab4955debfb9384e59e3d4e9fcab5b0a0}{Address}} instruction\_start = \mbox{\hyperlink{namespacev8_1_1internal_acf6bafb5b8483a580f375393c413ee02}{kNullAddress}};}
\DoxyCodeLine{119       CodeEntry* entry = \mbox{\hyperlink{classv8_1_1internal_1_1Symbolizer_a56cd6e2334f84509c7cfc4ea32bc2b4f}{FindEntry}}(stack\_pos, \&instruction\_start);}
\DoxyCodeLine{120       LineAndColumn position = \{\};}
\DoxyCodeLine{121       \textcolor{keywordflow}{if} (entry) \{}
\DoxyCodeLine{122         \textcolor{comment}{// Find out if the entry has an inlining stack associated.}}
\DoxyCodeLine{123         \textcolor{keywordtype}{int} pc\_offset = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(stack\_pos -\/ instruction\_start);}
\DoxyCodeLine{124         \textcolor{comment}{// TODO(petermarshall): pc\_offset can still be negative in some cases.}}
\DoxyCodeLine{125         \textcolor{keyword}{const} std::vector<CodeEntryAndPosition>* inline\_stack =}
\DoxyCodeLine{126             entry-\/>GetInlineStack(pc\_offset);}
\DoxyCodeLine{127         \textcolor{keywordflow}{if} (inline\_stack) \{}
\DoxyCodeLine{128           LineAndColumn most\_inlined\_frame\_pos =}
\DoxyCodeLine{129               entry-\/>GetSourcePosition(pc\_offset);}
\DoxyCodeLine{130           \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} inline\_stack\_entry : *inline\_stack) \{}
\DoxyCodeLine{131             stack\_trace.push\_back(inline\_stack\_entry);}
\DoxyCodeLine{132           \}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134           \textcolor{comment}{// This is a bit of a messy hack. The position for the most-\/inlined}}
\DoxyCodeLine{135           \textcolor{comment}{// frame (the function at the end of the chain of function calls) has}}
\DoxyCodeLine{136           \textcolor{comment}{// the wrong position in inline\_stack. The actual position in}}
\DoxyCodeLine{137           \textcolor{comment}{// this function is stored in the SourcePositionTable in entry. We fix}}
\DoxyCodeLine{138           \textcolor{comment}{// up the position for the most-\/inlined frame here.}}
\DoxyCodeLine{139           \textcolor{comment}{// TODO(petermarshall): Remove this and use a tree with a node per}}
\DoxyCodeLine{140           \textcolor{comment}{// inlining\_id.}}
\DoxyCodeLine{141           \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!inline\_stack-\/>empty());}
\DoxyCodeLine{142           \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}} = stack\_trace.size() -\/ inline\_stack-\/>size();}
\DoxyCodeLine{143           stack\_trace[\mbox{\hyperlink{namespacev8_1_1internal_a0cfab207d565dcf62ebf50f3987e05de}{index}}].line\_and\_column = most\_inlined\_frame\_pos;}
\DoxyCodeLine{144         \}}
\DoxyCodeLine{145         \textcolor{comment}{// Skip unresolved frames (e.g. internal frame) and get source position}}
\DoxyCodeLine{146         \textcolor{comment}{// of the first JS caller.}}
\DoxyCodeLine{147         \textcolor{keywordflow}{if} (src\_pos\_not\_found) \{}
\DoxyCodeLine{148           src\_pos = entry-\/>GetSourcePosition(pc\_offset);}
\DoxyCodeLine{149           \textcolor{keywordflow}{if} (src\_pos.line == \mbox{\hyperlink{classv8_1_1CpuProfileNode_ad54213fe8a795cb6669566f0272fc5ba}{v8::CpuProfileNode::kNoLineNumberInfo}}) \{}
\DoxyCodeLine{150             src\_pos = entry-\/>line\_and\_column();}
\DoxyCodeLine{151           \}}
\DoxyCodeLine{152           src\_pos\_not\_found = \textcolor{keyword}{false};}
\DoxyCodeLine{153         \}}
\DoxyCodeLine{154         position = entry-\/>GetSourcePosition(pc\_offset);}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{comment}{// The inline stack contains the top-\/level function i.e. the same}}
\DoxyCodeLine{157         \textcolor{comment}{// function as entry. We don't want to add it twice. The one from the}}
\DoxyCodeLine{158         \textcolor{comment}{// inline stack has the correct position for this particular inlining}}
\DoxyCodeLine{159         \textcolor{comment}{// so we use it instead of pushing entry to stack\_trace.}}
\DoxyCodeLine{160         \textcolor{keywordflow}{if} (inline\_stack) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{161       \}}
\DoxyCodeLine{162       stack\_trace.push\_back(\{entry, position\});}
\DoxyCodeLine{163     \}}
\DoxyCodeLine{164   \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166   \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_aa9db791c05a0359859a321dcfec42e37}{v8\_flags}}.prof\_browser\_mode) \{}
\DoxyCodeLine{167     \textcolor{keywordtype}{bool} no\_symbolized\_entries = \textcolor{keyword}{true};}
\DoxyCodeLine{168     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} e : stack\_trace) \{}
\DoxyCodeLine{169       \textcolor{keywordflow}{if} (e.code\_entry != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{170         no\_symbolized\_entries = \textcolor{keyword}{false};}
\DoxyCodeLine{171         \textcolor{keywordflow}{break};}
\DoxyCodeLine{172       \}}
\DoxyCodeLine{173     \}}
\DoxyCodeLine{174     \textcolor{comment}{// If no frames were symbolized, put the VM state entry in.}}
\DoxyCodeLine{175     \textcolor{keywordflow}{if} (no\_symbolized\_entries) \{}
\DoxyCodeLine{176       \textcolor{keywordflow}{if} (sample.pc == \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{177         \mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_a3265435aeee9716f32382a9d9391dda7}{ProfilerStats::Instance}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_aec629b8ca598fc845f8bdb64de52ca19}{AddReason}}(ProfilerStats::Reason::kNullPC);}
\DoxyCodeLine{178       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{179         \mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_a3265435aeee9716f32382a9d9391dda7}{ProfilerStats::Instance}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1ProfilerStats_aec629b8ca598fc845f8bdb64de52ca19}{AddReason}}(}
\DoxyCodeLine{180             ProfilerStats::Reason::kNoSymbolizedFrames);}
\DoxyCodeLine{181       \}}
\DoxyCodeLine{182       stack\_trace.push\_back(\{\mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02symbolizer_8cc_03_a9ff437cde058c9959ed1ec57f50bae6e}{EntryForVMState}}(sample.state), LineAndColumn\{\}\});}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184   \}}
\DoxyCodeLine{185 }
\DoxyCodeLine{186   \textcolor{keywordflow}{return} SymbolizedSample\{stack\_trace, src\_pos\};}
\DoxyCodeLine{187 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Profiler\+Stats\+::\+Add\+Reason(), v8\+::internal\+::\+Code\+Entry\+::builtin(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::anonymous\+\_\+namespace\{symbolizer.\+cc\}\+::\+Entry\+For\+VMState(), v8\+::\+EXTERNAL, v8\+::internal\+::\+Tick\+Sample\+::external\+\_\+callback\+\_\+entry, Find\+Entry(), v8\+::internal\+::\+Tick\+Sample\+::frames\+\_\+count, v8\+::internal\+::\+Code\+Entry\+::\+Get\+Inline\+Stack(), v8\+::internal\+::\+Code\+Entry\+::\+Get\+Source\+Position(), v8\+::internal\+::\+Tick\+Sample\+::has\+\_\+external\+\_\+callback, v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::i, v8\+::internal\+::index, v8\+::internal\+::\+Profiler\+Stats\+::\+Instance(), v8\+::\+Cpu\+Profile\+Node\+::k\+No\+Line\+Number\+Info, v8\+::internal\+::k\+Null\+Address, v8\+::internal\+::\+Line\+And\+Column\+::line, v8\+::internal\+::\+Code\+Entry\+::line\+\_\+and\+\_\+column(), v8\+::internal\+::\+Tick\+Sample\+::pc, v8\+::internal\+::\+Tick\+Sample\+::stack, v8\+::internal\+::\+Tick\+Sample\+::state, v8\+::internal\+::\+Tick\+Sample\+::tos, v8\+::internal\+::\+Code\+Entry\+::unresolved\+\_\+entry(), and v8\+::internal\+::v8\+\_\+flags.



Referenced by v8\+::internal\+::\+Sampling\+Events\+Processor\+::\+Symbolize\+And\+Add\+To\+Profiles().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1Symbolizer_ae78e1d9f5caf0c55bffbb1d2c48a6653_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1Symbolizer_ae78e1d9f5caf0c55bffbb1d2c48a6653_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}\label{classv8_1_1internal_1_1Symbolizer_a663097ba3a5fe8989302c43a558686ae}} 
\index{v8::internal::Symbolizer@{v8::internal::Symbolizer}!code\_map\_@{code\_map\_}}
\index{code\_map\_@{code\_map\_}!v8::internal::Symbolizer@{v8::internal::Symbolizer}}
\doxysubsubsection{\texorpdfstring{code\_map\_}{code\_map\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1InstructionStreamMap}{Instruction\+Stream\+Map}}$\ast$ const v8\+::internal\+::\+Symbolizer\+::code\+\_\+map\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 38 of file symbolizer.\+h.



Referenced by Find\+Entry().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{symbolizer_8h}{symbolizer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/profiler/\mbox{\hyperlink{symbolizer_8cc}{symbolizer.\+cc}}\end{DoxyCompactItemize}
