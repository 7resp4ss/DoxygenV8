\hypertarget{classv8_1_1internal_1_1SharedHeapSerializer}{}\doxysection{v8\+::internal\+::Shared\+Heap\+Serializer Class Reference}
\label{classv8_1_1internal_1_1SharedHeapSerializer}\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}


{\ttfamily \#include $<$shared-\/heap-\/serializer.\+h$>$}



Inheritance diagram for v8\+::internal\+::Shared\+Heap\+Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classv8_1_1internal_1_1SharedHeapSerializer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for v8\+::internal\+::Shared\+Heap\+Serializer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd}{Shared\+Heap\+Serializer}} (\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{classv8_1_1internal_1_1Snapshot_a379f04b363d07d48b5f8d9de93fd1b72}{Snapshot\+::\+Serializer\+Flags}} \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}})
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a2688d0a59a7177411661f04fcb49e6f1}{$\sim$\+Shared\+Heap\+Serializer}} () override
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ac447a4a7db588cbc64116c69110bb87b}{Shared\+Heap\+Serializer}} (const \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}} \&)=delete
\item 
\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}} \& \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ab191f5121d624d1dd414ece34260e61a}{operator=}} (const \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}} \&)=delete
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_af8ca55af20fb8281c6c037c69e1d86db}{Finalize\+Serialization}} ()
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a2732a9661fc56c76fb676498b9aeee61}{Serialize\+Using\+Shared\+Heap\+Object\+Cache}} (\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSink}{Snapshot\+Byte\+Sink}} $\ast$sink, \mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}{Can\+Be\+In\+Shared\+Old\+Space}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj)
\item 
static \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6}{Should\+Be\+In\+Shared\+Heap\+Object\+Cache}} (\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9}{Should\+Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing}} () const
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a}{Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing}} ()
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15}{Serialize\+String\+Table}} (\mbox{\hyperlink{classv8_1_1internal_1_1StringTable}{String\+Table}} $\ast$string\+\_\+table)
\item 
void \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a81ea8528927e29d4ba0057e4ed508218}{Serialize\+Object\+Impl}} (\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$ obj, \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}} slot\+\_\+type) override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 19 of file shared-\/heap-\/serializer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd}\label{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!SharedHeapSerializer@{SharedHeapSerializer}}
\index{SharedHeapSerializer@{SharedHeapSerializer}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{SharedHeapSerializer()}{SharedHeapSerializer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Shared\+Heap\+Serializer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Isolate}{Isolate}} $\ast$}]{isolate,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Snapshot_a379f04b363d07d48b5f8d9de93fd1b72}{Snapshot\+::\+Serializer\+Flags}}}]{flags }\end{DoxyParamCaption})}



Definition at line 37 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{39     : \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_a0baf026a8c955eb67b6638705c795552}{RootsSerializer}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}, \mbox{\hyperlink{namespacev8_1_1internal_a83b0c194e63513f61999805edd71b125}{flags}}, \mbox{\hyperlink{namespacev8_1_1internal_ae6e8bb7da3421a00b1b77972829b7977a470307630463716982563e0766200cba}{RootIndex::kFirstStrongRoot}})}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{41       ,}
\DoxyCodeLine{42       serialized\_objects\_(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ac74a11613906581a9989b1cb7f7b3275}{heap}}())}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9}{ShouldReconstructSharedHeapObjectCacheForTesting}}()) \{}
\DoxyCodeLine{46     \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a}{ReconstructSharedHeapObjectCacheForTesting}}();}
\DoxyCodeLine{47   \}}
\DoxyCodeLine{48 \}}

\end{DoxyCode}


References v8\+::internal\+::k\+First\+Strong\+Root, Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing(), and Should\+Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a2688d0a59a7177411661f04fcb49e6f1}\label{classv8_1_1internal_1_1SharedHeapSerializer_a2688d0a59a7177411661f04fcb49e6f1}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!````~SharedHeapSerializer@{$\sim$SharedHeapSerializer}}
\index{````~SharedHeapSerializer@{$\sim$SharedHeapSerializer}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{$\sim$SharedHeapSerializer()}{~SharedHeapSerializer()}}
{\footnotesize\ttfamily v8\+::internal\+::\+Shared\+Heap\+Serializer\+::$\sim$\+Shared\+Heap\+Serializer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Definition at line 50 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{50                                             \{}
\DoxyCodeLine{51   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa71724460718545dc17a6ce88b2c4300}{OutputStatistics}}(\textcolor{stringliteral}{"{}SharedHeapSerializer"{}});}
\DoxyCodeLine{52 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Serializer\+::\+Output\+Statistics().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a2688d0a59a7177411661f04fcb49e6f1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_ac447a4a7db588cbc64116c69110bb87b}\label{classv8_1_1internal_1_1SharedHeapSerializer_ac447a4a7db588cbc64116c69110bb87b}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!SharedHeapSerializer@{SharedHeapSerializer}}
\index{SharedHeapSerializer@{SharedHeapSerializer}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{SharedHeapSerializer()}{SharedHeapSerializer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Shared\+Heap\+Serializer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}\label{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!CanBeInSharedOldSpace@{CanBeInSharedOldSpace}}
\index{CanBeInSharedOldSpace@{CanBeInSharedOldSpace}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{CanBeInSharedOldSpace()}{CanBeInSharedOldSpace()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Can\+Be\+In\+Shared\+Old\+Space (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 15 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{15                                                                        \{}
\DoxyCodeLine{16   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(obj)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{17   \textcolor{keywordflow}{if} (IsString(obj)) \{}
\DoxyCodeLine{18     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(obj) ||}
\DoxyCodeLine{19            \mbox{\hyperlink{classv8_1_1internal_1_1String_a651ee3100baabaf40f0b586d124cb608}{String::IsInPlaceInternalizable}}(Cast<String>(obj));}
\DoxyCodeLine{20   \}}
\DoxyCodeLine{21   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{22 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Read\+Only\+Heap\+::\+Contains(), v8\+::internal\+::\+String\+::\+Is\+In\+Place\+Internalizable(), and v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String().



Referenced by Finalize\+Serialization(), Serialize\+Object\+Impl(), and Should\+Be\+In\+Shared\+Heap\+Object\+Cache().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_af8ca55af20fb8281c6c037c69e1d86db}\label{classv8_1_1internal_1_1SharedHeapSerializer_af8ca55af20fb8281c6c037c69e1d86db}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!FinalizeSerialization@{FinalizeSerialization}}
\index{FinalizeSerialization@{FinalizeSerialization}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{FinalizeSerialization()}{FinalizeSerialization()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Finalize\+Serialization (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 54 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{54                                                  \{}
\DoxyCodeLine{55   \textcolor{comment}{// This is called after serialization of the startup and context snapshots}}
\DoxyCodeLine{56   \textcolor{comment}{// which entries are added to the shared heap object cache. Terminate the}}
\DoxyCodeLine{57   \textcolor{comment}{// cache with an undefined.}}
\DoxyCodeLine{58   \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} \mbox{\hyperlink{namespacev8_1_1internal_ab165da27eb70b7cac315ad3c2c991c06}{undefined}} = ReadOnlyRoots(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()).undefined\_value();}
\DoxyCodeLine{59   \mbox{\hyperlink{classv8_1_1internal_1_1RootVisitor_aa78a6dcf8930fbd29d1cb4c6605c2fae}{VisitRootPointer}}(Root::kSharedHeapObjectCache, \textcolor{keyword}{nullptr},}
\DoxyCodeLine{60                    FullObjectSlot(\&\mbox{\hyperlink{namespacev8_1_1internal_ab165da27eb70b7cac315ad3c2c991c06}{undefined}}));}
\DoxyCodeLine{61 }
\DoxyCodeLine{62   \textcolor{comment}{// When v8\_flags.shared\_string\_table is true, all internalized and}}
\DoxyCodeLine{63   \textcolor{comment}{// internalizable-\/in-\/place strings are in the shared heap.}}
\DoxyCodeLine{64   \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15}{SerializeStringTable}}(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>string\_table());}
\DoxyCodeLine{65   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a96ef0df54684240f4839fc03c1e6717c}{SerializeDeferredObjects}}();}
\DoxyCodeLine{66   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab5a0fb29fbf0f1c4db6044eafd5d5b97}{Pad}}();}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{69   \textcolor{comment}{// Check that all serialized object are in shared heap and not RO. RO objects}}
\DoxyCodeLine{70   \textcolor{comment}{// should be in the RO snapshot.}}
\DoxyCodeLine{71   IdentityMap<int, base::DefaultAllocationPolicy>::IteratableScope it\_scope(}
\DoxyCodeLine{72       \&serialized\_objects\_);}
\DoxyCodeLine{73   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = it\_scope.begin(); it != it\_scope.end(); ++it) \{}
\DoxyCodeLine{74     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} obj = Cast<HeapObject>(it.key());}
\DoxyCodeLine{75     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}{CanBeInSharedOldSpace}}(obj));}
\DoxyCodeLine{76     \mbox{\hyperlink{src_2base_2logging_8h_a3e1cfef60e774a81f30eaddf26a3a274}{CHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(obj));}
\DoxyCodeLine{77   \}}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{79 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Identity\+Map$<$ V, Allocation\+Policy $>$\+::\+Iteratable\+Scope\+::begin(), Can\+Be\+In\+Shared\+Old\+Space(), CHECK, v8\+::internal\+::\+Read\+Only\+Heap\+::\+Contains(), v8\+::internal\+::\+Identity\+Map$<$ V, Allocation\+Policy $>$\+::\+Iteratable\+Scope\+::end(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::\+Serializer\+::\+Pad(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Deferred\+Objects(), Serialize\+String\+Table(), v8\+::internal\+::undefined, and v8\+::internal\+::\+Root\+Visitor\+::\+Visit\+Root\+Pointer().



Referenced by v8\+::internal\+::\+Snapshot\+::\+Create().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_af8ca55af20fb8281c6c037c69e1d86db_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_af8ca55af20fb8281c6c037c69e1d86db_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_ab191f5121d624d1dd414ece34260e61a}\label{classv8_1_1internal_1_1SharedHeapSerializer_ab191f5121d624d1dd414ece34260e61a}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!operator=@{operator=}}
\index{operator=@{operator=}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}}\& v8\+::internal\+::\+Shared\+Heap\+Serializer\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer}{Shared\+Heap\+Serializer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a}\label{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!ReconstructSharedHeapObjectCacheForTesting@{ReconstructSharedHeapObjectCacheForTesting}}
\index{ReconstructSharedHeapObjectCacheForTesting@{ReconstructSharedHeapObjectCacheForTesting}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{ReconstructSharedHeapObjectCacheForTesting()}{ReconstructSharedHeapObjectCacheForTesting()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 203 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{203                                                                       \{}
\DoxyCodeLine{204   std::vector<Tagged<Object>>* cache =}
\DoxyCodeLine{205       \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a79661c3a6407e46b4aa382eae991ecfa}{shared\_space\_isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ab8086fd9b53a8bc78c60a1d142e03753}{shared\_heap\_object\_cache}}();}
\DoxyCodeLine{206   \textcolor{comment}{// Don't reconstruct the final element, which is always undefined and marks}}
\DoxyCodeLine{207   \textcolor{comment}{// the end of the cache, since serializing the live Isolate may extend the}}
\DoxyCodeLine{208   \textcolor{comment}{// shared object cache.}}
\DoxyCodeLine{209   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacev8_1_1internal}{i}} = 0, \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} = cache-\/>size(); \mbox{\hyperlink{namespacev8_1_1internal}{i}} < \mbox{\hyperlink{flag-definitions_8h_a3df0b28b666e942ffb9d7d04acdb9715}{size}} -\/ 1; \mbox{\hyperlink{namespacev8_1_1internal}{i}}++) \{}
\DoxyCodeLine{210     Handle<HeapObject> obj(Cast<HeapObject>(cache-\/>at(\mbox{\hyperlink{namespacev8_1_1internal}{i}})), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{211     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6}{ShouldBeInSharedHeapObjectCache}}(*obj));}
\DoxyCodeLine{212     \textcolor{keywordtype}{int} cache\_index = \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_aa6fa6c730b6d5617ebf729392e323df3}{SerializeInObjectCache}}(obj);}
\DoxyCodeLine{213     \mbox{\hyperlink{src_2base_2macros_8h_a280b0798f270f4b3f361c9ab64832956}{USE}}(cache\_index);}
\DoxyCodeLine{214     \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(cache\_index, \mbox{\hyperlink{namespacev8_1_1internal}{i}});}
\DoxyCodeLine{215   \}}
\DoxyCodeLine{216   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsUndefined(cache-\/>back(), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()));}
\DoxyCodeLine{217 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::\+Roots\+Serializer\+::\+Serialize\+In\+Object\+Cache(), v8\+::internal\+::\+Isolate\+::shared\+\_\+heap\+\_\+object\+\_\+cache(), v8\+::internal\+::\+Isolate\+::shared\+\_\+space\+\_\+isolate(), Should\+Be\+In\+Shared\+Heap\+Object\+Cache(), size(), and USE.



Referenced by Shared\+Heap\+Serializer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_ac4a5ce9cdd67909dc85cf56f8f1afb1a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a81ea8528927e29d4ba0057e4ed508218}\label{classv8_1_1internal_1_1SharedHeapSerializer_a81ea8528927e29d4ba0057e4ed508218}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!SerializeObjectImpl@{SerializeObjectImpl}}
\index{SerializeObjectImpl@{SerializeObjectImpl}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeObjectImpl()}{SerializeObjectImpl()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Serialize\+Object\+Impl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91}{Slot\+Type}}}]{slot\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a7a703abcab3bd3b29e4bc8ffef87e538}{v8\+::internal\+::\+Serializer}}.



Definition at line 162 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{163                                                                    \{}
\DoxyCodeLine{164   \textcolor{comment}{// Objects in the shared heap cannot depend on per-\/Isolate roots but can}}
\DoxyCodeLine{165   \textcolor{comment}{// depend on RO roots since sharing objects requires sharing the RO space.}}
\DoxyCodeLine{166   \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}{CanBeInSharedOldSpace}}(*obj) || \mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(*obj));}
\DoxyCodeLine{167   \{}
\DoxyCodeLine{168     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{169     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} raw = *obj;}
\DoxyCodeLine{170     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ae7ebac428ba04f4c58134e38c7f97f65}{SerializeHotObject}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{171     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_ad6285dd852285472d25fc926c767d8a6}{IsRootAndHasBeenSerialized}}(raw) \&\& \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa0ceafd7dc9eaf326d5f14caa30525f4}{SerializeRoot}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{172   \}}
\DoxyCodeLine{173   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_aa24dcab38dd340e096d15dcb7e1c4ff5}{SerializeReadOnlyObjectReference}}(*obj, \&\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}})) \textcolor{keywordflow}{return};}
\DoxyCodeLine{174   \{}
\DoxyCodeLine{175     \mbox{\hyperlink{namespacev8_1_1internal_af2248a427f8ff8f81e68a2a87758e145}{DisallowGarbageCollection}} \mbox{\hyperlink{namespacev8_1_1internal_1_1anonymous__namespace_02json-stringifier_8cc_03_a63d8eefb47468aa3f816fbe26a59466a}{no\_gc}};}
\DoxyCodeLine{176     \mbox{\hyperlink{namespacev8_1_1internal_a57f5ecf71b9a2757b0555b2be4c640b8}{Tagged<HeapObject>}} raw = *obj;}
\DoxyCodeLine{177     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_afd1dba8a5965260866a8e8c3891c89b0}{SerializeBackReference}}(raw)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{178     \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_a51aabcdf920d445db9f8906365bc1a8b}{CheckRehashability}}(raw);}
\DoxyCodeLine{179 }
\DoxyCodeLine{180     \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(!\mbox{\hyperlink{classv8_1_1internal_1_1ReadOnlyHeap_a27e42af8000235aeb8fc6695f6296aca}{ReadOnlyHeap::Contains}}(raw));}
\DoxyCodeLine{181   \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183   ObjectSerializer object\_serializer(\textcolor{keyword}{this}, obj, \&\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}});}
\DoxyCodeLine{184   object\_serializer.Serialize(slot\_type);}
\DoxyCodeLine{185 }
\DoxyCodeLine{186 \textcolor{preprocessor}{\#ifdef DEBUG}}
\DoxyCodeLine{187   \mbox{\hyperlink{src_2base_2logging_8h_a7bf1ad59490562f507223cd6ca2cc6fa}{CHECK\_NULL}}(serialized\_objects\_.Find(obj));}
\DoxyCodeLine{188   \textcolor{comment}{// There's no "{}IdentitySet"{}, so use an IdentityMap with a value that is}}
\DoxyCodeLine{189   \textcolor{comment}{// later ignored.}}
\DoxyCodeLine{190   serialized\_objects\_.Insert(obj, 0);}
\DoxyCodeLine{191 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{192 \}}

\end{DoxyCode}


References Can\+Be\+In\+Shared\+Old\+Space(), CHECK\+\_\+\+NULL, v8\+::internal\+::\+Roots\+Serializer\+::\+Check\+Rehashability(), v8\+::internal\+::\+Read\+Only\+Heap\+::\+Contains(), v8\+::internal\+::\+DCHECK(), v8\+::internal\+::\+Roots\+Serializer\+::\+Is\+Root\+And\+Has\+Been\+Serialized(), v8\+::internal\+::anonymous\+\_\+namespace\{json-\/stringifier.\+cc\}\+::no\+\_\+gc, v8\+::internal\+::\+Serializer\+::\+Object\+Serializer\+::\+Serialize(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Back\+Reference(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Hot\+Object(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Read\+Only\+Object\+Reference(), v8\+::internal\+::\+Serializer\+::\+Serialize\+Root(), and v8\+::internal\+::\+Serializer\+::sink\+\_\+.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a81ea8528927e29d4ba0057e4ed508218_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15}\label{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!SerializeStringTable@{SerializeStringTable}}
\index{SerializeStringTable@{SerializeStringTable}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeStringTable()}{SerializeStringTable()}}
{\footnotesize\ttfamily void v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Serialize\+String\+Table (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1StringTable}{String\+Table}} $\ast$}]{string\+\_\+table }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 110 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{110                                                                          \{}
\DoxyCodeLine{111   \textcolor{comment}{// A StringTable is serialized as:}}
\DoxyCodeLine{112   \textcolor{comment}{//}}
\DoxyCodeLine{113   \textcolor{comment}{//   N : int}}
\DoxyCodeLine{114   \textcolor{comment}{//   string 1}}
\DoxyCodeLine{115   \textcolor{comment}{//   string 2}}
\DoxyCodeLine{116   \textcolor{comment}{//   ...}}
\DoxyCodeLine{117   \textcolor{comment}{//   string N}}
\DoxyCodeLine{118   \textcolor{comment}{//}}
\DoxyCodeLine{119   \textcolor{comment}{// Notably, the hashmap structure, including empty and deleted elements, is}}
\DoxyCodeLine{120   \textcolor{comment}{// not serialized.}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a6c1513b0ef81406f8b5ae65f22492480}{sink\_}}.\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSink_aabc2272982a939be24759c15eabaa615}{PutUint30}}(string\_table-\/>NumberOfElements(),}
\DoxyCodeLine{123                   \textcolor{stringliteral}{"{}String table number of elements"{}});}
\DoxyCodeLine{124 }
\DoxyCodeLine{125   \textcolor{comment}{// Custom RootVisitor which walks the string table, but only serializes the}}
\DoxyCodeLine{126   \textcolor{comment}{// string entries. This is an inline class to be able to access the non-\/public}}
\DoxyCodeLine{127   \textcolor{comment}{// SerializeObject method.}}
\DoxyCodeLine{128   \textcolor{keyword}{class }SharedHeapSerializerStringTableVisitor : \textcolor{keyword}{public} RootVisitor \{}
\DoxyCodeLine{129    \textcolor{keyword}{public}:}
\DoxyCodeLine{130     \textcolor{keyword}{explicit} SharedHeapSerializerStringTableVisitor(}
\DoxyCodeLine{131         \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd}{SharedHeapSerializer}}* serializer)}
\DoxyCodeLine{132         : serializer\_(serializer) \{\}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     \textcolor{keywordtype}{void} \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_a8e8e9b929c53960d72e0368a91522821}{VisitRootPointers}}(\mbox{\hyperlink{namespacev8_1_1internal_ae1439207c9f98c41dbdea3eca3572d54}{Root}} root, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* description,}
\DoxyCodeLine{135                            FullObjectSlot start, FullObjectSlot \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{136       \mbox{\hyperlink{namespacev8_1_1internal_acdec713c25068019f935e35976f5b666}{UNREACHABLE}}();}
\DoxyCodeLine{137     \}}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{keywordtype}{void} \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_a8e8e9b929c53960d72e0368a91522821}{VisitRootPointers}}(\mbox{\hyperlink{namespacev8_1_1internal_ae1439207c9f98c41dbdea3eca3572d54}{Root}} root, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* description,}
\DoxyCodeLine{140                            \mbox{\hyperlink{namespacev8_1_1internal_a5c615a28b35c0e015a72d72bd0f6bb6f}{OffHeapObjectSlot}} start,}
\DoxyCodeLine{141                            \mbox{\hyperlink{namespacev8_1_1internal_a5c615a28b35c0e015a72d72bd0f6bb6f}{OffHeapObjectSlot}} \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{142       \mbox{\hyperlink{src_2base_2logging_8h_af9c313d74155f7f201955a939e24c71f}{DCHECK\_EQ}}(root, Root::kStringTable);}
\DoxyCodeLine{143       Isolate* \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}} = serializer\_-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Factory_a7ac37ce08b9f8eae9f45701872d1949d}{isolate}}();}
\DoxyCodeLine{144       \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespacev8_1_1internal_a5c615a28b35c0e015a72d72bd0f6bb6f}{OffHeapObjectSlot}} current = start; current < \mbox{\hyperlink{namespacev8_1_1internal_1_1compiler_a51dcb90ae077172b12d63271c7e7ba0c}{end}}; ++current) \{}
\DoxyCodeLine{145         \mbox{\hyperlink{namespacev8_1_1internal_a5297fd2c72981b2220e6b9a831570fb3}{Tagged<Object>}} obj = current.load(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}});}
\DoxyCodeLine{146         \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_a0786c89c1004cb964dc034b138b263fd}{IsHeapObject}}(obj)) \{}
\DoxyCodeLine{147           \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(obj));}
\DoxyCodeLine{148           serializer\_-\/>SerializeObject(\mbox{\hyperlink{namespacev8_1_1internal_a8c89f00da07e125218128b9fbf0a321c}{handle}}(Cast<HeapObject>(obj), \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}),}
\DoxyCodeLine{149                                        \mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a108b70a5e6f10e237fd67e9ccb692c91a90de82d2ff185fb7bada4622349083e2}{SlotType::kAnySlot}});}
\DoxyCodeLine{150         \}}
\DoxyCodeLine{151       \}}
\DoxyCodeLine{152     \}}
\DoxyCodeLine{153 }
\DoxyCodeLine{154    \textcolor{keyword}{private}:}
\DoxyCodeLine{155     \mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a06da2f7005509bb7aeecdafd6f8010cd}{SharedHeapSerializer}}* serializer\_;}
\DoxyCodeLine{156   \};}
\DoxyCodeLine{157 }
\DoxyCodeLine{158   SharedHeapSerializerStringTableVisitor string\_table\_visitor(\textcolor{keyword}{this});}
\DoxyCodeLine{159   \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a184abe8a4a39f941a2f33a937776315d}{string\_table}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1StringTable_a1f5c9338a7df2c61bfda8ae715ec3f14}{IterateElements}}(\&string\_table\_visitor);}
\DoxyCodeLine{160 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+EQ, v8\+::internal\+::compiler\+::end(), v8\+::internal\+::handle(), v8\+::internal\+::\+Is\+Heap\+Object(), v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String(), v8\+::internal\+::\+Factory\+::isolate(), v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::\+String\+Table\+::\+Iterate\+Elements(), v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Any\+Slot, v8\+::internal\+::\+String\+Table\+::\+Number\+Of\+Elements(), v8\+::internal\+::\+Snapshot\+Byte\+Sink\+::\+Put\+Uint30(), v8\+::internal\+::\+Serializer\+::sink\+\_\+, v8\+::internal\+::\+Isolate\+::string\+\_\+table(), v8\+::internal\+::\+UNREACHABLE(), and v8\+::internal\+::\+Roots\+Serializer\+::\+Visit\+Root\+Pointers().



Referenced by Finalize\+Serialization().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_af56d79ebe541b680e5333f38bbef7d15_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a2732a9661fc56c76fb676498b9aeee61}\label{classv8_1_1internal_1_1SharedHeapSerializer_a2732a9661fc56c76fb676498b9aeee61}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!SerializeUsingSharedHeapObjectCache@{SerializeUsingSharedHeapObjectCache}}
\index{SerializeUsingSharedHeapObjectCache@{SerializeUsingSharedHeapObjectCache}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{SerializeUsingSharedHeapObjectCache()}{SerializeUsingSharedHeapObjectCache()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Serialize\+Using\+Shared\+Heap\+Object\+Cache (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1SnapshotByteSink}{Snapshot\+Byte\+Sink}} $\ast$}]{sink,  }\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Handle}{Handle}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj }\end{DoxyParamCaption})}



Definition at line 81 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{82                                                     \{}
\DoxyCodeLine{83   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6}{ShouldBeInSharedHeapObjectCache}}(*obj)) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{84   \textcolor{keywordtype}{int} cache\_index = \mbox{\hyperlink{classv8_1_1internal_1_1RootsSerializer_aa6fa6c730b6d5617ebf729392e323df3}{SerializeInObjectCache}}(obj);}
\DoxyCodeLine{85 }
\DoxyCodeLine{86   \textcolor{comment}{// When testing deserialization of a snapshot from a live Isolate where there}}
\DoxyCodeLine{87   \textcolor{comment}{// is also a shared Isolate, the shared object cache needs to be extended}}
\DoxyCodeLine{88   \textcolor{comment}{// because the live isolate may have had new internalized strings that were}}
\DoxyCodeLine{89   \textcolor{comment}{// not present in the startup snapshot to be serialized.}}
\DoxyCodeLine{90   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9}{ShouldReconstructSharedHeapObjectCacheForTesting}}()) \{}
\DoxyCodeLine{91     std::vector<Tagged<Object>>* existing\_cache =}
\DoxyCodeLine{92         \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a79661c3a6407e46b4aa382eae991ecfa}{shared\_space\_isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_ab8086fd9b53a8bc78c60a1d142e03753}{shared\_heap\_object\_cache}}();}
\DoxyCodeLine{93     \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} existing\_cache\_size = existing\_cache-\/>size();}
\DoxyCodeLine{94     \textcolor{comment}{// This is strictly < because the existing cache contains the terminating}}
\DoxyCodeLine{95     \textcolor{comment}{// undefined value, which the reconstructed cache does not.}}
\DoxyCodeLine{96     \mbox{\hyperlink{src_2base_2logging_8h_af1a711c8d5520dff78858ddefd2ad668}{DCHECK\_LT}}(base::checked\_cast<size\_t>(cache\_index), existing\_cache\_size);}
\DoxyCodeLine{97     \textcolor{keywordflow}{if} (base::checked\_cast<size\_t>(cache\_index) == existing\_cache\_size -\/ 1) \{}
\DoxyCodeLine{98       ReadOnlyRoots roots(\mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}());}
\DoxyCodeLine{99       \mbox{\hyperlink{namespacev8_1_1internal_aa6b3743bd5d773c552654f2a6c3efa4a}{DCHECK}}(IsUndefined(existing\_cache-\/>back(), roots));}
\DoxyCodeLine{100       existing\_cache-\/>back() = *obj;}
\DoxyCodeLine{101       existing\_cache-\/>push\_back(roots.undefined\_value());}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103   \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105   sink-\/>Put(\mbox{\hyperlink{classv8_1_1internal_1_1SerializerDeserializer_a0fc92b9bfbeae623ad8508e89f71619aa9a1e118a7f07b36e67c15ff7a709e56b}{kSharedHeapObjectCache}}, \textcolor{stringliteral}{"{}SharedHeapObjectCache"{}});}
\DoxyCodeLine{106   sink-\/>PutUint30(cache\_index, \textcolor{stringliteral}{"{}shared\_heap\_object\_cache\_index"{}});}
\DoxyCodeLine{107   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{108 \}}

\end{DoxyCode}


References v8\+::internal\+::\+DCHECK(), DCHECK\+\_\+\+LT, v8\+::internal\+::\+Serializer\+::isolate(), v8\+::internal\+::\+Serializer\+Deserializer\+::k\+Shared\+Heap\+Object\+Cache, v8\+::internal\+::\+Snapshot\+Byte\+Sink\+::\+Put(), v8\+::internal\+::\+Snapshot\+Byte\+Sink\+::\+Put\+Uint30(), v8\+::internal\+::\+Roots\+Serializer\+::\+Serialize\+In\+Object\+Cache(), v8\+::internal\+::\+Isolate\+::shared\+\_\+heap\+\_\+object\+\_\+cache(), v8\+::internal\+::\+Isolate\+::shared\+\_\+space\+\_\+isolate(), Should\+Be\+In\+Shared\+Heap\+Object\+Cache(), and Should\+Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing().



Referenced by v8\+::internal\+::\+Startup\+Serializer\+::\+Serialize\+Using\+Shared\+Heap\+Object\+Cache().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a2732a9661fc56c76fb676498b9aeee61_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a2732a9661fc56c76fb676498b9aeee61_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6}\label{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!ShouldBeInSharedHeapObjectCache@{ShouldBeInSharedHeapObjectCache}}
\index{ShouldBeInSharedHeapObjectCache@{ShouldBeInSharedHeapObjectCache}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{ShouldBeInSharedHeapObjectCache()}{ShouldBeInSharedHeapObjectCache()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Should\+Be\+In\+Shared\+Heap\+Object\+Cache (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classv8_1_1internal_1_1Tagged}{Tagged}}$<$ \mbox{\hyperlink{classv8_1_1internal_1_1HeapObject}{Heap\+Object}} $>$}]{obj }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 25 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{26                             \{}
\DoxyCodeLine{27   \textcolor{comment}{// To keep the shared heap object cache lean, only include objects that should}}
\DoxyCodeLine{28   \textcolor{comment}{// not be duplicated. Currently, that is only internalized strings. In-\/place}}
\DoxyCodeLine{29   \textcolor{comment}{// internalizable strings will still be allocated in the shared heap by the}}
\DoxyCodeLine{30   \textcolor{comment}{// deserializer, but do not need to be kept alive forever in the cache.}}
\DoxyCodeLine{31   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classv8_1_1internal_1_1SharedHeapSerializer_a0ac08f8a525cfe18ce1eec80112409b5}{CanBeInSharedOldSpace}}(obj)) \{}
\DoxyCodeLine{32     \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacev8_1_1internal_1_1InstanceTypeChecker_aa50b8d8a7e8d5da47c21d36be5b2a14d}{IsInternalizedString}}(obj)) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{33   \}}
\DoxyCodeLine{34   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References Can\+Be\+In\+Shared\+Old\+Space(), and v8\+::internal\+::\+Instance\+Type\+Checker\+::\+Is\+Internalized\+String().



Referenced by Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing(), and Serialize\+Using\+Shared\+Heap\+Object\+Cache().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_a2aea4f3713723d7bf9206fe8aeb574b6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9}\label{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9}} 
\index{v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}!ShouldReconstructSharedHeapObjectCacheForTesting@{ShouldReconstructSharedHeapObjectCacheForTesting}}
\index{ShouldReconstructSharedHeapObjectCacheForTesting@{ShouldReconstructSharedHeapObjectCacheForTesting}!v8::internal::SharedHeapSerializer@{v8::internal::SharedHeapSerializer}}
\doxysubsubsection{\texorpdfstring{ShouldReconstructSharedHeapObjectCacheForTesting()}{ShouldReconstructSharedHeapObjectCacheForTesting()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacev8_1_1internal_a4e2118a7c0d730210e0cb87b511cba70}{bool}} v8\+::internal\+::\+Shared\+Heap\+Serializer\+::\+Should\+Reconstruct\+Shared\+Heap\+Object\+Cache\+For\+Testing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 194 of file shared-\/heap-\/serializer.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{195           \{}
\DoxyCodeLine{196   \textcolor{comment}{// When the live Isolate being serialized is not a client Isolate, there's no}}
\DoxyCodeLine{197   \textcolor{comment}{// need to reconstruct the shared heap object cache because it is not actually}}
\DoxyCodeLine{198   \textcolor{comment}{// shared.}}
\DoxyCodeLine{199   \textcolor{keywordflow}{return} \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_a3698bf5ae0db58aff1c28981fc1965ba}{reconstruct\_read\_only\_and\_shared\_object\_caches\_for\_testing}}() \&\&}
\DoxyCodeLine{200          \mbox{\hyperlink{classv8_1_1internal_1_1Serializer_ab8e7deae3fc51a8dfcf3329cc74ffa1b}{isolate}}()-\/>\mbox{\hyperlink{classv8_1_1internal_1_1Isolate_a8766ebe269e544125eaf0e70146ee2dc}{has\_shared\_space}}();}
\DoxyCodeLine{201 \}}

\end{DoxyCode}


References v8\+::internal\+::\+Isolate\+::has\+\_\+shared\+\_\+space(), v8\+::internal\+::\+Serializer\+::isolate(), and v8\+::internal\+::\+Serializer\+::reconstruct\+\_\+read\+\_\+only\+\_\+and\+\_\+shared\+\_\+object\+\_\+caches\+\_\+for\+\_\+testing().



Referenced by Serialize\+Using\+Shared\+Heap\+Object\+Cache(), and Shared\+Heap\+Serializer().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classv8_1_1internal_1_1SharedHeapSerializer_ab4b36f7c984176265732fdddcda2ddd9_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{shared-heap-serializer_8h}{shared-\/heap-\/serializer.\+h}}\item 
/mnt/\+V8\+Source\+Code/src/snapshot/\mbox{\hyperlink{shared-heap-serializer_8cc}{shared-\/heap-\/serializer.\+cc}}\end{DoxyCompactItemize}
